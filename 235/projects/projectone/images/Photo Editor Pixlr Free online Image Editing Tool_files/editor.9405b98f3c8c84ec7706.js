var editor;(()=>{"use strict";var e,t,s,i,a,n,r,o,h,c={289:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MasterpassDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.MasterpassDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"MasterpassDetails.FundingSourceEnum"},{name:"masterpassTransactionId",baseName:"masterpassTransactionId",type:"string"},{name:"type",baseName:"type",type:"MasterpassDetails.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Masterpass="masterpass"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.MasterpassDetails||(t.MasterpassDetails={}))},411:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(42268),a=s(54738),n=s(75770),r=s(82042),o=s(15818),h=s(59350),c=s(71499),l=s(85337),d=s(21742);class p extends n.A{constructor(e){super("eraser",e),this.stage=e,this.isShiftDown=!1,this.keyDown=e=>{if("Shift"!==e.key)switch(e.key){case",":e.shiftKey?this.brushPod.stepSoftness(.1):this.brushPod.stepSize(-10);break;case".":e.shiftKey?this.brushPod.stepSoftness(-.1):this.brushPod.stepSize(10)}else this.isShiftDown=!0},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1)},this.layerSelect=()=>{if(!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("eraser-no-layer").style.display="flex",(0,i.Ay)("eraser-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("eraser-no-layer").style.display="none",(0,i.Ay)("eraser-settings").style.display="flex",this.selected=this.stage.fresco.getSelected(),this.cached=a.oM(this.selected.canvas),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"none"),this.stage.fresco.hasSelection()&&this.scratch.addBake(),this.usePen=(0,i.Ay)("eraser-pen-pressure").checked,this.isTransparent=!(0===this.stage.fresco.selectedLayerNr()&&this.selected.settings.locked)||a.P1(this.selected.canvas),this.updateBrush()},this.updateBrush=()=>{this.selected?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom,new o.A(255,255,255,255))):this.stage.coating.removeCursorImage()},this.down=(e,t,s)=>{this.selected&&(this.stage.coating.freeze(!0),this.brush.generate(new o.A,(0,i.Ay)("eraser-hard-tip").checked),this.isShiftDown||(this.x=this.y=-1),"touch"!==t&&this.move(e,t,s),this.addMoveListeners())},this.x=-1,this.y=-1,this.move=(e,t,s)=>{let i=this.brush.getStep(),a=!1;if(this.scratch.ctx.globalAlpha=("pen"===t||"touch"===t)&&this.usePen&&s>0?s*s:this.flow.getValue(),e=this.stage.translateRasterToFresco(e,this.selected.rect),-1===this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),a=!0),e.x!==this.x||e.y!==this.y){let t=e.x-this.x,s=e.y-this.y,n=t>0?1:-1,r=s>0?1:-1;if(t=t<0?-t:t,s=s<0?-s:s,t>s){let e=.5*t;for(let o=1;o<=t;o++)this.x+=n,e+=s,e>=t&&(e-=t,this.y+=r),(this.x>this.lx+i||this.x<this.lx-i||this.y>this.ly+i||this.y<this.ly-i)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),a=!0)}else{let e=.5*s;for(let o=1;o<=s;o++)this.y+=r,e+=t,e>=s&&(e-=s,this.x+=n),(this.x>this.lx+i||this.x<this.lx-i||this.y>this.ly+i||this.y<this.ly-i)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),a=!0)}}a&&(this.scratch.applySelection(this.stage),this.selected.replaceCanvas(this.cached),this.scratch.drawToLayer(this.selected,this.isTransparent?"destination-out":"source-over",this.opacity.getValue()),this.selected.render(),window.requestAnimationFrame(()=>this.stage.render()))},this.drawShape=(e,t)=>{this.scratch.ctx.drawImage(this.brush.canvas,e,t)},this.up=e=>{this.stage.coating.freeze(!1),this.removeMoveListeners();let t=a.TL(this.scratch.getCanvas());if(t&&t.width>0&&t.height>0){let e=a.ON(this.cached,t);const s=this.selected.rect.clone();this.cached=a.oM(this.selected.canvas);const i=this.selected.shrinkWrap();if(this.selected.rect&&(t=t.rebase(this.selected.rect.x-s.x,this.selected.rect.y-s.y)),this.stage.history.add({type:"bitmapChange",kind:"eraser",layer:this.selected,patchRect:t,patch:e,rect:s}),i)return void this.layerSelect()}this.scratch.clear(),window.requestAnimationFrame(()=>this.stage.render())},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.brushPod.cleanUp(),this.stage.coating.freeze(!1),this.removeMoveListeners(),this.removeDownListeners(),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("zoom-change",this.updateBrush,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),this.cached=void 0},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),this.brush=new h.A(new c.A),this.brushPod=new l.A(e,"eraser-brush",this.brush,this.updateBrush),this.opacity=new r.A("eraser-opacity",{compact:!0,label:(0,d.A)("opacity")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100}),this.flow=new r.A("eraser-flow",{compact:!0,label:(0,d.A)("flow")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100}),this.addDownListeners(),this.layerSelect()}}},509:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutNativeRedirectAction=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutNativeRedirectAction=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"data",baseName:"data",type:"{ [key: string]: string; }"},{name:"method",baseName:"method",type:"string"},{name:"nativeRedirectData",baseName:"nativeRedirectData",type:"string"},{name:"paymentMethodType",baseName:"paymentMethodType",type:"string"},{name:"type",baseName:"type",type:"CheckoutNativeRedirectAction.TypeEnum"},{name:"url",baseName:"url",type:"string"}],function(e){let t;!function(e){e.NativeRedirect="nativeRedirect"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CheckoutNativeRedirectAction||(t.CheckoutNativeRedirectAction={}))},1177:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e){this.id=e,this.texture=null}createTexture(e,t,s){this.texture=e.createTexture(),this.width=t,this.height=s}uploadData(e,t,s=e.NEAREST){e.bindTexture(e.TEXTURE_2D,this.texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,4),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,s),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)}setTexture(e){this.texture=e}destroy(e){e.deleteTexture(this.texture)}}},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodToStore=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentMethodToStore=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"brand",baseName:"brand",type:"string"},{name:"cvc",baseName:"cvc",type:"string"},{name:"encryptedCardNumber",baseName:"encryptedCardNumber",type:"string"},{name:"encryptedExpiryMonth",baseName:"encryptedExpiryMonth",type:"string"},{name:"encryptedExpiryYear",baseName:"encryptedExpiryYear",type:"string"},{name:"encryptedSecurityCode",baseName:"encryptedSecurityCode",type:"string"},{name:"expiryMonth",baseName:"expiryMonth",type:"string"},{name:"expiryYear",baseName:"expiryYear",type:"string"},{name:"holderName",baseName:"holderName",type:"string"},{name:"number",baseName:"number",type:"string"}]},2006:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(42268),a=s(21742),n=s(94711),r=s(2215);class o extends r.A{constructor(e){super(e,(0,a.A)("titleLevels")),this.selectChannelEvent=e=>{this.selectChannel(e.currentTarget.getAttribute("data-name"))},this.channel="",this.selectChannel=e=>{switch(this.channel&&((0,i.Ay)("channel-"+this.channel).classList.remove("active"),(0,i.Ay)("levels-graph-"+this.channel).classList.remove("active")),this.channel=e,(0,i.Ay)("channel-"+this.channel).classList.add("active"),(0,i.Ay)("levels-graph-"+this.channel).classList.add("active"),this.channel){case"all":this.aCM=this.all;break;case"red":this.aCM=this.red;break;case"green":this.aCM=this.green;break;case"blue":this.aCM=this.blue}this.setKnobs(),this.setInputs()},this.setKnobs=()=>{this.ikMin.style.left=this.aCM.minin+"px",this.ikMax.style.left=this.aCM.maxin+"px",this.ikMid.style.left=Math.floor((this.aCM.maxin-this.aCM.minin)*this.aCM.mid)+this.aCM.minin+"px",this.okMin.style.left=this.aCM.minout+"px",this.okMax.style.left=this.aCM.maxout+"px"},this.setInputs=()=>{this.ivMin.value=this.aCM.minin.toString(),this.ivMid.value=this.aCM.midin.toFixed(1),this.ivMax.value=this.aCM.maxin.toString(),this.ovMin.value=this.aCM.minout.toString(),this.ovMax.value=this.aCM.maxout.toString()},this.inputInput=e=>{let t=e.currentTarget.getAttribute("id"),s=Number(e.currentTarget.value);if(!isNaN(s)){switch(t){case"input-value-min":this.aCM.minin=Math.min(Math.max(s,0),this.aCM.maxin-10);break;case"input-value-mid":break;case"input-value-max":this.aCM.maxin=Math.min(Math.max(s,this.aCM.minin+10),255);break;case"output-value-min":this.aCM.minout=Math.min(Math.max(s,0),this.aCM.maxout-10);break;case"output-value-max":this.aCM.maxout=Math.min(Math.max(s,this.aCM.minout+10),255)}this.setKnobs(),this.levelChange()}},this.analyzeImage=()=>{let e,t,s,a=this.cache.width,n=this.cache.height,r=this.cache.getContext("2d").getImageData(0,0,a,n).data,o=new Uint32Array(256),h=new Uint32Array(256),c=new Uint32Array(256),l=new Uint32Array(256);for(let i=0,d=r.length;i<d;i+=4)r[i+3]>0&&(e=r[i],t=r[i+1],s=r[i+2],l[e]+=1,l[t]+=1,l[s]+=1,o[e]+=1,h[t]+=1,c[s]+=1);this.drawChannel(l,(0,i.Ay)("levels-graph-all"),"rgba(180, 180, 180, 1)"),this.drawChannel(o,(0,i.Ay)("levels-graph-red"),"rgba(209, 72, 14, 1)"),this.drawChannel(h,(0,i.Ay)("levels-graph-green"),"rgba(146, 156, 31, 1)"),this.drawChannel(c,(0,i.Ay)("levels-graph-blue"),"rgba(58, 110, 154, 1)")},this.drawChannel=(e,t,s)=>{for(var i=new Array(0,0,0,0),a=0;a<e.length;++a)i[0]<e[a]?i[0]=e[a]:i[1]<e[a]?i[1]=e[a]:i[2]<e[a]?i[2]=e[a]:i[3]<e[a]&&(i[3]=e[a]);let n=i.sort(function(e,t){return e-t})[0],r=t.getContext("2d");r.save(),r.lineWidth=2,r.strokeStyle=s,r.fillStyle=s,r.beginPath(),r.moveTo(0,128),r.lineTo(0,128);for(var o=0;o<256;++o){let t=Math.min(Math.round(e[o]/n*128),128);r.lineTo(o,128-t)}r.lineTo(256,128),r.closePath(),r.stroke(),r.globalAlpha=.7,r.fill(),r.restore()},this.touchStart=e=>{e.preventDefault(),e.stopPropagation(),this.down(e.changedTouches[0].clientX,e.changedTouches[0].clientY,e.currentTarget),document.addEventListener("touchmove",this.touchMove,{passive:!0}),document.addEventListener("touchend",this.touchEnd,{passive:!0})},this.touchMove=e=>{e.preventDefault(),e.stopPropagation(),this.move(e.changedTouches[0].clientX,e.changedTouches[0].clientY)},this.touchEnd=e=>{e.preventDefault(),e.stopPropagation(),document.removeEventListener("touchmove",this.touchMove),document.removeEventListener("touchend",this.touchEnd)},this.mouseDown=e=>{e.stopPropagation(),this.down(e.clientX,e.clientY,e.currentTarget),document.addEventListener("mousemove",this.mouseMove,!0),document.addEventListener("mouseup",this.mouseUp,!0)},this.mouseMove=e=>{e.stopPropagation(),this.move(e.clientX,e.clientY)},this.mouseUp=e=>{e.stopPropagation(),document.removeEventListener("mousemove",this.mouseMove,!0),document.removeEventListener("mouseup",this.mouseUp,!0)},this.down=(e,t,s)=>{switch(this.downX=e,this.target=s.getAttribute("id"),this.target){case"input-knob-min":this.start=this.aCM.minin;break;case"input-knob-mid":this.start=s.offsetLeft;break;case"input-knob-max":this.start=this.aCM.maxin;break;case"output-knob-min":this.start=this.aCM.minout;break;case"output-knob-max":this.start=this.aCM.maxout}},this.move=(e,t)=>{let s=this.start+(e-this.downX);switch(this.target){case"input-knob-min":this.aCM.minin=Math.min(Math.max(s,0),this.aCM.maxin-10);break;case"input-knob-mid":this.aCM.setMid(Math.min(Math.max(s,this.aCM.minin+5),this.aCM.maxin-5));break;case"input-knob-max":this.aCM.maxin=Math.min(Math.max(s,this.aCM.minin+10),255);break;case"output-knob-min":this.aCM.minout=Math.min(Math.max(s,0),this.aCM.maxout-10);break;case"output-knob-max":this.aCM.maxout=Math.min(Math.max(s,this.aCM.minout+10),255)}this.setKnobs(),this.setInputs(),this.levelChange()},this.levelChange=()=>{this.shaders.addShader("levels",this.all),this.shaders.addShader("multilevels",this.red.isFlat()&&this.green.isFlat()&&this.blue.isFlat()?null:[this.red,this.green,this.blue]),setTimeout(()=>{this.scratch.canvas=this.shaders.apply(this.cache),window.requestAnimationFrame(()=>this.stage.render())},0)},this.cleanUp=()=>{(0,i.Ay)("levels-swatches").querySelectorAll("div").forEach(e=>{e.removeEventListener("click",this.selectChannelEvent,!1)}),(0,i.Ay)("levels-overlay").querySelectorAll("input").forEach(e=>{e.removeEventListener("input",this.inputInput,!1),e.removeEventListener("blur",this.setInputs,!1)}),this.stage.fresco.removeScratch(),document.removeEventListener("keydown",this.keyDown,!1),this.stage.coating.freeze(!1),this.stage.render(),this.shaders.cleanUp(),this.dialog.remove(),this.dialog=null,this.modal.remove(),this.modal=null},this.kind="levels",this.dialog.style.width="380px",this.dialog.style.maxWidth="380px",this.content.style.paddingBottom="4px",this.setContent(`\n            <div id="levels-holder">      \n                <div id="levels-swatches" class="swatches">\n                    <div data-name="all" id="channel-all" flow="left" tooltip="${(0,a.A)("main")}"><span class="ic" style="background-color: #ccc"></span></div>\n                    <div data-name="red" id="channel-red" flow="left" tooltip="${(0,a.A)("red")}"><span style="background-color: #d1480e;"></span></div>\n                    <div data-name="green" id="channel-green" flow="left" tooltip="${(0,a.A)("green")}"><span style="background-color:#929C1F;"></span></div>\n                    <div data-name="blue" id="channel-blue" flow="left" tooltip="${(0,a.A)("blue")}"><span style="background-color: #3a6e9a"></span></div>\n                </div>\n                <div id="levels-overlay">\n                    <div id="levels-input">\n                        <canvas class="levels-graph" width="256" height="128" unselectable="on" id="levels-graph-all"></canvas>\n                        <canvas class="levels-graph" width="256" height="128" unselectable="on" id="levels-graph-red"></canvas>\n                        <canvas class="levels-graph" width="256" height="128" unselectable="on" id="levels-graph-green"></canvas>\n                        <canvas class="levels-graph" width="256" height="128" unselectable="on" id="levels-graph-blue"></canvas>\n                        <div class="knob" id="input-knob-min"><div class="bg ic"></div></div>\n                        <div class="knob" id="input-knob-mid"><div class="bg ic"></div></div>\n                        <div class="knob" id="input-knob-max"><div class="bg ic"></div></div>\n                    </div>\n                    <div id="levels-input-values">\n                        <input type="number" id="input-value-min" value="0">\n                        <input type="number" id="input-value-mid" value="1.0">\n                        <input type="number" id="input-value-max" value="255">\n                    </div>\n                    <div id="levels-output" class="top-10">\n                        <div id="slide"></div>\n                        <div class="knob" id="output-knob-min"><div class="bg ic"></div></div>\n                        <div class="knob" id="output-knob-max"><div class="bg ic"></div></div>\n                    </div>\n                    <div id="levels-output-values">\n                        <input type="number" id="output-value-min" value="0">\n                        <input type="number" id="output-value-max" value="255">\n                    </div>\n                </div>\n            </div>\n        `),(0,i.Ay)("levels-swatches").querySelectorAll("div").forEach(e=>{e.addEventListener("click",this.selectChannelEvent,!1)}),(0,i.Ay)("levels-overlay").querySelectorAll("input").forEach(e=>{e.addEventListener("input",this.inputInput,!1),e.addEventListener("blur",this.setInputs,!1)}),this.ivMin=(0,i.Ay)("input-value-min"),this.ivMid=(0,i.Ay)("input-value-mid"),this.ivMax=(0,i.Ay)("input-value-max"),this.ovMin=(0,i.Ay)("output-value-min"),this.ovMax=(0,i.Ay)("output-value-max"),this.ikMin=(0,i.Ay)("input-knob-min"),this.ikMid=(0,i.Ay)("input-knob-mid"),this.ikMax=(0,i.Ay)("input-knob-max"),this.okMin=(0,i.Ay)("output-knob-min"),this.okMax=(0,i.Ay)("output-knob-max"),this.ikMin.addEventListener("mousedown",this.mouseDown,!0),this.ikMid.addEventListener("mousedown",this.mouseDown,!0),this.ikMax.addEventListener("mousedown",this.mouseDown,!0),this.okMin.addEventListener("mousedown",this.mouseDown,!0),this.okMax.addEventListener("mousedown",this.mouseDown,!0),this.ikMin.addEventListener("touchstart",this.touchStart,{passive:!0}),this.ikMid.addEventListener("touchstart",this.touchStart,{passive:!0}),this.ikMax.addEventListener("touchstart",this.touchStart,{passive:!0}),this.okMin.addEventListener("touchstart",this.touchStart,{passive:!0}),this.okMax.addEventListener("touchstart",this.touchStart,{passive:!0}),this.all=new n.A,this.red=new n.A,this.green=new n.A,this.blue=new n.A,this.analyzeImage(),this.selectChannel("all")}}},2215:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(21742),a=s(26806),n=s(42268),r=s(54738),o=s(22866),h=s(23556),c=s(58489);class l extends a.A{constructor(e,t,s=!1,a=!0,l=0){super(t,!1,s),this.isMasked=!1,this.createCombinationMask=e=>{if(this.selected.type===o.A.TYPE_FRAME||!this.stage.fresco.hasSelection()&&!e)return;let t=this.selected;if(!this.stage.fresco.hasSelection()&&!t.hasMask())return;let s=r.Nw(t.canvas.width,t.canvas.height),i=s.getContext("2d");return this.stage.fresco.hasSelection()&&i.drawImage(this.stage.fresco.selection.mask,-t.rect.x,-t.rect.y),e&&t.hasMask()&&(i.save(),this.stage.fresco.hasSelection()&&(i.globalCompositeOperation="destination-in"),i.drawImage(this.selected.mask,0,0),i.restore()),i=void 0,s},this.compareDown=()=>{this.scratch.canvas=this.cache,window.requestAnimationFrame(()=>this.stage.render())},this.compareUp=()=>{this.scratch.canvas=this.shaders.apply(this.cache),window.requestAnimationFrame(()=>this.stage.render())},this.change=(e,t)=>{this.selected.canvas&&(this.kind||(this.kind=e),this.shaders.addShader(e,t),setTimeout(()=>{this.scratch.canvas=this.shaders.apply(this.cache),window.requestAnimationFrame(()=>this.stage.render())},0))},this.cancel=()=>{this.cleanUp()},this.apply=()=>{if(this.scratch&&this.shaders.chain.length>0){const t=this.selected.trim?this.selected.trim.clone():this.selected.rect.clone(),s=r.oM(this.selected.canvas);this.stage.history.add({type:"bitmapSwitch",kind:this.kind,layer:this.selected,rect:t,canvas:s});let i=this.createCombinationMask(!1);if(i){this.cache=r.oM(this.selected.canvas);var e=this.cache.getContext("2d");e.save(),e.globalCompositeOperation="destination-in",e.drawImage(i,0,0),e.restore(),e=null,this.isMasked=!0}else this.cache=this.selected.canvas,this.isMasked=!1;this.scratch.canvas=this.shaders.apply(this.cache),this.scratch.drawToLayer(this.selected,this.isMasked?"source-over":"copy",1),this.selected.render()}this.cleanUp()},this.cleanUp=()=>{this.stage.coating.freeze(!1),this.stage.fresco.removeScratch(),document.removeEventListener("keydown",this.keyDown,!1),this.compare.removeEventListener("mousedown",this.compareDown,!0),this.compare.removeEventListener("mouseup",this.compareUp,!0),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),this.selected=void 0,this.shaders.cleanUp(),this.shaders=void 0,this.dialog.remove(),this.dialog=void 0,this.modal.remove(),this.modal=void 0},this.stage=e,this.stage.coating.freeze(!0),this.shaders=new h.A,this.selected=this.stage.fresco.getSelected(),this.compare=(0,n.T)("div",{className:"icon-button compare"},(0,n.T)("img",{src:"/img/icon/compare.svg",className:"ic"})),this.compare.setAttribute("tooltip",(0,i.A)("compare")),this.compare.setAttribute("flow","down"),this.compare.addEventListener("mousedown",this.compareDown,!0),this.compare.addEventListener("mouseup",this.compareUp,!0),(0,n.Ay)("dialog-buttons"+this.mid).prepend(this.compare);let d=this.createCombinationMask(a);if(d){this.cache=r.oM(this.selected.canvas);var p=this.cache.getContext("2d");p.save(),p.globalCompositeOperation="destination-in",p.drawImage(d,0,0),p.restore(),p=null,this.isMasked=!0}else this.cache=this.selected.canvas;const u=(this.selected.trim&&this.selected instanceof c.A?this.selected.getGlobalTrim():this.selected.rect).pad(l);if(l>0){const e=r.Nw(u.width,u.height);e.getContext("2d").drawImage(this.cache,l,l),this.cache=e}this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,u,this.isMasked?"over":"replace"),this.scratch.settings.blendmode=this.selected.settings.blendmode,this.scratch.settings.opacity=this.selected.settings.opacity,this.scratch.canvas=this.cache}}},2567:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StoredPaymentMethodRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.StoredPaymentMethodRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"paymentMethod",baseName:"paymentMethod",type:"PaymentMethodToStore"},{name:"recurringProcessingModel",baseName:"recurringProcessingModel",type:"StoredPaymentMethodRequest.RecurringProcessingModelEnum"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperIP",baseName:"shopperIP",type:"string"},{name:"shopperReference",baseName:"shopperReference",type:"string"}],function(e){let t;!function(e){e.CardOnFile="CardOnFile",e.Subscription="Subscription",e.UnscheduledCardOnFile="UnscheduledCardOnFile"}(t=e.RecurringProcessingModelEnum||(e.RecurringProcessingModelEnum={}))}(s=t.StoredPaymentMethodRequest||(t.StoredPaymentMethodRequest={}))},2837:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentReversalRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentReversalRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"reference",baseName:"reference",type:"string"}]},3514:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(42268),a=s(21742),n=s(50295),r=s(72284),o=s(98244),h=s(29755),c=s(79453),l=s(96703);class d extends r.A{constructor(e,t){if((0,i.lR)("RequestFrom",""))return;super(!0),(0,o.A)("bounce",e),this.content.id="bounce-content",this.content.style.flexDirection="column";const s=!(!c.N||"plus"!==c.N.subscriptionAccess);"save"===t?this.setContent(`\n                <div id="bounce-top">\n                    <h1 class="top-20">${(0,a.A)("bounceSnap")}</h1>\n                    <p class="top-20">${(0,a.A)("bounceLowPrice","1.49")}</p>\n\n                    <p id="do-login" style="display:none">${(0,a.A)("common-alreadyMember")} <a id="login-link">${(0,a.A)("common-loginHere")}</a></p>\n                </div>\n            `):this.setContent(`\n                <div id="bounce-top">\n                    <h1 class="top-20">${(0,a.A)("bounceTitle")}</h1>\n                    <p class="top-20">${(0,a.A)("bounceFeaturePitch")}</p>\n                </div>\n            `),this.setContent(`\n\n            <div class="paywal-plan">\n\n                <div id="subscribe-plus" class="plan subscription-plan">\n                    <div class="plan-details">\n                        <h2><img src="/img/misc/plus-icon.svg" alt="plus icon" style="width: 24px;">Plus</h2>\n\n                        <p>${(0,a.A)("bouncePlusDesc")}</p>\n                        <ul class="top-10">\n                            <li>${(0,a.A)("bounceAdFree")}</li>\n                            <li>${(0,a.A)("bounceUnlimitedSaves")}</li>\n                            <li>${(0,a.A)("bounceCreditsIncluded").replace("{number}","80")}</li>\n                        </ul>\n\n                        ${(null===c.N||void 0===c.N?void 0:c.N.eligibleForUpsellDiscount)?`\n                            <div class="offer-box top-40">\n                                <svg class="halftone-svg" viewBox="-312 -312 624 624" aria-hidden="true" stroke="#919EAB">\n                                    <circle r="10" stroke-width="22em"/>\n                                    <circle r="40" stroke-width="20em"/>\n                                    <circle r="70" stroke-width="18em"/>\n                                    <circle r="100" stroke-width="16em"/>\n                                    <circle r="130" stroke-width="14em"/>\n                                    <circle r="160" stroke-width="12em"/>\n                                    <circle r="190" stroke-width="10em"/>\n                                    <circle r="220" stroke-width="8em"/>\n                                    <circle r="250" stroke-width="6em"/>\n                                    <circle r="280" stroke-width="4em"/>\n                                    <circle r="310" stroke-width="2em"/>\n                                </svg>\n                                <h4 class="row-title discount-title try-premium" style="letter-spacing: 1px;">LIMITED TIME</h4>\n                                <h2 class="row-title discount-title try-premium" style="letter-spacing: 3px;line-height: 80%;">OFFER!</h2>\n                                <img class="" src="/img/misc/scribbly-line.svg" style="width: 70%;margin:8px 0;"></img>\n                                <span class="offer-discount-badge row-title">\n                                    ${(0,a.A)("pricingSaveDiscount").replace("{dsc}","10")} More!*\n                                </span>\n                            </div>`:""}\n\n                        <div class="price top-30" style="display:flex;flex-direction:column;align-items:center;position:relative;z-index:3;">\n                            ${(null===c.N||void 0===c.N?void 0:c.N.eligibleForUpsellDiscount)?'<span class="amonth">Total discounted price</span>\n                                 <span id="premium-yearly" class="amount" aria-valuemax=1.34>$ 1.34</span>':'<span id="premium-yearly" class="amount" style="color:#000" aria-valuemax=1.49>$ 1.49</span>'}\n\n                            <span class="amonth">${(0,a.A)("pricingEachMonth")}</span>\n                            ${(null===c.N||void 0===c.N?void 0:c.N.eligibleForUpsellDiscount)?'<div class="discounted top-20"><span class="amount-strike">Was $ 2.49</span></div>':""}\n                        </div>\n\n                        ${s?`<div class="button large disabled w-100 rounded top-30" style="cursor: not-allowed !important;">${(0,a.A)("currentPlan")}</div>`:`<div class="button large white w-100 rounded top-30">${(0,a.A)("subscribeNow")}</div>`}\n                    </div>\n                </div>\n\n                <div id="subscribe-premium" class="plan popular subscription-plan">\n                    <div class="plan-header">\n                        ${(0,a.A)("mostPopular")}\n                    </div>\n                    <div class="plan-details">\n                        <h2><img src="/img/misc/premium-icon.svg" alt="premium icon" style="width: 24px;">Premium</h2>\n\n                        <p>${(0,a.A)("bouncePremiumDesc")}</p>\n                        <ul class="top-10">\n                            <li>${(0,a.A)("bounceAdFree")}</li>\n                            <li>${(0,a.A)("bounceUnlimitedSaves")}</li>\n                            <li>${(0,a.A)("bounceCreditsIncluded").replace("{number}","1000")}</li>\n                            <li>${(0,a.A)("bouncePrivateMode")}</li>\n                            <li>${(0,a.A)("bounceBigLibrary")}</li>\n                        </ul>\n\n                        ${(null===c.N||void 0===c.N?void 0:c.N.eligibleForUpsellDiscount)?`\n                            <div class="offer-box top-40">\n                                <svg class="halftone-svg" viewBox="-312 -312 624 624" aria-hidden="true" stroke="#919EAB">\n                                    <circle r="10" stroke-width="22em"/>\n                                    <circle r="40" stroke-width="20em"/>\n                                    <circle r="70" stroke-width="18em"/>\n                                    <circle r="100" stroke-width="16em"/>\n                                    <circle r="130" stroke-width="14em"/>\n                                    <circle r="160" stroke-width="12em"/>\n                                    <circle r="190" stroke-width="10em"/>\n                                    <circle r="220" stroke-width="8em"/>\n                                    <circle r="250" stroke-width="6em"/>\n                                    <circle r="280" stroke-width="4em"/>\n                                    <circle r="310" stroke-width="2em"/>\n                                </svg>\n                                <h4 class="row-title discount-title try-premium" style="letter-spacing: 1px;">LIMITED TIME</h4>\n                                <h2 class="row-title discount-title try-premium" style="letter-spacing: 3px;line-height: 80%;">OFFER!</h2>\n                                <img class="" src="/img/misc/scribbly-line.svg" style="width: 70%;margin:8px 0;"></img>\n                                <span class="offer-discount-badge row-title">\n                                    ${(0,a.A)("pricingSaveDiscount").replace("{dsc}","30")} More!*\n                                </span>\n                            </div>`:""}\n\n                        <div class="price top-30" style="display:flex;flex-direction:column;align-items:center;position:relative;z-index: 3;">\n                            ${(null===c.N||void 0===c.N?void 0:c.N.eligibleForUpsellDiscount)?'<span class="amonth">Total discounted price</span>\n                                 <span id="premium-yearly" class="amount" aria-valuemax=4.54>$ 4.54</span>':'<span id="premium-yearly" class="amount" style="color:#000" aria-valuemax=6.49>$ 6.49</span>'}\n\n                            <span class="amonth">${(0,a.A)("pricingEachMonth")}</span>\n                            ${(null===c.N||void 0===c.N?void 0:c.N.eligibleForUpsellDiscount)?'<div class="discounted top-20"><span class="amount-strike">Was $ 9.99</span></div>':""}\n                        </div>\n\n                        <div class="button w-100 large rounded top-30" style="background:#111;">\n                        ${s?(0,a.A)("upgradeNow"):!c.N||c.N.eligibleForTrail?(0,a.A)("try30DaysFree"):(0,a.A)("subscribeNow")}\n                        </div>\n                    </div>\n                </div>\n\n                <div id="subscribe-team" class="plan subscription-plan">\n                    <div class="plan-details">\n                        <h2><img src="/img/misc/team-icon.svg" alt="team icon">Team</h2>\n\n                        <p>${(0,a.A)("bounceTeamDesc")}</p>\n                        <ul class="top-10">\n                            <li>${(0,a.A)("bounceAdFree")}</li>\n                            <li>${(0,a.A)("bounceUnlimitedSaves")}</li>\n                            <li>${(0,a.A)("pricingFiveSeats")}</li>\n                            <li>${(0,a.A)("pricingCreditsMemberIncluded").replace("{number}","1000")}</li>\n                        </ul>\n\n                        <div class="price top-30" style="display:flex;flex-direction:column;align-items:center;">\n                            <span id="premium-yearly" class="amount" style="color:#000" aria-valuemax=11.99>$ 11.99</span>\n                            <span class="amonth">${(0,a.A)("pricingEachMonth")}</span>\n                        </div>\n\n                        <div class="button large white rounded w-100 top-30">${s?(0,a.A)("upgradeNow"):(0,a.A)("subscribeNow")}</div>\n                    </div>\n                </div>\n            </div>\n\n            <p class="center pad-15">${(0,a.A)("unsureWhichSubscriptionToGet",`<a href="/pricing" target="_blank">${(0,a.A)("pricingPage")}</a>`)} ${(0,a.A)("freeForEducation",`<a href="/learn/education/" class="anchor" target="_blank">${(0,a.A)("education")}</a>`)}</p>\n\n        `),"save"!==t||c.N||((0,i.Ay)("do-login").style.display="block",(0,i.Ay)("login-link").addEventListener("click",()=>{this.cleanUp(),new n.A})),(0,i.Ay)("subscribe-plus").addEventListener("click",()=>{s||(this.cleanUp(),c.N?new l.A("subscription",{platform:h.Ay.product,plan:"plus-monthly",bounceSource:"premiumbounce",code:c.N.eligibleForUpsellDiscount?"UPSELL10":""}):new n.A)}),(0,i.Ay)("subscribe-premium").addEventListener("click",()=>{this.cleanUp(),c.N?new l.A("subscription",{platform:h.Ay.product,plan:"premium-monthly",bounceSource:"premiumbounce",code:c.N.eligibleForUpsellDiscount?"UPSELL30":""}):new n.A}),(0,i.Ay)("subscribe-team").addEventListener("click",()=>{this.cleanUp(),c.N?new l.A("subscription",{platform:h.Ay.product,plan:"team-monthly",bounceSource:"premiumbounce"}):new n.A})}}},3729:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleScanlines")),this.update=()=>{this.change("scanlines",{size:this.size.getValue()/4,amount:this.amount.getValue()/4,colorize:(0,n.Ay)("scanline-colorize").checked,direction:(0,n.Ay)("scanline-direction").checked})},this.kind="scanlines",this.setContent((0,n.T)("div",{id:"scanline-size"}),(0,n.T)("div",{id:"scanline-amount",className:"range-box top-16"}),(0,n.T)("input",{type:"checkbox",checked:!0,id:"scanline-colorize"}),(0,n.T)("label",{className:"top-20 switch",htmlFor:"scanline-colorize"},(0,r.A)("colorize"),(0,n.T)("span")),(0,n.T)("input",{type:"checkbox",id:"scanline-direction"}),(0,n.T)("label",{className:"top-20 switch",htmlFor:"scanline-direction"},(0,r.A)("vertical"),(0,n.T)("span"))),this.size=new a.A("scanline-size",{label:(0,r.A)("size"),range:[1,10],step:1,defaultValue:2,labelFormat:e=>String(e),onChange:e=>this.update()}),this.amount=new a.A("scanline-amount",{label:(0,r.A)("amount"),step:.01,range:[0,1],defaultValue:.2,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),(0,n.Ay)("scanline-colorize").addEventListener("click",()=>{this.update()}),(0,n.Ay)("scanline-direction").addEventListener("click",()=>{this.update()}),this.update()}}},4059:(e,t,s)=>{s.d(t,{A:()=>y});var i=s(42268),a=s(21742),n=s(54738),r=s(40963),o=s(75770),h=s(41915),c=s(82042),l=s(23556),d=s(21404),p=s(97266),u=s(37771),m=s(81937);class g extends u.A{constructor(e,t,s){super(e,(0,a.A)("options"),!0),this.checkBlur=()=>{this.options.bokehBlur=(0,i.Ay)("bokeh-blur").checked,this.options.bokehBlurType=document.querySelector('input[name="bokeh-blur-type"]:checked').value,this.callback(this.options,"blur")},this.checkShape=()=>{this.options.bokehShape=(0,i.Ay)("bokeh-shape").checked,this.options.bokehShapeDual=(0,i.Ay)("bokeh-shape-dual").checked,this.options.bokehShapeType=document.querySelector('input[name="bokeh-shape-type"]:checked').value,this.callback(this.options,"shape")},this.cleanUp=()=>{(0,i.Ay)("bokeh-blur").removeEventListener("change",this.checkBlur,!1),(0,i.Ay)("bokeh-shape").removeEventListener("change",this.checkShape,!1),(0,i.Ay)("bokeh-shape-dual").removeEventListener("change",this.checkShape,!1),document.querySelectorAll('input[name="bokeh-blur-type"]').forEach(e=>e.removeEventListener("change",this.checkBlur)),document.querySelectorAll('input[name="bokeh-shape-type"]').forEach(e=>e.removeEventListener("change",this.checkShape)),this.bokehBlurSize.cleanUp(),this.bokehBlurIntensity.cleanUp(),this.bokehShapeHue.cleanUp(),this.bokehShapeSize.cleanUp(),this.bokehShapeQuantity.cleanUp(),this.bokehShapeIntensity.cleanUp(),this.superCleanUp()},this.options=t,this.callback=s,this.content.id="focus-options-content",this.content.style.height="400px",this.content.style.overflow="hidden",this.content.style.paddingBottom="4px",this.setContent(`\n            <section>\n\n            <div>\n                <input type="checkbox" class="toggle-check" id="bokeh-blur" />\n                <label class="switch subline top-16" for="bokeh-blur">${(0,a.A)("bokehBlur")}<span></span><span class="arrow"></span></label>\n        \n                <div class="toggle">\n                    <div class="switch-icon-field stretch">\n                        <input type="radio" id="bokeh-blur-type-circle" name="bokeh-blur-type" value="circle" checked /><label for="bokeh-blur-type-circle" tooltip="${(0,a.A)("circle")}" flow="up"><img src="/img/icon/shape-ellipse.svg" width="20" height="20" loading="lazy"/></label>\n                        <input type="radio" id="bokeh-blur-type-square" name="bokeh-blur-type" value="square" /><label for="bokeh-blur-type-square" tooltip="${(0,a.A)("square")}" flow="up"><img src="/img/icon/shape-rectangle.svg" width="20" height="20" loading="lazy"/></label>\n                        <input type="radio" id="bokeh-blur-type-hexagon" name="bokeh-blur-type" value="hexagon" /><label for="bokeh-blur-type-hexagon" tooltip="${(0,a.A)("hexagon")}" flow="up"><img src="/img/icon/shape-hexagon.svg"  width="20" height="20" loading="lazy"/></label>\n                        <input type="radio" id="bokeh-blur-type-cross" name="bokeh-blur-type" value="cross" /><label for="bokeh-blur-type-cross" tooltip="${(0,a.A)("cross")}" flow="up"><img src="/img/icon/shape-cross.svg" width="20" height="20" loading="lazy"/></label>\n                    </div>\n                    <div id="bokeh-blur-size" class="top-16"></div>\n                    <div id="bokeh-blur-intensity"></div>\n                </div>\n            </div>\n        \n            <div class="top-16">\n                <input type="checkbox" class="toggle-check" id="bokeh-shape" />\n                <label class="switch subline top-16" for="bokeh-shape">${(0,a.A)("bokehShape")}<span></span><span class="arrow"></span></label>\n        \n                <div class="toggle">\n                    <div class="switch-icon-field stretch">\n                        <input type="radio" id="bokeh-shape-type-circle" name="bokeh-shape-type" value="circle" checked /><label for="bokeh-shape-type-circle" tooltip="${(0,a.A)("circle")}" flow="up"><img src="/img/icon/shape-ellipse.svg" width="20" height="20" loading="lazy"/></label>\n                        <input type="radio" id="bokeh-shape-type-hexagon" name="bokeh-shape-type" value="hexagon" /><label for="bokeh-shape-type-hexagon" tooltip="${(0,a.A)("hexagon")}" flow="up"><img src="/img/icon/shape-hexagon.svg"  width="20" height="20" loading="lazy"/></label>\n                        <input type="radio" id="bokeh-shape-type-square" name="bokeh-shape-type" value="square" /><label for="bokeh-shape-type-square" tooltip="${(0,a.A)("square")}" flow="up"><img src="/img/icon/shape-rectangle.svg" width="20" height="20" loading="lazy"/></label>\n                        <input type="radio" id="bokeh-shape-type-triangle" name="bokeh-shape-type" value="triangle" /><label for="bokeh-shape-type-triangle" tooltip="${(0,a.A)("triangle")}" flow="up"><img src="/img/icon/shape-triangle.svg" width="20" height="20" loading="lazy"/></label>\n                    </div>\n                    <div class="switch-icon-field stretch top-4">\n                        <input type="radio" id="bokeh-shape-type-heart" name="bokeh-shape-type" value="heart" /><label for="bokeh-shape-type-heart" tooltip="${(0,a.A)("heart")}" flow="up"><img src="/img/icon/shape-heart.svg" width="20" height="20" loading="lazy"/></label>\n                        <input type="radio" id="bokeh-shape-type-cross" name="bokeh-shape-type" value="cross" /><label for="bokeh-shape-type-cross" tooltip="${(0,a.A)("cross")}" flow="up"><img src="/img/icon/shape-cross.svg" width="20" height="20" loading="lazy"/></label>\n                        <input type="radio" id="bokeh-shape-type-star" name="bokeh-shape-type" value="star" /><label for="bokeh-shape-type-star" tooltip="${(0,a.A)("star")}" flow="up"><img src="/img/icon/shape-star.svg"  width="20" height="20" loading="lazy"/></label>\n                        <input type="radio" id="bokeh-shape-type-glimmer" name="bokeh-shape-type" value="glimmer" /><label for="bokeh-shape-type-glimmer" tooltip="${(0,a.A)("glimmer")}" flow="up"><img src="/img/icon/shape-glimmer.svg" width="20" height="20" loading="lazy"/></label>\n                    </div>\n                    <div id="bokeh-shape-hue" class="top-16"></div>\n                    <div id="bokeh-shape-size" ></div>\n                    <div id="bokeh-shape-quantity"></div>\n                    <div id="bokeh-shape-intensity"></div>\n                    <input type="checkbox" id="bokeh-shape-dual" />\n                    <label class="top-16 switch" for="bokeh-shape-dual">${(0,a.A)("dualTone")}<span></span></label>\n                </div>\n            </div>\n            </section>\n        `),this.bokehBlurSize=new c.A("bokeh-blur-size",{label:(0,a.A)("size"),range:[0,1],step:.01,defaultValue:this.options.bokehBlurSize,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>{this.options.bokehBlurSize=e,s(this.options,"blur")}}),this.bokehBlurIntensity=new c.A("bokeh-blur-intensity",{label:(0,a.A)("intensity"),range:[0,1],step:.01,defaultValue:this.options.bokehBlurIntensity,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>{this.options.bokehBlurIntensity=e,s(this.options,"blur")}}),this.bokehShapeHue=new c.A("bokeh-shape-hue",{label:(0,a.A)("color"),range:[-180,180],step:1,defaultValue:this.options.bokehShapeHue,labelFormat:e=>String(e),labelParse:e=>parseInt(e,10),onEnd:e=>{this.options.bokehShapeHue=e,s(this.options,"shape")}}),this.bokehShapeSize=new c.A("bokeh-shape-size",{label:(0,a.A)("size"),range:[0,1],step:.01,defaultValue:this.options.bokehShapeSize,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>{this.options.bokehShapeSize=e,s(this.options,"shape")}}),this.bokehShapeQuantity=new c.A("bokeh-shape-quantity",{label:(0,a.A)("quantity"),range:[0,1],step:.01,defaultValue:this.options.bokehShapeQuantity,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>{this.options.bokehShapeQuantity=e,s(this.options,"shape")}}),this.bokehShapeIntensity=new c.A("bokeh-shape-intensity",{label:(0,a.A)("intensity"),range:[0,1],step:.01,defaultValue:this.options.bokehShapeIntensity,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>{this.options.bokehShapeIntensity=e,s(this.options,"shape")}}),(0,i.Ay)("bokeh-blur").addEventListener("change",this.checkBlur,!1),(0,i.Ay)("bokeh-shape").addEventListener("change",this.checkShape,!1),(0,i.Ay)("bokeh-shape-dual").addEventListener("change",this.checkShape,!1),document.querySelectorAll('input[name="bokeh-blur-type"]').forEach(e=>e.addEventListener("change",this.checkBlur)),document.querySelectorAll('input[name="bokeh-shape-type"]').forEach(e=>e.addEventListener("change",this.checkShape)),(0,i.Ay)("bokeh-blur").checked=this.options.bokehBlur,(0,i.Ay)("bokeh-blur-type-"+this.options.bokehBlurType).checked=!0,(0,i.Ay)("bokeh-shape").checked=this.options.bokehShape,(0,i.Ay)("bokeh-shape-dual").checked=this.options.bokehShapeDual,(0,i.Ay)("bokeh-shape-type-"+this.options.bokehShapeType).checked=!0,new m.A((0,i.Ay)("focus-options-content"))}}class y extends o.A{constructor(e){super("focus",e),this.mode="symmetric",this.PI2=2*Math.PI,this.selectMode=e=>{this.mode=e.currentTarget.value,this.rotation=0,window.requestAnimationFrame(()=>{this.renderControls(),this.renderFocus()})},this.layerSelect=async()=>{if(!(this.selected===this.stage.fresco.getSelected())&&(0!==this.blurAmount.getValue()||this.options.bokehShape||this.options.bokehBlur)){await new p.A((0,a.A)("apply"),(0,a.A)("viewFocusApply")).init()&&this.apply()}if(!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("focus-no-layer").style.display="flex",(0,i.Ay)("focus-settings").style.display="none",this.selected=void 0,this.cached=void 0,this.shape=void 0,this.blur=void 0,void window.requestAnimationFrame(()=>{this.renderControls()});(0,i.Ay)("focus-no-layer").style.display="none",(0,i.Ay)("focus-settings").style.display="flex",this.selected=this.stage.fresco.getSelected(),this.cached=this.selected.baked?this.selected.baked:this.selected.canvas,this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"over",this.cached),this.scratch.settings.blendmode=this.selected.settings.blendmode,this.scratch.settings.opacity=this.selected.settings.opacity,this.center=new h.A(Math.round(this.stage.fresco.width/2),Math.round(this.stage.fresco.height/2)),this.distance=Math.round(this.stage.fresco.height/2*.75),this.falloff=Math.round(.5*this.distance),this.rotation=0,this.addDownListeners(),this.addMoveListeners(),this.renderControls(),this.renderBlur(),this.renderShape()},this.showOptions=()=>{new g((0,i.Ay)("focus-options"),this.options,this.updateOptions)},this.updateOptions=(e,t)=>{this.options=e,"shape"===t?this.renderShape():this.renderBlur()},this.down=e=>{if(!this.selected)return;this.downPoint=this.stage.translateRasterToFresco(e);let t=this.downPoint.clone();if(0!==this.rotation&&(this.matrix.reset(),this.matrix.translate(this.center),this.matrix.rotate(this.rotation),this.matrix.invert(),t=this.matrix.transformPoint(t).add(this.center)),this.checkControl(t),this.control){switch(this.control){case"center":this.downPosition=this.center.clone();break;case"falloff":this.downPosition=new h.A(this.center.y,this.falloff),this.downPoint=t;break;case"distance":this.downPosition=new h.A(this.center.y,this.distance),this.downPoint=t;break;case"rotation":this.downRotation=Math.atan2(this.downPoint.y-this.center.y,this.downPoint.x-this.center.x)-this.rotation}this.raster.addEventListener("pointerup",this.pointerUp,!1)}else n.HO(0,0,this.stage.fresco.width,this.stage.fresco.height,this.downPoint.x,this.downPoint.y)?this.renderControls():this.rctx.clearRect(0,0,this.raster.width,this.raster.height)},this.move=e=>{if(!this.selected)return;let t=this.stage.translateRasterToFresco(e),s=t.clone();if(0!==this.rotation&&(this.matrix.reset(),this.matrix.translate(this.center),this.matrix.rotate(this.rotation),this.matrix.invert(),s=this.matrix.transformPoint(s).add(this.center)),this.isDown){if(this.control){switch(this.control){case"center":this.center.x=this.downPosition.x+(t.x-this.downPoint.x),this.center.y=this.downPosition.y+(t.y-this.downPoint.y);break;case"falloff":this.falloff=n.qE(this.downPosition.y+(s.y-this.downPoint.y),20,this.distance-20);break;case"distance":this.distance=n.qE(this.downPosition.y+(s.y-this.downPoint.y),this.falloff+20,Math.round(this.cached.height));break;case"rotation":this.rotation=Math.atan2(t.y-this.center.y,t.x-this.center.x)-this.downRotation,this.rotation<0?this.rotation+=this.PI2:this.rotation>=this.PI2&&(this.rotation-=this.PI2)}window.requestAnimationFrame(()=>{this.renderControls(),this.renderFocus()})}}else this.checkControl(s)},this.checkControl=e=>{let t=28/this.stage.zoom,s=t/2,i=50/this.stage.zoom,a=!1,r=!1;n.HO(this.center.x-s,this.center.y+this.falloff-s,t,t,e.x,e.y)&&(r="falloff"===this.control,this.control="falloff",a=!0),n.HO(this.center.x-s,this.center.y+this.distance-s,t,t,e.x,e.y)&&(r="distance"===this.control,this.control="distance",a=!0),n.HO(this.center.x-s,this.center.y-s,t,t,e.x,e.y)&&(r="center"===this.control,this.control="center",a=!0),"radial"!==this.mode&&n.HO(this.center.x+i-s,this.center.y-i-s,t,t,e.x,e.y)&&(r="rotation"===this.control,this.control="rotation",a=!0),a&&!r?(window.requestAnimationFrame(this.renderControls),this.raster.style.cursor="pointer"):!a&&this.control&&(this.control=void 0,window.requestAnimationFrame(this.renderControls),this.raster.style.cursor="unset")},this.up=e=>{this.isDown=!1},this.renderBlurEvent=()=>{window.requestAnimationFrame(this.renderBlur)},this.renderBlur=()=>{this.options.bokehBlur?this.shaders.addShader("bokeh",{size:this.options.bokehBlurSize,amount:this.options.bokehBlurIntensity,type:this.options.bokehBlurType}):this.shaders.addShader("bokeh",void 0),this.shaders.addShader("blur",this.blurAmount.getValue()),this.blur=this.shaders.apply(this.cached),this.renderFocus()},this.rand=(e,t)=>Math.random()*(t-e)+e,this.hsla=(e,t,s,i)=>"hsla("+e+","+t+"%,"+s+"%,"+i+")",this.renderShape=()=>{if(!this.options.bokehShape)return this.shape=void 0,void this.renderFocus();this.shape||(this.shape=n.Nw(this.cached.width,this.cached.height));const e=this.shape.getContext("2d");e.clearRect(0,0,this.shape.width,this.shape.height),e.save(),e.globalCompositeOperation="lighter";const t=this.shape.width,s=this.shape.height,i=t+s,a=this.options.bokehShapeHue+180,r=.1*i*this.options.bokehShapeSize,o=.03*i;let h,c=Math.floor(.1*i*this.options.bokehShapeQuantity);switch(this.options.bokehShapeType){case"circle":h=this.circle;break;case"square":h=this.square;break;case"hexagon":h=this.hexagon;break;case"cross":h=this.cross;break;case"triangle":h=this.triangle;break;case"heart":h=this.heart;break;case"star":h=this.star;break;case"glimmer":h=this.glimmer}const l=this.options.bokehShapeDual;for(;c--;){const i=this.rand(0,t),n=this.rand(0,s),d=this.rand(1,r);let p=this.rand(a-30,a+30);l&&c%2==0&&(p+=120),e.shadowColor=this.hsla(p,this.rand(10,80),this.rand(30,60),this.rand(.2,.8)),e.shadowBlur=this.rand(10,o),e.beginPath(),e.save(),e.translate(i,n),e.rotate(Math.random()*this.PI2),h(e,d),e.restore(),e.closePath(),e.fill()}for(c=Math.floor(.03*i*this.options.bokehShapeQuantity),e.shadowBlur=15,e.shadowColor="#fff";c--;){const i=this.rand(0,t),a=this.rand(0,s),n=this.rand(.5,.75*r);e.fillStyle=this.hsla(0,0,100,this.rand(.03,.1)),e.beginPath(),e.save(),e.translate(i,a),e.rotate(Math.random()*this.PI2),h(e,n),e.restore(),e.closePath(),e.fill()}e.restore(),this.renderFocus()},this.circle=(e,t)=>{e.arc(0,0,t,0,2*Math.PI)},this.square=(e,t)=>{e.moveTo(0,t);for(let s=0;s<4;s++)e.rotate(2*Math.PI/4),e.lineTo(0,t)},this.triangle=(e,t)=>{e.moveTo(0,0-t);for(let s=0;s<3;s++)e.rotate(Math.PI/3),e.lineTo(0,0-.5*t),e.rotate(Math.PI/3),e.lineTo(0,0-t)},this.hexagon=(e,t)=>{e.moveTo(0,t);for(let s=0;s<6;s++)e.rotate(2*Math.PI/6),e.lineTo(0,t)},this.heart=(e,t)=>{let s=.8*t;e.translate(0,-t/2),e.rotate(45*Math.PI/180),e.beginPath(),e.moveTo(0,0),e.bezierCurveTo(-s,0,-s,t,0,t),e.lineTo(t,t),e.lineTo(t,0),e.bezierCurveTo(t,-s,0,-s,0,0)},this.cross=(e,t)=>{let s=.35*t;e.moveTo(-s,-s);for(let i=0;i<4;i++)e.lineTo(-s,-t),e.lineTo(s,-t),e.lineTo(s,-s),e.rotate(Math.PI/2)},this.star=(e,t)=>{e.moveTo(0,0-t);for(let s=0;s<5;s++)e.rotate(Math.PI/5),e.lineTo(0,0-.5*t),e.rotate(Math.PI/5),e.lineTo(0,0-t)},this.glimmer=(e,t)=>{e.moveTo(0,0-t);for(let s=0;s<4;s++)e.rotate(Math.PI/4),e.lineTo(0,0-.2*t),e.rotate(Math.PI/4),e.lineTo(0,0-t)},this.renderFocus=()=>{if(this.scratch.replaceCanvas(this.blur),this.scratch.drawCanvas(this.shape,"screen",this.options.bokehShapeIntensity),"none"===this.mode)return void window.requestAnimationFrame(this.stage.render);let e;const t=(0,i.Ay)("focus-invert").checked,s=t?"#00000000":"#000000FF",a=t?"#000000FF":"#00000000";let n=this.center.neg(this.selected.rect.topLeft());if("radial"===this.mode){const t=this.falloff/this.distance;e=this.scratch.ctx.createRadialGradient(n.x,n.y,0,n.x,n.y,this.distance),e.addColorStop(0,s),e.addColorStop(t,s),e.addColorStop(1,a)}else if("symmetric"===this.mode){const t=this.falloff/this.distance*.5,i=new h.A(n.x,n.y-this.distance).rotateAround(n,this.rotation),r=new h.A(n.x,n.y+this.distance).rotateAround(n,this.rotation);e=this.scratch.ctx.createLinearGradient(i.x,i.y,r.x,r.y),e.addColorStop(0,a),e.addColorStop(.5-t,s),e.addColorStop(.5,s),e.addColorStop(.5+t,s),e.addColorStop(1,a)}else{const t=this.falloff/this.distance,i=new h.A(n.x,n.y+this.distance).rotateAround(n,this.rotation);e=this.scratch.ctx.createLinearGradient(n.x,n.y,i.x,i.y),e.addColorStop(0,s),e.addColorStop(t,s),e.addColorStop(1,a)}this.scratch.ctx.save(),this.scratch.ctx.fillStyle=e,this.scratch.ctx.globalCompositeOperation="destination-out",this.scratch.ctx.fillRect(0,0,this.cached.width,this.cached.height),this.scratch.ctx.restore(),window.requestAnimationFrame(this.stage.render)},this.renderControls=()=>{if(this.rctx.clearRect(0,0,this.raster.width,this.raster.height),!this.selected||"none"===this.mode)return;const e=this.stage.translateFrescoToRaster(this.center),t=Math.round(this.falloff*this.stage.zoom),s=Math.round(this.distance*this.stage.zoom),i="radial"!==this.mode;this.rctx.save(),this.rctx.lineWidth=2,this.rctx.shadowBlur=6,this.rctx.shadowColor="rgba(0,0,0,0.5)",this.rctx.strokeStyle=n.z,this.rctx.translate(e.x,e.y),this.rctx.rotate(this.rotation),"symmetric"===this.mode?(this.rctx.beginPath(),this.rctx.moveTo(-this.raster.width,-s),this.rctx.lineTo(this.raster.width,-s),this.rctx.closePath(),this.rctx.stroke(),this.rctx.beginPath(),this.rctx.moveTo(-this.raster.width,s),this.rctx.lineTo(this.raster.width,s),this.rctx.closePath(),this.rctx.stroke(),this.rctx.setLineDash([5,8]),this.rctx.beginPath(),this.rctx.moveTo(-this.raster.width,-t),this.rctx.lineTo(this.raster.width,-t),this.rctx.closePath(),this.rctx.stroke(),this.rctx.beginPath(),this.rctx.moveTo(-this.raster.width,t),this.rctx.lineTo(this.raster.width,+t),this.rctx.closePath(),this.rctx.stroke()):"linear"===this.mode?(this.rctx.beginPath(),this.rctx.moveTo(-this.raster.width,s),this.rctx.lineTo(this.raster.width,s),this.rctx.closePath(),this.rctx.stroke(),this.rctx.setLineDash([5,8]),this.rctx.beginPath(),this.rctx.moveTo(-this.raster.width,t),this.rctx.lineTo(this.raster.width,t),this.rctx.closePath(),this.rctx.stroke()):(this.rctx.beginPath(),this.rctx.arc(0,0,s,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.stroke(),this.rctx.setLineDash([5,5]),this.rctx.beginPath(),this.rctx.arc(0,0,t,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.stroke()),this.rctx.setLineDash([]),this.rctx.fillStyle=n.q5,this.rctx.beginPath(),this.rctx.arc(0,t,"falloff"===this.control?12:8,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.fill(),this.rctx.fillStyle="falloff"===this.control?n.bi:n.fu,this.rctx.beginPath(),this.rctx.arc(0,t,"falloff"===this.control?10:6,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.fill(),this.rctx.fillStyle=n.q5,this.rctx.beginPath(),this.rctx.arc(0,s,"distance"===this.control?12:8,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.fill(),this.rctx.fillStyle="distance"===this.control?n.bi:n.fu,this.rctx.beginPath(),this.rctx.arc(0,s,"distance"===this.control?10:6,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.fill(),i&&(this.rctx.fillStyle=n.q5,this.rctx.beginPath(),this.rctx.arc(50,-50,"rotation"===this.control?12:8,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.fill(),this.rctx.fillStyle="rotation"===this.control?n.bi:n.fu,this.rctx.beginPath(),this.rctx.arc(50,-50,"rotation"===this.control?10:6,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.fill()),this.rctx.fillStyle=n.q5,this.rctx.beginPath(),this.rctx.arc(0,0,"center"===this.control?12:10,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.fill(),this.rctx.fillStyle="center"===this.control?n.bi:n.KP,this.rctx.beginPath(),this.rctx.arc(0,0,"center"===this.control?10:8,0,2*Math.PI,!1),this.rctx.closePath(),this.rctx.fill(),this.rctx.restore()},this.reset=()=>{this.options={bokehBlur:!1,bokehBlurType:"circle",bokehBlurSize:.3,bokehBlurIntensity:.5,bokehShape:!1,bokehShapeDual:!1,bokehShapeType:"circle",bokehShapeHue:0,bokehShapeSize:.4,bokehShapeQuantity:.4,bokehShapeIntensity:.6},this.blurAmount.setValue(0),this.selected=void 0,this.cached=void 0,this.shape=void 0,this.blur=void 0,window.requestAnimationFrame(()=>{this.renderControls()}),this.layerSelect(),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("reset")}))},this.applyClick=()=>{this.apply()},this.apply=()=>{if(!this.selected||!this.stage.fresco.hasLayer(this.selected))return;if(0===this.blurAmount.getValue()&&!this.options.bokehShape&&!this.options.bokehBlur)return;const e=new r.A(0,0,this.selected.rect.width,this.selected.rect.height),t=n.ON(this.selected.canvas);this.scratch.drawToLayer(this.selected),this.scratch.clear(),this.selected.render(),this.shaders.reset(),this.options.bokehBlur=!1,this.options.bokehShape=!1,this.blurAmount.setValue(0),this.stage.history.add({type:"bitmapChange",kind:"focus",layer:this.selected,patchRect:e,patch:t,rect:this.selected.rect.clone()}),this.layerSelect(),this.rctx.clearRect(0,0,this.raster.width,this.raster.height)},this.cleanUp=async()=>{var e;(0!==this.blurAmount.getValue()||this.options.bokehShape||this.options.bokehBlur)&&this.apply(),this.removeMoveListeners(),this.removeDownListeners(),this.rctx.clearRect(0,0,this.raster.width,this.raster.height),this.stage.fresco.removeScratch(),null===(e=this.shaders)||void 0===e||e.cleanUp(),this.shaders=void 0,this.blurAmount.cleanUp(),(0,i.Ay)("focus-invert").removeEventListener("click",this.renderFocus,!0),(0,i.Ay)("focus-options").removeEventListener("click",this.showOptions,!0),(0,i.Ay)("focus-mode-symmetric").removeEventListener("change",this.selectMode,!1),(0,i.Ay)("focus-mode-linear").removeEventListener("change",this.selectMode,!1),(0,i.Ay)("focus-mode-radial").removeEventListener("change",this.selectMode,!1),(0,i.Ay)("focus-mode-none").removeEventListener("change",this.selectMode,!1),(0,i.Ay)("focus-apply").removeEventListener("click",this.applyClick,!1),(0,i.Ay)("focus-reset").removeEventListener("click",this.reset,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("viewport-render",this.renderControls,!1),window.requestAnimationFrame(()=>this.stage.render()),this.cached=void 0,this.shape=void 0,this.blur=void 0,this.raster=void 0,this.rctx=void 0},this.matrix=new d.A,this.shaders=new l.A,this.raster=e.raster,this.rctx=this.raster.getContext("2d"),(0,i.Ay)("focus-mode-symmetric").addEventListener("change",this.selectMode,!1),(0,i.Ay)("focus-mode-linear").addEventListener("change",this.selectMode,!1),(0,i.Ay)("focus-mode-radial").addEventListener("change",this.selectMode,!1),(0,i.Ay)("focus-mode-none").addEventListener("change",this.selectMode,!1),(0,i.Ay)("focus-invert").addEventListener("click",this.renderFocus,!0),(0,i.Ay)("focus-options").addEventListener("click",this.showOptions,!0),this.blurAmount=new c.A("focus-blur-amount",{label:(0,a.A)("blur")+":",range:[0,1],step:.01,compact:!0,defaultValue:0,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>this.renderBlurEvent()}),(0,i.Ay)("focus-apply").addEventListener("click",this.applyClick,!1),(0,i.Ay)("focus-reset").addEventListener("click",this.reset,!1),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("viewport-render",this.renderControls,!1),this.mode=document.querySelector('input[name="focus-mode"]:checked').value,this.options={bokehBlur:!1,bokehBlurType:"circle",bokehBlurSize:.3,bokehBlurIntensity:.5,bokehShape:!1,bokehShapeDual:!1,bokehShapeType:"circle",bokehShapeHue:0,bokehShapeSize:.4,bokehShapeQuantity:.4,bokehShapeIntensity:.6},this.addDownListeners(),this.addMoveListeners(),this.layerSelect()}}},4370:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ForexQuote=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ForexQuote=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"account",baseName:"account",type:"string"},{name:"accountType",baseName:"accountType",type:"string"},{name:"baseAmount",baseName:"baseAmount",type:"Amount"},{name:"basePoints",baseName:"basePoints",type:"number"},{name:"buy",baseName:"buy",type:"Amount"},{name:"interbank",baseName:"interbank",type:"Amount"},{name:"reference",baseName:"reference",type:"string"},{name:"sell",baseName:"sell",type:"Amount"},{name:"signature",baseName:"signature",type:"string"},{name:"source",baseName:"source",type:"string"},{name:"type",baseName:"type",type:"string"},{name:"validTill",baseName:"validTill",type:"Date"}]},4380:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(42268),n=s(82042),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleHalftone")),this.setContent((0,a.T)("div",{id:"halftone-slider"}));const t=new n.A("halftone-slider",{label:(0,r.A)("frequency"),range:[.01,2],step:.01,defaultValue:.4,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("halftone",e)});setTimeout(()=>this.change("halftone",t.getValue()))}}},4494:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataRisk=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataRisk=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"riskdata__customFieldName",baseName:"riskdata.[customFieldName]",type:"string"},{name:"riskdata_basket_item_itemNr_amountPerItem",baseName:"riskdata.basket.item[itemNr].amountPerItem",type:"string"},{name:"riskdata_basket_item_itemNr_brand",baseName:"riskdata.basket.item[itemNr].brand",type:"string"},{name:"riskdata_basket_item_itemNr_category",baseName:"riskdata.basket.item[itemNr].category",type:"string"},{name:"riskdata_basket_item_itemNr_color",baseName:"riskdata.basket.item[itemNr].color",type:"string"},{name:"riskdata_basket_item_itemNr_currency",baseName:"riskdata.basket.item[itemNr].currency",type:"string"},{name:"riskdata_basket_item_itemNr_itemID",baseName:"riskdata.basket.item[itemNr].itemID",type:"string"},{name:"riskdata_basket_item_itemNr_manufacturer",baseName:"riskdata.basket.item[itemNr].manufacturer",type:"string"},{name:"riskdata_basket_item_itemNr_productTitle",baseName:"riskdata.basket.item[itemNr].productTitle",type:"string"},{name:"riskdata_basket_item_itemNr_quantity",baseName:"riskdata.basket.item[itemNr].quantity",type:"string"},{name:"riskdata_basket_item_itemNr_receiverEmail",baseName:"riskdata.basket.item[itemNr].receiverEmail",type:"string"},{name:"riskdata_basket_item_itemNr_size",baseName:"riskdata.basket.item[itemNr].size",type:"string"},{name:"riskdata_basket_item_itemNr_sku",baseName:"riskdata.basket.item[itemNr].sku",type:"string"},{name:"riskdata_basket_item_itemNr_upc",baseName:"riskdata.basket.item[itemNr].upc",type:"string"},{name:"riskdata_promotions_promotion_itemNr_promotionCode",baseName:"riskdata.promotions.promotion[itemNr].promotionCode",type:"string"},{name:"riskdata_promotions_promotion_itemNr_promotionDiscountAmount",baseName:"riskdata.promotions.promotion[itemNr].promotionDiscountAmount",type:"string"},{name:"riskdata_promotions_promotion_itemNr_promotionDiscountCurrency",baseName:"riskdata.promotions.promotion[itemNr].promotionDiscountCurrency",type:"string"},{name:"riskdata_promotions_promotion_itemNr_promotionDiscountPercentage",baseName:"riskdata.promotions.promotion[itemNr].promotionDiscountPercentage",type:"string"},{name:"riskdata_promotions_promotion_itemNr_promotionName",baseName:"riskdata.promotions.promotion[itemNr].promotionName",type:"string"},{name:"riskdata_riskProfileReference",baseName:"riskdata.riskProfileReference",type:"string"},{name:"riskdata_skipRisk",baseName:"riskdata.skipRisk",type:"string"}]},4528:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationInfo=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ApplicationInfo=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"adyenLibrary",baseName:"adyenLibrary",type:"CommonField"},{name:"adyenPaymentSource",baseName:"adyenPaymentSource",type:"CommonField"},{name:"externalPlatform",baseName:"externalPlatform",type:"ExternalPlatform"},{name:"merchantApplication",baseName:"merchantApplication",type:"CommonField"},{name:"merchantDevice",baseName:"merchantDevice",type:"MerchantDevice"},{name:"shopperInteractionDevice",baseName:"shopperInteractionDevice",type:"ShopperInteractionDevice"}]},4586:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SamsungPayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.SamsungPayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"SamsungPayDetails.FundingSourceEnum"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"samsungPayToken",baseName:"samsungPayToken",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"SamsungPayDetails.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Samsungpay="samsungpay"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.SamsungPayDetails||(t.SamsungPayDetails={}))},4738:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodIssuer=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentMethodIssuer=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"disabled",baseName:"disabled",type:"boolean"},{name:"id",baseName:"id",type:"string"},{name:"name",baseName:"name",type:"string"}]},4894:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(42268),a=s(21742),n=s(54738),r=s(75770),o=s(82042),h=s(59350),c=s(71499),l=s(85337);class d extends r.A{constructor(e){super("detail",e),this.mode="blur",this.layerSelect=()=>{if(!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("detail-no-layer").style.display="flex",(0,i.Ay)("detail-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("detail-settings").style.display="flex",(0,i.Ay)("detail-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"over"),this.stage.fresco.hasSelection()&&this.scratch.addBake(),this.updateBrush()},this.selectMode=e=>{switch(e.currentTarget.id){case"detail-mode-blur":this.setMode("blur");break;case"detail-mode-smudge":this.setMode("smudge");break;case"detail-mode-sharpen":this.setMode("sharpen")}},this.setMode=e=>{this.mode=e,(0,i.Ay)("detail-mode-blur").checked="blur"===this.mode,(0,i.Ay)("detail-mode-sharpen").checked="sharpen"===this.mode,(0,i.Ay)("detail-mode-smudge").checked="smudge"===this.mode},this.isShiftDown=!1,this.keyDown=e=>{if("Shift"!==e.key)switch(e.key){case",":e.shiftKey?this.brushPod.stepSoftness(.1):this.brushPod.stepSize(-10);break;case".":e.shiftKey?this.brushPod.stepSoftness(-.1):this.brushPod.stepSize(10)}else this.isShiftDown=!0},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1)},this.updateBrush=()=>{this.selected?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom)):this.stage.coating.removeCursorImage()},this.down=(e,t)=>{this.selected&&(this.stage.coating.freeze(!0),this.isShiftDown||(this.x=this.y=-1),"smudge"===this.mode&&this.ptt&&this.ptt.clearRect(0,0,this.ptt.canvas.width,this.ptt.canvas.height),"touch"!==t&&this.move(e),this.addMoveListeners())},this.x=-1,this.y=-1,this.move=e=>{let t="smudge"===this.mode?1:this.brush.getStep(),s=!1;if(e=this.stage.translateRasterToFresco(e,this.selected.rect),-1===this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0),e.x!==this.x||e.y!==this.y){let i=e.x-this.x,a=e.y-this.y,n=i>0?1:-1,r=a>0?1:-1;if(i=i<0?-i:i,a=a<0?-a:a,i>a){let e=.5*i;for(let o=1;o<=i;o++)this.x+=n,e+=a,e>=i&&(e-=i,this.y+=r),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),this.lx=this.x,this.ly=this.y,s=!0)}else{let e=.5*a;for(let o=1;o<=a;o++)this.y+=r,e+=i,e>=a&&(e-=a,this.x+=n),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),this.lx=this.x,this.ly=this.y,s=!0)}}s&&(this.scratch.applySelection(this.stage),window.requestAnimationFrame(()=>this.stage.render()))},this.drawShape=(e,t)=>{let s=this.strength.getValue(),i=this.getPatchContext(this.brush.canvas.width,this.brush.canvas.height);if(i.drawImage(this.selected.canvas,-e,-t),"smudge"===this.mode){if(this.x!==this.lx||this.y!==this.ly){i.drawImage(this.scratch.canvas,-e,-t);let a=this.getPatternContext(this.brush.canvas.width,this.brush.canvas.height);a.save(),a.drawImage(this.scratch.canvas,-(this.lx-~~(this.brush.canvas.width/2)),-(this.ly-~~(this.brush.canvas.height/2))),a.restore(),a.save(),a.globalCompositeOperation="destination-in",a.drawImage(this.brush.canvas,0,0),a.restore(),i.save(),i.globalAlpha=s/100,i.drawImage(this.ptt.canvas,0,0),i.restore()}this.scratch.ctx.drawImage(this.patch,e,t)}else"blur"===this.mode?this.blur(i):"sharpen"===this.mode&&this.sharpen(i),i.save(),i.globalCompositeOperation="destination-in",i.drawImage(this.brush.canvas,0,0),i.restore(),this.scratch.ctx.save(),this.scratch.ctx.globalAlpha=.01*s,this.scratch.ctx.drawImage(this.patch,e,t),this.scratch.ctx.restore()},this.getPatchContext=(e,t)=>this.patch?(this.patch.width!==e||this.patch.height!==t?(this.patch.width=e,this.patch.height=t):this.ptx.clearRect(0,0,e,t),this.ptx):(this.patch=n.VI(e,t),this.ptx=this.patch.getContext("2d"),this.ptx),this.getPatternContext=(e,t)=>this.pattern?(this.pattern.width!==e||this.pattern.height!==t?(this.pattern.width=e,this.pattern.height=t):this.ptt.clearRect(0,0,e,t),this.ptt):(this.pattern=n.VI(e,t),this.ptt=this.pattern.getContext("2d"),this.ptt),this.up=e=>{this.stage.coating.freeze(!1),this.removeMoveListeners();let t=n.TL(this.scratch.canvas);if(t&&t.width>0&&t.height>0){let e=n.ON(this.selected.canvas,t);const s=this.selected.rect.clone();this.scratch.drawToLayer(this.selected),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"detail",layer:this.selected,patchRect:t,patch:e,rect:s})}window.requestAnimationFrame(()=>this.stage.render())},this.sharpen=e=>{const t=.3;for(var s,i,a,n,r,o,h,c,l,d,p,u,m,g=e.canvas.width,y=e.canvas.height,v=[0,-1,0,-1,5,-1,0,-1,0],f=Math.round(Math.sqrt(v.length)),b=.5*f|0,w=e.createImageData(g,y),A=w.data,x=e.getImageData(0,0,g,y).data,k=y;k--;)for(s=g;s--;){for(a=k,i=s,h=4*(k*g+s),n=0,r=0,o=0,p=0;p<f;p++)for(d=0;d<f;d++)m=i+d-b,(u=a+p-b)>=0&&u<y&&m>=0&&m<g&&(l=v[p*f+d],n+=x[c=4*(u*g+m)]*l,r+=x[c+1]*l,o+=x[c+2]*l,x[c+3]*l);A[h]=n*t+.7*x[h],A[h+1]=r*t+.7*x[h+1],A[h+2]=o*t+.7*x[h+2],A[h+3]=x[h+3]}e.putImageData(w,0,0)},this.blur=e=>{var t,s,i,a,n,r,o,h,c,l,d,p,u,m,g=e.canvas.width,y=e.canvas.height,v=e.getImageData(0,0,g,y),f=v.data,b=g-1,w=y-1;var A=[],x=[],k=[],S=[],E=[],T=[];for(u=p=0,r=0;r<y;r++){for(t=6*f[u],s=6*f[u+1],i=6*f[u+2],a=6*f[u+3],o=1;o<=5;o++)h=u+((o>b?b:o)<<2),t+=f[h++],s+=f[h++],i+=f[h++],a+=f[h];for(n=0;n<g;n++)A[p]=t,x[p]=s,k[p]=i,S[p]=a,0==r&&(E[n]=((h=n+6)<b?h:b)<<2,T[n]=(h=n-5)>0?h<<2:0),c=u+E[n],l=u+T[n],t+=f[c++]-f[l++],s+=f[c++]-f[l++],i+=f[c++]-f[l++],a+=f[c]-f[l],p++;u+=g<<2}for(n=0;n<g;n++){for(t=6*A[d=n],s=6*x[d],i=6*k[d],a=6*S[d],o=1;o<=5;o++)t+=A[d+=o>w?0:g],s+=x[d],i+=k[d],a+=S[d];for(p=n<<2,r=0;r<y;r++)f[p+3]=m=34*a>>>12,m>0?(m=255/m,f[p]=(34*t>>>12)*m,f[p+1]=(34*s>>>12)*m,f[p+2]=(34*i>>>12)*m):f[p]=f[p+1]=f[p+2]=0,0===n&&(E[r]=((h=r+6)<w?h:w)*g,T[r]=(h=r-5)>0?h*g:0),c=n+E[r],l=n+T[r],t+=A[c]-A[l],s+=x[c]-x[l],i+=k[c]-k[l],a+=S[c]-S[l],p+=g<<2}e.putImageData(v,0,0)},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.removeDownListeners(),this.brushPod.cleanUp(),this.strength.cleanUp(),document.removeEventListener("zoom-change",this.updateBrush,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),(0,i.Ay)("detail-mode-blur").removeEventListener("click",this.selectMode,!1),(0,i.Ay)("detail-mode-sharpen").removeEventListener("click",this.selectMode,!1),(0,i.Ay)("detail-mode-smudge").removeEventListener("click",this.selectMode,!1),this.selected=void 0,this.pattern=void 0,this.patch=void 0,this.ptx=void 0,this.ptt=void 0},document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),(0,i.Ay)("detail-mode-blur").addEventListener("click",this.selectMode,!1),(0,i.Ay)("detail-mode-sharpen").addEventListener("click",this.selectMode,!1),(0,i.Ay)("detail-mode-smudge").addEventListener("click",this.selectMode,!1),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),this.brush=new h.A(new c.A("circle",50,.5)),this.brushPod=new l.A(e,"detail-brush",this.brush,this.updateBrush),this.strength=new o.A("detail-strength",{compact:!0,label:(0,a.A)("strength")+":",range:[1,100],defaultValue:40,step:1});const t=document.querySelector('input[name="detail-mode"]:checked').value;this.setMode(t),this.addDownListeners(),this.layerSelect()}}},5865:(e,t,s)=>{s.d(t,{Z:()=>d});var i=s(54738),a=s(53900),n=s(40963),r=s(41915),o=s(65209),h=s(54127),c=s(39989),l=s(58489);async function d(e,t){var s,d,p,u,m;const g=new Date;switch(t.type){case"bitmapChange":{if(!e.hasLayer(t.layer))return;const s=t.layer,a=s.rect?s.rect.clone():void 0;let r,o=i.oM(s.mask);if(s.canvas){r=s.canvas.getContext("2d").getImageData(t.patchRect.x,t.patchRect.y,t.patchRect.width,t.patchRect.height)}if(t.patch){const e=t.rect,n=!!s.canvas;s.extendCanvas(e);const r=s.canvas.getContext("2d");if(n&&(t.patchRect.x+=a.x-s.rect.x,t.patchRect.y+=a.y-s.rect.y),r.putImageData(t.patch,t.patchRect.x,t.patchRect.y),t.rect.width<s.rect.width||t.rect.height<s.rect.height){const a=i.Nw(t.rect.width,t.rect.height);a.getContext("2d").drawImage(s.canvas,s.rect.x-t.rect.x,s.rect.y-t.rect.y),t.patchRect.x+=s.rect.x-e.x,t.patchRect.y+=s.rect.y-e.y,s.canvas=a,s.rect=e}}else s.canvas=null,s.rect=new n.A(0,0,0,0);return t.mask&&(s.mask=t.mask),s.render(),t.layer.syncRequested=g,{type:"bitmapChange",kind:t.kind,layer:s,rect:a,patch:r,patchRect:t.patchRect.clone(),mask:o}}case"bitmapSwitch":{const e=i.oM(t.layer.canvas),s=t.layer.trim?t.layer.trim.clone():t.layer.rect.clone();return t.layer.switchCanvas(t.canvas,t.rect),t.layer.render(),t.layer.syncRequested=g,{type:"bitmapSwitch",kind:t.kind,layer:t.layer,rect:s,canvas:e}}case"selectionAndBitmapSwitch":{const a=i.oM(t.layer.canvas),n=t.layer.rect.clone();t.layer.switchCanvas(t.canvas,t.rect),t.layer.render(),t.layer.syncRequested=g;const r=i.oM(null===(s=null==e?void 0:e.selection)||void 0===s?void 0:s.mask);return e.addSelection(),e.selection.setMask(t.selection),{type:"selectionAndBitmapSwitch",kind:t.kind,selection:r,layer:t.layer,rect:n,canvas:a}}case"addLayer":{const s=e.layerNr(t.layer.id),i=e.deleteLayerById(t.layer.id);return{type:"addLayer",kind:t.kind,layer:i,order:s}}case"deleteLayer":return e.layers.splice(t.index,0,t.layer),t;case"order":return e.changeLayerOrder(t.to,t.from),t;case"layerSettings":{const e=Object.assign({},t.layer.settings);return t.layer.settings=t.settings,t.layer.syncRequested=g,{type:"layerSettings",kind:t.kind,layer:t.layer,settings:e}}case"textChange":{const e=t.layer.text;return t.layer.setText(t.text),t.layer.syncRequested=g,{type:"textChange",layer:t.layer,text:e}}case"textSettings":{const e=t.layer.textSettings.clone();return t.layer.textSettings=t.settings,t.layer.textSettings.measureText(),await t.layer.prepare(!0),t.layer.syncRequested=g,{type:"textSettings",kind:t.kind,layer:t.layer,settings:e}}case"background":{const s=e.color;return e.color=t.color,{type:"background",color:s}}case"mask":{const e=t.layer;let s;const i=e.hasMask();if(!i&&t.patch&&t.layer.addMask(),t.patch){const a=t.patch,n=e.mask.getContext("2d");i&&(s=n.getImageData(t.rect.x,t.rect.y,t.rect.width,t.rect.height)),n.putImageData(a,t.rect.x,t.rect.y)}else{if(i){s=e.mask.getContext("2d").getImageData(0,0,e.mask.width,e.mask.height)}t.layer.removeMask()}return e.render(),t.layer.syncRequested=g,{type:"mask",layer:e,rect:t.patch&&t.rect?t.rect:new n.A(0,0,e.canvas.width,e.canvas.height),patch:s}}case"maskInvert":return t.layer.invertMask(),t.layer.render(),t.layer.syncRequested=g,{type:"maskInvert",layer:t.layer};case"adjust":{const e=t.shaders.cloneChain();return t.shaders.chain=t.chain,{type:"adjust",layer:t.layer,kind:t.kind,chain:e,shaders:t.shaders}}case"glitch":{const e=t.shaders.cloneChain();return t.shaders.chain=t.chain,{type:"glitch",layer:t.layer,kind:t.kind,chain:e,shaders:t.shaders}}case"effect":{let e,s;return t.tool.marked&&(e=t.tool.marked.name,s=t.tool.marked.value),t.tool.shaders.reset(),t.name?(t.tool.shaders.addPreset(t.name,t.value),t.tool.marked=new o.A(t.name,t.value)):t.tool.marked=void 0,{type:"effect",layer:t.layer,kind:t.kind,tool:t.tool,name:e,value:s}}case"arrange":switch(t.layer.syncRequested=g,t.action.type){case"rect":{const e=t.layer.rect.clone();return t.layer.rect=t.action.rect,t.layer instanceof h.A&&(e.height=t.layer.textSettings.size,t.layer.rect.height!==t.layer.textSettings.size&&t.layer.setTextSize(t.layer.rect.height)),t.layer instanceof l.A&&t.layer.trimOnResize(e),t.layer instanceof c.A||t.layer.render(),{type:"arrange",kind:t.kind,action:{type:"rect",rect:e},layer:t.layer}}case"trim":{const e=t.layer.trim.clone();return t.layer.trim=t.action.rect,t.layer.render(),{type:"arrange",kind:t.kind,action:{type:"trim",rect:e},layer:t.layer}}case"trans":{const e=i.oM(t.layer.canvas),s=i.oM(t.layer.mask),a=t.layer.rect.clone();return t.layer.canvas=t.action.data,t.layer.mask=t.action.mask,t.layer.rect=t.action.rect,t.layer.render(),{type:"arrange",layer:t.layer,kind:t.kind,action:{type:"trans",data:e,mask:s,rect:a}}}}case"arrangeStack":{let e=t.stack,s=t.rects,i=new Array;for(let t=0;t<e.length;t++){let a=e[t],n=a.rect?a.rect.clone():void 0;a.rect=s[t],a instanceof h.A&&(n.height=a.textSettings.size,a.rect.height!==a.textSettings.size&&a.setTextSize(a.rect.height)),a instanceof l.A&&a.trimOnResize(n),i.push(n),a.syncRequested=g,a.render()}return{type:"arrangeStack",id:t.id,kind:"arrange",stack:t.stack,rects:i}}case"link":{let e=t.stack,s=new Array;for(let t=0;t<e.length;t++)s.push({layer:e[t].layer,link:null!==(d=e[t].layer.settings.link)&&void 0!==d?d:""}),e[t].layer.settings.link=e[t].link,e[t].layer.syncRequested=g;return{type:"link",kind:t.kind,stack:s}}case"flipLayer":return t.layer.flip(t.vertical),t.layer.render(),t.layer.syncRequested=g,{type:"flipLayer",layer:t.layer,vertical:t.vertical};case"rotateLayer":return t.layer.rotate(!t.counterClock),t.layer.render(),t.layer.syncRequested=g,{type:"rotateLayer",layer:t.layer,counterClock:!t.counterClock};case"crop":{const s=new r.A(-t.offset.x,-t.offset.y),o=new a.A(e.width,e.height);let h;if(e.crop(new n.A(t.offset.x,t.offset.y,t.size.width,t.size.height)),t.straighten){const s=e.layers[0];h=i.oM(s.canvas),s.syncRequested=g,s.canvas=t.straighten,s.rect=new n.A(0,0,s.canvas.width,s.canvas.height),e.width=s.rect.width,e.height=s.rect.height}return e.layers.forEach(e=>e.syncRequested=g),document.dispatchEvent(new CustomEvent("reset-viewport")),{type:"crop",offset:s,size:o,straighten:h}}case"pageSize":{const s=new a.A(e.width,e.height);return e.size(t.size.width,t.size.height,!1,t.anchor),document.dispatchEvent(new CustomEvent("reset-viewport")),{type:"pageSize",anchor:t.anchor,size:s}}case"pageResize":{const s=new a.A(e.width,e.height),i=e.layers.map(e=>e.clone(!0));e.width=t.size.width,e.height=t.size.height;for(let a=0;a<t.layers.length;a++){const s=t.layers[a];s.syncRequested=g,e.replaceLayer(s),s.render()}return e.selection&&e.selection.resize(e.width,e.height),document.dispatchEvent(new CustomEvent("reset-viewport")),{type:"pageResize",size:s,layers:i}}case"flip":return e.flip(t.vertical),e.layers.forEach(e=>e.syncRequested=g),{type:"flip",vertical:t.vertical};case"rotate":return e.rotate(!t.counterClock),document.dispatchEvent(new CustomEvent("reset-viewport")),e.layers.forEach(e=>e.syncRequested=g),{type:"rotate",counterClock:t.counterClock};case"selectionChange":{const s=e.selection?i.oM(e.selection.mask):void 0;return t.selection?(e.addSelection(),e.selection.setMask(t.selection),Object.assign(Object.assign({},t),{selection:s})):(e.removeSelection(),Object.assign(Object.assign({},t),{selection:s}))}case"merge":{const s=e.layers.findIndex(e=>e===t.target);if(s<0)return;const[i]=e.layers.splice(s,1);return t.layers.forEach(s=>{const i=t.order.findIndex(e=>e===s.id);i<0?e.layers.push(s):e.layers.splice(i,0,s)}),e.getSelected()&&!e.hasLayer(e.getSelected())&&e.selectLayerById(t.layers[0].id),{type:"merge",kind:t.kind,target:i,from:t.layers,order:s}}case"rasterize":{const s=e.layers.findIndex(e=>e.id===t.newId);if(s<0)return;const[i]=e.layers.splice(s,1,t.layer);return(null===(p=null==e?void 0:e.getSelected())||void 0===p?void 0:p.id)===i.id&&e.selectLayerById(t.layer.id),{type:"rasterize",layer:i,kind:t.kind,newId:t.layer.id}}case"convertSelectionToMask":{const s=t.layer.mask;return t.layer.removeMask(),t.layer.syncRequested=g,e.addSelection(),e.selection.mask=t.selection,e.selection.ctx=t.selection.getContext("2d"),e.selection.createOutline(),{type:"convertSelectionToMask",layer:t.layer,mask:s}}case"convertMaskToSelection":{const s=e.selection.mask;return e.removeSelection(),t.layer.mask=t.mask,t.layer.render(),t.layer.syncRequested=g,{type:"convertMaskToSelection",layer:t.layer,selection:s}}case"applyMask":return t.layer.canvas=t.canvas,t.layer.mask=t.mask,t.layer.rect=null===(u=t.rect)||void 0===u?void 0:u.clone(),t.layer.render(),t.layer.syncRequested=g,{type:"applyMask",layer:t.layer};case"frameContent":{let e,s;return t.layer.canvas&&(e=i.oM(t.layer.canvas),s=null===(m=t.layer.trim)||void 0===m?void 0:m.clone()),t.layer.canvas=t.canvas,t.layer.trim=t.trim,t.layer.render(),{type:"frameContent",kind:t.kind,layer:t.layer,canvas:e,trim:s}}case"frameSettings":{const e=t.layer.frameSettings.clone();return t.layer.frameSettings=t.settings,t.layer.prepare(),t.layer.syncRequested=g,{type:"frameSettings",kind:t.kind,layer:t.layer,settings:e}}case"shapeSettings":{const e=t.layer.shapeSettings.clone();return t.layer.shapeSettings=t.settings,await t.layer.prepare(),t.layer.syncRequested=g,{type:"shapeSettings",kind:t.kind,layer:t.layer,settings:e}}case"groupSettings":{const e=t.layer.groupSettings.clone();return t.layer.groupSettings=t.settings,t.layer.syncRequested=g,{type:"groupSettings",kind:t.kind,layer:t.layer,settings:e}}case"pageAnimation":{const s=e.animation?e.animation:void 0;return e.animation=t.animation,{type:"pageAnimation",kind:t.kind,animation:s}}case"layerAnimation":{const e=t.layer.animation?t.layer.animation:void 0;return t.layer.animation=t.animation,t.layer.syncRequested=g,{type:"layerAnimation",kind:t.kind,layer:t.layer,animation:e}}default:throw new Error("No handler for this undo type")}}},6395:(e,t,s)=>{async function i(e,t){return new Promise((s,i)=>{var a=new XMLHttpRequest,n=!1;a.responseType="arraybuffer",a.withCredentials=!1,a.open("GET",e,!0),a.onprogress=function(e){e.lengthComputable?t&&t(e.loaded/e.total*100):n||(n=!0,t&&t(-1))},a.onloadend=function(){a.status.toString().match(/^2/)?(n||t&&t(100),s(new Blob([this.response],{type:a.getResponseHeader("Content-Type")}))):i(a)},a.send()})}function a(e){return new Promise((t,s)=>{let i=new Image;i.onload=()=>t(i),i.onerror=e=>s(e),i.src=e})}function n(e){return new Promise((t,s)=>{const i=new FileReader;i.onerror=()=>s(i.error),i.onloadend=()=>t(i.result),i.readAsArrayBuffer(e)})}function r(e){return new Promise(async(t,s)=>{const i=URL.createObjectURL(e);let a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{URL.revokeObjectURL(i),a.width+a.height==0?s("Could not open file!"):t(a)},a.onerror=function(){URL.revokeObjectURL(i),s("Could not open file!")},a.name=e instanceof File?e.name:"",a.src=i})}s.d(t,{CB:()=>n,Ep:()=>r,kw:()=>a,yP:()=>i})},6709:(e,t,s)=>{s.d(t,{A:()=>v});var i=s(21742),a=s(26806),n=s(42268),r=s(40963),o=s(53900),h=s(54738),c=s(41915),l=s(22866),d=s(81937),p=s(54127),u=s(58489),m=s(39989),g=s(86445),y=s(10122);class v extends a.A{constructor(e){super((0,i.A)("dialogResizeTitle"),!0,!0),this.rotate=!1,this.constrain=!0,this.messy=!1,this.saving=!1,this.method="fill",this.selectPreset=e=>{if(this.saving)return;let t=e.currentTarget.getAttribute("data");if(-1!==t.indexOf(":")){const e=Number(t.split(":")[0]),s=Number(t.split(":")[1]);let i=this.source.width,a=this.source.height;i=a=i>a?i:a,e/s>1?a=Math.floor(a/(e/s)):i=Math.floor(i/(s/e)),this.setSize(i,a)}else{const e=t.split("x");this.setSize(Number(e[0]),Number(e[1]))}},this.changeContraint=e=>{this.saving||(this.constrain=!this.constrain,(0,n.Ay)("resize-size-lock").style.display=this.constrain?"block":"none",(0,n.Ay)("resize-size-vs").style.display=this.constrain?"none":"block",(0,n.Ay)("toggle-resize-constraint").checked=this.constrain)},this.changeRotate=e=>{this.saving||(this.rotate=!this.rotate,this.calculateResize())},this.changeMethod=()=>{this.method=(0,n.Ay)("resize-method-fill").checked?"fill":"fit",this.calculateResize()},this.setSize=(e,t)=>{this.target.width=e,this.target.height=t,(0,n.Ay)("resize-width").value=e.toString(),(0,n.Ay)("resize-height").value=t.toString(),this.calculateResize()},this.sizeInputChange=e=>{if(this.saving)return;let t=null==e?void 0:e.currentTarget;if("resize-width"==t.id){if(this.target.width=h.qE(Number(t.value),1,this.maxSize),this.constrain){let e=this.target.width/this.source.width;this.target.height=Math.round(e*this.source.height),(0,n.Ay)("resize-height").value=this.target.height.toString()}}else if(this.target.height=h.qE(Number(t.value),1,this.maxSize),this.constrain){let e=this.target.height/this.source.height;this.target.width=Math.round(e*this.source.width),(0,n.Ay)("resize-width").value=this.target.width.toString()}t!=document.activeElement&&((0,n.Ay)("resize-width").value=this.target.width.toString(),(0,n.Ay)("resize-height").value=this.target.height.toString()),h.sg("resize",250,this.calculateResize)},this.calculateResize=(e=!1)=>{if(console.log(this.method),!this.saving||e){if(this.reset(),this.target.width!==this.source.width||this.target.height!==this.source.height){Math.round(this.target.width/this.source.width*1e3)===Math.round(this.target.height/this.source.height*1e3)?this.calculateScaleResize():this.calculateSmartResize(),this.messy=!0}this.preview.width=this.target.width,this.preview.height=this.target.height,(0,n.Ay)("preview-scale-label").innerText=(this.preview.offsetWidth/this.target.width*100).toFixed(1)+"%",this.stage.renderOutputFrame(this.ctx,!1,void 0===this.stage.fresco.color)}},this.calculateScaleResize=()=>{let e=new c.A(this.target.width/this.source.width,this.target.height/this.source.height);for(const t of this.stage.fresco.layers)if(t.rect){let s=e.x,i=e.y;if(t.rect.rotation){let a=t.rect.rotation>180?t.rect.rotation-180:t.rect.rotation,n=Math.abs(90-a)/90;s=e.x*n+e.y*(1-n),i=e.y*n+e.x*(1-n)}t.rect.x=0+Math.round(t.rect.x*e.x),t.rect.y=0+Math.round(t.rect.y*e.y),s!==i&&t instanceof p.A?(t.rect.x+=.5*Math.round(t.rect.width*s-t.rect.width*i),t.rect.width=Math.round(t.rect.width*i),t.rect.height=Math.round(t.rect.height*i)):(t.rect.width=Math.round(t.rect.width*s),t.rect.height=Math.round(t.rect.height*i)),t.rect.width<1&&(t.rect.width=1),t.rect.height<1&&(t.rect.height=1),t instanceof p.A?t.scaleBect(i):t instanceof u.A?t.scaleTrim(s,i):t.render()}},this.calculateSmartResize=()=>{const e=this.target.width===this.target.height?"square":this.target.width>this.target.height?"landscape":"portrait",t=this.source.width===this.source.height?"square":this.source.width>this.source.height?"landscape":"portrait";if(t===e||"square"===t||"square"===e){const e=new c.A(this.target.width/this.source.width,this.target.height/this.source.height);for(const t of this.stage.fresco.layers)if(t.rect)if(t.rect.width>=this.source.width&&t.rect.height>=this.source.height&&(t.type===l.A.TYPE_SHAPE||t.type===l.A.TYPE_IMAGE||t.type===l.A.TYPE_FRAME))t instanceof u.A?(t.rect.x=t.rect.y=0,t.rect.width=this.target.width,t.rect.height=this.target.height,t.fitContent()):("fill"===this.method?t.rect=r.A.fillFit(t.rect.width,t.rect.height,this.target.width,this.target.height):t.rect=r.A.bestFit(t.rect.width,t.rect.height,this.target.width,this.target.height,!0),t.render());else{const s=this.source.width>this.source.height?.2*this.source.width:.2*this.source.height;this.positionAndScaleLayer(t,e,s)}}else{const t=new Array,s=new Array,i=new Array;for(const o of this.stage.fresco.layers)if(o.rect)if(o.rect.width>=.65*this.source.width&&o.rect.height>=.65*this.source.height&&(o.type===l.A.TYPE_SHAPE||o.type===l.A.TYPE_IMAGE||o.type===l.A.TYPE_ELEMENT||o.type===l.A.TYPE_FRAME))if(this.rotate){let e=new c.A(this.target.width/this.source.height,this.target.height/this.source.width);if(o instanceof m.A||o instanceof y.A){let t=e.x<e.y?e.y:e.x;o.rect.width>=this.source.width&&o.rect.height>=this.source.height&&(t=e.x>e.y?e.y:e.x);let s=o.rect.center();o.rect.width=Math.round(o.rect.width*t),o.rect.height=Math.round(o.rect.height*t),o.rect.setCenter(new c.A(Math.round(s.y*e.x),Math.round(s.x*e.y))),o.rect.rotation+=90}else o.rect=o.rect.flipWidthAndHeight(),o.rect.x=Math.floor(o.rect.x*e.x),o.rect.y=Math.floor(o.rect.y*e.y),o.rect.width=Math.round(o.rect.width*e.x),o.rect.height=Math.round(o.rect.height*e.y),o instanceof u.A?o.fitContent():o.render()}else"fill"===this.method?o.rect=r.A.fillFit(o.rect.width,o.rect.height,this.target.width,this.target.height):o.rect=r.A.bestFit(o.rect.width,o.rect.height,this.target.width,this.target.height,!0),o instanceof u.A?o.fitContent():o.render();else{let a=o.rect.center();"portrait"===e?a.x>.45*this.source.width&&a.x<.55*this.source.width?i.push(o):a.x>=.5*this.source.width?(o.rect.x-=.5*this.source.width,s.push(o)):t.push(o):a.y>=.5*this.source.height?(o.rect.y-=.5*this.source.height,s.push(o)):t.push(o)}const a=this.stage.fresco.getStackBounds(t),n=this.stage.fresco.getStackBounds(s),h=this.stage.fresco.getStackBounds(i);if("portrait"===e){const e=.2*this.source.height;let r=new o.A(.5*this.source.width,this.source.height),l=new o.A(this.target.width,.5*this.target.height);if(a){let s=new c.A(l.width/r.width,l.height/r.height);a.x>0&&a.width<1.5*r.width?s.x=l.width/(a.width+2*a.x):a.x<=0&&a.width>.5*r.width&&(s.x=s.x=l.width/a.width);for(const i of t)this.positionAndScaleLayer(i,s,e)}if(n){let t=0,i=new c.A(l.width/r.width,l.height/r.height);n.x>=0&&n.right()<=r.width&&n.width<1.5*r.width?(t=r.width-n.right()-n.x,i.x=l.width/(n.width+2*(r.width-n.right()))):n.x<=0&&n.width>.5*r.width&&(t=Math.abs(n.x),i.x=l.width/(n.width-(n.right()-r.width)));for(const a of s)a.rect.x+=t,this.positionAndScaleLayer(a,i,e),a.rect.y+=.5*this.target.height,a.bect&&(a.bect.y+=.5*this.target.height)}if(h){let e=h.width/this.source.width>.5?.95*this.target.width/h.width:this.target.width/(.5*this.source.width);for(const t of i){let s=t.rect.center();t.rect.width=Math.round(t.rect.width*e),t.rect.height=Math.round(t.rect.height*e),t.rect.width<1&&(t.rect.width=1),t.rect.height<1&&(t.rect.height=1),t.rect.setCenter(new c.A(this.target.width*(s.x/this.source.width),.25*this.target.height+.5*this.target.height*(s.y/this.source.height))),t instanceof p.A?t.scaleBect(e):t instanceof u.A?t.scaleTrim(e,e):t.render()}}}else{let e=0;const i=.2*this.source.width;let r=new o.A(this.source.width,.5*this.source.height),h=new o.A(.5*this.target.width,this.target.height);if((a&&!n||!a&&n)&&(e=a?.5*r.width:-.5*r.width),a){let s=0,n=new c.A(h.width/r.width,h.height/r.height);a.y>0&&a.height<1.5*r.height?n.y=h.height/(a.height+2*a.y):a.y>0&&a.height>1.5*r.height?s=-1*a.y:a.y<=0&&a.height>.5*r.height&&(n.y=n.y=h.height/a.height);for(const a of t)a.rect.y+=s,a.rect.x+=e,this.positionAndScaleLayer(a,n,i,!0)}if(n){let t=0,a=new c.A(h.width/r.width,h.height/r.height);n.y<0&&(t=Math.abs(n.y),n.y+=t),n.height-t>r.height&&(n.height=r.height+t),n.height>=r.height?a.y=h.height/n.height:t+=.5*(r.height-n.height);for(const n of s)n.rect.y+=t,n.rect.x+=e,this.positionAndScaleLayer(n,a,i,!0),n.rect.x+=.5*this.target.width,n.bect&&(n.bect.x+=.5*this.target.width)}}}},this.positionAndScaleLayer=(e,t,s,i=!1)=>{const a=t.x>t.y?t.y:t.x;if(this.willScaleUniform(e,s))e.rect.x=Math.floor(e.rect.x*t.x),e.rect.y=Math.floor(e.rect.y*t.y),e.rect.width=Math.round(e.rect.width*t.x),e.rect.height=Math.round(e.rect.height*t.y),e.rect.width<1&&(e.rect.width=1),e.rect.height<1&&(e.rect.height=1),e instanceof u.A?e.fitContent():e.render();else{const s=e.rect.center();e.rect.width=Math.round(e.rect.width*a),e.rect.height=Math.round(e.rect.height*a),e.rect.width<1&&(e.rect.width=1),e.rect.height<1&&(e.rect.height=1),i?(e.rect.y=Math.floor(e.rect.y*t.y),e.rect.setCenterX(Math.round(s.x*t.x))):e.rect.setCenter(new c.A(Math.round(s.x*t.x),Math.round(s.y*t.y))),e instanceof p.A?e.scaleBect(a):e instanceof u.A?e.scaleTrim(a,a):e.render()}},this.willScaleUniform=(e,t)=>(e instanceof u.A||e instanceof g.A)&&(e.rect.width>t||e.rect.height>t)&&!(e instanceof g.A&&("svg"===e.shapeSettings.variant||"ellipse"===e.shapeSettings.variant)),this.reset=()=>{if(this.messy){for(let e=0;e<this.stage.fresco.layers.length;++e)this.stage.fresco.layers[e].rect&&(this.stage.fresco.layers[e].rect=this.rOrg[e].clone(),this.stage.fresco.layers[e].trim&&(this.stage.fresco.layers[e].trim=this.tOrg[e].clone()),this.stage.fresco.layers[e].render());this.messy=!1}},this.cancel=()=>{this.reset(),this.cleanUp()},this.apply=()=>{if(this.saving)return;this.saving=!0,this.reset();const e=new o.A(this.source.width,this.source.height);this.stage.fresco.setSize(this.target.width,this.target.height),this.stage.fresco.selection&&this.stage.fresco.selection.size(this.target.width,this.target.height);const t=this.stage.fresco.layers.map(e=>(e.syncRequested=new Date,e.clone(!0)));this.calculateResize(!0);for(const s of this.stage.fresco.layers)s instanceof m.A&&s.applyTransform(!0);this.stage.history.add({type:"pageResize",size:e,layers:t}),this.stage.updateViewport(),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-arrange")),this.cleanUp()},this.stage=e,this.maxSize=8192,this.rOrg=new Array,this.tOrg=new Array;for(let i of this.stage.fresco.layers)this.rOrg.push(i.rect?i.rect.clone():void 0),this.tOrg.push(i.trim?i.trim.clone():void 0);this.source=new o.A(this.stage.fresco.width,this.stage.fresco.height),this.target=new o.A(this.stage.fresco.width,this.stage.fresco.height),this.dialog.style.width="90%",this.dialog.style.height="80%",this.dialog.style.maxWidth="1200px",this.content.style.flex="1",this.content.style.height="1px",this.content.style.padding="0px",this.content.style.display="flex",this.content.style.position="relative",this.setContent(`\n            <div id="resize-settings" style="flex:0 0 auto;width:320px;position:relative;overflow: hidden;">\n\n                <div id="resize-settings-inner" style="padding:20px;overflow: hidden;">\n\n                    <div style="display: flex; line-height: 28px;">\n                        <div style="flex-grow:1">\n                            <label class="split" style="height: 36px!important;">${(0,i.A)("width")} <input type="number" id="resize-width"/></label>\n                            <label class="split" style="height: 36px!important;">${(0,i.A)("height")} <input type="number" id="resize-height"/></label>\n                        </div>\n                        <div style="width:30px">\n                            <div id="resize-constraint" class="constraint">\n                                <div class="constraint-lock" flow="left" tooltip="${(0,i.A)("toggleConstraint")}">\n                                    <img src="/img/icon/locked.svg" id="resize-size-lock" width="16" height="16" loading="lazy" class="ic tiny-icon">\n                                    <img src="/img/icon/x.svg" id="resize-size-vs" width="16" height="16" loading="lazy" style="display:none" class="ic tiny-icon">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <input type="checkbox" checked id="toggle-resize-constraint" />\n                    <label class="switch top-10" for="toggle-resize-constraint">${(0,i.A)("dialogResizeLock")}<span></span></label>\n            \n                    <div class="splitter small top-20"></div>\n\n                    <div class="split top-20">\n                        <label>${(0,i.A)("method")}</label>\n                        <div class="switch-field">\n                            <input type="radio" id="resize-method-fill" name="resize-method" value="fill" checked="true" /><label for="resize-method-fill">${(0,i.A)("fill")}</label>\n                            <input type="radio" id="resize-method-fit" name="resize-method" value="fit" /><label for="resize-method-fit">${(0,i.A)("fit")}</label>\n                        </div>\n                    </div>\n\n                    <input type="checkbox" id="toggle-resize-rotate" />\n                    <label class="switch top-10" for="toggle-resize-rotate">${(0,i.A)("dialogResizeRotate")}<span></span></label>\n\n                    <div class="splitter top-20"></div>\n\n                    <ul id="resize-presets" class="size-list top-20">\n\n                        <li data="" id="resize-reset"><img src="/img/icon/reset.svg" width="18" height="18" loading="lazy" title="reset">${(0,i.A)("reset")} <span id="resize-reset-span"></span></span></li>\n\n                        <li data="1:1"><img src="/img/icon/category/landscape.svg" width="18" height="18" loading="lazy" title="Square">Square <span>1:1 aspect</span></span></li>\n                        <li data="16:9"><img src="/img/icon/category/landscape.svg" width="18" height="18" loading="lazy" title="Wide">Wide <span>16:9 aspect</span></span></li>\n                        <li data="9:16"><img src="/img/icon/category/portrait.svg" width="18" height="18" loading="lazy" title="Tall">Tall <span>9:16 aspect</span></span></li>\n                        <li data="4:3"><img src="/img/icon/category/landscape.svg" width="18" height="18" loading="lazy" title="Landscape">Landscape <span>4:3 aspect</span></span></li>\n                        <li data="3:4"><img src="/img/icon/category/portrait.svg" width="18" height="18" loading="lazy" title="Portrait">Portrait <span>3:4 aspect</span></span></li>\n\n                        <li data="1080x1920"><img src="/img/icon/category/tiktok.svg" width="18" height="18" loading="lazy" title="Tiktok video">Tiktok video<span>1080x1920px</span></li>\n\n                        <li data="1080x1080"><img src="/img/icon/category/instagram.svg" width="18" height="18" loading="lazy" title="Instagram square">Instagram square <span>1080x1080px</span></li>\n                        <li data="1080x1350"><img src="/img/icon/category/instagram.svg" width="18" height="18" loading="lazy" title="Instagram post">Instagram post <span>1080x1350px</span></li>\n                        <li data="1080x1920"><img src="/img/icon/category/instagram.svg" width="18" height="18" loading="lazy" title="Instagram story">Instagram story <span>1080x1920px</span></li>\n                        <li data="1080x1920"><img src="/img/icon/category/instagram.svg" width="18" height="18" loading="lazy" title="Instagram reelse">Instagram reels <span>1080x1920px</span></li>\n\n                        <li data="1200x630"><img src="/img/icon/category/facebook.svg" width="18" height="18" loading="lazy" title="Facebook post">Facebook post <span>1200x630px</span></li>\n                        <li data="1080x1920"><img src="/img/icon/category/facebook.svg" width="18" height="18" loading="lazy" title="Facebook story">Facebook story <span>1080x1920px</span></li>\n                        <li data="1080x1920"><img src="/img/icon/category/facebook.svg" width="18" height="18" loading="lazy" title="Facebook reelse">Facebook reels <span>1080x1920px</span></li>\n                        <li data="850x850"><img src="/img/icon/category/facebook.svg" width="18" height="18" loading="lazy" title="Facebook profile">Facebook profile <span>850x850px</span></li>\n                        <li data="1920x1005"><img src="/img/icon/category/facebook.svg" width="18" height="18" loading="lazy" title="Facebook event">Facebook event <span>1920x1005px</span></li>\n                        \n                        <li data="1600x900"><img src="/img/icon/category/x.svg" width="18" height="18" loading="lazy" title="X post">X post <span>1600x900px</span></li>\n                        <li data="1500x500"><img src="/img/icon/category/x.svg" width="18" height="18" loading="lazy" title="X cover">X cover <span>1500x500px</span></li>\n                        <li data="400x400"><img src="/img/icon/category/x.svg" width="18" height="18" loading="lazy" title="X profile">X profile <span>400x400px</span></li>\n\n                        <li data="1080x1920"><img src="/img/icon/category/youtube.svg" width="18" height="18" loading="lazy" title="Youtube shorts">Youtube shorts <span>1080x1920px</span></li>\n                        <li data="800x800"><img src="/img/icon/category/youtube.svg" width="18" height="18" loading="lazy" title="Youtube profile">Youtube profile <span>800x800px</span></li>\n                        <li data="1280x720"><img src="/img/icon/category/youtube.svg" width="18" height="18" loading="lazy" title="Youtube thumbnail">Youtube thumbnail <span>1280x720px</span></li>\n                        <li data="2048x1152"><img src="/img/icon/category/youtube.svg" width="18" height="18" loading="lazy" title="Youtube channel art">Youtube channel art <span>2048x1152px</span></li>\n\n                        <li data="1000x1500"><img src="/img/icon/category/pinterest.svg" width="18" height="18" loading="lazy" title="Pinterest pin">Pinterest pin <span>1000x1500px</span></li>\n                        <li data="1000x1000"><img src="/img/icon/category/pinterest.svg" width="18" height="18" loading="lazy" title="Pinterest square pin">Pinterest square pin <span>1000x1000px</span></li>\n                        <li data="1000x2100"><img src="/img/icon/category/pinterest.svg" width="18" height="18" loading="lazy" title="Pinterest long pin">Pinterest long pin <span>1000x2100px</span></li>\n\n                        <li data="1240x1748"><img src="/img/icon/category/paper.svg" width="18" height="18" loading="lazy" title="ISO A6">A6 105 x 148 mm <span>1240x1748px</span></li>\n                        <li data="1748x2480"><img src="/img/icon/category/paper.svg" width="18" height="18" loading="lazy" title="ISO A5">A5 148 x 210 mm <span>1748x2480px</span></li>\n                        <li data="2480x3508"><img src="/img/icon/category/paper.svg" width="18" height="18" loading="lazy" title="ISO A4">A4 210 x 297 mm <span>2480x3508px</span></li>\n                        <li data="3508x4960"><img src="/img/icon/category/paper.svg" width="18" height="18" loading="lazy" title="ISO A3">A3 297 x 420 mm <span>3508x4960px</span></li>\n\n                        <li data="2079x2953"><img src="/img/icon/category/paper.svg" width="18" height="18" loading="lazy" title="ISO B5">B5 185 x 275 mm <span>2079x2953px</span></li>\n                        <li data="2953x4169"><img src="/img/icon/category/paper.svg" width="18" height="18" loading="lazy" title="ISO B4">B4 257 x 364 mm <span>2953x4169px</span></li>\n                        <li data="4169x5906"><img src="/img/icon/category/paper.svg" width="18" height="18" loading="lazy" title="ISO B4">B3 382 x 546 mm <span>4169x5906px</span></li>\n\n                        <li data="1275x1650"><img src="/img/icon/category/flyer.svg" width="18" height="18" loading="lazy" title="Flyer 4.25 x 5.5 in">Flyer 4.25 x 5.5 in<span>1275x1650px</span></li>\n                        <li data="1650x2550"><img src="/img/icon/category/flyer.svg" width="18" height="18" loading="lazy" title="Flyer 5.5 x 8.5 in">Flyer 5.5 x 8.5 in<span>1650x2550px</span></li>\n                        <li data="1650x2550"><img src="/img/icon/category/flyer.svg" width="18" height="18" loading="lazy" title="Flyer 8.5 x 11 in">Flyer 8.5 x 11 in<span>2550x3300px</span></li>\n                    </ul>\n\n                </div>\n            </div>\n\n            <div id="resize-preview" style="display:flex;flex-grow:1;background: linear-gradient(43deg, #ffffff00 0%, #ffffff11 100%);padding:20px;align-items:center;justify-content:center;">\n                <canvas id="resize-preview-canvas" style="max-height:100%; max-width:100%; box-shadow: 6px 6px 12px rgb(0 0 0 / 30%);background-image: var(--square-bg);background-size: 20px 20px;background-position: 50% 50%;"/>\n            </div>\n        `),this.content.append((0,n.T)("div",{id:"preview-scale",style:"display:flex;position:absolute;z-index:99;height:28px;top:20px;right:20px;padding:0 15px 0 10px;gap:8px;border-radius:50vh;background-color:#00000088;color:#fff;opacity:0.7;align-items:center;"},(0,n.T)("img",{src:"/img/tool/zoom.svg",width:16,height:16}),(0,n.T)("span",{id:"preview-scale-label",style:"font-size:14px;"}))),(0,n.Ay)("resize-reset").setAttribute("data",this.source.width+"x"+this.source.height),(0,n.Ay)("resize-reset-span").innerText=this.source.width+"x"+this.source.height+"px",(0,n.Ay)("resize-constraint").addEventListener("click",this.changeContraint,!1),(0,n.Ay)("toggle-resize-constraint").addEventListener("click",this.changeContraint,!1),(0,n.Ay)("toggle-resize-rotate").addEventListener("click",this.changeRotate,!1);let t=(0,n.Ay)("resize-width");t.addEventListener("input",this.sizeInputChange,!1),t.addEventListener("change",this.sizeInputChange,!1),t.value=this.source.width.toString();let s=(0,n.Ay)("resize-height");s.addEventListener("change",this.sizeInputChange,!1),s.addEventListener("input",this.sizeInputChange,!1),s.value=this.source.height.toString(),(0,n.Ay)("resize-method-fill").addEventListener("change",this.changeMethod,!0),(0,n.Ay)("resize-method-fit").addEventListener("change",this.changeMethod,!0);let a=(0,n.Ay)("resize-presets").getElementsByTagName("li");for(var v=0;v<a.length;v++)a[v].addEventListener("click",this.selectPreset,!1);new d.A((0,n.Ay)("resize-settings")),this.preview=(0,n.Ay)("resize-preview-canvas"),this.ctx=this.preview.getContext("2d"),this.calculateResize()}}},7245:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e,t,s=!1){this.start=e,this.end=t,this.soft=s}}},7324:(e,t,s)=>{s.d(t,{A:()=>h});var i,a=s(15818),n=s(16309),r=s(14871);class o{constructor(e){this.value=e,this.getType=()=>this.value instanceof a.A?"color":this.value instanceof n.Ay?"gradient":this.value instanceof r.A?"pattern":void 0,this.getStringValue=()=>this.value instanceof a.A?this.value.toHEX():this.value instanceof n.Ay||this.value instanceof r.A?this.value.toJSON():void 0,this.getCssValue=()=>this.value instanceof a.A?this.value.toHEX():this.value instanceof n.Ay||this.value instanceof r.A?this.value.toCSS():void 0,this.addToCanvasFillStyle=(e,t=0,s=0)=>{this.value instanceof a.A?e.fillStyle=this.value.toHEX():this.value instanceof n.Ay?e.fillStyle=this.value.createCanvasGradient(e,t,s):this.value instanceof r.A&&(e.fillStyle=this.value.createCanvasPattern(e))},this.addToCanvasStrokeStyle=(e,t=0,s=0)=>{this.value instanceof a.A?e.strokeStyle=this.value.toHEX():this.value instanceof n.Ay?e.strokeStyle=this.value.createCanvasGradient(e,t,s):this.value instanceof r.A&&(e.strokeStyle=this.value.createCanvasPattern(e))}}}i=o,o.fromString=async(e,t)=>{let s;return"color"===e&&/^#[0-9A-F]{6}$/i.test(t)?s=new i(a.A.fromHEX(t)):"gradient"===e?s=new i(n.Ay.fromJSON(t)):"pattern"===e&&(s=new i(await r.A.fromJSON(t))),s};const h=o},7430:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserInfo=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.BrowserInfo=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"acceptHeader",baseName:"acceptHeader",type:"string"},{name:"colorDepth",baseName:"colorDepth",type:"number"},{name:"javaEnabled",baseName:"javaEnabled",type:"boolean"},{name:"javaScriptEnabled",baseName:"javaScriptEnabled",type:"boolean"},{name:"language",baseName:"language",type:"string"},{name:"screenHeight",baseName:"screenHeight",type:"number"},{name:"screenWidth",baseName:"screenWidth",type:"number"},{name:"timeZoneOffset",baseName:"timeZoneOffset",type:"number"},{name:"userAgent",baseName:"userAgent",type:"string"}]},7623:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(2215);class a{constructor(e=0,t=0,s=0,i=0,a=0,n=0,r=0,o=0,h=0,c=!0){this.shadowRed=e,this.shadowGreen=t,this.shadowBlue=s,this.midtoneRed=i,this.midtoneGreen=a,this.midtoneBlue=n,this.highlightRed=r,this.highlightGreen=o,this.highlightBlue=h,this.preserve=c}}var n=s(82042),r=s(21742),o=s(42268);class h extends i.A{constructor(e){super(e,(0,r.A)("titleColorBalance")),this.colorset=new a,this.range="midtone",this.preserveChange=()=>{this.colorset.preserve=(0,o.Ay)("balance-preserve-luminosity").checked,this.change()},this.rangeChange=()=>{switch(this.range=document.querySelector('input[name="balance-range"]:checked').value,this.range){case"shadow":this.red.setValue(this.colorset.shadowRed),this.green.setValue(this.colorset.shadowGreen),this.blue.setValue(this.colorset.shadowBlue);break;case"midtone":this.red.setValue(this.colorset.midtoneRed),this.green.setValue(this.colorset.midtoneGreen),this.blue.setValue(this.colorset.midtoneBlue);break;case"highlight":this.red.setValue(this.colorset.highlightRed),this.green.setValue(this.colorset.highlightGreen),this.blue.setValue(this.colorset.highlightBlue)}},this.change=(e="",t=0)=>{switch(this.range){case"shadow":this.colorset.shadowRed=this.red.getValue(),this.colorset.shadowGreen=this.green.getValue(),this.colorset.shadowBlue=this.blue.getValue();break;case"midtone":this.colorset.midtoneRed=this.red.getValue(),this.colorset.midtoneGreen=this.green.getValue(),this.colorset.midtoneBlue=this.blue.getValue();break;case"highlight":this.colorset.highlightRed=this.red.getValue(),this.colorset.highlightGreen=this.green.getValue(),this.colorset.highlightBlue=this.blue.getValue()}this.shaders.addShader("balance",this.colorset),setTimeout(()=>{this.scratch.canvas=this.shaders.apply(this.cache),window.requestAnimationFrame(()=>this.stage.render())},0)},this.kind="balance",this.setContent(`\n                <label>Range</label>\n                <div class="switch-field stretch top-5">\n                    <input type="radio" id="balance-range-shadow" name="balance-range" value="shadow"/><label for="balance-range-shadow">${(0,r.A)("shadows")}</label>\n                    <input type="radio" id="balance-range-midtone" name="balance-range" value="midtone" checked/><label for="balance-range-midtone">${(0,r.A)("midtones")}</label>\n                    <input type="radio" id="balance-range-highlight" name="balance-range" value="highlight"/><label for="balance-range-highlight">${(0,r.A)("highlights")}</label>\n                </div>\n\n                <div id='balance-red' class='top-20'></div>\n                <div id='balance-green' class='top-5'></div>\n                <div id='balance-blue' class='top-5'></div>\n\n                <input type="checkbox" id="balance-preserve-luminosity" checked>\n                <label class="top-20 switch" for="balance-preserve-luminosity">${(0,r.A)("preserveLuminosity")}<span></span></label>\n                `),this.red=new n.A("balance-red",{label:(0,r.A)("red"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("balance",e)}),this.green=new n.A("balance-green",{label:"Green",step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("balance",e)}),this.blue=new n.A("balance-blue",{label:"Blue",step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("balance",e)}),(0,o.Ay)("balance-range-shadow").addEventListener("click",this.rangeChange,!1),(0,o.Ay)("balance-range-midtone").addEventListener("click",this.rangeChange,!1),(0,o.Ay)("balance-range-highlight").addEventListener("click",this.rangeChange,!1),(0,o.Ay)("balance-preserve-luminosity").addEventListener("change",this.preserveChange,!1)}}},8594:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(21742),a=s(75770),n=s(54738),r=s(41915),o=s(29755),h=s(21079);class c extends a.A{constructor(e,t){super(e,t),this.moveLock="none",this.contextMenu=e=>{e.preventDefault(),e.stopPropagation(),this.stage.coating.frozen||new h.Ay(new r.A(e.clientX,e.clientY),[new h.kt((0,i.A)("titleSelectAll"),()=>this.stage.selectionAll(),"Ctrl + A"),new h.kt((0,i.A)("titleSelectPixels"),()=>this.stage.selectionPixels()),new h.kt((0,i.A)("titleSelectDeselect"),this.stage.fresco.hasSelection()?()=>this.stage.selectionDeselect():void 0,"Ctrl + D"),new h.kt((0,i.A)("titleSelectInvert"),this.stage.fresco.hasSelection()?()=>this.stage.selectionInvert():void 0,"Ctrl + I"),new h.kt,new h.kt((0,i.A)("titleCut"),this.stage.fresco.hasSelection()?()=>document.dispatchEvent(new CustomEvent("cut-menu")):void 0,"Ctrl + X"),new h.kt((0,i.A)("titleCopy"),this.stage.fresco.hasSelection()?()=>()=>document.dispatchEvent(new CustomEvent("copy-menu")):void 0,"Ctrl + C"),new h.kt((0,i.A)("titlePaste"),()=>document.dispatchEvent(new CustomEvent("paste-menu")),"Ctrl + V"),new h.kt((0,i.A)("titleClear"),this.stage.fresco.hasSelection()?()=>document.dispatchEvent(new CustomEvent("clear-menu")):void 0,"DEL")])},this.pointerDown=e=>{if(e.stopPropagation(),this.stage.coating.override||e.button>0)return;this.isDown=!0,this.addPointer(e.pointerId);const t=o.Ay.isHDPI?2:1;1===this.pointers.length&&this.preDown(new r.A(e.offsetX*t,e.offsetY*t),e.pointerType,e.pressure)},this.pointerMove=e=>{e.stopPropagation();const t=o.Ay.isHDPI?2:1;let s=new r.A(e.offsetX*t,e.offsetY*t);if(e.buttons||!this.isDown||this.noGoZone)if(this.isDown)this.preMove(s);else{if(this.stage.fresco.hasSelection()){let e=this.stage.translateRasterToFresco(s);if("new"===this.mode&&this.stage.fresco.selection.isSelected(e))return void(this.stage.raster.style.cursor="move")}this.stage.raster.style.cursor="crosshair"}else this.pointerUp(e)},this.pointerUp=e=>{e.stopPropagation();const t=o.Ay.isHDPI?2:1;this.preUp(new r.A(e.offsetX*t,e.offsetY*t))},this.setHistory=()=>{var e,t,s;this.snapshot=n.oM(null===(s=null===(t=null===(e=this.stage)||void 0===e?void 0:e.fresco)||void 0===t?void 0:t.selection)||void 0===s?void 0:s.mask)},this.addHistory=(e=this.name)=>{this.stage.history.add({type:"selectionChange",kind:e,selection:this.snapshot}),this.snapshot=void 0},this.addMoveListeners=()=>{this.stage.raster.addEventListener("pointerup",this.pointerUp,!1)},this.removeMoveListeners=()=>{this.stage.raster.removeEventListener("pointerup",this.pointerUp,!1)},this.superClean=()=>{this.removeDownListeners(),this.stage.raster.removeEventListener("pointermove",this.pointerMove,!1),this.stage.raster.removeEventListener("contextmenu",this.contextMenu,!0)},this.addDownListeners(),this.stage.raster.addEventListener("pointermove",this.pointerMove,!1),this.stage.raster.addEventListener("contextmenu",this.contextMenu,!0),this.stage.raster.style.cursor="crosshair"}preDown(e,t,s){if(this.isDown=!0,this.isMoving=!1,this.downPoint=e,this.stage.fresco.hasSelection()){let t=this.stage.translateRasterToFresco(e);this.isMoving="new"===this.mode&&this.stage.fresco.selection.isSelected(t)}this.isMoving?(this.setHistory(),this.stage.coating.freeze(!0),this.addMoveListeners()):this.down(e,t,s)}preMove(e,t,s){if(this.isMoving){if(this.isShiftDown&&"none"===this.moveLock){const t=Math.abs(this.downPoint.x-e.x),s=Math.abs(this.downPoint.y-e.y);(t>4||s>4)&&(t<s?(e.x=this.downPoint.x,this.moveLock="vertical"):(e.y=this.downPoint.y,this.moveLock="horizontal"))}this.isShiftDown||(this.moveLock="none"),"vertical"!==this.moveLock&&(this.stage.fresco.selection.offset.x=Math.round((e.x-this.downPoint.x)/this.stage.zoom)),"horizontal"!==this.moveLock&&(this.stage.fresco.selection.offset.y=Math.round((e.y-this.downPoint.y)/this.stage.zoom)),window.requestAnimationFrame(()=>this.stage.coating.render())}else this.move(e,t,s)}preUp(e){this.isMoving?(this.isDown=!1,this.isMoving=!1,this.moveLock="none",this.stage.coating.freeze(!1),this.removeMoveListeners(),0===this.stage.fresco.selection.offset.x&&0===this.stage.fresco.selection.offset.y||(this.stage.fresco.selection.applyOffset(),this.addHistory("move"))):this.up(e)}}},8689:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(42268),a=s(15818),n=s(51787),r=s(29755);class o{constructor(e,t,s,o,h=!1,c=!1,l=!0){this.previewColor=e=>{this.setColor(e),this.preview&&this.preview(this.color)},this.callbackColor=e=>{this.setColor(e),(0,r.oY)(e),this.callback&&this.callback(this.color)},this.setColor=e=>{var t,s,i,n;e?(e instanceof a.A?this.color=e:this.color=a.A.fromHEX(e),(null!==(t=this.holder)&&void 0!==t?t:this.container).classList.remove("empty"),(null!==(s=this.holder)&&void 0!==s?s:this.container).style.backgroundColor=this.color.toHEX()):(this.color=void 0,(null!==(i=this.holder)&&void 0!==i?i:this.container).classList.add("empty"),(null!==(n=this.holder)&&void 0!==n?n:this.container).style.backgroundColor="unset")},this.getColor=()=>this.color,this.picker=()=>{new n.A(this.container,this.color,this.callbackColor,this.previewColor,this.canBeEmpty,this.showPick)},this.cleanUp=()=>{this.container.removeEventListener("click",this.picker,!1)},this.preview=o,this.callback=s,this.canBeEmpty=h,this.showPick=l,this.container=(0,i.Ay)(e),this.container.classList.add("color-pod"),this.container.addEventListener("click",this.picker,!1),c&&(this.container.classList.add("dodrop"),this.container.hasChildNodes()?this.holder=(0,i.Ay)(e+"-holder"):(this.holder=(0,i.T)("div",{id:e+"-holder"}),this.container.appendChild(this.holder))),this.setColor(t)}}},8850:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutRedirectAction=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutRedirectAction=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"data",baseName:"data",type:"{ [key: string]: string; }"},{name:"method",baseName:"method",type:"string"},{name:"paymentMethodType",baseName:"paymentMethodType",type:"string"},{name:"type",baseName:"type",type:"CheckoutRedirectAction.TypeEnum"},{name:"url",baseName:"url",type:"string"}],function(e){let t;!function(e){e.Redirect="redirect"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CheckoutRedirectAction||(t.CheckoutRedirectAction={}))},8879:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KlarnaDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.KlarnaDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"billingAddress",baseName:"billingAddress",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"string"},{name:"personalDetails",baseName:"personalDetails",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"subtype",baseName:"subtype",type:"string"},{name:"type",baseName:"type",type:"KlarnaDetails.TypeEnum"}],function(e){let t;!function(e){e.Klarna="klarna",e.Klarnapayments="klarnapayments",e.KlarnapaymentsAccount="klarnapayments_account",e.KlarnapaymentsB2b="klarnapayments_b2b",e.KlarnaPaynow="klarna_paynow",e.KlarnaAccount="klarna_account",e.KlarnaB2b="klarna_b2b"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.KlarnaDetails||(t.KlarnaDetails={}))},9720:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(42268),a=s(98244),n=s(29755),r=s(96160),o=s(50295),h=s(68150),c=s(3514);class l{constructor(){var e,t,s,l,d,p,u,m,g,y,v;this.toogleHeadMenu=e=>{const t=e.target;(0,i.Ay)("head-menu-drop").contains(t)||((0,i.Ay)("head-menu-drop").classList.contains("onclick")?(0,i.Ay)("head-menu-drop").classList.remove("onclick"):(0,i.Ay)("head-menu-drop").classList.add("onclick"))},this.hideHeadMenu=e=>{const t=e.target;(0,i.Ay)("head-menu").contains(t)&&!(0,i.Ay)("head-menu-close").contains(t)||(0,i.Ay)("head-menu-drop").classList.remove("onclick")},this.pollNews=async()=>{var e;const t=new Date(n.Ay.lastNewsCheck);this.news=await fetch(`https://pixlr.com/api/news/poll/?target=web&from=${t.toISOString()}&limit=5`).then(e=>e.json());const s=await this.news;!1!==s.status?(s.data.unread>0&&!s.data.pop&&(null===(e=(0,i.Ay)("head-news"))||void 0===e||e.append((0,i.T)("span",{id:"noti-red-dot"}))),"web"!==n.Ay.product&&!n.Ay.api&&s.data.pop&&new r.A(s.data.news.docs)):console.error(s.message)},this.newsClick=async()=>{var e;(0,a.A)("news-click");const t=await this.news;!1!==t.status&&t.data.news.docs.length?(null===(e=(0,i.Ay)("noti-red-dot"))||void 0===e||e.remove(),new r.A(t.data.news.docs)):document.dispatchEvent(new CustomEvent("notification",{detail:"No news :/"}))},document.documentElement.classList.add(n.Ay.workspace,n.Ay.accent),null===(e=(0,i.Ay)("head-login"))||void 0===e||e.addEventListener("click",()=>new o.A),null===(t=(0,i.Ay)("head-menu"))||void 0===t||t.addEventListener("click",this.toogleHeadMenu),null===(s=(0,i.Ay)("head-menu-close"))||void 0===s||s.addEventListener("click",this.hideHeadMenu),null===(l=(0,i.Ay)("head-menu-login"))||void 0===l||l.addEventListener("click",()=>new o.A),null===(d=(0,i.Ay)("head-news"))||void 0===d||d.addEventListener("click",this.newsClick,!0),null===(p=(0,i.Ay)("head-menu-news"))||void 0===p||p.addEventListener("click",this.newsClick,!0),null===(u=(0,i.Ay)("head-settings"))||void 0===u||u.addEventListener("click",()=>new h.A),null===(m=(0,i.Ay)("head-menu-settings"))||void 0===m||m.addEventListener("click",()=>new h.A),null===(g=(0,i.Ay)("head-premium"))||void 0===g||g.addEventListener("click",()=>new c.A("splash","premium")),null===(y=(0,i.Ay)("plug-premium"))||void 0===y||y.addEventListener("click",()=>new c.A("plug","premium")),null===(v=(0,i.Ay)("plug-login"))||void 0===v||v.addEventListener("click",()=>new o.A),this.pollNews()}}},9735:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(42903);class a extends i.A{constructor(e){super(e,"pop"),this.shaders.addShader("highlights",.5),this.shaders.addShader("shadows",-.5),this.shaders.addShader("vibrance",.5),this.shaders.addShader("saturation",.2),this.shaders.addShader("exposure",.2),this.shaders.addShader("clarity",.2),this.apply()}}},9810:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(54738),a=s(42268),n=s(41915),r=s(15818),o=s(21404),h=s(29755);class c{constructor(e){this.zoomor=!1,this.hypo=void 0,this.cursorPos=new n.A(-999,-999),this.lastPos=new n.A(-999,-999),this.ants=Array(!0,!0,!0,!0,!1,!1,!1,!1,!0,!0,!0,!1,!1,!1,!1,!0,!0,!0,!1,!1,!1,!1,!0,!0,!0,!1,!1,!1,!1,!0,!0,!0,!1,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1),this.hide=()=>{this.raster.style.display="none"},this.show=()=>{this.raster.style.display="block"},this.drawDropPreviewRect=(e,t)=>{this.ctx.save(),this.ctx.strokeStyle=i.YD,this.clear();const s=this.stage.rasterRect,a=this.stage.zoom,n=t.rect.width*a,r=t.rect.height*a;this.ctx.strokeRect(e.x-s.x-n/2,e.y-s.y-r/2,n,r),this.dirty=!0,this.ctx.restore()},this.setPan=(e=this.raster,t=!1)=>{this.override||(this.byMouse=t,this.override=!0,e.addEventListener("mousedown",this.panDown,!1),e.classList.add("grab"),this.stage.resetAnchor(),this.cursorImage&&(0,a.Ay)("cursor-image")&&this.cursorImage.remove())},this.removePan=(e=this.raster)=>{(0,a.Ay)("color-picker-quick")||(this.override=!1,e.classList.remove("grab"),e.removeEventListener("mousedown",this.panDown,!1),this.cursorImage&&((0,a.Ay)("workspace").appendChild(this.cursorImage),this.positionCursorImage()))},this.panDown=e=>{e.stopPropagation(),this.stage.resetAnchor(),this.downPoint=new n.A(e.clientX,e.clientY),this.downAnchor=this.stage.anchor.clone(),document.addEventListener("mousemove",this.panMove,!0),document.addEventListener("mouseup",this.panUp,!0)},this.panMove=e=>{let t=~~((e.clientX-this.downPoint.x)/this.stage.zoom),s=~~((e.clientY-this.downPoint.y)/this.stage.zoom);this.stage.setAnchor(new n.A(this.downAnchor.x-t,this.downAnchor.y-s)),this.stage.updateViewport()},this.panUp=e=>{document.removeEventListener("mousemove",this.panMove,!0),document.removeEventListener("mouseup",this.panUp,!0),this.byMouse&&this.removePan()},this.setPicker=(e=this.raster)=>{var t;if(this.override)return;this.override=!0,e.addEventListener("mousedown",this.pickerDown,!1),e.addEventListener("mousemove",this.pickerMove,!1),e.classList.add("crosshair");const s=this.lastPos.clone(),c=new o.A;let l=null!==(t=(0,a.Ay)("color-picker-quick"))&&void 0!==t?t:(0,a.T)("div",{id:"color-picker-quick"});for(let i=0;i<h.Ay.oldColor.length;i++){c.reset(),c.rotateDegree(14*-i);let e=c.transformPoint(new n.A(-100,0));e.x+=s.x+20,e.y+=s.y-46;let t=(0,a.T)("div",{className:"color-pod small floater"});t.style.backgroundColor=h.Ay.oldColor[i],t.style.left=e.x+"px",t.style.top=e.y+"px",t.addEventListener("mousemove",e=>{this.lastPos.x=e.clientX,this.lastPos.y=e.clientY,this.pickerPreview(this.lastPos.clone()),this.preview.style.backgroundColor=e.currentTarget.style.backgroundColor}),t.addEventListener("click",e=>{let t=r.A.fromRGB(e.currentTarget.style.backgroundColor);this.preview.style.backgroundColor=t.toHEX(),document.dispatchEvent(new CustomEvent("set-color",{detail:t}))}),l.append(t)}(0,a.Ay)("workspace").appendChild(l),this.pickerCanvas=i.oM(document.getElementsByClassName("canvas")[0]),this.pickerCanvasCTX=this.pickerCanvas.getContext("2d",{willReadFrequently:!0}),this.preview=document.createElement("div"),this.preview.id="color-picker-preview",this.preview.style.display="none",(0,a.Ay)("workspace").appendChild(this.preview),this.cursorImage&&(0,a.Ay)("cursor-image")&&this.cursorImage.remove(),this.pickerPreview(s)},this.updateHistoryPods=()=>{var e=(0,a.Ay)("color-picker-quick").children;for(let t=0;t<e.length;t++)e[t].style.backgroundColor=h.Ay.oldColor[t]},this.pickerMove=e=>{this.lastPos.x=e.clientX,this.lastPos.y=e.clientY,this.pickerPreview(this.lastPos.clone())},this.pickerPreview=e=>{if(this.preview.style.top=e.y-50+"px",this.preview.style.left=e.x+10+"px",this.preview.style.display="block",e.x-=this.stage.canvas.offsetLeft,e.y-=this.stage.canvas.offsetTop,e.x<0||e.y<0||e.x>this.stage.canvas.width||e.y>this.stage.canvas.height)return void(this.preview.style.display="none");let t=this.pickerCanvasCTX.getImageData(e.x,e.y,1,1).data;this.preview.style.backgroundColor=new r.A(t[0],t[1],t[2]).toHEX()},this.pickerDown=e=>{let t=new n.A(e.clientX-this.stage.canvas.offsetLeft,e.clientY-this.stage.canvas.offsetTop);if(t.x<0||t.y<0||t.x>this.stage.canvas.width||t.y>this.stage.canvas.height)return;let s=this.pickerCanvasCTX.getImageData(t.x,t.y,1,1).data;const i=new r.A(s[0],s[1],s[2]);this.updateColorHistory(i),this.updateHistoryPods(),document.dispatchEvent(new CustomEvent("set-color",{detail:i}))},this.updateColorHistory=e=>{let t=e.toHEX(),s=h.Ay.oldColor.findIndex(e=>e===t);s>-1?h.Ay.oldColor.splice(0,0,h.Ay.oldColor.splice(s,1)[0]):(h.Ay.oldColor.pop(),h.Ay.oldColor.unshift(t)),(0,h.ZC)("oldColor",h.Ay.oldColor)},this.removePicker=(e=this.raster)=>{var t;this.override&&(this.override=!1,e.classList.remove("crosshair"),e.removeEventListener("mousedown",this.pickerDown,!1),e.removeEventListener("mousemove",this.pickerMove,!1),this.preview.remove(),null===(t=(0,a.Ay)("color-picker-quick"))||void 0===t||t.remove(),this.cursorImage&&(this.stage.workspace.appendChild(this.cursorImage),this.positionCursorImage()),this.pickerCanvasCTX=void 0,this.pickerCanvas=void 0)},this.setCursorImage=e=>{this.cursorImage&&(0,a.Ay)("cursor-image")&&(this.cursorImage.remove(),this.cursorImage=void 0),this.raster.style.cursor=e?"none":"crosshair",e&&(this.cursorImage=e,this.cursorImage.id="cursor-image",h.Ay.isHDPI&&(this.cursorImage.style.width=~~(this.cursorImage.width/2)+"px",this.cursorImage.style.height=~~(this.cursorImage.height/2)+"px"),this.cursorImage.style.transform="translate(-50%, -50%)",this.stage.workspace.appendChild(this.cursorImage),this.positionCursorImage())},this.positionCursorImage=()=>{this.cursorImage&&(this.cursorImage.style.left=this.cursorPos.x+this.raster.offsetLeft+"px",this.cursorImage.style.top=this.cursorPos.y+this.raster.offsetTop+"px")},this.removeCursorImage=()=>{this.raster.style.cursor="unset",this.cursorImage&&(this.cursorImage.remove(),this.cursorImage=void 0,this.cursorPos.x=this.cursorPos.y=-999)},this.animateCursorTap=()=>{if(h.Ay.performanceMode)return;const e=(0,a.T)("div",{className:"click-effect"});e.style.top=this.cursorPos.y+this.stage.rasterRect.y+"px",e.style.left=this.cursorPos.x+this.stage.rasterRect.x+"px",e.addEventListener("animationend",()=>e.remove()),this.stage.workspace.appendChild(e)},this.throttle=0,this.mouseWheel=e=>{if("none"!==h.Ay.scrollMode&&(e.preventDefault(),e.stopPropagation(),this.throttle+20<Date.now())){if(this.throttle=Date.now(),this.stage.supressRender=!0,"zoom"===h.Ay.scrollMode&&!e.shiftKey||"move"===h.Ay.scrollMode&&e.shiftKey){const t=this.stage.getViewPort().center(),s=new n.A(e.clientX-this.stage.rasterRect.x,e.clientY-this.stage.rasterRect.y),i=this.stage.translateRasterToFresco(s);this.stage.setFluidZoom(e.deltaY<0);const a=this.stage.translateRasterToFresco(s);this.stage.setAnchor(new n.A(t.x+(i.x-a.x),t.y+(i.y-a.y)))}else{const t=this.stage.anchor.add(new n.A(e.deltaX,e.deltaY));this.stage.setAnchor(t)}this.stage.supressRender=!1,this.stage.updateViewport()}},this.mouseMove=e=>{this.lastPos.x=e.clientX,this.lastPos.y=e.clientY,this.cursorPos.x=e.clientX-this.stage.rasterRect.x,this.cursorPos.y=e.clientY-this.stage.rasterRect.y,this.cursorImage&&this.positionCursorImage(),document.dispatchEvent(new CustomEvent("mouse-cord",{detail:this.stage.translateRasterToFresco(this.cursorPos)}))},this.mouseLeave=e=>{this.cursorPos.x=this.cursorPos.y=-999,this.positionCursorImage(),document.dispatchEvent(new CustomEvent("mouse-cord",{detail:void 0}))},this.touchMove=e=>{if(e.targetTouches.length>1){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();let t=Math.hypot(e.targetTouches[0].pageX-e.targetTouches[1].pageX,e.targetTouches[0].pageY-e.targetTouches[1].pageY);if(void 0===this.hypo)return this.hypo=t,this.downPoint=new n.A((e.targetTouches[0].pageX+e.targetTouches[1].pageX)/2,(e.targetTouches[0].pageY+e.targetTouches[1].pageY)/2),this.stage.resetAnchor(),void(this.downAnchor=this.stage.anchor.clone());if(this.hypo-t<-20||this.hypo-t>20)this.stage.setFluidZoom(Boolean(t>this.hypo)),this.hypo=t;else{const t=new n.A((e.targetTouches[0].pageX+e.targetTouches[1].pageX)/2,(e.targetTouches[0].pageY+e.targetTouches[1].pageY)/2),s=h.Ay.isHDPI?.5*this.stage.zoom:this.stage.zoom,i=Math.round(t.x-this.downPoint.x)/s,a=Math.round(t.y-this.downPoint.y)/s;this.stage.setAnchor(new n.A(this.downAnchor.x-i,this.downAnchor.y-a)),this.stage.updateViewport()}}else this.lastPos.x=e.targetTouches[0].pageX,this.lastPos.y=e.targetTouches[0].pageY,this.cursorPos.x=e.targetTouches[0].pageX-this.stage.rasterRect.x,this.cursorPos.y=e.targetTouches[0].pageY-this.stage.rasterRect.y,this.cursorImage&&this.positionCursorImage(),document.dispatchEvent(new CustomEvent("mouse-cord",{detail:this.stage.translateRasterToFresco(this.cursorPos)}))},this.touchEnd=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.hypo=void 0,this.downPoint=void 0,this.downAnchor=void 0,this.cursorPos.x=this.cursorPos.y=-999,this.positionCursorImage(),document.dispatchEvent(new CustomEvent("mouse-cord",{detail:void 0}))},this.freeze=(e=!0)=>{this.frozen=e,e||this.render()},this.sleep=()=>{this.sleeping=!0,this.clear(!0)},this.wake=()=>{this.sleeping=!1,this.render()},this.so=7,this.render=(e,t=!0)=>{if(t&&this.clear(),this.sleeping)return;if(window.clearTimeout(this.timer),!this.stage||!this.stage.fresco||this.stage.supressRender)return;if(!this.stage.fresco.hasSelection())return void(e&&this.ctx.putImageData(e,0,0));let s,i,a,n,r,o=this.stage.zoom,h=this.stage.fresco.selection,c=this.stage.getViewPort(),l=this.stage.offset.x>0?this.stage.offset.x:0,d=this.stage.offset.y>0?this.stage.offset.y:0;if(e||(e=this.getImageData()),o>1){var p=Math.ceil(o)-1;for(let t=0,o=0,l=h.outline.length;t<l;t+=3)if(a=h.outline[t],n=h.outline[t+1],r=h.outline[t+2],a+h.offset.x>=c.x&&a+h.offset.x<c.x+c.width&&n+h.offset.y>=c.y&&n+h.offset.y<c.y+c.height)switch(s=Math.round((a+h.offset.x)*this.stage.zoom)+this.stage.offset.x,i=Math.round((n+h.offset.y)*this.stage.zoom)+this.stage.offset.y,r){case 0:for(this.drawAnt(s,i,e),o=1;o<=p;++o)this.drawAnt(s+o,i,e),this.drawAnt(s,i+o,e);break;case 1:for(o=0;o<=p;++o)this.drawAnt(s+o,i,e);break;case 2:for(s+=p,this.drawAnt(s,i,e),o=1;o<=p;++o)this.drawAnt(s-o,i,e),this.drawAnt(s,i+o,e);break;case 3:for(o=0;o<=p;++o)this.drawAnt(s,i+o,e);break;case 4:for(s+=p,o=0;o<=p;++o)this.drawAnt(s,i+o,e);break;case 5:for(i+=p,this.drawAnt(s,i,e),o=1;o<=p;++o)this.drawAnt(s,i-o,e),this.drawAnt(s+o,i,e);break;case 6:for(i+=p,o=0;o<=p;++o)this.drawAnt(s+o,i,e);break;case 7:for(s+=p,i+=p,this.drawAnt(s,i,e),o=1;o<=p;++o)this.drawAnt(s,i-o,e),this.drawAnt(s-o,i,e);break;case 8:for(this.drawAnt(s,i,e),this.drawAnt(s+p,i+p,e),o=1;o<=p;++o)this.drawAnt(s+o,i,e),this.drawAnt(s,i+o,e),this.drawAnt(s+p,i-o+p,e),this.drawAnt(s-o+p,i+p,e);break;case 9:for(this.drawAnt(s,i,e),o=1;o<=p;++o)this.drawAnt(s+o,i,e),this.drawAnt(s,i+o,e),this.drawAnt(s+o,i+p,e);break;case 10:for(s+=p,i+=p,this.drawAnt(s,i,e),o=1;o<=p;++o)this.drawAnt(s+o-p,i-p,e),this.drawAnt(s,i-o,e),this.drawAnt(s-o,i,e);break;case 11:for(o=0;o<=p;++o)this.drawAnt(s+o,i,e),this.drawAnt(s,i+o,e),this.drawAnt(s+p,i+o,e);break;case 12:for(o=0;o<=p;++o)this.drawAnt(s+o,i+p,e),this.drawAnt(s,i+o,e),this.drawAnt(s+p,i+o,e);break;case 13:for(o=0;o<=p;++o)this.drawAnt(s,i+o,e),this.drawAnt(s+p,i+o,e);break;case 14:for(o=0;o<=p;++o)this.drawAnt(s+o,i,e),this.drawAnt(s+o,i+p,e)}}else for(let u=0,m=h.outline.length;u<m;u+=3)a=h.outline[u],n=h.outline[u+1],r=h.outline[u+2],s=Math.round((a+h.offset.x-c.x)*o)+l,i=Math.round((n+h.offset.y-c.y)*o)+d,this.drawAnt(s,i,e);this.ctx.putImageData(e,0,0),this.dirty=!0,this.frozen||(this.timer=window.setTimeout(()=>{--this.so<0&&(this.so=7),this.frozen||this.render()},400))},this.drawAnt=(e,t,s)=>{if(t=~~t,(e=~~e)>=0&&t>=0&&e<this.raster.width&&t<this.raster.height){let i=4*(t*this.raster.width+e);this.ants[(e+this.so)%8*8+t%8]?(s.data[i]=0,s.data[i+1]=0,s.data[i+2]=0,s.data[i+3]=255):(s.data[i]=255,s.data[i+1]=255,s.data[i+2]=255,s.data[i+3]=255)}},this.clear=(e=!1)=>{(e||this.dirty)&&(this.ctx&&this.ctx.clearRect(0,0,this.raster.width,this.raster.height),this.dirty=!1)},this.stage=e,this.raster=e.raster,this.ctx=this.raster.getContext("2d",{willReadFrequently:!0}),this.ctx.imageSmoothingEnabled=!1,this.raster.addEventListener("mousemove",this.mouseMove,!0),this.raster.addEventListener("mouseout",this.mouseLeave,!0),this.raster.addEventListener("touchmove",this.touchMove,{passive:!1}),this.raster.addEventListener("touchend",this.touchEnd,{passive:!1}),this.raster.addEventListener("wheel",this.mouseWheel,{passive:!1}),this.raster.addEventListener("contextmenu",e=>{e.preventDefault()},!1),"editor"===h.Ay.product&&document.addEventListener("viewport-render",()=>this.render(),!1)}getImageData(){return this.ctx.getImageData(0,0,this.raster.width,this.raster.height)}drawAntPolygon(e){this.clear(),e.length>0&&(this.ctx.save(),this.ctx.lineWidth=1,this.ctx.translate(.5,.5),this.ctx.strokeStyle="#ffffff",this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y),e.forEach(e=>{this.ctx.lineTo(e.x,e.y)}),this.ctx.stroke(),this.ctx.strokeStyle="#000000",this.ctx.setLineDash([5,5]),this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y),e.forEach(e=>{this.ctx.lineTo(e.x,e.y)}),this.ctx.stroke(),this.ctx.restore(),this.dirty=!0),this.render(void 0,!1)}drawAntBezier(e){if(this.clear(),e.length>0){this.ctx.save(),this.ctx.lineWidth=1,this.ctx.translate(.5,.5),this.ctx.strokeStyle="#ffffff",this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t+=2)t+1===e.length?this.ctx.lineTo(e[t].x,e[t].y):this.ctx.quadraticCurveTo(e[t+1].x,e[t+1].y,e[t].x,e[t].y);this.ctx.stroke(),this.ctx.strokeStyle="#000000",this.ctx.setLineDash([5,5]),this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t+=2)t+1===e.length?this.ctx.lineTo(e[t].x,e[t].y):this.ctx.quadraticCurveTo(e[t+1].x,e[t+1].y,e[t].x,e[t].y);this.ctx.stroke(),this.ctx.restore(),this.dirty=!0}this.render(void 0,!1)}drawAntRectangle(e){this.clear();let t=this.getImageData();for(var s=0;s<e.height;++s)this.drawAnt(e.x,e.y+s,t),this.drawAnt(e.right()-1,e.y+s,t);for(var i=0;i<e.width;++i)this.drawAnt(e.x+i,e.y,t),this.drawAnt(e.x+i,e.bottom()-1,t);this.dirty=!0,this.render(t,!1)}drawAntEllipse(e){this.clear();let t=this.getImageData();var s,i,a,n,r,o,h,c,l,d,p,u,m,g,y,v,f=e.width%2==0?1:0,b=e.height%2==0?1:0;s=.5*e.width,h=0,c=i=.5*e.height,p=(l=s*s)*(1-(i<<1))+(g=(d=i*i)<<1),u=d-(m=l<<1)*((i<<1)-1),a=3*g,n=v=d<<2,r=(y=l<<2)*(i-1),o=m*((i<<1)-3),this.drawAnt(e.x+h+s-f,e.y+c+i-b,t),this.drawAnt(e.x-h+s,e.y+c+i-b,t),this.drawAnt(e.x-h+s,e.y-c+i,t),this.drawAnt(e.x+h+s-f,e.y-c+i,t);do{p<0?(p+=a,u+=n,a+=v,n+=v,h++):u<0?(p+=a-r,a+=v,r-=y,u+=n-o,n+=v,o-=y,h++,c--):(p-=r,r-=y,u-=o,o-=y,c--),this.drawAnt(e.x+h+s-f,e.y+c+i-b,t),this.drawAnt(e.x-h+s,e.y+c+i-b,t),this.drawAnt(e.x-h+s,e.y-c+i,t),this.drawAnt(e.x+h+s-f,e.y-c+i,t)}while(c>0);this.dirty=!0,this.render(t,!1)}cleanUp(){window.clearTimeout(this.timer)}}},10081:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstallmentsNumber=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.InstallmentsNumber=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"maxNumberOfInstallments",baseName:"maxNumberOfInstallments",type:"number"}]},10122:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(22866),a=s(54738),n=s(40963),r=s(41915),o=s(39989),h=s(52038);class c extends i.A{constructor(e=a.Os(),t,s,l,d,p="",u=c.SCALE_METHOD_NONE){super(i.A.TYPE_ELEMENT),this.id=e,this.rotateAndFit=(e,t)=>{this.settings.locked&&this.variant===c.VARIANT_OVERLAY?(this.rotate(e),this.calculate(new r.A(0,0),new r.A(t.width,t.height),0)):this.rect.rotation+=e?-90:90},this.calculate=(e,t,s)=>{this.rect.x=Math.round(e.x),this.rect.y=Math.round(e.y),this.rect.width=Math.round(t.x-e.x),this.rect.width<10&&(this.rect.width=10),0!==s?this.rect.height=Math.round(this.rect.width/s):(this.rect.height=Math.round(t.y-e.y),this.rect.height<10&&(this.rect.height=10))},this.rasterize=()=>{const e=new o.A(a.Os(),this.settings.name,a.oM(this.canvas),this.rect.clone(),this.settings.locked);return e.settings=Object.assign({},this.settings),e.applyTransform(),e},this.clone=(e=!1)=>{let t=new c(e?this.id:a.Os(),this.settings.name,a.oM(this.canvas),this.url,this.variant,this.settings.blendmode,this.scalemethod);return t.settings=Object.assign({},this.settings),t.rect=this.rect.clone(),t.animation=h.A.clone(this.animation),e&&(t.id=this.id,t.settings.name=this.settings.name),t},this.url=l,this.canvas=s,this.variant=d,this.scalemethod=u,this.settings.name=t,this.settings.blendmode=p,this.rect=new n.A(0,0,s.width,s.height)}}c.VARIANT_OVERLAY="overlay",c.VARIANT_STICKER="sticker",c.SCALE_METHOD_STRETCH="stretch",c.SCALE_METHOD_FILL="fill",c.SCALE_METHOD_NONE="none";const l=c},10809:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(42268),a=s(21742),n=s(54738),r=s(53900),o=s(40963),h=s(75770),c=s(82042),l=s(41915);class d extends h.A{constructor(e){super("crop",e),this.aspectX=0,this.aspectY=0,this.inputBlur=e=>{(0,i.Ay)("crop-width").value=Math.round(this.crop.width).toString(),(0,i.Ay)("crop-height").value=Math.round(this.crop.height).toString()},this.updateCrop=e=>{var t;this.applying||(this.crop=new o.A(0,0,this.stage.fresco.width,this.stage.fresco.height),this.stage.fresco.lockedBackground()&&this.crop.equalTo(this.stage.fresco.layers[0].rect)?(this.stage.fresco.layers[0].rect.rotation=0,(0,i.Ay)("crop-straighten").style.display="block"):(0,i.Ay)("crop-straighten").style.display="none",(0,i.Ay)("crop-constraint-free").checked=!0,null===(t=this.straighten)||void 0===t||t.reset(),this.setConstraintMode(0,0),this.updateSizeInput(),this.render())},this.viewportChange=()=>{this.render()},this.reset=e=>{var t;null===(t=this.straighten)||void 0===t||t.reset(),this.stage.straighten(0),this.setConstraintMode(0,0),this.setAspect(0,0),this.refit(),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("reset")}))},this.setConstraintMode=(e,t)=>{if(0==e&&0==t)return(0,i.Ay)("crop-constraint-free").checked=!0,void((0,i.Ay)("crop-constraint-settings").style.display="none");if((0,i.Ay)("crop-constraint-ratio").checked=!0,0!==e){let e=(t,s)=>0==s?t:e(s,t%s),t=e(this.crop.width,this.crop.height);(0,i.Ay)("crop-constraint-width").value=(this.crop.width/t).toString(),(0,i.Ay)("crop-constraint-height").value=(this.crop.height/t).toString()}(0,i.Ay)("crop-constraint-preset").value="0:0"},this.constraintModeChange=e=>{let t=document.querySelector('input[name="crop-constraint-mode"]:checked').value;if("free"===t)return(0,i.Ay)("crop-constraint-settings").style.display="none",void this.setAspect(0,0);(0,i.Ay)("crop-constraint-settings").style.display="inline-flex";let s=Number((0,i.Ay)("crop-constraint-width").value),a=Number((0,i.Ay)("crop-constraint-height").value);"ratio"===t?((0,i.Ay)("crop-constraint-width").value="1",(0,i.Ay)("crop-constraint-height").value="1"):((0,i.Ay)("crop-constraint-width").value=(0,i.Ay)("crop-width").value,(0,i.Ay)("crop-constraint-height").value=(0,i.Ay)("crop-height").value),s=Number((0,i.Ay)("crop-constraint-width").value),a=Number((0,i.Ay)("crop-constraint-height").value),this.setAspect(s,a),(0,i.Ay)("crop-constraint-preset").value="0:0"},this.constraintPresetChange=e=>{let t=(0,i.Ay)("crop-constraint-preset").value.split(":");if("0"===t[0])return;if("x"===t[0]&&"y"===t[1]){let e=(t,s)=>0==s?t:e(s,t%s),s=e(this.stage.fresco.width,this.stage.fresco.height);t[0]=(this.stage.fresco.width/s).toString(),t[1]=(this.stage.fresco.height/s).toString()}let s=Number(t[0]),a=Number(t[1]);this.setAspect(s,a);let n="x"!==t[0]&&s>50;(0,i.Ay)("crop-constraint-size").checked=n,(0,i.Ay)("crop-constraint-ratio").checked=!n,(0,i.Ay)("crop-constraint-width").value=t[0],(0,i.Ay)("crop-constraint-height").value=t[1]},this.constraintWidthHeightInputChange=e=>{let t=(0,i.Ay)("crop-constraint-width").value,s=(0,i.Ay)("crop-constraint-height").value,a=Number.isNaN(Number(t))?1:Number(t),n=Number.isNaN(Number(s))?1:Number(s);this.setAspect(a,n)},this.setAspect=(e,t)=>{this.aspectX=e,this.aspectY=t,this.calculate(new l.A(0,0),new l.A(this.stage.fresco.width,this.stage.fresco.height)),this.crop.width<30&&(this.crop.width=30),this.crop.height<30&&(this.crop.height=30),this.crop.x+=Math.round((this.stage.fresco.width-this.crop.width)/2),this.crop.y+=Math.round((this.stage.fresco.height-this.crop.height)/2),this.updateSizeInput(),window.requestAnimationFrame(this.render)},this.widthHeightInputChange=e=>{let t=(0,i.Ay)("crop-width").value,s=(0,i.Ay)("crop-height").value,a=Number.isNaN(Number(t))?this.stage.fresco.width:Number(t),n=Number.isNaN(Number(s))?this.stage.fresco.height:Number(s),r=Math.round(30/this.stage.zoom);if(a<r?a=r:a>this.stage.fresco.width&&(a=this.stage.fresco.width),n<r?n=r:n>this.stage.fresco.height&&(n=this.stage.fresco.height),this.crop.width=a,this.crop.height=n,0!=this.aspectX){let t=e.currentTarget.getAttribute("id");"crop-width"==t?this.crop.height=this.stage.fresco.height:this.crop.width=this.stage.fresco.width,this.calculate(new l.A(this.crop.x,this.crop.y),new l.A(this.crop.right(),this.crop.bottom())),this.updateSizeInput("crop-width"==t,"crop-height"==t)}this.crop.right()>this.stage.fresco.width&&(this.crop.x=this.stage.fresco.width-this.crop.width),this.crop.bottom()>this.stage.fresco.height&&(this.crop.y=this.stage.fresco.height-this.crop.height),window.requestAnimationFrame(this.render)},this.updateSizeInput=(e,t)=>{e||((0,i.Ay)("crop-width").value=this.crop.width.toString()),t||((0,i.Ay)("crop-height").value=this.crop.height.toString())},this.down=e=>{this.p=this.stage.translateRasterToFresco(e),this.setCursor(this.p),this.updateSizeInput(),this.downTopLeft=this.crop.topLeft(),this.downBottomRight=this.crop.bottomRight(),this.raster.addEventListener("pointerup",this.pointerUp,!1),window.requestAnimationFrame(this.render)},this.move=e=>{e=this.stage.translateRasterToFresco(e),this.isDown?this.reform(this.p.x-e.x,this.p.y-e.y):this.setCursor(e)},this.up=e=>{this.raster.removeEventListener("pointerup",this.pointerUp,!1),window.requestAnimationFrame(this.render)},this.setCursor=e=>{let t=this.crop.width/6,s=this.crop.height/6;e.x<=this.crop.x+t?e.y<this.crop.y+s?this.method="nw-resize":e.y<this.crop.y+this.crop.height-s?this.method="w-resize":this.method="sw-resize":e.x>this.crop.x+t&&e.x<this.crop.x+this.crop.width-t?e.y<this.crop.y+s?this.method="n-resize":e.y<this.crop.y+this.crop.height-s?this.method="move":this.method="s-resize":e.y<this.crop.y+s?this.method="ne-resize":e.y<this.crop.y+this.crop.height-s?this.method="e-resize":this.method="se-resize",this.raster.style.cursor=this.method},this.refit=()=>{let e=Math.round(16/this.stage.zoom),t=new l.A(this.crop.x,this.crop.y),s=new l.A(this.crop.right(),this.crop.bottom());t.x<0&&(t.x=0),t.y<0&&(t.y=0),s.x>this.stage.fresco.width&&(s.x=this.stage.fresco.width),s.y>this.stage.fresco.height&&(s.y=this.stage.fresco.height),s.x<t.x+e&&(s.x=t.x+e),s.y<t.y+e&&(s.y=t.y+e),t.x>s.x-e&&(t.x=s.x-e),t.y>s.y-e&&(t.y=s.y-e),this.calculate(t,s),this.updateSizeInput(),this.render()},this.reform=(e,t)=>{if("move"==this.method)this.crop.x=this.downTopLeft.x-e,this.crop.y=this.downTopLeft.y-t,this.crop.x<0?this.crop.x=0:this.crop.right()>this.stage.fresco.width&&(this.crop.x=this.stage.fresco.width-this.crop.width),this.crop.y<0?this.crop.y=0:this.crop.bottom()>this.stage.fresco.height&&(this.crop.y=this.stage.fresco.height-this.crop.height);else{let s=this.downTopLeft.clone(),i=this.downBottomRight.clone();switch(this.method){case"w-resize":0!==this.aspectX&&(i.y=this.stage.fresco.height),s.x=this.downTopLeft.x-e;break;case"e-resize":0!==this.aspectX&&(i.y=this.stage.fresco.height),i.x=this.downBottomRight.x-e;break;case"n-resize":0!==this.aspectX&&(i.x=this.stage.fresco.width),s.y=this.downTopLeft.y-t;break;case"s-resize":0!==this.aspectX&&(i.x=this.stage.fresco.width),i.y=this.downBottomRight.y-t;break;case"nw-resize":s.x=this.downTopLeft.x-e,s.y=this.downTopLeft.y-t;break;case"ne-resize":s.y=this.downTopLeft.y-t,i.x=this.downBottomRight.x-e;break;case"sw-resize":s.x=this.downTopLeft.x-e,i.y=this.downBottomRight.y-t;break;case"se-resize":i.x=this.downBottomRight.x-e,i.y=this.downBottomRight.y-t}let a=Math.round(30/this.stage.zoom);s.x!=this.downTopLeft.x&&(s.x<0?s.x=0:s.x>i.x-a&&(s.x=i.x-a)),s.y!=this.downTopLeft.y&&(s.y<0?s.y=0:s.y>i.y-a&&(s.y=i.y-a)),i.x!=this.downBottomRight.x&&(i.x>this.stage.fresco.width?i.x=this.stage.fresco.width:i.x<s.x+a&&(i.x=s.x+a)),i.y!=this.downBottomRight.y&&(i.y>this.stage.fresco.height?i.y=this.stage.fresco.height:i.y<s.y+a&&(i.y=s.y+a)),this.calculate(s,i,this.downTopLeft),this.updateSizeInput()}window.requestAnimationFrame(this.render)},this.render=()=>{let e=this.crop.scale(this.stage.zoom);e.x+=this.stage.offset.x,e.y+=this.stage.offset.y;let t=e.width<200||e.height<200?15:30;if(this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.straightenIsDown){this.ctx.lineWidth=1,this.ctx.fillStyle=n.q5,this.ctx.translate(.5,.5),this.ctx.beginPath();let e=new l.A(Math.round(this.raster.width/2),Math.round(this.raster.height/2));this.ctx.moveTo(this.stage.viewClip.x,e.y),this.ctx.lineTo(this.stage.viewClip.right()-1,e.y),this.ctx.moveTo(e.x,this.stage.viewClip.y),this.ctx.lineTo(e.x,this.stage.viewClip.bottom()-1),this.ctx.strokeStyle="rgba(255,255,255,.5)";let t=0,s=e.x;for(;s>this.stage.viewClip.x;)t%5==0?(this.ctx.moveTo(s,this.stage.viewClip.y),this.ctx.lineTo(s,this.stage.viewClip.bottom()-1),this.ctx.moveTo(e.x+e.x-s,this.stage.viewClip.y),this.ctx.lineTo(e.x+e.x-s,this.stage.viewClip.bottom()-1)):(this.ctx.moveTo(s,e.y-3),this.ctx.lineTo(s,e.y+3),this.ctx.moveTo(e.x+e.x-s,e.y-3),this.ctx.lineTo(e.x+e.x-s,e.y+3)),s-=30,t++;t=0;let i=e.y;for(;i>this.stage.viewClip.y;)t%5==0?(this.ctx.moveTo(this.stage.viewClip.x,i),this.ctx.lineTo(this.stage.viewClip.right()-1,i),this.ctx.moveTo(this.stage.viewClip.x,e.y+e.y-i),this.ctx.lineTo(this.stage.viewClip.right()-1,e.y+e.y-i)):(this.ctx.moveTo(e.x-3,i),this.ctx.lineTo(e.x+3,i),this.ctx.moveTo(e.x-3,e.y+e.y-i),this.ctx.lineTo(e.x+3,e.y+e.y-i)),i-=30,t++;this.ctx.stroke(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.beginPath(),this.ctx.arc(e.x,e.y,50,0,2*Math.PI),this.ctx.arc(e.x,e.y,300,0,2*Math.PI),this.ctx.stroke()}else{if(this.ctx.fillStyle="rgba(0,0,0,0.5)",this.ctx.fillRect(this.stage.viewClip.x<0?0:this.stage.viewClip.x,this.stage.viewClip.y<0?0:this.stage.viewClip.y,this.stage.viewClip.width,this.stage.viewClip.height),this.ctx.clearRect(e.x,e.y,e.width,e.height),this.ctx.lineWidth=1,this.ctx.fillStyle=n.q5,this.ctx.translate(.5,.5),this.ctx.strokeStyle="rgb(0,0,0)",this.ctx.strokeRect(e.x,e.y,e.width-1,e.height-1),this.ctx.strokeStyle=n.q5,this.ctx.strokeRect(e.x-1,e.y-1,e.width+1,e.height+1),this.isDown){let t=Math.round(e.width/3),s=Math.round(e.height/3);this.ctx.strokeStyle="rgba(255,255,255,.5)",this.ctx.beginPath(),this.ctx.moveTo(e.x+t,e.y),this.ctx.lineTo(e.x+t,e.bottom()),this.ctx.moveTo(e.x+2*t,e.y),this.ctx.lineTo(e.x+2*t,e.bottom()),this.ctx.moveTo(e.x,e.y+s),this.ctx.lineTo(e.right(),e.y+s),this.ctx.moveTo(e.x,e.y+2*s),this.ctx.lineTo(e.right(),e.y+2*s),this.ctx.stroke()}this.ctx.setTransform(1,0,0,1,0,0),this.ctx.fillRect(e.x-3,e.y-3,t,3),this.ctx.fillRect(e.x-3,e.y,3,t-3),this.ctx.fillRect(e.x-3,e.y+e.height,t,3),this.ctx.fillRect(e.x-3,e.y+e.height-t+3,3,t-3),this.ctx.fillRect(e.x+e.width-t+3,e.y-3,t,3),this.ctx.fillRect(e.x+e.width,e.y,3,t-3),this.ctx.fillRect(e.x+e.width-t+3,e.y+e.height,t,3),this.ctx.fillRect(e.x+e.width,e.y+e.height-t+3,3,t-3),this.ctx.fillRect(Math.floor(e.x+e.width/2-t),e.y-3,2*t,3),this.ctx.fillRect(Math.floor(e.x+e.width/2-t),e.y+e.height,2*t,3),this.ctx.fillRect(e.x-3,e.y+e.height/2-t,3,2*t),this.ctx.fillRect(e.x+e.width,e.y+e.height/2-t,3,2*t)}},this.dblClick=()=>{this.setAspect(this.aspectY,this.aspectX)},this.apply=()=>{document.dispatchEvent(new CustomEvent("select-tool"))},this.cleanUp=()=>{var e;this.removeDownListeners(),this.applying=!0;const t=this.stage.fresco.lockedBackground()&&0!==this.stage.fresco.layers[0].rect.rotation;if(!this.crop.equalTo(new o.A(0,0,this.stage.fresco.width,this.stage.fresco.height))||t){let e,s=new r.A(this.stage.fresco.width,this.stage.fresco.height),i=new l.A(-this.crop.x,-this.crop.y);if(t){const t=this.stage.fresco.layers[0];e=n.oM(t.canvas),s=new r.A(t.canvas.width,t.canvas.height),i.x+=-t.rect.x,i.y+=-t.rect.y,t.applyStraighten(new o.A(0,0,this.stage.fresco.width,this.stage.fresco.height))}this.stage.fresco.crop(this.crop),this.stage.history.add({type:"crop",offset:i,size:s,straighten:e})}if("size"===document.querySelector('input[name="crop-constraint-mode"]:checked').value){const e=Number((0,i.Ay)("crop-constraint-width").value),t=Number((0,i.Ay)("crop-constraint-height").value),s=new r.A(this.stage.fresco.width,this.stage.fresco.height);if(s.width!==e||s.height!==t){const i=this.stage.fresco.layers.map(e=>(e.syncRequested=new Date,e.clone(!0)));this.stage.fresco.resize(e,t,!0),this.stage.history.add({type:"pageResize",size:s,layers:i})}}document.removeEventListener("history-update",this.updateCrop,!1),document.removeEventListener("viewport-render",this.viewportChange,!1),this.raster.removeEventListener("pointermove",this.pointerMove,!1),this.raster.removeEventListener("dblclick",this.dblClick,!1);const s=(0,i.Ay)("crop-width");s.removeEventListener("input",this.widthHeightInputChange,!1),s.removeEventListener("blur",this.inputBlur,!1);const a=(0,i.Ay)("crop-height");a.removeEventListener("input",this.widthHeightInputChange,!1),a.removeEventListener("blur",this.inputBlur,!1);const h=(0,i.Ay)("crop-constraint-width");h.removeEventListener("input",this.constraintWidthHeightInputChange,!1),h.removeEventListener("blur",this.inputBlur,!1);const c=(0,i.Ay)("crop-constraint-height");c.removeEventListener("input",this.constraintWidthHeightInputChange,!1),c.removeEventListener("blur",this.inputBlur,!1),null===(e=this.straighten)||void 0===e||e.cleanUp(),(0,i.Ay)("crop-constraint-preset").removeEventListener("change",this.constraintPresetChange,!1),(0,i.Ay)("crop-constraint-free").removeEventListener("click",this.constraintModeChange,!1),(0,i.Ay)("crop-constraint-size").removeEventListener("click",this.constraintModeChange,!1),(0,i.Ay)("crop-constraint-ratio").removeEventListener("click",this.constraintModeChange,!1),(0,i.Ay)("crop-reset").removeEventListener("click",this.reset,!1),(0,i.Ay)("crop-apply").removeEventListener("click",this.apply,!1),this.ctx.clearRect(0,0,this.raster.width,this.raster.height),this.ctx=null,this.stage.updateViewport(),this.stage.coating.wake()},this.raster=e.raster,this.stage.selectionDeselect(),this.stage.coating.sleep(),this.ctx=this.raster.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,document.addEventListener("history-update",this.updateCrop,!1),document.addEventListener("viewport-render",this.viewportChange,!1),this.raster.addEventListener("pointermove",this.pointerMove,!1),this.raster.addEventListener("dblclick",this.dblClick,!1);const t=(0,i.Ay)("crop-width");t.addEventListener("input",this.widthHeightInputChange,!1),t.addEventListener("blur",this.inputBlur,!1);const s=(0,i.Ay)("crop-height");s.addEventListener("input",this.widthHeightInputChange,!1),s.addEventListener("blur",this.inputBlur,!1);const h=(0,i.Ay)("crop-constraint-width");h.addEventListener("input",this.constraintWidthHeightInputChange,!1),h.addEventListener("blur",this.inputBlur,!1);const d=(0,i.Ay)("crop-constraint-height");d.addEventListener("input",this.constraintWidthHeightInputChange,!1),d.addEventListener("blur",this.inputBlur,!1),this.straighten=new c.A("crop-straighten",{range:[-25,25],step:.25,label:(0,a.A)("straighten")+":",compact:!0,force:!0,labelFormat:e=>e.toFixed(1)+"",labelParse:e=>parseFloat(e),onChange:e=>{this.stage.straighten(e),this.calculate(new l.A(0,0),new l.A(this.stage.fresco.width,this.stage.fresco.height)),this.refit()},onStart:()=>{this.straightenIsDown=!0,this.render()},onEnd:(e,t)=>{this.straightenIsDown=!1,this.refit(),this.render()}}),(0,i.Ay)("crop-constraint-preset").addEventListener("change",this.constraintPresetChange,!1),(0,i.Ay)("crop-constraint-free").addEventListener("click",this.constraintModeChange,!1),(0,i.Ay)("crop-constraint-size").addEventListener("click",this.constraintModeChange,!1),(0,i.Ay)("crop-constraint-ratio").addEventListener("click",this.constraintModeChange,!1),(0,i.Ay)("crop-reset").addEventListener("click",this.reset,!1),(0,i.Ay)("crop-apply").addEventListener("click",this.apply,!1),this.addDownListeners(),this.updateCrop()}calculate(e,t,s){if(this.crop.x=Math.round(e.x<t.x?e.x:t.x),this.crop.y=Math.round(e.y<t.y?e.y:t.y),this.crop.width=Math.round(e.x<t.x?t.x-this.crop.x:e.x-this.crop.x),this.crop.height=Math.round(e.y<t.y?t.y-this.crop.y:e.y-this.crop.y),0!=this.aspectX&&0!=this.aspectY){let t=this.crop.height,i=this.crop.width;this.aspectY/this.aspectX*(this.crop.width/this.crop.height)<this.aspectX/this.aspectY*(this.crop.height/this.crop.width)?this.crop.height=Math.round(this.crop.width*(this.aspectY/this.aspectX)):this.crop.width=Math.round(this.crop.height*(this.aspectX/this.aspectY)),s&&(s.x!=e.x&&(this.crop.x+=Math.round(i-this.crop.width)),s.y!=e.y&&(this.crop.y+=Math.round(t-this.crop.height)))}}}},10955:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataRetry=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataRetry=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"retry_chainAttemptNumber",baseName:"retry.chainAttemptNumber",type:"string"},{name:"retry_orderAttemptNumber",baseName:"retry.orderAttemptNumber",type:"string"},{name:"retry_skipRetry",baseName:"retry.skipRetry",type:"string"}]},11319:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseAdditionalDataBillingAddress=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponseAdditionalDataBillingAddress=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"billingAddress_city",baseName:"billingAddress.city",type:"string"},{name:"billingAddress_country",baseName:"billingAddress.country",type:"string"},{name:"billingAddress_houseNumberOrName",baseName:"billingAddress.houseNumberOrName",type:"string"},{name:"billingAddress_postalCode",baseName:"billingAddress.postalCode",type:"string"},{name:"billingAddress_stateOrProvince",baseName:"billingAddress.stateOrProvince",type:"string"},{name:"billingAddress_street",baseName:"billingAddress.street",type:"string"}]},11839:(e,t,s)=>{s.d(t,{FS:()=>l,Ay:()=>p});var i=s(21742),a=s(98244),n=s(78508),r=s(42268),o=s(79453);const h=window.location.href.includes("localhost")?"10000000-ffff-ffff-ffff-000000000001":"550ad708-3266-4d24-8566-69208120dbe6";class c{constructor(){this.chooser=()=>`\n            <div class="chooser">\n                <div class="social-button" data-social="google">\n                    <img src="/images/icon/google.svg" alt="google">\n                    ${(0,i.A)("common-continueWith")} Google\n                </div>\n                <div class="social-button" data-social="facebook">\n                    <img src="/images/icon/facebook.svg" alt="facebook">\n                    ${(0,i.A)("common-continueWith")} Facebook\n                </div>\n                <div class="social-button" data-social="apple">\n                    <img src="/images/icon/apple_gray.svg" alt="apple">\n                    ${(0,i.A)("common-continueWith")} Apple\n                </div>\n                <a class="top-20" style="display:inline-block;text-align:center;font-size:15px;" id="choose-email">\n                    <strong>${(0,i.A)("common-orUseEmail")}</strong>\n                </a>\n            </div>\n            <p class="top-30 center" style="padding:0 25px">\n                ${(0,i.A)("common-agreeTo")} <a href="/terms-of-use/" target='_new'>${(0,i.A)("common-termsOfUse")}</a> ${(0,i.A)("common-and")} <a href="/privacy-policy/" target='_new'> ${(0,i.A)("common-privacyPolicy")}</a>.\n            </p>\n        `,this.login=()=>`\n\n            <div class="center top-10">\n                ${(0,i.A)("common-notMember")} &nbsp; <strong><a id="load-signup">${(0,i.A)("common-signUp")}!</a></strong>\n            </div>\n\n            <form id="entry-form" data-entry="login" class="top-30">\n                <div class="input-group">\n                    <label for="entry-email">${(0,i.A)("common-email")}</label>\n                    <input type="email" maxlength="70" name="email" id="entry-email" placeholder="Email address">\n                    <p class="error-msg">${(0,i.A)("common-enterValidEmail")}</p>\n                </div>\n                <div class="input-group">\n                    <label for="entry-password">${(0,i.A)("common-password")}</label>\n                    <input type="password" name="password" id="entry-password" placeholder="Enter password" data-login="true">\n                    <p class="error-msg"></p>\n                    <img id="toggle-password" class="input-icon" src="/img/icon/eye-hide.svg">\n                </div>\n\n                <input type="checkbox" id="entry-rememberMe" name="rememberMe" checked/>\n                <label class="top-20 switch" for="entry-rememberMe"><span></span> ${(0,i.A)("common-rememberMe")}</label>\n\n                <div id="h-captcha" style="margin: 0px" data-sitekey="${h}"></div>\n\n                <button type="submit" class="button med w-100 top-40" id="entry-submit">${(0,i.A)("common-login")}</button>\n\n                <div class="center top-30"><strong><a id="load-forgotPassword">${(0,i.A)("common-forgotPass")}</a></strong></center>\n\n            </form>\n        `,this.register=async()=>{let e="",t=!1;const s=await(0,n._t)();for(let i in l)t||"US"!==i&&s!=i?e+=`<option value="${i}">${l[i]}</option>`:(e+=`<option value="${i}" selected>${l[i]}</option>`,t=!0);return`\n            <form id="entry-form" data-entry="register">\n                <div class="input-group">\n                    <label for="entry-email">${(0,i.A)("common-email")}</label>\n                    <input type="email" maxlength="70" name="email" id="entry-email" placeholder="Email address">\n                    <p class="error-msg">${(0,i.A)("common-enterValidEmail")}</p>\n                </div>\n                <div class="input-group">\n                    <label for="entry-password">${(0,i.A)("common-password")}</label>\n                    <input type="password" name="password" id="entry-password" placeholder="Enter password">\n                    <p class="error-msg"></p>\n                    <img id="toggle-password" class="input-icon" src="/img/icon/eye-hide.svg">\n                 </div>\n\n                <input type="checkbox" id="entry-newsletter" name="newsletter" checked>\n                <label class="top-20 switch" for="entry-newsletter"><span></span>${(0,i.A)("subscribeToNewsletter")}</label>\n\n                <div id="h-captcha" style="margin: 0px" data-sitekey="${h}"></div>\n\n                <button type="submit" class="button med w-100 top-40">${(0,i.A)("common-signUp")}</button>\n            </form>\n        `},this.forgotPassword=()=>`\n            <h2 class="top-30">${(0,i.A)("common-forgotPass")}</h2>\n\n            <form id="entry-form" class="top-30" data-entry="forgotPassword">\n                <div class="input-group">\n                    <label for="entry-email">${(0,i.A)("common-email")}</label>\n                    <input type="email" maxlength="70" name="email" id="entry-email" placeholder="Email address"/>\n                    <p class="error-msg">${(0,i.A)("common-enterValidEmail")}</p>\n                </div>\n\n                <div id="h-captcha" style="margin: 0px" data-sitekey="${h}"></div>\n\n                <button type="submit" class="button large w-100 top-40" id="load-verification">${(0,i.A)("common-reqCode")}</button>\n            </form>\n        `,this.resetPassword=(e=!1)=>`\n            <h2 class="top-10">${e?(0,i.A)("common-setPassword"):(0,i.A)("common-resetPass")}</h2>\n\n            <form id="entry-form" class="top-30" data-entry="${e?"setPassword":"resetPassword"}">\n                <div class="input-group">\n                    <label for="entry-email">${(0,i.A)("common-email")}</label>\n                    <input type="email" maxlength="70" name="email" id="entry-email" readonly/>\n                    <p class="error-msg">${(0,i.A)("common-enterValidEmail")}</p>\n                </div>\n                <div class="input-group">\n                    <label for="entry-password">${(0,i.A)("common-newPass")}</label>\n                    <input type="password" name="password" id="entry-password">\n                    <p class="error-msg"></p>\n                    <img id="toggle-password" class="input-icon" src="/img/icon/eye-hide.svg">\n                    <span id="password-meter" class="none">\n                        <span></span><span></span><span></span><span></span>\n                    </span>\n                </div>\n                <div class="input-group">\n                    <label for="entry-code">${(0,i.A)("common-code")}</label>\n                    <input type="number" name="code" id="entry-code" onkeypress="if(this.value.length===6)return false;">\n                    <p class="error-msg">${(0,i.A)("common-enterValidCode")}</p>\n                </div>\n\n                ${e?`<p class="center top-20 text-center"><strong><a id="entry-resend">${(0,i.A)("common-SendResetCode")}</a></strong></p>`:""}\n\n                <div id="h-captcha" style="margin: 0px" data-sitekey="${h}"></div>\n                <button class="button large w-100 top-20" type="submit">${(0,i.A)("common-updatePass")}</button>\n                ${e?"":`<p class="top-20 hide center" id="entry-resend">${(0,i.A)("common-didNotReceiveCode")} <a class="anchor">${(0,i.A)("common-resend")}</a></p>`}\n            </form>\n        `,this.verification=e=>`\n            <h1>${(0,i.A)("common-verifyAcc")}</h1>\n            <p id="entry-to-email" data-text="${(0,i.A)("common-sentCodeDesc")}">${(0,i.A)("common-sentCodeDesc")}</p>\n\n            <form id="entry-form" data-entry="${e}">\n                <input id="verification-email" type="hidden" name="email" readonly/>\n                <div class="input-group">\n                    <label for="code">${(0,i.A)("common-code")}</label>\n                    <input type="number" name="code" id="entry-code" onkeypress="if(this.value.length===6)return false;">\n                    <p class="error-msg">${(0,i.A)("common-enterValidCode")}</p>\n                </div>\n\n                <button type="submit" class="button large w-100 top-20">${(0,i.A)("common-verify")}</button>\n                <p class="top-20 hide text-center" id="entry-resend">${(0,i.A)("common-didNotReceiveCode")} &nbsp; <a class="anchor">${(0,i.A)("common-resend")}</a></p>\n            </form>\n        `,this.changePassword=()=>`\n            <h2>${(0,i.A)("common-changePassword")}</h2>\n            <form id="entry-form" class="top-30" data-entry="changePassword">\n                <div class="input-group">\n                    <label for="entry-password">${(0,i.A)("common-oldPass")}</label>\n                    <input type="password" name="password" id="entry-password">\n                    <p class="error-msg"></p>\n                    <img id="toggle-password" class="input-icon" src="/img/icon/eye-hide.svg">\n                </div>\n                <div class="input-group">\n                    <label for="entry-password">${(0,i.A)("common-newPass")}</label>\n                    <input type="password" name="new-password" id="entry-password-new">\n                    <p class="error-msg"></p>\n                    <img id="toggle-password-2" class="input-icon" src="/img/icon/eye-hide.svg">\n                    <span id="password-meter" class="none">\n                        <span></span><span></span><span></span><span></span>\n                    </span>\n                </div>\n                <button type="submit" class="button w-100 top-20" style="margin-bottom: 20px">${(0,i.A)("common-changePassword")}</button>\n            </form>\n        `,this.changeEmail=()=>`\n            <h2>${(0,i.A)("common-changeEmail")}</h2>\n\n            <form id="entry-form" class="top-30" data-entry="changeEmail">\n                <div class="input-group">\n                    <label class="text-capitalize" for="email">${(0,i.A)("common-newEmail")}</label>\n                    <input type="email" maxlength="70" name="email" id="entry-email">\n                    <p class="error-msg">${(0,i.A)("common-EnterValidEmail")}</p>\n                </div>\n\n                <button type="submit" class="button w-100 top-20" style="margin-bottom: 20px">${(0,i.A)("common-newEmail")}</button>\n            </form>\n        `,this.changeUsername=(e="")=>`\n            <h2>${(0,i.A)("changeUsername")}</h2>\n\n            <form id="entry-form" class="top-30" data-entry="changeUsername">\n                <div class="input-group">\n                    <label for="entry-username">${(0,i.A)("newUsername")}</label>\n                    <input type="text" name="name" id="entry-username" value="${e}">\n                </div>\n\n                <button type="submit" class="button w-100 top-20">${(0,i.A)("update")}</button>\n            </form>\n        `,this.deleteAccount=e=>`\n            <h2>${(0,i.A)("common-deleteMyAccount")}</h2>\n            <p class="top-20">Hey ${e},</p>\n            <p class="no-margin">${(0,i.A)("common-sadToSeeYouGoWhyLeaving")}</p>\n\n            <form id="entry-form" data-entry="deleteAccount">\n                <div class="input-group">\n                    <label class="top-20 text-uppercase">${(0,i.A)("common-leavingBecause")}</label>\n                    <select name="reason">\n                        <option value="leavingReasonDefault" disabled selected>${(0,i.A)("common-leavingReasonDefault")}</option>\n                        <option value="leavingReasons1">${(0,i.A)("common-leavingReasons1")}</option>\n                        <option value="leavingReasons2">${(0,i.A)("common-leavingReasons2")}</option>\n                        <option value="leavingReasons3">${(0,i.A)("common-leavingReasons3")}</option>\n                        <option value="leavingReasons4">${(0,i.A)("common-leavingReasons4")}</option>\n                        <option value="leavingReasons5">${(0,i.A)("common-leavingReasons5")}</option>\n                    <select>\n                </div>\n\n                <button type="submit" class="button red w-100 top-20" style="margin-bottom: 20px">${(0,i.A)("common-deleteMyAccount")}</button>\n            </form>\n        `,this.deleteAccountConfirmation=(e="leavingReasonDefault")=>`\n            <h4 class="top-35 text-default">${(0,i.A)("areYouSureYouWantToDelete")} </h4>\n            ${o.N.subscription?`<p class="top-35">${(0,i.A)("common-youHaveActiveSubsBeforeDelete")}</p>`:""}\n            <p class="top-15">${(0,i.A)("youCanStillChangeYourMind")} </p>\n\n            <form id="entry-form" data-entry="deleteAccountConfirmation">\n                <input type="hidden" name="reason" value="${e}">\n                <div class="input-group">\n                    <label for="entry-password">${(0,i.A)("common-password")}</label>\n                    <input type="password" name="password" id="entry-password">\n                    <p class="error-msg"></p>\n                    <img id="toggle-password" class="input-icon" src="/img/icon/eye-hide.svg">\n                </div>\n\n                <div class="input-group checkbox-group inline justify-center flex-wrap" style="margin-top: 30px">\n                    <button id="entry-cancel" class="button full positive">${(0,i.A)("cancel")}</button>\n                    <button id="delete-confirm" type="submit" class="button w-100 transparent">${(0,i.A)("deleteMyAccount")}</button>\n                </div>\n            </form>\n        `,this.additionalVerification=()=>`\n            <h3 class="heavy">${(0,i.A)("enterYourPasswordToContinue")}</h3>\n\n            <form id="entry-form" data-entry="additionalVerification">\n                <div class="input-group">\n                    <label for="entry-password">${(0,i.A)("common-password")}</label>\n                    <input type="password" name="password" id="entry-password">\n                    <p class="error-msg"></p>\n                    <img id="toggle-password" class="input-icon" src="/img/icon/eye-hide.svg">\n                </div>\n\n                <div class="input-group checkbox-group inline justify-center" style="margin-top: 30px">\n                    <button type="submit" class="button full top-20">Continue</button>\n                </div>\n            </form>\n        `}}const l={AF:"Afghanistan",AX:"land Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius and Saba",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo, Republic of the (Brazzaville)",CD:"Congo, the Democratic Republic of the (Kinshasa)",CK:"Cook Islands",CR:"Costa Rica",CI:"Cte d'Ivoire, Republic of",HR:"Croatia",CU:"Cuba",CW:"Curaao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Islas Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern and Antarctic Lands",GA:"Gabon",GM:"Gambia, The",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",VA:"Holy See (Vatican City)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic of",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia, Republic of",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Runion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthlemy",SH:"Saint Helena, Ascension and Tristan da Cunha",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania, United Republic of",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, Bolivarian Republic of",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},d=window.location.href.includes("localhost")?"10000000-ffff-ffff-ffff-000000000001":"550ad708-3266-4d24-8566-69208120dbe6";class p{constructor(e={redirectUpsell:!0}){var t;this.setContent=async(e,t)=>{var s,i;switch(e){case"chooser":this.content.innerHTML=this.form.chooser(),document.querySelectorAll(".social-button").forEach(e=>{e.addEventListener("click",()=>this.loadSocialLogin(e.dataset.social))}),null===(s=(0,r.Ay)("choose-email"))||void 0===s||s.addEventListener("click",()=>this.loadForm("login"));break;case"login":this.loadHCaptcha(),this.content.innerHTML=this.form.login(),(0,r.Ay)("load-signup").onclick=()=>this.loadForm("register"),this.options.email&&((0,r.Ay)("entry-email").value=this.options.email);break;case"register":this.loadHCaptcha(),this.content.innerHTML=await this.form.register();break;case"forgotPassword":this.loadHCaptcha(),this.content.innerHTML=this.form.forgotPassword();break;case"setPassword":this.loadHCaptcha(),this.content.innerHTML=this.form.resetPassword(!0);break;case"resetPassword":this.loadHCaptcha(),this.content.innerHTML=this.form.resetPassword();break;case"verification":this.content.innerHTML=this.form.verification(null!==(i=t.verify)&&void 0!==i?i:"verification");break;case"changePassword":this.content.innerHTML=this.form.changePassword();break;case"changeEmail":this.content.innerHTML=this.form.changeEmail();break;case"changeUsername":this.content.innerHTML=this.form.changeUsername((0,r.Ay)("change-name").dataset.name);break;case"deleteAccount":const e=(0,r.Ay)("delete-account").dataset.name||"User";this.content.innerHTML=this.form.deleteAccount(e);break;case"deleteAccountConfirmation":this.content.innerHTML=this.form.deleteAccountConfirmation(t.reason);break;case"additionalVerification":this.passwordVerification="pending",this.content.innerHTML=this.form.additionalVerification()}},this.setFooter=e=>{switch(this.footer.style.display="block",e){case"login":this.footer.innerHTML=`${(0,i.A)("common-notMember")} &nbsp; <a id="load-chooser">${(0,i.A)("common-signUpNow")}</a>`,(0,r.Ay)("load-chooser").onclick=()=>this.loadForm("chooser");break;case"register":this.footer.innerHTML=`${(0,i.A)("common-alreadyMember")} &nbsp; <a id="load-login">${(0,i.A)("common-loginHere")}</a>`,(0,r.Ay)("load-login").onclick=()=>this.loadForm("login");break;case"forgotPassword":this.footer.innerHTML=`<a class="back" id="entry-back">&#10094; &nbsp; ${(0,i.A)("common-back")}</a>`,(0,r.Ay)("entry-back").onclick=()=>this.loadForm("login");break;case"resetPassword":this.footer.innerHTML=`<a class="back" id="entry-back">&#10094; &nbsp; ${(0,i.A)("common-back")}</a>`,(0,r.Ay)("entry-back").onclick=()=>this.loadForm("forgotPassword");break;default:return this.footer.innerHTML="",void(this.footer.style.display="none")}},this.loadForm=async(e,t={})=>{var s,i,a,n,o,h,c;if(this.options.view=e,await this.setContent(this.options.view,t),"setPassword"!==this.options.view&&"resetPassword"!==this.options.view&&"register"!==this.options.view&&"forgotPassword"!==this.options.view||this.renderHCaptcha(!0),null===(s=(0,r.Ay)("entry-form"))||void 0===s||s.addEventListener("submit",e=>{this.submitForm((0,r.Ay)("entry-form").dataset.entry,e)}),"setPassword"===this.options.view&&(t.email=(0,r.Ay)("set-password").dataset.email),"resetPassword"!==this.options.view&&"setPassword"!==this.options.view||((0,r.Ay)("entry-email").value=t.email,t.code&&((0,r.Ay)("entry-code").value=t.code)),(0,r.Ay)("entry-to-email")){const e=(0,r.Ay)("entry-to-email").dataset.text.replace("[EMAIL]",t.email);(0,r.Ay)("entry-to-email").innerHTML=e}(0,r.Ay)("verification-email")&&((0,r.Ay)("verification-email").value=t.email),(0,r.Ay)("entry-resend")&&(clearTimeout(this.resendCodeTimeouts),this.resendCodeTimeouts=setTimeout(()=>{(0,r.Ay)("entry-resend").classList.remove("hide")},3e4),null===(i=(0,r.Ay)("entry-resend"))||void 0===i||i.addEventListener("click",()=>this.resendCode(t.email))),null===(a=(0,r.Ay)("entry-email"))||void 0===a||a.addEventListener("keyup",()=>{this.validateInputTimer("email")}),null===(n=(0,r.Ay)("entry-email"))||void 0===n||n.addEventListener("blur",()=>{(0,r.TT)((0,r.Ay)("entry-email"),"","email")}),null===(o=(0,r.Ay)("load-forgotPassword"))||void 0===o||o.addEventListener("click",()=>this.loadForm("forgotPassword")),null===(h=(0,r.Ay)("toggle-password"))||void 0===h||h.addEventListener("click",()=>this.togglePassword()),null===(c=(0,r.Ay)("toggle-password-2"))||void 0===c||c.addEventListener("click",()=>this.togglePassword("toggle-password-2","entry-password-new"))},this.loadSocialLogin=async e=>{if((0,a.A)("login",e),"apple"===e){const e=await new Promise((e,t)=>{let s=document.createElement("script");s.type="text/javascript",s.crossOrigin="anonymous",s.src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",document.body.appendChild(s),s.onload=function(){e(AppleID?AppleID.auth:null)},s.onerror=function(){t("Failed to load apple auth script")}});e&&(e.init({clientId:"com.pixlr.web",scope:"name email",redirectURI:new URL(location.href).origin+"/auth/apple/callback",state:location.href,nonce:"",usePopup:!1}),e.signIn())}else{const t=window.location.origin;let s=this.options.callback?decodeURIComponent(this.options.callback).split("#")[0]:encodeURIComponent(window.location.href);window.location.href=`${t}/auth/${e}?callbackUrl=${s}`}},this.togglePassword=(e="toggle-password",t="entry-password")=>{const s=(0,r.Ay)(e),i=(0,r.Ay)(t);"text"===i.type?(i.type="password",s.src="/img/icon/eye-hide.svg"):(i.type="text",s.src="/img/icon/eye-show.svg")},this.validateInputTimer=e=>{this.validationTimer[e]&&clearTimeout(this.validationTimer[e]),this.validationTimer[e]=setTimeout(()=>(0,r.TT)((0,r.Ay)(`entry-${e}`),"",e),1e3)},this.loadHCaptcha=()=>{let e=document.createElement("script");e.id="hcaptcha-js-api",e.defer=!0,e.src="https://js.hcaptcha.com/1/api.js",document.getElementsByTagName("head")[0].appendChild(e)},this.renderHCaptcha=(e=!1)=>{this.captcha=void 0,setTimeout(()=>{try{this.captcha=hcaptcha.render("h-captcha",{sitekey:d,size:e?"invisible":"normal"})}catch(t){console.error("Failed to load Captcha, please check your network connection!")}},2500)},this.getHCaptchaToken=async()=>{try{const e=await hcaptcha.execute(this.captcha,{async:!0});return e.response?e.response:(hcaptcha.reset(this.captcha),(0,r.y8)("danger","Please complete the CAPTCHA!",3))}catch(e){return console.error("Failed to get Captcha Token!",e),(0,r.y8)("danger","An unexpected error occurred!",3)}},this.getFormInput=()=>{const e={},t=(0,r.Ay)("entry-form");return t.querySelectorAll("input").forEach(t=>{"checkbox"==t.type?e[t.name]=t.checked:e[t.name]=t.value}),t.querySelectorAll("select").forEach(t=>{e[t.name]=t.value}),e},this.submitForm=async(e,t)=>{switch(t.preventDefault(),e){case"login":this.loginHandler();break;case"register":this.registerHandler();break;case"verification":this.verificationHandler();break;case"forgotPassword":this.forgotPasswordHandler();break;case"setPassword":this.passwordResetHandler(!0);break;case"resetPassword":this.passwordResetHandler();break;case"changeEmail":this.changeEmailHandler();break;case"changeEmailVerification":this.changeEmailVerificationHandler();break;case"changePassword":this.changePasswordHandler();break;case"changeUsername":this.changeUsernameHandler();break;case"deleteAccount":this.deleteAccountHandler();break;case"deleteAccountConfirmation":this.deleteAccountConfirmationHandler()}},this.loginHandler=async()=>{var e;const t=this.getFormInput();t.email=t.email.trim();const s=(0,r.TT)((0,r.Ay)("entry-email"),t.email,"email"),i=(0,r.TT)((0,r.Ay)("entry-password"),t.password,"password");if(!s||!i)return;(0,r.Ay)("entry-submit").classList.add("working");const o=await(0,n.In)("/auth/login","POST",t);o.status?((0,a.A)("login","password"),this.options.callback?window.location.href=decodeURIComponent(this.options.callback).split("#")[0]:window.location.reload()):o.verify?(this.loadForm("verification",{email:t.email}),(0,r.y8)("danger",o.message,5)):((0,r.Ay)("entry-submit").innerText="Login",(0,r.y8)("danger",o.message,5)),null===(e=(0,r.Ay)("entry-submit"))||void 0===e||e.classList.remove("working")},this.registerHandler=async()=>{this.registerData=this.getFormInput();const e=(0,r.TT)((0,r.Ay)("entry-email"),this.registerData.email,"email"),t=(0,r.TT)((0,r.Ay)("entry-password"),this.registerData.password,"password");if(!e||!t)return;const s=this.getFormInput();Object.assign(s,this.registerData);let i=await this.getHCaptchaToken();s.token=i;const a=await(0,n.In)("/auth/register","POST",s);if(!a.status)return(0,r.y8)("danger",a.message,5),void this.loadForm("register");this.loadForm("verification",{email:s.email})},this.verificationHandler=async()=>{const e=this.getFormInput(),t=await(0,n.In)("/auth/verify","POST",e);if(!t.status)return(0,r.y8)("danger",t.message,5);(0,r.y8)("success",t.message,5),setTimeout(()=>{const e=this.options.callback?decodeURIComponent(this.options.callback).split("#")[0]:location.href;location.pathname.includes("campaign=true")?window.location.href=e:t.redirectUpsell&&"/pricing/"!==location.pathname&&this.options.redirectUpsell?window.location.href=`${location.origin}/upsell?next=${e}`:window.location.href=e},1e3)},this.forgotPasswordHandler=async()=>{const e=this.getFormInput();if(!(0,r.TT)((0,r.Ay)("entry-email"),e.email,"email"))return;let t=await this.getHCaptchaToken();e.token=t,e.resend=!1;const s=await(0,n.In)("/auth/request/code/","POST",e);if(!s.status)return(0,r.y8)("danger",s.message,5);(0,r.y8)("success",s.message,5,e.email),this.loadForm("resetPassword",{email:e.email})},this.passwordResetHandler=async(e=!1)=>{const t=this.getFormInput();let s=await this.getHCaptchaToken();t.token=s;const i=(0,r.TT)((0,r.Ay)("entry-email"),t.email,"email"),a=(0,r.TT)((0,r.Ay)("entry-password"),t.password,"password"),o=(0,r.TT)((0,r.Ay)("entry-code"),t.code,"code");if(!i||!a||!o)return;const h=await(0,n.In)("/auth/reset","POST",t);if(!h.status)return(0,r.y8)("danger",h.message,5);(0,r.y8)("success",h.message,5),setTimeout(()=>{e?window.location.href="/logout":this.options.callback?window.location.href=decodeURIComponent(this.options.callback).split("#")[0]:window.location.reload()},1e3)},this.resendCode=async e=>{(0,r.Ay)("entry-resend").classList.add("hide"),this.resendCodeTimeouts=setTimeout(()=>{(0,r.Ay)("entry-resend").classList.remove("hide")},3e4);const t=await(0,n.In)("/auth/request/code/","POST",{email:e,resend:!0});if(!t.status)return(0,r.y8)("danger",t.message,5);(0,r.y8)("success",t.message,5,e)},this.changeEmailHandler=async()=>{const e=this.getFormInput();if(!(0,r.TT)((0,r.Ay)("entry-email"),e.email,"email"))return;const t=await(0,n.In)("/auth/changeemail/request","POST",{newEmail:e.email});if(!t.status)return(0,r.y8)("danger",t.message);this.loadForm("verification",{email:e.email,verify:"changeEmailVerification"}),(0,r.y8)("success",t.message,5,e.email)},this.changeEmailVerificationHandler=async()=>{const e=this.getFormInput();e.newEmail=e.email;if(!(0,r.TT)((0,r.Ay)("entry-code"),e.code,"code"))return;const t=await(0,n.In)("/auth/changeemail/verify","POST",e);if(!t.status)return(0,r.y8)("danger",t.message,5);(0,r.y8)("success",t.message,5),setTimeout(()=>{window.location.replace("/logout?callbackUrl=/")},1e3)},this.changePasswordHandler=async()=>{const e=this.getFormInput(),t=(0,r.TT)((0,r.Ay)("entry-password"),e.password,"password"),s=(0,r.TT)((0,r.Ay)("entry-password-new"),e["new-password"],"password");if(!t||!s)return;const i=await(0,n.In)("/auth/changepassword","PUT",{oldPassword:e.password,newPassword:e["new-password"]});if(!i.status)return(0,r.y8)("danger",i.message,5);(0,r.y8)("success",i.message,5),setTimeout(()=>{window.location.replace("/")},2e3)},this.changeUsernameHandler=async()=>{const e=this.getFormInput(),t=await(0,n.In)("/myaccount/api/profile","PUT",e,!0);if(!t.status)return(0,r.y8)("danger",t.message);(0,r.y8)("success",t.message),setTimeout(()=>window.location.reload(),500)},this.deleteAccountHandler=async()=>{const e=this.getFormInput();"leavingReasonDefault"!==e.reason&&this.loadForm("deleteAccountConfirmation",{reason:e.reason})},this.deleteAccountConfirmationHandler=async()=>{const e=this.getFormInput();if(!(0,r.TT)((0,r.Ay)("entry-password"),e.password,"password"))return;(0,r.Ay)("entry-cancel").style.display="none",(0,r.Ay)("delete-confirm").innerText=(0,i.A)("common-deleteInProgress");const t=await(0,n.In)("/api/myaccount/profile","DELETE",e,!0);if(!t.status)return(0,r.Ay)("entry-cancel").style.display="block",(0,r.Ay)("delete-confirm").innerText=(0,i.A)("deleteMyAccount"),(0,r.y8)("danger",t.message);window.location.href="/logout/"},this.getAdditionalVerificationstatus=()=>(0,r.Ay)("entry-form"),this.additionalVerificationHandler=async()=>{const e=this.getFormInput();if(!(0,r.TT)((0,r.Ay)("entry-password"),e.password,"password"))return!1;const t=await(0,n.In)("/api/myaccount/verification","POST",e,!0);return!!t.status||((0,r.y8)("danger",t.message),!1)},this.options=Object.assign({},e),this.form=new c,this.registerData={},this.validationTimer={},this.captcha={},this.dialog=this.options.holder,this.dialog.classList.add("entry"),this.content=(0,r.T)("div",{className:"entry-content"}),this.footer=(0,r.T)("div",{id:"entry-footer",className:"center"}),this.dialog.append(this.content,this.footer),this.loadForm(null!==(t=this.options.view)&&void 0!==t?t:"chooser")}}},11923:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GooglePayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.GooglePayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"GooglePayDetails.FundingSourceEnum"},{name:"googlePayCardNetwork",baseName:"googlePayCardNetwork",type:"string"},{name:"googlePayToken",baseName:"googlePayToken",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"GooglePayDetails.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Googlepay="googlepay"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.GooglePayDetails||(t.GooglePayDetails={}))},11980:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(21742),a=s(82042),n=s(2215);class r extends n.A{constructor(e){super(e,(0,i.A)("titleReflect")),this.changeX=()=>{const e=Number(document.querySelector('input[name="reflect-type"]:checked').value);10!=e&&11!=e||this.y.setValue(1-this.x.getValue()),9!=e&&12!=e||this.y.setValue(this.x.getValue()),this.update()},this.changeY=()=>{const e=Number(document.querySelector('input[name="reflect-type"]:checked').value);9!=e&&12!=e||this.x.setValue(this.y.getValue()),10!=e&&11!=e||this.x.setValue(1-this.y.getValue()),this.update()},this.changeType=()=>{const e=Number(document.querySelector('input[name="reflect-type"]:checked').value);1==e||3==e?(this.x.enable(),this.xo.enable(),this.y.disable(),this.yo.disable(),this.y.reset(),this.yo.reset()):2==e||4==e?(this.x.disable(),this.xo.disable(),this.y.enable(),this.yo.enable(),this.x.reset(),this.xo.reset()):(this.x.enable(),this.y.enable(),this.xo.enable(),this.yo.enable()),this.update()},this.update=()=>{const e=Number(document.querySelector('input[name="reflect-type"]:checked').value);this.change("reflect",{type:e,x:this.x.getValue(),y:this.y.getValue(),xo:this.xo.getValue(),yo:this.yo.getValue()})},this.setContent(`\n                <label>${(0,i.A)("type")}</label>\n                <div class="switch-icon-field" style="display:flex">\n                    <input type="radio" id="reflect-type-minus-x" name="reflect-type" value="1" checked="true" /><label for="reflect-type-minus-x"><img src="/img/icon/reflect-t1.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-plus-y" name="reflect-type" value="4" /><label for="reflect-type-plus-y"><img src="/img/icon/reflect-t2.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-plus-x" name="reflect-type" value="3" /><label for="reflect-type-plus-x"><img src="/img/icon/reflect-t3.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-minus-y" name="reflect-type" value="2" /><label for="reflect-type-minus-y"><img src="/img/icon/reflect-t4.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-minus-x-minus-y" name="reflect-type" value="5" /><label for="reflect-type-minus-x-minus-y"><img src="/img/icon/reflect-t5.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-minus-x-plus-y" name="reflect-type" value="6" /><label for="reflect-type-minus-x-plus-y"><img src="/img/icon/reflect-t6.svg" class="ic" width="20" height="20"/></label>\n                </div>\n                <div class="switch-icon-field" style="display:flex;margin-top:4px">\n                    <input type="radio" id="reflect-type-plus-x-plus-y" name="reflect-type" value="7" /><label for="reflect-type-plus-x-plus-y"><img src="/img/icon/reflect-t7.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-plus-x-minus-y" name="reflect-type" value="8" /><label for="reflect-type-plus-x-minus-y"><img src="/img/icon/reflect-t8.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-above-x-equalto-y" name="reflect-type" value="9" /><label for="reflect-type-above-x-equalto-y"><img src="/img/icon/reflect-t9.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-below-x-equalto-minus-y" name="reflect-type" value="10" /><label for="reflect-type-below-x-equalto-minus-y"><img src="/img/icon/reflect-t10.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-above-x-equalto-minus-y" name="reflect-type" value="11" /><label for="reflect-type-above-x-equalto-minus-y"><img src="/img/icon/reflect-t11.svg" class="ic" width="20" height="20"/></label>\n                    <input type="radio" id="reflect-type-below-x-equalto-y" name="reflect-type" value="12" /><label for="reflect-type-below-x-equalto-y"><img src="/img/icon/reflect-t12.svg" class="ic" width="20" height="20"/></label>\n                </div>\n                <div id="reflect-x" class="top-20"></div>\n                <div id="reflect-offset-x" class="top-10"></div>\n                <div id="reflect-y" class="top-20"></div>\n                <div id="reflect-offset-y" class="top-10"></div>\n            `),this.x=new a.A("reflect-x",{label:(0,i.A)("horizontal"),range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.changeX()}),this.xo=new a.A("reflect-offset-x",{label:(0,i.A)("offset"),range:[-.5,.5],defaultValue:0,step:.001,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.changeX()}),this.y=new a.A("reflect-y",{label:(0,i.A)("vertical"),range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.changeY()}),this.yo=new a.A("reflect-offset-y",{label:(0,i.A)("offset"),range:[-.5,.5],defaultValue:0,step:.001,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.changeY()}),document.querySelectorAll('input[name="reflect-type"]').forEach(e=>e.addEventListener("change",this.changeType)),this.changeType()}}},12664:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataLevel23=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataLevel23=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"enhancedSchemeData_customerReference",baseName:"enhancedSchemeData.customerReference",type:"string"},{name:"enhancedSchemeData_destinationCountryCode",baseName:"enhancedSchemeData.destinationCountryCode",type:"string"},{name:"enhancedSchemeData_destinationPostalCode",baseName:"enhancedSchemeData.destinationPostalCode",type:"string"},{name:"enhancedSchemeData_destinationStateProvinceCode",baseName:"enhancedSchemeData.destinationStateProvinceCode",type:"string"},{name:"enhancedSchemeData_dutyAmount",baseName:"enhancedSchemeData.dutyAmount",type:"string"},{name:"enhancedSchemeData_freightAmount",baseName:"enhancedSchemeData.freightAmount",type:"string"},{name:"enhancedSchemeData_itemDetailLine_itemNr_commodityCode",baseName:"enhancedSchemeData.itemDetailLine[itemNr].commodityCode",type:"string"},{name:"enhancedSchemeData_itemDetailLine_itemNr_description",baseName:"enhancedSchemeData.itemDetailLine[itemNr].description",type:"string"},{name:"enhancedSchemeData_itemDetailLine_itemNr_discountAmount",baseName:"enhancedSchemeData.itemDetailLine[itemNr].discountAmount",type:"string"},{name:"enhancedSchemeData_itemDetailLine_itemNr_productCode",baseName:"enhancedSchemeData.itemDetailLine[itemNr].productCode",type:"string"},{name:"enhancedSchemeData_itemDetailLine_itemNr_quantity",baseName:"enhancedSchemeData.itemDetailLine[itemNr].quantity",type:"string"},{name:"enhancedSchemeData_itemDetailLine_itemNr_totalAmount",baseName:"enhancedSchemeData.itemDetailLine[itemNr].totalAmount",type:"string"},{name:"enhancedSchemeData_itemDetailLine_itemNr_unitOfMeasure",baseName:"enhancedSchemeData.itemDetailLine[itemNr].unitOfMeasure",type:"string"},{name:"enhancedSchemeData_itemDetailLine_itemNr_unitPrice",baseName:"enhancedSchemeData.itemDetailLine[itemNr].unitPrice",type:"string"},{name:"enhancedSchemeData_orderDate",baseName:"enhancedSchemeData.orderDate",type:"string"},{name:"enhancedSchemeData_shipFromPostalCode",baseName:"enhancedSchemeData.shipFromPostalCode",type:"string"},{name:"enhancedSchemeData_totalTaxAmount",baseName:"enhancedSchemeData.totalTaxAmount",type:"string"}]},12800:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Amount=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Amount=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"currency",baseName:"currency",type:"string"},{name:"value",baseName:"value",type:"number"}]},12895:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(42268),a=s(21742),n=s(75281),r=s(2215),o=s(41915);class h{constructor(){this.points=[]}add(e){for(var t=0;t<this.points.length;t++)if(e.x==this.points[t].x&&e.y==this.points[t].y)return null;return this.points.push(e),this.sortPoints(),this.points.indexOf(e)}sortPoints(){this.points.sort(function(e,t){return e.x-t.x})}remove(e){var t=null;return e>0&&e<this.points.length-1&&(t=this.points.splice(e,1)[0]),t}removeAll(){this.points=[]}getClosestFrom(e,t){if(!this.points.length)return null;for(var s=1/0,i=null,a=0;a<this.points.length;a++){var n=Math.sqrt(Math.pow(e.x-this.points[a].x,2)+Math.pow(e.y-this.points[a].y,2));n<s&&(s=n,i=a)}return{index:i,distance:s*t}}getPoint(e){return e>=0&&e<this.points.length?this.points[e]:null}getNumberOfPoints(){return this.points.length}getPoints(){return this.points}updatePoint(e,t){let s=e;if(e>=0&&e<this.points.length){this.points[e].x=t.x,this.points[e].y=t.y;var i=this.points[e];this.sortPoints(),s=this.points.indexOf(i)}return s}}var c=s(95009);class l{constructor(e,t,s,i,a){this.move=e=>{e.preventDefault(),e.stopPropagation();var t=this.canvas.getBoundingClientRect();this.mouseMoved=!0,this.mouse.x=(e.clientX-t.left)/this.width,this.mouse.y=(this.height-(e.clientY-t.top))/this.height;var s=this.pointSet.getClosestFrom(this.mouse,this.width);s&&(-1==this.pointGrabbedIndex?s.distance<=this.controlPointRadius?this.pointHoveredIndex=s.index:-1!=this.pointHoveredIndex&&(this.pointHoveredIndex=-1,this.draw()):(this.pointGrabbedIndex=this.pointSet.updatePoint(this.pointGrabbedIndex,this.mouse),this.pointHoveredIndex=this.pointGrabbedIndex),-1==this.pointHoveredIndex&&-1==this.pointGrabbedIndex||this.draw(),-1!=this.pointGrabbedIndex&&this.callback&&this.callback(this,"change"))},this.down=e=>{e.preventDefault(),e.stopPropagation(),this.mouseDown=!0,this.mouseMoved=!1,document.addEventListener("mouseup",this.up,!1),-1!=this.pointHoveredIndex&&(this.pointGrabbedIndex=this.pointHoveredIndex,this.callback(this,"down"))},this.up=e=>{e.preventDefault(),e.stopPropagation();const t=-1!=this.pointGrabbedIndex,s=this.mouseMoved;this.mouseDown=!1,this.mouseMoved=!1,this.pointGrabbedIndex=-1,document.removeEventListener("mouseup",this.up,!1),t&&s&&this.draw(),t&&this.callback&&s&&this.callback(this,"up")},this.dblClick=e=>{if(e.preventDefault(),e.stopPropagation(),this.canvas.focus(),-1==this.pointHoveredIndex){let e=this.add(new o.A(this.mouse.x,this.mouse.y));this.pointHoveredIndex=e}else this.remove(this.pointHoveredIndex),this.pointHoveredIndex=-1,this.pointGrabbedIndex=-1;this.callback&&this.callback(this,"dblclick")},this.add=(e,t=!0,s=!1)=>{let i=this.pointSet.add(e);return t&&this.draw(),s&&this.callback&&this.callback(this,"change"),i},this.addAll=e=>{this.pointSet.removeAll();for(var t=0;t<e.length;t++)this.pointSet.add(e[t]);this.draw()},this.remove=e=>{this.pointSet.remove(e);this.draw(),this.callback&&this.callback(this,"change")},this.removeAll=()=>{this.pointSet.removeAll(),this.draw(),this.callback&&this.callback(this,"change")},this.reset=()=>{this.pointSet.removeAll(),this.add(new o.A(0,0),!1,!1),this.add(new o.A(1,1),!1,!1),this.draw()},this.draw=()=>{if(!this.pointSet.points.length)return;let e,t=this.width,s=this.height,i=[],a=[],n=this.pointSet.getPoints();for(var r=0;r<n.length;r++)i.push(n[r].x*t),a.push(n[r].y*s);this.ctx.clearRect(0,0,this.width,this.height),this.ctx.beginPath(),this.ctx.moveTo(i[0]/this.screenRatio,(s-a[0])/this.screenRatio);let o=new c.A(i,a);for(var h=0;h<Math.ceil(i[0]);h++)e=a[0],e=e<0?.5:e>s?s-.5:e,this.ctx.lineTo(h/this.screenRatio,(s-e)/this.screenRatio);for(h=Math.ceil(i[0]);h<Math.ceil(i[i.length-1]);h++)e=o.interpolate(h),e=e<0?.5:e>s?s-.5:e,this.ctx.lineTo(h/this.screenRatio,(s-e)/this.screenRatio);for(h=Math.ceil(i[i.length-1]);h<t;h++)e=a[a.length-1],e=e<0?.5:e>s?s-.5:e,this.ctx.lineTo(h/this.screenRatio,(s-e)/this.screenRatio);this.ctx.strokeStyle=-1==this.pointHoveredIndex?this.idleColor:this.hoverColor,this.ctx.lineWidth=this.curveThickness/this.screenRatio,this.ctx.stroke(),this.ctx.closePath();for(r=0;r<i.length;r++)this.ctx.beginPath(),this.ctx.arc(i[r]/this.screenRatio,(s-a[r])/this.screenRatio,this.controlPointRadius/this.screenRatio,0,2*Math.PI),-1!=this.pointHoveredIndex&&r==this.pointHoveredIndex?this.ctx.fillStyle=this.hoverColor:this.ctx.fillStyle=this.idleColor,this.ctx.fill(),this.ctx.closePath()},this.getPoints=()=>this.pointSet.getPoints(),this.cleanUp=()=>{this.canvas.removeEventListener("mousemove",this.move,!0),this.canvas.removeEventListener("mousedown",this.down,!0),this.canvas.removeEventListener("dblclick",this.dblClick,!0)},this.callback=s,this.controlPointRadius=5,this.idleColor=i,this.hoverColor=a,this.mouse=new o.A,this.curveThickness=2,this.pointHoveredIndex=-1,this.pointGrabbedIndex=-1,this.screenRatio=window.devicePixelRatio,this.canvas=e,this.canvas.width=this.width=t,this.canvas.height=this.height=t,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.screenRatio,this.screenRatio),this.canvas.addEventListener("mousemove",this.move,!0),this.canvas.addEventListener("mousedown",this.down,!0),this.canvas.addEventListener("dblclick",this.dblClick,!0),this.pointSet=new h,this.add(new o.A(0,0),!1,!1),this.add(new o.A(1,1),!1,!1),this.draw()}}class d extends r.A{constructor(e){super(e,(0,a.A)("titleCurves")),this.setUp=()=>{let e=(0,i.Ay)("curves-swatches").getElementsByTagName("div");for(var t=0;t<e.length;t++)e[t].addEventListener("click",function(){for(var t=0;t<e.length;t++)e[t].classList.remove("active"),(0,i.Ay)("curves-graph-"+e[t].getAttribute("data-name")).classList.remove("active");this.classList.add("active"),(0,i.Ay)("curves-graph-"+this.getAttribute("data-name")).classList.add("active")},!1);let s=(0,i.Ay)("curves-grid").getContext("2d");s.lineWidth=2,s.strokeStyle="rgb(68,68,68)",s.strokeRect(1,1,254,254),s.lineWidth=1,s.translate(.5,.5),s.beginPath(),s.moveTo(0,63),s.lineTo(255,63),s.moveTo(0,191),s.lineTo(255,191),s.moveTo(63,0),s.lineTo(63,255),s.moveTo(191,0),s.lineTo(191,255),s.closePath(),s.stroke(),s.setTransform(1,0,0,1,0,0),s.beginPath(),s.lineWidth=2,s.moveTo(0,128),s.lineTo(256,128),s.moveTo(128,0),s.lineTo(128,256),s.closePath(),s.stroke(),s.beginPath(),s.lineWidth=1.5,s.moveTo(0,256),s.lineTo(256,0),s.closePath(),s.stroke(),this.all=new l((0,i.Ay)("curves-graph-all"),256,this.curvesChange,"rgba(100, 100, 100, 1)","rgba(125, 125, 125, 1)"),this.red=new l((0,i.Ay)("curves-graph-red"),256,this.curvesChange,"rgba(209, 72, 14, 1)","rgba(232, 82, 16, 1)"),this.green=new l((0,i.Ay)("curves-graph-green"),256,this.curvesChange,"rgba(146, 156, 31, 1)","rgba(169, 181, 36, 1)"),this.blue=new l((0,i.Ay)("curves-graph-blue"),256,this.curvesChange,"rgba(58, 110, 154, 1)","rgba(68, 129, 179, 1)")},this.curvesChange=(e,t)=>{this.change("curves",new n.A(255,this.all.getPoints(),this.red.getPoints(),this.green.getPoints(),this.blue.getPoints()))},this.dialog.style.width="380px",this.dialog.style.maxWidth="380px",this.setContent(`\n            <div id="curves-holder">      \n                <div id="curves-swatches" class="swatches">\n                    <div class="active" data-name="all" flow="left" tooltip="${(0,a.A)("main")}"><span class="ic" style="background-color: #ccc"></span></div>\n                    <div data-name="red" flow="left" tooltip="${(0,a.A)("red")}"><span style="background-color: #d1480e;"></span></div>\n                    <div data-name="green" flow="left" tooltip="${(0,a.A)("green")}"><span style="background-color:#929C1F;"></span></div>\n                    <div data-name="blue" flow="left" tooltip="${(0,a.A)("blue")}"><span style="background-color: #3a6e9a"></span></div>\n                </div>\n                <div id="curves-overlay">\n                    <canvas id="curves-grid" unselectable="on" width="256" height="256"></canvas>\n                    <canvas class="curves-graph active" unselectable="on" id="curves-graph-all"></canvas>\n                    <canvas class="curves-graph" unselectable="on" id="curves-graph-red"></canvas>\n                    <canvas class="curves-graph" unselectable="on" id="curves-graph-green"></canvas>\n                    <canvas class="curves-graph" unselectable="on" id="curves-graph-blue"></canvas>\n                </div>\n            </div>\n            <div class="tip top-20"><small>${(0,a.A)("addCurvesControlDesc")}</small></div>\n        `),this.setUp()}}},13671:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WeChatPayMiniProgramDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.WeChatPayMiniProgramDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"appId",baseName:"appId",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"openid",baseName:"openid",type:"string"},{name:"type",baseName:"type",type:"WeChatPayMiniProgramDetails.TypeEnum"}],function(e){let t;!function(e){e.WechatpayMiniProgram="wechatpayMiniProgram"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.WeChatPayMiniProgramDetails||(t.WeChatPayMiniProgramDetails={}))},13791:(e,t,s)=>{s.d(t,{A:()=>y});var i=s(21742),a=s(54738),n=s(40963),r=s(82042),o=s(41915),h=s(42268),c=s(81937),l=s(13947),d=s(39989),p=s(26806),u=s(29755),m=s(93771);class g extends p.A{constructor(e){super((0,i.A)("dialogAddLayerTitle"),!0),this.rotation=0,this.maxSize=1920,this.addLayerChoice=async e=>{e.stopPropagation();let t="express"===u.Ay.product;switch(e.currentTarget.getAttribute("data")){case"text":this.stage.addText(),document.dispatchEvent(new CustomEvent("select-tool",{detail:t?"arrange":"text"})),this.stage.reform&&this.stage.reform.dblClick();break;case"image":await(0,m.XN)(!0).then(async e=>{document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));for(let t=0;t<e.length;t++)await(0,m.Tq)(e[t],this.stage,!1);document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),document.dispatchEvent(new CustomEvent("select-tool",{detail:"arrange"}))});break;case"shape":this.stage.addShape(),document.dispatchEvent(new CustomEvent("select-tool",{detail:t?"arrange":"shape"}));break;case"frame":this.stage.addFrame(),document.dispatchEvent(new CustomEvent("select-tool",{detail:t?"arrange":"frame"}));break;case"empty":this.stage.addEmpty(),this.stage.notify("layerAdded")}this.cleanUp()},this.stage=e,this.dialog.style.width="500px",this.dialog.style.maxWidth="500px",this.setContent(`\n            <label class="top-0">${(0,i.A)("dialogAddLayerHL")}</label>\n\n            <ul id="add-layer-type" class="push-buttons small top-20">\n                <li id="add-layer-empty" data="empty"><img src="/img/tool/empty.svg" class="ic"><span>${(0,i.A)("empty")}</span></li>\n                <li id="add-layer-image" data="image"><img src="/img/tool/image.svg" class="ic"><span>${(0,i.A)("image")}</span></li>\n                <li id="add-layer-frame" data="frame"><img src="/img/tool/frame.svg" class="ic"><span>${(0,i.A)("frame")}</span></li>\n                <li id="add-layer-text" data="text"><img src="/img/tool/text.svg" class="ic"><span>${(0,i.A)("text")}</span></li>\n                <li id="add-layer-shape" data="shape"><img src="/img/tool/shape.svg" class="ic"><span>${(0,i.A)("shape")}</span></li>\n            </ul>\n        `),(0,h.Ay)("add-layer-empty").addEventListener("click",this.addLayerChoice,!0),(0,h.Ay)("add-layer-image").addEventListener("click",this.addLayerChoice,!0),(0,h.Ay)("add-layer-text").addEventListener("click",this.addLayerChoice,!0),(0,h.Ay)("add-layer-frame").addEventListener("click",this.addLayerChoice,!0),(0,h.Ay)("add-layer-shape").addEventListener("click",this.addLayerChoice,!0),(0,h.Ay)("dialog-apply"+this.mid).style.display="none"}}class y{constructor(e,t){this.stage=e,this.active=t,this.isDown=!1,this.isRight=!1,this.stamp=(new Date).getTime(),this.dragStart=e=>{this.p=e,this.d=new o.A(this.panel.offsetLeft,this.panel.offsetTop)},this.dragMove=e=>{this.panel.style.left=Math.round(this.d.x+(e.x-this.p.x))+"px",this.panel.style.top=Math.round(this.d.y+(e.y-this.p.y))+"px"},this.dragEnd=e=>{let t=Math.round(this.d.y+(e.y-this.p.y)),s=Math.round(this.d.x+(e.x-this.p.x));t<76&&(t=76),s<0&&(s=0),s+120>(0,h.Ay)("workspace").offsetWidth&&(s=(0,h.Ay)("workspace").offsetWidth-240),this.panel.style.left=s+"px",this.panel.style.top=t+"px"},this.resizeStart=e=>{this.d=new o.A(this.panel.clientHeight,e.y)},this.resizeMove=e=>{const t=this.d.x+(e.y-this.d.y);this.panel.style.height=(t<120?120:t)+"px"},this.activate=e=>{this.panel.classList.toggle("active",e),e&&this.panel.classList.remove("collapse"),this.active=e,this.render()},this.delay=!1,this.addLayerChoice=async e=>{if(e.stopPropagation(),!this.delay){this.delay=!0;try{switch(e.currentTarget.getAttribute("data")){case"text":this.stage.addText(),document.dispatchEvent(new CustomEvent("select-tool",{detail:"text"})),this.stage.reform&&this.stage.reform.dblClick();break;case"image":this.delay=!1,await(0,m.XN)(!0).then(async e=>{document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));for(let t=0;t<e.length;t++)await(0,m.Tq)(e[t],this.stage,!1);document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),document.dispatchEvent(new CustomEvent("select-tool",{detail:"arrange"}))});break;case"shape":this.stage.addShape(),document.dispatchEvent(new CustomEvent("select-tool",{detail:"shape"}));break;case"frame":this.stage.addFrame(),document.dispatchEvent(new CustomEvent("select-tool",{detail:"frame"}));break;case"empty":this.stage.addEmpty(),this.stage.notify("layerAdded")}}catch(t){}a.sg("add-layer",500,()=>{this.delay=!1})}},this.changeName=()=>{this.stamp=(new Date).getTime();let e=this.stage.fresco.getLayerById(this.settingsId),t=Object.assign({},e.settings);const s=(0,h.Ay)("layer-settings-name").value;e.settings.name!==s&&(e.settings.name=s,this.stage.history.add({type:"layerSettings",kind:"name",layer:e,settings:t}),(0,h.Ay)(e.id+"-name")&&((0,h.Ay)(e.id+"-name").innerHTML=e.settings.name+"<span>"+(0,i.A)(e.type)+"</span>"))},this.changeBlendMode=()=>{this.stamp=(new Date).getTime();let e=this.stage.fresco.getLayerById(this.settingsId),t=Object.assign({},e.settings);e.settings.blendmode=(0,h.Ay)("layer-settings-blend-mode").value,this.stage.history.add({type:"layerSettings",kind:"blendMode",layer:e,settings:t}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeLocked=e=>{this.stamp=(new Date).getTime();const t=(0,h.Ay)("layer-settings-locked-true").checked;this.stage.changeLocked(void 0,t)},this.changeVisible=e=>{this.stamp=(new Date).getTime();let t=this.stage.fresco.getLayerById(this.settingsId);const s=(0,h.Ay)("layer-settings-visible-true").checked;this.stage.changeVisible(t,s)},this.render=e=>{if(!this.active||!this.stage||this.stage.supressRender)return;if(this.isDown&&!this.stage.layerDrag)return;const t=(0,h.Ay)("layer-list");for(;t.lastChild;)t.removeChild(t.lastChild);if(this.stage.fresco){const e=n.A.bestFit(this.stage.fresco.width,this.stage.fresco.height,32,32),r=e.width/this.stage.fresco.width,o=this.stage.fresco.width,c=this.stage.fresco.height;let p=0;for(var s=this.stage.fresco.layers.length-1;s>=0;s--){const u=this.stage.fresco.layers[s];let m=(0,h.T)("div",{id:u.id,className:"layer"});if(u.settings.visible||m.classList.add("hidden"),m.addEventListener("mousedown",this.mouseDown,!1),m.addEventListener("touchstart",this.touchStart,{passive:!1}),p>0&&(m.classList.add("member"),p--),t.appendChild(m),u instanceof l.A){u.groupSettings.collapsed?(s-=3,m.classList.add("collapsed")):p=3,m.classList.add("group");let e=(0,h.T)("div",{className:"arrow"});e.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault()},!0),e.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),this.stage.changeCollapsed(u)},!1),m.append(e,(0,h.T)("div",{id:u.id+"-name",className:"name"},u.settings.name))}else{let t=a.VI(e.width,e.height);if(u.canvas){let s=t.getContext("2d");if(u.rect.width/o>.5||u.rect.height/c>.5)s.scale(r,r),this.stage.renderLayer(s,u,!0);else{s.translate(e.width/2,e.height/2),s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.rotate(u.rect.rotation*Math.PI/180);const t=n.A.bestFit(u.rect.width,u.rect.height,e.width-8,e.height-8);s.drawImage(u.baked?u.baked:u.canvas,-t.width/2,-t.height/2,Math.max(t.width,1),Math.max(t.height,1))}}m.appendChild((0,h.T)("div",{className:"vertical-align thumb"},t)),m.appendChild((0,h.T)("div",{id:u.id+"-name",className:"name"},u.settings.name,(0,h.T)("span",(0,i.A)(u.type))))}if(u.settings.locked&&!u.settings.visible||!u.settings.locked){const e=(0,h.T)("img",{className:"visibility ic",title:u.settings.visible?(0,i.A)("visible"):(0,i.A)("hidden"),src:u.settings.visible?"/img/icon/visible.svg":"/img/icon/hidden.svg"});e.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault()},!0),e.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),this.stage.changeVisible(u,!u.settings.visible)},!1),m.appendChild((0,h.T)("div",{className:"right"},e))}else{let e=(0,h.T)("img",{src:"/img/icon/locked.svg",className:"locked ic",title:(0,i.A)("locked")});e.addEventListener("mousedown",e=>{e.stopPropagation(),e.preventDefault()},!0),e.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),this.stage.changeLocked(u,!1)},!1),m.appendChild((0,h.T)("div",{className:"right"},e))}let g=(0,h.T)("div",{className:"icons"});if(m.appendChild(g),u.animation){const e=(0,h.T)("img",{src:u.animation.block?"/img/icon/animation/none.svg":"/img/icon/animation/animation.svg",title:(0,i.A)("animation"),className:"animation ic"});e.addEventListener("mousedown",()=>{document.dispatchEvent(new CustomEvent("panel-animation"))}),g.appendChild(e)}if(u instanceof d.A&&u.hasMask()){const e=(0,h.T)("img",{src:"/img/icon/mask.svg",title:(0,i.A)("hasCutout"),className:"cutout ic"});e.addEventListener("mousedown",()=>{document.dispatchEvent(new CustomEvent("select-tool",{detail:"cutout"}))}),e.addEventListener("dblclick",()=>{this.stage.maskApply()}),g.appendChild(e)}u.settings.link&&""!==u.settings.link&&(g.appendChild((0,h.T)("img",{src:"/img/icon/linked.svg",title:(0,i.A)("linked"),className:"linked ic"})),m.classList.add(u.settings.link))}this.markSelected(!1)}},this.markSelected=(e=!0)=>{var t;if("block"===(0,h.Ay)("layer-settings").style.display&&this.hideSettings(),this.stage&&this.stage.fresco&&(0,h.Ay)("layer-panel")){if(e){const e=(0,h.Ay)("layer-list").getElementsByClassName("layer");for(let t=0;t<e.length;t++)e[t].classList.remove("haslink","selected")}const s=this.stage.fresco.getSelectedStack();for(let e of s)if(null===(t=(0,h.Ay)(e.id))||void 0===t||t.classList.add("selected"),e.hasLink()){const t=(0,h.Ay)("layer-list").getElementsByClassName(e.settings.link);for(let e=0;e<t.length;e++)t[e].classList.add("haslink")}let i=this.stage.fresco.numSelected()>1;1===this.stage.fresco.numSelected()&&this.stage.fresco.getSelected().hasLink()&&(i=!0),(0,h.Ay)("layer-panel-link").style.display=i?"block":"none",(0,h.Ay)("layer-panel-more").style.display=1===s.length?"block":"none"}},this.settingsId="",this.showSettings=e=>{let t=this.stage.fresco.getSelected();t&&t.id!==this.settingsId?((0,h.Ay)("layer-settings").style.display="block",this.settingsId=t.id,this.opacity.setValue(t.settings.opacity),(0,h.Ay)("layer-settings-name").value=t.settings.name,(0,h.Ay)("layer-settings-blend-mode").value=t.settings.blendmode,(0,h.Ay)("layer-settings-visible-true").checked=t.settings.visible,(0,h.Ay)("layer-settings-visible-false").checked=!t.settings.visible,(0,h.Ay)("layer-settings-locked-true").checked=t.settings.locked,(0,h.Ay)("layer-settings-locked-false").checked=!t.settings.locked,window.requestAnimationFrame(()=>{if(e){const e=32,s=(0,h.Ay)("layer-settings").getBoundingClientRect(),i=a.oR(this.panel).y,n=a.oR((0,h.Ay)(t.id)).y,r=(0,h.Ay)("layer-panel-content-ss-content").scrollTop;let o=n-i+(0,h.Ay)("panel-bar").clientTop-r;i+o+s.height>(0,h.Ay)("workspace").clientHeight&&(o=(0,h.Ay)("workspace").clientHeight-i-s.height-4),(0,h.Ay)("layer-settings").style.top=o-e+"px"}else(0,h.Ay)("layer-settings").style.top="-12px"})):this.hideSettings(!0)},this.hideSettings=(e=!1)=>{!e&&(new Date).getTime()-this.stamp<300||(this.settingsId="",(0,h.Ay)("layer-settings").style.display="none",document.dispatchEvent(new CustomEvent("layer-arrange")))},this.touchStart=e=>{1!==e.touches.length&&(e.preventDefault(),e.stopPropagation(),this.down(e.touches[0].clientX,e.touches[0].clientY,e.currentTarget,e.shiftKey||e.ctrlKey),this.stage.fresco.getSelected()&&(document.addEventListener("touchmove",this.touchMove,{passive:!1}),document.addEventListener("touchend",this.touchEnd,{passive:!1})))},this.touchMove=e=>{1!==e.touches.length&&(e.preventDefault(),e.stopPropagation(),this.move(e.touches[0].clientX,e.touches[0].clientY))},this.touchEnd=e=>{e.preventDefault(),e.stopPropagation(),this.up(e.touches[0].clientX,e.touches[0].clientY),document.removeEventListener("touchmove",this.touchMove),document.removeEventListener("touchend",this.touchEnd)},this.mouseDown=e=>{if("INPUT"!==document.activeElement.nodeName&&"SELECT"!==document.activeElement.nodeName){if(e.stopPropagation(),this.down(e.clientX,e.clientY,e.currentTarget,e.shiftKey||e.ctrlKey),e.button>0)return this.stamp=(new Date).getTime(),void this.showSettings(e);this.stage.fresco.getSelected()&&(document.addEventListener("mousemove",this.mouseMove,!0),document.addEventListener("mouseup",this.mouseUp,!0),(0,h.Ay)("layer-panel").classList.add("down"),this.isDown=!0)}},this.mouseMove=e=>{e.button>0||(e.stopPropagation(),this.move(e.clientX,e.clientY))},this.mouseUp=e=>{e.stopPropagation(),this.up(e.clientX,e.clientY),document.removeEventListener("mousemove",this.mouseMove,!0),document.removeEventListener("mouseup",this.mouseUp,!0)},this.down=(e,t,s,i)=>{this.downY=t,this.heightY=(0,h.Ay)("layer-panel-content-ss-content").scrollHeight,(i||this.stage.fresco.isSelectedStack()||!this.stage.fresco.isSelectedById(s.id))&&(i&&this.stage.fresco.isSelectedById(s.id)?this.stage.unselectLayerById(s.id):this.stage.selectLayerById(s.id,i,!0))},this.pointInLayerPanel=(e,t)=>{const s=(0,h.Ay)("layer-list").getBoundingClientRect();return e>=s.x&&e<=s.x+s.width&&t>=s.y&&t<=s.y+s.height},this.move=(e,t)=>{const s=(0,h.Ay)("layer-list");if(!this.pointInLayerPanel(e,t)){if(this.ghost){this.ghost.classList.remove("ghost"),this.ghost.style.left="unset",this.ghost.style.top="unset",this.ghostFill.remove();const e=this.stage.fresco.layers.length-this.stage.fresco.selectedLayerNr()-1;s.children[e].before(this.ghost),this.ghost=null,this.ghostFill=null}if(!this.stage.layerDrag){const s=this.stage.fresco.getSelected(),i=(0,h.Ay)(s.id);this.stage.layerDrag={fresco:this.stage.fresco.id,layer:s,node:(0,h.T)("div",{className:"grabbed-layer"},(0,h.T)("div",{className:"thumb"},a.oM(i.querySelector("canvas"))),(0,h.T)("div",s.settings.name)),position:new o.A(e,t),blocked:this.stage.fresco.block},this.stage.workspace.append(this.stage.layerDrag.node),document.body.style.cursor="move"}const i=this.stage.layerDrag.node.getBoundingClientRect();return this.stage.layerDrag.node.style.left=e-i.width/2+"px",this.stage.layerDrag.node.style.top=t-i.height/2+"px",this.stage.layerDrag.position=new o.A(e,t),void document.dispatchEvent(new CustomEvent("layer-drag-move"))}if(this.stage.layerDrag){if(this.stage.coating.clear(),document.body.style.cursor="unset",this.stage.layerDrag.fresco!==this.stage.fresco.id){const s=this.stage.layerDrag.node.getBoundingClientRect();return this.stage.layerDrag.node.style.left=e-s.width/2+"px",this.stage.layerDrag.node.style.top=t-s.height/2+"px",void(this.stage.layerDrag.position=new o.A(e,t))}this.stage.layerDrag.node.remove(),this.stage.layerDrag=null}this.ghost||(this.ghost=(0,h.Ay)(this.stage.fresco.getSelected().id),this.startY=this.ghost.offsetTop-1,this.ghost.style.left=this.ghost.offsetLeft+"px",this.ghostFill=document.createElement("div"),this.ghostFill.id="ghost-fill",this.ghost.before(this.ghostFill),this.ghost.classList.add("ghost"),s.appendChild(this.ghost)),-1===this.startY&&(this.startY=this.ghost.offsetTop-4,this.downY=t),this.ghost.style.top=this.startY-(this.downY-t)+"px",this.moveGhostFill(),window.clearTimeout(this.auto);let i=(0,h.Ay)("layer-panel-content-ss-content");this.ghost.offsetTop<i.scrollTop-5?this.autoScroll(-20):this.ghost.offsetTop+this.ghost.offsetHeight>i.scrollTop+i.offsetHeight+5&&this.autoScroll(20)},this.moveGhostFill=()=>{this.ghost.offsetTop>this.ghostFill.offsetTop+this.ghostFill.offsetHeight/2+2?this.ghostFill.nextElementSibling.classList.contains("selected")||this.ghostFill.nextElementSibling.after(this.ghostFill):this.ghost.offsetTop<this.ghostFill.offsetTop-this.ghostFill.offsetHeight/2-2&&this.ghostFill.previousElementSibling&&this.ghostFill.previousElementSibling.before(this.ghostFill)},this.autoScroll=e=>{window.clearTimeout(this.auto);const t=(0,h.Ay)("layer-panel-content-ss-content"),s=()=>{this.ghost&&(e<0&&t.scrollTop>10||e>0&&t.scrollTop+10<this.heightY-t.clientHeight)&&(this.startY=-1,t.scrollTop+=e,this.ghost.style.top=this.ghost.offsetTop-1+e+"px",this.moveGhostFill(),this.auto=window.setTimeout(s,80))};this.auto=window.setTimeout(s,80)},this.up=(e,t)=>{this.isDown=!1,(0,h.Ay)("layer-panel").classList.remove("down"),document.body.style.cursor="unset",this.stage.layerDrag&&(this.pointInLayerPanel(e,t)||document.dispatchEvent(new CustomEvent("layer-drag-drop")),this.stage.layerDrag.node.remove(),this.stage.layerDrag=void 0),this.ghost&&(this.ghost.classList.remove("ghost"),this.ghost.style.left="0px",this.ghost.style.top="0px",this.ghostFill.before(this.ghost),this.ghostFill.remove(),this.ghost=void 0,this.ghostFill=void 0);let s=this.stage.fresco.selectedLayerNr(),i=(0,h.Ay)("layer-list").getElementsByClassName("layer");const a=this.stage.fresco.getSelected();for(var n=0;n<i.length;n++)if(i[n].id===a.id){let e=i.length-n-1;e!=s&&this.stage.changeOrder(s,e);break}},this.panel=(0,h.Ay)("layer-panel"),this.panel.classList.toggle("active",t),document.addEventListener("layerlist-update",()=>this.render(),!0),document.addEventListener("layer-select",()=>this.markSelected(),!1),(0,h.Ay)("layer-panel-add").addEventListener("click",()=>new g(this.stage),!1),(0,h.Ay)("layer-panel-link").addEventListener("click",()=>this.stage.linkLayer(),!1),(0,h.Ay)("layer-panel-group").addEventListener("click",()=>this.stage.addGroup(),!1),(0,h.Ay)("layer-panel-copy").addEventListener("click",()=>this.stage.duplicateLayer(),!1),(0,h.Ay)("layer-panel-delete").addEventListener("click",()=>this.stage.deleteLayer(),!1),(0,h.Ay)("layer-panel-more").addEventListener("click",e=>this.showSettings(),!0),(0,h.Ay)("layer-panel-more").addEventListener("pointerdown",e=>{e.preventDefault(),e.stopPropagation()},!0),(0,h.Ay)("layer-settings-name").addEventListener("blur",this.changeName,!1),(0,h.Ay)("layer-settings-name").addEventListener("keydown",e=>{"Enter"===e.key&&(e.currentTarget.blur(),this.hideSettings(!0))},!0),(0,h.Ay)("layer-settings-close").addEventListener("click",()=>this.hideSettings(!0),!1),(0,h.Ay)("layer-settings-blend-mode").addEventListener("change",this.changeBlendMode,!1),(0,h.Ay)("layer-settings-visible-false").addEventListener("click",this.changeVisible,!1),(0,h.Ay)("layer-settings-visible-true").addEventListener("click",this.changeVisible,!1),(0,h.Ay)("layer-settings-locked-false").addEventListener("click",this.changeLocked,!1),(0,h.Ay)("layer-settings-locked-true").addEventListener("click",this.changeLocked,!1),(0,h.Ay)("layer-settings-merge-down").addEventListener("click",()=>this.stage.mergeDown(),!1),(0,h.Ay)("layer-settings-merge-visible").addEventListener("click",()=>this.stage.mergeVisible(),!1),(0,h.Ay)("layer-settings-merge-flatten").addEventListener("click",()=>this.stage.mergeFlatten(),!1),(0,h.Ay)("layer-panel-add-frame").addEventListener("click",this.addLayerChoice,!0),(0,h.Ay)("layer-panel-add-text").addEventListener("click",this.addLayerChoice,!0),(0,h.Ay)("layer-panel-add-image").addEventListener("click",this.addLayerChoice,!0),(0,h.Ay)("layer-panel-add-shape").addEventListener("click",this.addLayerChoice,!0),(0,h.Ay)("layer-panel-add-empty").addEventListener("click",this.addLayerChoice,!0),this.opacity=new r.A("layer-settings-opacity",{defaultValue:1,label:(0,i.A)("opacity"),labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100,onChange:e=>{this.stage.fresco.getLayerById(this.settingsId).settings.opacity=e,document.dispatchEvent(new CustomEvent("viewport-render"))},onEnd:(e,t)=>{this.stamp=(new Date).getTime();let s=this.stage.fresco.getLayerById(this.settingsId);this.stage.history.add({type:"layerSettings",kind:"opacity",layer:s,settings:Object.assign(Object.assign({},s.settings),{opacity:t})})}}),new c.A((0,h.Ay)("layer-panel-content")),(0,h.Ay)("layer-panel-content").oncontextmenu=e=>(e.preventDefault(),e.stopPropagation(),!1),(0,h.Ay)("layer-minimize").addEventListener("pointerdown",e=>{e.stopPropagation(),(0,h.Ay)("layer-panel").classList.toggle("collapse")},!0),(0,h.Ay)("layer-close").addEventListener("pointerdown",e=>{e.stopPropagation(),document.dispatchEvent(new CustomEvent("panel-state",{detail:"layer-panel"}))},!0);const s=(0,h.T)("img",{id:"layer-panel-resize",src:"/img/icon/three-dot.svg",className:"resize ic"});(0,h.Bb)(s,this.resizeStart,this.resizeMove),this.panel.append(s),(0,h.Bb)((0,h.Ay)("layer-panel-title"),this.dragStart,this.dragMove,this.dragEnd)}}},13947:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(22866),a=s(54738);class n extends i.A{constructor(e=a.Os(),t,s){super(i.A.TYPE_GROUP),this.id=e,this.settings.name=t,this.groupSettings=s}}},14118:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataTemporaryServices=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataTemporaryServices=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"enhancedSchemeData_customerReference",baseName:"enhancedSchemeData.customerReference",type:"string"},{name:"enhancedSchemeData_employeeName",baseName:"enhancedSchemeData.employeeName",type:"string"},{name:"enhancedSchemeData_jobDescription",baseName:"enhancedSchemeData.jobDescription",type:"string"},{name:"enhancedSchemeData_regularHoursRate",baseName:"enhancedSchemeData.regularHoursRate",type:"string"},{name:"enhancedSchemeData_regularHoursWorked",baseName:"enhancedSchemeData.regularHoursWorked",type:"string"},{name:"enhancedSchemeData_requestName",baseName:"enhancedSchemeData.requestName",type:"string"},{name:"enhancedSchemeData_tempStartDate",baseName:"enhancedSchemeData.tempStartDate",type:"string"},{name:"enhancedSchemeData_tempWeekEnding",baseName:"enhancedSchemeData.tempWeekEnding",type:"string"},{name:"enhancedSchemeData_totalTaxAmount",baseName:"enhancedSchemeData.totalTaxAmount",type:"string"}]},14871:(e,t,s)=>{s.d(t,{A:()=>o});var i,a=s(54738),n=s(6395);class r{constructor(e,t=1,s=0){this.svg=e,this.scale=t,this.direction=s,this.createCanvasPattern=e=>{let t;if(1!==this.scale){let s=a.Nw(Math.round(this.image.width*this.scale),Math.round(this.image.height*this.scale));s.getContext("2d").drawImage(this.image,0,0,s.width,s.height),t=e.createPattern(s,"repeat")}else t=e.createPattern(this.image,"repeat");return 0!==this.direction&&t.setTransform((new DOMMatrix).rotate(this.direction)),t},this.toCSS=()=>"url(data:image/svg+xml;base64,"+btoa(this.svg)+")",this.toJSON=()=>JSON.stringify(this.toIPattern())}toIPattern(e=this.svg){return{svg:e,scale:this.scale,direction:this.direction}}}i=r,r.fromIPattern=async e=>{let t=new i(e.svg,e.scale,e.direction),s=new Blob([t.svg],{type:"image/svg+xml"});return t.image=await(0,n.Ep)(s),t},r.fromJSON=async e=>{let t=JSON.parse(e);return i.fromIPattern(t)};const o=r},14887:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(2215),a=s(82042),n=s(42268),r=s(21742),o=s(54738);class h extends i.A{constructor(e){super(e,(0,r.A)("titleRadialBlur")),this.update=o.eD(50,()=>{const e=Number(document.querySelector('input[name="direction"]:checked').value),t={amount:this.amount.getValue(),x:this.x.getValue(),y:this.y.getValue(),direction:e,symmetry:(0,n.Ay)("radial-symmetry").checked};this.change("radial",t.amount?t:void 0)}),this.setContent(`\n             <label>Direction</label>\n             <div class="switch-field top-5">\n                 <input type="radio" id="direction-cw" name="direction" value="0" checked/><label for="direction-cw">${(0,r.A)("right")}</label>\n                 <input type="radio" id="direction-ccw" name="direction" value="1"/><label for="direction-ccw">${(0,r.A)("left")}</label>\n                 <input type="radio" id="direction-bi" name="direction" value="2"/><label for="direction-bi">${(0,r.A)("both")}</label>\n             </div>\n             <div id="radial-amount" class="top-20"></div>\n             <div id="radial-x" class="top-16"></div>\n             <div id="radial-y" class="top-16"></div>\n             <input type="checkbox" id="radial-symmetry">\n             <label class="top-20 switch" for="radial-symmetry">${(0,r.A)("symmetry")}<span></span></label>\n             `),this.amount=new a.A("radial-amount",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.x=new a.A("radial-x",{label:"X",range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.y=new a.A("radial-y",{label:"Y",range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),(0,n.Ay)("direction-cw").addEventListener("change",this.update,!1),(0,n.Ay)("direction-ccw").addEventListener("change",this.update,!1),(0,n.Ay)("direction-bi").addEventListener("change",this.update,!1),(0,n.Ay)("radial-symmetry").addEventListener("click",()=>{this.update()}),this.update()}}},14983:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(){this.radii=0,this.outlineSize=0,this.outlineColor="#555555",this.shadow=!1,this.shadowBlur=.3,this.shadowOpacity=.8,this.shadowColor="#000000",this.shadowDistance=.3,this.shadowDirection=180}clone(){const e=Object.create(i.prototype);return Object.assign(e,this)}equalTo(e){return!!e&&(this.variant===e.variant&&this.radii===e.radii&&this.content===e.content&&this.fillType===e.fillType&&this.fillValue===e.fillValue&&this.outlineSize===e.outlineSize&&this.outlineColor===e.outlineColor&&this.shadow===e.shadow&&this.shadowBlur===e.shadowBlur&&this.shadowColor===e.shadowColor&&this.shadowOpacity===e.shadowOpacity&&this.shadowDistance===e.shadowDistance&&this.shadowDirection===e.shadowDirection)}}},15047:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleSmooth")),this.setContent((0,n.T)("div",{id:"smooth-slider"})),new a.A("smooth-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("smooth",e)})}}},15818:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(54738);class a{constructor(e,t,s){this.h=e,this.s=t,this.b=s}toColor(){let e,t,s,i,a,r,o,h;if(0==this.b)e=0,t=0,s=0;else if(0==this.s)e=t=s=this.b;else switch(i=this.h/60,a=i-Math.floor(i),r=this.b*(1-this.s),h=this.b*(1-this.s*a),o=this.b*(1-this.s*(1-a)),Math.floor(i)){case 0:case 6:e=this.b,t=o,s=r;break;case 1:e=h,t=this.b,s=r;break;case 2:e=r,t=this.b,s=o;break;case 3:e=r,t=h,s=this.b;break;case 4:e=o,t=r,s=this.b;break;case 5:e=this.b,t=r,s=h}return new n(Math.round(255*e),Math.round(255*t),Math.round(255*s))}toHEX(){const e=this.toColor(),t=e=>{const t=e.toString(16);return 1===t.length?"0"+t:t};return`#${t(e.r)}${t(e.g)}${t(e.b)}`}}class n{constructor(e=255,t=255,s=255,n=255){this.isEqual=e=>!!e&&(this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a),this.toHEX=()=>{const e=e=>{const t=e.toString(16);return 1===t.length?"0"+t:t};return`#${e(this.r)}${e(this.g)}${e(this.b)}`},this.toHEXA=()=>{const e=e=>{const t=e.toString(16);return 1===t.length?"0"+t:t};return`#${e(this.r)}${e(this.g)}${e(this.b)}${e(this.a)}`},this.toRGBA=(e=this.a)=>`rgba(${this.r},${this.g},${this.b},${e/255})`,this.toHSB=()=>{let e,t,s,i=Math.min(this.r,this.g,this.b),n=Math.max(this.r,this.g,this.b);s=n/255;let r=n-i;return r?(t=r/n,e=this.r==n?(this.g-this.b)/r*60:this.g==n?60*(2+(this.b-this.r)/r):60*(4+(this.r-this.g)/r),e>360?e-=360:e<0&&(e+=360)):e=t=0,new a(e,t,s)},this.r=i.qE(e,0,255),this.g=i.qE(t,0,255),this.b=i.qE(s,0,255),this.a=i.qE(n,0,255)}rotateHue(e){let t,s,i,a=Math.min(this.r,this.g,this.b),r=Math.max(this.r,this.g,this.b);t=r/255;var o=r-a;return o?(s=o/r,i=this.r==r?(this.g-this.b)/o*60:this.g==r?60*(2+(this.b-this.r)/o):60*(4+(this.r-this.g)/o)):i=s=0,i+=e,i>360?i-=360:i<0&&(i+=360),360===i&&(i=0),n.fromHSB(i,s,t)}static fromRGB(e){if(/^#[0-9A-F]{6}$/i.test(e))return n.fromHEX(e);let t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return!t||t.length<4?new n:new n(Number(t[1]),Number(t[2]),Number(t[3]))}static fromHEXA(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return!t||t.length<4?new n:new n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),parseInt(t[4],16))}static fromHEX(e,t=255){let s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return!s||s.length<3?new n:new n(parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16),t)}static fromHSB(e,t,s){let i,a,r,o,h,c,l,d;if(0==s)i=0,a=0,r=0;else if(0==t)i=a=r=s;else switch(o=e/60,h=o-Math.floor(o),c=s*(1-t),d=s*(1-t*h),l=s*(1-t*(1-h)),Math.floor(o)){case 0:case 6:i=s,a=l,r=c;break;case 1:i=d,a=s,r=c;break;case 2:i=c,a=s,r=l;break;case 3:i=c,a=d,r=s;break;case 4:i=l,a=c,r=s;break;case 5:i=s,a=c,r=d}return new n(Math.round(255*i),Math.round(255*a),Math.round(255*r))}clone(){return new n(this.r,this.g,this.b,this.a)}}},15872:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(21742),a=s(54738),n=s(40963),r=s(15818),o=s(82042),h=s(22866),c=s(8689),l=s(26806),d=s(58489);class p extends l.A{constructor(e){super((0,i.A)("titleDropShadow"),!1),this.stage=e,this.apply=()=>{const e=this.stage.fresco.getSelected(),t=a.TL(this.scratch.canvas).rebase(-this.scratch.rect.x,-this.scratch.rect.y),s=a.ON(e.canvas,t.rebase(e.rect.x,e.rect.y)),i=a.oM(e.mask),n=e.rect.clone();e.extendCanvas(t),this.scratch.drawToLayer(e),e.render(),this.stage.fresco.removeScratch(),this.stage.history.add({type:"bitmapChange",kind:"DropShadow",layer:e,rect:n,patchRect:t.rebase(e.rect.x,e.rect.y),patch:s,mask:i}),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),this.cleanUp()},this.cancel=()=>{this.stage.fresco.removeScratch(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),this.cleanUp()},this.change=()=>{const e=this.stage.fresco.getSelected(),t=this.scratch.ctx;if(e.canvas){this.scratch.clear(),t.save();try{const e=this.color.getColor();t.shadowColor=e.toRGBA(255*this.opacitySlider.getValue()),t.shadowOffsetX=this.offsetXSlider.getValue(),t.shadowOffsetY=this.offsetYSlider.getValue(),t.shadowBlur=this.blurSlider.getValue(),t.drawImage(this.cache,0,0),window.requestAnimationFrame(()=>this.stage.render())}finally{t.restore()}}},this.createCombinationMask=e=>{if(this.selected.type===h.A.TYPE_FRAME||!this.stage.fresco.hasSelection()&&!e)return;let t=this.selected;if(!this.stage.fresco.hasSelection()&&!t.hasMask())return;let s=a.Nw(t.canvas.width,t.canvas.height),i=s.getContext("2d");return this.stage.fresco.hasSelection()&&i.drawImage(this.stage.fresco.selection.mask,-t.rect.x,-t.rect.y),e&&t.hasMask()&&(i.save(),this.stage.fresco.hasSelection()&&(i.globalCompositeOperation="destination-in"),i.drawImage(this.selected.mask,0,0),i.restore()),i=void 0,s},this.setContent('\n            <label class="split">Color<div id="drop-shadow-color"></div></label>\n            <div id="drop-shadow-opacity" class="range-box top-15"></div>\n            <div id="drop-shadow-blur" class="range-box top-10"></div>\n            <div id="drop-shadow-offset-x" class="range-box top-10"></div>\n            <div id="drop-shadow-offset-y" class="range-box top-10"></div>\n        '),this.color=new c.A("drop-shadow-color",r.A.fromHEX("#000000"),this.change,this.change),this.opacitySlider=new o.A("drop-shadow-opacity",{label:(0,i.A)("opacity"),defaultValue:.5,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onChange:()=>this.change()}),this.blurSlider=new o.A("drop-shadow-blur",{label:(0,i.A)("blur"),defaultValue:5,range:[0,150],step:1,labelFormat:e=>`${e}px`,onChange:()=>this.change()}),this.offsetXSlider=new o.A("drop-shadow-offset-x",{label:(0,i.A)("offsetX"),defaultValue:20,range:[-100,100],step:1,labelFormat:e=>`${e}px`,onChange:()=>this.change()}),this.offsetYSlider=new o.A("drop-shadow-offset-y",{label:(0,i.A)("offsetY"),defaultValue:20,range:[-100,100],step:1,labelFormat:e=>`${e}px`,onChange:()=>this.change()}),this.selected=e.fresco.getSelected();const t=new n.A(0,0,e.fresco.width,e.fresco.height),s=this.selected.settings.locked&&this.selected.rect.equalTo(t)?0:150;let l=this.createCombinationMask(!1),p=!1;if(l){this.cache=a.oM(this.selected.canvas);var u=this.cache.getContext("2d");u.save(),u.globalCompositeOperation="destination-in",u.drawImage(l,0,0),u.restore(),u=null,p=!0}else this.cache=this.selected.canvas;const m=(this.selected.trim&&this.selected instanceof d.A?this.selected.getGlobalTrim():this.selected.rect).pad(s);if(s>0){const e=a.Nw(m.width,m.height);e.getContext("2d").drawImage(this.cache,s,s),this.cache=e}this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,m,p?"over":"replace"),this.scratch.settings.blendmode=this.selected.settings.blendmode,this.scratch.settings.opacity=this.selected.settings.opacity,this.position(),this.change()}}},15923:(e,t,s)=>{s.d(t,{A:()=>m});var i=s(42268),a=s(21742),n=s(54738),r=s(7324),o=s(40963),h=s(82042),c=s(26806),l=s(15818),d=s(29755),p=s(66827),u=s(58489);class m extends c.A{constructor(e){super((0,a.A)("titleFill"),!1),this.cancel=()=>{this.cleanUp()},this.updatePreserve=()=>{(0,i.Ay)("filler-preserve").checked&&this.selected.rect&&this.selected.canvas?this.scratch.setTarget(this.selected.id,this.selected.rect,"over"):this.scratch.setTarget(this.selected.id,new o.A(0,0,this.stage.fresco.width,this.stage.fresco.height),"over"),this.update()},this.update=()=>{var e,t;this.selected instanceof u.A||(this.scratch||(this.scratch=this.stage.fresco.addScratch(),(0,i.Ay)("filler-preserve").checked&&this.selected.rect&&this.selected.canvas?this.scratch.setTarget(this.selected.id,this.selected.rect,"over"):this.scratch.setTarget(this.selected.id,new o.A(0,0,this.stage.fresco.width,this.stage.fresco.height),"over")),this.scratch.clear(),this.scratch.settings.blendmode=(0,i.Ay)("filler-blend-mode").value,this.selected.rect&&this.selected.canvas&&(0,i.Ay)("filler-preserve").checked?(this.scratch.ctx.save(),null===(t=this.fillPod.getFill())||void 0===t||t.addToCanvasFillStyle(this.scratch.ctx),this.scratch.ctx.fillRect(0,0,this.scratch.canvas.width,this.scratch.canvas.height),this.scratch.ctx.globalCompositeOperation="destination-in",this.scratch.ctx.drawImage(this.selected.canvas,0,0),this.scratch.ctx.restore()):(null===(e=this.fillPod.getFill())||void 0===e||e.addToCanvasFillStyle(this.scratch.ctx),this.scratch.ctx.fillRect(0,0,this.scratch.canvas.width,this.scratch.canvas.height)),this.scratch.applySelection(this.stage),window.requestAnimationFrame(()=>this.stage.render()))},this.apply=()=>{var e;if(this.selected instanceof u.A){const t=this.selected.trim.clone(),s=n.oM(this.selected.canvas);let a=this.selected.canvas.getContext("2d");a.save(),a.globalAlpha=this.opacity.getValue(),a.globalCompositeOperation=(0,i.Ay)("filler-blend-mode").value,null===(e=this.fillPod.getFill())||void 0===e||e.addToCanvasFillStyle(this.scratch.ctx),a.fillRect(0,0,this.selected.canvas.width,this.selected.canvas.height),a.restore(),this.stage.history.add({type:"bitmapSwitch",kind:"fill",layer:this.selected,rect:t,canvas:s}),this.selected.render()}else{let e=n.TL(this.scratch.getCanvas());if(e&&e.width>0&&e.height>0){const t=this.selected.rect.clone(),s=n.oM(this.selected.canvas);this.selected.extendCanvas(e),this.scratch.drawToLayer(this.selected,(0,i.Ay)("filler-blend-mode").value,this.opacity.getValue()),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapSwitch",kind:"fill",layer:this.selected,rect:t,canvas:s})}}window.requestAnimationFrame(()=>this.stage.render()),this.cleanUp()},this.cleanUp=()=>{this.fillPod.cleanUp(),this.stage.coating.freeze(!1),this.stage.fresco.removeScratch(),(0,i.Ay)("filler-preserve").removeEventListener("change",this.updatePreserve),(0,i.Ay)("filler-blend-mode").removeEventListener("change",this.update),document.removeEventListener("keydown",this.keyDown,!1),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),this.selected=void 0,this.dialog.remove(),this.dialog=null,this.modal.remove(),this.modal=null},this.stage=e,this.stage.coating.freeze(!0),this.selected=this.stage.fresco.getSelected(),this.setContent(`\n\n            <label class="split">${(0,a.A)("fill")}\n                <div id="filler-fill"></div>\n            </label>\n            <label id="filler-blend-mode-holder" class="split top-10">${(0,a.A)("blendMode")}\n                <div class="select top-0" style="width:auto">\n                    <select id="filler-blend-mode">\n                        <option value="source-over" selected>${(0,a.A)("blendModeNone")}</option>\n                        <option value="multiply">${(0,a.A)("blendModeMultiply")}</option>\n                        <option value="screen">${(0,a.A)("blendModeScreen")}</option>\n                        <option value="overlay">${(0,a.A)("blendModeOverlay")}</option>\n                        <option value="darken">${(0,a.A)("blendModeDarken")}</option>\n                        <option value="lighten">${(0,a.A)("blendModeLighten")}</option>\n                        <option value="color-dodge">${(0,a.A)("blendModeColorDodge")}</option>\n                        <option value="color-burn">${(0,a.A)("blendModeColorBurn")}</option>\n                        <option value="hard-light">${(0,a.A)("blendModeHardLight")}</option>\n                        <option value="soft-light">${(0,a.A)("blendModeSoftLight")}</option>\n                        <option value="difference">${(0,a.A)("blendModeDifference")}</option>\n                        <option value="exclusion">${(0,a.A)("blendModeExclusion")}</option>\n                        <option value="hue">${(0,a.A)("blendModeHue")}</option>\n                        <option value="saturation">${(0,a.A)("blendModeSaturation")}</option>\n                        <option value="color">${(0,a.A)("blendModeColor")}</option>\n                        <option value="luminosity">${(0,a.A)("blendModeLuminosity")}</option>\n                    </select>\n                </div>\n            </label>\n\n            <div id="filler-opacity" class="range-box top-20"></div>\n\n            <div id="filler-preserve-holder">\n                <input type="checkbox" checked id="filler-preserve" />\n                <label class="switch top-16" for="filler-preserve">${(0,a.A)("preserveTransparency")}<span></span></label>\n            </div>\n        `),this.fillPod=new p.A("filler-fill",new r.A(l.A.fromHEX(d.Ay.mainColor)),this.update,this.update),(0,i.Ay)("filler-preserve").addEventListener("change",this.updatePreserve),(0,i.Ay)("filler-blend-mode").addEventListener("change",this.update),this.opacity=new h.A("filler-opacity",{label:(0,a.A)("opacity"),defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onChange:e=>{this.scratch.settings.opacity=e,window.requestAnimationFrame(()=>this.stage.render())}}),this.selected.rect&&this.selected.canvas||((0,i.Ay)("filler-blend-mode-holder").style.display="none",(0,i.Ay)("filler-preserve-holder").style.display="none"),this.update()}}},16040:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(2215),a=s(82042),n=s(42268),r=s(21742),o=s(54738);class h extends i.A{constructor(e){super(e,(0,r.A)("titleWave")),this.update=()=>{o.sg("wave",50,()=>{const e=Number(document.querySelector('input[name="type"]:checked').value),t=Number(document.querySelector('input[name="edge-approx"]:checked').value),s={type:e,amplitude:this.amplitude.getValue(),scale:Math.max(.01,this.scale.getValue()),rotate:this.rotate.getValue()*(Math.PI/1.8),edgeApprox:t};this.change("wave",s.amplitude?s:void 0)})},this.setContent(`\n            <label>${(0,r.A)("type")}</label>\n            <div class="switch-field top-5">\n                <input type="radio" id="type-sine" name="type" value="0" checked/><label for="type-sine">${(0,r.A)("round")}</label>\n                <input type="radio" id="type-triangle" name="type" value="1"/><label for="type-triangle">${(0,r.A)("triangle")}</label>\n                <input type="radio" id="type-square" name="type" value="2"/><label for="type-square">${(0,r.A)("square")}</label>\n            </div>\n\n            <div id="wave-amplitude" class="range-box top-20"></div>\n            <div id="wave-scale" class="range-box"></div>\n            <div id="wave-rotate" class="range-box"></div>\n\n            <label class="split top-35">${(0,r.A)("edgeFill")}</label>\n            <div class="switch-field top-5" id="wave-edge-approx">\n                <input type="radio" id="edge-approx-none" name="edge-approx" value="0" checked/><label for="edge-approx-none">${(0,r.A)("none")}</label>\n                <input type="radio" id="edge-approx-reflect" name="edge-approx" value="1"/><label for="edge-approx-reflect">${(0,r.A)("reflect")}</label>\n                <input type="radio" id="edge-approx-repeat" name="edge-approx" value="2"/><label for="edge-approx-repeat">${(0,r.A)("repeat")}</label>\n            </div>\n        `),this.amplitude=new a.A("wave-amplitude",{label:(0,r.A)("amplitude"),range:[-.5,.5],step:.01,defaultValue:.05,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.scale=new a.A("wave-scale",{label:(0,r.A)("scale"),range:[1,30],step:1,defaultValue:1,labelFormat:e=>String(e),onChange:e=>this.update()}),this.rotate=new a.A("wave-rotate",{label:(0,r.A)("rotate"),step:.01,range:[-.9,.9],defaultValue:0,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),(0,n.Ay)("type-sine").addEventListener("change",this.update,!1),(0,n.Ay)("type-triangle").addEventListener("change",this.update,!1),(0,n.Ay)("type-square").addEventListener("change",this.update,!1),(0,n.Ay)("edge-approx-none").addEventListener("change",this.update,!1),(0,n.Ay)("edge-approx-reflect").addEventListener("change",this.update,!1),(0,n.Ay)("edge-approx-repeat").addEventListener("change",this.update,!1),this.update()}}},16309:(e,t,s)=>{s.d(t,{Ay:()=>o,mR:()=>n});var i=s(54738),a=s(15818);class n{constructor(e,t,s=135,i="linear"){this.colors=e,this.positions=t,this.direction=s,this.type=i,this.toCSS=()=>{let e="linear-gradient("+this.direction+"deg";for(let t=0;t<this.colors.length;++t)e+=", "+a.A.fromHEXA(this.colors[t]).toRGBA()+" "+(100*this.positions[t]).toFixed(0)+"%";return e+=")",e}}}class r{constructor(e,t,s){this.id=e,this.color=t,this.position=s}}class o{constructor(){this.direction=0,this.type="linear",this.addStop=(e,t)=>{t=i.qE(t,0,1);const s=new r(i.r0(),e,t);return this.stops.push(s),this.sort(),s},this.removeStop=e=>{const t=this.stops.findIndex(t=>t.id===e);return-1!==t&&this.stops.splice(t,1),this.sort(),this.stops[0].id},this.getStop=e=>{let t;return this.stops.forEach(s=>{s.id===e&&(t=s)}),t},this.sort=()=>{this.stops.sort((e,t)=>e.position-t.position)},this.toCSS=()=>{let e="linear-gradient(to right";for(let t=0;t<this.stops.length;++t)e+=", "+this.stops[t].color.toRGBA()+" "+(100*this.stops[t].position).toFixed(0)+"%";return e+=")",e},this.toJSON=()=>JSON.stringify(this.toIGradient()),this.toIGradient=()=>{let e=new Array;return this.stops.forEach(t=>{e.push({id:t.id,color:t.color.toHEXA(),position:t.position})}),{type:this.type,direction:this.direction,stops:e}},this.createCanvasGradient=(e,t=0,s=0)=>{let i;if("linear"===this.type){const a=(this.direction-90)*Math.PI/180,n=e.canvas.width,r=e.canvas.height;if(n<1||r<1)return;const o=Math.sqrt(n*n+r*r)/2,h=Math.asin(r/2/o);let c=(a%(2*Math.PI)+4*Math.PI)%(2*Math.PI);c>Math.PI&&(c-=Math.PI),c>Math.PI/2&&c<=Math.PI&&(c=Math.PI/2-(c-Math.PI/2));let l=Math.PI/2-h-Math.abs(c),d=Math.abs(h-Math.abs(c)),p=Math.max(Math.cos(d)*n,Math.cos(l)*r)/2,u=Math.cos(a)*p,m=Math.sin(a)*p;i=e.createLinearGradient(n/2+u+t,r/2+m+s,n/2-u+t,r/2-m+s)}else{let a=e.canvas.width/2,n=e.canvas.height/2,r=Math.max(e.canvas.width,e.canvas.height)/2;i=e.createRadialGradient(a+t,n+s,0,a+t,n+s,r)}return this.addStopToCanvasGradient(i),i},this.addStopToCanvasGradient=(e,t=!1)=>{for(let s=0;s<this.stops.length;++s)e.addColorStop(this.stops[s].position,this.stops[s].color.toRGBA(t?255-this.stops[s].color.a:this.stops[s].color.a))},this.stops=new Array}static fromJSON(e){let t=JSON.parse(e);return o.fromIGradient(t)}static fromIGradient(e){const t=new o;if(t.type=e.type&&"radial"===e.type?"radial":"linear",t.direction=e.direction,e.stops)for(let s=0;s<e.stops.length;++s){let i="string"==typeof e.stops[s].color?a.A.fromHEXA(e.stops[s].color):new a.A(e.stops[s].color.r,e.stops[s].color.g,e.stops[s].color.b,e.stops[s].color.a);t.addStop(i,e.stops[s].position)}return t}static fromPreset(e){const t=new o;for(let s=0;s<e.colors.length;++s)t.addStop(a.A.fromHEXA(e.colors[s]),e.positions[s]);return t.direction=e.direction+180,t.type=e.type,t}static fromColors(e,t){const s=new o;return s.addStop(e,0),s.addStop(t,1),s}}},16377:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(42268),a=s(21742),n=s(63306),r=s(26806),o=s(93771);class h extends r.A{constructor(e,t=!0){super((0,a.A)("dialogOpenURLTitle")),this.apply=async()=>{let e=(0,i.Ay)("image-url").value;if(this.cleanUp(),""!==e){const t=e.substring(e.lastIndexOf("/")+1);e="https://pixlr.com/proxy/?url="+encodeURIComponent(e);const s=new n.A({title:t});let i=await s.load(e);o.Tq(i,this.stage,this.askToAdd)}},this.stage=e,this.askToAdd=t,this.setContent(`\n            <label>${(0,a.A)("dialogOpenURLHeadline")}</label>\n            <input type="url" id="image-url" style="width: 100%" placeholder='https://example.com/this-image.jpg' />\n        `),(0,i.Ay)("dialog-apply"+this.mid).innerText=(0,a.A)("load"),setTimeout(()=>{(0,i.Ay)("image-url").focus()},300)}}},16499:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(42268),a=s(21742),n=s(26806),r=s(29755);class o extends n.A{constructor(e){super((0,a.A)("titlePreferences"),!0),this.stage=e,this.getLanguage=()=>{const e=location.pathname.split("/");return e[1]&&2===e[1].length?e[1]:"us"},this.setLanguage=e=>{const t=location.pathname.split("/");t[1]&&2===t[1].length?t[1]=e:t.splice(1,0,e),location.href=t.join("/")},this.dialog.style.maxWidth="440px",this.setContent(`\n\n                <label class="split" for="settings-language">${(0,a.A)("language")}\n                <div class="select top-0" style="width:auto">\n                    <select id="settings-language">\n                        <option value="us">English</option>\n                        <option value="id">Bahasa Indonesia</option>\n                        <option value="ml">Bahasa Melayu</option>\n                        <option value="cz">etina</option>\n                        <option value="dk">Dansk</option>\n                        <option value="de">Deutsch</option>\n                        <option value="es">Espaol</option>\n                        <option value="ph">Filipino</option>\n                        <option value="fr">Franais</option>\n                        <option value="hr">Hrvatski</option>\n                        <option value="it">Italiano</option>\n                        <option value="nl">Nederlands</option>\n                        <option value="no">Norsk</option>\n                        <option value="pl">Polski</option>\n                        <option value="pt">Portugus</option>\n                        <option value="br">Portugus (Brasileiro)</option>\n                        <option value="ro">Romanian</option>\n                        <option value="rs"></option>\n                        <option value="ru"></option>\n                        <option value="fi">Suomi</option>\n                        <option value="se">Svenska</option>\n                        <option value="tr">Trke</option>\n                        <option value="vn">Ting Vit</option>\n                        <option value="th"></option>\n                        <option value="gr"></option>\n                        <option value="kr"></option>\n                        <option value="jp"></option>\n                        <option value="cn"></option>\n                        <option value="tw"></option>\n                    </select> \n                </div>\n            </label>\n\n            <div class="splitter small top-10"></div>\n\n            <label class=" top-10">${(0,a.A)("viewOBarAccent")}</label>\n            <div id="preference-accent" class="top-4 color-pod-list" style="gap:3px;">\n                <div class="color-pod small" data="ash" style="background-color:#383E42"></div>\n                <div class="color-pod small" data="brown" style="background-color:#715649"></div>\n                <div class="color-pod small" data="coral" style="background-color:#F3764C"></div>\n                <div class="color-pod small" data="pink" style="background-color:#F17686"></div>\n                <div class="color-pod small" data="rose" style="background-color:#FE5151"></div>\n                <div class="color-pod small" data="red" style="background-color:#BA2B46"></div>\n                <div class="color-pod small" data="plum" style="background-color:#5A354F"></div>\n                <div class="color-pod small" data="maroon" style="background-color:#A82068"></div>\n                <div class="color-pod small" data="purple" style="background-color:#7D4199"></div>\n                <div class="color-pod small" data="lavender" style="background-color:#6D5DD2"></div>\n                <div class="color-pod small" data="denim" style="background-color:#496171"></div>\n                <div class="color-pod small" data="blue" style="background-color:#0099CC"></div>\n                <div class="color-pod small" data="teal" style="background-color:#00A5A5"></div>\n                <div class="color-pod small" data="green" style="background-color:#48B07B"></div>\n                <div class="color-pod small" data="lime" style="background-color:#95C20F"></div>\n                <div class="color-pod small" data="mustard" style="background-color:#F5BB00"></div>\n            </div>\n\n            <label class="top-16">${(0,a.A)("viewOBarWorkspace")}</label>\n            <div id="preference-workspace" class="color-selector-presets extended top-4" style="width:200px">\n                <div data="dark" class="color-pod square" style="background-color: #232529"></div>\n                <div data="iron" class="color-pod square" style="background-color: #606060"></div>\n                <div data="steel" class="color-pod square" style="background-color: #999999"></div>\n                <div data="light" class="color-pod square" style="background-color: #cccccc"></div>\n            </div>\n\n            <a id="preference-theme-reset" class="link top-20" style="display:inline-block;">${(0,a.A)("reset")}</a>\n\n            <div class="splitter small top-16"></div>\n\n            <input type="checkbox" id="setting-performance-mode" />\n            <label class="switch top-16" for="setting-performance-mode">${(0,a.A)("viewOBarPerformanceMode")}<span></span></label>\n\n            <input type="checkbox" id="setting-use-legacy-save" />\n            <label class="switch top-10" for="setting-use-legacy-save">${(0,a.A)("viewOBarUseLegacySave")}<span></span></label>\n\n            <input type="checkbox" id="setting-ask-preresize" />\n            <label class="switch top-20" for="setting-ask-preresize">${(0,a.A)("viewOBarAskPrerezise")}<span></span></label>\n            <input type="checkbox" id="setting-guides" />\n            <label class="switch top-10" for="setting-guides">${(0,a.A)("viewOBarShowGu")}<span></span></label>\n            <input type="checkbox" id="settings-snap-to" />\n            <label class="switch top-10" for="settings-snap-to">${(0,a.A)("viewOBarSnap")}<span></span></label>\n\n            <label class="split top-10" for="settings-scroll-mode">${(0,a.A)("viewOBarScollMode")}\n                <div class="select top-0" style="width:auto">\n                    <select id="settings-scroll-mode">\n                        <option value="zoom">${(0,a.A)("zoom")}</option>\n                        <option value="move">${(0,a.A)("move")}</option>\n                        <option value="none">${(0,a.A)("none")}</option>\n                    </select> \n                </div>\n            </label>\n        `);let t=r.Ay.accent,s=(0,i.Ay)("preference-accent").getElementsByTagName("div");for(var n=0;n<s.length;n+=1)s[n].addEventListener("click",e=>{document.documentElement.classList.remove(t),t=e.currentTarget.getAttribute("data"),document.documentElement.classList.add(t),document.dispatchEvent(new CustomEvent("layerlist-update")),(0,r.ZC)("accent",t)});let o=r.Ay.workspace,h=(0,i.Ay)("preference-workspace").getElementsByTagName("div");for(n=0;n<h.length;n+=1)h[n].addEventListener("click",e=>{document.documentElement.classList.remove(o),o=e.currentTarget.getAttribute("data"),document.documentElement.classList.add(o),(0,r.ZC)("workspace",o),this.stage.createBGPattern(),this.stage.render()});(0,i.Ay)("preference-theme-reset").addEventListener("click",()=>{(0,r.ZC)("workspace","default"),(0,r.ZC)("accent","default"),document.documentElement.className="",this.stage.createBGPattern(),this.stage.render()});const c=(0,i.Ay)("settings-language");c.value=this.getLanguage(),c.onchange=()=>this.setLanguage(c.value);const l=(0,i.Ay)("setting-performance-mode");l.checked=r.Ay.performanceMode,l.onchange=()=>(0,r.ZC)("performanceMode",l.checked);const d=(0,i.Ay)("setting-use-legacy-save");d.checked=r.Ay.useLegacySave,d.onchange=()=>(0,r.ZC)("useLegacySave",d.checked);const p=(0,i.Ay)("setting-ask-preresize");p.checked=r.Ay.askToPreResize,p.onchange=()=>(0,r.ZC)("askToPreResize",p.checked);const u=(0,i.Ay)("setting-guides");u.checked=r.Ay.showGuides,u.onchange=()=>(0,r.ZC)("showGuides",u.checked);const m=(0,i.Ay)("settings-snap-to");m.checked=r.Ay.snapToGuides,m.onchange=()=>(0,r.ZC)("snapToGuides",m.checked);const g=(0,i.Ay)("settings-scroll-mode");g.value=r.Ay.scrollMode,g.onchange=()=>(0,r.ZC)("scrollMode",g.value),(0,i.Ay)("dialog-apply"+this.mid).style.display="none",(0,i.Ay)("dialog-cancel"+this.mid).innerText=(0,a.A)("close")}}},17092:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentLinkRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentLinkRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"allowedPaymentMethods",baseName:"allowedPaymentMethods",type:"Array<string>"},{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"billingAddress",baseName:"billingAddress",type:"Address"},{name:"blockedPaymentMethods",baseName:"blockedPaymentMethods",type:"Array<string>"},{name:"captureDelayHours",baseName:"captureDelayHours",type:"number"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"dateOfBirth",baseName:"dateOfBirth",type:"string"},{name:"deliverAt",baseName:"deliverAt",type:"Date"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"Address"},{name:"description",baseName:"description",type:"string"},{name:"expiresAt",baseName:"expiresAt",type:"Date"},{name:"installmentOptions",baseName:"installmentOptions",type:"{ [key: string]: InstallmentOption; }"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"manualCapture",baseName:"manualCapture",type:"boolean"},{name:"mcc",baseName:"mcc",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantOrderReference",baseName:"merchantOrderReference",type:"string"},{name:"metadata",baseName:"metadata",type:"{ [key: string]: string; }"},{name:"recurringProcessingModel",baseName:"recurringProcessingModel",type:"PaymentLinkRequest.RecurringProcessingModelEnum"},{name:"reference",baseName:"reference",type:"string"},{name:"requiredShopperFields",baseName:"requiredShopperFields",type:"Array<PaymentLinkRequest.RequiredShopperFieldsEnum>"},{name:"returnUrl",baseName:"returnUrl",type:"string"},{name:"reusable",baseName:"reusable",type:"boolean"},{name:"riskData",baseName:"riskData",type:"RiskData"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"shopperStatement",baseName:"shopperStatement",type:"string"},{name:"showRemovePaymentMethodButton",baseName:"showRemovePaymentMethodButton",type:"boolean"},{name:"socialSecurityNumber",baseName:"socialSecurityNumber",type:"string"},{name:"splitCardFundingSources",baseName:"splitCardFundingSources",type:"boolean"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"store",baseName:"store",type:"string"},{name:"storePaymentMethodMode",baseName:"storePaymentMethodMode",type:"PaymentLinkRequest.StorePaymentMethodModeEnum"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"themeId",baseName:"themeId",type:"string"}],function(e){let t,s,i;!function(e){e.CardOnFile="CardOnFile",e.Subscription="Subscription",e.UnscheduledCardOnFile="UnscheduledCardOnFile"}(t=e.RecurringProcessingModelEnum||(e.RecurringProcessingModelEnum={})),function(e){e.BillingAddress="billingAddress",e.DeliveryAddress="deliveryAddress",e.ShopperEmail="shopperEmail",e.ShopperName="shopperName",e.TelephoneNumber="telephoneNumber"}(s=e.RequiredShopperFieldsEnum||(e.RequiredShopperFieldsEnum={})),function(e){e.AskForConsent="askForConsent",e.Disabled="disabled",e.Enabled="enabled"}(i=e.StorePaymentMethodModeEnum||(e.StorePaymentMethodModeEnum={}))}(s=t.PaymentLinkRequest||(t.PaymentLinkRequest={}))},17096:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(58354),n=s(54738),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleColorLookup")),this.update=n.eD(50,e=>{let t=this.mctx.createLinearGradient(0,0,255,0);e.addStopToCanvasGradient(t),this.mctx.fillStyle=t,this.mctx.fillRect(0,0,this.map.width,this.map.height),this.change("lookup",this.mctx.getImageData(0,0,255,1))}),this.content.style.paddingBottom="0px",this.dialog.style.width="340px",this.dialog.style.maxWidth="340px",this.map=n.Nw(255,1),this.mctx=this.map.getContext("2d"),this.editor=new a.A(this.content,void 0,this.update),this.position()}}},17550:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleSharpen")),this.setContent((0,n.T)("div",{id:"sharpen-slider"})),new a.A("sharpen-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("sharpen",e)})}}},17651:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(54738),a=s(41915),n=s(29755),r=s(42268),o=s(81937);class h{constructor(e,t,s,h){this.resizeStart=e=>{this.d=new a.A(this.container.clientHeight,e.y)},this.resizeMove=e=>{const t=this.d.x+(e.y-this.d.y);this.container.style.height=(t<200?200:t)+"px"},this.populatePresets=()=>{const e=(0,r.Ay)("shape-selector-presets-ss-content");e.style.paddingTop="6px",["M 0,0 H 100 V 100 H 0 Z","m3 0h94c1.66 0 3 1.34 3 3v94c0 1.66-1.34 3-3 3h-94c-1.66 0-3-1.34-3-3v-94c0-1.66 1.34-3 3-3z","m 6,0 h 88 c 3.324,0 6,2.676 6,6 v 88 c 0,3.324 -2.676,6 -6,6 H 6 C 2.676,100 0,97.324 0,94 V 6 C 0,2.676 2.676,0 6,0 Z","m 10,0 h 80 c 5.54,0 10,4.46 10,10 v 80 c 0,5.54 -4.46,10 -10,10 H 10 C 4.46,100 0,95.54 0,90 V 10 C 0,4.46 4.46,0 10,0 Z","m 20,0 h 60 c 11.08,0 20,8.92 20,20 v 60 c 0,11.08 -8.92,20 -20,20 H 20 C 8.92,100 0,91.08 0,80 V 20 C 0,8.92 8.92,0 20,0 Z","M 0,50 C 0,0 0,0 50,0 c 50,0 50,0 50,50 0,50 0,50 -50,50 C 0,100 0,100 0,50","m80 0c11.1 0 20 8.92 20 20v80h-80c-11.1 0-20-8.92-20-20v-80h80z","m80 100c11.1 0 20-8.92 20-20v-80h-80c-11.1 0-20 8.92-20 20v80h80z","m 100,50.000001 c 0,0 -3.52,6.8 -3.52,22.281 0,15.078 -5.18,18.578 -5.446,18.75 -0.144,0.228 -3.604,5.451 -18.753,5.451 C 56.8,96.482001 50,100 50,100 c 0,0 -6.801,-3.517999 -22.282,-3.517999 -15.131,0 -18.603,-5.217 -18.752,-5.45 -0.256,-0.164 -5.448,-3.65 -5.448,-18.751 C 3.518,56.8 0,50 0,50 0,50 3.518,43.200001 3.518,27.718001 3.518,12.594 8.729,9.118 8.968,8.966 8.971,8.961 8.975,8.955 8.982,8.945 9.293,8.48 12.96,3.518 27.719,3.518 43.199,3.518 50,0 50,0 c 0,0 6.828,3.518 22.309,3.518 14.756,0 18.425,4.962 18.736,5.427 v 0 0 c 0,0 5.435,3.892001 5.435,18.773 0,15.483 3.52,22.282 3.52,22.282001 z","m 11.538461,11.538461 c 15.384615,-15.3846148 61.538462,-15.3846148 76.923076,0 15.384613,15.384615 15.384613,61.538464 0,76.923079 -15.384614,15.38461 -61.538461,15.38461 -76.923076,0 -15.3846147,-15.384615 -15.3846147,-61.538464 0,-76.923079","M 0,50 C 0,14.5 14.500003,0 50,0 85.5,0 100,14.5 100,50 100,85.5 85.5,100 50,100 14.500003,100 0,85.5 0,50","m100 50a50 50 0 0 1-50 50 50 50 0 0 1-50-50 50 50 0 0 1 50-50 50 50 0 0 1 50 50z","m7.58 76.5 8.5-5.3c1.6 2.5 3.4 4.9 5.6 7.1 2.2 2.2 4.6 4.1 7.1 5.6l-5.3 8.5c16.2 10.1 36.8 10.1 53 0l-5.3-8.5c2.5-1.6 4.9-3.4 7.1-5.6 2.2-2.2 4.1-4.6 5.6-7.1l8.5 5.3c10.1-16.2 10.1-36.8 0-53l-8.5 5.3c-1.6-2.5-3.4-4.9-5.6-7.1-2.2-2.2-4.6-4.1-7.1-5.6l5.3-8.5c-16.2-10.1-36.8-10.1-53 0l5.3 8.5c-2.5 1.6-4.9 3.4-7.1 5.6-2.2 2.2-4.1 4.6-5.6 7.1l-8.5-5.3c-10.1 16.2-10.1 36.8 0 53z","m 80.100004,19.9 c -6.2,-6.2 -13.8,-9.9999998 -21.7,-11.5999998 L 50.000004,0 l -8.3,8.3000002 c -8,1.6 -15.6,5.4999998 -21.7,11.5999998 -6.1,6.1 -10.1,13.8 -11.7,21.8 L 0,50 8.300004,58.3 c 1.6,8 5.5,15.6 11.6,21.7 6.2,6.2 13.8,10 21.7,11.6 l 8.4,8.4 8.3,-8.3 c 8,-1.6 15.6,-5.5 21.7,-11.6 6.2,-6.2 10,-13.8 11.6,-21.7 L 100,50 91.700004,41.7 c -1.6,-8 -5.5,-15.6 -11.6,-21.8 z","M 31.278462,0.01959957 C 23.186769,-0.27097901 15.000275,2.6696037 8.8346993,8.8330525 -2.1173026,19.781307 -2.8922296,37.108219 6.5404597,48.953281 c 0.2422598,0.315753 0.3671413,0.681873 0.3705912,1.047372 -0.00343,0.3655 -0.1283314,0.73162 -0.3705912,1.047373 -9.4326893,11.845059 -8.6577623,29.171972 2.2942396,40.120231 10.9610277,10.957253 28.3079167,11.724463 40.1575537,2.269882 0.309131,-0.23713 0.666341,-0.332857 1.024148,-0.330053 0.366744,0.0034 0.734111,0.110187 1.051116,0.353625 11.847133,9.426729 29.131837,8.654389 40.083427,-2.293454 10.943446,-10.939723 11.751726,-28.273568 2.341393,-40.120231 -0.242377,-0.315753 -0.367656,-0.681856 -0.370591,-1.047373 0.0034,-0.365516 0.12816,-0.731619 0.370591,-1.047372 C 102.90267,37.106616 102.09439,19.772771 91.150944,8.8330525 80.199354,-2.1147875 62.91465,-2.8871348 51.067517,6.5395994 50.750512,6.7830358 50.383145,6.8897696 50.016401,6.8932183 49.658594,6.8966464 49.301384,6.8002786 48.992253,6.5631705 43.808027,2.4268049 37.571993,0.24560339 31.278462,0.01959957 Z","m87.074 36.937h-5.1102l3.6072-3.6036c5.1102-5.1051 5.1102-13.413 0-18.619-5.1102-5.2052-13.427-5.1051-18.637 0l-3.6072 3.6036v-5.1051c-0.1002-7.3073-5.9118-13.213-13.226-13.213s-13.126 5.9059-13.126 13.113v5.1051l-3.6072-3.6036c-5.1102-5.1051-13.427-5.1051-18.637 0-5.2104 5.1051-5.1102 13.413 0 18.619l3.6072 3.6036h-5.1102c-7.3146 0.1001-13.226 5.9059-13.226 13.213s5.9118 13.113 13.126 13.113h5.1102l-3.6072 3.6036c-5.1102 5.1051-5.1102 13.413 0 18.619 5.1102 5.1051 13.427 5.1051 18.637 0l3.6072-3.6036v5.1051c0 7.3073 5.9118 13.113 13.126 13.113 7.2144 0 13.126-5.9059 13.126-13.113v-5.1051l3.6072 3.6036c5.1102 5.1051 13.427 5.1051 18.637 0 5.1102-5.1051 5.1102-13.413 0-18.619l-3.6072-3.6036h5.1102c7.3146 0 13.126-5.9059 13.126-13.113s-5.7114-13.113-12.926-13.113z","m86.987 36.903h-0.4004c-1.7017 0-2.6026-2.1009-1.4014-3.3014 4.9049-4.9021 5.5055-12.806 1.1011-18.008-5.005-6.0026-14.014-6.3027-19.419-0.90039l-0.3003 0.30013c-1.2012 1.2005-3.3033 0.40017-3.3033-1.4006v-0.10004c0-6.8029-4.9049-12.706-11.712-13.406-7.9079-0.90039-14.615 5.3023-14.615 13.106v0.40017c0 1.7007-2.1021 2.6011-3.3033 1.4006-4.9049-4.9021-12.813-5.5024-18.018-1.1005-6.006 5.0022-6.3063 14.006-0.9009 19.408l0.3003 0.30013c1.2012 1.2005 0.4004 3.3014-1.4014 3.3014h-0.4004c-7.3073 0-13.213 5.8025-13.213 13.106s5.9059 13.106 13.113 13.106h0.4004c1.7017 0 2.6026 2.1009 1.4014 3.3014l-0.3003 0.30013c-5.4054 5.4023-5.1051 14.306 0.9009 19.408 5.3053 4.4019 13.213 3.8016 18.018-1.1005 1.2012-1.2005 3.3033-0.40017 3.3033 1.4006v0.40017c0 7.7033 6.7067 13.906 14.615 13.106 6.7067-0.7003 11.712-6.7029 11.712-13.406v-0.10004c0-1.7007 2.1021-2.6011 3.3033-1.4006l0.3003 0.30013c5.4054 5.4023 14.314 5.1022 19.419-0.90039 4.4044-5.3023 3.8038-13.206-1.1011-18.008-1.2012-1.2005-0.4004-3.3014 1.4014-3.3014h0.4004c7.3073 0 13.113-5.9026 13.113-13.106 0-7.2031-5.8058-13.106-13.013-13.106z","m 50.094148,0 c -2.77536,0 -5.553405,0.64778966 -8.038073,1.9436751 -4.969341,2.5917545 -8.12526,7.3889096 -8.12526,12.5724349 v 7.453361 c 0,0.578822 -0.337936,1.109289 -0.889248,1.398692 -0.551335,0.289419 -1.220173,0.289419 -1.771503,0 L 24.103777,19.55012 C 19.134436,16.958365 13.003954,16.956091 8.034594,19.546895 3.0652529,22.138666 0,26.935805 0,32.11933 c 0,5.183526 3.0652529,9.980681 8.034594,12.572435 l 7.372024,3.909398 c 0.551335,0.289402 0.889252,0.819867 0.889252,1.398693 0,0.578822 -0.34142,1.109269 -0.892736,1.398689 L 8.017166,55.27643 C 3.047806,57.868183 0,62.696853 0,67.88038 c 0,5.183523 3.0687318,9.980663 8.0380919,12.572433 4.9693411,2.591774 11.0963441,2.591757 16.0656851,0 l 7.270897,-3.821188 c 0.551331,-0.28942 1.223686,-0.28942 1.775002,0 0.551349,0.289402 0.781158,0.816711 0.781139,1.395533 v 7.4566 c 0,5.183527 3.159398,9.98068 8.128739,12.572437 2.464461,1.285337 5.187223,1.933208 7.940444,1.943659 2.798399,0.01131 5.627343,-0.637226 8.132242,-1.943659 4.969341,-2.591757 8.031091,-7.38891 8.031091,-12.572437 L 66.069191,78.0304 c -0.0071,-0.578792 0.233307,-1.109291 0.784623,-1.398693 0.55133,-0.28942 1.220187,-0.28942 1.771518,0 l 7.270897,3.814881 c 4.969341,2.59177 11.099823,2.59177 16.069183,0 C 96.934748,77.854835 100,73.057677 100,67.874155 c 0,-5.183527 -3.065252,-9.97752 -8.034593,-12.56929 l -7.372024,-3.909398 c -0.551335,-0.289403 -0.889252,-0.816712 -0.889252,-1.395533 0,-0.578822 0.34142,-1.109274 0.892736,-1.398689 L 91.986314,44.72336 C 96.955712,42.131607 100,37.302935 100,32.11941 c 0,-5.183526 -3.065252,-9.980665 -8.034593,-12.572436 -4.96936,-2.59177 -11.099842,-2.589496 -16.069183,0.0032 l -7.166287,3.818043 c -0.55133,0.289419 -1.220168,0.289419 -1.771504,0 -0.553971,-0.290258 -0.889247,-0.819951 -0.889247,-1.398772 v -7.45336 c 0,-5.1835253 -2.971084,-9.9806804 -7.940444,-12.5724349 C 55.644069,0.64778966 52.869527,0 50.094148,0 Z","m91.1 35c-5.89-2.87-9.49-9.71-8.79-16.8 1.4-14.2-13.1-23.5-23.5-15-5.2 4.19-12.3 4.19-17.6 0-10.4-8.39-25 0.883-23.6 15 0.699 7.06-2.9 13.9-8.79 16.8-11.8 5.74-11.8 24.3 0.0999 30 5.89 2.87 9.49 9.71 8.79 16.8-1.4 14.1 13.1 23.4 23.6 15 5.2-4.19 12.3-4.19 17.6 0 10.4 8.39 25-0.883 23.6-15-0.699-7.06 2.9-13.9 8.79-16.8 11.7-5.74 11.7-24.3-0.2-30z","m3.17 48.6 11.9 12.1c2.5 2.5 3.6 6.04 3 9.57l-2.8 17.1c-1.5 8.85 7.5 15.6 15.1 11.4l14.8-8.12c3-1.67 6.7-1.67 9.7 0l14.8 8.12c7.6 4.16 16.6-2.6 15.1-11.4l-2.8-17.1c-0.6-3.54 0.5-7.08 3-9.57l11.9-12.1c6.2-6.24 2.8-17.2-5.8-18.5l-16.5-2.5c-3.4-0.52-6.3-2.71-7.8-5.93l-7.4-15.6c-3.9-8.01-14.9-8.01-18.7 0l-7.4 15.6c-1.5 3.23-4.4 5.41-7.8 5.93l-16.6 2.5c-8.5 1.25-11.9 12.2-5.7 18.5z","m32 0v32h-32v36h32v32h36v-32h32v-36h-32v-32h-36z","m34 0v34h-34v32h34v34h32v-34h34v-32h-34v-34h-32z","m36 0v36h-36v28h36v36h28v-36h36v-28h-36v-36h-28z","m38 0v38h-38v24h38v38h24v-38h38v-24h-38v-38h-24z","m100 99.9-50-35.8-49.9 35.9 35.8-50-35.9-49.9 50 35.8 49.9-35.9-35.8 50z","m100 100-50-28.8-50 28.8 28.8-50-28.8-50 50 28.8 50-28.8-28.8 50z","M 49.999984,0 C 45.722878,0 41.617373,1.6978034 38.592988,4.7221408 35.56864,7.7464783 33.8708,11.851959 33.8708,16.129017 v 10.817782 c 0,0.536631 -0.264632,1.034533 -0.708796,1.335693 C 32.71784,28.583556 32.157866,28.64491 31.659343,28.4463 28.200473,27.227976 25.094977,26.165382 21.110455,24.796091 16.086103,23.159917 10.543614,24.078997 6.3094312,27.327976 1.7398721,30.834282 -0.61368155,36.514793 0.13813101,42.225271 0.88981729,47.934817 4.6342391,52.819843 9.9542542,55.02452 l 12.8340388,4.624495 c 0.454071,0.188081 0.796007,0.570582 0.932461,1.042725 0.136616,0.47213 0.05049,0.975225 -0.233116,1.376628 l -9.469586,11.983363 c -0.0016,0.0032 -0.0032,0.0064 -0.0064,0.0097 l -0.01292,0.01612 c -3.490018,4.566738 -4.2856042,10.656816 -2.085454,15.968359 2.204181,5.32135 7.082548,9.064235 12.793085,9.816024 5.700862,0.750526 11.377026,-1.594919 14.884848,-6.149189 0.0013,-0.0016 0.0016,-0.0048 0.0032,-0.0064 l 0.01612,-0.01612 9.110474,-11.532877 C 49.02707,81.758415 49.49722,81.527221 50,81.527253 c 0.50278,-3.2e-5 0.972926,0.231162 1.278995,0.630033 l 9.110471,11.532877 0.01612,0.01612 c 0.0016,0.0016 0.0016,0.0048 0.0032,0.0064 3.507825,4.55427 9.18399,6.899717 14.884849,6.149189 5.710536,-0.751789 10.588906,-4.494674 12.793088,-9.816024 2.20015,-5.311543 1.40456,-11.401621 -2.085454,-15.968359 l -0.01292,-0.01612 c -0.0032,-0.0032 -0.0048,-0.0064 -0.0064,-0.0097 L 76.51236,62.068368 c -0.283599,-0.401403 -0.369729,-0.904498 -0.233117,-1.376628 0.136454,-0.472143 0.478394,-0.854644 0.932462,-1.042725 L 90.045743,55.02452 c 5.320019,-2.204677 9.06444,-7.089703 9.816127,-12.799249 0.75181,-5.710478 -1.601741,-11.390989 -6.171301,-14.897295 -4.191331,-3.216093 -9.664607,-4.149222 -14.648313,-2.580787 -3.387709,1.174531 -7.124923,2.472013 -10.701602,3.699111 -0.498519,0.19861 -1.058493,0.137256 -1.502657,-0.163808 -0.4442,-0.30116 -0.708832,-0.799062 -0.708832,-1.335693 V 16.129017 c 0,-4.277058 -1.697837,-8.3825387 -4.722188,-11.4068762 C 58.382588,1.6978034 54.277082,0 49.999977,0 Z","m 95.097846,4.9018824 c -6.5362,-6.5358435 -17.184353,-6.5358426 -23.720548,-1.2e-6 L 50.028804,26.249213 c -0.425617,0.425594 -1.040135,0.586638 -1.621513,0.430837 L 21.08856,19.627522 c -5.785619,-1.55016 -11.9599597,0.09643 -16.1897377,4.310702 -2.1146391,2.107408 -3.5852443,4.695818 -4.33177648,7.481767 -0.74652914,2.785944 -0.76864986,5.766964 0.009252,8.649189 0.75867638,2.810944 2.22358978,5.323667 4.19641438,7.340366 2.0728318,2.11897 4.7064751,3.690254 7.6708358,4.484488 l 28.056935,6.416262 c 0.28639,0.0767 0.547033,0.231845 0.750533,0.435477 0.209661,0.209842 0.356755,0.473669 0.435495,0.769013 l 6.418482,28.038807 c 0.78666,2.935694 2.306363,5.484426 4.3105,7.49614 4.090458,4.10683 10.194583,5.980987 16.162376,4.38201 2.921791,-0.782839 5.455367,-2.303208 7.455498,-4.308661 4.086164,-4.097795 5.946157,-10.219785 4.339911,-16.214049 l -7.0571,-27.321448 c -0.155477,-0.581682 0.0075,-1.193522 0.433183,-1.619113 L 95.097852,28.621141 c 6.536198,-6.535842 6.536198,-17.183416 3e-6,-23.7192562 z","m 66.400001,0 -16.4,16.4 L 33.600001,0 0,33.6 16.400001,50 0,66.4 33.600001,100 l 16.4,-16.4 16.4,16.4 L 100,66.4 83.600001,50 100,33.6 Z","m 19.630485,54.1 -7.3903,7.8 v 0 L 0,75 30.715935,70.7 c 3.464203,-0.5 6.928406,1.2 8.083141,4.1 l 2.309469,5.2 1.847575,4.2 v 0 l 6.928406,15.8 6.928406,-15.8 v 0 l 1.847576,-4.2 2.309468,-5.2 c 1.270208,-2.9 4.618938,-4.6 8.083141,-4.1 L 99.999999,75 87.644341,61.9 v 0 l -7.3903,-7.8 c -2.193996,-2.4 -2.193996,-5.8 0,-8.1 l 5.889145,-6.3 1.385682,-1.5 v 0 L 99.999999,25 80.715935,27.7 v 0 L 69.168591,29.3 C 65.704387,29.8 62.240184,28.1 61.08545,25.2 L 58.775981,20 56.928406,15.8 v 0 L 50,0 43.071593,15.8 v 0 l -1.847575,4.2 -2.309469,5.2 c -1.270208,2.9 -4.618937,4.6 -8.083141,4.1 L 19.284064,27.7 v 0 L 0,25 12.355658,38.1 v 0 l 1.385681,1.5 5.889146,6.3 c 2.309469,2.4 2.309469,5.8 0,8.2 z","M 50,0 30.1,30.1 0,50 30.1,69.9 50,100.00001 69.9,69.9 100,50 69.9,30.1 Z","m73 64.6c-8.69 12.7-19.4 23.3-29.9 29.5-10.4 6.23-19.7 7.55-25.8 3.68-6.09-3.87-8.48-12.6-6.64-24.3 1.84-11.7 7.75-25.4 16.4-38.1 8.69-12.7 19.4-23.3 29.9-29.5 10.4-6.23 19.7-7.55 25.8-3.68 12.7 8.07 8.3 36-9.79 62.4z","M 33.606558,75.300005 50,100 66.393446,75.300005 H 100 L 83.255273,50 100,24.7 H 66.393446 L 50.000001,0 33.606558,24.7 H 0 L 16.744731,50 0,75.300005 Z","M 85.4,14.6 62.7,19.3 50,0 37.3,19.3 14.6,14.6 19.3,37.3 0,50 19.3,62.7 14.6,85.4 37.3,80.7 50,100 62.7,80.7 85.4,85.4 80.7,62.7 99.999999,50 80.7,37.3 Z","M 93.3,25 78.3,21.7 75,6.7 60.4,11.4 50,0 39.6,11.4 25,6.7 21.7,21.7 6.7,25 11.4,39.6 0,50 11.4,60.4 6.7,75 21.7,78.3 25,93.3 39.6,88.6 50,99.999997 60.4,88.6 75,93.3 78.3,78.3 93.3,75 88.6,60.4 100,50 88.6,39.6 Z","m 93.300004,25 -21.8,3.5 3.5,-21.8 -17.1,13.9 -7.9,-20.6 -7.9,20.6 L 25,6.7 28.5,28.5 6.7,25 20.6,42.1 0,50 20.6,57.9 6.7,75 28.5,71.5 25,93.3 42.100004,79.4 l 7.9,20.6 7.9,-20.6 17.1,13.9 -3.5,-21.8 21.8,3.5 -13.9,-17.1 L 100,50 79.400004,42.1 Z","m97.5 66.2-8.94 2.39 3.67 8.47-9.25 0.188 1.53 9.1-9.03-2.02-0.701 9.2-8.28-4.12-2.89 8.76-7.05-5.97-4.91 7.82-5.41-7.48-6.64 6.42-3.46-8.56-7.99 4.65-1.3-9.13-8.88 2.6 0.927-9.18-9.24 0.419 3.1-8.69-9.08-1.8 5.1-7.7-8.38-3.91 6.8-6.26-7.2-5.79 8.1-4.45-5.6-7.35 8.94-2.39-3.67-8.47 9.25-0.189-1.53-9.1 9.03 2.02 0.7-9.2 8.28 4.12 2.89-8.76 7.05 5.97 4.91-7.82 5.41 7.48 6.64-6.42 3.46 8.56 7.99-4.65 1.3 9.13 8.88-2.61-0.926 9.18 9.24-0.418-3.1 8.69 9.08 1.8-5.1 7.69 8.38 3.91-6.8 6.26 7.2 5.79-8.1 4.45z","m 0,43.5 v 0 C 0,67.5 22.413793,87 50.000001,87 v 13 C 77.586208,100 100,80.5 100,56.5 v 0 C 100,32.5 77.586208,13 50.000001,13 V 0 C 22.413793,0 0,19.5 0,43.5 Z","M 89.108383,36.593295 C 84.406622,31.890944 78.804523,28.789393 72.902312,27.088543 L 89.108383,10.88044 c -14.505434,-14.5072533 -38.01424,-14.5072533 -52.619712,0 v 0 c -4.701762,4.702351 -7.702886,10.305152 -9.403523,16.208103 L 10.879076,10.88044 c -14.5054345,14.507253 -14.5054345,38.019007 0,52.62631 v 0 c 4.701762,4.702351 10.30386,7.803902 16.206072,9.504752 L 10.879076,89.119555 c 14.505435,14.507255 38.014242,14.507255 52.619712,0 v 0 C 68.20055,84.417204 71.301712,78.814403 73.002349,72.911452 L 89.208421,89.119555 C 103.61382,74.612302 103.61382,51.100548 89.108383,36.593295 Z","m 86.783481,22.786394 c -1.602002,-1.6008 -3.30413,-3.101551 -5.106383,-4.402201 l 5.106383,-5.102552 c -17.722153,-17.7088548 -46.357948,-17.7088548 -63.979976,0 v 0 c -1.602002,1.600801 -3.10388,3.301651 -4.405507,5.102552 l -5.106383,-5.102552 c -17.7221533,17.708856 -17.7221533,46.323164 0,63.93197 v 0 c 1.602003,1.6008 3.30413,3.101551 5.106383,4.402201 l -5.106383,5.102552 c 17.722153,17.708856 46.357949,17.708856 63.979976,0 1.602003,-1.600801 3.10388,-3.301651 4.405507,-5.102552 l 5.106383,5.102552 c 17.622029,-17.608806 17.622029,-46.223114 0,-63.93197 z","m 80.419581,19.480519 4.895104,-4.895104 C 75.724276,5.0949053 61.838162,2.4975027 49.95005,6.8931071 V 0 C 36.463537,0 24.775225,7.9920082 19.480519,19.480519 L 14.585415,14.585415 C 5.0949051,24.175824 2.4975025,38.061938 6.8931069,49.95005 H 0 c 0,13.486513 7.992008,25.174825 19.480519,30.469531 l -4.895104,4.895104 c 9.590409,9.59041 23.376623,12.087912 35.364635,7.792208 V 100 c 13.486513,0 25.174825,-7.992008 30.469531,-19.480519 l 4.895104,4.895105 C 94.905099,75.824176 97.402601,62.037962 93.106897,50.04995 H 100 C 99.9001,36.463537 91.908096,24.775225 80.419581,19.480519 Z","m 50,83.6 16.4,16.4 H 100 V 66.4 L 83.600005,50 100.00001,33.6 V 0 H 66.400005 l -16.4,16.4 -16.4,-16.4 H 0 V 33.6 L 16.4,50 0,66.4 V 100 h 33.600005 z","m 84.915847,65.690376 c -23.436956,26.022959 -34.915933,34.30962 -34.915933,34.30962 0,0 -11.478977,-8.289949 -34.915929,-34.30962 C -8.3509667,39.671797 -2.4009791,6.9318151 18.693978,1.0456555 39.788935,-4.840504 49.999914,16.043854 49.999914,16.043854 c 0,0 10.210979,-20.884358 31.306936,-14.9981985 21.09296,5.8861596 27.04495,38.6261415 3.608997,64.6447205 z","M 100,61.688 C 100,82.848 77.615954,99.999996 50.000003,99.999996 22.385351,99.999996 0,82.848 0,61.687 0,40.526 50.000003,0 50.000003,0 50.000003,0 100,40.526 100,61.688 Z","m 100,25.001 v 50 L 50,100 0,75 V 25 L 50,0 Z","M 100,0 50,10.2 1e-5,0 10.2,50 0,100 50,90 100,100 90,50 Z","m0 100 50-100 50 100z","m0 100 100-100v100z","M 100,0 0,100 V 0 Z","m0 0 5 50-5 50h100l-5-50 5-50z","m0 0 10 50-10 50h100l-10-50 10-50z","m0 0 15 50-15 50h100l-15-50 15-50z","m0 0 20 50-20 50h100l-20-50 20-50z","m0 0v100h100l-20-50 20-50z","m0 0c23.7 41.8 16.7 58.2 0 100h100l-20-50 20-50z","m26.5 13.9c14.6-16 35-18.1 52.7-6.76 4.84 3.1 9 7.46 12.6 12.3 3.26 4.33 6.16 9.19 7.45 14.7 3.35 14.4-5.42 38.7-15.3 48.4-23.5 23-53.7 19.6-84 10.8 3.13-26.4 9.79-61.1 26.5-79.4","m3.19 53.1c-8.19-17-0.2-34.3 19.3-45.1 5.34-2.95 11.5-4.95 17.9-6.35 5.74-1.27 11.8-2.08 17.7-1.36 15.4 1.85 34.4 16.8 38.8 27.9 10.6 26.5-7.45 50-30.7 71.8-23.8-11-53.7-27.5-63-46.9","m0 100c4.57-4.05 6.77-9.47 8.71-14.7 5.19-14.1 9.48-28.4 16.3-42 6.85-13.6 16.5-26.6 30.6-35.8 8.59-5.6 20.3-9.73 30.5-6.23 7.58 2.62 12.4 9.11 13.6 15.8 1.15 6.64-0.866 13.4-3.84 19.6-7.45 15.6-20.9 29.1-37.1 39.5-16.2 10.4-35.1 17.7-54.6 23","m3.91 51.1c3.56-5.47 9.6-10.5 16-15.4 16.1-12.4 34.6-24 53.1-35.7 1.52 8.55 3.05 17.1 7.16 25.5 5.33 10.8 14.9 21.1 18.6 32.1 3.66 11 0.223 23.3-16.8 31-12.8 5.82-60.8 15-66.9 9.84-13.8-11.7-19.3-34.7-11-47.4","m94 10.3s-10.9-17.6-49.1-6.77c-38.2 10.9-44.8 57.2-44.8 57.2s-3.19 40.3 25.9 39.3c29.1-1.06 51.1 1.34 62-9.8 9.64-9.85 12.1-53 12-61.2-0.261-11.8-5.98-18.7-5.98-18.7z","m81.1 15.9c-8.87-9.29-9.11-15.9-34.4-15.9-17.6-0.034-31.7 4.09-40.8 22.7-3.29 6.69-8.52 26.1-4.19 36.8 3.17 7.83 15.3 6.46 17.9 14.4 3.78 11.4-4.65 26.3 6.27 25.9 29-1.06 56.6 3.72 67.5-7.4 9.62-9.83 5.88-47.2 6.37-55.5 0.684-11.8-9.7-11.7-18.6-21z","m40 0.0297c15.9-0.0929 60-0.797 60 15.4 0 17.3-22.3 21.8-21.9 34.5 0.344 12.7 21.8 8.37 21.7 30.3-0.134 22.1-40.2 19.6-59.7 19.7-19.5 0.0859-40.1-9.01-40-50 0.113-41 24.1-49.9 40-50z","m0 25c57.3 15.3 79.9 1.05 100-25v100h-99.9z","m0 25c29.5 13.7 38.7 2.17 48.5-5.79 16.2-13.2 20.5-17.7 51.5-19.2v100h-99.9z","m0 33c24.3 1.75 24.6-9.81 40.1-9.4 13 0.345 20.7-13.5 31.6-13.4 18.6 0.219 16.5-9.65 28.2-10.2v100h-99.9z","m0 21.4c24.3 1.75 25.5 20.3 33.9 20.3 6.34-1.17e-4 6.07-16.9 17-16.8 9.18 0.0074 13.4 12 25 5.09 8.44-5 19.1-29.7 24.1-29.9v100h-99.9z","m90 40v-10l-3.6-3.6v-12.8h-12.8l-3.6-3.6h-10l-10-10-10 10h-10l-3.6 3.6h-12.8v12.8l-3.6 3.6v10l-10 10 10 10v10l3.6 3.6v12.8h12.8l3.6 3.6h10l10 10 10-10h10l3.6-3.6h12.8v-12.8l3.6-3.6v-10l10-10z","M 80.8,12 100,32.6 79.9,85.1 H 74.2 L 50,100 25.8,85.1 H 20.1 L 0,32.6 19.2,12 V 5.2 L 50,0 80.8,5.2 Z","m0.425 69.8c-0.3-0.501-0.499-1-0.399-1.6l7.59-56.4c0.2-1.2 1.3-2.1 2.6-1.9 3.2 0.3 6.19 0.501 9.09 0.501 20 0 27.3-7.51 28.6-9.01 0.2-0.4 0.499-0.701 0.899-1 0.499-0.4 1.2-0.501 1.9-0.3s1.2 0.701 1.5 1.2c1.3 1.6 8.59 9.01 28.6 9.01 2.9 0 5.99-0.2 9.09-0.501 1.3-0.1 2.4 0.701 2.6 1.9l7.59 56.4c0.0998 0.601-0.0998 1.1-0.399 1.6-0.2 0.2-4.49 5.21-12.6 11.8-7.49 6.11-19.8 14.2-36 18.4-0.2 0.1-0.499 0.1-0.799 0.1h-0.0998c-0.3 0-0.599-0.1-0.899-0.2-16.2-4.2-28.6-12.3-35.9-18.4-8.29-6.51-12.6-11.4-12.8-11.6z","m100 50c0 7.08-2.1 13.6-5.6 18.7 0.2 0.674 0.4 1.46 0.6 2.13 0 0-15 15.7-45 29.2-30.1-13.5-45-29.2-45-29.2 0.2-0.674 0.4-1.46 0.6-2.13-3.5-5.06-5.6-11.6-5.6-18.7 0-9.21 3.5-17.3 9.1-22.8-1.1-6.07-2.9-10.4-4.3-13.3-1.1-2.25-0.2-4.94 2.1-5.96 16-7.08 35-7.98 43.1-7.98s27.1 0.899 43.2 8.09c2.3 1.01 3.2 3.71 2.1 5.96-1.4 2.81-3.2 7.19-4.3 13.3 5.5 5.39 9 13.5 9 22.7z","m100 50c-2.3 4.3-5.3 8.2-8.8 11.7 1.7 2.3 2.9 4.6 3.8 6.9-2.2 1-4.8 1.7-7.6 2.2 0.1 5-0.6 9.9-2 14.6-4.6 1.4-9.6 2.1-14.6 2-0.5 2.8-1.2 5.4-2.2 7.6-2.3-0.9-4.6-2.2-6.9-3.8-3.5 3.6-7.4 6.6-11.7 8.8-4.3-2.3-8.2-5.3-11.7-8.8-2.3 1.7-4.6 2.9-6.9 3.8-1-2.2-1.7-4.8-2.2-7.6-5 0.1-9.9-0.6-14.6-2-1.4-4.6-2.1-9.6-2-14.6-2.8-0.5-5.4-1.2-7.6-2.2 0.9-2.3 2.2-4.6 3.8-6.9-3.5-3.5-6.5-7.4-8.8-11.7 2.3-4.3 5.3-8.2 8.8-11.7-1.7-2.3-2.9-4.6-3.8-6.9 2.2-1 4.8-1.7 7.6-2.2-0.1-5 0.6-9.9 2-14.6 4.6-1.4 9.6-2.1 14.6-2 0.5-2.8 1.2-5.4 2.2-7.6 2.3 0.9 4.6 2.2 6.9 3.8 3.5-3.5 7.4-6.5 11.7-8.8 4.3 2.3 8.2 5.3 11.7 8.8 2.3-1.7 4.6-2.9 6.9-3.8 1 2.2 1.7 4.8 2.2 7.6 5-0.1 9.9 0.6 14.6 2 1.4 4.6 2.1 9.6 2 14.6 2.8 0.5 5.4 1.2 7.6 2.2-0.9 2.3-2.2 4.6-3.8 6.9 3.5 3.5 6.5 7.4 8.8 11.7z","m100 50c-0.1 6.4-3.8 11.4-8.2 13.8l0.1 18.9c0 6.5-5.1 6.9-5.1 6.9-24.5 0.1-36.8 10.4-36.8 10.4s-12.3-10.3-36.8-10.4c0 0-5.1-0.4-5.1-6.9l0.1-18.9c-4.4-2.4-8.1-7.4-8.2-13.8 0.1-6.4 3.8-11.4 8.2-13.8l-0.1-18.9c0-6.5 5.1-6.9 5.1-6.9 24.5-0.1 36.8-10.4 36.8-10.4s12.3 10.3 36.8 10.4c0 0 5.1 0.4 5.1 6.9l-0.1 18.9c4.4 2.4 8.1 7.4 8.2 13.8z","m100 50c-2.6 2.8-6.3 5.3-10.7 7.5l9.2 3.8c-2 0.2-3.9 0.7-5.7 1.5 1.5 2.2 2.6 4.3 3.5 6.4-2.1 0.9-4.4 1.6-7 2.1 0.7 1.8 1.7 3.5 3 5.1l-9.2-3.8c1.6 4.6 2.4 9 2.3 12.8-3.8 0.1-8.2-0.7-12.8-2.3l3.8 9.2c-1.6-1.3-3.3-2.3-5.1-3-0.5 2.6-1.2 4.9-2.1 7-2.1-0.8-4.3-2-6.4-3.5-0.8 1.8-1.3 3.7-1.5 5.7l-3.8-9.2c-2.2 4.4-4.7 8.1-7.5 10.7-2.8-2.6-5.3-6.3-7.5-10.7l-3.8 9.2c-0.2-2-0.7-3.9-1.5-5.7-2.2 1.5-4.3 2.6-6.4 3.5-0.9-2.1-1.6-4.4-2.1-7-1.8 0.7-3.5 1.7-5.1 3l3.8-9.2c-4.6 1.6-9 2.4-12.8 2.3-0.1-3.8 0.7-8.2 2.3-12.8l-9.2 3.8c1.3-1.6 2.3-3.3 3-5.1-2.6-0.5-4.9-1.2-7-2.1 0.8-2.1 2-4.3 3.5-6.4-1.8-0.8-3.7-1.3-5.7-1.5l9.2-3.8c-4.4-2.2-8.1-4.7-10.7-7.5 2.6-2.8 6.3-5.3 10.7-7.5l-9.2-3.8c2-0.2 3.9-0.7 5.7-1.5-1.5-2.2-2.6-4.3-3.5-6.4 2.1-0.9 4.4-1.6 7-2.1-0.7-1.8-1.7-3.5-3-5.1l9.2 3.8c-1.6-4.6-2.4-9-2.3-12.8 3.8-0.1 8.2 0.7 12.8 2.3l-3.8-9.2c1.6 1.3 3.3 2.3 5.1 3 0.5-2.6 1.2-4.9 2.1-7 2.1 0.8 4.3 2 6.4 3.5 0.8-1.8 1.3-3.7 1.5-5.7l3.8 9.2c2.2-4.4 4.7-8.1 7.5-10.7 2.8 2.6 5.3 6.3 7.5 10.7l3.8-9.2c0.2 2 0.7 3.9 1.5 5.7 2.2-1.5 4.3-2.6 6.4-3.5 0.9 2.1 1.6 4.4 2.1 7 1.8-0.7 3.5-1.7 5.1-3l-3.8 9.2c4.6-1.6 9-2.4 12.8-2.3 0.1 3.8-0.7 8.2-2.3 12.8l9.2-3.8c-1.3 1.6-2.3 3.3-3 5.1 2.6 0.5 4.9 1.2 7 2.1-0.8 2.1-2 4.3-3.5 6.4 1.8 0.8 3.7 1.3 5.7 1.5l-9.2 3.8c4.4 2.2 8.1 4.7 10.7 7.5z","m91.2 25.1c5.4 6.4 8.8 15.2 8.8 24.9s-3.4 18.5-8.8 24.9v5.1c0 4-3.6 7.2-8 7.2h0.8v2.2c0 4-4.1 4.2-4.1 4.2-20 0.1-30 6.4-30 6.4s-10-6.3-30-6.4c0 0-4.1-0.3-4.1-4.2v-2.2h0.8c-4.4 0-8-3.2-8-7.2v-5.1c-5.2-6.4-8.6-15.2-8.6-24.9s3.4-18.5 8.8-24.9v-5.1c0-4 3.6-7.2 8-7.2h-0.8v-2.2c0-4 4.1-4.2 4.1-4.2 19.9-0.1 29.9-6.4 29.9-6.4s10 6.3 30 6.4c0 0 4.1 0.3 4.1 4.2v2.2h-0.8c4.4 0 8 3.2 8 7.2v5.1z","m94.6 18.3c1.8 0.1 3.6 0.2 5.4 0.2v57.4c-3.5 0.8-15.3 4.2-15.9 15.3h-7.6c-2.3 1.3-5.4 2.4-9.1 3.3-0.9 0.2-1.9 0.4-2.9 0.6 0 0-2.2 0.5-3.3 0.8-3.6 0.9-8.9 2.5-11.2 4.1-2.2-1.6-7.6-3.2-11.2-4.1-1.1-0.3-3.3-0.8-3.3-0.8-1-0.2-1.9-0.4-2.9-0.6-3.7-0.9-6.8-2-9.1-3.3h-7.6c-0.6-11.1-12.4-14.5-15.9-15.3v-57.4c1.8 0 3.6-0.1 5.4-0.2 2.9-5.3 11.8-9.2 22.4-9.2h0.4c0.1-0.3 0.2-0.6 0.2-1 0.1-1.9 1.1-2.9 2.2-2.9h8.1c2-5.2 11.3-5.2 11.3-5.2s9.3 0 11.2 5.2h8.1c1.1 0 2.2 1 2.2 2.9 0 0.3 0.1 0.6 0.2 1h0.4c10.7 0 19.6 3.9 22.5 9.2z","m100 25.5v53.9s-0.3 3.7-4 4.8l-42.4 15s-2.6 0.8-3.6 0.8-3.6-0.8-3.6-0.8l-42.4-15c-3.6-1.1-4-4.8-4-4.8v-53.9c0-1.4 1.2-2.6 2.9-2.6h4.1v-5.2c10.3-0.4 12.2-8.8 12.2-8.8h4.5c0-2.2 1.3-3.3 2.7-3.3h9.9c2.4-5.6 13.7-5.6 13.7-5.6s11.3 0 13.7 5.5h9.9c1.4 0 2.7 1.1 2.7 3.3h4.5s1.9 8.5 12.2 8.8v5.2h4.1c1.7 0.1 2.9 1.3 2.9 2.7z","m93.3 30.5c2.3 0 4.61 0.3 6.71 1v41.8c-2.1 0.6-4.41 1-6.71 1v0.1c0 3-2.61 5.4-5.71 5.4h-3.31v0.2c0 3.7-3.91 6.6-8.72 6.6-1 0-2-0.2-2.91-0.4-2.2 2.9-5.51 5.4-9.72 7.2-0.802 0.4-1.7 0.7-2.61 1 0 0-2.1 0.9-3.11 1.4-2.1 1-5.01 2.6-7.21 4.2-2.3-1.7-5.11-3.2-7.21-4.2-1-0.5-3.11-1.4-3.11-1.4-0.902-0.3-1.8-0.6-2.61-1-4.21-1.8-7.62-4.3-9.72-7.2-0.902 0.2-1.9 0.4-2.91 0.4-4.81 0-8.72-3-8.72-6.6v-0.2h-3.31c-3.11 0-5.71-2.4-5.71-5.4v-0.1c-2.3 0-4.61-0.3-6.71-1v-41.8c2.1-0.6 4.41-1 6.71-1v-0.1c0-3 2.61-5.4 5.71-5.4 0.902-13.9 17.3-25 37.5-25 20.1 0 36.6 11.1 37.7 25 3.11 0 5.71 2.4 5.71 5.4z","m95.7 52c1.1 4.6 3.2 8.8 4.3 13.4-4.9 6-14.3 5.1-21.3 8.6-3.1 1.6-5.9 4.1-9.3 4.6-1.3 0.2-2.6 0-3.8 0.3-2.2 0.5-3.9 2.3-5.5 3.9-8.1 7.9-18.1 13.8-28.9 17.2v-7.7c-1.4 1.2-2.9 2.1-4.5 2.8-0.3-3 0.1-6.1 1-8.9 0.5-1.5 1.1-2.9 1.3-4.4 0.2-2.9-1.6-5.6-3.7-7.5s-4.7-3.4-6.8-5.3c-5.5-5-8-13.4-14.8-16.5 1.2-1.8 2.2-3.8 2.8-5.9-1.6 0.3-3.2 0.8-4.7 1.6 0.9-6.2 0.3-12.5-1.8-18.3 2.4-0.4 4.8-1.4 6.8-2.8l1.6-0.3c4.9-4.9 10.2-9.4 15.8-13.5 2.4-1.7 4.9-3.4 7.6-4.5 1.9-0.8 4-1.3 6-1.9 4.8-1.5 9.3-3.9 13.4-6.9 0.4 1.3 0.7 2.5 1.1 3.8 3.7-0.6 7.4 1.4 11.1 0.9 4.1-0.5 7.9-4 11.8-2.8 0.1 1.1 0.2 2.2 0.2 3.3 2-0.3 3 2.2 3.6 4.1 2.5 7.1 9.4 11.5 14.7 16.7 1.6 1.5 3.1 3.3 3.4 5.4 0.5 2.7-1.3 5.7-4 6.5 1.4 0.2 2.8 0.4 4.2 0.6-2.7 3.7-2.7 8.9-1.6 13.5z","m96.8 69.2c0.5 4.5 0.6 9.3 3.2 12.8-2.2 1.6-4.1 3.6-5.6 5.9-0.2-0.8-0.5-1.5-0.7-2.3-0.1 1.8-1.6 3.1-3.1 3.6-1.6 0.5-3.2 0.4-4.8 0.5-2.5 0.2-5 1-7.2 2.3-2 1.2-3.8 2.9-5.8 4-2 1.2-4.4 1.9-6.6 1.1 0.1-1.3 0.1-2.5 0.2-3.8-0.9 2-3.6 2.8-5.3 1.6-0.3 0.6-0.7 1.3-1 1.9-11.4 1.9-23.1 2.2-34.5 0.8 0.2-0.7 0.5-1.3 0.7-2-4.3 3.8-10.2 4.2-15.8 4.4 1.7-1.8 2.7-4.4 2.7-7 0-3.1-1.3-6-2.4-8.9-1.9-4.4-3.2-9.1-4.2-13.8-0.8-0.7-1.8-1-2.9-1 0.6-0.6 1.2-1.2 1.8-1.7-0.7-0.5-1.2-1.2-1.5-2 1.6-5 1.6-10.4 0-15.2-0.7-2.1-1.7-4.1-2.2-6.2-1.1-4.8 0.2-9.8 1.4-14.6 0.5 0 1 0.1 1.4 0.1-0.8-1.3-1.1-3-1.5-4.5-1-5.5-2-10.9-3.1-16.3 3.5 0.2 6.9-0.1 10.3-0.7 0.5 0.6 0.9 1.2 1.4 1.7l0.2-3.2c2.7-0.9 5.3-1.8 8-2.7 2.9-1 5.9-2 9-2.3 2.5-0.2 5.2 0 7.1-1.7 0 0.4-0.1 0.7-0.1 1.1 5-1.1 10.3-0.5 15.1 1.6 0 0.6 0.1 1.1 0.1 1.7 0.9-1.3 2.6-1.5 4-1.2 1.4 0.4 2.7 1.2 4 1.9 6.3 2.8 13.5 0.2 19.9-2.2 0.5-0.2 1.1-0.4 1.6-0.2s0.9 0.9 0.6 1.4c0.9-0.2 1.8-0.4 2.8-0.7-0.1 0.4-0.2 0.9-0.3 1.3 2.3 3.3 4.5 6.7 6.7 10.2 1.3 2 2.5 4.1 3.2 6.4 0.6 2 0.9 4.2 1.1 6.3l1.2 11.1c0.3 3 0.1 6.9-2.5 7.8 0.5 0.2 1.1 0.4 1.6 0.7-1.4 0.2-2.3 1.7-2.3 3.2-0.1 1.5 0.4 2.9 0.9 4.3 1.6 4.6 2.7 9.5 3.2 14.5z","m96.3 27.7c1.2 0.1 2.4 0.1 3.7 0.2-1.2 0.9-1.6 2.6-1.9 4.2-0.599 3.1-1.1 6.2-1.7 9.3-0.599 3.3-1.2 6.6-0.999 9.9 0.2 3 0.899 5.9 1.2 8.8 0.3 3 0 6.1-1.6 8.5 0.799 0.1 1.5 0.3 2.3 0.4-0.699 1.4-1.7 2.6-2.8 3.5 2.5 1.3 2.6 4.9 2.7 7.9 0.0999 5.2 1.1 10.5 2.8 15.4-1.7-0.1-3.1 1-4.7 1.6-1.3 0.5-3.2 0.5-4-0.6-2.1 0.7-4.1 2-6.29 1.8-1.4-0.1-2.7-0.8-4.1-1.2-1.9-0.7-4-0.9-5.99-0.6-1.4 0.2-2.9 0.6-4.3 0.2-1.4-0.4-2.5-2.1-1.9-3.5-0.599 0.7-0.899 1.7-0.699 2.6-3.4-0.4-6.89 0.2-9.99 1.9-0.2-0.8-0.3-1.6-0.5-2.4-0.4 0.7-0.799 1.3-1.2 2-0.699-1.2-1.4-2.4-2.1-3.6-0.2 1.1-0.4 2.1-0.599 3.2-4.3-1.8-8.89 1.7-13.6 2-2.7 0.2-5.39-0.7-8.09-0.7-2.5 0-4.9 0.9-7.39 1.3-2.5 0.4-5.19 0.2-7.19-1.5-0.3-0.9-0.599-1.7-0.899-2.6-0.999 0.7-1.8 1.7-2.3 2.8-3.7-0.3-7.39 0-11 0.8 0.4-6 0.4-12 0-18-0.2-2.5-0.5-5.2-2.2-6.9 1.1-0.2 2.2-1 2.7-2.1-1.2-0.1-2.4-0.1-3.7-0.2 1.2-0.9 1.6-2.6 1.9-4.2 0.599-3.1 1.1-6.2 1.7-9.3 0.599-3.3 1.2-6.6 0.999-9.9-0.2-3-0.899-5.9-1.2-8.8-0.3-3 0-6.1 1.6-8.5-0.799-0.1-1.5-0.3-2.3-0.4 0.699-1.4 1.7-2.6 2.8-3.5-2.5-1.3-2.6-4.9-2.7-7.9 0.0999-5.4-0.899-10.6-2.6-15.5 1.7 0.1 3.1-1 4.7-1.6 1.3-0.5 3.1-0.5 4 0.6 2.1-0.7 4.1-2 6.29-1.8 1.4 0.1 2.7 0.8 4.1 1.2 1.9 0.7 4 0.9 5.99 0.6 1.3-0.1 2.8-0.5 4.2-0.1 1.4 0.4 2.5 2.1 1.9 3.5 0.599-0.7 0.899-1.7 0.699-2.6 3.4 0.4 6.89-0.2 9.99-1.9 0.2 0.8 0.3 1.6 0.5 2.4 0.4-0.7 0.799-1.3 1.2-2 0.599 1.2 1.3 2.4 2 3.6 0.2-1.1 0.4-2.1 0.599-3.2 4.3 1.8 8.89-1.7 13.6-2 2.7-0.2 5.39 0.7 8.09 0.7 2.5 0 4.9-0.9 7.39-1.3 2.5-0.4 5.19-0.2 7.19 1.5 0.3 0.9 0.599 1.7 0.899 2.6 0.999-0.7 1.8-1.7 2.3-2.8 3.7 0.3 7.39 0 11-0.8-0.4 6-0.4 12 0 18.1 0.2 2.5 0.5 5.2 2.2 6.9-1.1 0.1-2.1 0.9-2.7 2z","m0.0122 12.5c-0.2-2.4 2.1-4.3 4.5-4.8 0.5 0 0.901-0.0999 1.4-0.0999v-1.1c2.7-0.999 5.4-2.1 8.11-3.3 0.6 0.699 1.1 1.5 1.7 2.2-0.1-0.899-0.2-1.8-0.3-2.7 3.7-0.899 7.51-1.8 11.2-2.7 0.5 0.799 1 1.7 1.5 2.5 0-1.6 2.4-1.8 4.1-1.6 8.51 1.1 17.1 0.999 25.5-0.3 0.701 0.799 1.2 1.7 1.5 2.7 1.7-2.8 6-2.8 9.51-2.5 9.71 0.899 19.3 1.8 28.9 2.7-0.6 5.49-0.5 11.2 0.4 16.8-1 0.4-1.9 0.899-2.9 1.3 0.801 0.3 1.6 0.699 2.4 0.999-0.6 7.09-1.1 14.1-1.7 21.2-0.1 0.999-0.1 2 0.2 2.9 0.2 0.599 0.6 1.1 0.801 1.7 0.2 0.599 0.2 1.3 0.1 1.9-0.1 2.3-0.2 4.5-0.4 6.79-0.701 0.799-1.3 1.7-2 2.5 0.901 0 1.6 0.999 1.7 1.9 0 0.899-0.3 1.7-0.5 2.5-0.2 0.999-0.1 2 0 2.9 0.3 4.3 0.701 8.49 1 12.8 0.2 2.9 0.701 6.19 3.2 7.99 0.2 2.3-2.1 4.2-4.5 4.7-0.5 0.0999-0.901 0.0999-1.4 0.0999v1.1c-2.7 0.999-5.4 2.1-8.11 3.3-0.6-0.699-1.1-1.5-1.7-2.2 0.1 0.899 0.2 1.8 0.3 2.7-3.7 0.899-7.51 1.8-11.2 2.7-0.5-0.799-1-1.7-1.5-2.5 0 1.6-2.4 1.8-4.1 1.6-8.51-1.1-17.1-0.999-25.5 0.3-0.701-0.799-1.2-1.7-1.5-2.7-1.7 2.8-6 2.8-9.51 2.5-9.61-0.899-19.2-1.7-28.8-2.6 0.6-5.49 0.5-11.2-0.4-16.8 1-0.4 1.9-0.899 2.9-1.3-0.801-0.3-1.6-0.699-2.4-0.999 0.5-7.09 1.1-14.2 1.7-21.2 0.1-0.999 0.1-2-0.2-2.9-0.2-0.599-0.6-1.1-0.801-1.7-0.2-0.599-0.2-1.3-0.1-1.9 0.1-2.3 0.2-4.5 0.4-6.79 0.701-0.799 1.3-1.7 2-2.5-0.901 0-1.6-0.999-1.7-1.9 0-0.899 0.3-1.7 0.5-2.5 0.2-0.999 0.1-2 0-2.9-0.3-4.3-0.701-8.49-1-12.8-0.3-3-0.801-6.29-3.3-7.99z","m0.0295 73.1c-0.3-5.51 1.7-11 5.5-15 0.8-0.801 1.6-1.6 2.1-2.5 0.5-0.901 0.6-2 0.7-3 0.4-4 0.7-8.11 1.1-12.1 0.1-0.601 0.1-1.2 0.5-1.6 0.4-0.4 1.2-0.4 1.4 0.1-0.6-0.801-0.2-2 0.2-3 3.5-7.61 7.7-14.8 12.4-21.7 0.3 0 0.7 0 1 0.1 3.3-3.9 5-9.21 4.5-14.3 4.2 2.6 9.2 4 14.2 3.9 1.5 0 3.4 0.2 3.7 1.6 3.1 0.4 6.3 0.4 9.3 1 10.2 1.9 18.6 8.71 26.6 15.2 1.1 0.901 2.3 2.2 1.7 3.5 0.4-0.4 1-0.5 1.5-0.2v3.3c4.7-0.1 9.4 1 13.6 3.2-8.1 9.61-12.3 22.4-11.6 34.9-2.1-0.4-4.3-0.801-6.4-1.2 1.3 1.4 2.6 2.8 3.9 4.2-3 1.8-3.5 5.91-4.2 9.31-0.7 3.4-2.9 7.51-6.4 7.21-0.1 0.701 0.3 1.5 0.9 1.8-0.6 0.2-1.2 0.5-1.8 0.701 0.5 1.1 1.1 2.2 1.6 3.3-3.1 1.9-5.4 4.8-6.6 8.21-4.2-4.4-10.2-7.01-16.3-7.11 0.2-0.801 0.4-1.6 0.6-2.4l-1.7 0.801c-4.9-1.5-10-2.5-15.1-3-0.1-0.601-0.2-1.2-0.4-1.8-1.2-0.3-2.1-1-3.2-1.6-4.3-2.4-9.8-1.9-14.1-4.4-0.1-0.4-0.1-0.801-0.2-1.2-0.4 0.3-0.8 0.701-1.2 1-0.7-1.7-2.9-1.9-4.7-2.4-2.3-0.701-4.2-2.3-6.3-3.5-2-1.3-4.5-2.2-6.8-1.3z","m1.43 45.4c-0.3-0.5-0.7-0.9-1.2-1 1.6-0.9 0.9-3.5 0.999-5.4 0-1.6 0.7-3.1 1.4-4.5 2.1-4.6 4.3-9.2 6.4-13.7 0-0.6-0.0999-1.1-0.0999-1.7 0.999 0.9 2.4-0.4 3.2-1.5 4.6-6.4 12.5-9.4 17.4-15.5 0.7 0.1 1.3 0.5 1.7 1.1 0.4-1.1 1.6-1.7 2.7-1.8 1.1 0 2.3 0.4 3.4 0.6 5.7 1.2 11.9-1.9 17.2 0.7 2.9-1.8 6.4-3.4 9.6-2.4 0.7 0.2 1.4 0.5 2 0.9 5 2.5 10.1 5 14 9.1 0.9 0.9 1.7 2.2 1.4 3.4 0 0.1-0.1 0.2-0.1 0.3 1.2 0.9 2.7 1.3 4.2 1.1 0.1 0.5 0.2 1 0.2 1.6l1.1-0.5s0.6 1.1 1.2 2.1c2.3 1.4 4.3 3.2 5.9 5.3-0.2 0.4-0.4 0.9-0.7 1.3 1.1-0.4 1.9 1 2.2 2.1 1.1 4.4 1.7 9 1.7 13.5 0 2-0.1 4.1 0.6 6 0.5 1.4 1.5 2.6 2 4.1 0.5 1.5 0.2 3.4-1.2 4 0.3 0.5 0.7 0.9 1.2 1-1.6 0.9-0.9 3.5-0.999 5.4 0 1.6-0.7 3.1-1.4 4.5-2.1 4.6-4.3 9.2-6.4 13.7 0 0.6 0.1 1.1 0.1 1.7-0.999-0.9-2.4 0.4-3.2 1.5-4.6 6.4-12.5 9.4-17.4 15.5-0.7-0.1-1.3-0.5-1.7-1.1-0.4 1.1-1.6 1.7-2.7 1.8-1.1 0-2.3-0.4-3.4-0.6-5.7-1.2-11.9 1.9-17.2-0.7-2.9 1.8-6.4 3.4-9.6 2.4-0.7-0.2-1.4-0.5-2-0.9-5-2.5-10.1-5-14-9.1-0.9-0.9-1.7-2.2-1.4-3.4 0-0.1 0.1-0.2 0.1-0.3-1.2-0.9-2.7-1.3-4.2-1.1-0.1-0.5-0.2-1-0.2-1.6l-1.1 0.5s-0.6-1.1-1.2-2.1c-2.3-1.4-4.3-3.2-5.9-5.3 0.2-0.4 0.4-0.9 0.7-1.3-1.1 0.4-1.9-1-2.2-2.1-1.1-4.4-1.7-9-1.7-13.5 0-2 0.0999-4.1-0.6-6-0.5-1.4-1.5-2.6-2-4.1-0.5-1.4-0.2-3.4 1.2-4z","m95.4 51c2.1 2.9 3.7 6.4 4.6 10-1 1.1-2 2.1-3 3.2 0.3 0.6 0.5 1.2 0.8 1.8-1.4 3-4.2 3.9-6.8 4.9-5.8 2.3-11 6.3-15.2 11.8l0.3-2.4c-7.5 4.1-15.3 7.4-23.4 9.8-0.1-0.7 0.1-1.3 0.4-1.7-4.1 1.5-8.2 3-12.2 4.5-3.7 1.4-7.6 2.9-10.3 6.2 0.4-0.8 0.6-2 0.4-3.2-2.1-0.2-4-3-5.5-5.7-3.3-6-5.9-12.6-8.4-19.1-1.1-2.8-2.1-5.6-3.2-8.4-1.8-4.8-3.7-9.6-4.7-14.5-0.7-4.2-1.5-9.5-4.5-11.6l0.9-4.2-1.7 2 0.3-2.2s-0.4-1-1.7-2.3c-1.3-1.4-2.5-3.3-2.5-3.3s5.2-2.7 7.9-3.8 4.5-3.5 4.5-3.5c4.7-3.5 9.4-6.9 14.1-10.4 0.4 0.9 0.8 1.8 1.2 2.8 1.6-1.9 4-2 6.3-2.3 6.3-0.9 12.1-3.7 16.9-8.3 1.6 2.5 3.9 1.1 5.3-0.5 0.2 0.6 0.5 1.2 0.7 1.8 4.9-0.8 9.7-1.6 14.6-2.4-1.4 0.3-2.5 1.7-2.8 3.6 2.1-1.6 4.7-2.5 7.4-2.6 1.3 2.7 2.4 5.7 3 8.7 0.8 0 1.5 0.1 2.3 0.1 0 2.4 0.8 5 1.6 7.4l1.5 4.5c1.6 4.7 3.1 9.4 5.3 13.7 1.6 3.2 3.7 6.6 3.8 10 0 0.9-0.1 1.8 0.1 2.8 0.4 1.1 1.1 2 1.7 2.8z","m99.9 48.4c0.1 1.6 0.2 3.1-0.1 4.7-0.3 1.4-1.1 2.8-1.5 4.2-0.4 1.4-0.5 3.1 0.5 4.2-1.1 0.699-2.2 1.4-3.3 2.1-0.3 0.2-0.7 0.4-0.9 0.799-0.3 0.5-0.2 0.999-0.2 1.5 0.1 1.4-0.2 2.8-0.8 4.1-1.1 2.6-2.3 5.19-3.4 7.79-0.2 0.5-0.6 1.1-1.2 1.1-0.3 0.999-0.7 2-1 3h-1.3c0.1 0.999-0.8 1.9-1.8 2.4-1 0.4-2.1 0.599-3.1 0.999-3.1 1.1-5 4.2-7.4 6.49-0.4 0.4-0.9 0.799-1.4 0.699-0.4 0-0.8-0.3-1.2-0.4-1-0.3-2 0.5-2.5 1.3-0.5 0.899-0.7 1.9-1.2 2.7-2.3 3.4-8.2 1.5-11.6 3.9-0.4-0.4-0.9-0.899-1.3-1.3-2.1 0.799-4.4 1.3-6.7 1.4-0.9 0-2.3-0.4-2.1-1.3-5.1 0-10.2 0.0999-15.2 0.599-0.8 0.0999-1.6 0.0999-2.2-0.3-0.5-0.3-0.8-0.799-1.3-1.2-1.1-0.799-2.8-0.3-3.9-1.1-1-0.699-1.2-2.2-2.3-2.6-1.4-0.4-3.1 1.3-4.1 0.3-0.1-0.5-0.2-0.999-0.3-1.5-2.2-2.8-4.4-5.49-6.5-8.29-1.2-1.5-2.3-3-3.3-4.6-1.2-2.1-2-4.4-3.3-6.39-0.6-0.999-1.4-2-1.8-3.1s-0.2-2.5 0.7-3.3c-0.6-0.0999-1.2-0.3-1.5-0.799-0.2-0.3-0.2-0.599-0.2-0.899-0.2-2-0.3-4-0.5-5.99-0.1-0.899-0.1-1.7-0.2-2.6-0.1-1.8-0.3-3.7-0.4-5.49-0.1-1.4-0.2-3 0.1-4.5 0.3-1.4 1.1-2.8 1.5-4.2 0.4-1.4 0.5-3.1-0.5-4.2 1.1-0.699 2.2-1.4 3.3-2.1 0.3-0.2 0.7-0.4 0.9-0.799 0.3-0.5 0.2-0.999 0.2-1.5-0.1-1.4 0.2-2.8 0.8-4.1 1.1-2.6 2.3-5.19 3.4-7.79 0.2-0.5 0.6-1.1 1.2-1.1 0.3-0.999 0.7-2 1-3h1.3c-0.1-0.999 0.8-1.9 1.8-2.4 1-0.4 2.1-0.599 3.1-0.999 3.1-1.1 5-4.2 7.4-6.49 0.4-0.4 0.9-0.799 1.4-0.699 0.4 0 0.8 0.3 1.2 0.4 1 0.3 2-0.5 2.5-1.3 0.5-0.899 0.7-1.9 1.2-2.7 2.3-3.4 8.2-1.5 11.6-3.9l1.3 1.3c2.2-0.799 4.4-1.3 6.7-1.4 0.9 0 2.3 0.4 2.1 1.3 5.1 0 10.2-0.0999 15.2-0.599 0.8-0.0999 1.6-0.0999 2.2 0.3 0.5 0.3 0.8 0.799 1.3 1.2 1.1 0.799 2.8 0.3 3.9 1.1 1 0.699 1.2 2.2 2.3 2.6 1.4 0.4 3.1-1.3 4.1-0.3l0.3 1.5c2.2 2.8 4.4 5.49 6.5 8.29 1.2 1.5 2.3 3 3.3 4.6 1.2 2.1 2 4.4 3.3 6.39 0.6 0.999 1.4 2 1.8 3.1 0.4 1.1 0.2 2.5-0.7 3.3 0.6 0.0999 1.2 0.3 1.5 0.799 0.2 0.3 0.2 0.599 0.2 0.899 0.2 2 0.3 4 0.5 5.99 0.1 0.899 0.1 1.7 0.2 2.6 0.1 1.6 0.2 3.4 0.4 5.29z","m0.00116 75.7c0.794 0.0537 1.95-0.858 2.66 0.148 0.617 0.87 0.424 1.62 1.12 1.62 0.181 4.22 2.61-1.6 2.98 1.98 0.0294 0.286-0.998 2.08-1.07 2.24 0.239-0.53 1.7-0.122 2.03-0.13 0.695-0.0188 1.27 0.938 1.46 2.15 0.0106 0.0685 0.727 0.909 0.851 1.12 0.555 0.948-0.436 0.907 0.914 1.4 0.245-0.0013 0.491-0.0027 0.736-0.0027 0.0642-0.0362 0.0963-0.23 0.0966-0.58 1.86-0.46 3.67-0.393 5.4 0.58 2.51 1.41 4.86 2.46 7.33 4.1 6.07 4.04 12.2 4.33 18.7 5.85 3.57 0.834 8.17-0.4 12-1.11 4.13-0.76 8.34-3.88 12.5-2.25 3.08 1.2 6.23 3.67 9.46 4.56 3.03 0.84 6 4.31 9.1 1.7 0.714-0.6 1.55-1.83 2.24-2.3 0.449-0.303 1.13 0.205 1.56-0.608 0.456-0.852 0.654-2.3 1.07-3.53 0.34-1.01 1.14-0.795 1.36-1.74 0.372-1.62 0.0865-3.46 0.194-4.99-0.0355 0.503 0.221-3.28 0.191-2.69 0.061-1.2 0.481-1.82 0.412-3.21-0.112-2.27-2.02-3.95-1.85-6.65-0.22 0 0.752 0.248 0.602-0.98-0.24-1.96-1.63-2.75-2.1-3.11 0.088-2.07 0.393-0.599 0.756-1.4-0.782-3.91 2.58-2.79 2.91-2.69 0.167 0.0497 2.63-0.0752 2.55-0.957-0.0659-0.732-0.698-0.514-0.605-1.97 0.502 0 2.29 0.677 2.62-0.856-0.157-1.3-1.83-1.7-1.58-3.4 0.405-2.75 2.6 1.68 3.04-1.59 0.261-1.96-0.338-3.61-0.693-4.99-0.148-0.579-0.412-1.43-0.568-2.02-0.188-0.715-0.688-0.506-0.802-1.4 0.329-3.24 2.08 0.768 2.34-2.43-0.22-1.15-1.79-1.06-2.19-1.43-0.831-0.756-1.34-1.51-2.11-2.43-0.853-1-1.71-2.74-2.61-4.01-2.94-4.15-5.83-6.53-8.97-8.18-1.19-0.623-3.29-0.0564-4.26-4.09-0.52-2.17-0.603-5.55-1.23-7.51-0.556-1.76-1.19-2.3-1.78-3.06-2.06-2.66-4.28-2.91-6.46-3.37-2.25-0.474-4.36-1.86-6.45-2.39-5.64-1.42-10.6-4.15-16.3-4.15 0-2.92 0.419-2.48-0.315-4.09-0.344-0.756-0.747-0.444-1.18-0.584-0.465-0.15-0.624-0.474-1.12 0-0.332 0.314-0.611 0.468-0.952 0.584-0.438 0.149-0.843 0.768-1.46 0.591-0.691-0.197-1.14-0.0537-2.03-0.00537-2.05 0.11-3.94-0.699-6.17-0.585-1.36 0.0711-2.58 1.75-3.87 3.24-0.536 0.626-0.966 1.54-1.51 2.02-0.656 0.577-1.01 1.28-1.51 2.19-2.16 3.91-5.25 0.153-7.65 0.153-2.13 0-4.15 0.0738-6.17 1.17-1.44 0.777-2.75 1.93-4.13 3.21-0.51 0.471-1.11 0.98-1.58 2.05-0.12 0.274-0.503 0.129-0.591 0.881-0.324 2.74 0.255 1.98 0.562 2.93-2.86e-4 1.58-2 4.52-2.18 4.96-0.445 1.06-1.32 3.54-1.81 5.47 0.0436 1.82 1.06 0.149 1.37 0.76 0.614 1.2-0.197 2.12-0.113 2.81 0.113 0.929 0.445-0.132 0.606 0.66-0.434 2.04-1.49 1.28-1.72 3.36-0.0386 0.357 0.957 0.949 0.961 0.969 0.46 2.4-0.261 2.01-0.266 2.93-0.0151 2.49-0.298 1.17 0.405 1.17 0.353 0 3.5-1.66 3.68-0.0564 0.379 3.24-1.06 4.04-1.52 4.45-0.824 0.74-1.27 1.01-1.97 1.97-0.541 0.74-0.69 1.63-1.07 2.79-0.399 1.21-1.3 1.84-1.6 3.29-0.191 0.94 1.23-0.168 1.35-0.168 0 2.7-1.61 3.82-1.6 3.9 0.152 1.15 0.18 2.76-0.0223 4.6-0.384 3.48-0.785 1.83-1.47 3.78-0.915 2.6 0.0226 2.84-0.0274 5.46-0.0194 1.01-0.813 3.89-0.915 3.88 0.33 0.0215-0.0241-0.0013 0 0","m100 7.43c-0.651-5.63-2.08-5.19-3.24-5.89-2.07-1.25-4.59-1.75-6.56-1.01-2.2 0.822-5.24 1.38-7.41 0.999-3.69-0.639-7.04 1.32-10.9 1.38-3.25 0.0474-6.06-1.07-9.76-2.14-8.09-2.34-16.4 1.23-24.6 3.52-9.76 2.72-19.7 7.64-29.6 9.64-1.23 0.25-5.05-2.64-5.32 5.82-0.184 5.87 0.561 0.52 1.16 4.5 0.662 4.42-0.517 4.54-0.962 5.53-1.76 3.9 0.133 11.4-1.42 14.8-0.612 1.32-1.42 0.566-1.39 5.69 0.021 3.28 0.782 2.97 0.782 5.67-0.291-0.757-0.502-0.624-0.635 0.402 0.251 1.36 0.511 1.32 0.787 1.95 0.243 0.55 0.655 0.493 0.892 1.09 0.373 0.945 0.466 2.51 0.844 3.41 1.07 2.54 2.22 1.6 3.19 4.85 0.154 0.517 0.402 0.446 0.53 1.05 0.298 1.4 0.195 3.11 0.602 4.42 0.621 2 1.68-0.432 2.26 1.43 0.316 1.01 0.331 3.82 0.528 5.24 0.262 1.89 0.629 3.64 1.02 5.09 1.41 5.25 3.3 7.68 5.04 7.59 0.756-0.0395 1.9-0.139 2.68 1.36 0.384 0.74 0.793 1.99 1.23 2.74 1.85 3.17 3.87 3.46 6.01 3.46 1.94-0.0032 3.84-0.588 5.62-3.17 1.17-1.71 2.49-3.92 3.8-4.4 3.83-1.39 7.85-2.01 11.7-0.694 1.23 0.422 2.51-0.463 3.67 0.678 0.641 0.629 1.18 1.73 1.85 2.15 1.84 1.18 3.59 0.267 5.27-1.45 2.87-2.95 6.19-3.79 9.05-5.47 1.51-0.885 3.27 1.87 4.96 1.27 1.62-0.575 3.61-1.58 5.33-2.68 1.39-0.888 2.64-2.79 3.99-4.13 0.787-0.783 2.88-2.24 3.24-6.43-0.024 0.283-0.611-0.939-0.618-2.33-0.044 0.098 0.846-1.58 0.844-1.58 0.888-0.727 1.28-0.636 1.84-2.74 0.628-2.37 0.484-3.14 1.35-4.13 0.286-0.326 2.23-0.977 2.33-1.86 0.301-2.7-1.03-2.65-1.16-3.29 0.258-2.1 2.48-1.7 0.91-3.81-0.39-0.52-1.03-0.648-1.5-0.675-0.13-0.0079-1.17 1.37-1.3 0.667-0.629-3.22 0.665-3.06 0.774-4.13 0.323-3.15-0.292-4.5-0.0602-6.19 0.192-1.4 1.39-0.498 1.74-0.689 0.723-0.383 3.74 1.08 4.23-2.98 0.0784-0.65-2.48-1.74-2.78-1.84-1.32-0.446-2.83-0.953-4.11-2.06 0.0563-0.759 0.477-2.36 0.583-2.76 0.921-3.48 0.296-0.0237 1.16-0.715 0.218-0.174 0.645-1.27 0.865-1.48 0.0739-0.0711 0.637 0.0016 0.58 0.0427 0.664-0.47 1.25-0.688 1.45-3.33 0.192-2.56-0.386-4.71 0.318-6.92 0.197-0.62 0.795-0.413 0.875-0.683 0.226-0.771 0.311-2.67 0.445-3.19 0.434-1.68 0.948-4.87 1.61-5.76 1.06-1.42 5.42 1.08 5.42-5.81-0.0482-0.419 0 0.161 0 0","m99.8 53.3c-0.222-0.982-0.895-2-1.24-2.87-0.525-1.31-1.29-0.933-1.64-2.44 0.694-2.46 0.261-4.17-0.359-5.33-0.468-0.879-1.03-0.394-1.51-1.15-0.357-0.564-0.291-1.79-0.667-2.33-0.409-0.58-2.02-0.415-2.14-2.28-0.153-2.47 1.58-0.537 1.8-1.87 0.458-2.77-2.47-4.29-2.74-4.49-0.839-0.633-1.81-0.889-2.65-1.69-0.266-0.254-0.474-3.08-0.84-1.47 0.0506 0.58 0.521 1.49 0.0823 2.03-0.119 0.148-1.45-0.529-1.55-1.14-0.658-3.83 1.4-2.91 1.59-3.72-0.515-1.76-0.969-0.0568-1.32-0.542-0.525-0.727-1.07-2.89-1.6-3.8-1.33-2.31-2.82-2.93-4.34-4.73-1.07-1.26-2.92-3.32-4.08-3.61-0.178-0.0449-0.744 0.978-0.846 0.923-0.155-0.0872-0.399-1.6-0.502-1.69-0.91-0.842-1.98-0.533-2.74-0.57-3.36-0.165-7.59-3.2-10.8-4.7-1.4-0.645-2.38-2.73-3.94-2.74-0.945-0.00793-1.42-1.72-2.51-1.29 0.137-0.0529-0.391 0.595-0.261 0.576-0.581 0.0846-1.03-0.905-1.64-1.18-0.539-0.247-1.66-1.45-2.22-1.08-0.463 0.299-0.293 2.06-0.969 2.27-0.198 0.0608-0.0637-1.16-0.231-1.29-0.277-0.213-0.676-0.345-1.03-0.337-0.202 0.00529-1.18 0.0806-1.37 0.234-6e-3 0.00529-0.523 1.1-0.463 1.09-0.504 0.131-1.43-0.387-2.21 0.221-0.276 0.217-0.447 1.2-0.76 1.22-0.267 0.0172-0.371-1.42-1.11-1.14-0.446 0.173-1.61 0.597-2.02 1.15-0.53 0.708-0.251 1.85-0.845 2.3 0.163-0.124-1.07-1.08-1.11-1.08-1.11-0.156-2.29 1.98-3.45 1.94-3.43-0.13-7.31-1.43-11-1.43-3.81-0.00529-7.57-0.776-11.1 4.62-1.58 2.42-2.7 7.8-3.59 14.1-0.674 4.77-1.51 6.14-2.69 8.35-1.21 2.29-2.44 4.54-3.43 8.04-0.237 0.833-0.178 2.94-0.391 3.45-0.342 0.831-0.921-0.0753-1.25 1.19-0.9 3.49 0.334 4.96 0.334 8.6-1.23 0-2.06 4.43-2.35 8.95-0.348 5.51 0.0015 7.11 0.391 11.8 0.48 5.75 0.197 10.7 1.99 9.21 0.259-0.211 0.577-1.04 0.75-1.15 1.03-0.645 1.28 1.5 2.19 1.39 1.67-0.21 3.55 1.13 5.29 0.866 0.465-0.07 1.01-0.152 1.59-0.529 0.935-0.604 1.04-0.0476 1.95-0.0013 1.01 0.0502 2.05-0.703 3.12-1.15 0.525-0.219 0.377-1.12 1.07 1.85 0.312 1.35 0.795 4.22 1.13 4.95 1.28 2.83 3.7 0.615 4.95 0.601 2.27-0.0251 4.41-0.519 6.6-1.07 4.14-1.05 7.82 2.27 11.7 5.16 7.2 5.42 15.2 6.73 22.2 4.62 2.2-0.662 4.52-0.765 6.68-1.73 0.374-0.168 0.922 0.176 1.17-0.555 0.285-0.83 0.0248-2.91 0.483-3.36 0.237-0.234 0.38 2.55 0.34 2.49 0.289 0.386 0.559 0.531 0.906 0.843 0.439 0.395 1.52 0.533 1.82-0.575 0.295-1.07 0.0634-4.08 0.274-4.94 0.723-2.96 0.749 1.29 0.899 2.06 0.231 1.19-0.717 6.43 1.24 3.45-0.0542 0.0833 0.936-1 0.586-1-0.102 0.0013 0.0368-1.3 0.194-1.24 0.0703 0.0238 0.626 1.96 0.804 2.19 0.32 0.414 1.43 0.514 1.74-0.225 0.641-1.55 0.382-3.17-0.261-3.17 0-7 0.472 1.02 0.652-3.17 0.122-2.85-0.465-1.27-0.261-4.18 0.275-3.93 1.14-3.1 1.3 0.447 0.0431 0.956-0.688 8.19-0.315 9.78 0.245 1.05 2.91 0.379 3.2-0.806 0.519-2.11-0.047-4.61 0.434-6.15-0.191 0.608 0.924 1.41 0.952 1.4 0.323-0.141 0.514-1.34 0.855-1.83 0.163-0.233 0.644-0.233 0.863-0.406 0.0838-0.0661 0.111-1.22 0.201-1.39 0.328 1.31 1.56-0.0952 1.95-1.17 0.394-1.09 0.311-3.01 0.782-4.6 0.317-1.07 0.976-0.829 1.37-1.17 0.387-0.33 1.48-1.45 1.69-2.57 0.902-4.65-1.65-1.13-0.458-6.64 0.539-2.49 1.11-1.13 1.55-1.46 0.102-0.074 0.737-1.9 0.987-1.99 0.349-0.115 1.65 1.93 1.3-2.06-0.447-5.15-5.27-0.843-4.06-11.4 0.0844-0.732-0.581-1.11-0.626-1.24 0.0087-0.0793 0.53-2.4 0.518-2.37 1.12-2.61 0.42-0.43 0.782 1.77 0.223 1.36-0.268 2.09 0.391 2.31 0.0583 0.0198 0.622 0.141 0.759-1.05 0.0464-0.403-0.513-1.73-0.0634-3.17 0.0906-0.289 0.308 0.572 0.477 0.48 0.239-0.13 0.742 0.634 0.977 1.44 0.351 1.2 0.488 2.54 0.912 3.17 0.327 0.48 1.43 0.552 0.849-2.03","m100 70.7c-2.05 0-4.47 0.583-6.74 0.583 0-1.06 0.507-2.47 0.691-3.05 0.278-0.868 0.751-0.65 1.1-3.23 0.106-0.793-0.298-1.88 6.31e-4 -3.3 0.178-0.848 0.477-1.02 0.616-1.51 0.178-0.619 1.88-4.67 0.484-4.67 0.0935-2.19 1.85-1 1.79-3.05-0.0199-0.669-4.63-1.03-5.09-1.03 0-2.4 1.23 0.0067 1.38-1.17 0.198-1.55-1.84-1.14-2.06-1.95 0.197-2.48 0.21 0.257-0.149-2.51 1.22-4.87 2.85-2.24 4.26-5.72-0.437-1.63-1.96 0.699-2.52 0.844-1.01 0.263-3.25 1.45-3.93-1.45 0.341-1.51 2.38-0.835 2.45-1.67 0.173-1.94-2.49 0.438-2.59-2.13 0.214 0.276 0.347-1.78 0.195-2.33 0.187 0.677-1.11 0.0415-1.02-1.17 0.222 0.415 0.361 0.224 0.417-0.575 0.0032-1.22-1.49-1.76-1.65-1.76 0-3.02 3.1-4.72 3.56-4.96 0.847-0.457 1.96-1.24 2.76-1.46 0.385-0.103 0.961-0.513 1.24-0.583 0.507-0.129 0.96 0.197 1.39-0.462 0.238-0.363-0.0464-1.29-0.154-1.29 0-0.69 1.19-3.27 1.38-3.5 0.583-0.717 1.61 0.536 2.05-1.42-0.231-1.12-2.6-0.844-2.98-0.915-1.03-0.198-1.96-0.0737-2.9-0.584-1.78-0.958-3.47-1.18-5.24-2.33-2.94-1.91-5.92-4.57-9.01-5.84-3.49-1.43-7.1-2.5-10.6-3.36-3.93-0.955-8.13-2.83-12.2-3.06-5.69-0.319-11.1 0.304-16.6 0.581-3.54 0.18-7.63-0.19-11.1 1.75-6.74 3.72-13.8 3.03-20.6 8.16-1.03 0.785-6.54 6.35-4.41 12.3 0.323 0.894 0.957 0.67 1.18 1.46 0.164 0.592 0.653 4.39 0.622 5.54-0.0515 1.88 0.235 0.908-0.162 2.92-0.104 0.527-0.92-0.596-1.01 0-0.355 2.33 1.09 1.17 1.38 1.17 0 2.75-1.41 0.604-1.63 2.54-0.0281 0.253 3.11-1.18 2.81 2.48-0.174 2.15-1.44-1.28-1.71 1.01-0.042 0.351 1.37 1.12 1.49 0.974-0.0164 0.435-2.6 1.17-2.89 1.17-0.0591 0.839 0.425 1.5 0.553 1.95-0.0733 3.26-1.97-1.13-1.35 3.89 0.429 3.44 1.44 1.54 2.03 3.22-0.466 2.72-0.449 0.758-0.358 4.36 0.0426 1.68 0.826 0.379 0.131 2.93-0.331 1.21-1.79 1.21-2.32 1.16-0.837-0.0831-1.74-1.01-2.41 0.86-0.0983 0.275-0.437 1.73-0.478 2.06-0.0822 0.683-0.0551 4.04 0.136 4.66 0.265 0.87 0.81-0.186 1.03 0.583 0.541 1.88-0.039 3.51 0.213 5.25 0.131 0.906 0.861 3.81 1.02 4.67 0.125 0.651 0.453 1.91 0.626 2.97 0.238 1.46 0.149 2.49 0.453 3.64 0.538 2.03 1.36 2.26 1.95 4.22 0.445 1.48 0.55 2.45 1.08 4.05 0.662 2-0.197 2.02 1.07 2.53-6e-3 -0.0027 0.195-1.08 0.231-1.06 0.559 0.212 3.32 2.34 3.26 2.61 0.155 0.892 0.545 0.0603 0.545-0.868 0.676 0 1.29 1.43 1.99 1.75 0.307 0.142 0.547-0.367 0.973 0.591 0.194-0.938 1.37 0.549 1.71 0.573 0.666 0.0469 2.56 1.51 3.07-0.482-0.758 2.95 1.86 1.32 1.74 1.35 0.549-0.161 2.53-1.01 2.67 0.311 0.365-1.47 2.73-1.46 3.31-1.76 0.889-0.457 1.8-0.135 2.48-0.587 1.19-0.792 2.3 0.0335 3.3 0.583 0.626 0.346 2.18 0.36 2.63-0.683 0.648-1.48 0.0287-0.238 0.737 0.1 0.689 0.328 0.977 0.0188 1.55-0.106 1.88-0.407 4.11-0.421 5.81-0.478 2.13-0.071 4.71 0.647 6.88 0.584 1.07-0.0322 1.83-0.41 2.81 0 1.04 0.433 2.14-0.644 3.13-0.584 5.39 0.33 10.9 0.381 16.8-0.587 2.62-0.427 6.2-0.0094 8.72-0.0107 0.85 0 8.17 1.09 8.17 0.0147 0-0.486-1.84-1.2-1.95-1.17-0.326 0.0804-0.779 0.439-1.41 0.0871-0.554-0.312-1.19-0.411-1.74-0.382-0.263 0.0147-0.815 0.494-1.16 0.296-0.233-0.135-0.509-0.922-0.673-1.07-0.243-0.221-0.278 1.36-0.504 1.07 0.0322-0.528-0.0136-0.916-0.138-1.17 0.103-2.21 5.93-0.615 6.33-0.583 0.311 0.0241 0.637-0.506 1.01-0.513 0.649-0.0121 0.9-0.0027 1.6 0.21 1.37 0.417 2.85 0.0322 4.46-0.281 0.237-0.0456 4.69-4.83 3.85-7.59h-1.03c0-1.62 1.2-14.6 1.1-14.6","m99.8 27.2c-0.424-0.0797-0.901-1.76-1.28-1.76-0.0254-0.33 0.808-0.982 0.404-2.11-0.397-1.11-1.84-0.423-2.35-0.769-0.287-0.195-2.4-1.19-2.38-2.05 0.119-4.51 4.61 0.485 5.05-1.76-0.514-2.13-1.48-1.4-2.22-1.4 0-2.22-0.403-0.361-0.741-1.46 0.108-0.187 0.156-0.47 0.143-0.849-2.96 0-5.81-0.985-8.67-2.31-1.33-0.613-1.89-5.22-3.39-6.39-3.09-2.42-6.15-4.62-8.99-5.32-1.56-0.383-3.24-1.37-4.67-0.994-1.83 0.485-4.04 1.03-6.09 0.575-1.37-0.306-2.96 0.595-4.48 0.692-1.35 0.0849-3.17 0.0782-4.62 1.57-0.657-2.53-1.6-0.296-2.15-0.236-1.02 0.111-1.63-0.305-2.63 0.245-1.36 0.752-3.14-0.602-4.48 0.0265-2.85 1.33-5.73-0.886-8.82 0.172-0.96 0.327-2.28 1.17-3.65 1.57-0.969 0.286-1.54 0.786-2.34 1.18-0.906 0.448-1.86 0.774-2.76 1.42-6.35 4.57-12.9 0.22-19.3 2.04-1.44 0.407-2.84 0.504-4.23 1.13-0.909 0.408-2.44 0.445-3.27 2.03-1.68 3.19 0.00137 6.81 0.649 10.4-0.0999 0.356-0.431 1.02-0.45 1.5-0.127 3.19 0.348 0.693-0.247 2.84-0.813 2.94-1.29 0.578-0.799 6.14 0.057 0.644 0.623 4.2 0.568 5-0.0522 0.753-0.505 1.81-0.488 1.57-0.0302 0.448-0.346 0.577-0.379 0.847-0.221 1.82 0.364 2.24 0.443 3.53 0.163 2.64 0.143 2.63 0.304 4.58 0.0288 0.353 0.521 5.02 0.47 4.67 0.123 0.836 0.735 3.34 0.73 4.02-0.0203 2.57 0.0831 0.391-0.542 0.79-0.572 0.365-1.49-2.76-1.98-0.338-0.417 2.06 0.251 3.04 0.422 4.38 0.247 1.94 0.716 4.08 0.749 6.3 0.0079 0.501-0.509 3.08-0.445 4.13 0.113 1.86 0.653 2.33 0.957 3.38 1.27 4.37 2.27 6.22 3.94 7.01 0.985 0.467 2.03 0.865 2.98 1.8 0.335 0.33 0.0755 1.96 0.419 2.24 0.185 0.155 1.84 0.0529 1.96 0 0.973-0.473 1.68-0.429 3.02 0 0.721 0.23 1.76 1.53 2.52 1.74 1.07 0.286 2.79-0.28 4.1-0.0066 0.216 0.0451 0.91-0.214 1.09 0-0.0436-0.0528 0.766 1.35 0.56 1.45-0.232 0.112 1.25 0.115 0.593-0.831 0.443 0.642 0.0642-0.735 0.666 2.29 0.268-0.352 0.396-0.936 0.384-1.75 0.223-0.0663 0.658 2.37 1.01 2.31 0.663-0.111 1.17-6.31 2.14-2.55-0.36 1.22-0.833 1.77-0.453 3.71 0.117 0.601 1.43-0.676 1.64-0.576 1.24 0.585 1.59 5.08 1.72-0.383 0.0199-0.836-0.982-0.239-0.272-2.02 0.525-1.32 0.395-0.719 0.799 1.12 0.569 2.59 0.118 2.87 0.848 3.49 0.0663 0.057 0.949-0.649 1.25-0.472-0.0052-0.0025 0.26 2.24 0.413 2.31 0.188 0.0918 0.629-1.18 0.783-1.73 0.286-1.02-0.0464-4.08 0.449-2.6 0.0965 0.289-0.0481 2.58-0.125 2.22 0.0797 0.38 0.0563 2.5 0.125 2.69h0.965c0.232-1.6 0.458-1.5 0.678 0.298 0.405 0.108 0.552 1.13 1.05-0.559-0.147-1.06-0.854-3.78 0.148-3.78 0.136 2.1-0.369 1.94 0.338 4.04 0.393 1.17 0.889 2.45 1.37 0.66 0.498 1.41 0.217 1.33 0.801 0.727 0.142-0.147 0.75-2.14 0.931-1.97 0 4.1 2.17 2.04 2.54 2.01 0.249-0.0162 1.56 0.803 2.32 0.874 2.12 0.195 4.63-1.38 6.58-1.76 4.35-0.857 8.64-4.07 12.7-8.08 2.22-2.2 4.46-2.95 6.75-4.69 0.975-0.738 2.14-1.78 3.19-2.22 1.01-0.425 2.19-0.238 3.16-1.46 0.674-0.85 1.01-2.23 1.63-2.59 0.341-0.196 0.247-0.028 0.559-0.578 0.325-0.573 0.145 1.83 0.712 0.569 0.217-0.484-0.0793-2.04 0.186-2.38 1.11-1.43 2.27-2.56 3.33-3.39 1.89-1.47 3.37-1.6 4.87-3.95 0.511-0.795 1.15 0.0663 1.88-0.682 0.08-0.0807 0.778-1.77 0.794-1.83 0.236-0.955-0.325-1.44-0.19-2.05 0.323-1.46 0.823-1.7 1.16 0.121-0.147 0.336-0.196 0.819-0.146 1.45 1.8 0 0.349-0.581 0.475-1.54 0.399-3.04 1.5 2.23 0.921-3.07-0.0776-0.707-0.819 0.336-0.798-1.16 0.023-1.57 0.87-1.57 0.875-1.52-3.43e-4 -0.0016-0.379-0.86-0.426-0.789-0.0367 0.0554 0.6-0.859 0.748-1.15-0.0295 0.0597 0.538 0.578 0.509 0.578 0.531-1.15-0.379-1.15-0.359-1.15 0-5.03 0.0604-0.135 0.443-2.61-1.07-4.54 2.74-1.35 2.55-3.74 0.0384-0.735-1.46-1.12-1.58-1.17-0.464-0.222-1.29 0.0766-1.71-0.561-0.331-0.501-0.167-2.18-0.434-2.89-0.167-0.444-0.764-0.573-0.912-0.573-0.0494-0.639 3.26-3.61 3.74-6.35 0.528-3.01-0.161-1.63-0.0978-2.89 0.133-2.63 0.383-0.765 0.981-3.13-0.197-0.795-0.733 0.349-0.733-1.49 0.699 0 0.584-2.56 1.02-3.23 0.346-0.529 1.93 0.978 2.11 0.028-0.07-0.271-0.14-0.542-0.21-0.814-0.0488-0.0082 0.07 0.272 0 0","m56.2 0.033c-6.56 0.319-13 1.11-19.5 2.25-5.03 0.299-9.75 2.39-14.7 3.09-4.09 0.76-8.61 0.178-13 1.04-1.22-2.13-2.78-8.81-5.88-3.41-0.677 4.57-2.49 8.64-2.05 13.3-0.451 9.45-1.52 18.9-1.1 28.4 0.228 7.65 0.318 15.3 0.623 22.9 0.363 4.12 0.337 8.49 1.06 12.4-0.0369 4.8 0.938 9.31 1.75 13.9 0.288 2.65 2.83 8.99 4.56 3.44 2.76-1.65 1.7-5.79 4.37-7.23 0.56-4.09 3.84-0.429 6.06-2.14 2.53 2.05 2.02-5.08 3.28-0.435 2.17-1.26 5.36-3.26 7.12-3.59 1.78-0.77 1.23 0.454 1.6-0.802 0.711 1.66 3.54 1.4 3.93 3.88-0.111-6.19 3.06 3.77 6.73 0.248 3.28 3.78 3.05-3.14 3.7-2.48 3.85-1.51 1.84-6.81 4.16-8.85 0.721 2.38 3.3 3 4.14 0.157 0.731 6.1 3.22-5.43 4.25 0.361 1.78-0.333 2.99 3.12 4.79 0.705 1.9 2.58 5.1 0.637 6.91 2.42 0.591-2.83 0.996 2.83 1.58 0.163-0.0621 3.73 3.64 3.93 3.73-0.178 0.303 1.65 0.703 4.36 1.63 1.21 1.47 3.36 3.43-1.4 3.28 3 1.25 1.4 1.13 2.21 2.44 1.29 1.48 0.725 0.975 1.98 1.91 0.0674 0.336 0.999 0.806-1.03 1.94 0.968 1.41-1.29 1.98 0.987 3.4-1.59 1.13 1.5 2.08 3.72 2.1 2.14 2.22 2.55 2.52-4.81 3.06-6.76 2.32-2.21 0.624-5.66 0.466-8.57 0.17-1.77 1.25-3.32 1.08-5.19 0.619-0.635 1.08 1.06 1.04-1.83 0.513-1.47-0.667-3.65 1.21-5.57-0.537-2.93-0.601-7.87 0.796-7.23-0.682-1.42-1.9-2.1-0.372-3.44 0.642-1.35-0.373-3.97 1.42-3.17-0.289-4.17 0.257-7.83 0.167-12-0.456-4.06-0.163-7.74-0.734-12.1-0.691-3.19 2.33-8.31-1.81-10.1-2.59-1.64-7.45-4.76-8.93-4.68-4.01-0.18-9.63-4.07-12.9-2.21-2-3.23-7.51-1.74-10.9-3.1-2.82-0.278-5.66-0.531-8.49-0.64","m99.9 59.9c-0.429-4.47-0.0208-8.78-1.82-12.8-3.51-4.83 4.14-9.21 0.0086-14.4-2-3.02 3.77-5.44 0.34-7.9 0.494-0.405 0.665-4.2-1.1-3.48-0.446-2.97-4.58-1.1-3.65-5.85-0.691-3.24-2.44-6.98-4.15-7.98-2.1-1.3-2.98-0.0809-5.09 0.394-1.55 1.89-3.26 2.22-5.16 1.69-1.63-0.518-3.75 0.667-4.78 0.566-2.67-0.49-4.87-0.175-7.08 2.25-3.03-0.327-2.67-8.46-6.19-9.93-1.97-3.78-5.31-2.72-7.74-0.973-2.85 0.63-4.4 4.33-6.57 5.6 0.531 2.94-2.6 2.41-1.63 5.27-0.697 1.57-1.07 3.8-2.57 4.01-0.43 0.445-2.1 2.7-2.5 3.19-1.28 0.245-3.51 1.67-3.47 0.213 1.15-1.07-2.13-0.0342-1.28 0.685-1.64-2.25-2.77-3.92-3.85-4.75-0.204 1.99-3.21-1.12-2.73-3.03-0.394-2.08-1.98-0.629-2.93-2.09-1.85 0.617-2.35-2.39-4.13-2.2-2.29-2.49-0.997 2.36-2.6 0.848-3.69-1.58 3.2-0.901-0.826-1.9-1.39-0.0212-2.12-2.89-2.41-1.48 1.28 1.14 0.165 2 1.64 2.31 0.995 3.29-2.34-0.449-3.55-1.63-0.874-0.598 2.09-0.28-0.0556-1.22-2.17 0.249-5.21-2.49-6.77-1.79-0.53-0.149-1.73 2.25-2.9 2.83-1.8 0.753-2.27 4.57-2.74 6.74 1.07 0.208-2.14 2.69-0.139 3.32-1.68 0.0341-1.04 6.3-1.46 8.25 0.00219 2.17-0.114 4.42 0.225 6.19 0.677 2.54 1.3 3.07 2.59 5.42 1.55 3.05 5.97 1.74 8.6 2.5 0.0223-1.58-3.25-0.0475-4.74-2.5-0.0458-0.298 0.105-1.68-0.224-2.45 1.45 0.536 4.37 0.187 0.951-0.121-1.61-0.444 0.726-1.06 0.343-2.19 2.84 0.364-1.46-3.11 1.41-1.01 0.239-0.745 2.54 0.93 2.45-0.0821-1.93-3.05 2.42 2.4 1.49 0.0405 0.337-1.54 2.62-0.292 3.67-0.272 1.85 0.0829 2.43 0.202 3.98 0.76-0.0615 0.618 4.33 1.47 0.663 3.43-3.07 1.17-5.25 3.19-8.23 5.11-2.81 2.09-5.65 5.13-6.71 9.26-1.05 4.27-3.19 8.41-2.01 12.5-0.482 2.44 1.32 4.39-0.938 5.97-2.67 3.49 3.93 6.97 1.12 8.63-0.752-0.662-2.34 4.31-3.1 6.72-0.875 0.844-0.966 4.32-1.08 6.66-0.522 3.04 1.13 6.87 1.43 6.14-0.344 2.44 1.89 3.56 2.78 4.37 2.95 0.334 5.14-0.012 7.96-0.3 1.02-0.116 7.99-0.679 4.58-1.12-1.9 0.568-2.99 0.0635-5.06 0.801-1.98-0.0719-4.46 0.428-6.1-0.464-0.796 0.74-1.37-4.01-0.198-2.79 2.25 1.83-1.25-2.48 1.87-1.7 2.83-1.14 4.91 0.361 7.29-1.18 1.92-0.779 1.23 2.38 3.34 1.57 1.86-1.03 4.08-0.352 5.76-1.37 1.4 1.48-2.71 1.81-1.91 2.31-0.927 1.28 1.61-0.304 1.95-0.506 1.23-0.0631 3.46 0.0403 1.56 1.08-1.62-0.0129-2.25 0.632-3 1.03 2.68 0.946 7.52-1.75 10.8-3.01 2.65-1.18 5.1-3.02 7.15-5.06 2.36-5.25 5.56-0.448 8.86-0.121 1.37-1.21 2.66-1.1 4.4-1.55 0.0892-2.14 2.74-0.396 2.11-0.787-0.0946-1.83 0.691-1.11 1.92-1.52 2.09-0.0898 4.48 1.08 6.41 2.77 0.362-1.34 0.846 2.11 1.13-0.268 0.968 1.25 3.49 3.2 3.65 5.21 1.01-1.45 3.64 1.9 4.08-0.694-0.271-2.53 0.909-6.22 1.15-8.6-0.134-3.46-0.858-9.05-2.99-11.5 0.199-4.15-5.82-5.99-4.68-8.3 1.36 0.976 6.53 3.06 6.34 2.09-2.25-1.37 2.82 0.187 3.62-0.395 2.17 0.514 2.34-0.687 4.81 0.371 2.47-0.21 3.34 0.831 5.7-0.0719 1.08 0.698 2.23-0.448 3.18 1.26 3.06 0.249 2.31 4.17 5.36 0.16 1.82 0.597 1-1.72 2.12-2.56 0.35-0.647 1.28-2.82 1.43-2.46 0.562-0.194 0.836-1.5 0.614-2.24","m99.8 79.3c-1.23 1.28-2.8 1.6-2.71-2.33-0.874 2.34-1.77-2.61-0.384-1.35-0.913-2.54-2.97-0.585-1.54 1.35-0.496-1.88-4.34-1.08-1.8-3.3-0.392-2.5 2.06-5.51 0.458-7.36 2.23 0.0233-1.16-3.53 1.66-3.13 0.976-4.27 1.61-7.65 2.54-10.9-0.918-1.03 0.492-4.21-0.889-3.83 1.26-2.54-1.66-1.5-0.197-4.16-0.239-4.15-0.939-7.77-1.87-11.8-1.58-7.17-5.22-10.5-8.2-15.2-1.74-2.23-5.4-4.65-6.26-5.48-0.845-1.88-2.96-1.74-4.16-3.92-0.963-1.67 1.65 3.7-0.523 0.815-1.12-2.24-2.85 1.85-2.98-2.14-1.31-1.61-4.23-3.32-5.55-1.8-1.35-3.46-3.65-0.563-5.08-2.75-1.37 0.15-1.43 0.812-3.27 0.0912-0.8-0.479-3.38-4.46-3.03 0.259-1.56 0.0992-2.49-3.03-3.33 0.506-1.32-0.386-2.76-2.34-3.8-2.61 1.48-0.779-3.9 0.356-0.338 0.951-1.41 0.994-2.97-2.17-1.86 1.46-1.74 0.622-5.09-1.66-2.91-1.2-1.4-2.06-1.98 1.32-3.26-1.26-0.679-0.164 0.482 2.12-1.26-0.0521-0.111 2.63 3.46 2.95 1.05 3.72-0.366 2.68-2.17-7.37-2.62-1.92 3.35 5.38-5.4 2.82-0.71 2.85 1.03-0.871-0.364-0.422 0.205-1.98-1.71 1.42-3.3 1.78-3.02-0.928-0.314 0.993-2.58-0.631-3.25 1.06-1.36-1.31-3.83-0.359-4.09 1.87 0.109 2.08-4.2 1.16-1.38 1.87-0.768 3.09-2.3 0.448-2.59 1.81-0.0473-3.64-2.18-2.31-0.257-0.0301-0.4 2.61 0.264 4.08-1.29 1.17-1.11 1.41-3.49-1.06-3.28 2.56-1.32 0.226-2.8-2.86-3.12 2.33-0.132-5.07-1.49 0.898-3.15-1.67-1.97 1.34-0.959 5.64-2.79 3.3-1.45 1.59-2.56 2.9-0.0603 1.39 0.498 3.59 3.38-2.18 1.75 1.61-1.73 0.89-3.63-0.669-4.79-0.0128-0.534 1.76 0.746 0.52-1.52 2.29-1.55 2.33-0.801 3.98-2.57 5.16 1.49 2.66 0.664 1.18 1.96 0.066 0.434 2.2-0.976 5.15-0.955 2.48-3.51-4.16 1.35 4.45-2.06 2.94-0.618 1.66 1.58-0.0786 0.436 2.27-1.8 4.07-1.17 9.35-0.621 14 0.402 2.92-0.0393 3.11 0.497 3.64-0.331 2.66 0.431 3.91 0.22 6.05 0.719 0.111-1.02 2.41 0.871 4.3-0.0436 3.58 0.613 6.96 2.21 9.59 2.35 1.7 3.41 4.1 5.51 4.43 1.39 5.72 5.4 7.3 8.07 10.4 2.82 3.17 6.86 4.01 9.36 6.34 1.84 0.142 3.4 1.4 4.74 1.79 1.58 0.552 2.87-0.366 2.07 1.17 2.6-0.306 3.43 1.66 6.02 1.37 2.78 1.87 6.31 1.85 9.12 1.73 2.8 2.46 4.38-1.47 6.07 0.698 3.54-0.298 7.35-0.155 11-1.52 2.47-0.667 5.1-1.55 7.58-1.95 1.75-0.981 3.32-0.539 5.03-0.831 2.11-0.536 3.45-1.66 4.62-1.14 1.99-2.58 4.23-0.53 6.26-3.67 0.324 2.76 3.77-2.67 4.44-1.66 0.644-1.53 1.18-3.73 1.15-1.54 1.53 8.08e-4 -0.0866-2.07 2.03-2.28 0.463 1.49 3.36-3.95 2.43-5.98","m64.2 0.539c-3.04 1.13-4.28 1.48-7.29 2.16-2.93 0.926-5.25-0.384-6.34 3.44-0.19 2.45-1.8 3.55-3.03 6.32 0.108 3.53-5.56 3.56-2.35 1.79-2.19-2.65-6.04-3.21-9.46-3.61-3.18 0.962-5.72 1.02-7.97 2.44-2.01 1.05 1.32 1.78-1.55 2.46 0.234 4.66-4.92 2.17-7.55 4.76-2.35-0.93-5.47 1.08-4.9 1.17-1.32-0.158 1.23 3.18-1.62 2.75-1.76 1.03-4.26 2.49-2.67 3.79-2.22 1.65-3.12 5.44-4.02 9.36-1.42 3.27 0.484 7.57-1.55 9.1-0.778 3.13 0.0511 6.82-0.816 8.38 0.33 1.07-0.709 2.21-0.265 3.18-2.15 0.906 0.318 3.89-0.247 4.91-1.03 3.9-0.923 5.95-1.73 8.36 0.35 1.94 0.102 5.22-0.347 6.91-1.12 2.26 1.43 6.21-0.447 6.94 0.0358 3.06 2.24 1.14 1.15 3.73 1.52 2.36 2.73 3.76 5.62 6.23 0.927 0.525 4.32 4.39 7 4.89 1.62-1.38 3.94-3.44 5.19-6.32 2.59-0.889 5.01 2.84 6.32 1.6-0.752 1.86 3.63 0.13 4.68 2.69 0.384 0.0568 1.7-1.95 1.51-0.607-2.51 2.91 3.17 1.17 2.3 0.963-0.257 2.72 3-0.793 3.03 0.11 1.77-0.129 0.96-2.42 2.31-0.695-0.726-0.685 1.65-3.56 1.86-1.19-0.799-3.27 2.71-5.48 3.01-8.76-1.44-0.786-8.22 1.44-2.83-0.345 2.9-0.209 4.13-0.42 5-2.82 2.54 1.85 4.65 3.55 6.86 4.37 1.83-1.33 1.82 0.143 1.01 1.35 3.12-2.09-1.13 1.54 2.65 0.572 2.27 2.39 4.95 1.27 7.51 0.842 1.54-1.6 3.05-0.883 3.72-3.58-0.856-0.757 2.88 0.329 2.85-2.42 0.71-2.56 4.67-2.24 3.75-3.73 1.09-0.163 2.86-4 4.19-1.51-0.912 1.37-3.02-1.52-2.18 1.38 2.59 0.157 2.94-3.7 5.31-3.46 0.195-0.817 1.5 2.01 0.332-0.81-3.65 0.277-0.695-3.85 0.926-1.84 1.51-1.34-0.182-2.91-1.26-1.47-3.11-0.966 2.58-1.69 3.22-2.65 0.724-0.837-3.99-0.537-1.15-1.43 0.207-0.0239 2.33-2.25 0.396-2.21 1.75-1.03 0.404-2.77 3.06-1.65-2.13-1.35 4.25-1.89 0.951-3.16 2.05 0.115 0.407-1.17 1.51-2.55-1.23-1.97-0.913-2.48 0.164-3.68-3.58-1.14 3.32-3.83 0.162-0.809 1.43 1.04 2.96-3.68-0.242-2.09-0.637-0.992 4.45-0.246 0.689-1.5 2.7-2.59-2.1-0.753 0.177-3.6 1.07-1.15 2.59-1.79 2.61-3.95-0.219-1.26 0.806-4.08 0.025-4.69 1.09-0.882 1.92-1.99 2.06-3.32 0.889-0.326-0.453-2.78 1.45-1.56-1.42-2.04 0.433-2.61-0.0815-4.94 2.65-1.48-2.48-2.36 1.4-2.28 1.12-1.01 2.32-4.78 1.59-5.76 1.2-1.01-3.05-1.28-0.352-2.6-0.95-0.331-2.6-0.781-0.343-1.39-1.22-3.04-2.16 1.36-2.79-1.89 0.717-0.51-2.24 0.659-1.16-0.68-1.36 1.93-4.2-1.53-2.41 1.45-1.39-1.07-3.78 0.856-1.96-2.22-1 0.261-2.11 1.78-4.01 1.33-2.63 1.47-3.27 0.8-6.2 1.05-1.86-0.919-0.729 1.95-3.33 0.295-4.17 1.08-1.6-5.9-2.7-8.54 0.219-2.95-1.7-5.27-4.39-5.74 0.0318-1.12-0.108-0.55 0.847-2.61-0.53-2.2-3.05 2.19-4.21-0.651-0.985 1.5-1.5-1.46-2.61 0.229z","m97.3 57.2c-3.41 0-4.74-6.08-8.05-6.1-1.29-0.795-3.87-0.991-2.73-2.24-0.461 0.105 4.07-1.76 2.58-2.95-0.276 0.0469-1.66-4.4-1.88-1.47-1.36-0.391-1.07-2.36-1.27-1.62-1.62 0.0399 8.03-1.15 6.51-0.797-1.78 0.597-1.31-1.57-2.35-2.4-0.458 0.327-4.94-0.923-1.01-0.854-0.831-1.1-0.472-1.75 0.0586-4.04 0.533-1.89-2.5 0.207-0.825-1.39-0.89-1.75-1.09-0.904-1.57-3.06-1.16-0.951-1.78-1.03-2.84-1.14 2.11 0.151-0.32-2.08 1.08-1.45 0.421-0.661 8.25-3.23 7.96-4.94-1.57-1.95-1.71-0.0456-3.1-3.81 0.665 3.54-0.192 0.654-0.944-0.899-0.654-1.49-1.36-3.11-2.92-4.35-1.19-2.92-0.257 2.7-1.65-0.177-0.363-2.09-3.08 0.626-1.6-1.95 0.915-1.38 5.96-7.76 6.92-5.41-1.84-0.314 0.0411-0.555-1.4-2.01-2.65-0.62-0.587-2.27-2.83-1.94-0.891-1.13-0.313-0.513-0.368-1.36-1.07-1.02-1.2-1.36-1.13 0.396-1.83-0.483-2.44-0.812-3.45-0.308-2.32-0.0102-9.13-0.462-12-0.359-0.581 0.361-2.24 4.17-3.12 3.74-0.345 0.803-29-4.16-30.3-2.87 0.426-0.902-5.43-0.656-2.95-0.38-2.09 0.429-2.98 0.345-3.78 0.739-1.76 0.0938-2.27 3.72-3.7 3.74-0.875 1.71-1.59-0.443-2.57 0.925-1.59-0.0625-4.02-0.262-3.68-0.529-1.73 0.25-2.36-0.259-2.95-0.822-1.27 0.255-1.65-3.16-3.36-3.25-1.77-0.478-3.08 0.112-4.51-0.279-0.795-1.08-2.01-0.597-2.79-0.309-1.29 0.673-2.41-1.64-3.25-0.36 0.269 3.8-0.413 9.13-1.18 9.65-0.958 3.77 6.29 8.17 4.95 11.7 0.33 2.17-5.9 4.99-5.18 7.06-0.151 3 2.7 2.24 4.34 1.83 1.55 1.14 3.65-0.928 4.48 1.08 0.844 4.55-4.57 7.76-2.15 12.5 0.93 4.55 5.67 2.93 8.52 4.87 2.87 0.757 9.05 1.51 3.39 4.16-3.63 3.38-20 9.73-18.1 14.2 2.82 2.46 6.51 1.82 9.54 2.71 2.8 0.982 5.74 0.786 8.6 2.07 3.35 1.2-2.94 2.88-3.3 5.45-2.42 3.72-3.78 8.59-3.09 13.1-0.57 4.75 4.49 3.18 7.13 4.2 8.46 2.12 33.1 4.16 41.8 4.31 5.06 0.0968 10.1 0.248 15.2 0.179 2.56-1.15 5.94 0.664 9.04-0.886 3.42-0.389 7.19-1.46 10.3-3.45 2.26-1.65 5.26-6.01 3.7-9.75-1.99-2.48-3.9-6.12-4.74-8.06-1.1-2.55-3.59-3.99-5.43-5.01-1.16-0.584-3.28-0.481-4.21-0.804 1.7-2.1 14.6-5.56 14-9.31 0.303-2.06-0.0416-5.48-1.94-5.48z","m86.9 0.416c-2.65 0.408-5.71-0.589-8.11 0.475-3.02-1.44-6.37 0.199-9.03-0.782-1.92 1.65-4.94 0.317-7.17 0.0679-3.2 0.55-7-0.879-10.1 0.314-2.97-0.426-6.34-0.492-9.57 0.108-2.95 0.128-6.34-0.391-8.93 0.331-2.24 0.0952-4.71-0.758-6.98 0.496-3.21-0.616-6.48-0.693-9.53 0.357-2.98 0.795-5.03 3.75-7.08 7.64-2.73 2.45-6.1 3.3-7.82 8.86-0.445 0.677-3.29-2.09-2.51 1.37 3.26-1.21-0.803 8.33 2.38 10.4 0.42 6.11 3.88 6.35 6.25 6.63 2.29 1.75 5.76-1.33 7.03 3.1-1.79 2.08-4.22 2.77-6.05 4.95-3.39 4.3-4.2 11.5-2.08 17.9 1.85 5.04 0.776 12.6 2.91 17.4 1.53 2.54 3.71 2.13 5.02 3.42 3.52-1.88 2.62 7.15 5.18 8.6 2.6 2.27 5.67 1.43 8.43 2.78 2.92 0.673 5.36-0.13 8.13 0.67 2.73-0.475 5.51 1.53 8.19 0.136 2.71 1.99 5.7 0.76 8.48 1.13 1.47 0.551 3.01-0.468 4.52 0.174 2.15 1.32 4.49 0.423 6.78 0.366 2.48 1.8 5.74 1.69 8.46 1.47 2.86-1.03 5.56 1.22 8.36 0.503 2.47 1.6 5.08 0.104 7.27-0.656 0.0273-4.47 3.15-5.73 2.5-11.4 2.59-4.28 1.77-10.5 0.635-15.5-2.25-5.73-7.91-4.13-7.78-12.2-0.15-5.61 5.39-0.0295 7.76-2.7 2.57 1.77 5.55 0.341 6.09-4.8 3.49-3.55-0.732-9.66 0.471-13.6-1.53-2.77-3.79-5.59-6.39-4.86-1.83-0.569-3.35-0.944-2.87-5.04-3.26-3.66 2.44-4.1 2.02-8.61 3.91-6 0.769-13.5-2.16-17.9-0.935-0.187-1.76-1.25-2.72-1.66z","m0 97.2v-97.2h100s-1.64 4.67-2.14 7.16c-0.493 2.49 1.85e-4 0.623-1.07 2.18-1.07 1.56-1.97 2.18-2.47 4.05s-0.658 3.11-1.4 3.11c-0.74 0-1.32-0.622-2.14 2.18-0.822 2.8-0.904 3.43-1.81 4.36-0.905 0.934-1.07 3.43-1.64 5.3-0.576 1.87-1.07 2.18-1.97 4.05-0.904 1.87-2.38 3.12-3.04 4.98-0.658 1.87-1.48 4.67-1.73 6.54s-1.81 6.23-3.45 7.79c-1.64 1.56-3.37 2.49-4.03 4.05-0.658 1.56-1.07 3.43-2.06 3.74-0.987 0.312-6.09 9.35-7.98 9.03-1.89-0.311-4.19-0.312-4.44 2.18-0.247 2.49-1.89 2.18-3.95 0.623-2.06-1.56-3.37-0.623-5.51 2.8-2.14 3.43-2.88 0.311-3.62-0.623-0.74-0.934-4.11 1.25-5.35 2.49-1.23 1.25-2.06 1.56-3.37 1.56-1.32 0-3.21 5.3-4.19 5.61-0.37 0.117-0.821 0.102-1.27 0.0869-0.757-0.0243-1.52-0.0486-1.93 0.535-0.658 0.934-1.56 3.74-2.22 4.67-0.658 0.934-2.47 0.934-2.96 0.934-0.494 0-2.14-2.49-3.54 0-1.4 2.49-3.04 4.98-4.36 4.05-1.32-0.934-2.63-4.05-3.7-1.56-1.07 2.49-3.45 8.41-4.19 8.1-0.74-0.312-4.19-1.87-5.02-2.18-0.822-0.311-3.45-0.622-3.45-0.622","m0 100v-100s2.5 1.73 2.92 3.47c0.417 1.73 1.04 3.18 2.08 3.47 1.04 0.29 1.87 0.00176 2.81-0.288 0.937-0.29 1.98 2.02 3.02 2.6 1.04 0.577 3.44 1.15 4.17-0.29 0.729-1.44 1.46-1.16 2.29 0 0.833 1.16 2.19-0.867 4.48-1.73 2.29-0.867 3.54-4.34 4.69-2.6 1.15 1.73 2.71 4.62 3.33 5.2 0.625 0.577 0.729 1.73 2.08 4.05 1.35 2.31 3.75 1.16 4.9 0.867 1.15-0.288 3.65-0.867 4.06 0.867 0.417 1.73 3.54 11 5.83 11.3 1.15 0.146 1.98 0.0728 2.63 8.46e-4 0.65-0.072 1.12-0.145 1.54-8.46e-4 0.833 0.29 1.15 2.31 2.08 3.18 0.937 0.867 1.04 2.02 2.6 2.89 1.56 0.867 2.6-0.29 4.06-1.44 1.46-1.16 3.65-3.47 5.1-2.6 1.46 0.867 1.35-0.577 3.85 2.02 2.5 2.6 3.54 3.18 5.52 3.76 0.729 0.213 0.978 0.152 1.21 0.0902 0.397-0.106 0.743-0.211 3.37 1.07 4.17 2.02 4.9 0.867 6.77 0.867 1.88 0 6.04-0.867 7.4 0.29 1.35 1.15 3.96 1.16 4.9 0 0.937-1.16 2.29-1.73 2.29-1.73v43.9s-2.5-2.89-3.85-1.45c-1.35 1.45-2.81 2.89-3.75 3.76-0.937 0.867-2.71 2.02-4.17 2.02-1.46 0-2.08 2.02-4.06 2.02-1.98 0-4.58 0.869-5.83-0.577-1.25-1.44-2.19-1.44-3.85-2.6-1.67-1.16-2.92-1.15-3.85 0-0.938 1.16-5.21 2.89-6.25 4.34-1.04 1.44-3.02 2.02-3.85 2.02-0.834 0-3.85-2.6-4.48-2.02-0.625 0.577-4.58 2.89-6.04 5.49-1.46 2.6-3.33 2.89-4.9 2.89-1.56 0-3.13-0.29-5.1-1.16-1.98-0.867-7.71-3.18-8.33-2.89-0.625 0.29-1.77 2.89-3.85 4.62-2.08 1.73-4.17 2.6-5 2.6h-6.25c-0.312 0-2.92-0.577-4.06-1.16-1.15-0.577-1.77-2.31-2.71-2.89-0.937-0.579-0.938-2.31-2.6-1.16-1.67 1.16-1.56 0.867-3.33 2.31-1.77 1.45-3.85 4.62-3.85 4.62","m0 70.8v-70.8h100v97.9s-3.74-2.93-6.23 0c-2.49 2.93-2.74 2.56-5.24 0-2.49-2.57-4.24-1.83-7.23-2.57-2.99-0.732-6.98-1.46-7.48-3.66-0.498-2.2-2.24-2.93-3.74-2.2-1.5 0.733-6.73 0.366-8.23-0.733-1.5-1.1-1.5-3.66-5.24-5.49-2.08-1.02-2.69-0.34-3.49 0.339-0.64 0.543-1.4 1.09-3.11 0.76-3.87-0.733-5.36-3.3-7.11-3.3-1.75 0-4.24 2.56-7.48 0.733-3.24-1.83-2.49-3.16-7.23-3.41-1.67-0.0891-3.06 0.414-4.32 0.919-2.33 0.929-4.23 1.86-6.65-0.919-3.74-4.28-4.24-5.75-8.23-5.02-3.99 0.733-4.99 3.3-6.98 0.367l-2-2.93","m100 19.6v80.4h-100v-97.8s2.29-4.97 4.38 0c2.08 4.97 5.42 5.62 6.46 4.97 1.04-0.654 4.79-0.654 5.62-0.654 0.833 0 4.38 3.79 5 3.86 0.625 0.0667 1.88 0.585 3.54 0 1.67-0.586 3.96-1.38 4.58 0 0.625 1.37 2.08 3.99 3.13 4.64 1.04 0.654 1.67 0.654 3.54 0.654 1.88 0 4.58 1.99 6.04 3.94 1.46 1.95 1.25 0.64 3.75 5.87 2.5 5.23 1.46 11.1 3.96 8.82 2.5-2.29 2.71-0.327 5.21-4.25 2.5-3.92 2.29-3.92 4.79-5.88 2.5-1.96 5.83-6.51 6.56-4.56 0.729 1.95 3.65 2.6 5.31 3.25 1.67 0.654 1.67 3.27 3.96 1.31 2.29-1.96 1.04-4.55 4.79-4.56 1.26-0.0049 2.21 0.216 3.16 0.437 1.88 0.437 3.73 0.875 7.88-0.436 6.25-1.97 8.33 0 8.33 0","m0 0v100h100v-45.4s-4.66-9.87-7.4-4.61c-2.74 5.26-5.48 1.97-8.22 0-2.74-1.97-9.04-8.55-11.2-7.89-1.04 0.312-2.57-0.705-4.12-1.72-1.73-1.13-3.49-2.26-4.64-1.57-2.19 1.32-3.56 2.63-7.12 0-3.56-2.63-2.47-6.58-7.26-5.26-4.8 1.32-8.08 0-11.9-3.29-3.84-3.29-4.11-7.89-9.32-7.24-5.21 0.658-7.75 2.16-9.04-1.32-2.19-5.92-1.1-7.89-4.66-9.87-3.56-1.97-2.74-5.26-5.75-6.58-3.01-1.32-9.32-5.26-9.32-5.26","m100 0.435v98.2s-2.49 0.722-4.98 0c-1.01-0.293-2.02 0.175-2.98 0.643-1.41 0.684-2.71 1.37-3.77-0.323-1.78-2.85-1.78-3.57-5.69-3.57-3.91 0-6.4-0.361-7.46-1.08-1.07-0.722-3.55-3.25-5.33-3.25s-3.55-0.722-7.82 0c-4.26 0.721-11.4 2.89-14.9 1.44-3.55-1.44-6.4-3.25-8.17-3.25s-6.75 1.08-8.53-1.08c-1.78-2.17-0.711-4.33-4.62-4.33-3.91 0-3.2-0.361-7.11-0.722-3.91-0.361-7.46-2.53-8.88-3.61-1.42-1.08-3.91-2.17-6.4-3.61-2.49-1.44-4.26-3.61-2.84-5.41 1.42-1.81 2.13-5.05 2.84-6.86 0.711-1.8-1.07-7.51 0-8.08 1.07-0.58 2.13-4.62 2.13-5.3 0-0.69 0.711-6.1 0.711-6.1s1.42-4.69 1.42-6.32c0-1.62 1.07-3.79 1.78-6.32 0.711-2.53 0.355-2.89 1.07-6.14 0.71-3.25 1.07-6.14 2.13-9.02 1.07-2.89 0.711-4.33 2.13-6.86 1.42-2.53 3.2-2.37 6.4-2.63 1.24-0.101 2.64 0.078 3.97 0.257 2.11 0.283 4.04 0.566 4.91-0.257 1.42-1.34 9.59-2.79 11.4-3.51 1.78-0.722 5.54-0.722 8.63-0.361 3.1 0.361 7.36 0.722 9.49-0.361 2.13-1.08 4.97-3.61 7.46-2.17 2.49 1.44 7.11 1.81 9.95 1.81 2.84 0 8.17-0.361 9.59-0.361 1.42 0 13.5-1.44 13.5-1.44","m0 100h100v-98.1s-2.26 2.58-3.06 6.45c-0.799 3.87-1.86-3.87-2.53-6.45-0.666-2.58-2-2.58-2.66 0-0.666 2.58-2.93 5.16-3.59 10.3-0.666 5.16-2 1.29-3.33 5.16-1.33 3.87-2.8 3.87-3.6 5.16-0.799 1.29-1.86-1.29-2.53-3.87-0.666-2.58-0.932-9.03-1.86-7.74-0.359 0.498-0.835 0.0392-1.33-0.418-0.794-0.735-1.64-1.47-2.13 1.71-0.799 5.16-2.13 1.29-2.93 5.16-0.349 1.69-0.546 1.66-0.802 1.62-0.329-0.0434-0.754-0.0898-1.73 3.54-1.73 6.45-1.73 7.74-3.59 14.2-1.86 6.45-3.99 6.45-4.66 6.45-0.666 0-2.13-3.87-3.2-5.16-1.06-1.29-3.86-9.03-4.26-7.74-0.16 0.516-0.383 0.207-0.658-0.103-0.412-0.465-0.94-0.93-1.54 1.39-0.999 3.87-0.999 5.16-2.73 9.03-1.73 3.87-3.73 1.29-4.39 1.29-0.666 0-1.86-9.03-3.06-6.45-1.2 2.58-2 2.58-3.06 6.45-1.07 3.87-0.133-0.645-3.06 8.06-2.93 8.71-4.53 11.3-5.86 8.71-1.33-2.58-0.266-8.39-2.53-8.71-2.26-0.323-0.133-4.19-2.26-0.323-0.926 1.68-1.48 0.318-1.93-1.05-0.592-1.77-1.03-3.55-1.93 1.37-1.6 8.71-1.86 3.55-3.46 10-0.888 3.58-1.73 3.19-2.59 2.79-0.681-0.318-1.36-0.635-2.07 1.08-1.6 3.87-2.93 9.03-3.73 12.9-0.799 3.87-1.73 5.16-2.8 6.45-1.07 1.29-3.06 7.74-3.06 7.74l-1.46 9.03","m0.642 91.6c2.18-0.834 1.23 0.646 2.08 5.01 1.15 5.89 2.04-0.393 3.53-1.92 0.997-1.02 1.1-0.0486 1.34 0.919 0.167 0.677 0.401 1.35 1.05 1.35 0.673-0.0028 1.21-2.06 1.94-2.16 0.618-0.0861 1.53 1.26 2.16 1.6 0.978 0.537 2.32 1.11 3.25-0.214 1.12-1.6 1.06-5.87 1.91-7.36 0.49-0.854 1.61-0.912 2.23-1.08-0.0448 3.49 1.27 7.03 2.23 2.97-0.228 3.71 0.481 3.62 1.48 5.18 0.689 1.07 2.22 1.88 3.09 2.98 2.56 3.23 3.88-1.12 6.34-2.31 1.83-0.88 2.74-0.315 4.27 1.94 1.62 2.39 1.83 1.85 3.39-0.883 2.19-3.85 4.81-0.0486 6.84-5.73 1.17-3.28 0.699-3.87 2.54-4.2 0.763-0.135 2.62-0.893 3.33-0.516 1.6 0.843 1.1 5.2 2.63 6.59 0.307 0.282 0.625 0.0555 0.928-0.171 0.274-0.205 0.537-0.41 0.77-0.239 0.545 0.403 0.557 1.66 1.03 2.34 1.35 1.98 2.47 2.41 4.01 2.77 0.848 0.193 1.74-0.0541 2.63-0.301 1.06-0.296 2.12-0.591 3.09-0.132 0.718 0.339 1.3 2.06 2.05 1.66 0.934-0.498 1.31-4.57 1.87-6.2 0.859-2.48 1.25-4.16 3.04-3.21-0.524 6.14 3.33 4.11 4.71 3.39 0.848-0.446 1.36-0.7 2.04-2.01 0.888-1.71 1.56-7.51 2.84-7.75 1.02-0.192 4.02 7.53 5.11 9.04 1.52 2.12 2.79 3.41 4.23 0.0153 0.722-1.7 2.48-6.64 1.64-8.7 0.507-2.05 1.15-2.65 2.49-2.7 0.44-0.0167 0.848 0.0333 1.24 0.107v-81.6c-0.445 0.429-0.885 0.876-1.32 1.37-0.33 0.378-1.05 0.343-1.33 0.957-0.295 0.639-0.319 2.69-0.593 3.12-1.62 2.53-1.55 0.0208-3.15-1.53-0.362-0.351-0.409-1.3-0.906-1.61-0.242-0.149-0.558 0.107-0.892 0.362-0.337 0.257-0.691 0.515-1.01 0.358 0.0703-6.64-4.2 2.67-5.42 3.23-1.38 0.637-2.65-0.368-3.9-1.37-1.68-1.36-3.33-2.72-5.16-0.0236-2.46 3.62-3.81 10.4-7.44 10.5-0.598 0.0125-1.15-0.317-1.7-0.646-0.552-0.329-1.1-0.658-1.68-0.646-1.25 0.0264-2.54 2.7-3.82 1.58-1.11-0.979-1.29-4.91-2.23-5.75-0.609-0.541-1.21 0.146-1.81 0.832-0.576 0.659-1.16 1.32-1.76 0.894-1.14-0.802-1.5-4.69-2.45-6.31-1.24-2.12-2.71-1.89-4.11-1.23-1.89 0.883-3.13 3.74-4.83 5.04-0.567 0.432-1.31 0.0986-2.06-0.235-1.04-0.465-2.1-0.93-2.71 0.677-0.65 1.7 0.652 7.88-0.753 9.93-1.3 1.9-0.737-0.33-1.75-1.81-0.856-1.25-0.647 0.13-1.34-1.47 0.523-2.12 1.3-4.75 0.92-7.43-0.264-0.0514-0.611-0.018-0.991 0.0153-1.09 0.0944-2.45 0.189-2.96-1.65-0.319-1.14 0.104-5.07-0.0232-6.59-0.958 0.0236-10.5 11.6-9.23 1.89-0.96 4.56-3.26 9.14-5.33 7.57-0.658-0.497-1.2-2.3-1.84-2.73-0.614-0.419-1.21-0.204-1.82 0.0111-0.399 0.14-0.803 0.282-1.22 0.244-0.86-0.0764-1.94-1.51-2.72-1.16-1.38 0.628-2.42 4.97-3.89 5.08-2.16 0.172-2.31-5.77-4.01-7.49-0.809-0.822-1.8-0.18-2.79 0.99v86.8c0.206-0.0403 0.418-0.0958 0.642-0.18","m89.3 0h-89.3v94.5c0.542 1.3 1.03 2.47 1.34 2.65 1.24 0.722 1.8-3.48 2.81-4.09 1.45-0.875 0.831 1.28 2 2.99 1.64 2.4 2.1-1.09 3.84-1.12 0.421-0.0071 0.747 0.258 1.04 0.524 0.65 0.593 1.12 1.19 2.09-1.25-0.447-1.41-1.17-2.01-1.74-3.04 0.802-1.44 1.52-2.38 2.16-4.14 0.692-1.9 0.15-4.06 1.52-4.07 0.985 4.63-0.761 7.72 1.38 9.28 0.3 0.219 0.6 0.0435 0.906-0.131 0.334-0.191 0.674-0.382 1.03-0.059 0.792 0.725 1.15 4.18 1.89 4.91 1.78 1.76 6.06-6.96 4.09-12.7 1.24-2.15 2.73-3.02 3.98-5.06 0.969-1.58 1.69-4.6 2.79-5.47 0.38 5 1.7 8.26 3.69 10-0.615 1.29-1.16 2.77-1.36 4.72 0.938 2.73 2.26 0.706 3.42 0.376 2.77-0.789 1.47 2.79 3.45 4.97 0.963 1.06 1.94-0.59 2.96-2.24 1.11-1.79 2.26-3.58 3.49-1.91 0.604 0.819 0.825 3.53 1.52 4.56 0.557 0.829 0.962 0.787 1.41 0.746 0.269-0.0239 0.554-0.0492 0.897 0.118 0.897 0.437 1.79 1.55 2.72 1.91 0.591 0.223 1.14 0.0056 1.65-0.211 0.63-0.264 1.22-0.528 1.8 0.0014 0.474 0.434 0.482 2.86 1.25 3.21 0.891 0.416 1.58-2.12 2.33-2.78 1.33-1.17 2.89-0.27 3.82-3.51-0.602 0.574-1.3 0.93-1.9 0.949 0.283-3.84 1.86-5.23 3.06-6.95-0.181-1.04-0.013-2-0.12-2.98 0.539 1.01 1.17 1.33 1.77 0.697-0.922-4.21 0.292-5.18 1.53-7.87-0.427 2.09 0.193 5.48 0.213 7.66 0.0284 3.21-0.28 2.65 0.266 5.81 0.337 1.95 1.17 0.185 0.604 3.3 1.39 2.93 7.69 4.26 5.58-4.16 0.871-0.0885 1.21 1.17 1.56 2.43 0.444 1.63 0.89 3.26 2.49 1.96 0.744-0.6 1.44-3.09 2.16-3.37 1.76-0.671 1.24 3.23 2.81 3.75 1.31 0.438 2.66-4.45 3.85-5.48 0.512-0.442 0.951-0.358 1.44-0.274 0.267 0.0464 0.548 0.0927 0.864 0.052 2.22-0.284 3.09-4.96 1.35-9.59 1.11-1.21 1.7-2.88 2.47-4.96 1.5-4.03 0.88-3.53 2.82-0.896 1.06 1.44 2.01 3.27 3.03 0.126v-73.9h-10.7","m0 51.2c3.3-2.88 6.4-5.95 9.3-9.33-0.9-1.59-2.1-3.08-3.9-3.57-0.8-1.49 0.2-3.47 1.7-4.46 0.3-0.198 0.6-0.298 0.9-0.496-0.1-0.198-0.2-0.496-0.3-0.694 1.6-1.49 3.1-2.98 4.6-4.46 0.6 0.298 1.2 0.694 1.8 0.992-0.3-0.595-0.6-1.19-0.9-1.69 0.7-0.496 1.4-1.09 2.2-1.59-0.3-1.39-0.8-2.78-2.1-3.67-0.1-1.69 1.5-3.08 3.3-3.47 0.3-0.0992 0.7-0.0992 1-0.0992v-0.794l6-2.38c0.4 0.496 0.8 1.09 1.3 1.59-0.1-0.694-0.1-1.29-0.2-1.98 0.8-0.198 1.6-0.397 2.5-0.595 1.1-3.17 1.7-6.45 1.9-9.82 1.1 0.595 2.4 0.198 3.6 0.198 1.1 0 2.3 0.496 2.6 1.49 1.6 0.0992 3.4-0.198 4.8 0.496 0.8 0.397 1.5 1.09 2.2 1.79 2.3-2.58 4.3-5.46 5.8-8.63 0.8 0.893 2.1 1.09 3.3 1.59 0.7 0.694 1.7 1.69 1.6 2.68 1.4 0.694 3.2 1.09 4.2 2.28 0.5 0.496 0.8 1.19 1.1 1.88 3.6-1.09 7.3-2.28 10.9-3.37 1 3.37 2.4 6.55 4.1 9.62 3.9 0.397 7.8 0.694 11.8 1.09-0.4 3.17-0.4 6.35-0.1 9.52 0.3 0.298 0.6 0.694 0.8 1.09 0 0.694-0.1 1.39-0.1 2.08 0.9-0.198 1.7-0.694 2.4-1.19 2.4 1.29 5 2.08 7.7 2.58-1.6 3.27-3 6.55-4.3 10 0.4 0.595 0.6 1.29 0.6 1.98-0.3 0.595-0.6 1.19-0.9 1.88 0.9 0.0992 1.8 0 2.7-0.198 1.7 2.08 3.8 3.87 6.1 5.26-3.3 2.88-6.4 5.95-9.3 9.33 0.9 1.59 2.1 3.08 3.9 3.57 0.8 1.49-0.2 3.47-1.7 4.46-0.3 0.198-0.6 0.298-0.9 0.496 0.1 0.198 0.2 0.496 0.3 0.694-1.6 1.49-3.1 2.98-4.6 4.46-0.6-0.298-1.2-0.694-1.8-0.992 0.3 0.595 0.6 1.19 0.9 1.69-0.7 0.496-1.4 1.09-2.2 1.59 0.3 1.39 0.8 2.78 2.1 3.67 0.1 1.69-1.5 3.08-3.3 3.47-0.3 0.0992-0.7 0.0992-1 0.0992v0.794c-2 0.794-4 1.59-6 2.38-0.4-0.496-0.8-1.09-1.3-1.59 0.1 0.694 0.1 1.29 0.2 1.98-0.8 0.198-1.6 0.397-2.5 0.595-1.1 3.17-1.7 6.45-1.9 9.82-1.1-0.595-2.4-0.198-3.6-0.198-1.1 0-2.3-0.496-2.6-1.49-1.6-0.0992-3.4 0.198-4.8-0.496-0.8-0.397-1.5-1.09-2.2-1.79-2.3 2.58-4.3 5.46-5.8 8.63-0.8-0.893-2.1-1.09-3.3-1.59-0.7-0.893-1.7-1.88-1.6-2.88-1.4-0.694-3.2-1.09-4.2-2.28-0.5-0.496-0.8-1.19-1.1-1.88-3.6 1.09-7.3 2.28-10.9 3.37-1-3.37-2.4-6.55-4.1-9.62-3.9-0.397-7.8-0.694-11.8-1.09 0.4-3.17 0.4-6.35 0.1-9.52-0.3-0.298-0.6-0.694-0.8-1.09 0-0.694 0.1-1.39 0.1-2.08-0.9 0.198-1.7 0.694-2.4 1.19-2.4-1.29-5-2.08-7.7-2.58 1.6-3.27 3-6.55 4.3-10-0.4-0.595-0.6-1.29-0.6-1.98 0.3-0.595 0.6-1.19 0.9-1.88-0.9-0.0992-1.8 0-2.7 0.198-1.7-1.79-3.8-3.57-6.1-5.06z","m100 48.7c-3.3 2.89-6.49 6.08-9.39 9.36-1.2 1.39-2.4 2.99-2.4 4.78-0.699-0.498-1.6-0.598-2.5-0.299 0.599 0.697 1.2 1.29 1.8 1.99-1.1-0.199-2.2 0.498-3.2 1.2-0.0999 0.0996-0.3 0.199-0.4 0.299 0.2 1.99 0.3 3.98 0.5 5.88 0.2 2.09 0.5 4.48 2.3 5.88 0.0999 1.69-1.5 3.09-3.3 3.49-0.3 0.0996-0.699 0.0996-0.999 0.0996v0.797c-2 0.797-4 1.59-5.99 2.39-0.4-0.498-0.799-1.1-1.3-1.59 0.0999 0.697 0.0999 1.29 0.2 1.99-2.7 0.697-5.49 1.29-8.19 1.99-0.4-0.598-0.699-1.2-1.1-1.79 0 1.2-1.8 1.39-3 1.2-0.5-0.0996-1.1-0.0996-1.6-0.199-0.2 1.59-1.6 3.09-2.8 4.38-2.7 2.79-4.9 5.98-6.49 9.46-0.799-0.896-2.1-1.1-3.3-1.59-0.899-0.598-1.9-1.59-1.8-2.59-1.4-0.697-3.2-1.1-4.2-2.29-0.699-0.797-0.999-1.79-1.5-2.79-0.699-1.29-1.6-2.49-2.8-3.49-0.4-0.299-0.899-0.697-1.3-0.996-0.4 0-0.699 0-1.1-0.0996-6.99-0.598-14.1-1.2-21.1-1.89 0.5-4.08 0.4-8.27-0.3-12.4 0.699-0.299 1.4-0.598 2.1-0.996-0.599-0.199-1.2-0.498-1.8-0.697 0.0999-1.39 0.2-2.89 0.3-4.28-1.3-1.29-3-2.09-4.5-3.19-1.5-1.1-2.8-2.59-3-4.48 0.3-0.598 0.599-1.2 0.899-1.89-0.899-0.0996-1.8 0-2.7 0.199-1.7-2.09-3.8-3.88-6.09-5.28 3.3-2.89 6.49-6.08 9.39-9.36 1.2-1.39 2.4-2.99 2.4-4.78 0.699 0.498 1.6 0.598 2.5 0.299-0.599-0.697-1.2-1.29-1.8-1.99 1.1 0.199 2.2-0.498 3.2-1.2 0.0999-0.0996 0.3-0.199 0.4-0.299-0.2-1.99-0.3-3.98-0.5-5.88-0.2-2.09-0.5-4.48-2.3-5.88-0.0999-1.69 1.5-3.09 3.3-3.49 0.3-0.0996 0.699-0.0996 0.999-0.0996v-0.797c2-0.797 4-1.59 5.99-2.39 0.4 0.498 0.799 1.1 1.3 1.59-0.0999-0.697-0.0999-1.29-0.2-1.99 2.7-0.697 5.49-1.29 8.19-1.99 0.4 0.598 0.699 1.2 1.1 1.79 0-1.2 1.8-1.39 3-1.2 0.5 0.0996 1.1 0.0996 1.6 0.199 0.2-1.59 1.6-3.09 2.8-4.38 2.7-2.79 4.9-5.98 6.49-9.46 0.799 0.896 2.1 1.1 3.3 1.59 0.999 0.598 2 1.59 1.9 2.59 1.4 0.697 3.2 1.1 4.2 2.29 0.699 0.797 0.999 1.79 1.5 2.79 0.699 1.29 1.6 2.49 2.8 3.49 0.4 0.299 0.899 0.697 1.3 0.996 0.4 0 0.699 0 1.1 0.0996 7.09 0.598 14.1 1.29 21.2 1.89-0.5 4.08-0.4 8.27 0.3 12.4-0.699 0.299-1.4 0.598-2.1 0.996 0.599 0.199 1.2 0.498 1.8 0.697-0.0999 1.39-0.2 2.89-0.3 4.28 1.3 1.29 3 2.09 4.5 3.19 1.5 1.1 2.8 2.59 3 4.48-0.3 0.598-0.599 1.2-0.899 1.89 0.899 0.0996 1.8 0 2.7-0.199 1.5 1.99 3.6 3.78 5.89 5.28z","m100 61.9c0 10.9-8 19.9-18.4 21.1-1.9 9.7-10.3 17-20.3 17-4.2 0-8-1.3-11.3-3.4-3.2 2.1-7.1 3.4-11.3 3.4-10.1 0-18.5-7.3-20.4-17.1-10.3-1.2-18.3-10.2-18.3-21 0-10.4 7.3-19 16.9-20.8 0-0.8 0.1-1.6 0.2-2.4 0.6-4.2 3-7 3-7s0 3.5 1.7 2.7c2.1-1 1.5-5.1 3.4-8.8 4.3-8.1 11.6-11.1 11.6-11.1s-2.9 7.2 1.6 6.3c2.9-0.6 2.6-7.5 7.5-13 7.5-8.6 16.1-7.8 16.1-7.8s-6.6 5.7-7.2 12.5c-0.4 4 1.5 8.5 5 9.2 5.1 1 4.1-2.4 4.1-2.4s3.4-0.1 6.8 3.9c2.3 2.6 1.9 6.4 4.6 6.9 1.4 0.3 1.3-2.5 1.3-2.5s2.9 1.4 4.6 5.9c1 2.6 1.3 5.1 1.4 7.4 9.9 1.7 17.4 10.4 17.4 21z","m94.3 56.2c0.4 6 2 13 5.7 21.2 0 0-16.6 12.2-50 22.6-33.4-10.4-50-22.6-50-22.6 3.7-8.1 5.3-15.1 5.7-21.1-0.5-0.9-3.9-7.7-2.5-14.8 0.9-4.5 4.3-7.5 4.3-7.5s0 3.8 2.5 2.9c3-1.1 2.1-5.5 4.9-9.4 6.1-8.7 16.7-12 16.7-12s-4.1 7.8 2.3 6.7c4.2-0.7 3.8-8.1 10.8-14 10.7-9 23.1-8.2 23.1-8.2s-9.5 6.2-10.4 13.4c-0.6 4.3 2.2 9.2 7.3 9.9 7.4 1 5.9-2.6 5.9-2.6s4.9-0.1 9.8 4.2c3.3 2.8 2.8 6.9 6.7 7.5 2 0.3 1.9-2.7 1.9-2.7s4.2 1.6 6.6 6.4c4.7 9.7-0.3 18.6-1.3 20.1z","m100 56.2v0.1c0 24.1-22.4 43.7-50 43.7-27.6 0-50-19.6-50-43.7v-0.1c0-1.6 0.1-3.3 0.4-5.1 1-5.6 4.5-9.3 4.5-9.3s0 4.7 2.6 3.6c3.1-1.3 2.2-6.8 5.1-11.6 6.5-10.7 17.6-14.8 17.6-14.8s-4.4 9.6 2.4 8.3c4.4-0.8 4-9.9 11.4-17.2 11.5-11.1 24.6-10.1 24.6-10.1s-10 7.6-11 16.5c-0.6 5.4 2.3 11.3 7.7 12.2 7.8 1.3 6.3-3.2 6.3-3.2s5.1-0.1 10.3 5.1c3.5 3.5 2.9 8.4 7.1 9.2 2.1 0.4 2-3.3 2-3.3s4.4 1.9 7 7.9c1.6 4.2 2.1 8.3 2 11.8z","m100 41.1v34.5c-2 0-3.7 0.3-5.2 0.8v0.7c0 5-4.1 9.1-9.1 9.1h-0.1c-0.6 2-0.6 3.6-0.6 3.6-12.4 7-30 10.2-35 10.2s-22.6-3.2-35-10.2c0 0-0.1-1.6-0.7-3.7h-0.1c-5 0-9.1-4.1-9.1-9.1v-0.7c-1.4-0.4-3.1-0.7-5.1-0.7v-34.5c0-0.9 0.1-1.8 0.3-2.8 1-4.2 4.5-7 4.5-7s0 3.5 2.6 2.7c3.1-1 2.2-5.1 5.1-8.7 6.5-8 17.6-11.1 17.6-11.1s-4.4 7.2 2.4 6.2c4.5-0.6 4.1-7.4 11.5-12.8 11.5-8.4 24.6-7.6 24.6-7.6s-10 5.7-11 12.4c-0.6 4 2.3 8.5 7.7 9.2 7.8 1 6.3-2.4 6.3-2.4s5.1-0.1 10.3 3.8c3.5 2.6 2.9 6.3 7.1 6.9 2.1 0.3 2-2.5 2-2.5s4.4 1.4 7 5.9c1.4 2.8 2 5.4 2 7.8z","m91.7 37.2c2.6-0.4 5.4-1 8.3-1.7 0 0-5.2 44-50 64.5-44.8-20.5-50-64.5-50-64.5 2.9 0.7 5.6 1.3 8.3 1.7-0.1-1.3-0.1-2.7 0.2-4.1 0.8-3.6 3.8-6 3.8-6s0 3 2.2 2.3c2.6-0.9 1.9-4.4 4.3-7.5 5.4-6.9 14.7-9.6 14.7-9.6s-3.7 6.2 2 5.4c3.7-0.5 3.3-6.4 9.6-11.1 9.5-7.3 20.5-6.6 20.5-6.6s-8.4 4.9-9.2 10.7c-0.5 3.5 1.9 7.3 6.4 7.9 6.5 0.8 5.2-2 5.2-2s4.3-0.1 8.6 3.3c2.9 2.3 2.5 5.5 5.9 6 1.8 0.3 1.6-2.1 1.6-2.1s3.7 1.2 5.8 5.1c1.7 2.9 2.1 5.8 1.8 8.3z","m97.2 50.9v34.9s-0.3 2.6-3.8 3.3l-40.2 10.3s-2.5 0.6-3.4 0.6-3.4-0.6-3.4-0.6l-40.3-10.3c-3.4-0.8-3.8-3.3-3.8-3.3v-34.9c-1.2-2.3-3.2-7.3-2-12.5 0.999-4.2 4.49-7 4.49-7s0 3.5 2.6 2.7c3.1-1 2.2-5.1 5.09-8.7 6.49-8 17.6-11.1 17.6-11.1s-4.39 7.2 2.4 6.2c4.49-0.6 4.1-7.5 11.5-12.9 11.5-8.4 24.6-7.6 24.6-7.6s-9.99 5.7-11 12.4c-0.599 4 2.3 8.5 7.69 9.2 7.79 1 6.29-2.4 6.29-2.4s5.09-0.1 10.3 3.8c3.5 2.6 2.9 6.3 7.09 6.9 2.1 0.3 2-2.5 2-2.5s4.39 1.4 6.99 5.9c4.2 7.7 0.899 14.8-0.799 17.6z","m100 35.6v51.8h-10.4c-3.4 1.9-8 3.5-13.6 4.7-1.4 0.3-2.8 0.6-4.3 0.8 0 0-3.4 0.8-5 1.2-5.3 1.3-13.4 3.6-16.7 5.9-3.3-2.3-11.4-4.5-16.7-5.9-1.6-0.4-5-1.2-5-1.2-1.5-0.3-2.9-0.5-4.3-0.8-5.6-1.2-10.2-2.8-13.6-4.7h-10.4v-51.8c0-0.9 0.1-1.8 0.4-2.7 1-3.6 4.5-6 4.5-6s0 3 2.6 2.3c3.1-0.9 2.2-4.4 5.1-7.5 6.5-6.9 17.6-9.5 17.6-9.5s-4.4 6.2 2.4 5.3c4.4-0.5 4-6.3 11.4-11 11.5-7.2 24.6-6.5 24.6-6.5s-10 4.9-11 10.6c-0.6 3.4 2.3 7.3 7.7 7.9 7.8 0.8 6.3-2 6.3-2s5.1-0.1 10.3 3.3c3.5 2.2 2.9 5.4 7.1 5.9 2.1 0.2 2-2.1 2-2.1s4.4 1.2 7 5.1c1.5 2.4 2 4.8 2 6.9z","m100 35.9-4.1 42.7v0.2c0 4.1-5.2 7.5-11.7 7.5-1.4 0-2.6-0.2-3.9-0.5-2.9 3.3-7.4 6.1-13 8.1-1.1 0.4-2.3 0.8-3.5 1.1 0 0-3.3 0.7-4.6 1.3-2.9 1.2-5.8 2.6-9.2 3.7-3.4-1.1-6.3-2.5-9.2-3.7-1.3-0.6-4.6-1.3-4.6-1.3-1.2-0.3-2.4-0.7-3.5-1.1-5.7-2-10.1-4.8-13-8.1-1.2 0.3-2.5 0.5-3.9 0.5-6.5 0-11.7-3.4-11.7-7.5v-0.2l-4.1-42.7c0-0.9 0.1-1.8 0.4-2.8 1-3.6 4.5-6 4.5-6s0 3 2.6 2.3c3.1-0.9 2.2-4.4 5.1-7.5 6.5-6.9 17.6-9.6 17.6-9.6s-4.4 6.2 2.4 5.4c4.4-0.5 4-6.4 11.4-11.1 11.5-7.3 24.6-6.6 24.6-6.6s-10 4.9-11 10.7c-0.6 3.5 2.3 7.3 7.7 7.9 7.8 0.8 6.3-2 6.3-2s5.1-0.1 10.3 3.3c3.5 2.3 2.9 5.5 7.1 6 2.1 0.3 2-2.1 2-2.1s4.4 1.2 7 5.1c1.5 2.4 2 4.8 2 7z","m96.4 38.7c0.4 9.69 3.6 14.6 3.6 14.6s-3.6 5.39-3.7 16.2c0 0-0.1 2.2-2.4 2.2h-5.8v9.69c0 4.2-3.3 7.69-7.4 7.69h-6.6c0 3-0.9 5.39-2.6 6.79-1.2 0.999-2.7 1.4-4.5 1.3-1-0.0999-2.4-0.3-3.8-0.499-3.2-0.499-7.1-0.999-8.9-0.599-2.6 0.499-3.8 2.9-3.8 3l-0.5 0.999-0.5-0.999s-1.2-2.4-3.8-3c-1.8-0.4-5.8 0.2-8.9 0.599-1.4 0.2-2.8 0.4-3.8 0.499-1.8 0.0999-3.3-0.3-4.5-1.3-1.7-1.4-2.6-3.8-2.6-6.79h-6.6c-4.1 0-7.4-3.4-7.4-7.69v-9.69h-5.8c-2.3 0-2.4-2.2-2.4-2.2-0.1-10.7-3.7-16.1-3.7-16.1s3.3-4.89 3.6-14.6c0-0.999 0.1-2 0.3-3 0.9-3.9 4.2-6.49 4.2-6.49s0 3.3 2.4 2.5c2.9-0.899 2.1-4.79 4.8-8.09 6-7.49 16.3-10.3 16.3-10.3s-4.1 6.69 2.2 5.79c4.1-0.599 3.7-6.89 10.6-12 10.7-7.89 22.9-7.19 22.9-7.19s-9.3 5.29-10.2 11.6c-0.5 3.7 2.1 7.89 7.1 8.49 7.2 0.899 5.8-2.2 5.8-2.2s4.8-0.0999 9.6 3.6c3.2 2.4 2.7 5.89 6.5 6.39 2 0.3 1.8-2.3 1.8-2.3s4.1 1.3 6.5 5.49c1.5 2.7 2 5.29 2 7.59z","m100 65s-2.7 1.4-5.6 2.2c-1.2 2.5-2.1 5.1-2.8 7.9-0.4 1.8-2.6 3-5.4 3.1v2.5c0 2.9-1.4 5.6-3.9 7.6-5.4 4.4-16.8 11.7-32.3 11.7s-26.9-7.3-32.3-11.7c-2.4-2-3.9-4.7-3.9-7.6v-2.5c-2.8-0.1-5-1.3-5.4-3.1-0.7-2.8-1.6-5.4-2.8-7.9-2.9-0.9-5.6-2.2-5.6-2.2l4.3-5-3.2-9.2s2.6 1 5.5 1.8c1.7 0.5 4.9 1.1 7.3 1.5v-15.4c0-1 0.1-2 0.3-3 0.7-3.9 3.3-6.5 3.3-6.5s0 3.3 1.9 2.5c2.3-0.9 1.6-4.8 3.7-8.1 4.7-7.5 12.7-10.3 12.7-10.3s-3.2 6.7 1.8 5.8c3.2-0.6 2.9-6.9 8.3-12 8.1-7.8 17.6-7.1 17.6-7.1s-7.2 5.3-8 11.6c-0.4 3.7 1.6 7.9 5.6 8.5 5.6 0.9 4.5-2.2 4.5-2.2s3.7-0.1 7.5 3.6c2.5 2.4 2.1 5.9 5.1 6.4 1.5 0.3 1.4-2.3 1.4-2.3s3.2 1.3 5.1 5.5c1.2 2.7 1.6 5.3 1.5 7.6v15.4c2.4-0.4 5.6-1 7.3-1.5 2.8-0.9 5.5-1.8 5.5-1.8l-3.3 9.2z","m67.5-0.0611c-2.04-0.0186-4 0.25-5.85 0.688-7.3 1.73-18 6.14-22.2 8.41-8.72 4.7-22.6 1.06-32.2 0.194l2.92 23.1c-0.447 0.377-0.915 0.682-1.35 1.1-4.44 4.28-7.79 10.5-8.4 18.1-0.372 4.67 0.385 9.17 1.97 13.2 1.58 3.99 3.91 7.31 6.65 9.9 2.54 2.39 5.32 4.01 8.19 5.11-0.976 0.748-2.05 1.3-2.99 2.11l10.7 17.4c8.64-7.49 20-11.1 30.6-9.7 5.12 0.661 11.7 3.06 20 2.57 4.16-0.25 8.67-1.34 12.9-4.21 4.37-2.93 8.22-7.55 10.1-14 1.34-4.53 1.46-9.24 0.594-13.7-0.859-4.41-1.65-8.96-4.02-12.2-4.14-5.63-6.67-8.38-12.2-9.55 1.09-1.79 3.6-3.7 4.32-5.88 1.11-3.4 1.64-7.11 1.37-11-0.268-3.87-1.32-7.67-3.26-11.1-2.93-5.11-7.17-8.16-11.6-9.6-2.15-0.706-4.26-1.01-6.3-1.03z","m51.7 3.39s-7.76 0.243-9.75 0.416c-1.86 0.162-4.01 0.213-6.44 0.266-7.55 0.164-15.1 0.372-22.6 0.623-6.68 0.222-11.9 5.82-11.7 12.5 0.325 3.66 2.3 6.98 5.36 9.01-1 0.664-2 1.45-2.91 2.55-1.2 1.44-2.19 3.2-2.73 5.38-0.542 2.21-0.561 4.6 0.238 7.11 0.814 2.56 2.34 4.86 4.81 6.62 1.65 1.18 3.17 1.73 4.57 2.05-1.09 1.09-2.92 2.93-4.24 6.62-0.764 2.13-1.22 4.7-0.748 7.67 0.488 3.08 1.88 6.16 4.76 8.69 0.904 0.794 1.76 1.38 2.55 1.84-5.83 3.14-8.06 10.4-4.99 16.3 3.11 5.91 8.02 7.85 15.7 6.6 4.5-0.588 8.83-1.4 13.3-2.01 7.35 0.434 14-0.585 18.2-0.808 5.45-0.243 8.88-1.26 10.5-1.35 1.49-0.0776 4.49 0.386 9.04 0.439 2.28 0.027 5.83-1.53 8.46-2.8 2.77-1.35 6.19-2.06 9.15-4.48 1.96-1.6 3.81-3.67 5.18-6.37 1.02-2 2.24-5.05 1.69-9.26-0.205-1.55-0.793-3.16-1.62-4.75 0.928-2.51 1.45-5.39 0.799-8.69-0.553-2.81-2-5.19-3.88-7.28 0.927-1.06 1.81-2.26 2.51-3.82 0.998-2.25 1.55-4.87 1.18-7.85-0.348-2.77-1.46-5.95-4.54-8.68-0.251-0.222-0.499-0.356-0.75-0.551 0.483-0.438 0.981-0.809 1.44-1.34 1.69-1.96 2.98-4.4 3.47-7.37 0.502-3.03 0.128-6.19-1.51-9.26-1.96-3.66-4.77-5.52-7.19-6.6-2.29-1.02-4-1.25-4.9-1.39-8.02-1.28-14 0.0821-17.6-0.483zm-28.5 49.5c-0.38-0.0969-0.159-0.137 0.438 0.102-0.2-0.0513-0.231-0.0488-0.438-0.102z","m84.8 0.869c-5.02 0.251-10.1-0.442-15 0.896-5.22 0.146-10.4 1.2-15.6 1.48-4.05 0.815-8.31 0.0499-12.3 1.33 1.43-0.679-4.41 0.385-6.32 0.408-6.76 0.17-13.5 0.457-20.3 0.322-3.41 0.185-6.94-0.433-10.3 0.444-5.37 1.74-3.41 9.51 0.453 10.4-5.31 1.74-4.09 10.6 1.42 11-4.21 2.27-3.18 9.11 1.41 10.2-2.18 2.33-3.93 5.84-1.44 8.69 4.6 2.01-2.5 3.66-0.256 7.42 1.9 5.4 8.45 2.04 12.6 2.94 3.14 0.0137 3.8 1.32 0.371 1.76-4.1 1.73-8.77 3.41-11.6 6.95-3.14 4.08 3.82 6.8 0.532 9.93-0.47 2.53 1.56 4.79-2.37 4.05-5.74-0.1-7.69 8.76-2.68 11.3 4 1.75 7.9 2.31 10.3 6.04 3.21 1.25 6.69 0.132 10-0.203 6.22-1.23 12.5 0.58 18.8 0.443 11.7 0.511 23.5-0.0068 35-2.2 4.33-1.02 8.72-1.8 12.9-3.21 3.99-1.56 7.68-5.21 6.84-9.71-0.012-4.4-5.85-6.18-7.77-5.45-2.68 0.632-4.09-1.24-5.94-2.5 4.27-2.03 9.39-3.35 12.3-7.29 2.62-4.3-2.09-9.97-6.78-8.22-1.1 0.327-2.97 1.72-0.838 0.416-4.37 3.51-4.82-4.46-9.72-3.11 1.87-1.46 8.91-4.78 2.99-2.35-4.86 1.67 4.88-1.29 6.79-2.34 1.62-0.784-3.68-5.75 1.25-4.09 2.81 2.24 2.16-1.46 2.43-2.63 3.38-2.45 0.6-6.82-0.0624-8.94 2.44-1.51 1.21-4.08 1.14-6.33-0.477-4.67-5.18 4.82-4.53 1.09-0.0838-2.09 5.2-3.33 3.62-7.9-3.1-3.56 3.49-7.52-0.873-11.2-2.29-1.88 1.11-7.41-3.46-9.04-0.97-0.535-2.1-0.82-3.21-0.768zm5.24 9.12c0.0118-0.00178 0.0507 0.0433 0 0zm-1.22 40.2c-0.331 0.34-1.93 0.69 0 0zm-74.3 46.1c2.4 0.856 1.33 0.876 0 0z","m72.8 1.64c-5.3 0.108-12.7 0.345-15.7 0.501-14.9 0.773-29.5-0.736-41.1 0.0102-11.6 0.747-14.5 7.19-15.7 16.7-1.21 9.55 3.18 15.6 10.6 17.4 4.59 1.1 9.22 1.9 13.9 2.42l-5.24 1.78 0.604-0.188c-5.22 1.45-9.7 5.05-13 10.4-3.27 5.36-4.9 11.8-4.7 18.5 0.226 7.85 2.83 14.9 7.43 20.2 4.6 5.26 10.4 7.81 16.6 7.28l-2.05-0.0203c10.1 1.07 20.3 1.8 30.5 2.19 9.78 0.375 19.6 0.436 29.3 0.181 7.56-0.196 13.6-8.12 13.4-17.7-0.156-9.58-6.41-17.2-14-17-1.78 0.0465-3.57-0.0584-5.35-0.0339 4.95-3.39 9.51-7.67 13.4-12.9 1.75-2.31 3.9-5.39 5.68-9.8 1.83-4.54 2.47-7.45 1.81-14.2-0.785-7.99-4.04-14.1-8.21-18.4-4.04-4.15-8.5-6.1-12.6-6.88-2.02-0.384-3.91-0.515-5.68-0.479z","m16.4 0.00257a6.4 6.35 0 0 0-6.58 6.17 6.4 6.35 0 0 0 6.22 6.52c5.1 0.143 10.4 0.305 19.4 0.795-7.6 1.3-13.5 2.56-16.8 3.57-1.11 0.343-1.97 0.534-3.44 1.35-0.732 0.409-2.08 0.675-3.22 3.57-0.572 1.45-0.529 3.74 0.203 5.25 0.732 1.5 1.67 2.21 2.34 2.66 2.65 1.78 3.38 1.38 4.93 1.62 1.55 0.239 3.45 0.44 5.97 0.653 5.03 0.425 13.4 0.791 21.2 1.22-1.71 0.318-3.67 0.688-5.16 0.972-6.36 1.22-10.4 2.08-13 2.75-1.32 0.339-2.29 0.613-3.24 0.98-0.478 0.184-0.951 0.371-1.62 0.779-0.67 0.408-1.85 0.867-2.82 3.27-0.483 1.2-0.629 3.1-0.0735 4.61 0.555 1.51 1.5 2.43 2.19 2.95 1.38 1.05 2.09 1.1 2.64 1.24 1.12 0.276 1.72 0.286 2.43 0.327 1.42 0.0823 2.96 0.0728 4.6 0.0728h6.99c-0.382 0.111-1.17 0.293-1.52 0.398-2.22 0.668-3.57 1.05-5.24 1.91-0.416 0.216-0.872 0.454-1.53 0.996s-1.85 1.42-2.33 3.86c-0.481 2.44 1.16 5.38 2.35 6.33 1.19 0.95 1.93 1.11 2.49 1.27 1.8 0.528 2.79 0.52 3.96 0.52-9.64 2.52-18.7 4.99-24.4 6.58-4.53 1.27-6.68 1.76-8.81 2.63-0.533 0.217-1.05 0.279-2.32 1.38-0.633 0.55-1.72 1.54-2.14 3.66-0.421 2.12 0.675 4.63 1.64 5.66 1.94 2.05 2.69 1.77 3.26 1.93 0.571 0.166 0.958 0.239 1.35 0.315 2.75 0.527 8.63 1.11 18.6 1.55 0.0405 0.681 0.0582 1.39 0.286 1.93 0.643 1.54 1.51 2.25 2.09 2.68 1.15 0.866 1.66 0.932 2.09 1.07 0.866 0.281 1.35 0.344 1.98 0.443 1.26 0.198 2.85 0.364 5.17 0.559 9.29 0.78 29.8 1.87 50.5 2.98a6.4 6.35 0 0 0 6.74-6 6.4 6.35 0 0 0-0.584-2.82c0.36-0.184 0.751-0.398 1.46-1.05 0.861-0.794 2.37-3 1.98-5.6-0.391-2.6-1.95-3.79-2.71-4.31-1.53-1.04-1.88-0.893-2.23-0.974-1.39-0.324-1.36-0.204-1.75-0.234-1.58-0.123-4.34-0.277-15.8-0.425-7.69-0.0991-19.2-0.304-30-0.49 4.65-1.2 9.29-2.44 13.8-3.48 14.9-3.42 27.2-5.34 32.7-6.73 0.686-0.174 1.27-0.33 1.99-0.604 0.359-0.137 0.748-0.289 1.34-0.644 0.594-0.355 1.63-0.725 2.65-2.88 0.51-1.08 0.801-2.79 0.429-4.28s-1.21-2.55-1.86-3.16c-1.31-1.22-2.06-1.34-2.6-1.52-1.09-0.355-1.61-0.376-2.24-0.445-2.51-0.274-5.82-0.28-10.7-0.317-0.0931-7.01e-4 -0.236 6.87e-4 -0.33 0 0.21-0.0548 0.585-0.154 0.786-0.207 2.45-0.643 4.24-1.13 5.58-1.53 1.34-0.399 1.87-0.413 3.5-1.32 0.406-0.228 0.94-0.439 1.86-1.51 0.461-0.534 1.08-1.36 1.4-2.74 0.322-1.38 0.0653-3.29-0.639-4.55-1.41-2.52-2.88-2.73-3.58-2.98-0.702-0.245-1.08-0.29-1.39-0.337-0.341-0.0498-0.404-0.0151-0.649-0.0354 0.542-0.114 1.67-0.301 2.16-0.407 2.52-0.551 4.28-0.988 5.73-1.46 0.723-0.234 1.35-0.442 2.2-0.901 0.428-0.23 0.93-0.504 1.62-1.15 0.688-0.641 1.8-1.83 2.07-4.01 0.272-2.17-0.911-4.44-1.88-5.41-0.967-0.962-1.68-1.25-2.21-1.47-1.06-0.452-1.62-0.519-2.18-0.618-1.13-0.199-2.12-0.274-3.15-0.356-4.16-0.33-9.38-0.547-22-1.15-0.0481-0.0023-0.113-0.0076-0.161-0.0099 5.35-0.609 12-1.36 15.3-1.84 2.08-0.301 3.56-0.556 4.86-0.886 0.649-0.165 1.24-0.319 2.08-0.709 0.845-0.39 2.78-0.677 3.81-4.31 0.517-1.82-0.0388-4.13-0.822-5.32-0.783-1.19-1.52-1.67-2.05-2-1.06-0.672-1.6-0.794-2.11-0.955-1.03-0.32-1.82-0.464-2.64-0.626-3.3-0.65-7.81-1.36-17.1-2.16-9.24-0.804-23.3-1.72-33-2.26-9.71-0.537-15.1-0.687-20.3-0.834zm-7.83 76.3c0.0849 0.0247 0.264-0.0317 0.59 0.0807-0.0708-0.0128-0.349-0.0373-0.411-0.0492-0.23-0.0442-0.359-0.0841-0.179-0.0315z","m15 0.00104a6.81 8.11 0 0 0-6.91 7.98 6.81 8.11 0 0 0 6.7 8.23c3.08 0.0583 5.73 0.128 8.76 0.187-0.375 0.129-0.886 0.258-1.24 0.388-1.88 0.696-3.23 0.987-5.39 2.9-1.08 0.959-3.37 3.18-3.15 7.71 0.219 4.53 2.88 6.58 4.13 7.37 1.6 1.01 2.86 1.36 4.15 1.61-0.141 1.66-0.0734 3.37 0.453 4.62 0.889 2.1 1.89 2.8 2.5 3.26 2.45 1.82 2.42 1.15 2.89 1.24 0.473 0.0921 0.87 0.142 1.34 0.195 0.936 0.107 2.11 0.203 3.72 0.313 2.47 0.169 7.02 0.368 10.8 0.57-2.7 0.642-5.02 1.15-7.5 1.75-15.4 3.77-24.7 6.36-29.6 8.36-1.21 0.499-2.02 0.651-3.7 2.14-0.841 0.746-2.73 2.15-2.96 6.33-0.115 2.09 0.607 4.33 1.43 5.61 0.819 1.28 1.59 1.86 2.18 2.26 2.34 1.59 2.96 1.25 3.93 1.39 0.968 0.146 1.94 0.225 3 0.299 2.53 0.177 7.62 0.237 11.8 0.331-0.0236 0.0284-0.0312 0.0225-0.0552 0.0518-0.776 0.949-1.88 2.87-1.96 5.46-0.0726 2.58 1.01 4.78 1.82 5.83 1.63 2.11 2.4 2.06 2.96 2.29 1.71 0.718 2.52 0.777 3.49 0.855a6.81 8.11 0 0 0-0.821 2.9 6.81 8.11 0 0 0 7.25 7.55c18.1-1.45 36.3-2.91 45.2-3.65 4.47-0.373 6.19-0.461 7.94-0.787 0.219-0.0407 0.446-0.0803 0.851-0.203 0.405-0.123 0.782 0.275 2.74-1.63 0.977-0.954 2.88-3.94 2.43-7.51-0.29-2.28-1.06-3.49-1.81-4.35 0.426-0.121 0.962 0.242 2.9-2.09 0.996-1.2 2.44-4.65 1.76-7.77-0.68-3.12-2.16-4.22-2.9-4.79-0.201-0.156-0.252-0.147-0.415-0.259 2.91e-4 -0.0022 0.0086-0.0677 0.0086-0.0677-5.1e-5 -5.82e-4 -0.401-2.04-0.401-2.04-1.8e-4 -5.79e-4 -0.432-1.15-0.677-1.59-0.49-0.891-0.986-1.45-1.39-1.84-1.63-1.59-2.14-1.43-2.55-1.56-0.405-0.131-0.617-0.167-0.792-0.199-0.351-0.0646-0.527-0.078-0.699-0.0936-0.344-0.0313-0.615-0.0415-0.94-0.0538-0.65-0.0245-1.46-0.0395-2.47-0.0538-4.06-0.0573-11.4-0.0936-21.4-0.149-0.704-4e-3 -1.52-0.0138-2.25-0.0179 9.3-2.15 19.7-4.61 25.4-5.92 5.17-1.21 7.46-1.75 9.07-2.27 0.402-0.13 0.656-0.146 1.61-0.683 0.478-0.268 1.29 0.0431 2.94-3.09 0.824-1.56 1.39-5.17 0.431-7.69-0.962-2.52-2.28-3.35-3.01-3.82-2.93-1.86-2.63-0.956-2.99-0.986-0.361-0.0296-0.579-0.0305-0.776-0.0359-1.18-0.032-4.54-0.0306-8.24-0.0319 0.504-2.45 0.311-5.91-0.685-7.55-1.3-2.14-2.24-2.4-2.8-2.7-2.26-1.2-2.15-0.724-2.71-0.795-2.2-0.283-5.44-0.377-11.3-0.592-0.898-0.0328-2.36-0.103-3.36-0.139 0.966-0.213 2.26-0.514 3.15-0.707 9.85-2.16 14.1-3.04 16.6-3.52 0.638-0.119 1.2-0.218 1.71-0.317 0.511-0.0982 0.134 0.367 2.33-0.701 0.549-0.267 1.92 0.456 3.69-4.23 0.882-2.34 0.325-6.49-0.794-8.25-1.12-1.75-1.98-2.13-2.53-2.44-2.18-1.23-2.06-0.742-2.43-0.791-0.73-0.0972-1.25-0.114-2.08-0.153-3.34-0.158-10.7-0.339-17.8-0.562-7.12-0.223-14-0.485-22.4-0.709-8.4-0.224-18.3-0.411-28.1-0.598zm68.4 18.1c0.147 0.0109 0.537 0.038 0.477 0.0299-0.0416-0.0055-0.126 0.0615-0.477-0.0299zm-8.05 6.25c-0.0726 0.0123-0.115 0.0254-0.187 0.0359 0.092-0.0441 0.11-0.0186 0.187-0.0359zm16.6 26.6c0.0692 0.0015 0.482 2.94e-4 0.545 2e-3 0.155 0.0042 0.258 0.0128 0.15 4e-3 -0.0653-0.0053-0.187 0.129-0.696-6e-3z","m8.55 0c-3.58 0-6.49 3.34-6.49 7.47 0 4.12 2.9 7.47 6.49 7.47 6.65 0 11.1 0.0284 17.4 0.0331-3.94 1.03-8.41 2.2-10.6 2.79-0.819 0.227-1.51 0.402-2.44 0.766-0.465 0.182-0.882 0.156-2.23 1.3-0.672 0.573-2.07 1.59-2.59 4.7-0.519 3.1 1.3 6.39 2.4 7.38 0.545 0.494 0.751 0.517 1.11 0.755-0.851 0.793-1.7 2.04-1.92 4.9-0.182 2.34 0.842 4.76 1.76 5.9 0.918 1.14 1.65 1.54 2.21 1.84 0.944 0.509 1.56 0.69 2.17 0.838-1.84 0.486-3.3 0.907-4.29 1.22-0.573 0.181-1.06 0.264-2.19 0.815-0.564 0.276-1.61-0.521-3.49 3.62-0.943 2.07-0.548 6.47 0.701 8.25 1.25 1.79 2.16 2.06 2.75 2.33 2.35 1.09 2.65 0.734 3.96 0.84 1.3 0.106 2.99 0.184 5.33 0.249 0.967 0.0271 3.08 0.0164 4.25 0.0389-0.03 0.453 0.0463 0.927 0.098 1.4-2.79 0.294-7.31 0.716-8.76 0.912-0.7 0.0953-1.23 0.142-2.14 0.362-0.228 0.0549-0.477 0.109-0.958 0.298-0.481 0.188-1.27-0.522-3.31 2.84-1.02 1.68-1.39 5.87-0.314 8.03 0.158 0.316 0.293 0.383 0.448 0.63-0.508 0.0914-1.46 0.14-1.89 0.241-0.532 0.124-0.976 0.17-2.04 0.712-0.53 0.271-1.32 0.478-2.56 2.24-0.618 0.881-1.34 2.39-1.45 4.26s0.508 3.71 1.15 4.78c1.29 2.14 2.23 2.37 2.81 2.67 0.579 0.299 0.942 0.411 1.27 0.51 0.65 0.198 1.13 0.285 1.67 0.375 1.54 0.258 4.31 0.452 6.99 0.661 0.0178 0.111 0.098 0.609 0.098 0.609 1.18e-4 1.99e-4 1.89 2.09 1.89 2.09 2.8e-4 2.02e-4 0.772 0.486 1.02 0.601 0.245 0.114 0.421 0.179 0.566 0.229 0.29 0.101 0.458 0.142 0.591 0.173 1.07 0.25 0.834 0.133 0.97 0.144 1.08 0.0833 2.67 0.123 7.18 0.268 9.02 0.291 28.2 0.873 47.3 1.45 3.58 0.109 6.56-3.15 6.66-7.27-2e-3 -1.13-0.225-2.24-0.652-3.25 0.701-0.0264 2.38-0.0732 2.76-0.0953 0.271-0.0158 0.336 0.0035 0.939-0.0894 0.151-0.0232 0.305-0.0279 0.838-0.191 0.266-0.0814 0.597-0.129 1.45-0.665 0.214-0.134 0.77-0.57 0.77-0.57 3.18e-4 -2.72e-4 1.07-1.16 1.07-1.16 1.82e-4 -2.48e-4 0.923-1.85 1.08-2.17 1.29-0.0298 2.68-0.0594 3.47-0.0894 0.577-0.0219 1.03-0.0442 1.44-0.0739 0.41-0.0297 0.296 0.157 1.8-0.299 0.375-0.114 0.824 0.0351 2.36-1.34 0.384-0.343 0.855-0.825 1.34-1.62 0.242-0.398 0.484-0.879 0.686-1.44 0.202-0.566 0.437-1.91 0.438-1.91 8e-5 -7.61e-4 -0.0253-2.08-0.0253-2.08-1.04e-4 -7.63e-4 -0.259-1.29-0.459-1.82-0.4-1.06-0.901-1.77-1.32-2.26-1.67-1.96-2.22-1.73-2.63-1.88-0.408-0.156-0.616-0.203-0.792-0.245-0.704-0.168-0.9-0.164-1.25-0.204-0.693-0.0796-1.51-0.147-2.49-0.233-0.837-0.0735-2.51-0.187-3.65-0.28 0.199-0.404 0.481-1.07 0.481-1.07 2.07e-4 -5.98e-4 0.387-1.59 0.387-1.59 1.21e-4 -8.51e-4 -0.0995-1.5-0.167-2.52 0.137-0.0616 0.22-0.0839 0.427-0.202 0.205-0.117 0.453-0.269 0.782-0.527 0.329-0.258 1.25-1.29 1.26-1.29 4.23e-4 -5.67e-4 1.44-3.33 1.44-3.34 5.2e-5 -2.7e-4 0.0828-2.54 0.0828-2.54-2.6e-5 -2.64e-4 -0.616-2.32-0.617-2.32-2.17e-4 -5.13e-4 -1.79-2.54-1.79-2.54s-0.924-0.716-1.24-0.889c-1.26-0.692-1.52-0.587-1.79-0.636-1.09-0.198-0.941-0.0984-1.11-0.101-0.166-0.0027-0.293-2e-3 -0.414-2e-3 -0.963 0-2.41 0.0013-5.46-0.0525-0.439-0.0078-2.35-0.0252-2.88-0.035 0.639-0.112 3.1-0.579 3.52-0.648 0.421-0.0691 0.0365 0.255 1.99-0.453 0.244-0.0885 0.55-0.178 1.2-0.583 0.646-0.406 2.4-0.87 3.22-4.84 0.412-1.99-0.123-4.51-0.9-5.86-0.778-1.35-1.52-1.9-2.03-2.26-1.02-0.72-1.44-0.769-1.77-0.869-1.33-0.402-1.33-0.264-1.71-0.292-0.0603-0.0045-0.318-0.0055-0.382-0.0098 0.192-0.174 0.26-0.164 0.502-0.416 0.797-0.833 2.35-3 2.11-6.18-0.231-3.18-2-4.93-2.86-5.6-1.73-1.34-2.11-1.09-2.51-1.17-0.788-0.175-1.06-0.161-1.41-0.183-0.717-0.044-1.42-0.051-2.23-0.0603-1.68-0.0194-6.55-0.0346-9.66-0.0467 1.96-0.633 4.16-1.3 5.6-1.87 1.19-0.466 2.18-0.884 3.22-1.49 0.522-0.302 1.06-0.62 1.79-1.3 0.736-0.679 2.14-1.72 2.6-5.03 0.229-1.66-0.138-3.76-0.855-5.15-0.716-1.39-1.55-2.14-2.19-2.61-1.27-0.948-2-1.08-2.66-1.25-1.31-0.35-2.34-0.43-3.71-0.527-2.75-0.195-6.6-0.254-12.2-0.299-11.1-0.0915-29-0.0914-46.9-0.0914z","M 0,100 V 0 H 100 V 100 H 99 A 49,-98 0 0 0 50,2 49,-98 0 0 0 1,100 Z","M 0,0 V 100 H 100 V 0 H 99 A 49,98 0 0 1 50,98 49,98 0 0 1 1,0 Z","M 0,100 V 0 H 100 V 100 H 95 A 45,-90 0 0 0 50,10 45,-90 0 0 0 5,100 Z","m0 0v100h100v-100h-5a45 90 0 0 1-45 90 45 90 0 0 1-45-90z","M 0,100 V 0 H 100 V 100 H 90 A 40,-80 0 0 0 50,20 40,-80 0 0 0 10,100 Z","M 0,0 V 100 H 100 V 0 H 90 A 40,80 0 0 1 50,80 40,80 0 0 1 10,0 Z","m 0,0 v 100 h 10.035156 c 1.705045,-6.54927 3.941587,-12.742544 6.720703,-18.300782 l 20.09375,-40.1875 C 50.561077,14.088757 71.945169,12.702882 84.796875,38.40625 92.993332,54.799136 95.671807,78.132046 92.986328,100 H 100 V 0 Z","M 0,0 V 100 H 100 V 0 H 92.986328 C 91.461087,12.420096 88.21082,24.367414 83.244141,34.300782 L 63.150391,74.48828 C 49.438924,101.91124 28.054831,103.29712 15.203125,77.59375 4.9562739,57.10008 3.3279352,25.763198 10.035156,0 Z","M 100,0 C 98.542915,3.142831 97.022904,6.152491 95.425781,8.973086 L 62.601562,66.942421 C 40.203879,106.49781 13.008645,96.967171 1.625,45.571361 1.0225932,42.851581 0.48998452,40.055281 0,37.221491 V 100 h 100 z","M 0,0 V 10 C -1.5552177e-6,6.609576 0.10489712,3.277196 0.28515625,0 Z m 0,10 v 90 H 100 V 10 c 1e-5,44.31998 -15.860419,79.99998 -35.5625,80 H 35.5625 C 15.860418,90.00002 0,54.31999 0,10 Z m 100,0 V 0 H 99.714844 C 99.895106,3.277194 99.999998,6.609576 100,10 Z","M 0,0 V 99.999998 H 100 V 26.237487 A 61.723576,126.74566 7.430995 0 1 82.216797,52.190278 61.723576,126.74566 7.430995 0 1 1.3339844,8.692257 61.723576,126.74566 7.430995 0 1 0,0 Z"].forEach(t=>{const s=(0,r.T)("div",{className:"shape-setting-pod"});s.setAttribute("data",t),s.addEventListener("click",this.selectPreset,!0),s.appendChild(this.createPreview(t)),t===this.path&&(this.selected=s,this.selected.classList.add("active")),e.append(s)});let t=e.querySelector(".active");t&&t.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"})},this.createPreview=e=>{const t=i.VI(50,50),s=t.getContext("2d"),a=new Path2D;return a.addPath(new Path2D(e),(new DOMMatrix).scale(.48,.48)),s.translate(1,1),s.lineWidth=2,s.strokeStyle="rgba(255, 255, 255, .5)",s.fillStyle="rgba(0, 0, 0, 0.6)",s.fill(a),s.stroke(a),t},this.selectPreset=e=>{var t;null===(t=this.selected)||void 0===t||t.classList.remove("active"),this.selected=e.currentTarget,this.selected.classList.add("active"),this.path=this.selected.getAttribute("data"),this.preview&&this.preview(this.path),"express"===n.Ay.product&&this.cleanUp()},this.cleanUp=()=>{this.callback&&this.callback(this.path),this.container.remove(),this.modal.remove()},this.path=t,this.preview=h,this.callback=s,this.modal=document.body.appendChild((0,r.T)("div",{id:"shape-selector-modal",className:"modal"}));let c=(0,r.T)("div",{id:"shape-selector-presets"});this.container=(0,r.T)("div",{id:"shape-selector",className:"shape-float"},c),this.modal.appendChild(this.container),this.modal.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),e.target===e.currentTarget&&this.cleanUp()},!1);let l=e.getBoundingClientRect();if("express"===n.Ay.product)this.container.style.width="320px",this.container.style.top=l.bottom-15+"px",this.container.style.left="50px",this.container.offsetTop+this.container.offsetHeight>(0,r.Ay)("workspace").offsetHeight&&(this.container.style.top=(0,r.Ay)("workspace").offsetHeight-this.container.offsetHeight+"px");else{this.container.style.top=l.bottom-5+"px",this.container.style.left=l.left-~~(this.container.offsetWidth/2)+40+"px";const e=(0,r.T)("img",{src:"/img/icon/three-dot.svg",className:"resize ic"});(0,r.Bb)(e,this.resizeStart,this.resizeMove),this.container.append(e)}new o.A((0,r.Ay)("shape-selector-presets")),this.populatePresets()}}},18155:(e,t,s)=>{s.d(t,{A:()=>w});var i=s(42268),a=s(21742),n=s(54738),r=s(67983),o=s(16309),h=s(75770),c=s(82042),l=s(15818),d=s(41915),p=s(59350),u=s(58281),m=s(23556),g=s(66495),y=s(85337),v=s(86344),f=s(71499),b=s(21079);class w extends h.A{constructor(e){super("cutout",e),this.type="",this.mode="remove",this.isShiftDown=!1,this.more=e=>{e.preventDefault(),e.stopPropagation(),this.showContextMenu(new d.A(e.clientX,e.clientY),!0)},this.contextMenu=e=>{e.preventDefault(),e.stopPropagation(),this.showContextMenu(new d.A(e.clientX,e.clientY),!1)},this.showContextMenu=(e,t)=>{if(!this.selected)return;const s=this.selected.hasMask();new b.Ay(e,[new b.kt((0,a.A)("titleLayerInvertMask"),s?()=>this.stage.maskInvert():void 0),new b.kt((0,a.A)("titleLayerExtractMask"),s?()=>this.stage.maskExtract():void 0),new b.kt((0,a.A)("titleLayerConvertMask"),s?()=>this.stage.maskConvert():void 0),new b.kt,new b.kt((0,a.A)("titleLayerApplyMask"),s?()=>this.stage.maskApply():void 0),new b.kt((0,a.A)("titleLayerResetMask"),s?()=>this.stage.maskDelete():void 0)],t)},this.layerSelect=()=>{if(!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("cutout-no-layer").style.display="flex",(0,i.Ay)("cutout-sub-tools").style.display="none",void(this.selected=null);(0,i.Ay)("cutout-sub-tools").style.display="flex",(0,i.Ay)("cutout-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"over"),"draw"===this.type&&this.updateBrush(),this.renderMask()},this.selectType=e=>{this.setType(e.currentTarget.value)},this.setType=e=>{e!==this.type&&(""!==this.type&&((0,i.Ay)("cutout-"+this.type+"-settings").style.display="none"),(0,i.Ay)("cutout-"+e+"-settings").style.display="inline-flex",this.type=e,this.selected&&!this.selected.hasMask()&&("shape"===this.type?this.setMode("keep"):this.setMode("remove")),this.selected?"draw"===this.type?this.updateBrush():(this.stage.coating.removeCursorImage(),this.stage.raster.style.cursor="crosshair"):this.stage.raster.style.cursor="auto")},this.toggleMode=()=>{this.setMode("keep"===this.mode?"remove":"keep")},this.selectMode=e=>{this.setMode(e.currentTarget===(0,i.Ay)("cutout-mode-remove")?"remove":"keep")},this.setMode=e=>{if(this.mode=e,(0,i.Ay)("cutout-mode-remove").checked="remove"===this.mode,(0,i.Ay)("cutout-mode-keep").checked="keep"===this.mode,"draw"===this.type)this.updateBrush()},this.zoomChange=()=>{if("draw"===this.type)this.updateBrush()},this.keyDown=e=>{switch("Shift"!==e.key||this.isShiftDown||(this.isShiftDown=!0,this.toggleMode()),e.key){case",":e.shiftKey?this.brushPod.stepSoftness(.1):this.brushPod.stepSize(-10);break;case".":e.shiftKey?this.brushPod.stepSoftness(-.1):this.brushPod.stepSize(10)}},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1,this.toggleMode())},this.down=e=>{if(this.selected)if(this.downPoint=e,"magic"!==this.type){switch(this.type){case"draw":this.downDraw(e);break;case"lasso":this.downLasso(e);break;case"shape":this.downShape(e);break;case"gradient":this.downGradient(e)}this.addMoveListeners()}else this.applyMagic(e)},this.move=e=>{switch(this.type){case"shape":this.moveShape(e);break;case"draw":this.moveDraw(e);break;case"lasso":this.moveLasso(e);break;case"gradient":this.moveGradient(e)}},this.up=e=>{switch(this.removeMoveListeners(),this.type){case"shape":this.applyShape(this.stage.translateRasterToFresco(this.downPoint,this.selected.rect),this.stage.translateRasterToFresco(e,this.selected.rect));break;case"draw":this.applyDraw();break;case"lasso":this.applyLasso();break;case"gradient":this.applyGradient(this.stage.translateRasterToFresco(this.downPoint,this.selected.rect),this.stage.translateRasterToFresco(e,this.selected.rect))}},this.applyMagic=e=>{if((e=this.stage.translateRasterToFresco(e,this.selected.rect)).x<0||e.y<0||e.x>this.selected.canvas.width||e.y>this.selected.canvas.height)return;const t=this.prepareMask();let s=this.magicFeather.getValue(),a=this.selected.canvas.getContext("2d").getImageData(e.x,e.y,1,1).data,n=new l.A(a[0],a[1],a[2],a[3]);if(0===n.a&&"remove"===this.mode&&0===s)return;let r=100*this.magicTolerance.getValue(),o=(this.selected.baked&&"remove"===this.mode?this.selected.baked:this.selected.canvas).getContext("2d").getImageData(0,0,this.selected.canvas.width,this.selected.canvas.height);this.cpx=new Uint32Array(o.data.buffer);let h=this.scratch.ctx.getImageData(0,0,this.scratch.canvas.width,this.scratch.canvas.height);this.mpx=new Uint32Array(h.data.buffer),(0,i.Ay)("cutout-magic-contiguous").checked?this.floodFill(e,n,r,0!==s):this.allFill(n,r),this.scratch.ctx.putImageData(h,0,0),h=null,o=null,this.cpx=null,this.mpx=null,this.drawToMask(t,this.magicFeather.getValue())},this.updateBrush=()=>{this.brush.generate("keep"===this.mode?new l.A(0,255,0,255):new l.A(255,0,0,255)),this.selected?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom)):this.stage.coating.removeCursorImage()},this.downDraw=e=>{this.x=this.y=-1,this.scratch.settings.opacity=.4,this.moveDraw(e)},this.x=-1,this.y=-1,this.moveDraw=e=>{let t=this.brush.getStep(),s=!1;if(e=this.stage.translateRasterToFresco(e,this.selected.rect),-1===this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.scratch.ctx.drawImage(this.brush.canvas,this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0),e.x!==this.x||e.y!==this.y){let i=e.x-this.x,a=e.y-this.y,n=i>0?1:-1,r=a>0?1:-1;if(i=i<0?-i:i,a=a<0?-a:a,i>a){let e=.5*i;for(let o=1;o<=i;o++)this.x+=n,e+=a,e>=i&&(e-=i,this.y+=r),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.scratch.ctx.drawImage(this.brush.canvas,this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),this.lx=this.x,this.ly=this.y,s=!0)}else{let e=.5*a;for(let o=1;o<=a;o++)this.y+=r,e+=i,e>=a&&(e-=a,this.x+=n),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.scratch.ctx.drawImage(this.brush.canvas,this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),this.lx=this.x,this.ly=this.y,s=!0)}}s&&window.requestAnimationFrame(()=>this.stage.render())},this.applyDraw=()=>{const e=this.prepareMask();this.drawToMask(e,0,this.drawOpacity.getValue())},this.downLasso=e=>{this.points=[]},this.moveLasso=e=>{this.rasterctx.save(),this.points.push(e),this.stage.raster.style.opacity="0.6",this.rasterctx.clearRect(0,0,this.stage.raster.width,this.stage.raster.height),this.rasterctx.strokeStyle="keep"===this.mode?"#00ff00":"#ff0000",this.rasterctx.lineWidth=2,this.rasterctx.lineCap="round",this.rasterctx.setLineDash([6]),this.rasterctx.beginPath(),this.rasterctx.moveTo(this.points[0].x,this.points[0].y),this.points.forEach(e=>{this.rasterctx.lineTo(e.x,e.y)}),this.rasterctx.stroke(),this.rasterctx.restore()},this.applyLasso=()=>{if(this.stage.raster.style.opacity="1",this.rasterctx.clearRect(0,0,this.stage.raster.width,this.stage.raster.height),this.points.length<2)return;const e=this.points.map(e=>this.stage.translateRasterToFresco(e,this.selected.rect)),t=this.prepareMask();this.scratch.ctx.beginPath(),this.scratch.ctx.moveTo(e[0].x,e[0].y),e.forEach(e=>this.scratch.ctx.lineTo(e.x,e.y)),this.scratch.ctx.fill(),this.drawToMask(t,this.lassoFeather.getValue())},this.downShape=e=>{this.shapeType=document.querySelector('input[name="cutout-shape-type"]:checked').value},this.moveShape=e=>{switch(this.rasterctx.save(),this.stage.raster.style.opacity="0.6",this.rasterctx.clearRect(0,0,this.stage.raster.width,this.stage.raster.height),this.rasterctx.strokeStyle="keep"===this.mode?"#00ff00":"#ff0000",this.rasterctx.lineWidth=2,this.shapeType){case"rectangle":this.rasterctx.setLineDash([6]),this.rasterctx.strokeRect(this.downPoint.x,this.downPoint.y,e.x-this.downPoint.x,e.y-this.downPoint.y);break;case"ellipse":this.rasterctx.setLineDash([6]),g.A.ellipse(this.rasterctx,this.downPoint,e),this.rasterctx.stroke();break;case"line":this.rasterctx.lineWidth=4,g.A.line(this.rasterctx,this.downPoint,e),this.rasterctx.stroke()}this.rasterctx.restore()},this.applyShape=(e,t)=>{if(e.x===t.x&&e.y===t.y)return;this.stage.raster.style.opacity="1",this.rasterctx.clearRect(0,0,this.stage.raster.width,this.stage.raster.height);const s=this.prepareMask();switch(this.shapeType){case"rectangle":this.scratch.ctx.fillRect(e.x,e.y,t.x-e.x,t.y-e.y);break;case"ellipse":g.A.ellipse(this.scratch.ctx,e,t),this.scratch.ctx.fill();break;case"line":this.scratch.ctx.lineWidth=4/this.stage.zoom,g.A.line(this.scratch.ctx,e,t),this.scratch.ctx.stroke()}this.drawToMask(s,this.shapeFeather.getValue())},this.downGradient=e=>{this.stage.coating.ctx.strokeStyle=n.q5,this.stage.coating.ctx.fillStyle=n.bi},this.moveGradient=e=>{window.requestAnimationFrame(()=>{this.downPoint&&(this.stage.coating.clear(!0),this.stage.coating.ctx.lineWidth=2,g.A.line(this.stage.coating.ctx,this.downPoint,e),this.stage.coating.ctx.stroke(),g.A.arc(this.stage.coating.ctx,this.downPoint,6),this.stage.coating.ctx.fill(),this.stage.coating.ctx.stroke(),g.A.arc(this.stage.coating.ctx,e,6),this.stage.coating.ctx.fill(),this.stage.coating.ctx.stroke(),this.stage.coating.ctx.lineWidth=1,this.stage.coating.render())})},this.applyGradient=(e,t)=>{if(this.rasterctx.clearRect(0,0,this.stage.raster.width,this.stage.raster.height),this.stage.coating.ctx.clearRect(0,0,this.stage.raster.width,this.stage.raster.height),e.x===t.x&&e.y===t.y)return;let s,i=document.querySelector('input[name="cutout-gradient-type"]:checked').value;if(this.scratch.clear(),this.scratch.ctx.save(),"radial"===i){const i=e.x-t.x,a=e.y-t.y;s=this.scratch.ctx.createRadialGradient(e.x,e.y,0,e.x,e.y,Math.sqrt(i*i+a*a))}else s=this.scratch.ctx.createLinearGradient(e.x,e.y,t.x,t.y);this.gradPod.grad.addStopToCanvasGradient(s,"remove"===this.mode),this.scratch.ctx.fillStyle=s,this.scratch.ctx.fillRect(0,0,this.scratch.canvas.width,this.scratch.canvas.height),this.scratch.ctx.restore();const a=this.prepareMask();this.drawToMask(a,0)},this.prepareMask=()=>{let e=!1;if(!this.selected.hasMask()&&(this.selected.addMask(),e=!0,"remove"===this.mode)){this.selected.mask.getContext("2d").fillRect(0,0,this.selected.mask.width,this.selected.mask.height)}return e},this.renderMask=()=>{this.selected.hasMask()&&(this.selected.render(),(0,i.Ay)("cutout-show-ghost").checked&&this.renderGhost(),this.stage.render())},this.renderGhost=()=>{if(this.selected.hasMask()){var e=this.selected.baked.getContext("2d");e.save(),e.globalAlpha=.33,e.drawImage(this.selected.canvas,0,0),e.restore(),e=null}},this.auto=e=>{this.selected&&new v.A(this.stage)},this.cleanUp=()=>{var e;this.stage.coating.freeze(!1),null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.removeDownListeners(),(0,i.Ay)("cutout-show-ghost").checked&&(this.selected.render(),this.stage.render()),this.brushPod.cleanUp(),this.drawOpacity.cleanUp(),this.magicFeather.cleanUp(),this.shapeFeather.cleanUp(),this.lassoFeather.cleanUp(),this.magicTolerance.cleanUp(),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),document.removeEventListener("zoom-change",this.zoomChange,!1),document.removeEventListener("layer-select",this.layerSelect,!1),(0,i.Ay)("cutout-auto").removeEventListener("click",this.auto,!1),(0,i.Ay)("cutout-show-ghost").removeEventListener("change",this.renderMask,!1),(0,i.Ay)("cutout-type-magic").removeEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-type-draw").removeEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-type-lasso").removeEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-type-shape").removeEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-type-gradient").removeEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-mode-keep").removeEventListener("click",this.selectMode,!1),(0,i.Ay)("cutout-mode-remove").removeEventListener("click",this.selectMode,!1),(0,i.Ay)("cutout-tool-more").removeEventListener("click",this.more,!1),this.stage.raster.removeEventListener("contextmenu",this.contextMenu,!0),this.rasterctx=null,this.selected=null,this.brush=null},this.allFill=(e,t)=>{for(var s=0;s<this.mpx.length;++s)this.tolerate(s,e,t)&&(this.mpx[s]=4294967295)},this.floodFill=(e,t,s,i)=>{let a=this.selected.canvas.width,n=this.selected.canvas.height,r=new Array,o=new Array(a*n);for(this.linearFill(e.x,e.y,t,s,i,r,o);r.length>0;)for(var h=r.shift(),c=h.start;c<=h.stop;++c)h.row>0&&!o[(h.row-1)*a+c]&&this.linearFill(c,h.row-1,t,s,i,r,o),h.row<n-1&&!o[(h.row+1)*a+c]&&this.linearFill(c,h.row+1,t,s,i,r,o)},this.linearFill=(e,t,s,i,a,n,o)=>{var h=this.selected.canvas.width;if(o[h*t+e]=!0,this.tolerate(h*t+e,s,i)){this.mpx[h*t+e]=4294967295;for(var c=e-1,l=e+1;c>=0&&!o[h*t+c];){if(o[h*t+c]=!0,!this.tolerate(h*t+c,s,i)){a&&(this.mpx[h*t+c]=4294967295);break}this.mpx[h*t+c]=4294967295,--c}for(;l<h&&!o[h*t+l];){if(o[h*t+l]=!0,!this.tolerate(h*t+l,s,i)){a&&(this.mpx[h*t+l]=4294967295);break}this.mpx[h*t+l]=4294967295,++l}n.push(new r.A(c+1,l-1,t))}else a&&(this.mpx[h*t+c]=4294967295)},this.tolerate=(e,t,s)=>{let i,a,n,r,o,h,c;return a=0,n=this.cpx[e],r=n>>24&255,r=t.a-r,i=r<0?-r:r,i>a&&(a=i),t.a>0&&(c=n>>16&255,h=n>>8&255,o=255&n,o=t.r-o,i=o<0?-o:o,i>a&&(a=i),h=t.g-h,i=h<0?-h:h,i>a&&(a=i),c=t.b-c,i=c<0?-c:c,i>a&&(a=i)),a<s},this.stage.coating.freeze(!0),this.stage.coating.clear(),this.rasterctx=this.stage.coating.ctx,(0,i.Ay)("cutout-tool-more").addEventListener("click",this.more,!1),(0,i.Ay)("cutout-auto").addEventListener("click",this.auto,!1),(0,i.Ay)("cutout-type-magic").addEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-type-draw").addEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-type-lasso").addEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-type-shape").addEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-type-gradient").addEventListener("change",this.selectType,!1),(0,i.Ay)("cutout-mode-keep").addEventListener("click",this.selectMode,!1),(0,i.Ay)("cutout-mode-remove").addEventListener("click",this.selectMode,!1),(0,i.Ay)("cutout-show-ghost").addEventListener("change",this.renderMask,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.zoomChange,!1),this.stage.raster.addEventListener("contextmenu",this.contextMenu,!0),this.brush=new p.A(new f.A),this.brushPod=new y.A(e,"cutout-draw-brush",this.brush,this.updateBrush),this.drawOpacity=new c.A("cutout-draw-opacity",{compact:!0,label:(0,a.A)("opacity")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100});let t=new o.Ay;t.addStop(new l.A(0,255,0,255),0),t.addStop(new l.A(0,255,0,0),1),this.gradPod=new u.A("cutout-gradient-grad",t,!0),this.magicTolerance=new c.A("cutout-magic-tolerance",{compact:!0,defaultValue:.32,label:(0,a.A)("tolerance")+":",labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100}),this.magicFeather=new c.A("cutout-magic-feather",{compact:!0,defaultValue:0,label:(0,a.A)("feather")+":",labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100}),this.shapeFeather=new c.A("cutout-shape-feather",{compact:!0,defaultValue:0,label:(0,a.A)("feather")+":",labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100}),this.lassoFeather=new c.A("cutout-lasso-feather",{compact:!0,defaultValue:0,label:(0,a.A)("feather")+":",labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100}),(0,i.Ay)("cutout-magic-settings").style.display="none",(0,i.Ay)("cutout-draw-settings").style.display="none",(0,i.Ay)("cutout-shape-settings").style.display="none",(0,i.Ay)("cutout-lasso-settings").style.display="none",(0,i.Ay)("cutout-gradient-settings").style.display="none",this.addDownListeners(),this.layerSelect();const s=document.querySelector('input[name="cutout-type"]:checked').value;this.setType(s);const h=document.querySelector('input[name="cutout-mode"]:checked').value;this.setMode(h)}drawToMask(e,t,s=1){if(0!==t){let e=new m.A;e.addShader("blur",t),this.scratch.replaceCanvas(e.apply(this.scratch.canvas))}const i=n.TL(this.scratch.canvas);if(!i)return;let a;e||(a=n.ON(this.selected.mask,i));const r=this.selected.mask.getContext("2d");r.save(),r.globalAlpha=s,"remove"===this.mode&&(r.globalCompositeOperation="destination-out"),r.drawImage(this.scratch.canvas,0,0),r.restore(),this.scratch.clear(),this.renderMask(),this.stage.history.add({type:"mask",layer:this.selected,rect:i,patch:a})}}},18177:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(21742),a=s(54738),n=s(42268),r=s(98244),o=s(82042),h=s(15818),c=s(23556),l=s(8689);class d{constructor(e,t,s,i){this.update=i,this.maxElevation=Math.PI/2,this.getAngle=()=>this.angle,this.getElevation=()=>this.elevation,this.setAngle=e=>{this.angle=e,this.angle<0&&(this.angle=2*Math.PI-Math.abs(this.angle)),this.render()},this.setElevation=e=>{this.elevation=e,this.render()},this.start=e=>{document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.end),this.handle.classList.add("grabbed")},this.move=e=>{e.preventDefault(),e.stopPropagation();const t=this.outerCircle.getBoundingClientRect(),s=t.width/2-2,i=t.width/2+t.x,a=t.height/2+t.y,n=e.clientX-i,r=e.clientY-a,o=Math.sqrt(n*n+r*r);if(this.angle=Math.atan2(r,n),this.angle<0&&(this.angle=2*Math.PI-Math.abs(this.angle)),o>s)this.elevation=0,this.render();else{const e=o/s;this.elevation=(1-e)*this.maxElevation,this.render()}this.container.dataset.angle=this.angle.toFixed(5),this.container.dataset.elevation=this.elevation.toFixed(5),this.update&&this.update(this.angle,this.elevation)},this.end=e=>{document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.end),this.handle.classList.remove("grabbed")},this.buildElements=()=>{this.outerCircle=(0,n.T)("div",{className:"outer-circle"}),this.handle=(0,n.T)("div",{className:"handle"},(0,n.T)("div")),this.container.append(this.outerCircle,this.handle)},this.rebindElements=()=>{this.outerCircle=this.container.querySelector(".outer-circle"),this.handle=this.container.querySelector(".handle")},this.render=()=>{const e=this.outerCircle.getBoundingClientRect(),t=this.handle.getBoundingClientRect(),s=(1-this.elevation/this.maxElevation)*(e.width/2-2),i=Math.round(s*Math.cos(this.angle)),a=Math.round(s*Math.sin(this.angle));window.requestAnimationFrame(()=>{this.handle.style.top=a+(e.height/2-t.height/2)+"px",this.handle.style.left=i+(e.width/2-t.width/2)+"px"})},this.cleanUp=()=>{},this.container=(0,n.Ay)(e);!!this.container.querySelector(".outer-circle")?this.rebindElements():this.buildElements(),this.angle=parseFloat(this.container.dataset.angle)||t,this.angle<0&&(this.angle=2*Math.PI-Math.abs(this.angle)),this.elevation=parseFloat(this.container.dataset.elevation)||s,this.handle.addEventListener("mousedown",this.start),this.render()}}var p=s(2215);class u extends p.A{constructor(e){super(e,(0,i.A)("titleBevel")),this.load=async()=>{const e=Promise.resolve().then(s.bind(s,82355)),t=a.D9();await t;const{distanceTransformInv:i}=await e,o=this.shaders.ctx,h=this.cache.getContext("2d").getImageData(0,0,this.cache.width,this.cache.height),c=i(this.cache.width,this.cache.height,h.data);if(!o.getSupportedExtensions().includes("OES_texture_float"))return alert("sorry, this filter requires float textures"),void(0,r.A)("OES_texture_float");o.getExtension("OES_texture_float");const l=o.createTexture();o.bindTexture(o.TEXTURE_2D,l),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.cache.width,this.cache.height,0,o.ALPHA,o.FLOAT,c),o.bindTexture(o.TEXTURE_2D,null),(0,n.Ay)("bevel-loading").style.display="none",(0,n.Ay)("bevel-controls").style.visibility="visible",this.enableApply(),this.map=l,this.update()},this.update=()=>{const e={depth:this.depth.getValue(),size:this.size.getValue(),lightAngle:this.angle.getAngle(),lightElevation:this.angle.getElevation(),lowLightColor:this.lowLightColor.getColor(),highLightColor:this.highLightColor.getColor(),lowOpacity:this.lowOpacity.getValue(),highOpacity:this.highOpacity.getValue(),distanceMap:this.map};this.change("bevel",e.size?e:null)},this.disableApply(),this.kind="bevel",this.shaders=new c.A,this.setContent((0,n.T)("div",{className:"dialog-loading"},(0,n.T)("div",{id:"bevel-controls",className:"controls"},(0,n.T)("div",{className:"bevel-angle"},(0,n.T)("div",{className:"angle-box-holder"},(0,n.T)("div",{id:"bevel-angle",className:"angle-box top-10"})),(0,n.T)("div",{className:"angle-box-sliders"},(0,n.T)("div",{id:"bevel-angle-slider",className:"top-10"}),(0,n.T)("div",{id:"bevel-elevation-slider",className:"top-10"}))),(0,n.T)("div",{id:"bevel-size",className:"top-20"}),(0,n.T)("div",{id:"bevel-depth",className:"top-10"}),(0,n.T)("label",{className:"split top-10"},(0,i.A)("dialogBevelHighColor"),(0,n.T)("div",{id:"bevel-highlight-color"})),(0,n.T)("div",{id:"bevel-high-opacity",className:"top-15"}),(0,n.T)("label",{className:"split top-10"},(0,i.A)("dialogBevelShadowColor"),(0,n.T)("div",{id:"bevel-lowlight-color"})),(0,n.T)("div",{id:"bevel-low-opacity",className:"top-15"})),(0,n.T)("div",{id:"bevel-loading",className:"message"},(0,n.T)("label",{className:"working"},(0,i.A)("loading"))))),this.highLightColor=new l.A("bevel-highlight-color",h.A.fromHEX("#ffffff"),this.update,this.update),this.lowLightColor=new l.A("bevel-lowlight-color",h.A.fromHEX("#000000"),this.update,this.update),this.size=new o.A("bevel-size",{label:(0,i.A)("size"),range:[0,150],defaultValue:10,step:1,labelFormat:e=>`${e}px`,onChange:()=>this.update()});const t=-Math.PI/4;this.angle=new d("bevel-angle",t,0,(e,t)=>{let s=(e*(180/Math.PI)+90)%360;this.angleSlider.setValue(s),this.elevationSlider.setValue(t*(180/Math.PI)),this.update()}),this.angleSlider=new o.A("bevel-angle-slider",{label:(0,i.A)("angle"),range:[0,360],step:1,defaultValue:45,labelFormat:e=>e.toFixed(0)+"",labelParse:e=>parseInt(e,10),onChange:e=>{this.angle.setAngle((e-90)*(Math.PI/180)),this.update()}}),this.elevationSlider=new o.A("bevel-elevation-slider",{label:(0,i.A)("elevation"),range:[0,90],defaultValue:180*this.angle.getElevation()/Math.PI,step:1,labelFormat:e=>e.toFixed(0)+"",labelParse:e=>parseInt(e,10),onChange:e=>{this.angle.setElevation(e*(Math.PI/180)),this.update()}}),this.depth=new o.A("bevel-depth",{label:(0,i.A)("depth"),range:[.001,1],defaultValue:1,step:.001,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.highOpacity=new o.A("bevel-high-opacity",{label:(0,i.A)("dialogBevelHighOpacity"),range:[0,1],defaultValue:.9,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.lowOpacity=new o.A("bevel-low-opacity",{label:(0,i.A)("dialogBevelShadowOpacity"),range:[0,1],defaultValue:.75,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.position(),this.load()}}},18252:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titlePosterize")),this.setContent((0,n.T)("div",{id:"posterize-slider"})),new a.A("posterize-slider",{label:(0,r.A)("colors"),range:[0,.3],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("posterize",e)})}}},18505:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(21742),a=s(41915),n=s(42268),r=s(81937);class o{constructor(e,t){this.stage=e,this.active=t,this.dragStart=e=>{this.p=e,this.d=new a.A(this.panel.offsetLeft,this.panel.offsetTop)},this.dragMove=e=>{this.panel.style.left=Math.round(this.d.x+(e.x-this.p.x))+"px",this.panel.style.top=Math.round(this.d.y+(e.y-this.p.y))+"px"},this.dragEnd=e=>{let t=Math.round(this.d.y+(e.y-this.p.y)),s=Math.round(this.d.x+(e.x-this.p.x));t<76&&(t=76),s<0&&(s=0),s+120>(0,n.Ay)("workspace").offsetWidth&&(s=(0,n.Ay)("workspace").offsetWidth-240),this.panel.style.left=s+"px",this.panel.style.top=t+"px"},this.resizeStart=e=>{this.d=new a.A(this.panel.clientHeight,e.y)},this.resizeMove=e=>{const t=this.d.x+(e.y-this.d.y);this.panel.style.height=(t<120?120:t)+"px"},this.activate=e=>{this.panel.classList.toggle("active",e),e&&this.panel.classList.remove("collapse"),this.active=e,this.render()},this.render=()=>{if(!this.active||!this.stage.fresco||!this.stage.history)return void(this.list.innerHTML="");const e=this.stage.history.undos(!1),t=this.stage.history.undos(!0),s=e.length+t.length,a=e=>()=>this.stage.history.jump(e-s),r=e=>()=>this.stage.history.jump(e),o=e.map((e,t)=>{const s=h(e,!1);return(0,n.T)("li",(0,n.T)("div",{className:"history-item",onclick:a(t+1)},(0,n.T)("div",s.title),(0,n.T)("img",{src:`/img/tool/${s.icon}.svg`,className:"ic"})))});if(0===t.length&&o.length>0){const e=o[o.length-1].querySelector(".history-item");e.classList.add("selected"),e.children[1].classList.remove("ic"),e.onclick=void 0}const c=this.stage.history.redos(!1);o.push(...c.map((e,t)=>{const s=h(e,!1);return(0,n.T)("li",(0,n.T)("div",{className:"history-item redo",onclick:r(t+1)},(0,n.T)("div",s.title),(0,n.T)("img",{src:`/img/tool/${s.icon}.svg`,className:"ic"})))}));const l=this.stage.history.getActiveTransaction();if(l){const s=t.map((s,i)=>{const r=h(s,!0);return i===t.length-1?(0,n.T)("li",{className:"selected"},r.title,(0,n.T)("img",{src:`/img/tool/${r.icon}.svg`})):(0,n.T)("li",{onclick:a(e.length+i+1)},r.title,(0,n.T)("img",{src:`/img/tool/${r.icon}.svg`,className:"ic"}))}),d=this.stage.history.redos(!0);s.push(...d.map((e,t)=>{const s=h(e,!0);return(0,n.T)("li",{className:"redo",onclick:r(c.length+t+1)},s.title,(0,n.T)("img",{src:`/img/tool/${s.icon}.svg`,className:"ic"}))}));const p=function(e){switch(e){case"arrange":case"arrangeStack":return{title:(0,i.A)("historyArrange"),icon:"arrange"};case"textSettings":return{title:(0,i.A)("historyText"),icon:"text"};case"frameSettings":return{title:(0,i.A)("historyFrame"),icon:"frame"};case"shapeSettings":return{title:(0,i.A)("historyShape"),icon:"shape"};default:return{title:e,icon:e}}}(l.type);o.push((0,n.T)("li",(0,n.T)("div",{className:"history-item local "+(0===t.length?"redo":"")},(0,n.T)("div",p.title),(0,n.T)("img",{src:`/img/tool/${p.icon}.svg`,className:"ic"})),(0,n.T)("ol",{className:"history-local"},...s)))}this.list.innerHTML="",this.list.append(...o);let d=this.list.querySelector(".selected");d&&d.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})},this.panel=(0,n.Ay)("history-panel"),this.panel.classList.toggle("active",t),this.list=(0,n.Ay)("history-list"),new r.A((0,n.Ay)("history-panel-content")),document.addEventListener("history-update",this.render,!1),(0,n.Ay)("history-minimize").addEventListener("pointerdown",e=>{e.stopPropagation(),(0,n.Ay)("history-panel").classList.toggle("collapse")},!0),(0,n.Ay)("history-close").addEventListener("pointerdown",e=>{e.stopPropagation(),document.dispatchEvent(new CustomEvent("panel-state",{detail:"history-panel"}))},!0);const s=(0,n.T)("img",{id:"layer-panel-resize",src:"/img/icon/three-dot.svg",className:"resize ic"});(0,n.Bb)(s,this.resizeStart,this.resizeMove),this.panel.append(s),(0,n.Bb)((0,n.Ay)("history-panel-title"),this.dragStart,this.dragMove,this.dragEnd)}}function h(e,t){switch(e.type){case"addLayer":{let t="empty",s=(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1);switch(e.kind){case"addimage":case"pasteimage":case"duplicateimage":t="image";break;case"addtext":case"pastetext":case"duplicatetext":t="text";break;case"addframe":case"pasteframe":case"duplicateframe":t="frame";break;case"addshape":case"pasteshape":case"duplicateshape":t="shape";break;case"addelement":case"pasteelement":case"duplicateelement":t="element"}return{title:(0,i.A)(`history${s}`),icon:t}}case"order":return{title:(0,i.A)("historyOrder"),icon:"menu"};case"textSettings":{let t="menu",s=(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1);return{title:(0,i.A)("historyText"+s),icon:t}}case"textChange":return{title:(0,i.A)("historyTextChange"),icon:"menu"};case"bitmapSwitch":case"bitmapChange":{if(!e.kind)return{title:(0,i.A)("bitmapChange"),icon:"image"};if("eff"===e.kind.substr(0,3)){const t=e.kind.split(" - ")[1];return{title:(0,i.A)("historyEffect",t),icon:"effect"}}let t="menu",s=(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1);switch(e.kind){case"adjust":t="adjust";break;case"transform":t="transform";break;case"distort":t="distort";break;case"shadow":case"shape":t="shape";break;case"draw":t="draw";break;case"fill":t="fill";break;case"gradient":case"lookup":t="gradient";break;case"pen":t="pen";break;case"temper":t="temper";break;case"detail":t="detail";break;case"toning":t="toning";break;case"eraser":t="eraser";break;case"clone":t="clone";break;case"liquify":t="liquify";break;case"healPatch":case"healInfill":t="heal";break;case"glitch":t="glitch";break;case"focus":t="focus";break;case"disperse":t="disperse";break;case"dispersion":t="dispersion";break;case"auto":t="auto";break;case"brightnessContrast":t="contrast";break;case"temperatureTint":t="temperature";break;case"hueSaturation":case"desaturate":t="saturation";break;case"vibrance":t="vibrance";break;case"mimicHDR":t="hdr";break;case"highlightsShadows":t="highlights";break;case"exposure":t="exposure";break;case"curves":case"levels":case"rgbSplit":t="hue";break;case"posterize":t="posterize";break;case"monochrome":t="monochrome";break;case"sharpen":t="sharpen";break;case"clarity":t="clarity";break;case"blur":case"gaussian":case"motionblur":case"zoom":t="blur";break;case"smooth":t="smooth";break;case"grain":case"noise":case"denoise":t="grain";break;case"fringe":t="fringe";break;case"vignette":t="vignette";break;case"bloom":t="bloom";break;case"glamour":t="glamour";break;case"dehaze":t="dehaze";break;case"pixelate":t="pixelate";break;case"mosaic":t="mosaic";break;case"halftone":t="halftone"}return{title:(0,i.A)(`history${s}`),icon:t}}case"crop":return{title:(0,i.A)("historyCrop"),icon:"crop"};case"straighten":return{title:(0,i.A)("historyStraighten"),icon:"crop"};case"deleteLayer":return{title:(0,i.A)(`historyDelete${e.layer.type}`),icon:"delete"};case"arrange":{let t=(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1);return{title:(0,i.A)(`history${t}`),icon:"arrange"}}case"arrangeStack":{let t=(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1);return{title:(0,i.A)(`historyStack${t}`),icon:"arrange"}}case"link":return{title:(0,i.A)("historyLink"+(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1)),icon:"link"};case"flipLayer":case"flip":return{title:(0,i.A)("historyFlip"),icon:"menu"};case"rotateLayer":case"rotate":return{title:(0,i.A)("historyRotate"),icon:"menu"};case"layerSettings":return{title:(0,i.A)(`historyLayer${e.kind.charAt(0).toUpperCase()+e.kind.substring(1)}`),icon:"menu"};case"background":return{title:(0,i.A)("historyBackground"),icon:"picker"};case"pageSize":return{title:(0,i.A)("historyPageSize"),icon:"menu"};case"pageResize":return{title:(0,i.A)("historyPageResize"),icon:"menu"};case"mask":return{title:(0,i.A)("historyMask"),icon:"cutout"};case"maskInvert":return{title:(0,i.A)("historyMaskInvert"),icon:"cutout"};case"merge":return{title:(0,i.A)("historyMerge"),icon:"menu"};case"adjust":return{title:(0,i.A)("history"+e.kind.charAt(0).toUpperCase()+e.kind.substring(1)),icon:e.kind};case"glitch":return{title:(0,i.A)("historyGlitch"+e.kind.charAt(0).toUpperCase()+e.kind.substring(1)),icon:e.kind};case"effect":return{title:e.kind.charAt(0).toUpperCase()+e.kind.substring(1),icon:"effect"};case"selectionAndBitmapSwitch":case"selectionChange":{let t="marquee",s=e.kind;switch(e.kind){case"lasso":s="Lasso",t="lasso";break;case"wand":s="Wand",t="wand";break;case"marquee":s="Marquee",t="marquee";break;case"move":s="SelectionMove";break;case"invert":s="SelectionInvert";break;case"pixels":s="SelectionPixels";break;case"subject":s="SelectionSubject";break;case"all":s="SelectionAll";break;case"restore":s="SelectionRestore";break;case"deselect":s="Deselect";break;case"cut":s="SelectionCut";break;case"copy":s="SelectionCopy"}return{title:(0,i.A)(`history${s}`),icon:t}}case"open":return{title:(0,i.A)("historyOpen"),icon:"menu"};case"rasterize":return{title:(0,i.A)("historyRasterize"+e.kind),icon:"menu"};case"convertSelectionToMask":return{title:(0,i.A)("historyConvertSelectionToMask"),icon:"cutout"};case"convertMaskToSelection":return{title:(0,i.A)("historyConvertMaskToSelection"),icon:"marquee"};case"applyMask":return{title:(0,i.A)("historyApplyMask"),icon:"menu"};case"frameContent":{let t=(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1);return{title:(0,i.A)("historyFrameContent"+t),icon:"image"}}case"frameSettings":{let t=(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1);return{title:(0,i.A)("historyFrame"+t),icon:"frame"}}case"shapeSettings":{let t=(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1);return{title:(0,i.A)("historyShape"+t),icon:"shape"}}case"groupSettings":{let t=(e.kind||"").charAt(0).toUpperCase()+(e.kind||"").substring(1);return{title:(0,i.A)("historyGroup"+t),icon:"group"}}}}},18962:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AncvDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AncvDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"beneficiaryId",baseName:"beneficiaryId",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"AncvDetails.TypeEnum"}],function(e){let t;!function(e){e.Ancv="ancv"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.AncvDetails||(t.AncvDetails={}))},19383:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SubInputDetail=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.SubInputDetail=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"configuration",baseName:"configuration",type:"{ [key: string]: string; }"},{name:"items",baseName:"items",type:"Array<Item>"},{name:"key",baseName:"key",type:"string"},{name:"optional",baseName:"optional",type:"boolean"},{name:"type",baseName:"type",type:"string"},{name:"value",baseName:"value",type:"string"}]},19405:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommonField=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CommonField=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"version",baseName:"version",type:"string"}]},19883:(e,t,s)=>{s.d(t,{A:()=>g});var i=s(42268),a=s(21742),n=s(54738),r=s(16309),o=s(40963),h=s(75770),c=s(15818),l=s(82042),d=s(22866),p=s(29755),u=s(58281),m=s(66495);class g extends h.A{constructor(e){super("gradient",e),this.isShiftDown=!1,this.shiftDown=e=>{"Shift"===e.key&&(this.isShiftDown=!0)},this.shiftUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1)},this.layerSelect=()=>{if(!this.stage.fresco.isSelectedType(d.A.TYPE_IMAGE))return(0,i.Ay)("gradient-no-layer").style.display="flex",(0,i.Ay)("gradient-settings").style.display="none",this.stage.raster.style.cursor="auto",void(this.selected=null);(0,i.Ay)("gradient-no-layer").style.display="none",(0,i.Ay)("gradient-settings").style.display="flex",this.stage.raster.style.cursor="crosshair",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,new o.A(0,0,this.stage.fresco.width,this.stage.fresco.height),"over")},this.down=e=>{this.selected&&(this.stage.coating.freeze(!0),this.downPoint=e,this.stage.coating.ctx.strokeStyle=n.q5,this.stage.coating.ctx.fillStyle=n.bi,this.addMoveListeners())},this.move=e=>{if(this.isShiftDown){const t=this.downPoint.x-e.x,s=this.downPoint.y-e.y;Math.abs(t)<Math.abs(s)?e.x=this.downPoint.x:e.y=this.downPoint.y}window.requestAnimationFrame(()=>{this.downPoint&&(this.stage.coating.clear(!0),this.stage.coating.ctx.lineWidth=2,m.A.line(this.stage.coating.ctx,this.downPoint,e),this.stage.coating.ctx.stroke(),m.A.arc(this.stage.coating.ctx,this.downPoint,6),this.stage.coating.ctx.fill(),this.stage.coating.ctx.stroke(),m.A.arc(this.stage.coating.ctx,e,6),this.stage.coating.ctx.fill(),this.stage.coating.ctx.stroke(),this.stage.coating.ctx.lineWidth=1,this.stage.coating.render())})},this.up=e=>{if(this.stage.coating.ctx.clearRect(0,0,this.stage.raster.width,this.stage.raster.height),this.stage.coating.freeze(!1),this.removeMoveListeners(),this.downPoint.x===e.x&&this.downPoint.y===e.y)return;if(this.downPoint=this.stage.translateRasterToFresco(this.downPoint),e=this.stage.translateRasterToFresco(e),this.isShiftDown){const t=this.downPoint.x-e.x,s=this.downPoint.y-e.y;Math.abs(t)<Math.abs(s)?e.x=this.downPoint.x:e.y=this.downPoint.y}let t,s=document.querySelector('input[name="gradient-type"]:checked').value;if(this.scratch.clear(),this.scratch.ctx.save(),"radial"===s){const s=this.downPoint.x-e.x,i=this.downPoint.y-e.y;t=this.scratch.ctx.createRadialGradient(this.downPoint.x,this.downPoint.y,0,this.downPoint.x,this.downPoint.y,Math.sqrt(s*s+i*i))}else t=this.scratch.ctx.createLinearGradient(this.downPoint.x,this.downPoint.y,e.x,e.y);this.downPoint=void 0,this.gradPod.grad.addStopToCanvasGradient(t),this.scratch.ctx.fillStyle=t,this.scratch.ctx.fillRect(0,0,this.scratch.canvas.width,this.scratch.canvas.height),this.scratch.ctx.restore(),this.scratch.applySelection(this.stage);let a=n.TL(this.scratch.getCanvas());if(a&&a.width>0&&a.height>0){let e=n.ON(this.selected.canvas,this.selected.rect?a.rebase(this.selected.rect.x,this.selected.rect.y):a);const t=n.oM(this.selected.mask),s=this.selected.rect?this.selected.rect.clone():void 0;this.selected.extendCanvas(a),this.scratch.drawToLayer(this.selected,(0,i.Ay)("gradient-blend").value,this.opacity.getValue()),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"gradient",layer:this.selected,patchRect:this.selected.rect?a.rebase(this.selected.rect.x,this.selected.rect.y):a,patch:e,rect:s,mask:t})}window.requestAnimationFrame(()=>this.stage.render())},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.removeDownListeners(),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.shiftDown,!1),document.removeEventListener("keyup",this.shiftUp,!1),this.gradPod.cleanUp(),this.opacity.cleanUp()},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("keydown",this.shiftDown,!1),document.addEventListener("keyup",this.shiftUp,!1);let t=new r.Ay;t.addStop(c.A.fromHEX(p.Ay.mainColor),0),t.addStop(c.A.fromHEX(p.Ay.altColor),1),this.gradPod=new u.A("gradient-grad",t),this.opacity=new l.A("gradient-opacity",{compact:!0,label:(0,a.A)("opacity")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%"}),this.addDownListeners(),this.layerSelect()}}},20576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SubMerchantInfo=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.SubMerchantInfo=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"address",baseName:"address",type:"BillingAddress"},{name:"id",baseName:"id",type:"string"},{name:"mcc",baseName:"mcc",type:"string"},{name:"name",baseName:"name",type:"string"},{name:"taxId",baseName:"taxId",type:"string"}]},20718:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Split=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Split=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"account",baseName:"account",type:"string"},{name:"amount",baseName:"amount",type:"SplitAmount"},{name:"description",baseName:"description",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"type",baseName:"type",type:"Split.TypeEnum"}],function(e){let t;!function(e){e.AcquiringFees="AcquiringFees",e.AdyenCommission="AdyenCommission",e.AdyenFees="AdyenFees",e.AdyenMarkup="AdyenMarkup",e.BalanceAccount="BalanceAccount",e.Commission="Commission",e.Default="Default",e.Interchange="Interchange",e.MarketPlace="MarketPlace",e.PaymentFee="PaymentFee",e.Remainder="Remainder",e.SchemeFee="SchemeFee",e.Surcharge="Surcharge",e.Tip="Tip",e.Vat="VAT"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.Split||(t.Split={}))},21079:(e,t,s)=>{s.d(t,{Ay:()=>r,K5:()=>n,kt:()=>a});var i=s(42268);class a{constructor(e,t,s,i,a){this.name=e,this.callback=t,this.short=s,this.icon=i,this.sub=a}}class n extends a{constructor(){super()}}class r{constructor(e,t,s=!1){this.addItem=(e,t)=>{if(e.name)if(e.sub){const s=(0,i.T)("ul"),a=(0,i.T)("li",{className:"more"},e.icon?(0,i.T)("img",{src:e.icon}):"",e.name,s);for(const t of e.sub)this.addItem(t,s);t.append(a)}else e.callback?t.appendChild((0,i.T)("li",{onclick:()=>{e.callback(),this.cleanUp()}},e.icon?(0,i.T)("img",{src:e.icon}):"",e.name,e.short?(0,i.T)("span",{},e.short):"")):t.appendChild((0,i.T)("li",{className:"disabled"},e.icon?(0,i.T)("img",{src:e.icon}):"",e.name,e.short?(0,i.T)("span",{},e.short):""));else t.appendChild((0,i.T)("li",{className:"split"}))},this.cleanUp=()=>{this.holder.removeEventListener("mouseleave",this.cleanUp),this.holder.remove(),this.holder=void 0,this.id=void 0},this.id=Math.round(99999999999999*Math.random()).toString(),this.holder=(0,i.T)("div",{id:this.id,className:"overflow-menu-holder"}),this.holder.addEventListener("contextmenu",e=>(e.stopPropagation(),e.preventDefault(),!1)),this.holder.style.display="block",this.holder.style.left=s?e.x-235+"px":e.x-5+"px",this.list=(0,i.T)("ul",{className:"overflow-menu"}),this.holder.appendChild(this.list);for(const i of t)this.addItem(i,this.list);this.holder.addEventListener("mouseleave",this.cleanUp);const a="none"===(0,i.Ay)("splash").style.display?(0,i.Ay)("workspace"):(0,i.Ay)("splash");a.appendChild(this.holder),e.y+this.holder.clientHeight>a.scrollHeight?this.holder.style.top=e.y+5-this.holder.clientHeight+"px":this.holder.style.top=e.y-5+"px"}}},21164:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleExposure")),this.setContent((0,n.T)("div",{id:"exposure"})),new a.A("exposure",{label:(0,r.A)("amount"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("exposure",e)})}}},21404:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(41915);class a{constructor(e=1,t=0,s=0,i=1,n=0,r=0){this.a=e,this.b=t,this.c=s,this.d=i,this.e=n,this.f=r,this.reset=()=>{this.a=this.d=1,this.b=this.c=this.e=this.f=0},this.translate=e=>{this.transform(1,0,0,1,e.x,e.y)},this.rotate=e=>{let t=Math.cos(e),s=Math.sin(e);this.transform(t,s,-s,t,0,0)},this.rotateDegree=function(e){this.rotate(.017453292519943295*e)},this.transform=(e,t,s,i,a,n)=>{const r=this.a,o=this.b,h=this.c,c=this.d,l=this.e,d=this.f;this.a=r*e+h*t,this.b=o*e+c*t,this.c=r*s+h*i,this.d=o*s+c*i,this.e=r*a+h*n+l,this.f=o*a+c*n+d},this.invert=()=>{let e=this.a,t=this.b,s=this.c,i=this.d,n=this.e,r=this.f,o=(new a,e*i-t*s);this.a=i/o,this.b=-t/o,this.c=-s/o,this.d=e/o,this.e=(s*r-i*n)/o,this.f=-(e*r-t*n)/o}}transformPoint(e){return new i.A(e.x*this.a+e.y*this.c+this.e,e.x*this.b+e.y*this.d+this.f)}}},21742:(e,t,s)=>{function i(e,...t){if(!I18N_STRINGS)return e;let s=I18N_STRINGS[e];if(s||(console.log("No translation for key",e),s=e),!t||0===t.length)return s;let i=0;return s.replace(/%(\d+\$)?(s|d|f){1}/gm,(e,...s)=>{const[a,n]=s,r=a?parseInt(a.slice(0,-1),10):i++;switch(n){case"d":const s=t[r];return"number"!=typeof s?"NaN":s.toFixed(0);case"s":const i=t[r];return i?i.toString():e;default:return e}})}s.d(t,{A:()=>i})},21912:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentVerificationResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentVerificationResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"fraudResult",baseName:"fraudResult",type:"FraudResult"},{name:"merchantReference",baseName:"merchantReference",type:"string"},{name:"order",baseName:"order",type:"CheckoutOrderResponse"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"refusalReason",baseName:"refusalReason",type:"string"},{name:"refusalReasonCode",baseName:"refusalReasonCode",type:"string"},{name:"resultCode",baseName:"resultCode",type:"PaymentVerificationResponse.ResultCodeEnum"},{name:"serviceError",baseName:"serviceError",type:"ServiceErrorDetails"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"}],function(e){let t;!function(e){e.AuthenticationFinished="AuthenticationFinished",e.AuthenticationNotRequired="AuthenticationNotRequired",e.Authorised="Authorised",e.Cancelled="Cancelled",e.ChallengeShopper="ChallengeShopper",e.Error="Error",e.IdentifyShopper="IdentifyShopper",e.PartiallyAuthorised="PartiallyAuthorised",e.Pending="Pending",e.PresentToShopper="PresentToShopper",e.Received="Received",e.RedirectShopper="RedirectShopper",e.Refused="Refused",e.Success="Success"}(t=e.ResultCodeEnum||(e.ResultCodeEnum={}))}(s=t.PaymentVerificationResponse||(t.PaymentVerificationResponse={}))},22049:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateOrderRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CreateOrderRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"expiresAt",baseName:"expiresAt",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"reference",baseName:"reference",type:"string"}]},22192:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDS2RequestData=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ThreeDS2RequestData=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"acctInfo",baseName:"acctInfo",type:"AcctInfo"},{name:"acctType",baseName:"acctType",type:"ThreeDS2RequestData.AcctTypeEnum"},{name:"acquirerBIN",baseName:"acquirerBIN",type:"string"},{name:"acquirerMerchantID",baseName:"acquirerMerchantID",type:"string"},{name:"addrMatch",baseName:"addrMatch",type:"ThreeDS2RequestData.AddrMatchEnum"},{name:"authenticationOnly",baseName:"authenticationOnly",type:"boolean"},{name:"challengeIndicator",baseName:"challengeIndicator",type:"ThreeDS2RequestData.ChallengeIndicatorEnum"},{name:"deviceChannel",baseName:"deviceChannel",type:"string"},{name:"deviceRenderOptions",baseName:"deviceRenderOptions",type:"DeviceRenderOptions"},{name:"homePhone",baseName:"homePhone",type:"Phone"},{name:"mcc",baseName:"mcc",type:"string"},{name:"merchantName",baseName:"merchantName",type:"string"},{name:"messageVersion",baseName:"messageVersion",type:"string"},{name:"mobilePhone",baseName:"mobilePhone",type:"Phone"},{name:"notificationURL",baseName:"notificationURL",type:"string"},{name:"payTokenInd",baseName:"payTokenInd",type:"boolean"},{name:"paymentAuthenticationUseCase",baseName:"paymentAuthenticationUseCase",type:"string"},{name:"purchaseInstalData",baseName:"purchaseInstalData",type:"string"},{name:"recurringExpiry",baseName:"recurringExpiry",type:"string"},{name:"recurringFrequency",baseName:"recurringFrequency",type:"string"},{name:"sdkAppID",baseName:"sdkAppID",type:"string"},{name:"sdkEncData",baseName:"sdkEncData",type:"string"},{name:"sdkEphemPubKey",baseName:"sdkEphemPubKey",type:"SDKEphemPubKey"},{name:"sdkMaxTimeout",baseName:"sdkMaxTimeout",type:"number"},{name:"sdkReferenceNumber",baseName:"sdkReferenceNumber",type:"string"},{name:"sdkTransID",baseName:"sdkTransID",type:"string"},{name:"sdkVersion",baseName:"sdkVersion",type:"string"},{name:"threeDSCompInd",baseName:"threeDSCompInd",type:"string"},{name:"threeDSRequestorAuthenticationInd",baseName:"threeDSRequestorAuthenticationInd",type:"string"},{name:"threeDSRequestorAuthenticationInfo",baseName:"threeDSRequestorAuthenticationInfo",type:"ThreeDSRequestorAuthenticationInfo"},{name:"threeDSRequestorChallengeInd",baseName:"threeDSRequestorChallengeInd",type:"ThreeDS2RequestData.ThreeDSRequestorChallengeIndEnum"},{name:"threeDSRequestorID",baseName:"threeDSRequestorID",type:"string"},{name:"threeDSRequestorName",baseName:"threeDSRequestorName",type:"string"},{name:"threeDSRequestorPriorAuthenticationInfo",baseName:"threeDSRequestorPriorAuthenticationInfo",type:"ThreeDSRequestorPriorAuthenticationInfo"},{name:"threeDSRequestorURL",baseName:"threeDSRequestorURL",type:"string"},{name:"transType",baseName:"transType",type:"ThreeDS2RequestData.TransTypeEnum"},{name:"transactionType",baseName:"transactionType",type:"ThreeDS2RequestData.TransactionTypeEnum"},{name:"whiteListStatus",baseName:"whiteListStatus",type:"string"},{name:"workPhone",baseName:"workPhone",type:"Phone"}],function(e){let t,s,i,a,n,r;!function(e){e._01="01",e._02="02",e._03="03"}(t=e.AcctTypeEnum||(e.AcctTypeEnum={})),function(e){e.Y="Y",e.N="N"}(s=e.AddrMatchEnum||(e.AddrMatchEnum={})),function(e){e.NoPreference="noPreference",e.RequestNoChallenge="requestNoChallenge",e.RequestChallenge="requestChallenge",e.RequestChallengeAsMandate="requestChallengeAsMandate"}(i=e.ChallengeIndicatorEnum||(e.ChallengeIndicatorEnum={})),function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05",e._06="06"}(a=e.ThreeDSRequestorChallengeIndEnum||(e.ThreeDSRequestorChallengeIndEnum={})),function(e){e._01="01",e._03="03",e._10="10",e._11="11",e._28="28"}(n=e.TransTypeEnum||(e.TransTypeEnum={})),function(e){e.GoodsOrServicePurchase="goodsOrServicePurchase",e.CheckAcceptance="checkAcceptance",e.AccountFunding="accountFunding",e.QuasiCashTransaction="quasiCashTransaction",e.PrepaidActivationAndLoad="prepaidActivationAndLoad"}(r=e.TransactionTypeEnum||(e.TransactionTypeEnum={}))}(s=t.ThreeDS2RequestData||(t.ThreeDS2RequestData={}))},22220:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleGlamour")),this.setContent((0,n.T)("div",{id:"glamour-slider"})),new a.A("glamour-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("glamour",e)})}}},22400:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(42268),a=s(21742),n=s(54738),r=s(75770),o=s(82042),h=s(59350),c=s(71499),l=s(85337);class d extends r.A{constructor(e){super("toning",e),this.mode="lighten",this.range="midtone",this.layerSelect=()=>{if(!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("toning-no-layer").style.display="flex",(0,i.Ay)("toning-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("toning-settings").style.display="flex",(0,i.Ay)("toning-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"over"),this.stage.fresco.hasSelection()&&this.scratch.addBake(),this.updateBrush()},this.toggleMode=()=>{this.setMode("lighten"===this.mode?"darken":"lighten")},this.selectMode=e=>{this.setMode(e.currentTarget===(0,i.Ay)("toning-mode-lighten")?"lighten":"darken")},this.setMode=e=>{this.mode=e,(0,i.Ay)("toning-mode-lighten").checked="lighten"===this.mode,(0,i.Ay)("toning-mode-darken").checked="darken"===this.mode},this.isShiftDown=!1,this.keyDown=e=>{if("Shift"===e.key&&!this.isShiftDown)return this.isShiftDown=!0,void this.toggleMode();switch(e.key){case",":e.shiftKey?this.brushPod.stepSoftness(.1):this.brushPod.stepSize(-10);break;case".":e.shiftKey?this.brushPod.stepSoftness(-.1):this.brushPod.stepSize(10)}},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1,this.toggleMode())},this.updateBrush=()=>{this.selected?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom)):this.stage.coating.removeCursorImage()},this.down=(e,t)=>{this.selected&&(this.stage.coating.freeze(!0),this.range=document.querySelector('input[name="toning-range"]:checked').value,this.isShiftDown||(this.x=this.y=-1),"touch"!==t&&this.move(e),this.addMoveListeners())},this.x=-1,this.y=-1,this.move=e=>{let t=2*this.brush.getStep(),s=!1;if(e=this.stage.translateRasterToFresco(e,this.selected.rect),-1===this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0),e.x!==this.x||e.y!==this.y){let i=e.x-this.x,a=e.y-this.y,n=i>0?1:-1,r=a>0?1:-1;if(i=i<0?-i:i,a=a<0?-a:a,i>a){let e=.5*i;for(let o=1;o<=i;o++)this.x+=n,e+=a,e>=i&&(e-=i,this.y+=r),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}else{let e=.5*a;for(let o=1;o<=a;o++)this.y+=r,e+=i,e>=a&&(e-=a,this.x+=n),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}}s&&(this.scratch.applySelection(this.stage),window.requestAnimationFrame(()=>this.stage.render()))},this.drawShape=(e,t)=>{let s=this.strength.getValue(),i=this.getPatchContext(this.brush.canvas.width,this.brush.canvas.height);i.save(),i.drawImage(this.selected.canvas,-e,-t),"lighten"===this.mode?this.lighten(i,this.range,s):this.darken(i,this.range,s),i.globalCompositeOperation="destination-in",i.drawImage(this.brush.canvas,0,0),i.restore(),this.scratch.ctx.drawImage(this.patch,e,t)},this.getPatchContext=(e,t)=>this.patch?(this.patch.width!==e||this.patch.height!==t?(this.patch.width=e,this.patch.height=t):this.ptx.clearRect(0,0,e,t),this.ptx):(this.patch=n.VI(e,t),this.ptx=this.patch.getContext("2d"),this.ptx),this.up=e=>{this.stage.coating.freeze(!1),this.removeMoveListeners();let t=n.TL(this.scratch.getCanvas());if(t&&t.width>0&&t.height>0){let e=n.ON(this.selected.canvas,t);const s=this.selected.rect.clone();this.scratch.drawToLayer(this.selected),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"toning",layer:this.selected,patchRect:t,patch:e,rect:s})}window.requestAnimationFrame(()=>this.stage.render())},this.lighten=(e,t,s)=>{var i=e.canvas.width,a=e.canvas.height;s/=100;for(var n,r,o,h,c,l,d=e.getImageData(0,0,i,a),p=d.data,u=a;u--;)for(n=i;n--;){switch(r=p[c=4*(u*i+n)]/255,o=p[c+1]/255,h=p[c+2]/255,t){case"highlight":r+=s*(Math.exp(r)-1),o+=s*(Math.exp(o)-1),h+=s*(Math.exp(h)-1);break;case"midtone":r+=(l=.25*s)*Math.sin(r*Math.PI),o+=l*Math.sin(o*Math.PI),h+=l*Math.sin(h*Math.PI);break;case"shadow":r=(l=1-.5*s)*r+(1-l),o=l*o+(1-l),h=l*h+(1-l)}(r*=255)>255&&(r=255),(o*=255)>255&&(o=255),(h*=255)>255&&(h=255),p[c]=r,p[c+1]=o,p[c+2]=h}e.putImageData(d,0,0)},this.darken=(e,t,s)=>{var i=e.canvas.width,a=e.canvas.height;s/=100;for(var n,r,o,h,c,l,d=e.getImageData(0,0,i,a),p=d.data,u=a;u--;)for(n=i;n--;){switch(r=p[c=4*(u*i+n)]/255,o=p[c+1]/255,h=p[c+2]/255,t){case"highlight":r*=l=1-.75*s,o*=l,h*=l;break;case"midtone":r-=(l=.25*s)*Math.sin(r*Math.PI),o-=l*Math.sin(o*Math.PI),h-=l*Math.sin(h*Math.PI);break;case"shadow":r+=s*(1-Math.exp(1-r)),o+=s*(1-Math.exp(1-o)),h+=s*(1-Math.exp(1-h))}(r*=255)<0&&(r=0),(o*=255)<0&&(o=0),(h*=255)<0&&(h=0),p[c]=r,p[c+1]=o,p[c+2]=h}e.putImageData(d,0,0)},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.brushPod.cleanUp(),this.strength.cleanUp(),this.stage.coating.freeze(!1),this.removeMoveListeners(),this.removeDownListeners(),document.removeEventListener("zoom-change",this.updateBrush,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),(0,i.Ay)("toning-mode-lighten").removeEventListener("click",this.selectMode,!1),(0,i.Ay)("toning-mode-darken").removeEventListener("click",this.selectMode,!1),this.selected=null,this.patch=null,this.ptx=null},document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),(0,i.Ay)("toning-mode-lighten").addEventListener("click",this.selectMode,!1),(0,i.Ay)("toning-mode-darken").addEventListener("click",this.selectMode,!1),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),this.brush=new h.A(new c.A),this.brushPod=new l.A(e,"toning-brush",this.brush,this.updateBrush),this.strength=new o.A("toning-brush-strength",{compact:!0,label:(0,a.A)("strength")+":",range:[1,100],defaultValue:30,step:1});const t=document.querySelector('input[name="toning-mode"]:checked').value;this.setMode(t),this.addDownListeners(),this.layerSelect()}}},22463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseAdditionalDataCommon=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponseAdditionalDataCommon=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"acquirerAccountCode",baseName:"acquirerAccountCode",type:"string"},{name:"acquirerCode",baseName:"acquirerCode",type:"string"},{name:"acquirerReference",baseName:"acquirerReference",type:"string"},{name:"alias",baseName:"alias",type:"string"},{name:"aliasType",baseName:"aliasType",type:"string"},{name:"authCode",baseName:"authCode",type:"string"},{name:"authorisationMid",baseName:"authorisationMid",type:"string"},{name:"authorisedAmountCurrency",baseName:"authorisedAmountCurrency",type:"string"},{name:"authorisedAmountValue",baseName:"authorisedAmountValue",type:"string"},{name:"avsResult",baseName:"avsResult",type:"string"},{name:"avsResultRaw",baseName:"avsResultRaw",type:"string"},{name:"bic",baseName:"bic",type:"string"},{name:"coBrandedWith",baseName:"coBrandedWith",type:"string"},{name:"cvcResult",baseName:"cvcResult",type:"string"},{name:"cvcResultRaw",baseName:"cvcResultRaw",type:"string"},{name:"dsTransID",baseName:"dsTransID",type:"string"},{name:"eci",baseName:"eci",type:"string"},{name:"expiryDate",baseName:"expiryDate",type:"string"},{name:"extraCostsCurrency",baseName:"extraCostsCurrency",type:"string"},{name:"extraCostsValue",baseName:"extraCostsValue",type:"string"},{name:"fraudCheck__itemNr__FraudCheckname",baseName:"fraudCheck-[itemNr]-[FraudCheckname]",type:"string"},{name:"fraudManualReview",baseName:"fraudManualReview",type:"string"},{name:"fraudResultType",baseName:"fraudResultType",type:"ResponseAdditionalDataCommon.FraudResultTypeEnum"},{name:"fundingSource",baseName:"fundingSource",type:"string"},{name:"fundsAvailability",baseName:"fundsAvailability",type:"string"},{name:"inferredRefusalReason",baseName:"inferredRefusalReason",type:"string"},{name:"isCardCommercial",baseName:"isCardCommercial",type:"string"},{name:"issuerCountry",baseName:"issuerCountry",type:"string"},{name:"liabilityShift",baseName:"liabilityShift",type:"string"},{name:"mcBankNetReferenceNumber",baseName:"mcBankNetReferenceNumber",type:"string"},{name:"merchantAdviceCode",baseName:"merchantAdviceCode",type:"string"},{name:"merchantReference",baseName:"merchantReference",type:"string"},{name:"networkTxReference",baseName:"networkTxReference",type:"string"},{name:"ownerName",baseName:"ownerName",type:"string"},{name:"paymentAccountReference",baseName:"paymentAccountReference",type:"string"},{name:"paymentMethod",baseName:"paymentMethod",type:"string"},{name:"paymentMethodVariant",baseName:"paymentMethodVariant",type:"string"},{name:"payoutEligible",baseName:"payoutEligible",type:"string"},{name:"realtimeAccountUpdaterStatus",baseName:"realtimeAccountUpdaterStatus",type:"string"},{name:"receiptFreeText",baseName:"receiptFreeText",type:"string"},{name:"recurring_contractTypes",baseName:"recurring.contractTypes",type:"string"},{name:"recurring_firstPspReference",baseName:"recurring.firstPspReference",type:"string"},{name:"recurring_recurringDetailReference",baseName:"recurring.recurringDetailReference",type:"string"},{name:"recurring_shopperReference",baseName:"recurring.shopperReference",type:"string"},{name:"recurringProcessingModel",baseName:"recurringProcessingModel",type:"ResponseAdditionalDataCommon.RecurringProcessingModelEnum"},{name:"referred",baseName:"referred",type:"string"},{name:"refusalReasonRaw",baseName:"refusalReasonRaw",type:"string"},{name:"requestAmount",baseName:"requestAmount",type:"string"},{name:"requestCurrencyCode",baseName:"requestCurrencyCode",type:"string"},{name:"shopperInteraction",baseName:"shopperInteraction",type:"string"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"terminalId",baseName:"terminalId",type:"string"},{name:"threeDAuthenticated",baseName:"threeDAuthenticated",type:"string"},{name:"threeDAuthenticatedResponse",baseName:"threeDAuthenticatedResponse",type:"string"},{name:"threeDOffered",baseName:"threeDOffered",type:"string"},{name:"threeDOfferedResponse",baseName:"threeDOfferedResponse",type:"string"},{name:"threeDSVersion",baseName:"threeDSVersion",type:"string"},{name:"visaTransactionId",baseName:"visaTransactionId",type:"string"},{name:"xid",baseName:"xid",type:"string"}],function(e){let t,s;!function(e){e.Green="GREEN",e.Fraud="FRAUD"}(t=e.FraudResultTypeEnum||(e.FraudResultTypeEnum={})),function(e){e.CardOnFile="CardOnFile",e.Subscription="Subscription",e.UnscheduledCardOnFile="UnscheduledCardOnFile"}(s=e.RecurringProcessingModelEnum||(e.RecurringProcessingModelEnum={}))}(s=t.ResponseAdditionalDataCommon||(t.ResponseAdditionalDataCommon={}))},22656:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(54738),a=s(40963),n=s(23556),r=s(41915),o=s(66495);class h{constructor(e,t){this.setMask=e=>{this.mask=e,this.ctx=this.mask.getContext("2d",{willReadFrequently:!0}),this.createOutline()},this.isSelected=e=>{var t;return!!(null===(t=this.bounds)||void 0===t?void 0:t.isInside(e))&&this.ctx.getImageData(e.x,e.y,1,1).data[3]>=64},this.applyOffset=()=>{let e=i.oM(this.mask);this.ctx.clearRect(0,0,this.mask.width,this.mask.height),this.ctx.drawImage(e,this.offset.x,this.offset.y),this.offset.x=this.offset.y=0,this.createOutline()},this.editRectangle=(e,t,s)=>{let a=i.Nw(this.mask.width,this.mask.height),n=a.getContext("2d");o.A.fill(n,"rectangle",e.topLeft(),e.bottomRight()),n=void 0,this.drawOnMask(a,t,!1,s)},this.editEllipse=(e,t,s,a)=>{let n=i.Nw(this.mask.width,this.mask.height),r=n.getContext("2d");o.A.fill(r,"ellipse",e.topLeft(),e.bottomRight()),r=void 0,this.drawOnMask(n,t,s,a)},this.editBezier=(e,t,s,a)=>{let n=i.Nw(this.mask.width,this.mask.height),r=n.getContext("2d");r.beginPath(),r.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i+=2)i+1===e.length?r.lineTo(e[i].x,e[i].y):r.quadraticCurveTo(e[i+1].x,e[i+1].y,e[i].x,e[i].y);r.fill(),r=void 0,this.drawOnMask(n,t,s,a)},this.editPolygon=(e,t,s,a)=>{let n=i.Nw(this.mask.width,this.mask.height),r=n.getContext("2d");r.beginPath(),r.moveTo(e[0].x,e[0].y),e.forEach(e=>r.lineTo(e.x,e.y)),r.fill(),r=void 0,this.drawOnMask(n,t,s,a)},this.drawOnMask=(e,t=0,s=!1,i=!1,a=new r.A(0,0))=>{if(t>0){let s=new n.A;s.addShader("blur",t),e=s.apply(e)}else if(s){let t=new n.A;t.addShader("dealiasing",!0),e=t.apply(e)}this.ctx.save(),i&&(this.ctx.globalCompositeOperation="destination-out"),this.ctx.drawImage(e,a.x,a.y),this.ctx.restore(),this.createOutline()},this.selectAll=()=>{this.ctx.fillRect(0,0,this.mask.width,this.mask.height),this.createOutline()},this.invert=()=>{const e=new n.A([]);e.addShader("alpha-invert",1),this.mask=i.oM(e.apply(this.mask)),this.ctx=this.mask.getContext("2d",{willReadFrequently:!0}),this.createOutline()},this.size=(e,t)=>{const s=i.Nw(e,t);this.ctx=s.getContext("2d",{willReadFrequently:!0});const a=Math.round(.5*(s.width-this.mask.width)),n=Math.round(.5*(s.height-this.mask.height));this.ctx.drawImage(this.mask,a,n),this.mask=s,this.createOutline()},this.resize=(e,t)=>{this.mask=i.H5(this.mask,e,t),this.ctx=this.mask.getContext("2d",{willReadFrequently:!0}),this.createOutline()},this.createOutline=()=>{let e=this.ctx.getImageData(0,0,this.mask.width,this.mask.height);if(this.bounds=i.zR(e),!this.bounds)return;let t=this.bounds.top(),s=this.bounds.left(),a=this.bounds.right(),n=this.bounds.bottom(),r=this.mask.width,o=this.mask.height;this.outline=new Array;let h,c,l,d,p,u=-1;for(let i=t;i<n;++i){c=0===s||e.data[4*(i*r+s-1)+3]<64,l=e.data[4*(i*r+s)+3]<64;for(let t=s;t<a;++t)h=c,c=l,l=t+1===r||e.data[4*(i*r+t+1)+3]<64,c||(u=-1,d=i-1<0||e.data[4*((i-1)*r+t)+3]<64,p=i+1===o||e.data[4*((i+1)*r+t)+3]<64,h&&d&&l&&p?u=8:h&&d&&p?u=9:l&&d&&p?u=10:l&&d&&h?u=11:l&&p&&h?u=12:h&&l?u=13:p&&d?u=14:h&&d?u=0:d&&l?u=2:h&&p?u=5:p&&l?u=7:d?u=1:h?u=3:l?u=4:p&&(u=6),-1!==u&&this.outline.push(t,i,u))}},this.clear=()=>{this.ctx.clearRect(0,0,this.mask.width,this.mask.height),this.outline=new Array},this.reset=()=>{this.ctx.clearRect(0,0,this.mask.width,this.mask.height),this.outline=new Array,this.offset=new r.A,this.bounds=new a.A},this.cleanUp=()=>{this.outline=void 0,this.offset=void 0,this.bounds=void 0,this.mask=void 0,this.ctx=void 0},this.mask=i.Nw(e,t),this.offset=new r.A,this.bounds=new a.A,this.ctx=this.mask.getContext("2d",{willReadFrequently:!0})}}},22822:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodGroup=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentMethodGroup=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"name",baseName:"name",type:"string"},{name:"paymentMethodData",baseName:"paymentMethodData",type:"string"},{name:"type",baseName:"type",type:"string"}]},22866:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(54738);class a{constructor(e){this.settings={opacity:1,blendmode:"",locked:!1,visible:!0,name:"",link:""},this.hasLink=()=>this.settings.link&&""!==this.settings.link,this.rotate=e=>{this.canvas&&(this.canvas=i.SE(this.canvas,e?-90:90),this.mask&&(this.mask=i.SE(this.mask,e?-90:90)),this.rect=this.rect.flipWidthAndHeight())},this.flip=e=>{this.canvas&&(this.canvas=i.yz(this.canvas,e),this.mask&&(this.mask=i.yz(this.mask,e)))},this.setWidth=(e,t)=>{this.rect&&(e<1&&(e=1),this.rect.width=e,0!==t&&(this.rect.height=Math.round(this.rect.width/t),this.rect.height<1&&(this.rect.height=1)))},this.setHeight=(e,t)=>{this.rect&&(e<1&&(e=1),this.rect.height=e,0!==t&&(this.rect.width=Math.round(this.rect.height*t),this.rect.width<1&&(this.rect.width=1)))},this.position=(e,t)=>{this.rect&&(void 0!==e&&(this.rect.x=e),void 0!==t&&(this.rect.y=t))},this.scale=(e,t,s)=>{this.rect&&(this.rect.x=Math.round(this.rect.x*e),this.rect.y=Math.round(this.rect.y*t),this.rect.width=Math.round(this.rect.width*e),this.rect.height=Math.round(this.rect.height*t),this.rect.width<0&&(this.rect.width=1),this.rect.height<0&&(this.rect.height=1))},this.setRect=e=>{this.bect?this.bect=e:this.rect=e},this.getRect=()=>this.bect?this.bect:this.rect,this.getCanvas=()=>this.transient?this.transient:this.baked?this.baked:this.canvas,this.setAltCanvas=()=>{this.transient=i.oM(this.canvas)},this.replaceCanvas=e=>{this.canvas?this.canvas.width===e.width&&this.canvas.height===e.height||(this.canvas.width=e.width,this.canvas.height=e.height):this.canvas=i.Nw(this.rect.width,this.rect.height);const t=this.canvas.getContext("2d");t.save(),t.imageSmoothingEnabled=!1,t.globalCompositeOperation="copy",t.drawImage(e,0,0),t.restore()},this.extendCanvas=e=>{},this.switchCanvas=(e,t)=>{},this.render=(e=!1)=>{},this.calculate=(e,t,s)=>{},this.rasterize=()=>{},this.clone=(e=!1)=>{},this.id=i.Os(),this.type=e}}a.TYPE_GROUP="group",a.TYPE_SCRATCH="scratch",a.TYPE_ELEMENT="element",a.TYPE_IMAGE="image",a.TYPE_SHAPE="shape",a.TYPE_FRAME="frame",a.TYPE_TEXT="text";const n=a},23123:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancelOrderRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CancelOrderRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"order",baseName:"order",type:"EncryptedOrderData"}]},23556:(e,t,s)=>{s.d(t,{A:()=>g});var i=s(41915),a=s(15818),n=s(1177),r=s(81718),o=s(98244),h=s(52549),c=s(57653),l=s(59303),d=s(44448),p=s(94711),u=s(75281),m=s(54738);class g{constructor(e){this.drawShader=0,this.sourceTexture=null,this.vertexBuffer=null,this.debug=!1,this.lastInChain=!1,this.currentFramebufferIndex=0,this.tempFramebuffers={},this.width=-1,this.height=-1,this.lastTextureSlot=-1,this.handleContextLost=()=>{null==this.canvas&&(this.canvas=(0,m.Nw)(100,100)),this.initContext()},this.getError=()=>{this.debug&&this.ctx.getError()},this.addShader=(e,t,s=!1)=>{if("fill"==e&&0==t.amount||"toning"==e&&0==t.amount||"levels"==e&&t.isFlat()||null==t||0===t)this.removeShader(e,s);else{for(var i=0;i<this.chain.length;i++)if(this.chain[i].type===e&&this.chain[i].sidekick===s)return void(this.chain[i].value=t);this.chain.push(new y(e,t,s))}},this.getShaderValue=e=>{for(var t=0;t<this.chain.length;t++)if(this.chain[t].type==e)return this.chain[t].value},this.addPreset=(e,t=1)=>{const s=d.A.named(e);s&&(1!==t?s.forEach(e=>{switch(e.name){case"curves":{const s=e.value,i=u.X.createCurveSet(s);i.percent=t,this.addShader(e.name,i);break}case"levels":{const s=e.value,i=new p.A(Math.round(s.minin*t),Math.round(255-(255-s.maxin)*t));this.addShader(e.name,i);break}case"toning":{const s=e.value,i=new l.A(s.highlight,s.midtone,s.shadow,s.amount*t);this.addShader(e.name,i);break}case"fill":{const s=e.value,i=new h.A(s.color,s.blend,s.amount*t);this.addShader(e.name,i);break}default:this.addShader(e.name,e.value*t)}}):s.forEach(e=>this.addShader(e.name,e.value)))},this.removeShaderSidekick=()=>{let e=new Array;for(var t=0;t<this.chain.length;t++)this.chain[t].sidekick||e.push(this.chain[t]);this.chain=e},this.removeShader=(e,t=!1)=>{for(var s=0;s<this.chain.length;s++)if(this.chain[s].type===e&&this.chain[s].sidekick===t)return void this.chain.splice(s,1)},this.runShader=(e,t)=>{switch(e){case"vibrance":return this.vibrance(t);case"brightness":return this.brightness(t);case"temperature":return this.temperature(t);case"balance":return this.balance(t);case"tint":return this.tint(t);case"colorize":return this.colorize(t);case"grain":return this.grain(t);case"noise":return this.noise(t);case"vignette":return this.vignette(t);case"sharpen":return this.sharpen(t);case"blur":return this.blur(t);case"zoom":return this.zoom(t);case"bokeh":return this.bokeh(t);case"gaussian":return this.gaussian(t);case"motion":return this.motion(t);case"radial":return this.radial(t);case"smooth":return this.smooth(t);case"denoise":return this.denoise(t);case"contrast":return this.contrast(t);case"monochrome":return this.monochrome(t);case"desaturate":return this.desaturate();case"invert":return this.invert();case"exposure":return this.exposure(t);case"highlights":return this.highlights(t);case"shadows":return this.shadows(t);case"dehaze":return this.dehaze(t);case"curves":return this.curves(t);case"toning":return this.toning(t);case"lookup":return this.lookup(t);case"fill":return this.fill(t);case"bwpoint":return this.bwpoint(t);case"levels":return this.levels(t);case"multilevels":return this.multilevels(t);case"threshold":return this.threshold(t);case"alphaThreshold":return this.alphaThreshold(t);case"bloom":return this.bloom(t);case"glamour":return this.glamour(t);case"mimichdr":return this.mimicHDR(t);case"posterize":return this.posterize(t);case"fringe":return this.fringe(t);case"pixelate":return this.pixelate(t);case"clarity":return this.clarity(t);case"mosaic":return this.mosaic(t);case"polarcoordinates":return this.polarcoordinates(t);case"kaleidoscope":return this.kaleidoscope(t);case"reflect":return this.reflect(t);case"wave":return this.wave(t);case"fisheye":return this.fisheye(t);case"scanlines":return this.scanlines(t);case"dealiasing":return this.dealiasing();case"alpha-reset":return this.alphaReset();case"alpha-invert":return this.alphaInvert();case"alpha-mask":return this.alphaMask();case"alpha-shift-mask":return this.alphaShiftMask();case"outer-glow":return this.outerGlow(t);case"inner-glow":return this.innerGlow(t);case"sobel":return this.sobel();case"solarize":return this.solarize();case"halftone":return this.halftone(t);case"stroke":return this.stroke(t);case"bevel":return this.bevel(t);case"border":return this.border(t);case"rgb-split":return this.rgbSplit(t);case"slice":return this.slice(t);case"bleed":return this.bleed(t);case"interference":return this.interference(t);case"hue":return this.hue(t);case"hue-red":return this.hue(t,317,46);case"hue-yellow":return this.hue(t,17,106);case"hue-green":return this.hue(t,77,166);case"hue-cyan":return this.hue(t,137,226);case"hue-blue":return this.hue(t,197,286);case"hue-magenta":return this.hue(t,257,346);case"saturation":return this.saturation(t);case"saturation-red":return this.saturation(t,317,46);case"saturation-yellow":return this.saturation(t,17,106);case"saturation-green":return this.saturation(t,77,166);case"saturation-cyan":return this.saturation(t,137,226);case"saturation-blue":return this.saturation(t,197,286);case"saturation-magenta":return this.saturation(t,257,346);case"lightness":return this.lightness(t);case"lightness-red":return this.lightness(t,317,46);case"lightness-yellow":return this.lightness(t,17,106);case"lightness-green":return this.lightness(t,77,166);case"lightness-cyan":return this.lightness(t,137,226);case"lightness-blue":return this.lightness(t,197,286);case"lightness-magenta":return this.lightness(t,257,346);case"melt":return this.melt(t);case"gooey":return this.gooey(t);case"block":return this.block(t);case"curtain":return this.curtain(t);case"blinds":return this.blinds(t);case"wipe":return this.wipe(t);case"slot":return this.slot(t);case"split":return this.split(t);case"circular":return this.circular(t);case"ripple":return this.ripple(t);case"warp":return this.warp(t);case"swipe":return this.swipe(t);case"marquee":return this.marquee(t);default:return console.error("We don't have this type shader, "+e)}},this.reset=()=>{this.chain=[],this.compiledProgram.forEach(function(e){e.destroy(this.ctx)},this),this.compiledProgram.clear(),this.sourceTexture&&(this.activeSourceTexture=void 0,this.sourceTexture.destroy(this.ctx),this.sourceTexture=null);for(let e in this.tempFramebuffers){this.tempFramebuffers[e].destroy(this.ctx)}this.tempFramebuffers={}},this.apply=(e,t=!1)=>{if(0==this.chain.length)return e;this.resize(e.width,e.height),this.drawShader=0,this.sourceTexture&&this.width==e.width&&this.height==e.height||(this.sourceTexture&&(this.sourceTexture.destroy(this.ctx),this.sourceTexture=null),this.sourceTexture=new n.A("texture"),this.sourceTexture.createTexture(this.ctx,e.width,e.height)),(e!==this.activeSourceTexture||t)&&(this.sourceTexture.uploadData(this.ctx,e),this.activeSourceTexture=e);for(var s=0;s<this.chain.length;s++)this.lastInChain=s==this.chain.length-1,this.runShader(this.chain[s].type,this.chain[s].value);return this.currentFramebufferIndex=0,this.canvas},this.resize=(e,t)=>{if(e!=this.width||t!=this.height){if(this.canvas.width=this.width=e,this.canvas.height=this.height=t,!this.vertexBuffer){var s=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,-1,1,0,1,1,-1,1,0,1,1,1,1]);this.ctx||this.initContext(),this.vertexBuffer=this.ctx.createBuffer(),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,s,this.ctx.STATIC_DRAW)}this.ctx.viewport(0,0,this.width,this.height);for(let e in this.tempFramebuffers){this.tempFramebuffers[e].destroy(this.ctx)}this.tempFramebuffers={}}},this.getTempFramebuffer=e=>(this.tempFramebuffers[e]=this.tempFramebuffers[e]||this.createFramebufferTexture(this.width,this.height),this.tempFramebuffers[e]),this.createFramebufferTexture=(e,t)=>{let s=this.ctx.createFramebuffer();this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,s);let i=this.ctx.createRenderbuffer();this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,i),this.ctx.renderbufferStorage(this.ctx.RENDERBUFFER,this.ctx.DEPTH_COMPONENT16,e,t);let a=this.ctx.createTexture();return this.ctx.bindTexture(this.ctx.TEXTURE_2D,a),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,e,t,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,null),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.NEAREST),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.NEAREST),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,a,0),this.ctx.framebufferRenderbuffer(this.ctx.FRAMEBUFFER,this.ctx.DEPTH_ATTACHMENT,this.ctx.RENDERBUFFER,i),this.ctx.bindTexture(this.ctx.TEXTURE_2D,null),this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),new c.A(s,i,a)},this.draw=(e,t=!1)=>{if((this.chain.length<=1||this.lastInChain)&&!t)this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null);else{let e=this.getTempFramebuffer(this.currentFramebufferIndex);this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,e.framebuffer)}this.ctx.uniform4f(e.uniform.transform,1,1,0,0),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT),this.ctx.clearColor(0,0,0,0),this.setTexture(e.texture),this.ctx.drawArrays(this.ctx.TRIANGLES,0,6),this.drawShader++,this.currentFramebufferIndex^=1,this.getError()},this.setTexture=e=>{let t=-1;e.forEach(function(e,s){if(this.ctx.activeTexture(this.ctx.TEXTURE0+s),0===s&&0===this.drawShader)this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.sourceTexture.texture);else if(0===s){let e=1^this.currentFramebufferIndex,t=this.getTempFramebuffer(e);this.ctx.bindTexture(this.ctx.TEXTURE_2D,t.texture)}else this.ctx.bindTexture(this.ctx.TEXTURE_2D,e.texture);t=Math.max(t,s)},this);for(let s=t+1;s<=this.lastTextureSlot;++s)this.ctx.activeTexture(this.ctx.TEXTURE0+s),this.ctx.bindTexture(this.ctx.TEXTURE_2D,null);this.lastTextureSlot=t},this.cleanUp=()=>{this.sourceTexture=null,this.canvas=null,this.ctx=null},this.compileShader=(e,t=this.VERTEX_IDENTITY)=>{let s=new r.A(this.ctx,t,e);var i=Float32Array.BYTES_PER_ELEMENT;return this.ctx.enableVertexAttribArray(s.attribute.apos),this.ctx.vertexAttribPointer(s.attribute.apos,2,this.ctx.FLOAT,!1,4*i,0*i),this.ctx.enableVertexAttribArray(s.attribute.auv),this.ctx.vertexAttribPointer(s.attribute.auv,2,this.ctx.FLOAT,!1,4*i,2*i),s},this.VERTEX_IDENTITY="\n        precision highp float;\n        attribute vec2 apos;\n        attribute vec2 auv;\n        varying vec2 uv;\n        uniform vec4 transform;\n\n        void main(void) {\n            uv = auv;\n            gl_Position = vec4(apos.x * transform.x + transform.z, apos.y * transform.y + transform.w, 0.0, 1.0);\n        }",this.FRAGMENT_IDENTITY="\n        precision highp float;\n        varying vec2 uv;\n        uniform sampler2D texture;\n\n        void main(void) {\n            gl_FragColor = texture2D(texture, uv);\n        }",this.GAUSSKERN_MAX=15,this.cloneChain=()=>{var e,t,s;const i=[];for(let a=0;a<this.chain.length;a++){const n=this.chain[a];let r;switch(n.type){case"curves":{const e=n.value,t=e.rgb.map(e=>e.clone()),s=e.red.map(e=>e.clone()),i=e.green.map(e=>e.clone()),a=e.blue.map(e=>e.clone());r=new u.A(e.scale,t,s,i,a);break}case"levels":{const e=n.value;r=new p.A(e.minin,e.maxin,e.minout,e.maxout,e.midin,e.mid);break}case"toning":{const i=n.value;r=new l.A(null===(e=i.highlight)||void 0===e?void 0:e.clone(),null===(t=i.midtone)||void 0===t?void 0:t.clone(),null===(s=i.shadow)||void 0===s?void 0:s.clone(),i.amount);break}case"fill":{const e=n.value;r=new h.A(e.color.clone(),e.blend,e.amount);break}default:r=n.value}i.push(new y(n.type,r))}return i},this.chain=e||[],this.compiledProgram=new Map,this.canvas=(0,m.Nw)(100,100),this.initContext(),this.canvas.addEventListener("webglcontextlost",this.handleContextLost,!1)}initContext(){this.ctx=this.canvas.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1}),this.ctx||(this.canvas=(0,m.Nw)(100,100),this.ctx=this.canvas.getContext("webgl"),(0,o.A)("weg-gl-pre-error")),this.ctx||(console.log("Could not get shaders webgl canvas context!"),(0,o.A)("weg-gl-error"))}bevel(e){let t=this.compiledProgram.get("bevel");if(!t){let e="\n                precision highp float;\n\n                varying vec2 uv;\n                \n                uniform float zeroPoint;\n                uniform vec3 lightNormal;\n                uniform float dz;\n                uniform float size;\n\n                uniform vec4 lowColor;\n                uniform vec4 highColor;\n                \n                uniform sampler2D dist;\n                uniform sampler2D texture;\n                uniform vec2 px;\n\n                vec4 straightBlend(vec4 src, vec4 dst) {\n                    float alpha = src.a + dst.a * (1.0 - src.a);\n\n                    return vec4(\n                        ((src.rgb * src.a) + (dst.rgb * dst.a) * (1.0 - src.a)) / alpha,\n                        alpha\n                    );\n                }\n                \n                void main() {                    \n                    vec2 flipuv = vec2(uv.x, 1.0 - uv.y);\n                                         \n                    /* PER PIXEL OPS */\n                    float tl = clamp(0.0, size, texture2D(dist, flipuv + vec2(-px.x, -px.y)).a);\n                    float tm = clamp(0.0, size, texture2D(dist, flipuv + vec2(    0, -px.y)).a);\n                    float tr = clamp(0.0, size, texture2D(dist, flipuv + vec2( px.x, -px.y)).a);\n                \n                    float ml = clamp(0.0, size, texture2D(dist, flipuv + vec2(-px.x,     0)).a);\n                    float mr = clamp(0.0, size, texture2D(dist, flipuv + vec2( px.x,     0)).a);\n                \n                    float bl = clamp(0.0, size, texture2D(dist, flipuv + vec2(-px.x,  px.y)).a);\n                    float bm = clamp(0.0, size, texture2D(dist, flipuv + vec2(    0,  px.y)).a);\n                    float br = clamp(0.0, size, texture2D(dist, flipuv + vec2( px.x,  px.y)).a);\n                \n                    float dx = (tr + 2.0 * mr + br) - (tl + 2.0 * ml + bl);\n                    float dy = (bl + 2.0 * bm + br) - (tl + 2.0 * tm + tr);\n                \n                    vec3 surfaceNormal = vec3(dx, dy, dz);\n                    float norm = sqrt(dx*dx + dy*dy + dz*dz);\n                \n                    // Calculate incident light amount, range [-1, 0]\n                    float incidentLight = ((dot(surfaceNormal, lightNormal) / norm) - zeroPoint) - (1.0 - zeroPoint);\n                    \n                    vec4 slopes = mix(lowColor, highColor, 1.0 - abs(incidentLight));\n                    \n                    // Texture\n                    vec4 color = texture2D(texture, uv);\n\n                    // Bevel color, only use the the color where we need it\n                    float alpha = smoothstep(1e-5, dz + 8.0, distance(vec3(0.0,0.0,dz), surfaceNormal));\n                    vec4 bevelColor = vec4(slopes.rgb, slopes.a * alpha);\n\n                    gl_FragColor = straightBlend(\n                        bevelColor,\n                        color\n                    );\n                }";t=this.compileShader(e),this.compiledProgram.set("bevel",t)}this.ctx.useProgram(t.program);t.getTextureById("dist").setTexture(e.distanceMap);const s=Math.sin(e.lightElevation);this.ctx.uniform2f(t.uniform.px,1/this.width,1/this.height),this.ctx.uniform1f(t.uniform.zeroPoint,s),this.ctx.uniform3f(t.uniform.lightNormal,Math.cos(e.lightElevation)*-Math.cos(e.lightAngle),Math.cos(e.lightElevation)*-Math.sin(e.lightAngle),s),this.ctx.uniform4f(t.uniform.lowColor,e.lowLightColor.r/255,e.lowLightColor.g/255,e.lowLightColor.b/255,e.lowOpacity),this.ctx.uniform4f(t.uniform.highColor,e.highLightColor.r/255,e.highLightColor.g/255,e.highLightColor.b/255,e.highOpacity),this.ctx.uniform1f(t.uniform.dz,1/e.depth),this.ctx.uniform1f(t.uniform.size,e.size),this.draw(t)}stroke(e){const t="stroke"+(e.cutout?"-cutout":"");let s=this.compiledProgram.get(t);if(!s){let i=`\n                precision highp float;\n\n                #define CUTOUT ${e.cutout?1:0}\n\n                varying vec2 uv;\n                \n                uniform sampler2D texture;\n                uniform sampler2D distanceMap;\n                            \n                uniform vec4 glowColor;\n                uniform float size;\n\n                vec4 straightBlend(vec4 src, vec4 dst) {\n                    float alpha = src.a + dst.a * (1.0 - src.a);\n\n                    return vec4(\n                        ((src.rgb * src.a) + (dst.rgb * dst.a) * (1.0 - src.a)) / alpha,\n                        alpha\n                    );\n                }\n\n                void main(void) {           \n                    vec2 flipped = vec2(uv.x, 1.0 - uv.y);\n\n                    float distance = texture2D(distanceMap, flipped).a;\n                    float gAlpha = 1.0-smoothstep(size - 3.0, size, distance);\n\n                    vec4 gColor = vec4(\n                        glowColor.rgb, \n                        gAlpha * glowColor.a\n                    );\n\n                    vec4 texColor = texture2D(texture, uv);\n\n                    #if CUTOUT == 1\n                        vec4 tran = vec4(0);\n                        gl_FragColor = mix(gColor, tran, texColor.a);\n                    #else\n                        gl_FragColor = straightBlend(texColor, gColor);                    \n                    #endif\n                }\n            `;s=this.compileShader(i),this.compiledProgram.set(t,s)}this.ctx.useProgram(s.program),this.ctx.uniform4f(s.uniform.glowColor,e.color.r/255,e.color.g/255,e.color.b/255,e.opacity);s.getTextureById("distanceMap").setTexture(e.distanceMap),this.ctx.uniform1f(s.uniform.size,e.size),this.draw(s)}innerGlow(e){let t=this.compiledProgram.get("innerglow");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                \n                uniform sampler2D texture;\n                uniform sampler2D distanceMap;\n                            \n                uniform vec4 glowColor;\n                uniform float size;\n                uniform float feather;\n\n                void main(void) {           \n                    vec2 flipped = vec2(uv.x, 1.0 - uv.y);\n\n                    float distance = texture2D(distanceMap, flipped).a;\n                    float balance = 1.0-smoothstep(size * (1.0-feather), size, distance);\n\n                    vec4 texColor = texture2D(texture, uv);\n\n                    vec4 gColor = vec4(\n                        glowColor.rgb, \n                        texColor.a\n                    );\n                       \n                    gl_FragColor = mix(texColor, gColor, balance * glowColor.a);\n                }\n            ";t=this.compileShader(e),this.compiledProgram.set("innerglow",t)}this.ctx.useProgram(t.program),this.ctx.uniform4f(t.uniform.glowColor,e.color.r/255,e.color.g/255,e.color.b/255,e.opacity);t.getTextureById("distanceMap").setTexture(e.distanceMap),this.ctx.uniform1f(t.uniform.size,e.size),this.ctx.uniform1f(t.uniform.feather,e.feather),this.draw(t)}outerGlow(e){let t=this.compiledProgram.get("outerglow");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                \n                uniform sampler2D texture;\n                uniform sampler2D distanceMap;\n                            \n                uniform vec4 glowColor;\n                uniform float size;\n                uniform float feather;\n\n                vec4 straightBlend(vec4 src, vec4 dst) {\n                    float alpha = src.a + dst.a * (1.0 - src.a);\n\n                    return vec4(\n                        ((src.rgb * src.a) + (dst.rgb * dst.a) * (1.0 - src.a)) / alpha,\n                        alpha\n                    );\n                }\n                \n                void main(void) {           \n                    vec2 flipped = vec2(uv.x, 1.0 - uv.y);\n\n                    float distance = texture2D(distanceMap, flipped).a;\n                    float gAlpha = 1.0-smoothstep(size * (1.0-feather), size, distance);\n\n                    vec4 gColor = vec4(\n                        glowColor.rgb, \n                        gAlpha * glowColor.a\n                    );\n\n                    vec4 texColor = texture2D(texture, uv);\n                    \n                    gl_FragColor = straightBlend(texColor, gColor);                    \n                }\n            ";t=this.compileShader(e),this.compiledProgram.set("outerglow",t)}this.ctx.useProgram(t.program),this.ctx.uniform4f(t.uniform.glowColor,e.color.r/255,e.color.g/255,e.color.b/255,e.opacity);t.getTextureById("distanceMap").setTexture(e.distanceMap),this.ctx.uniform1f(t.uniform.size,e.size),this.ctx.uniform1f(t.uniform.feather,e.feather),this.draw(t)}sobel(){let e=this.compiledProgram.get("sobel");if(!e){let t="\n                precision mediump float;\n\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform vec2 px;\n\n                uniform float m[3];\n                #define M_PI 3.1415926535897932384626433832795\n                #define GET_PIXEL(x,y) (texture2D(texture, uv + px*vec2(x,y)))\n\n                void main() {\n\n                    float dx = (length(GET_PIXEL(-1, -1)*m[0] +\n                                GET_PIXEL(-1,  0)*m[1] +\n                                GET_PIXEL(-1, +1)*m[2]) -\n                            length(GET_PIXEL(+1, -1)*m[0] +\n                                GET_PIXEL(+1,  0)*m[1] +\n                                GET_PIXEL(+1, +1)*m[2]));\n\n                    float dy = (length(GET_PIXEL(-1, -1)*m[0] +\n                                GET_PIXEL(0, -1)*m[1] +\n                                GET_PIXEL(+1, -1)*m[2]) -\n                            length(GET_PIXEL(-1, +1)*m[0] +\n                                GET_PIXEL(0, +1)*m[1] +\n                                GET_PIXEL(+1, +1)*m[2]));\n\n                    float theta = (atan(dy, dx) + M_PI) / (2.0*M_PI);\n\n                    gl_FragColor = vec4(length(vec2(dx, dy)), theta, 0.0, 1.0);\n                }";e=this.compileShader(t),this.compiledProgram.set("sobel",e)}if(this.ctx.useProgram(e.program),this.ctx.uniform2f(e.uniform.px,1/this.width,1/this.height),this.ctx.uniform1fv(e.uniform.m,[1,2,1]),this.draw(e,!0),e=this.compiledProgram.get("sobelNMS"),!e){let t="\n                precision mediump float;\n\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform vec2 px;\n\n                #define M_PI 3.1415926535897932384626433832795\n\n                void main() {\n                    vec4 cc = texture2D(texture, uv);  \n                    float theta = degrees(cc.y*M_PI*2.0); \n                    int ax = 0, ay = 0; \n                    if ((theta >= 337.5) || (theta < 22.5)) { ax = 1; ay = 0; } \n                    else if ((theta >= 22.5) && (theta < 67.5)) { ax = 1; ay = 1; } \n                    else if ((theta >= 67.5) && (theta < 112.5)) { ax = 0; ay = 1; } \n                    else if ((theta >= 112.5) && (theta < 157.5)) { ax =-1; ay = 1; } \n                    else if ((theta >= 157.5) && (theta < 202.5)) { ax =-1; ay = 0; } \n                    else if ((theta >=202.5) && (theta < 247.5)) { ax =-1; ay =-1; } \n                    else if ((theta >=247.5) && (theta < 292.5)) { ax = 0; ay =-1; } \n                    else if ((theta >= 292.5) && (theta < 337.5)) { ax = 1; ay =-1; }\n                \n                    vec4 ca = texture2D(texture, uv + px*vec2(ax, ay));\n                    vec4 cb = texture2D(texture, uv + px*vec2(-ax, -ay));\n                    gl_FragColor = vec4((((cc.x <= ca.x) || (cc.x < cb.x)) ? vec3(0) : vec3(cc.x)), 1.0);\n                }";e=this.compileShader(t),this.compiledProgram.set("sobelNMS",e)}this.ctx.useProgram(e.program),this.ctx.uniform2f(e.uniform.px,1/this.width,1/this.height),this.draw(e)}vibrance(e){let t=this.compiledProgram.get("vibrance");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                void main() {\n\n                    vec4 col = texture2D(texture, uv.xy);\n                    vec3 color = col.rgb;\n                \n                    float luminance = color.r*0.299 + color.g*0.587 + color.b*0.114;\n                    float mn = min(min(color.r, color.g), color.b);\n                    float mx = max(max(color.r, color.g), color.b);\n                    float sat = (1.0-(mx - mn)) * (1.0-mx) * luminance * 5.0;\n                    vec3 lightness = vec3((mn + mx)/2.0);\n                \n                    // vibrance\n                    color = mix(color, mix(color, lightness, -amount), sat);\n                \n                    // negative vibrance\n                    gl_FragColor = vec4(mix(color, lightness, (1.0-lightness)*(1.0-amount)/2.0*abs(amount)), col.a);\n                }";t=this.compileShader(e),this.compiledProgram.set("vibrance",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}brightness(e){let t;if(e>0){if(t=this.compiledProgram.get("brightness-up"),!t){let e="\n                    precision highp float;\n                    varying vec2 uv;\n                    uniform sampler2D texture;\n                    uniform float amount;\n\n                    #define PI 3.1415926535897932384626433832795\n\n                    void main() {\n                        vec4 color = texture2D(texture, uv);\n\n                        color.r = color.r + amount * sin(color.r * PI);\n                        color.g = color.g + amount * sin(color.g * PI);\n                        color.b = color.b + amount * sin(color.b * PI);\n\n                        gl_FragColor = color;\n                    }";t=this.compileShader(e),this.compiledProgram.set("brightness-up",t)}}else if(t=this.compiledProgram.get("brightness-down"),!t){let e="\n                    precision highp float;\n                    varying vec2 uv;\n                    uniform sampler2D texture;\n                    uniform float amount;\n\n                    void main() {\n                        vec4 color = texture2D(texture, uv);\n     \n                        color.r = (1.0 + amount) * color.r;\n                        color.g = (1.0 + amount) * color.g;\n                        color.b = (1.0 + amount) * color.b;\n\n                        gl_FragColor = color;\n                    }";t=this.compileShader(e),this.compiledProgram.set("brightness-down",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e>0?.35*e:.75*e),this.draw(t)}bwpoint(e){let t=this.compiledProgram.get("bwpoint");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n\n                uniform float white;\n                uniform float black;\n\n                void main() {\n\n                    float bval = black / 255.0;\n                    float wval = (255.0 / (white - black));\n                \n                    vec3 color = texture2D(texture, uv).rgb;\n                    color = color * wval - (bval *  wval);\n\n                    gl_FragColor = vec4(color, texture2D(texture, uv).a);\n                }";t=this.compileShader(e),this.compiledProgram.set("bwpoint",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.black,e.black),this.ctx.uniform1f(t.uniform.white,e.white),this.draw(t)}dealiasing(){let e=this.compiledProgram.get("dealiasing");if(!e){let t="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n\n                void main() {\n                    vec4 color = texture2D(texture, uv);\n                    color.a = (color.a < 0.25) ? 0.0 : 1.0;\n                    gl_FragColor = color;\n                }";e=this.compileShader(t),this.compiledProgram.set("dealiasing",e)}this.ctx.useProgram(e.program),this.draw(e)}alphaInvert(){let e=this.compiledProgram.get("alpha-invert");if(!e){let t="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n\n                void main() {\n                    vec4 color = texture2D(texture, uv);\n                    color.a = 1.0 - color.a;\n                    gl_FragColor = color;\n                }";e=this.compileShader(t),this.compiledProgram.set("alpha-invert",e)}this.ctx.useProgram(e.program),this.draw(e)}alphaMask(){let e=this.compiledProgram.get("alpha-mask");if(!e){let t="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n\n                void main() {\n                    gl_FragColor = vec4(0,0,0, texture2D(texture, uv).a);\n                }";e=this.compileShader(t),this.compiledProgram.set("alpha-mask",e)}this.ctx.useProgram(e.program),this.draw(e)}alphaShiftMask(){let e=this.compiledProgram.get("alpha-shift-mask");if(!e){let t="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n\n                void main() {\n                    gl_FragColor = vec4(0,0,0, texture2D(texture, uv).r);\n                }";e=this.compileShader(t),this.compiledProgram.set("alpha-shift-mask",e)}this.ctx.useProgram(e.program),this.draw(e)}alphaReset(){let e=this.compiledProgram.get("alpha-reset");if(!e){let t="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n\n                void main() {\n                    vec4 color = texture2D(texture, uv);\n                    gl_FragColor = vec4(color.rgb, 1.0);\n                }";e=this.compileShader(t),this.compiledProgram.set("alpha-reset",e)}this.ctx.useProgram(e.program),this.draw(e)}border(e){let t=this.compiledProgram.get("border");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n\n                uniform sampler2D texture;\n                uniform float size;\n                uniform vec4 color;\n                uniform vec2 screen;\n                uniform vec2 px;\n\n                void main() {\n                    vec4 pixel = texture2D(texture, uv);\n\n                    if(uv.y <= size*px.y || uv.y >= (screen.y-size)*px.y ||\n                       uv.x <= size*px.x || uv.x >= (screen.x-size)*px.x) {\n                        gl_FragColor = color;\n                    } else {\n                        gl_FragColor = pixel;\n                    }\n                }";t=this.compileShader(e),this.compiledProgram.set("border",t)}let s=Math.round((this.width+this.height)/2*e.size);this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.size,s),this.ctx.uniform2f(t.uniform.screen,this.width,this.height),this.ctx.uniform2f(t.uniform.px,1/this.width,1/this.height),this.ctx.uniform4f(t.uniform.color,e.color.r/255,e.color.g/255,e.color.b/255,1),this.draw(t)}balance(e){let t=this.compiledProgram.get("balance");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n\n                uniform float sr;\n                uniform float sg;\n                uniform float sb;\n                uniform float mr;\n                uniform float mg;\n                uniform float mb;\n                uniform float hr;\n                uniform float hg;\n                uniform float hb;\n                uniform float preserve;\n\n                #define PI 3.1415926535897932384626433832795\n\n                float Lum(vec4 c){\n                    return 0.299*c.r + 0.587*c.g + 0.114*c.b;\n                }\n\n                void main() {\n                    vec4 color = texture2D(texture, uv);\n                    \n                    float olum = Lum(color);\n\n                    //highlight\n                    color.r = clamp(color.r + (hr * (exp(color.r) - 1.0)), 0.0, 1.0);\n                    color.g = clamp(color.g + (hg * (exp(color.g) - 1.0)), 0.0, 1.0);\n                    color.b = clamp(color.b + (hb * (exp(color.b) - 1.0)), 0.0, 1.0);\n\n                    //midtone\n                    color.r = clamp(color.r + (mr * 0.25) * sin(color.r * PI), 0.0, 1.0);\n                    color.g = clamp(color.g + (mg * 0.25) * sin(color.g * PI), 0.0, 1.0);\n                    color.b = clamp(color.b + (mb * 0.25) * sin(color.b * PI), 0.0, 1.0);\n\n                    //shadow\n                    color.r = clamp((1.0 - sr * 0.5) * color.r + (1.0 - (1.0 - sr * 0.5)), 0.0, 1.0);\n                    color.g = clamp((1.0 - sg * 0.5) * color.g + (1.0 - (1.0 - sg * 0.5)), 0.0, 1.0);\n                    color.b = clamp((1.0 - sb * 0.5) * color.b + (1.0 - (1.0 - sb * 0.5)), 0.0, 1.0);\n                    \n                    if(preserve == 1.0) {\n                        float nlum = Lum(color);\n                        color.rgb = color.rgb * (olum/nlum);\n                    }\n\n                    gl_FragColor = color;\n                }";t=this.compileShader(e),this.compiledProgram.set("balance",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.sr,e.shadowRed),this.ctx.uniform1f(t.uniform.sg,e.shadowGreen),this.ctx.uniform1f(t.uniform.sb,e.shadowBlue),this.ctx.uniform1f(t.uniform.mr,e.midtoneRed),this.ctx.uniform1f(t.uniform.mg,e.midtoneGreen),this.ctx.uniform1f(t.uniform.mb,e.midtoneBlue),this.ctx.uniform1f(t.uniform.hr,e.highlightRed),this.ctx.uniform1f(t.uniform.hg,e.highlightGreen),this.ctx.uniform1f(t.uniform.hb,e.highlightBlue),this.ctx.uniform1f(t.uniform.preserve,Number(e.preserve)),this.draw(t)}temperature(e){let t=this.compiledProgram.get("temperature");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                void main() {\n                    vec4 color = texture2D(texture, uv);\n                    color.r = clamp(color.r + amount, 0.0, 1.0);\n                    color.b = clamp(color.b - amount, 0.0, 1.0);\n                    gl_FragColor = color;\n                }";t=this.compileShader(e),this.compiledProgram.set("temperature",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e/6),this.draw(t)}tint(e){let t=this.compiledProgram.get("tint");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                void main() {\n                    vec4 color = texture2D(texture, uv);\n                    color.g = clamp(color.g + amount, 0.0, 1.0);\n                    gl_FragColor = color;\n                }";t=this.compileShader(e),this.compiledProgram.set("tint",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e/6),this.draw(t)}threshold(e){let t=this.compiledProgram.get("threshold");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n    \n                void main() {\n                    vec4 color = texture2D(texture, uv);\n                    float grayscale = (color.r + color.g + color.b) / 3.0;\n                    float grayValue = step(amount, grayscale);\n                    gl_FragColor = vec4(grayValue, grayValue, grayValue, color.a);\n                }";t=this.compileShader(e),this.compiledProgram.set("threshold",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}alphaThreshold(e){let t=this.compiledProgram.get("alphaThreshold");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                void main() {\n                    vec4 color = texture2D(texture, uv);\n                    if (color.a < 0.05) {\n                        gl_FragColor = color;\n                    }\n                    else {\n                        color.a = step(amount, color.a);\n                        gl_FragColor = vec4(color.r, color.g, color.b, color.a);\n                    }\n                }";t=this.compileShader(e),this.compiledProgram.set("alphaThreshold",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}noise(e){let t=this.compiledProgram.get("noise");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                float random(vec2 p) {\n                    vec2 r = vec2(23.14069263277926,2.665144142690225);\n                    return fract(cos(mod(12345678.,256. * dot(p,r))));\n                }\n\n                void main() {\n                    vec4 color = texture2D(texture, uv);\n                    float noise = (random(uv) -0.5)*amount;\n\n                    gl_FragColor = vec4(color.r+noise, color.g+noise, color.b+noise, color.a);\n                }";t=this.compileShader(e),this.compiledProgram.set("noise",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}halftone(e){let t=this.compiledProgram.get("halftone");if(!t){this.ctx.getExtension("OES_standard_derivatives");let e="\n                #ifdef GL_OES_standard_derivatives\n                #extension GL_OES_standard_derivatives : enable\n                #endif\n\n                precision highp float;                \n\n                uniform sampler2D texture;\n                uniform vec2 size;\n                uniform float frequency;\n  \n                varying vec2 uv; // Texcoords\n\n                float aastep(float threshold, float value) {\n                #ifdef GL_OES_standard_derivatives\n                    float afwidth = 0.7 * length(vec2(dFdx(value), dFdy(value)));\n                #else\n                    float afwidth = frequency * (1.0/size.x);\n                #endif\n                    return smoothstep(threshold-afwidth, threshold+afwidth, value);\n                }\n\n                // Explicit bilinear texture lookup to circumvent bad hardware precision.\n                // The extra arguments specify the dimension of the texture. (GLSL 1.30\n                // introduced textureSize() to get that information from the sampler.)\n                // 'dims' is the width and height of the texture, 'one' is 1.0/dims.\n                // (Precomputing 'one' saves two divisions for each lookup.)\n                vec4 texture2D_bilinear(sampler2D tex, vec2 st, vec2 dims, vec2 one) {\n                    vec2 uv = st * dims;\n                    vec2 uv00 = floor(uv - vec2(0.5)); // Lower left corner of lower left texel\n                    vec2 uvlerp = uv - uv00 - vec2(0.5); // Texel-local lerp blends [0,1]\n                    vec2 st00 = (uv00 + vec2(0.5)) * one;\n                    vec4 texel00 = texture2D(tex, st00);\n                    vec4 texel10 = texture2D(tex, st00 + vec2(one.x, 0.0));\n                    vec4 texel01 = texture2D(tex, st00 + vec2(0.0, one.y));\n                    vec4 texel11 = texture2D(tex, st00 + one);\n                    vec4 texel0 = mix(texel00, texel01, uvlerp.y); \n                    vec4 texel1 = mix(texel10, texel11, uvlerp.y); \n                    return mix(texel0, texel1, uvlerp.x);\n                }\n\n                vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n                vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n                vec3 permute(vec3 x) { return mod289((( x * 34.0) + 1.0) * x); }\n                \n                float snoise(vec2 v) {\n                    const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                                        0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                                        -0.577350269189626,  // -1.0 + 2.0 * C.x\n                                        0.024390243902439); // 1.0 / 41.0\n                    // First corner\n                    vec2 i = floor(v + dot(v, C.yy) );\n                    vec2 x0 = v - i + dot(i, C.xx);\n                    // Other corners\n                    vec2 i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n                    vec4 x12 = x0.xyxy + C.xxzz;\n                    x12.xy -= i1;\n                    // Permutations\n                    i = mod289(i); // Avoid truncation effects in permutation\n                    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n                                            + i.x + vec3(0.0, i1.x, 1.0 ));\n                    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy),\n                                            dot(x12.zw,x12.zw)), 0.0);\n                    m = m*m; m = m*m;\n                    // Gradients\n                    vec3 x = 2.0 * fract(p * C.www) - 1.0;\n                    vec3 h = abs(x) - 0.5;\n                    vec3 a0 = x - floor(x + 0.5);\n                    // Normalise gradients implicitly by scaling m\n                    m *= 1.792843 - 0.853735 * ( a0*a0 + h*h );\n                    // Compute final noise value at P\n                    vec3 g;\n                    g.x = a0.x * x0.x + h.x * x0.y;\n                    g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n                    return 130.0 * dot(m, g);\n                }\n                \n                void main() {\n                    // Correct UVs for aspect ratio so we get round balls not squished\n                    vec2 auv = uv;\n                    auv.x *= size.x / size.y;\n\n                    vec3 color = texture2D_bilinear(texture, uv, size, 1.0 / size).rgb;\n\n                    float n = 0.1*snoise(auv*200.0); // Fractal noise\n                    n += 0.05*snoise(auv*400.0);\n                    n += 0.025*snoise(auv*800.0);\n\n                    vec3 white = vec3(n*0.2 + 0.97);\n                    vec3 black = vec3(n + 0.1);\n\n                    // Perform a rough RGB-to-CMYK conversion\n                    vec4 cmyk;\n                    cmyk.xyz = 1.0 - color;\n                    cmyk.w = min(cmyk.x, min(cmyk.y, cmyk.z)); // Create K\n                    cmyk.xyz -= cmyk.w; // Subtract K equivalent from CMY\n                \n                    // Distance to nearest point in a grid of\n                    // (frequency x frequency) points over the unit square\n                    vec2 Kst = frequency*mat2(0.707, -0.707, 0.707, 0.707)*auv;\n                    vec2 Kuv = 2.0*fract(Kst)-1.0;\n                    float k = aastep(0.0, sqrt(cmyk.w)-length(Kuv)+n);\n                    vec2 Cst = frequency*mat2(0.966, -0.259, 0.259, 0.966)*auv;\n                    vec2 Cuv = 2.0*fract(Cst)-1.0;\n                    float c = aastep(0.0, sqrt(cmyk.x)-length(Cuv)+n);\n                    vec2 Mst = frequency*mat2(0.966, 0.259, -0.259, 0.966)*auv;\n                    vec2 Muv = 2.0*fract(Mst)-1.0;\n                    float m = aastep(0.0, sqrt(cmyk.y)-length(Muv)+n);\n                    vec2 Yst = frequency*auv; // 0 deg\n                    vec2 Yuv = 2.0*fract(Yst)-1.0;\n                    float y = aastep(0.0, sqrt(cmyk.z)-length(Yuv)+n);\n                \n                    vec3 rgbscreen = 1.0 - 0.9*vec3(c,m,y) + n;\n                    rgbscreen = mix(rgbscreen, black, 0.85*k + 0.3*n);\n                \n                    #ifdef GL_OES_standard_derivatives\n                        float afwidth = 2.0 * frequency * max(length(dFdx(uv)), length(dFdy(uv)));\n                    #else\n                        float afwidth = frequency * (1.0/size.x);\n                    #endif\n                    \n                    float blend = smoothstep(0.7, 1.4, afwidth); \n                    gl_FragColor = vec4(mix(rgbscreen, color, blend), 1.0);\n                }\n            ";t=this.compileShader(e),this.compiledProgram.set("halftone",t)}this.ctx.useProgram(t.program),this.ctx.uniform2f(t.uniform.size,this.width,this.height),this.ctx.uniform1f(t.uniform.frequency,Math.round(100*e)),this.draw(t)}vignette(e){let t=this.compiledProgram.get(e<0?"vignette-white":"vignette-black");if(!t){let s=["precision highp float;","varying vec2 uv;","uniform sampler2D texture;","uniform float amount;","uniform float size;","void main() {","vec4 color = texture2D(texture, uv);","float dist = distance(uv, vec2(0.5, 0.5));","float grd = smoothstep(0.8, size * 0.799, dist * (amount*0.6 + size*2.0));","color.rgb += vec3(1.0, 1.0, 1.0) * (1.0 - grd);","gl_FragColor = color;","}"].join("\n"),i=["precision highp float;","varying vec2 uv;","uniform sampler2D texture;","uniform float amount;","uniform float size;","void main() {","vec4 color = texture2D(texture, uv);","float dist = distance(uv, vec2(0.5, 0.5));","color.rgb *= smoothstep(0.8, size * 0.799, dist * (amount*0.75 + size*2.0));","gl_FragColor = color;","}"].join("\n");t=this.compileShader(e<0?s:i),this.compiledProgram.set(e<0?"vignette-white":"vignette-black",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.size,.25),this.ctx.uniform1f(t.uniform.amount,e<0?-1*e:e),this.draw(t)}grain(e){let t=this.compiledProgram.get("grain");if(!t){let e=["precision highp float;","uniform sampler2D texture;","varying vec2 uv;","uniform float width;","uniform float height;","uniform float grainamount;","uniform float timer;","const float permTexUnit = 1.0/256.0;","const float permTexUnitHalf = 0.5/256.0;","float grainsize = 1.8;","float lumamount = 1.0;","vec4 rnm(in vec2 tc)","{","float noise =  sin(dot(tc + vec2(timer,timer),vec2(12.9898,78.233))) * 43758.5453;","float noiseR =  fract(noise)*2.0-1.0;","float noiseG =  fract(noise*1.2154)*2.0-1.0; ","float noiseB =  fract(noise*1.3453)*2.0-1.0;","float noiseA =  fract(noise*1.3647)*2.0-1.0;","return vec4(noiseR,noiseG,noiseB,noiseA);","}","float fade(in float t) {","return t*t*t*(t*(t*6.0-15.0)+10.0);","}","float pnoise3D(in vec3 p)","{","vec3 pi = permTexUnit*floor(p)+permTexUnitHalf;","vec3 pf = fract(p);","float perm00 = rnm(pi.xy).a ;","vec3  grad000 = rnm(vec2(perm00, pi.z)).rgb * 4.0 - 1.0;","float n000 = dot(grad000, pf);","vec3  grad001 = rnm(vec2(perm00, pi.z + permTexUnit)).rgb * 4.0 - 1.0;","float n001 = dot(grad001, pf - vec3(0.0, 0.0, 1.0));","float perm01 = rnm(pi.xy + vec2(0.0, permTexUnit)).a ;","vec3  grad010 = rnm(vec2(perm01, pi.z)).rgb * 4.0 - 1.0;","float n010 = dot(grad010, pf - vec3(0.0, 1.0, 0.0));","vec3  grad011 = rnm(vec2(perm01, pi.z + permTexUnit)).rgb * 4.0 - 1.0;","float n011 = dot(grad011, pf - vec3(0.0, 1.0, 1.0));","float perm10 = rnm(pi.xy + vec2(permTexUnit, 0.0)).a ;","vec3  grad100 = rnm(vec2(perm10, pi.z)).rgb * 4.0 - 1.0;","float n100 = dot(grad100, pf - vec3(1.0, 0.0, 0.0));","vec3  grad101 = rnm(vec2(perm10, pi.z + permTexUnit)).rgb * 4.0 - 1.0;","float n101 = dot(grad101, pf - vec3(1.0, 0.0, 1.0));","float perm11 = rnm(pi.xy + vec2(permTexUnit, permTexUnit)).a ;","vec3  grad110 = rnm(vec2(perm11, pi.z)).rgb * 4.0 - 1.0;","float n110 = dot(grad110, pf - vec3(1.0, 1.0, 0.0));","vec3  grad111 = rnm(vec2(perm11, pi.z + permTexUnit)).rgb * 4.0 - 1.0;","float n111 = dot(grad111, pf - vec3(1.0, 1.0, 1.0));","vec4 n_x = mix(vec4(n000, n001, n010, n011), vec4(n100, n101, n110, n111), fade(pf.x));","vec2 n_xy = mix(n_x.xy, n_x.zw, fade(pf.y));","float n_xyz = mix(n_xy.x, n_xy.y, fade(pf.z));","return n_xyz;","}","vec2 coordRot(in vec2 tc, in float angle)","{","float aspect = width/height;","float rotX = ((tc.x*2.0-1.0)*aspect*cos(angle)) - ((tc.y*2.0-1.0)*sin(angle));","float rotY = ((tc.y*2.0-1.0)*cos(angle)) + ((tc.x*2.0-1.0)*aspect*sin(angle));","rotX = ((rotX/aspect)*0.5+0.5);","rotY = rotY*0.5+0.5;","return vec2(rotX,rotY);","}","void main() ","{","vec3 rotOffset = vec3(1.425,3.892,5.835);","vec2 rotCoordsR = coordRot(uv, timer + rotOffset.x);","vec3 noise = vec3(pnoise3D(vec3(rotCoordsR*vec2(width/grainsize,height/grainsize),0.0)));","vec4 tex = texture2D(texture, uv);","vec3 col = tex.rgb;","vec3 lumcoeff = vec3(0.299,0.587,0.114);","float luminance = mix(0.0,dot(col, lumcoeff),lumamount);","float lum = smoothstep(0.2,0.0,luminance);","lum += luminance;","noise = mix(noise,vec3(0.0),pow(lum,4.0));","col = col+noise*grainamount;","gl_FragColor =  vec4(col, tex.w);","}"].join("\n");t=this.compileShader(e),this.compiledProgram.set("grain",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.width,this.width),this.ctx.uniform1f(t.uniform.height,this.height),this.ctx.uniform1f(t.uniform.grainamount,e/10),this.draw(t)}sharpen(e){let t=this.compiledProgram.get("sharpen");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform vec2 px;\n                uniform float m[9];\n                uniform float amount;\n\n                void main(void) {\n                    vec4 c11 = texture2D(texture, uv - px); // top left\n                    vec4 c12 = texture2D(texture, vec2(uv.x, uv.y - px.y)); // top center\n                    vec4 c13 = texture2D(texture, vec2(uv.x + px.x, uv.y - px.y)); // top right\n\n                    vec4 c21 = texture2D(texture, vec2(uv.x - px.x, uv.y) ); // mid left\n                    vec4 c22 = texture2D(texture, uv); // mid center\n                    vec4 c23 = texture2D(texture, vec2(uv.x + px.x, uv.y) ); // mid right\n\n                    vec4 c31 = texture2D(texture, vec2(uv.x - px.x, uv.y + px.y) ); // bottom left\n                    vec4 c32 = texture2D(texture, vec2(uv.x, uv.y + px.y) ); // bottom center\n                    vec4 c33 = texture2D(texture, uv + px ); // bottom right\n\n                    vec4 color = \n                        c11 * m[0] + c12 * m[1] + c13 * m[2] +\n                        c21 * m[3] + c22 * m[4] + c23 * m[5] +\n                        c31 * m[6] + c32 * m[7] + c33 * m[8];\n\n                    gl_FragColor = color * amount + (c22 * (1.0 - amount));\n                }";t=this.compileShader(e),this.compiledProgram.set("sharpen",t)}let s=new Float32Array([-1,-1,-1,-1,9,-1,-1,-1,-1]);this.ctx.useProgram(t.program),this.ctx.uniform1fv(t.uniform.m,s),this.ctx.uniform2f(t.uniform.px,1/this.width,1/this.height),this.ctx.uniform1f(t.uniform.amount,e/2),this.draw(t)}blur(e,t=!1){let s=this.compiledProgram.get("blur");if(!s){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform vec2 size;\n                float random(vec3 scale, float seed) {\n                    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n                }\n                void main() {\n                    vec4 color = vec4(0.0);\n                    float total = 0.0;\n                    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n                    for (float t = -30.0; t <= 30.0; t++) {\n                        float percent = (t + offset - 0.5) / 30.0;\n                        float weight = 1.0 - abs(percent);\n                        vec4 sample = texture2D(texture, uv + size * percent);\n                        sample.rgb *= sample.a;\n                        color += sample * weight;\n                        total += weight;\n                    }\n                    gl_FragColor = color / total;\n                    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n                }";s=this.compileShader(e),this.compiledProgram.set("blur",s)}let i=40*e/this.canvas.width,a=40*e/this.canvas.height;this.ctx.useProgram(s.program),this.ctx.uniform2f(s.uniform.size,0,a),this.draw(s,!0),this.ctx.uniform2f(s.uniform.size,i,0),this.draw(s,t)}zoom(e){let t=this.compiledProgram.get("zoom");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n\n                uniform vec2 center;\n                uniform float amount;\n                uniform vec2 px;\n                \n                float random(vec3 scale, float seed) {\n                    /* use the fragment position for a different seed per-pixel */                    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n                }\n                void main() {\n                    vec4 color = vec4(0.0);\n                    float total = 0.0;\n                    vec2 toCenter = (center - uv) * px;\n                    \n                    /* randomize the lookup values to hide the fixed number of samples */\n                    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n                    \n                    for (float t = 0.0; t <= 40.0; t++) {\n                        float percent = (t + offset) / 40.0;\n                        float weight = 4.0 * (percent - percent * percent);\n                        vec4 sample = texture2D(texture, uv + toCenter * percent * amount / px);\n                        \n                        /* switch to pre-multiplied alpha to correctly blur transparent images */\n                        sample.rgb *= sample.a;\n                        \n                        color += sample * weight;\n                        total += weight;\n                    }\n                    gl_FragColor = color / total;\n                    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n                }";t=this.compileShader(e),this.compiledProgram.set("zoom",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e.amount),this.ctx.uniform2f(t.uniform.center,e.x,e.y),this.ctx.uniform2f(t.uniform.px,1/this.width,1/this.height),this.draw(t)}makeKernel(e){const t=this.GAUSSKERN_MAX+Number(!(1&this.GAUSSKERN_MAX)),s=Math.sqrt(2*Math.PI)*e,i=2*e*e;var a,n,r=~~(t/2),o=new Float32Array(t);for(n=0,a=-r;n<t;a++,n++)o[n]=Math.exp(-a*a/i)/s;return o}makeDynamicKernel(e){const t=Math.min(1|Math.ceil(10*e),1024),s=Math.sqrt(2*Math.PI)*e,i=2*e*e,a=new Float32Array(t),n=Math.floor(t/2);let r=0;for(let o=0;o<t;o++){const e=o-n;a[o]=Math.exp(-e*e/i)/s,r+=a[o]}for(let o=0;o<t;o++)a[o]/=r;return a}scaleKernel(e){const t=e.reduce((e,t)=>e+t)||1;return e.map(e=>e/t)}gaussian(e){const t=this.makeDynamicKernel(10*e),s=t.length+Number(!(1&t.length));let i=this.compiledProgram.get(`guass-${s}`);if(!i){let e=`\n                precision mediump float;\n                #define KERNEL_SIZE ${s}\n                #define KERNEL_HALF KERNEL_SIZE / 2\n                // our texture\n                varying vec2 uv;\n                uniform vec2 px;\n                uniform sampler2D texture;\n                uniform float kernel[KERNEL_SIZE];\n                void main() {\n                    vec4 result = vec4(0.0);\n                    for (int i = 0; i < KERNEL_SIZE; i++) {\n                        result += texture2D(texture, uv + px*vec2(i - KERNEL_HALF))*kernel[i];\n                    }\n                    gl_FragColor = result;\n                }\n            `;i=this.compileShader(e),this.compiledProgram.set(`guass-${s}`,i)}this.ctx.useProgram(i.program),this.ctx.uniform2f(i.uniform.px,0,1/this.height),this.ctx.uniform1fv(i.uniform.kernel,this.scaleKernel(t)),this.draw(i,!0),this.ctx.uniform2f(i.uniform.px,1/this.width,0),this.draw(i)}radial(e){let t=this.compiledProgram.get("radial");if(!t){let e="\n                precision highp float;\n                const float PI = 3.1415926535897932384626433832795;\n                const float samples = 100.;\n\n                uniform sampler2D texture;\n\n                varying vec2 uv;\n                uniform vec2 center;\n                uniform vec2 resolution;\n\n                uniform float amount;\n                uniform int direction;\n                uniform int symmetry;\n               \n                mat2 rotate2d(float _angle){\n                    return mat2(cos(_angle),-sin(_angle),\n                                sin(_angle),cos(_angle));\n                }\n\n                vec2 rotateUV(vec2 uv, mat2 transform, vec2 centerc) {\n                    uv -= centerc;\n                    uv = transform * uv;\n                    uv += centerc;\n                    return uv;\n                }\n             \n                void main(void) {\n                    float ar = resolution.x / resolution.y;\n                    vec2 uvc = uv;\n                    vec2 centerc = center;\n\n                    if (symmetry == 1)\n                    {\n                        if (resolution.x > resolution.y) {\n                            centerc.y /= ar;\n                            uvc.y /= ar;\n                        }\n                        else {\n                            centerc.x *= ar;\n                            uvc.x *= ar;\n                        }\n                    }\n\n                    vec2 coordcw = uvc;\n                    vec2 coordccw = uvc;\n                    vec4 FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n                    vec2 toCenter = uvc - centerc;\n                    float endsamples = 0.;\n\n                    float a = amount / samples;\n\n                    mat2 matcw = rotate2d(-a * PI / 180.);\n                    mat2 matccw = rotate2d(a * PI / 180.);\n\n                    for (float i = 0.; i < samples; i+=1.) {\n                        if (direction == 1 || direction == 2) {\n                            coordccw = rotateUV(coordccw, matccw, centerc);\n                            FragColor += texture2D(texture, coordccw);\n                            endsamples += 1.;\n                        }\n\n                        if (direction == 0 || direction == 2) {\n                            coordcw = rotateUV(coordcw, matcw, centerc);\n                            FragColor += texture2D(texture, coordcw);\n                            endsamples += 1.;\n                        }\n                    }\n                    FragColor /= endsamples;\n                    gl_FragColor = FragColor;\n                }\n            ";t=this.compileShader(e),this.compiledProgram.set("radial",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,180*e.amount),this.ctx.uniform2f(t.uniform.center,e.x,e.y),this.ctx.uniform1i(t.uniform.direction,e.direction),this.ctx.uniform2f(t.uniform.resolution,this.width,this.height),this.ctx.uniform1i(t.uniform.symmetry,e.symmetry?1:0),this.draw(t)}motion(e){let t=this.compiledProgram.get("motion");if(!t){let e="\n                precision mediump float;\n                uniform float KERNEL_SIZE;\n                varying vec2 uv;\n                uniform vec2 resolution;\n                uniform sampler2D texture;\n                uniform float angle;\n\n                bool outOfRange(vec2 uv) {\n                    return uv.x < 0. || uv. y < 0. || uv.x > 1. || uv.y > 1.;\n                }\n                mat2 rotate2d(float _angle){\n                    return mat2(cos(_angle),-sin(_angle),\n                                sin(_angle),cos(_angle));\n                }\n                void main() {\n                    vec4 result = vec4(0.0);\n                    vec2 resol = vec2 (1./resolution.x, 0.);//1./resolution.y);\n                    resol = rotate2d(angle) * resol;\n                    float divcnt = 1.;\n                    for (float i=1.; i <= 100.; i+=1.) {\n                        vec2 before = uv - resol * i;\n                        if (!outOfRange(before)) {\n                            result += texture2D(texture, before);\n                            divcnt += 1.;\n                        }\n                        vec2 after = uv + resol * i;\n                        if (!outOfRange(after)) {\n                            result += texture2D(texture, after);\n                            divcnt += 1.;\n                        }\n                        if (i >= KERNEL_SIZE) break;\n                    }\n                    result += texture2D(texture, uv);\n                    result /= divcnt;\n                    gl_FragColor = result;\n                }\n            ";t=this.compileShader(e),this.compiledProgram.set("motion",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.KERNEL_SIZE,100*e.amount),this.ctx.uniform1f(t.uniform.angle,e.angle),this.ctx.uniform2f(t.uniform.resolution,this.width,this.height),this.draw(t)}clarity(e){let t=this.compiledProgram.get("clarity");if(!t){const e="\n                #define GLSLIFY 1\n                precision highp float;\n                varying vec2 uv;\n                \n                uniform sampler2D texture;\n                uniform float amount;\n                uniform vec2 px;\n                           \n                float Lum(vec3 c){\n                    return 0.299*c.r + 0.587*c.g + 0.114*c.b;\n                }\n                float BlendOverlayf(float base, float blend){\n                    return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));\n                }\n                vec3 BlendOverlay(vec3 base, vec3 blend){\n                    return vec3(BlendOverlayf(base.r, blend.r), BlendOverlayf(base.g, blend.g), BlendOverlayf(base.b, blend.b));\n                }\n                float BlendVividLightf(float base, float blend){\n                    float BlendColorBurnf = (((2.0 * blend) == 0.0) ? (2.0 * blend) : max((1.0 - ((1.0 - base) / (2.0 * blend))), 0.0));\n                    float BlendColorDodgef =  (((2.0 * (blend - 0.5)) == 1.0) ? (2.0 * (blend - 0.5)) : min(base / (1.0 - (2.0 * (blend - 0.5))), 1.0));\n                    return ((blend < 0.5) ? BlendColorBurnf : BlendColorDodgef);\n                }\n                vec3 BlendVividLight(vec3 base, vec3 blend){\n                    return vec3(BlendVividLightf(base.r, blend.r), BlendVividLightf(base.g, blend.g), BlendVividLightf(base.b, blend.b));\n                }\n\n                float normpdf(in float x, in float sigma) {\n                    return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\n                }\n\n                vec3 blurMap() {\n                    //declare stuff\n                    const int mSize = 11;\n                    const int kSize = (mSize-1)/2;\n                    float kernel[mSize];\n                    vec3 final_colour = vec3(0.0);\n                    \n                    //create the 1-D kernel\n                    float sigma = 7.0;\n                    float Z = 0.0;\n                    for (int j = 0; j <= kSize; ++j){\n                        kernel[kSize+j] = kernel[kSize-j] = normpdf(float(j), sigma);\n                    }\n                    \n                    //get the normalization factor (as the gaussian has been clamped)\n                    for (int j = 0; j < mSize; ++j){\n                        Z += kernel[j];\n                    }\n                    \n                    //read out the texels\n                    for (int i=-kSize; i <= kSize; ++i){\n                        for (int j=-kSize; j <= kSize; ++j){\n                            final_colour += kernel[kSize+j] * kernel[kSize+i] * texture2D(texture, (uv.xy + vec2(float(i),float(j))*px)).rgb;\n                        }\n                    }\n                    return vec3(final_colour/(Z*Z));\n                }\n    \n                void main() {\n\n                    vec4 base4 = texture2D(texture, uv.xy);\n                    \n                    vec3 blurMap = blurMap();\n                    vec3 base = base4.rgb;\n                    \n                    float intensity = (amount < 0.0) ? (amount / 2.0) : amount;\n                    float lum = Lum(base);\n                  \n                    vec3 col = vec3(lum);\n                    vec3 mask = vec3(1.0 - pow(lum, 1.8));\n                    // invert blurred texture\n                    vec3 layer = vec3(1.0 - Lum(blurMap));\n                    vec3 detail = clamp(BlendVividLight(col, layer), 0.0, 1.0);\n                    // we get negative detail by inverting the detail layer\n                    vec3 inverse = mix(1.0 - detail, detail, (intensity+1.0)/2.0);\n                  \n                    gl_FragColor = vec4(BlendOverlay(base, mix(vec3(0.5), inverse, mask)), base4.a);       \n                }";t=this.compileShader(e),this.compiledProgram.set("clarity",t)}this.ctx.useProgram(t.program),this.ctx.uniform2f(t.uniform.px,1/this.width,1/this.height),this.ctx.uniform1f(t.uniform.amount,2*e),this.draw(t)}smooth(e){let t=this.compiledProgram.get("smooth");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform vec2 px;\n                uniform float m[9];\n                uniform float amount;\n\n                void main(void) {\n                    vec4 c11 = texture2D(texture, uv - px);\n                    vec4 c12 = texture2D(texture, vec2(uv.x, uv.y - px.y));\n                    vec4 c13 = texture2D(texture, vec2(uv.x + px.x, uv.y - px.y));\n\n                    vec4 c21 = texture2D(texture, vec2(uv.x - px.x, uv.y) );\n                    vec4 c22 = texture2D(texture, uv);\n                    vec4 c23 = texture2D(texture, vec2(uv.x + px.x, uv.y) );\n\n                    vec4 c31 = texture2D(texture, vec2(uv.x - px.x, uv.y + px.y) );\n                    vec4 c32 = texture2D(texture, vec2(uv.x, uv.y + px.y) );\n                    vec4 c33 = texture2D(texture, uv + px );\n\n                    vec4 color = \n                        c11 * m[0] + c12 * m[1] + c13 * m[2] +\n                        c21 * m[3] + c22 * m[4] + c23 * m[5] +\n                        c31 * m[6] + c32 * m[7] + c33 * m[8];\n\n                    gl_FragColor = color * amount + (c22 * (1.0 - amount));\n                }";t=this.compileShader(e),this.compiledProgram.set("smooth",t)}let s=new Float32Array([1/16,2/16,1/16,2/16,.25,2/16,1/16,2/16,1/16]);this.ctx.useProgram(t.program),this.ctx.uniform1fv(t.uniform.m,s),this.ctx.uniform2f(t.uniform.px,1/this.width,1/this.height),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}denoise(e){const t=Math.round(30*e[0]);let s=this.compiledProgram.get("denoise"+t);if(!s){let e="\n                precision mediump float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                \n                uniform float sigma;\n                uniform float threshold;\n                uniform vec2 resolution;\n\n                #define INV_SQRT_OF_2PI 0.39894228040143267793994605993439  // 1.0/SQRT_OF_2PI\n                #define INV_PI 0.31830988618379067153776752674503\n                #define RADIUS %radius%.0\n              \n                void main(void) {\n\n                       float invSigmaQx2 = .5 / (sigma * sigma);      // 1.0 / (sigma^2 * 2.0)\n                       float invSigmaQx2PI = INV_PI * invSigmaQx2;    // 1.0 / (sqrt(PI) * sigma)\n                       \n                       float invThresholdSqx2 = .5 / (threshold * threshold);     // 1.0 / (sigma^2 * 2.0)\n                       float invThresholdSqrt2PI = INV_SQRT_OF_2PI / threshold;   // 1.0 / (sqrt(2*PI) * sigma)\n                       \n                       vec4 center = texture2D(texture,uv); \n                       \n                       float zBuff = 0.0;\n                       vec4 aBuff = vec4(0.0);\n                       \n                       for(float x=-RADIUS; x <= RADIUS; x++) {\n                           float pt = sqrt(RADIUS*RADIUS-x*x);  // pt = yRadius: have circular trend\n                           for(float y=-RADIUS; y <= RADIUS; y++) {\n   \n                               if(y >= pt || y <= pt) {\n   \n                                   vec2 d = vec2(x,y)/resolution;\n                       \n                                   float blurFactor = exp( -dot(d , d) * invSigmaQx2 ) * invSigmaQx2;\n                                   \n                                   vec4 pxx =  texture2D(texture,uv+d);\n                       \n                                   vec4 dC = pxx-center;\n                                   float deltaFactor = exp( -dot(dC, dC) * invThresholdSqx2) * invThresholdSqrt2PI * blurFactor;\n                                                       \n                                   zBuff += deltaFactor;\n                                   aBuff += deltaFactor*pxx;\n                               }\n                           }\n                       }\n                       gl_FragColor = aBuff/zBuff;\n                } ";s=this.compileShader(e.replace(/%radius%/g,t.toString())),this.compiledProgram.set("denoise"+t,s)}this.ctx.useProgram(s.program),this.ctx.uniform1f(s.uniform.sigma,t/3),this.ctx.uniform1f(s.uniform.threshold,e[1]),this.ctx.uniform2f(s.uniform.resolution,this.width,this.height),this.draw(s)}colorMatrix(e){let t=new Float32Array(e);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255;let s=this.compiledProgram.get("colormatrix");if(!s){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float m[20];\n\n                void main(void) {\n                    vec4 c = texture2D(texture, uv);\n                    gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[3] * c.a + m[4];\n                    gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[8] * c.a + m[9];\n                    gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[13] * c.a + m[14];\n                    gl_FragColor.a = m[15] * c.r + m[16] * c.g + m[17] * c.b + m[18] * c.a + m[19];\n                } ";s=this.compileShader(e),this.compiledProgram.set("colormatrix",s)}this.ctx.useProgram(s.program),this.ctx.uniform1fv(s.uniform.m,t),this.draw(s)}colorMatrixRange(e,t,s){let i=new Float32Array(e);i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255;let a=this.compiledProgram.get("colormatrix-range");if(!a){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float m[20];\n                uniform float from;\n                uniform float to;\n\n                vec3 rgb2hsv(vec3 c) {\n                    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n                    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n                    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n                \n                    float d = q.x - min(q.w, q.y);\n                    float e = 1.0e-10;\n                    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n                }\n\n                void main(void) {\n                    vec4 c = texture2D(texture, uv);\n                    vec3 hsv = rgb2hsv(c.rgb);\n\n                    gl_FragColor = c;\n\n                    if((hsv.x >= from && hsv.x <= to) || (to < from && (hsv.x >= from || hsv.x <= to))) {\n\n                        float blend = 1.0;\n                        float grad = 29.0/360.0;\n\n                        float distFrom = distance(hsv.x, from);\n                        float distTo = distance(hsv.x, to);\n\n                        if(distFrom <= grad) blend = distFrom / grad;\n                        if(distTo <= grad) blend = distTo / grad;\n\n                        vec4 b = vec4(\n                            m[0] * c.r + m[1] * c.g + m[2] * c.b + m[3] * c.a + m[4],\n                            m[5] * c.r + m[6] * c.g + m[7] * c.b + m[8] * c.a + m[9],\n                            m[10] * c.r + m[11] * c.g + m[12] * c.b + m[13] * c.a + m[14],\n                            m[15] * c.r + m[16] * c.g + m[17] * c.b + m[18] * c.a + m[19]);\n                        \n                        gl_FragColor = mix(c, b, blend);\n                    }\n                } ";a=this.compileShader(e),this.compiledProgram.set("colormatrix-range",a)}this.ctx.useProgram(a.program),this.ctx.uniform1fv(a.uniform.m,i),this.ctx.uniform1f(a.uniform.from,t/360),this.ctx.uniform1f(a.uniform.to,s/360),this.draw(a)}desaturate(){this.saturation(-1)}invert(){this.colorMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0])}contrast(e){let t=e+1,s=-128*(t-1);this.colorMatrix([t,0,0,0,s,0,t,0,0,s,0,0,t,0,s,0,0,0,1,0])}hue(e,t,s){let i=this.compiledProgram.get("hue"+(t?"-range":""));if(!i){let e="\n            precision highp float;\n            varying vec2 uv;\n            \n            uniform sampler2D texture;\n            uniform float rotation;\n            uniform float from;\n            uniform float to;\n            \n            vec3 rgb2hsv(vec3 c) {\n                vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n                vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n                vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n            \n                float d = q.x - min(q.w, q.y);\n                float e = 1.0e-10;\n                return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n            }\n            vec3 hsv2rgb(vec3 c) {\n                vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n                vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n                return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n            }";e+=t?"\n                void main() {\n                    lowp vec4 base = texture2D(texture, uv.xy);\n                    vec3 hsv = rgb2hsv(base.rgb);\n\n                    gl_FragColor = base;\n\n                    if((hsv.x >= from && hsv.x <= to) || (to < from && (hsv.x >= from || hsv.x <= to))) {\n\n                        float blend = 1.0;\n                        float grad = 29.0/360.0;\n\n                        float distFrom = distance(hsv.x, from);\n                        float distTo = distance(hsv.x, to);\n\n                        if(distFrom <= grad) blend = distFrom / grad;\n                        if(distTo <= grad) blend = distTo / grad;\n                        \n                        hsv.x += rotation * blend;\n                        \n                        gl_FragColor.rgb = hsv2rgb(hsv);\n                    }\n                }":"\n                void main() {\n                    lowp vec4 base = texture2D(texture, uv.xy);\n                    vec3 hsv = rgb2hsv(base.rgb);\n\n                    hsv.x += rotation;\n\n                    gl_FragColor = vec4(hsv2rgb(hsv), base.a);\n                }",i=this.compileShader(e),this.compiledProgram.set("hue"+(t?"-range":""),i)}this.ctx.useProgram(i.program),this.ctx.uniform1f(i.uniform.rotation,e/360),t&&(this.ctx.uniform1f(i.uniform.from,t/360),this.ctx.uniform1f(i.uniform.to,s/360)),this.draw(i)}saturation(e,t,s){let i=2*e/3+1,a=-.5*(i-1);t?this.colorMatrixRange([i,a,a,0,0,a,i,a,0,0,a,a,i,0,0,0,0,0,1,0],t,s):this.colorMatrix([i,a,a,0,0,a,i,a,0,0,a,a,i,0,0,0,0,0,1,0])}lightness(e,t,s){e*=255,t?this.colorMatrixRange([1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0],t,s):this.colorMatrix([1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0])}colorize(e){this.fill(new h.A(a.A.fromHSB(e,1,1),"color",1))}exposure(e){let t=this.compiledProgram.get("exposure");if(!t){let e=["#define GLSLIFY 1","precision highp float;","varying vec2 uv;","uniform sampler2D texture;","uniform float amount;","const float epsilon = 0.000001;","const float mx = 1.0 - epsilon;","const mat3 matRGBtoROMM = mat3(0.5293459296226501, 0.3300727903842926, 0.14058130979537964, 0.09837432950735092, 0.8734610080718994, 0.028164653107523918, 0.01688321679830551, 0.11767247319221497, 0.8654443025588989);","const mat3 matROMMtoRGB = mat3(2.0340757369995117, -0.727334201335907, -0.3067416846752167, -0.22881317138671875, 1.2317301034927368, -0.0029169507324695587, -0.008569774217903614, -0.1532866358757019, 1.1618564128875732);","float ramp(in float t){","t *= 2.0;","if (t >= 1.0) {","t -= 1.0;","t = log(0.5) / log(0.5*(1.0-t) + 0.9332*t);","}","return clamp(t, 0.001, 10.0);","}","vec3 rgb2hsv(in vec3 c) {","vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);","vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));","vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));","float d = q.x - min(q.w, q.y);","float e = 1.0e-10;","return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);","}","vec3 hsv2rgb(in vec3 c) {","vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);","vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);","return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);","}","vec3 setHue(in vec3 res, in vec3 base) {","vec3 hsv = rgb2hsv(base);","vec3 res_hsv = rgb2hsv(res);","return hsv2rgb(vec3(hsv.x, res_hsv.y, res_hsv.z));","}","void main() {","lowp vec4 col = texture2D(texture, uv.xy);","vec3 base = col.rgb * matRGBtoROMM;","float a = abs(amount) * col.a + epsilon;","float v = pow(2.0, a*2.0+1.0)-2.0;","float m = mx - exp(-v);","vec3 res = (amount > 0.0) ? (1.0 - exp(-v*base)) / m : log(1.0-base*m) / -v;","res = mix(base, res, min(a*100.0, 1.0));","res = setHue(res, base);","res = pow(res, vec3(ramp(1.0 - (0.0 * col.a + 1.0) / 2.0)));","res = res * matROMMtoRGB;","gl_FragColor = vec4(res, col.a);","}"].join("\n");t=this.compileShader(e),this.compiledProgram.set("exposure",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}highlights(e){let t=this.compiledProgram.get("highlights");if(!t){let e=["#define GLSLIFY 1","precision highp float;","varying vec2 uv;","uniform sampler2D texture;","uniform float amount;","const float epsilon = 0.000001;","const float mx = 1.0 - epsilon;","const float PI = 3.1415926535897932384626433832795;","const mat3 matRGBtoROMM = mat3(0.5293459296226501, 0.3300727903842926, 0.14058130979537964, 0.09837432950735092, 0.8734610080718994, 0.028164653107523918, 0.01688321679830551, 0.11767247319221497, 0.8654443025588989);","const mat3 matROMMtoRGB = mat3(2.0340757369995117, -0.727334201335907, -0.3067416846752167, -0.22881317138671875, 1.2317301034927368, -0.0029169507324695587, -0.008569774217903614, -0.1532866358757019, 1.1618564128875732);","float luma_romm(in vec3 color){","return dot(color, vec3(0.242655, 0.755158, 0.002187));","}","float luma(in vec3 color){","return dot(color, vec3(0.298839, 0.586811, 0.11435));","}","vec3 rgb2hsv(in vec3 c) {","vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);","vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));","vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));","float d = q.x - min(q.w, q.y);","float e = 1.0e-10;","return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);","}","vec3 hsv2rgb(in vec3 c) {","vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);","vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);","return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);","}","vec3 setHue(in vec3 res, in vec3 base) {","vec3 hsv = rgb2hsv(base);","vec3 res_hsv = rgb2hsv(res);","return hsv2rgb(vec3(hsv.x, res_hsv.y, res_hsv.z));","}","float gaussian(in float x) {","return 1.0 - exp(-PI*2.0*x*x);","}","void main() {","lowp vec4 col = texture2D(texture, uv.xy);","lowp vec3 map = col.rgb;","vec3 base = col.rgb * matRGBtoROMM;","float base_lum = luma(col.rgb);","float map_lum = luma_romm(map * matRGBtoROMM);","float exposure = mix(amount, 0.0, 1.0 - map_lum) * col.a;","float a = abs(exposure) * col.a + epsilon;","float v = pow(2.0, a+1.0)-2.0;","float m = mx - exp(-v);","vec3 res = (exposure > 0.0) ? (1.0 - exp(-v*base)) / m : log(1.0-base*m) / -v;","res = mix(base, res, min(a*100.0, 1.0));","res = setHue(res, base);","res = res * matROMMtoRGB;","gl_FragColor = vec4(res, col.a);","}"].join("\n");t=this.compileShader(e),this.compiledProgram.set("highlights",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}shadows(e){let t=this.compiledProgram.get("shadows");if(!t){let e=["#define GLSLIFY 1","precision highp float;","varying vec2 uv;","uniform sampler2D texture;","uniform float amount;","const float epsilon = 0.000001;","const float mx = 1.0 - epsilon;","const float PI = 3.1415926535897932384626433832795;","const mat3 matRGBtoROMM = mat3(0.5293459296226501, 0.3300727903842926, 0.14058130979537964, 0.09837432950735092, 0.8734610080718994, 0.028164653107523918, 0.01688321679830551, 0.11767247319221497, 0.8654443025588989);","const mat3 matROMMtoRGB = mat3(2.0340757369995117, -0.727334201335907, -0.3067416846752167, -0.22881317138671875, 1.2317301034927368, -0.0029169507324695587, -0.008569774217903614, -0.1532866358757019, 1.1618564128875732);","float luma_romm(in vec3 color){","return dot(color, vec3(0.242655, 0.755158, 0.002187));","}","float luma(in vec3 color){","return dot(color, vec3(0.298839, 0.586811, 0.11435));","}","vec3 rgb2hsv(in vec3 c) {","vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);","vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));","vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));","float d = q.x - min(q.w, q.y);","float e = 1.0e-10;","return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);","}","vec3 hsv2rgb(in vec3 c) {","vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);","vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);","return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);","}","vec3 setHue(in vec3 res, in vec3 base) {","vec3 hsv = rgb2hsv(base);","vec3 res_hsv = rgb2hsv(res);","return hsv2rgb(vec3(hsv.x, res_hsv.y, res_hsv.z));","}","float gaussian(in float x) {","return 1.0 - exp(-PI*2.0*x*x);","}","void main() {","lowp vec4 col = texture2D(texture, uv.xy);","lowp vec3 map = col.rgb;","vec3 base = col.rgb * matRGBtoROMM;","float base_lum = luma(col.rgb);","float map_lum = luma_romm(map * matRGBtoROMM);","float exposure = mix(0.0, amount, 1.0 - map_lum) * col.a;","float a = abs(exposure) * col.a + epsilon;","float v = pow(2.0, a+1.0)-2.0;","float m = mx - exp(-v);","vec3 res = (exposure > 0.0) ? (1.0 - exp(-v*base)) / m : log(1.0-base*m) / -v;","res = mix(base, res, min(a*100.0, 1.0));","res = setHue(res, base);","res = res * matROMMtoRGB;","gl_FragColor = vec4(res, col.a);","}"].join("\n");t=this.compileShader(e),this.compiledProgram.set("shadows",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}dehaze(e){let t=this.compiledProgram.get("dehaze");if(!t){let e="\n\n                #define GLSLIFY 1;\n                precision highp float;\n                varying vec2 uv;\n\n                uniform sampler2D texture;\n                uniform float amount;  // -1.0 ~ 1.0\n\n                uniform vec2 size;\n\n                float hazeMap(vec4 base) {\n                    vec3 color = vec3(1.0, 1.0, 1.0);\n                    vec2 step = vec2(1.0 / size.xy);\n                    const int patchRadius = 1; // the half size for shift in 3 x 3 patch.\n                    for (int i = -patchRadius; i <= patchRadius; ++i) {\n                       for (int j = -patchRadius; j <= patchRadius; ++j) {\n                           vec2 uv = clamp(uv + (vec2(i, j) * step), 0.0, 1.0);\n                           color = min(color, base.rgb);\n                        }\n                    }\n                    return min(color.r, min(color.g, color.b));\n                }\n\n                void main() {\n                    \n                    lowp vec4 base = texture2D(texture, uv.xy);\n                    lowp float haze = hazeMap(base);\n\n                    float transmission = 1.0 - 0.95 * haze;\n                    const float A = 0.95; //0.95 intensity. We can consider to collect 0.1% brightest pixel from the dark channel image.\n                    const float t0 = 0.1; //0.1 in the paper, we can increase it for solving the color bleeding.\n                    float t = mix(1.0, max(t0, transmission), amount);\n                    vec3 J = (base.rgb - A) / t + A;\n                    gl_FragColor = vec4(J, base.a);\n                }";t=this.compileShader(e),this.compiledProgram.set("dehaze",t)}this.ctx.useProgram(t.program),this.ctx.uniform2f(t.uniform.size,this.width,this.height),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}solarize(){this.paletteMap||(this.paletteMap=new ImageData(256,1));for(let e=0;e<256;++e){let t=255*(e/255>.5?2*(e/255-.5):2*(.5-e/255));t=t>255?255:t<0?0:t,this.paletteMap.data[4*e]=this.paletteMap.data[4*e+1]=this.paletteMap.data[4*e+2]=t}this.mapping(this.paletteMap)}monochrome(e){let t=this.compiledProgram.get("monochrome");if(!t){let e="\n            precision highp float;\n            varying vec2 uv;\n            \n            uniform sampler2D texture;\n\n            uniform float r;\n            uniform float g;\n            uniform float b;\n            \n            float luma(vec3 color) {\n                return dot(color, vec3(r, g, b));\n            }\n            void main() {\n                lowp vec4 base = texture2D(texture, uv.xy);\n                float avg = luma(base.rgb);\n\n                gl_FragColor = vec4(avg, avg, avg, base.a);\n            }";t=this.compileShader(e),this.compiledProgram.set("monochrome",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.r,e.r),this.ctx.uniform1f(t.uniform.g,e.g),this.ctx.uniform1f(t.uniform.b,e.b),this.draw(t)}curves(e){this.paletteMap||(this.paletteMap=new ImageData(256,1)),void 0!==e.preset&&(e=u.X.createCurveSet(e)),u.A.fillPaletteMap(e,this.paletteMap),this.mapping(this.paletteMap)}levels(e){this.paletteMap||(this.paletteMap=new ImageData(256,1)),p.A.fillPaletteMap(e,this.paletteMap),this.mapping(this.paletteMap)}multilevels(e){this.paletteMap||(this.paletteMap=new ImageData(256,1)),p.A.fillRGBPaletteMap(e[0].isFlat()?void 0:e[0],e[1].isFlat()?void 0:e[1],e[2].isFlat()?void 0:e[2],this.paletteMap),this.mapping(this.paletteMap)}mapping(e){let t=this.compiledProgram.get("mapping");if(!t){let e="\n                #define GLSLIFY 1\n                precision highp float;\n                varying vec2 uv;\n\n                uniform sampler2D texture;\n                uniform sampler2D paletteMap;\n\n                void main() {\n                    lowp vec4 base = texture2D(texture, uv.xy);\n                    float r = texture2D(paletteMap, vec2(base.r, 0)).r;\n                    float g = texture2D(paletteMap, vec2(base.g, 0)).g;\n                    float b = texture2D(paletteMap, vec2(base.b, 0)).b;\n                    gl_FragColor = vec4(r, g, b, base.a);\n                }";t=this.compileShader(e),this.compiledProgram.set("mapping",t)}this.ctx.useProgram(t.program);let s=t.getTextureById("paletteMap");s.createTexture(this.ctx,e.width,e.height),s.uploadData(this.ctx,e),this.draw(t)}lookup(e){let t=this.compiledProgram.get("lookup");if(!t){let e="\n            precision highp float;\n            varying vec2 uv;\n\n            uniform sampler2D texture;\n            uniform sampler2D paletteMap;\n            \n            float luma(vec3 color) {\n                return dot(color, vec3(0.299, 0.587, 0.114));\n            }\n\n            void main() {\n                lowp vec4 base = texture2D(texture, uv.xy);\n                float avg = luma(base.rgb);\n                float r = texture2D(paletteMap, vec2(avg, 0)).r;\n                float g = texture2D(paletteMap, vec2(avg, 0)).g;\n                float b = texture2D(paletteMap, vec2(avg, 0)).b;\n                gl_FragColor = vec4(r, g, b, base.a);\n            }";t=this.compileShader(e),this.compiledProgram.set("lookup",t)}this.ctx.useProgram(t.program);let s=t.getTextureById("paletteMap");s.createTexture(this.ctx,e.width,e.height),s.uploadData(this.ctx,e),this.draw(t)}toning(e){this.paletteMap||(this.paletteMap=new ImageData(256,1)),l.A.fillPaletteMap(e,this.paletteMap);let t=this.compiledProgram.get("toning");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n\n                uniform sampler2D texture;\n                uniform sampler2D paletteMap;\n\n                uniform float amount;\n                \n                float luma(vec3 color) {\n                    return dot(color, vec3(0.299, 0.587, 0.114));\n                }\n\n                void main() {\n                    lowp vec4 base = texture2D(texture, uv.xy);\n                    float avg = luma(base.rgb);\n                    float r = texture2D(paletteMap, vec2(avg, 0)).r;\n                    float g = texture2D(paletteMap, vec2(avg, 0)).g;\n                    float b = texture2D(paletteMap, vec2(avg, 0)).b;\n                    gl_FragColor = mix(base, vec4(r, g, b, base.a), amount);\n                }";t=this.compileShader(e),this.compiledProgram.set("toning",t)}this.ctx.useProgram(t.program);let s=t.getTextureById("paletteMap");s.createTexture(this.ctx,this.paletteMap.width,this.paletteMap.height),s.uploadData(this.ctx,this.paletteMap),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}fill(e){let t=this.compiledProgram.get("fill-"+e.blend);if(!t){let s="";switch(e.blend){case"color":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n                        \n                        vec3 blendColor(vec3 base, vec3 blend) {\n                            vec3 color = vec3(blend.rgb);\n                            base.r = base.r * 0.30 + base.g * 0.59 + base.b * 0.11;\n                            \n                            vec3 power = (color.r+color.g+color.b) * 0.3333 - color;\n                            base.rgb = pow(base.rrr, 1.0 + power);\n\n                            return base;\n                        }\n                        vec3 blendColor(vec3 base, vec3 blend, float opacity) {\n                            return (blendColor(base, blend) * opacity + base * (1.0 - opacity));\n                        }\n\n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = vec4(blendColor(base.rgb, color.rgb, amount), base.a);\n                        }";break;case"soft-light":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n\n                        float blendSoftLight(float base, float blend) {\n                            return (blend<0.5)?(2.0*base*blend+base*base*(1.0-2.0*blend)):(sqrt(base)*(2.0*blend-1.0)+2.0*base*(1.0-blend));\n                        }\n                        vec3 blendSoftLight(vec3 base, vec3 blend) {\n                            return vec3(blendSoftLight(base.r,blend.r),blendSoftLight(base.g,blend.g),blendSoftLight(base.b,blend.b));\n                        }\n                        vec3 blendSoftLight(vec3 base, vec3 blend, float opacity) {\n                            return (blendSoftLight(base, blend) * opacity + base * (1.0 - opacity));\n                        }\n\n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = vec4(blendSoftLight(base.rgb, color.rgb, amount), base.a);\n                        }";break;case"hard-light":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n\n                        float blendOverlay(float base, float blend) {\n                            return base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));\n                        }\n                        vec3 blendOverlay(vec3 base, vec3 blend) {\n                            return vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));\n                        }\n                        vec3 blendHardLight(vec3 base, vec3 blend) {\n                            return blendOverlay(blend,base);\n                        }\n                        vec3 blendHardLight(vec3 base, vec3 blend, float opacity) {\n                            return (blendHardLight(base, blend) * opacity + base * (1.0 - opacity));\n                        }\n\n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = vec4(blendHardLight(base.rgb, color.rgb, amount), base.a);\n                        }";break;case"vivid-light":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n\n                        float blendColorBurn(float base, float blend) {\n                            return (blend==0.0)?blend:max((1.0-((1.0-base)/blend)),0.0);\n                        }\n                        float blendColorDodge(float base, float blend) {\n                            return (blend==1.0)?blend:min(base/(1.0-blend),1.0);\n                        }\n                        float blendVividLight(float base, float blend) {\n                            return (blend<0.5)?blendColorBurn(base,(2.0*blend)):blendColorDodge(base,(2.0*(blend-0.5)));\n                        }\n                        vec3 blendVividLight(vec3 base, vec3 blend) {\n                            return vec3(blendVividLight(base.r,blend.r),blendVividLight(base.g,blend.g),blendVividLight(base.b,blend.b));\n                        }\n                        vec3 blendVividLight(vec3 base, vec3 blend, float opacity) {\n                            return (blendVividLight(base, blend) * opacity + base * (1.0 - opacity));\n                        }\n\n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = vec4(blendVividLight(base.rgb, color.rgb, amount), base.a);\n                        }";break;case"overlay":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n\n                        float blendOverlay(float base, float blend) {\n                            return base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));\n                        }\n                        vec3 blendOverlay(vec3 base, vec3 blend) {\n                            return vec3(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b));\n                        }\n                        vec3 blendOverlay(vec3 base, vec3 blend, float opacity) {\n                            return (blendOverlay(base, blend) * opacity + base * (1.0 - opacity));\n                        }\n\n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = vec4(blendOverlay(base.rgb, color.rgb, amount), base.a);\n                        }";break;case"multiply":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n                        \n                        vec3 blendMultiply(vec3 base, vec3 blend) {\n                            return base*blend;\n                        }\n                        vec3 blendMultiply(vec3 base, vec3 blend, float opacity) {\n                            return (blendMultiply(base, blend) * opacity + base * (1.0 - opacity));\n                        }\n\n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = vec4(blendMultiply(base.rgb, color.rgb, amount), base.a);\n                        }";break;case"color-dodge":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n                        \n                        float blendColorDodge(float base, float blend) {\n                            return (blend==1.0)?blend:min(base/(1.0-blend),1.0);\n                        }\n                        vec3 blendColorDodge(vec3 base, vec3 blend) {\n                            return vec3(blendColorDodge(base.r,blend.r),blendColorDodge(base.g,blend.g),blendColorDodge(base.b,blend.b));\n                        }\n                        vec3 blendColorDodge(vec3 base, vec3 blend, float opacity) {\n                            return (blendColorDodge(base, blend) * opacity + base * (1.0 - opacity));\n                        }\n\n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = vec4(blendColorDodge(base.rgb, color.rgb, amount), base.a);\n                        }";break;case"color-burn":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n                        \n                        float blendColorBurn(float base, float blend) {\n                            return (blend==0.0)?blend:max((1.0-((1.0-base)/blend)),0.0);\n                        }\n                        vec3 blendColorBurn(vec3 base, vec3 blend) {\n                            return vec3(blendColorBurn(base.r,blend.r),blendColorBurn(base.g,blend.g),blendColorBurn(base.b,blend.b));\n                        }\n                        vec3 blendColorBurn(vec3 base, vec3 blend, float opacity) {\n                            return (blendColorBurn(base, blend) * opacity + base * (1.0 - opacity));\n                        }\n\n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = vec4(blendColorBurn(base.rgb, color.rgb, amount), base.a);\n                        }";break;case"screen":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n                        \n                        float blendScreen(float base, float blend) {\n                            return 1.0-((1.0-base)*(1.0-blend));\n                        }\n                        vec3 blendScreen(vec3 base, vec3 blend) {\n                            return vec3(blendScreen(base.r,blend.r),blendScreen(base.g,blend.g),blendScreen(base.b,blend.b));\n                        }\n                        vec3 blendScreen(vec3 base, vec3 blend, float opacity) {\n                            return (blendScreen(base, blend) * opacity + base * (1.0 - opacity));\n                        }\n\n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = vec4(blendScreen(base.rgb, color.rgb, amount), base.a);\n                        }";break;default:s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform vec4 color;\n                        \n                        void main() {\n                            vec4 base = texture2D(texture, uv.xy);\n                            gl_FragColor = mix(base, color, amount);\n                        }"}t=this.compileShader(s),this.compiledProgram.set("fill-"+e.blend,t)}this.ctx.useProgram(t.program),this.ctx.uniform4f(t.uniform.color,e.color.r/255,e.color.g/255,e.color.b/255,1),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}glamour(e){let t=this.compiledProgram.get("glamour");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n                uniform vec2 px;\n\n                float normpdf(in float x, in float sigma) {\n                    return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\n                }\n\n                vec3 blurMap() {\n                    //declare stuff\n                    const int mSize = 11;\n                    const int kSize = (mSize-1)/2;\n                    float kernel[mSize];\n                    vec3 final_colour = vec3(0.0);\n                    \n                    //create the 1-D kernel\n                    float sigma = 7.0;\n                    float Z = 0.0;\n                    for (int j = 0; j <= kSize; ++j){\n                        kernel[kSize+j] = kernel[kSize-j] = normpdf(float(j), sigma);\n                    }\n                    \n                    //get the normalization factor (as the gaussian has been clamped)\n                    for (int j = 0; j < mSize; ++j){\n                        Z += kernel[j];\n                    }\n                    \n                    //read out the texels\n                    for (int i=-kSize; i <= kSize; ++i){\n                        for (int j=-kSize; j <= kSize; ++j){\n                            final_colour += kernel[kSize+j] * kernel[kSize+i] * texture2D(texture, (uv.xy + vec2(float(i),float(j))*px)).rgb;\n                        }\n                    }\n                    return vec3(final_colour/(Z*Z));\n                }\n\n                float luma(vec3 color) {\n                    return dot(color, vec3(0.299, 0.587, 0.114));\n                }\n\n                void main() {\n                    \n                    vec4 base = texture2D(texture, uv);\n                    vec3 color = blurMap();\n                    \n                    color = vec3(luma(color));\n\n                    color = vec3(\n                        (base.r <= 0.5) ? (2.0 * base.r * color.r) : (1.0 - 2.0 * (1.0 - base.r) * (1.0 - color.r)),\n                        (base.g <= 0.5) ? (2.0 * base.g * color.g) : (1.0 - 2.0 * (1.0 - base.g) * (1.0 - color.g)),\n                        (base.b <= 0.5) ? (2.0 * base.b * color.b) : (1.0 - 2.0 * (1.0 - base.b) * (1.0 - color.b))\n                    );\n                \n                    gl_FragColor = mix(base, vec4(color, base.a), amount);\n                }";t=this.compileShader(e),this.compiledProgram.set("glamour",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.ctx.uniform2f(t.uniform.px,1/this.width,1/this.height),this.draw(t)}kaleidoscope(e){let t=this.compiledProgram.get("kaleidoscope");if(!t){let e="\n                precision mediump float;\n                varying vec2 uv;\n                #define PI 3.14159265359\n\n                uniform sampler2D texture;\n                uniform vec2 resolution;\n\n                uniform float u_stretch;\n                uniform float u_position;\n                uniform float u_amount;\n\n                int modwhole(float a, float b) {\n                    float m = mod(a, b);\n\n                    return int (m+.5);\n                }\n\n                void main(void) {\n                    int numOfAxis = int(u_amount);\n                    float angleFrac = (2. * PI) / float ( 2 * numOfAxis);\n\n                    vec2 uvc = uv;\n                    uvc -= .5;\n\n                    // Convert to Polar\n                    float phi = abs(atan(uvc.x, uvc.y));\n                    float r = length(uvc);\n\n                    int count = int(phi / angleFrac);\n\n                    phi = mod(phi, angleFrac);\n                    if (modwhole (float(count), 2.) == 1) {\n                        phi = angleFrac - phi;\n                    }\n\n                    // from polar coordiantes\n                    float x = r * cos(phi);\n                    float y = r * sin(phi);\n\n                    float stretch = 1. + (1. - u_stretch);\n                    float position = u_position * PI * .5;\n\n                    uvc = vec2(x, y) * stretch + sin(position);\n\n                    if (uvc.x < 0.) uvc.x += 1.;\n                    if (uvc.x > 1.) uvc.x -= 1.;\n                \n                    if (uvc.y < 0.) uvc.y += 1.;\n                    if (uvc.y > 1.) uvc.y -= 1.;\n\n                    gl_FragColor = texture2D (texture, uvc);\n                }\n            ";t=this.compileShader(e),this.compiledProgram.set("kaleidoscope",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.u_amount,e.amount),this.ctx.uniform1f(t.uniform.u_stretch,e.stretch),this.ctx.uniform1f(t.uniform.u_position,e.position),this.ctx.uniform2f(t.uniform.resolution,this.width,this.height),this.draw(t)}polarcoordinates(e){let t=this.compiledProgram.get("polarcoordinates");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                #define PI 3.14159265359\n                #define PI_2 6.2831\n\n                uniform sampler2D texture;\n                uniform int flip;\n                uniform float overlap;\n                uniform float rotate;\n                uniform vec2 resolution;\n                uniform int symmetry;\n\n                mat2 rotate2d(float _angle){\n                    return mat2(cos(_angle),-sin(_angle),\n                                sin(_angle),cos(_angle));\n                }\n\n                vec2 squareImage(vec2 uv) {\n                    // Aspect Ratio\n                    float ar = resolution.x / resolution.y;\n\n                    // Square the image at the center if rectangular\n                    if (symmetry == 1) {\n                        if (resolution.x > resolution.y) {\n                            float leftEdge = (1.0-1.0/ar) * 0.5;\n                            float rightEdge = 1.0 - leftEdge;\n\n                            if (uv.x < leftEdge) {\n                                uv = vec2(0, uv.y); // Fill in the left edge\n                            } else if (uv.x > rightEdge) {\n                                uv = vec2(1, uv.y); // Fill in the right edge\n                            }\n                            else {\n                                uv.x -= leftEdge; // Square the image on X\n                                uv.x *= ar;\n                            }\n                        } else if (resolution.y > resolution.x) {\n                            float bottomEdge = (1.0-ar) * 0.5;\n                            float topEdge = 1.0 - bottomEdge;\n\n                            if (uv.y < bottomEdge) {\n                                uv = vec2(uv.x, 0); // Fill in the bottom edge\n                            } else if (uv.y > topEdge) {\n                                uv = vec2(uv.x, 1); // Fill in the top edge\n                            }\n                            else {\n                                uv.y -= bottomEdge; // Square the image on Y\n                                uv.y /= ar;\n                            }\n                        }\n                    }\n                    return uv;\n                }\n\n                void main(void) {           \n                    // Square the image\n                    vec2 uvc = squareImage(uv);\n\n                    // Bring uv coordinates to center 0.5\n                    uvc = uvc-0.5;\n\n                    // Rotate uv by angle\n                    uvc = rotate2d( rotate ) * uvc;\n\n                    // Cartesian to polar\n                    float r = length(uvc) * 2.0;\n                    float a = atan(uvc.x, uvc.y);\n\n                    // Move from -PI -> PI to 0 -> 1\n                    vec2 uvp = vec2(a / (PI_2 + overlap) + 0.5, r);\n\n                    // Flip the image by 180 degrees\n                    uvp = flip == 1 ? 1.0 - uvp : uvp;\n\n                    // Compute color\n                    gl_FragColor = texture2D(texture, uvp);\n                }\n            ";t=this.compileShader(e),this.compiledProgram.set("polarcoordinates",t)}this.ctx.useProgram(t.program),this.ctx.uniform1i(t.uniform.flip,e.flip?1:0),this.ctx.uniform1i(t.uniform.symmetry,e.symmetry?1:0),this.ctx.uniform1f(t.uniform.overlap,e.overlap),this.ctx.uniform1f(t.uniform.rotate,e.rotate),this.ctx.uniform2f(t.uniform.resolution,this.width,this.height),this.draw(t)}fisheye(e){let t=this.compiledProgram.get("fisheye");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                #define PI 3.14159265359\n\n                uniform sampler2D texture;\n                uniform vec2 center;\n                uniform float amount;\n                uniform float aperture;\n                uniform int edgeFill;\n                uniform vec2 resolution;\n\n                vec2 edgeFillReflect(vec2 uvc) {\n                    if (uvc.x < 0.) uvc.x = -uvc.x;\n                    if (uvc.y < 0.) uvc.y = -uvc.y;\n                    if (uvc.x > 1.) uvc.x = 2. - uvc.x;\n                    if (uvc.y > 1.) uvc.y = 2. - uvc.y;\n\n                    return uvc;\n                }\n\n                vec2 edgeFillRepeat(vec2 uvc) {\n                    if (uvc.x < 0.) uvc.x = 1. + uvc.x;\n                    if (uvc.y < 0.) uvc.y = 1. + uvc.y;\n                    if (uvc.x > 1.) uvc.x = uvc.x - 1.;\n                    if (uvc.y > 1.) uvc.y = uvc.y - 1.;\n\n                    return uvc;\n                }\n\n                int edgeFillNone(vec2 uvc) {\n                    if (uvc.x < 0. || uvc.y < 0. || uvc.x > 1. || uvc.y > 1.) {\n                        return 1;\n                    }\n                    return 0;\n                }\n\n                void main(void) {\n\n                    // Normalized device space i.e. range of [-1, 1]\n                    vec2 ndcPos = uv * 2. - center * 2.;\n\n                    // Aspect ratio of the viewport\n                    float aspect = resolution.x / resolution.y;\n\n                    // Relationship between the radius of the perimeter circle (r or half_dist) and\n                    // the angle (eye_angle): \n                    // Bisect the isosceles triangle\n                    float eye_angle = abs(aperture);\n                    float half_angle = eye_angle / 2.;\n                    float half_dist = tan(half_angle);\n\n                    // With the aspect ratio of the viewport (aspect)\n                    vec2 vp_scale = vec2(aspect, 1.);\n                    vec2 P = ndcPos * vp_scale;\n\n                    // Diameter or the length of the viewport\n                    float vp_dia = length(vp_scale);\n\n                    // Relative distance to the center of the viewport\n                    float rel_dist = length(P) / vp_dia;\n\n                    // Relative position of the point P in relation to the aspect ratio\n                    vec2 rel_P = normalize(P) / normalize(vp_scale);\n\n                    vec2 pos_prj = ndcPos;\n                    if (aperture > 0.) {\n                        // Projection from spherical surface to the place\n                        float beta = rel_dist * half_angle;\n                        pos_prj = rel_P * tan(beta) / half_angle * pow(.9, amount * 5.);\n                    } else if (aperture < 0.) {\n                        // Projection from the plane to the spherical surface\n                        float beta = atan(rel_dist * half_dist);\n                        pos_prj = rel_P * beta / half_angle * pow(.9, amount * 5.);\n                    }\n\n                    vec2 uv_prj = pos_prj * .5 + center;\n\n                    // Return transparent if no edge fill\n                    if (edgeFill == 0) {\n                        if (edgeFillNone(uv_prj) == 1) {\n                            discard;\n                        }\n                    }\n                    if (edgeFill == 1) {\n                        uv_prj = edgeFillReflect(uv_prj);\n                    } \n                    if (edgeFill == 2) {\n                        uv_prj = edgeFillRepeat(uv_prj);\n                    }\n\n                    gl_FragColor = texture2D(texture, uv_prj);\n                }";t=this.compileShader(e),this.compiledProgram.set("fisheye",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e.amount),this.ctx.uniform1f(t.uniform.aperture,e.aperture),this.ctx.uniform2f(t.uniform.center,e.x,e.y),this.ctx.uniform1i(t.uniform.edgeFill,e.edgeFill),this.ctx.uniform2f(t.uniform.resolution,this.width,this.height),this.draw(t)}wave(e){let t=this.compiledProgram.get("wave");if(!t){let e="\n                precision mediump float;\n                uniform int type;\n                uniform float amplitude;\n                uniform float scale;\n                varying vec2 uv;\n                uniform int edgeApprox;\n                // uniform vec2 resolution;\n                uniform sampler2D texture;\n                uniform float rotate;\n                #define PI 3.14159265359\n\n                mat2 rotate2d(float _angle){\n                    return mat2(cos(_angle),-sin(_angle),\n                                sin(_angle),cos(_angle));\n                }\n\n                float cot(float angle) {\n                    return cos(angle) / sin(angle);\n                }\n\n                float sinewave(float rad) {\n                    return amplitude * sin(scale * 2. * PI * rad);\n                }\n\n                float trianglewave(float rad) {\n                    return amplitude * 2. / PI * asin(sin(scale * 2. * PI * rad));\n                }\n\n                float squarewave(float rad) {\n                    return amplitude * sign(sin(scale * 2. * PI * rad));\n                }\n\n                void main() {\n                    vec2 uvc = uv;\n\n                    uvc -= 0.5;\n                    uvc = rotate2d(-rotate) * uvc;\n\n                    if (type == 0) {\n                        // sine wave\n                        uvc.y = sinewave(uvc.x) + uvc.y;\n                    } else if (type == 1) {\n                        // triangular wave\n                        uvc.y = trianglewave(uvc.x) + uvc.y;\n                    } else if (type == 2) {\n                        // square wave\n                        uvc.y = squarewave(uvc.x) + uvc.y;\n                    } else {\n                        // sawtooth wave\n                        // uvc.y = amplitude * 2. / PI * atan(cot(scale * 2. * PI * uvc.x));\n                    }\n                    \n                    uvc = rotate2d(rotate) * uvc;\n                    uvc += 0.5;\n                    \n                    // Clamp\n                    // uvc = clamp(uvc, 0., 1.);\n\n                    if (edgeApprox == 2) {\n                        // Repeat acros the edges with the opposite side color\n                        if (uvc.x < 0.) uvc.x = 1. + uvc.x;\n                        if (uvc.y < 0.) uvc.y = 1. + uvc.y;\n                        if (uvc.x > 1.) uvc.x = uvc.x - 1.;\n                        if (uvc.y > 1.) uvc.y = uvc.y - 1.;\n                    } else if (edgeApprox == 1) {\n                        // Approximate (natural) around the edges with the reflection color\n                        if (uvc.x < 0.) uvc.x = -uvc.x;\n                        if (uvc.y < 0.) uvc.y = -uvc.y;\n                        if (uvc.x > 1.) uvc.x = 2. - uvc.x;\n                        if (uvc.y > 1.) uvc.y = 2. - uvc.y;    \n                    } else {\n                        // Don't approximate, render transparent\n                        if (uvc.x < 0. || uvc.x > 1. || \n                            uvc.y < 0. || uvc.y > 1.) {\n                            gl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n                            return;\n                        }    \n                    }\n\n                    gl_FragColor = texture2D(texture, uvc);\n                    return;\n                }\n            ";t=this.compileShader(e),this.compiledProgram.set("wave",t)}this.ctx.useProgram(t.program),this.ctx.uniform1i(t.uniform.type,e.type),this.ctx.uniform1f(t.uniform.amplitude,e.amplitude),this.ctx.uniform1f(t.uniform.scale,e.scale),this.ctx.uniform1f(t.uniform.rotate,e.rotate),this.ctx.uniform1i(t.uniform.edgeApprox,e.edgeApprox),this.draw(t)}reflect(e){let t=this.compiledProgram.get("reflect");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                #define PI 3.14159265359\n                #define PI_2 6.2831\n\n                uniform sampler2D texture;\n                uniform int type;\n                uniform vec2 resolution;\n                uniform vec2 center;\n                uniform vec2 offset;\n\n                // constant integers for directions\n                const int RIGHT = 1, LEFT = -1, ZERO = 0;\n\n                const float ALMOST_ZERO = 0.00001;\n\n                mat2 rotate2d(float _angle){\n                    return mat2(cos(_angle),-sin(_angle),\n                                sin(_angle),cos(_angle));\n                }\n\n                vec2 squareImage(vec2 uv) {\n                    // return uv;\n\n                    float ar = resolution.x / resolution.y;\n\n                    if (resolution.x > resolution.y) {\n                        uv.y /= ar;\n                    }\n                    else {\n                        uv.x *= ar;\n                    }\n                    return uv;\n                }\n\n                vec2 squareImagereverse(vec2 uv) {\n                    float ar = resolution.x / resolution.y;\n\n                    if (resolution.x > resolution.y) {\n                        uv.y /= ar;\n                        uv.y += (1. - 1./ar) * 0.5;\n                    }\n                    else {\n                        uv.x *= ar;\n                        uv.x += (1. - ar) * 0.5;\n                    }\n                    return uv;\n                }\n\n                int direction(vec2 A, vec2 B, vec2 P) {\n                    // subtracting co-ordinates of point A from\n                    // B and P, to make A as origin\n                    B.x -= A.x;\n                    B.y -= A.y;\n                    P.x -= A.x;\n                    P.y -= A.y;\n                \n                    // Determining cross Product\n                    float cross_product = B.x * P.y - B.y * P.x;\n                \n                    // return RIGHT if cross product is positive\n                    if (cross_product > ALMOST_ZERO)\n                        return LEFT;\n                \n                    // return LEFT if cross product is negative\n                    if (cross_product < -ALMOST_ZERO)\n                        return RIGHT;\n                \n                    // return ZERO if cross product is zero.\n                    return ZERO;\n                }\n                \n                vec2 reflectmagic(vec2 uvc, int reflectfrom, mat2 transf, vec2 A, vec2 B, vec2 center) {\n\n                    vec2 cent = center - 0.5;\n                    uvc -= center;\n\n                    int dircent = direction(A, B, cent);\n                    int diruv = direction(A, B, uvc);\n\n                    uvc = dircent >= ZERO && diruv >= ZERO || dircent == LEFT && diruv == LEFT ? transf * uvc : uvc;\n\n                    uvc += center;\n\n                    uvc -= 0.5;\n\n                    if (reflectfrom == LEFT) {\n                        uvc = dircent >= ZERO ? uvc : transf * uvc;\n                    } else {\n                        uvc = dircent == LEFT ? uvc : transf * uvc;\n                    }\n\n                    uvc += 0.5;\n\n                    return uvc;\n                }\n\n                vec2 reflectx(vec2 uvc, int reflectfrom) {\n                    mat2 transf = mat2(-1., 0., 0., 1.);     \n\n                    vec2 A = vec2 (0., -1.);\n                    vec2 B = vec2 (0., 1.);\n\n                    return reflectmagic(uvc, reflectfrom, transf, A, B, center);\n                }\n\n                vec2 reflecty(vec2 uvc, int reflectfrom) {\n                    mat2 transf = mat2(1., 0., 0., -1.);    \n\n                    vec2 A = vec2 (-1., 0.);\n                    vec2 B = vec2 (1., 0.);\n\n                    return reflectmagic(uvc, reflectfrom, transf, A, B, center);\n                }\n\n                vec2 reflectxequalminusy(vec2 uvc, int reflectfrom) {\n                    mat2 transf = mat2(0., 1., 1., 0.);\n\n                    vec2 A = vec2 (-1., -1.);\n                    vec2 B = vec2 (1., 1.);\n\n                    return reflectmagic(uvc, reflectfrom, transf, A, B, vec2(center.x, 1.-center.x));\n                }\n\n                vec2 reflectxequaly(vec2 uvc, int reflectfrom) {\n                    mat2 transf = mat2(0., -1., -1., 0.);\n\n                    vec2 A = vec2 (-1., 1.);\n                    vec2 B = vec2 (1., -1.);\n\n                    return reflectmagic(uvc, reflectfrom, transf, A, B, vec2(center.x, center.x));\n                }\n\n                vec2 reflect(vec2 uvc) {\n                    //reflect-type-minus-x\n                    if (type == 1) {\n                        uvc = reflectx(uvc, LEFT);\n                    }\n                    //reflect-type-minus-y\n                    else if (type == 2) {\n                        uvc = reflecty(uvc, LEFT);\n                    }\n                    //reflect-type-plus-x\n                    if (type == 3) {\n                        uvc = reflectx(uvc, RIGHT);\n                    }\n                    //reflect-type-plus-y\n                    else if (type == 4) {\n                        uvc = reflecty(uvc, RIGHT);\n                    }\n                    //reflect-type-minus-x-minus-y\n                    else if (type == 5) {\n                        uvc = reflectx(uvc, LEFT);\n                        uvc = reflecty(uvc, LEFT);\n                    }\n                    //reflect-type-minus-x-plus-y\n                    else if (type == 6) {\n                        uvc = reflectx(uvc, LEFT);\n                        uvc = reflecty(uvc, RIGHT);\n                    }\n                    //reflect-type-plus-x-plus-y\n                    else if (type == 7) {\n                        uvc = reflectx(uvc, RIGHT);\n                        uvc = reflecty(uvc, RIGHT);\n                    }\n                    //reflect-type-plus-x-minus-y\n                    else if (type == 8) {\n                        uvc = reflectx(uvc, RIGHT);\n                        uvc = reflecty(uvc, LEFT);\n                    }\n                    //reflect-type-above-x-equalto-y\n                    else if (type == 9) {\n                        uvc = reflectxequalminusy(uvc, LEFT);\n                    }\n                    // reflect-type-below-x-equalto-minus-y\n                    else if (type == 10) {\n                        uvc = reflectxequaly(uvc, RIGHT);\n                    }\n                    // reflect-type-above-x-equalto-minus-y\n                    else if (type == 11) {\n                        uvc = reflectxequaly(uvc, LEFT);\n                    }\n                    // reflect-type-below-x-equalto-y\n                    else if (type == 12) {\n                        uvc = reflectxequalminusy(uvc, RIGHT);\n                    }\n                    return uvc;\n                }\n\n                void main(void) {\n                    vec2 uvc = reflect(uv) - offset;\n                    gl_FragColor = texture2D(texture, uvc);\n                }\n            ";t=this.compileShader(e),this.compiledProgram.set("reflect",t)}this.ctx.useProgram(t.program),this.ctx.uniform1i(t.uniform.type,e.type),this.ctx.uniform2f(t.uniform.center,e.x,e.y),this.ctx.uniform2f(t.uniform.offset,e.xo,e.yo),this.ctx.uniform2f(t.uniform.resolution,this.width,this.height),this.draw(t)}bloom(e){let t=this.compiledProgram.get("bloom");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n                uniform vec2 px;\n                float thresh = .5;\n                \n                void main() {\n                    vec4 sum = vec4(0);\n                \n                    // mess of for loops due to gpu compiler/hardware limitations\n                    int j=-2;\n                    for( int i=-2; i<=2; i++) sum+=texture2D(texture,uv+vec2(i,j)*px);\n                    j=-1;\n                    for( int i=-2; i<=2; i++) sum+=texture2D(texture,uv+vec2(i,j)*px);\n                    j=0;\n                    for( int i=-2; i<=2; i++) sum+=texture2D(texture,uv+vec2(i,j)*px);\n                    j=1;\n                    for( int i=-2; i<=2; i++) sum+=texture2D(texture,uv+vec2(i,j)*px);\n                    j=2;\n                    for( int i=-2; i<=2; i++) sum+=texture2D(texture,uv+vec2(i,j)*px);\n                    sum/=25.0;\n                \n                    gl_FragColor= texture2D(texture, uv);\n                \n                    // use the blurred colour if it's bright enough\n                    if (length(sum) > thresh) {\n                        gl_FragColor += sum*amount;\n                    }\n                }";t=this.compileShader(e),this.compiledProgram.set("bloom",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.ctx.uniform2f(t.uniform.px,1/this.width,1/this.height),this.draw(t)}posterize(e){let t=this.compiledProgram.get("posterize");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                float areas = 256.0 / amount;\n                float values = 255.0 / (amount - 1.0);\n                \n                void main() {\n                    vec4 px = texture2D(texture, uv);\n\n                    px.r = floor(values * floor((px.r*255.0) / areas))/255.0;\n                    px.g = floor(values * floor((px.g*255.0) / areas))/255.0;\n                    px.b = floor(values * floor((px.b*255.0) / areas))/255.0;\n\n                    gl_FragColor = px;\n                }";t=this.compileShader(e),this.compiledProgram.set("posterize",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,100*e+1),this.draw(t)}fringe(e){let t=this.compiledProgram.get("fringe");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform vec2 amount;\n\n                void main() {\n                    vec2 dir = uv - vec2( .5 );\n                    float d = .7 * length( dir );\n                    normalize( dir );\n                    vec2 value = d * dir * amount;\n                \n                    vec4 c1 = texture2D( texture, uv - value);\n                    vec4 c2 = texture2D( texture, uv );\n                    vec4 c3 = texture2D( texture, uv + value);\n                    \n                    gl_FragColor = vec4( c1.r, c2.g, c3.b, c1.a + c2.a + c3.b);\n                }";t=this.compileShader(e),this.compiledProgram.set("fringe",t)}this.ctx.useProgram(t.program),this.ctx.uniform2f(t.uniform.amount,e,e),this.draw(t)}rgbSplit(e){let t=0,s=0,i=0;const a=e.distance;switch(e.type){case"red-blue":t=a,i=-a;break;case"green-red":t=-a,s=a;break;case"blue-green":s=-a,i=a;break;case"red":t=a;break;case"green":s=a;break;case"blue":i=a}let n=this.compiledProgram.get("rgb-split");if(!n){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                uniform vec2 r;\n                uniform vec2 g;\n                uniform vec2 b;\n\n                void main() {\n                \n                    vec4 px = texture2D(texture, uv);\n\n                    vec4 c1 = texture2D( texture, uv - r);\n                    vec4 c2 = texture2D( texture, uv - g);\n                    vec4 c3 = texture2D( texture, uv - b);\n                    \n                    gl_FragColor = mix(px, vec4( c1.r, c2.g, c3.b, (c1.a + c2.a + c3.a)/3.0), amount);\n                }";n=this.compileShader(e),this.compiledProgram.set("rgb-split",n)}this.ctx.useProgram(n.program),this.ctx.uniform1f(n.uniform.amount,e.amount);var r=e.direction*Math.PI/180,o=Math.cos(r),h=Math.sin(r);this.ctx.uniform2f(n.uniform.r,o*t,h*t),this.ctx.uniform2f(n.uniform.g,o*s,h*s),this.ctx.uniform2f(n.uniform.b,o*i,h*i),this.draw(n)}interference(e){let t=this.compiledProgram.get("interference");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float seed;\n                uniform float amount;\n                uniform int direction;\n\n                float rand(vec2 co){\n                    return fract(sin(dot(co.xy, vec2(12.9898,78.233)*3.141)) * 43758.5453);\n                }\n\n                void main() {\n\n                    float rand1 = rand(vec2(seed,seed));\n                    float rand2 = rand(vec2(seed,rand1));\n                \n                    float rand1xy = rand(vec2(rand1*uv.x,rand2*uv.y));\n                    float rand2xy = rand(vec2(rand1*uv.y,rand2*uv.x));\n                  \n                    float rand1x = rand(vec2(rand1*uv.x,rand2));\n                    float rand2x = rand(vec2(rand1x,rand1x));     \n\n                    float rand1y = rand(vec2(rand1*uv.y,rand2));\n                    float rand2y = rand(vec2(rand1y,rand1y));                       \n                    \n                    if(direction == 0) {\n                        if(rand2y/100.0 > rand1y) {\n                            if(rand2xy < 0.3) gl_FragColor = vec4(rand1xy, rand1xy, rand1xy, 0.0);\n                            else gl_FragColor = texture2D(texture, uv);\n                        }\n                        else {\n                            gl_FragColor = texture2D(texture, vec2(uv.x + rand1y * amount, uv.y));\n                        }\n                    } else {\n                        if(rand2x/100.0 > rand1x) {\n                            if(rand2xy < 0.3) gl_FragColor = vec4(rand1xy, rand1xy, rand1xy, 0.0);\n                            else gl_FragColor = texture2D(texture, uv);\n                        }\n                        else {\n                            gl_FragColor = texture2D(texture, vec2(uv.x, uv.y + rand1x * amount));\n                        }\n                    }\n                }";t=this.compileShader(e),this.compiledProgram.set("interference",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.seed,e.seed),this.ctx.uniform1f(t.uniform.amount,e.amount/15),this.ctx.uniform1i(t.uniform.direction,e.direction?1:0),this.draw(t)}bleed(e){let t=this.compiledProgram.get("bleed");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float seed;\n                uniform float block;\n                uniform float amplitude;\n              \n                float rand(vec2 n) { \n                    return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n                }\n                float randomRange (in vec2 sd, in float min, in float max) {\n                    return min + rand(sd) * (max - min);\n                }\n                float insideRange(float v, float bottom, float top) {\n                   return step(bottom, v) - step(top, v);\n                }\n\n                float noise(vec2 uv, float blockiness){   \n                    vec2 lv = fract(uv);\n                    vec2 id = floor(uv);\n                    \n                    float n1 = rand(id);\n                    float n2 = rand(id+vec2(1,0));\n                    float n3 = rand(id+vec2(0,1));\n                    float n4 = rand(id+vec2(1,1));\n                    \n                    vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n\n                    return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n                }\n\n                float fbm(vec2 uv, int count, float blockiness, float complexity) {\n                    float val = 0.0;\n                    float amp = 0.5;\n                    \n                    for (int i = 0; i < 1000; i++) {\n                        if(i == count) break;\n                        \n                        val += amp * noise(uv, blockiness);\n                        amp *= 0.5;\n                        uv *= complexity;    \n                    }  \n                    return val;\n                }\n\n                const float shift = 2.0; //2\n\n                void main()\n                {\n                    vec4 px = texture2D(texture, uv);\n\n                    for (float i = 0.0; i < 20.0; i += 1.0) {\n\n                        float sliceY = rand(vec2(seed, 2035.0 + float(i)));\n                        float sliceX = rand(vec2(seed, 3234.0 + float(i)));\n\n                        float sliceH = rand(vec2(seed, 2035.0 - float(i))) * 0.1;\n                        float sliceW = rand(vec2(seed, 3234.0 + float(i))) * 1.5;\n\n                        if(insideRange(uv.y, sliceY, fract(sliceY+sliceH)) == 1.0 && insideRange(uv.x, sliceX, fract(sliceX+sliceW)) == 1.0){\n                           \n                            vec2 id = floor(uv * 5.0);\n        \n                            // Generate shift amplitude\n                            float shift = amplitude * fbm(uv, int(id * 6.), shift, block);\n                            //float shift = randomRange(vec2(seed, 5234.0 + float(i)), -amplitude, amplitude);\n        \n                            float r = texture2D(texture, vec2(uv.x + shift, uv.y)).r * (1. - shift) ;\n                            float g = texture2D(texture, vec2(uv.x - shift, uv.y)).g * (1. - shift) + rand(id) * shift;\n                            float b = texture2D(texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n        \n                            px = mix(vec4(r, g, b, px.a), px, 0.5);\n                        }\n                        gl_FragColor = px;\n                    }\n                }";t=this.compileShader(e),this.compiledProgram.set("bleed",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.seed,e.seed),this.ctx.uniform1f(t.uniform.amplitude,e.amplitude),this.ctx.uniform1f(t.uniform.block,e.block),this.draw(t)}slice(e){let t=this.compiledProgram.get("slice");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float seed;\n                uniform float amount;\n                uniform float distance;\n                uniform int line;\n\n                //2D (returns 0 - 1)\n                float random2d(vec2 n) { \n                    return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n                }\n                float randomRange (in vec2 sd, in float min, in float max) {\n                    return min + random2d(sd) * (max - min);\n                }\n                \n                // return 1 if v inside 1d range\n                float insideRange(float v, float bottom, float top) {\n                   return step(bottom, v) - step(top, v);\n                }\n                  \n                void main() {\n                  \n                    vec4 px = texture2D(texture, uv);\n\n                    for (float i = 0.0; i < 100.0; i += 1.0) {\n\n                        if(i == amount) break;\n\n                        float sliceY = random2d(vec2(seed, 2035.0 + float(i)));\n                        float sliceX = random2d(vec2(seed, 5234.0 + float(i)));\n\n                        float sliceH = random2d(vec2(seed, 2035.0 - float(i))) * 0.1;\n                        float sliceW = random2d(vec2(seed, 5234.0 + float(i))) * 1.5;\n\n                        float hOffset = randomRange(vec2(seed, 2035.0 + float(i)), -distance*.5, distance*.5);\n                        float wOffset = randomRange(vec2(seed, 5234.0 + float(i)), -distance, distance);\n\n                        vec2 uvOff = uv;\n                        uvOff.x += wOffset;\n                        uvOff.y += hOffset;\n\n                        if(insideRange(uv.y, sliceY, fract(sliceY+sliceH)) == 1.0 && (line == 1 || insideRange(uv.x, sliceX, fract(sliceX+sliceW)) == 1.0)){\n                            px = texture2D(texture, uvOff);\n                        }\n                    }\n                    gl_FragColor = px;\n                }";t=this.compileShader(e),this.compiledProgram.set("slice",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.seed,e.seed),this.ctx.uniform1f(t.uniform.amount,e.amount),this.ctx.uniform1f(t.uniform.distance,e.distance/3),this.ctx.uniform1i(t.uniform.line,e.line?1:0),this.draw(t)}mimicHDR(e){let t=this.compiledProgram.get("mimicHDR");if(!t){const e="\n                precision highp float;\n\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform sampler2D blurMap;\n\n                uniform float amount;\n                uniform float contra;\n                \n                float blendSoftLight(float base, float blend) {\n                    return (blend<0.5)?(2.0*base*blend+base*base*(1.0-2.0*blend)):(sqrt(base)*(2.0*blend-1.0)+2.0*base*(1.0-blend));\n                }\n                vec4 blendSoftLight(vec4 base, vec4 blend) {\n                    return vec4(blendSoftLight(base.r,blend.r),blendSoftLight(base.g,blend.g),blendSoftLight(base.b,blend.b), base.a);\n                }\n\n                float blendOverlay(float base, float blend) {\n                    return base<0.5?(2.0*base*blend):(1.0-2.0*(1.0-base)*(1.0-blend));\n                }\n                vec4 blendOverlay(vec4 base, vec4 blend) {\n                    return vec4(blendOverlay(base.r,blend.r),blendOverlay(base.g,blend.g),blendOverlay(base.b,blend.b), base.a);\n                }\n               \n                void main() {\n                    vec4 px = texture2D(texture, uv);\n                    vec4 blur = texture2D(blurMap, uv);\n\n                    vec4 blend = blendOverlay(px, blur);\n                    blend = mix(blend, blendSoftLight(px, blend), contra);\n\n                    gl_FragColor = mix(px, blend, amount);\n                }";t=this.compileShader(e),this.compiledProgram.set("mimicHDR",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e.amount),this.ctx.uniform1f(t.uniform.contra,e.contra);let s=t.getTextureById("blurMap");s.createTexture(this.ctx,e.blurMap.width,e.blurMap.height),s.uploadData(this.ctx,e.blurMap),this.draw(t)}pixelate(e){let t=this.compiledProgram.get("pixelate");if(!t){const e="\n                precision highp float;\n                varying vec2 uv;\n                uniform vec2 resolution;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                void main() {\n                    float d = 1.0 / amount;\n                    float ar = resolution.x / resolution.y;\n                    float u = floor( uv.x / d ) * d + d*0.5;\n                    d = ar / amount;\n                    float v = floor( uv.y / d ) * d + d*0.5;\n                    gl_FragColor = texture2D(texture, vec2( u, v ) );\n                }";t=this.compileShader(e),this.compiledProgram.set("pixelate",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,4*(100-100*e)),this.ctx.uniform2f(t.uniform.resolution,this.width,this.height),this.draw(t)}scanlines(e){let t=this.compiledProgram.get("scanlines");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n                uniform float size;\n\n                uniform int colorize;\n                uniform int direction;\n\n                void main() {\n                    \n                    vec2 sl;\n                    vec4 scanlines;\n                    vec4 color = texture2D(texture, uv);\n\n                    if(direction == 0) {\n                        sl = vec2(sin(uv.y * size), cos(uv.y * size)) * amount;\n                    }\n                    else {\n                        sl = vec2(sin(uv.x * size), cos(uv.x * size)) * amount;\n                    }\n\n                    if(colorize == 1) {\n                        scanlines = vec4(sl.x, sl.y, sl.x, 1.0);\n                    } \n                    else {\n                        scanlines = vec4(sl.x, sl.x, sl.x, 1.0);\n                    }\n\n                    gl_FragColor = vec4(color.r + scanlines.r, color.g + scanlines.g, color.b + scanlines.b, color.a);\n                }";t=this.compileShader(e),this.compiledProgram.set("scanlines",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.size,e.direction?Math.round(this.height/e.size):Math.round(this.width/e.size)),this.ctx.uniform1f(t.uniform.amount,e.amount),this.ctx.uniform1i(t.uniform.colorize,e.colorize?1:0),this.ctx.uniform1i(t.uniform.direction,e.direction?1:0),this.draw(t)}mosaic(e){let t=this.compiledProgram.get("mosaic");if(!t){const e="\n                precision highp float;\n                varying vec2 uv;\n                \n                uniform sampler2D texture;\n                uniform vec2 num;\n                \n                void main()\n                {\n                    vec2 uv = uv;\n                    vec2 uv2 = floor(uv*num)/num;\n                    uv -= uv2;\n                    uv *= num;\n                    gl_FragColor = texture2D(texture, \n                                    uv2 + vec2(step(1.0-uv.y,uv.x)/(2.0*num.x),\n                                    step(uv.x,uv.y)/(2.0*num.y)));\n                }";t=this.compileShader(e),this.compiledProgram.set("mosaic",t)}let s=Math.round(100*(1-e)),i=Math.round(this.height/this.width*s);this.ctx.useProgram(t.program),this.ctx.uniform2f(t.uniform.num,s,i),this.draw(t)}bokeh(e){let t=this.compiledProgram.get("bokeh-"+e.type);if(!t){let s="";switch(e.type){case"circle":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform float size;\n                        uniform vec2 px;\n                        \n                        #define PI 3.1415926538\n                        #define KNL 100.0\n\n                        void main() {\n\n                            float spread = floor(size*30.0 + 0.5) + 1.0;\n                            float myx = spread*2.0;\n\n                            vec3 mcol = vec3(0.0);\n                            vec3 avg  = vec3(0.0);                          \n                            float rc = 0.0;\n\n                            for(float x = 0.0; x < KNL; x += 1.0)\n                            {\n                                if(x == myx) break;\n        \n                                for(float y = 0.0; y < KNL; y += 1.0)\n                                {\n                                    if(y == myx) break;\n        \n                                    float l = length(vec2(x-spread,y-spread));\n                                    if(l <= spread)\n                                    {\n                                        vec3 col = texture2D(texture, uv + px * vec2(x-spread,y-spread) * 2.0).rgb;\n                                        mcol = max(mcol, col);\n                                        avg += col;\n                                        rc += 1.0;\n                                    }\n                                }\n                            }\n                            gl_FragColor = vec4(mix(avg / rc, mcol, amount), 1.0);\n                        }";break;case"square":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform float size;\n                        uniform vec2 px;\n\n                        #define KNL 100.0\n\n                        void main() {\n\n                            float spread = floor(size*30.0 + 0.5) + 1.0;\n                            float myx = spread*2.0;\n\n                            vec3 mcol = vec3(0.0);\n                            vec3 avg = vec3(0.0);\n        \n                            for(float x = 0.0; x < KNL; x += 1.0)\n                            {\n                                if(x == myx) break;\n        \n                                for(float y = 0.0; y < KNL; y += 1.0)\n                                {\n                                    if(y == myx) break;\n        \n                                    vec3 col = texture2D(texture, uv + px * vec2(x-spread,y-spread) * 2.0).rgb;\n                                    mcol = max(mcol, col);\n                                    avg += col;\n                                }\n                            }\n                            gl_FragColor = vec4(mix(avg / (myx * myx), mcol, amount), 1.0);\n                        }";break;case"hexagon":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform float size;\n                        uniform vec2 px;\n                        \n                        #define PI 3.1415926538\n                        #define PI2 6.283185308\n                        #define KNL 100.0\n\n                        void main() {\n\n                            float spread = floor(size*30.0 + 0.5) + 1.0;\n                            float myx = spread*2.0;\n\n                            vec3 mcol = vec3(0.0);\n                            vec3 avg  = vec3(0.0);\n                            float rc = 0.0;\n        \n                            for(float x = 0.0; x < KNL; x += 1.0)\n                            {\n                                if(x == myx) break;\n        \n                                for(float y = 0.0; y < KNL; y += 1.0)\n                                {\n                                    if(y == myx) break;\n        \n                                    vec2 pt = vec2(x-spread, y-spread);\n        \n                                    float an = 0.33 + atan(pt.x, pt.y); //0.33 Angle\n                                    float ngon = cos(an - (PI2 * floor((PI + 6.0 * an) / PI2)) / 6.0) / cos(PI / 6.0); //6 corners\n                                    float ngonSdf = ngon * length(pt) - spread;\n                            \n                                    if(ngonSdf <= 0.0) {\n                                        vec3 col = texture2D(texture, uv + px * vec2(x-spread, y-spread) * 2.0).rgb;\n                                        mcol = max(mcol, col);\n                                        avg += col;\n                                        rc += 1.0;\n                                    }\n                                }\n                            }\n                            gl_FragColor = vec4(mix(avg / rc, mcol, amount), 1.0);\n                        }";break;case"cross":s="\n                        precision highp float;\n                        varying vec2 uv;\n                        uniform sampler2D texture;\n                        uniform float amount;\n                        uniform float size;\n                        uniform vec2 px;\n                        \n                        #define KNL 100.0\n\n                        void main() {\n\n                            float spread = floor(size*30.0 + 0.5) + 1.0;\n        \n                            vec3 mcol = vec3(0.0);\n                            vec3 avg  = vec3(0.0);\n                            float rc = 0.0;\n        \n                            float myx = spread*2.0;\n                            float low = spread*.7;\n                            float high = spread*1.3;\n        \n                            for(float x = 0.0; x < KNL; x += 1.0)\n                            {\n                                if(x == myx) break;\n        \n                                for(float y = 0.0; y < KNL; y += 1.0)\n                                {\n                                    if(y == myx) break;\n        \n                                    if((y > low && y < high) || (x > low && x < high))\n                                    {\n                                        vec3 col = texture2D(texture, uv + px * vec2(x-spread,y-spread) * 2.0).rgb;\n                                        mcol = max(mcol, col);\n                                        avg += col;\n                                        rc += 1.0;\n                                    }\n                                }\n                            }\n                            gl_FragColor = vec4(mix(avg / rc, mcol, amount), 1.0);\n                        }"}t=this.compileShader(s),this.compiledProgram.set("bokeh-"+e.type,t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.size,e.size),this.ctx.uniform1f(t.uniform.amount,e.amount),this.ctx.uniform2f(t.uniform.px,1/this.width,1/this.height),this.draw(t)}art(e){let t=this.compiledProgram.get("art");if(!t){let e=["precision highp float;","uniform sampler2D texture;","varying vec2 uv;","void main() {","vec4 color, tmp, add;","vec2 uv = uv + vec2( sin( uv.y * 100.0 ), sin( uv.x * 100.0 )) * 0.0005;","color = texture2D( texture, uv );","add = tmp = texture2D( texture, uv + vec2( 0.0015, 0.0015 ));","if( tmp.r < color.r ) color = tmp;","add += tmp = texture2D( texture, uv + vec2( -0.0015, 0.0015 ));","if( tmp.r < color.r ) color = tmp;","add += tmp = texture2D( texture, uv + vec2( -0.0015, -0.0015 ));","if( tmp.r < color.r ) color = tmp;","add += tmp = texture2D( texture, uv + vec2( 0.0015, -0.0015 ));","if( tmp.r < color.r ) color = tmp;","add += tmp = texture2D( texture, uv + vec2( 0.002, 0.0 ));","if( tmp.r < color.r ) color = tmp;","add += tmp = texture2D( texture, uv + vec2( -0.002, 0.0 ));","if( tmp.r < color.r ) color = tmp;","add += tmp = texture2D( texture, uv + vec2( 0, 0.002 ));","if( tmp.r < color.r ) color = tmp;","add += tmp = texture2D( texture, uv + vec2( 0, -0.002 ));","if( tmp.r < color.r ) color = tmp;","uv = (uv - vec2(0.5)) * vec2(0.7);","gl_FragColor = vec4(mix(color.rgb * color.rgb * vec3(1.8), color.ggg * color.ggg - vec3(0.4), vec3(dot(uv, uv))), 1.0);","}"].join("\n");t=this.compileShader(e),this.compiledProgram.set("art",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.screenWidth,this.canvas.width),this.ctx.uniform1f(t.uniform.screenHeight,this.canvas.height),this.ctx.uniform1f(t.uniform.sampleDistance,e),this.ctx.uniform1f(t.uniform.waveFactor,.01),this.draw(t)}melt(e){let t=this.compiledProgram.get("melt");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n                uniform vec2 center;\n              \n                float rand(vec2 co){\n                    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n                }\n                vec3 mod289(vec3 x) {\n                    return x - floor(x * (1.0 / 289.0)) * 289.0;\n                }\n                  \n                vec2 mod289(vec2 x) {\n                    return x - floor(x * (1.0 / 289.0)) * 289.0;\n                }\n                  \n                vec3 permute(vec3 x) {\n                    return mod289(((x*34.0)+1.0)*x);\n                }\n                  \n                float snoise(vec2 v) {\n\n                    const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                                        0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                                       -0.577350269189626,  // -1.0 + 2.0 * C.x\n                                        0.024390243902439); // 1.0 / 41.0\n                  // First corner\n                    vec2 i  = floor(v + dot(v, C.yy) );\n                    vec2 x0 = v -   i + dot(i, C.xx);\n                  \n                  // Other corners\n                    vec2 i1;\n                    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n                    vec4 x12 = x0.xyxy + C.xxzz;\n                    x12.xy -= i1;\n                  \n                  // Permutations\n                    i = mod289(i); // Avoid truncation effects in permutation\n                    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n                          + i.x + vec3(0.0, i1.x, 1.0 ));\n                  \n                    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n                    m = m*m ;\n                    m = m*m ;\n                                   \n                    vec3 x = 2.0 * fract(p * C.www) - 1.0;\n                    vec3 h = abs(x) - 0.5;\n                    vec3 ox = floor(x + 0.5);\n                    vec3 a0 = x - ox;\n                  \n                    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n                  \n                  // Compute final noise value at P\n                    vec3 g;\n                    g.x  = a0.x  * x0.x  + h.x  * x0.y;\n                    g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n                    return 130.0 * dot(m, g);\n                }\n\n                void main() {\n                    vec4 px = texture2D(texture, uv);\n                    \n                    float opacity = 0.0;\n\n                    if(amount == 0.0 || amount == 1.0) {\n                        opacity = amount;\n                    } \n                    else {\n                        if(center.x == 0.5) {\n                            float dist = distance(center, uv)- amount*exp(snoise(vec2(uv.x, 0.0)));\n                            float r = amount - rand(vec2(uv.x, 0.1));\n                            opacity = dist <= r ? 1.0 : (amount*amount*amount);\n                        }\n                        else {\n                            float dist = distance(center, uv)- amount*exp(snoise(vec2(0.0, uv.y)));\n                            float r = amount - rand(vec2(0.1, uv.y));\n                            opacity = dist <= r ? 1.0 : (amount*amount*amount);\n                        }   \n                    }\n                    gl_FragColor = vec4(px.rgb, px.a * (1.0 - opacity));\n                }";t=this.compileShader(e),this.compiledProgram.set("melt",t)}this.ctx.useProgram(t.program);let s=new i.A(.5,.5);switch(e.direction){case"down":s.y=0;break;case"right":s.x=1;break;case"left":s.x=0;break;case"up":s.y=1}this.ctx.uniform2f(t.uniform.center,s.x,s.y),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}gooey(e){let t=this.compiledProgram.get("gooey");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n              \n                // http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\n                float random(vec2 co) {\n\n                    highp float a = 12.9898; //seed;\n                    highp float b = 78.233;\n                    highp float c = 43758.5453;\n                    highp float dt= dot(co.xy ,vec2(a,b));\n                    highp float sn= mod(dt,3.14);\n                    return fract(sin(sn) * c);\n                }\n\n                // 2D Noise based on Morgan McGuire @morgan3d\n                // https://www.shadertoy.com/view/4dS3Wd\n                float noise (in vec2 st) {\n\n                    vec2 i = floor(st);\n                    vec2 f = fract(st);\n\n                    // Four corners in 2D of a tile\n                    float a = random(i);\n                    float b = random(i + vec2(1.0, 0.0));\n                    float c = random(i + vec2(0.0, 1.0));\n                    float d = random(i + vec2(1.0, 1.0));\n\n                    // Cubic Hermine Curve.  Same as SmoothStep()\n                    vec2 u = f*f*(3.0-2.0*f);\n\n                    // Mix 4 coorners porcentages\n                    return mix(a, b, u.x) +\n                            (c - a)* u.y * (1.0 - u.x) +\n                            (d - b) * u.x * u.y;\n                }\n\n                void main() {\n\n                    vec4 col = texture2D(texture, uv);\n                    float n = noise(uv * 10.0); //scale\n                    \n                    float p = mix(-0.01, 1.0 + 0.01, amount);\n                    float lower = p - 0.01;\n                    float higher = p + 0.01;\n                    \n                    float opacity = smoothstep(lower, higher, n);\n                    \n                    gl_FragColor = vec4(col.rgb, col.a * opacity);\n                }";t=this.compileShader(e),this.compiledProgram.set("gooey",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}block(e){let t=this.compiledProgram.get("block");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n              \n                float rand (vec2 co) {\n                    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n                }\n\n                void main() {\n                    vec4 col = texture2D(texture, uv);\n                    \n                    float r = rand(floor(vec2(10.0) * uv)); //size\n                    float opacity = smoothstep(0.0, -0.5, r - (amount * (1.0 + 0.5)));\n                   \n                    gl_FragColor = vec4(col.rgb, col.a * (1.0 - opacity));\n                }";t=this.compileShader(e),this.compiledProgram.set("block",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}curtain(e){let t=this.compiledProgram.get("curtain-"+e.direction);if(!t){let s="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n              \n                void main() {\n                    vec2 p = uv;\n                    vec4 col = vec4(0);\n                ";"horizontal"===e.direction?s+="                    \n                        if(2.0 * abs(p.x-0.5) - amount > 0.0) {\n                            p = p + (p.x > 0.5 ? -1.0 : 1.0) * vec2(0.5*amount, 0.0);\n                            col = texture2D(texture, p);\n                        }\n                    ":s+="\n                        if(2.0 * abs(p.y-0.5) - amount > 0.0) {\n                            p = p + (p.y > 0.5 ? -1.0 : 1.0) * vec2(0.0, 0.5*amount);\n                            col = texture2D(texture, p);\n                        }\n                    ",s+="\n                    gl_FragColor = col;\n                }",t=this.compileShader(s),this.compiledProgram.set("curtain-"+e.direction,t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}blinds(e){let t=this.compiledProgram.get("blinds-"+e.direction);if(!t){let s="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n              \n                void main() {\n                    vec4 col = texture2D(texture, uv);\n                ";switch(e.direction){case"up":s+="float opacity = step(smoothstep(-0.5, 0.0, (1.0 - uv.y) - amount * (1.0 + 0.5)), fract(12.0 * uv.y));";break;case"right":s+="float opacity = step(smoothstep(-0.5, 0.0, (1.0 - uv.x) - amount * (1.0 + 0.5)), fract(12.0 * uv.x));";break;case"left":s+="float opacity = step(smoothstep(-0.5, 0.0, uv.x - amount * (1.0 + 0.5)), fract(12.0 * uv.x));";break;case"down":s+="float opacity = step(smoothstep(-0.5, 0.0, uv.y - amount * (1.0 + 0.5)), fract(12.0 * uv.y));"}s+="\n                    gl_FragColor = vec4(col.rgb, col.a * (1.0 - opacity));\n                }",t=this.compileShader(s),this.compiledProgram.set("blinds-"+e.direction,t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}wipe(e){let t=this.compiledProgram.get("wipe-"+e.direction);if(!t){let s="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n              \n                void main() {\n                    vec4 col = texture2D(texture, uv);\n                ";switch(e.direction){case"down":s+="float opacity = 1.0 - step(uv.y, amount);";break;case"right":s+="float opacity = step(uv.x, 1.0 - amount);";break;case"left":s+="float opacity = 1.0 - step(uv.x, amount);";break;case"up":s+="float opacity = step(uv.y, 1.0 - amount);"}s+="\n                    gl_FragColor = vec4(col.rgb, col.a * opacity);\n                }",t=this.compileShader(s),this.compiledProgram.set("wipe-"+e.direction,t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}swipe(e){let t=this.compiledProgram.get("swipe-"+e.direction);if(!t){let s="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n                uniform vec4 color; \n              \n                void main() {\n\n                ";switch(e.direction){case"down":s+="\n                        if(amount > 0.5) gl_FragColor = vec4(color.rgb, 1.0 - step(1.0 + uv.y, amount*2.0));\n                        else gl_FragColor = step(uv.y, amount*2.0) == 1.0 ? color : texture2D(texture, uv);\n                    }";break;case"right":s+="\n                        if(amount > 0.5) gl_FragColor = vec4(color.rgb, 1.0 - step(2.0 - uv.x, amount*2.0));\n                        else gl_FragColor = step(1.0 - uv.x, amount*2.0) == 1.0 ? color : texture2D(texture, uv);\n                    }";break;case"left":s+="\n                        if(amount > 0.5) gl_FragColor = vec4(color.rgb, 1.0 - step(1.0 + uv.x, amount*2.0));\n                        else gl_FragColor = step(uv.x, amount*2.0) == 1.0 ? color : texture2D(texture, uv);\n                    }";break;case"up":s+="\n                        if(amount > 0.5) gl_FragColor = vec4(color.rgb, 1.0 - step(2.0 - uv.y, amount*2.0));\n                        else gl_FragColor = step(1.0 - uv.y, amount*2.0) == 1.0 ? color : texture2D(texture, uv);\n                    }"}t=this.compileShader(s),this.compiledProgram.set("swipe-"+e.direction,t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e.amount),this.ctx.uniform4f(t.uniform.color,e.color.r/255,e.color.g/255,e.color.b/255,1),this.draw(t)}slot(e){let t=this.compiledProgram.get("slot");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n                uniform vec2 dir;\n\n                void main() {\n                   \n                    vec2 p = uv + amount * sign(dir);\n                    vec2 f = fract(p);\n                    float opacity = step(0.0, p.y) * step(p.y, 1.0) * step(0.0, p.x) * step(p.x, 1.0);\n                   \n                    vec4 col = texture2D(texture, p);\n                    gl_FragColor = vec4(col.rgb, col.a * opacity);\n                }";t=this.compileShader(e),this.compiledProgram.set("slot",t)}let s=new i.A(0,0);switch(e.direction){case"down":s.y=-1;break;case"right":s.x=1;break;case"left":s.x=-1;break;case"up":s.y=1}this.ctx.useProgram(t.program),this.ctx.uniform2f(t.uniform.dir,s.x,s.y),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}marquee(e){let t=this.compiledProgram.get("marquee");if(!t){let s="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n                uniform vec2 dir;\n\n                void main() {\n                   \n                    vec2 p = uv + amount * sign(dir);\n                ";switch(e.direction){case"up":s+="if(p.y < 0.0) p.y += 1.0;";break;case"down":s+="if(p.y > 1.0) p.y -= 1.0;";break;case"right":s+="if(p.x < 0.0) p.x += 1.0;";break;case"left":s+="if(p.x > 1.0) p.x -= 1.0;"}s+="\n         \n                    gl_FragColor = texture2D(texture, p);\n                }",t=this.compileShader(s),this.compiledProgram.set("marquee",t)}let s=new i.A(0,0);switch(e.direction){case"up":s.y+=-1;break;case"down":s.y+=1;break;case"right":s.x+=-1;break;case"left":s.x+=1}this.ctx.useProgram(t.program),this.ctx.uniform2f(t.uniform.dir,s.x,s.y),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}split(e){let t=this.compiledProgram.get("split-"+e.direction);if(!t){let s="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n                uniform float sections;\n\n                void main() {\n                    vec2 p = uv;\n                ";"horizontal"===e.direction?s+="float num = floor(uv.y*sections);\n                    float odd = num - (2.0 * floor(num/2.0));\n                    p.x = uv.x + amount*sign(odd-0.5);\n             \n                    float opacity = (p.x * (1.0-step(odd,0.5)*2.0) - sign(odd) > 0.0) ? 0.0 : 1.0;\n                    ":s+="float num = floor(uv.x*sections);\n                    float odd = num - (2.0 * floor(num/2.0));\n                    p.y = uv.y + amount*sign(odd-0.5);\n             \n                    float opacity = (p.y * (1.0-step(odd,0.5)*2.0) - sign(odd) > 0.0) ? 0.0 : 1.0;\n                    ",s+="vec4 col = texture2D(texture, p);\n                    gl_FragColor = vec4(col.rgb, col.a * opacity);\n                }",t=this.compileShader(s),this.compiledProgram.set("split-"+e.direction,t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.sections,e.sections),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}circular(e){let t=this.compiledProgram.get("circular");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                const float PI = 3.141592653589;\n\n                void main() {\n                    vec4 col = texture2D(texture, uv);\n\n                    vec2 p = uv*2.-1.;\n                    float opacity = smoothstep(0.0, 0.5, atan(p.y,p.x) - (amount-.5) * PI * 2.5);\n                   \n                    gl_FragColor = vec4(col.rgb, col.a * opacity);\n                }";t=this.compileShader(e),this.compiledProgram.set("circular",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}ripple(e){let t=this.compiledProgram.get("ripple");if(!t){let e="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                void main() {\n                    \n                    vec2 dir = uv - vec2(.5);\n                    float dist = length(dir);\n                    vec2 offset = dir * (sin(amount * dist * 100.0 - amount * 40.0) + 0.5) / 30.0; //100 amp 40 speed\n\n                    float opacity = smoothstep(0.2, 1.0, amount);\n\n                    vec4 px = texture2D(texture, uv + offset);                   \n                    gl_FragColor = vec4(px.rgb, px.a * (1.0 - opacity));\n                }";t=this.compileShader(e),this.compiledProgram.set("ripple",t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e),this.draw(t)}warp(e){let t=this.compiledProgram.get("warp-"+e.direction);if(!t){let s="\n                precision highp float;\n                varying vec2 uv;\n                uniform sampler2D texture;\n                uniform float amount;\n\n                void main() {\n            ";switch(e.direction){case"up":s+="float x = smoothstep(0.0, 1.0, (amount*2.0 + uv.y-1.0)); vec4 col = texture2D(texture, (uv-0.5)*(1.0-x)+0.5);";break;case"right":s+="float x = smoothstep(0.0, 1.0, (amount*2.0 + uv.x-1.0)); vec4 col = texture2D(texture, (uv-0.5)*(1.0-x)+0.5);";break;case"left":s+="float x = smoothstep(0.0, 1.0, ((1.0-amount)*2.0 + uv.x-1.0)); vec4 col = texture2D(texture, (uv-0.5)*(x)+0.5);";break;case"down":s+="float x = smoothstep(0.0, 1.0, ((1.0-amount)*2.0 + uv.y-1.0)); vec4 col = texture2D(texture, (uv-0.5)*(x)+0.5);"}s+="\n                gl_FragColor = vec4(col.rgb, col.a * (1.0 - amount));\n            }",t=this.compileShader(s),this.compiledProgram.set("warp-"+e.direction,t)}this.ctx.useProgram(t.program),this.ctx.uniform1f(t.uniform.amount,e.amount),this.draw(t)}}class y{constructor(e,t,s=!1){this.type=e,this.value=t,this.sidekick=s}}},23580:(e,t,s)=>{s.d(t,{A:()=>b});var i=s(42268),a=s(54738),n=s(40963),r=s(75770),o=s(22866),h=s(26651),c=s(86755),l=s(97266),d=s(21742),p=s(15818),u=s(29755),m=s(8689),g=s(81937),y=s(82042),v=s(37771);class f extends v.A{constructor(e,t){super(t,(0,d.A)("styles"),!0),this.updateInputs=()=>{var e,t;(0,i.Ay)("frame-outline").checked=this.selected.frameSettings.outline,this.outlineColor.setColor(null!==(e=this.selected.frameSettings.outlineColor)&&void 0!==e?e:"#555555"),this.outlineSize.setValue(this.selected.frameSettings.outlineSize),(0,i.Ay)("frame-shadow").checked=this.selected.frameSettings.shadow,this.shadowColor.setColor(null!==(t=this.selected.frameSettings.shadowColor)&&void 0!==t?t:"#000000"),this.shadowBlur.setValue(this.selected.frameSettings.shadowBlur),this.shadowOpacity.setValue(this.selected.frameSettings.shadowOpacity),this.shadowDistance.setValue(this.selected.frameSettings.shadowDistance),this.shadowDirection.setValue(this.selected.frameSettings.shadowDirection)},this.changeOutlineState=()=>{const e=this.selected.frameSettings.clone();this.changeOutline(),this.stage.history.add({type:"frameSettings",kind:"outline",layer:this.selected,settings:e})},this.changeOutline=()=>{let e=(0,i.Ay)("frame-outline").checked,t=this.outlineColor.getColor().toHEX(),s=this.outlineSize.getValue();this.selected.setOutline(e,s,t),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeOutlineColor=e=>{const t=this.selected.frameSettings.clone();this.changeOutline(),this.stage.history.add({type:"frameSettings",kind:"outline",layer:this.selected,settings:t})},this.changeShadowState=()=>{const e=this.selected.frameSettings.clone();this.changeShadow(),this.stage.history.add({type:"frameSettings",kind:"shadow",layer:this.selected,settings:e})},this.changeShadow=()=>{this.selected.setShadow((0,i.Ay)("frame-shadow").checked,this.shadowBlur.getValue(),this.shadowOpacity.getValue(),this.shadowColor.getColor().toHEX(),this.shadowDistance.getValue(),this.shadowDirection.getValue()),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeShadowColor=e=>{const t=this.selected.frameSettings.clone();this.changeShadow(),this.stage.history.add({type:"frameSettings",kind:"shadow",layer:this.selected,settings:t})},this.cleanUp=()=>{this.selected=void 0,this.outlineColor.cleanUp(),this.outlineColor=void 0,this.shadowColor.cleanUp(),this.shadowColor=void 0,this.outlineSize.cleanUp(),this.shadowBlur.cleanUp(),this.shadowOpacity.cleanUp(),this.shadowDistance.cleanUp(),this.shadowDirection.cleanUp(),(0,i.Ay)("frame-outline").removeEventListener("change",this.changeOutlineState,!1),(0,i.Ay)("frame-shadow").removeEventListener("change",this.changeShadowState,!1),this.superCleanUp()},this.stage=e,this.selected=this.stage.fresco.getSelected(),this.content.id="frame-style-content",this.content.style.height="333px",this.content.style.overflow="hidden",this.content.style.paddingBottom="4px",this.setContent(`\n            <section>\n                <div>\n                    <input type="checkbox" class="toggle-check" id="frame-outline" />\n                    <label class="switch subline top-4" for="frame-outline">${(0,d.A)("outline")}<span></span><span class="arrow"></span></label>\n                    <div class="toggle">\n                        <label class="split">${(0,d.A)("color")}<div id="frame-outline-color"></div></label>\n                        <div id="frame-outline-size" class="top-10"></div>\n                    </div>\n                </div>\n                <div>\n                    <input type="checkbox" class="toggle-check" id="frame-shadow" />\n                    <label class="switch subline top-10" for="frame-shadow">${(0,d.A)("shadow")}<span></span><span class="arrow"></span></label>\n                    <div class="toggle">\n                        <label class="split">${(0,d.A)("color")}<div id="frame-shadow-color"></div></label>\n                        <div id="frame-shadow-blur" class="top-10"></div>\n                        <div id="frame-shadow-distance"></div>\n                        <div id="frame-shadow-direction"></div>\n                        <div id="frame-shadow-opacity"></div>\n                    </div>\n                </div>\n            </section>\n        `),this.outlineColor=new m.A("frame-outline-color",p.A.fromHEX(u.Ay.altColor),this.changeOutlineColor),this.shadowColor=new m.A("frame-shadow-color",p.A.fromHEX(u.Ay.altColor),this.changeShadowColor);let s=this.selected.frameSettings;const a={onStart:()=>{s=this.selected.frameSettings.clone()},labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,100)/100};this.outlineSize=new y.A("frame-outline-size",Object.assign(Object.assign({},a),{label:(0,d.A)("size"),range:[.01,1],defaultValue:.3,step:.01,onChange:()=>this.changeOutline(),labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,100)/100,onEnd:()=>{this.stage.history.add({type:"frameSettings",kind:"outline",layer:this.selected,settings:s})}}));const n=Object.assign(Object.assign({},a),{range:[0,1],onChange:()=>this.changeShadow(),onEnd:()=>{this.stage.history.add({type:"frameSettings",kind:"shadow",layer:this.selected,settings:s})}});this.shadowBlur=new y.A("frame-shadow-blur",Object.assign(Object.assign({},n),{label:(0,d.A)("blur")})),this.shadowOpacity=new y.A("frame-shadow-opacity",Object.assign(Object.assign({},n),{label:(0,d.A)("opacity"),defaultValue:1})),this.shadowDistance=new y.A("frame-shadow-distance",Object.assign(Object.assign({},n),{label:(0,d.A)("distance"),range:[0,1]})),this.shadowDirection=new y.A("frame-shadow-direction",Object.assign(Object.assign({},n),{label:(0,d.A)("direction"),range:[0,360],defaultValue:180,labelFormat:e=>e.toFixed(1),labelParse:e=>parseInt(e,10)})),(0,i.Ay)("frame-outline").addEventListener("change",this.changeOutlineState,!1),(0,i.Ay)("frame-shadow").addEventListener("change",this.changeShadowState,!1),this.updateInputs(),new g.A(this.content)}}class b extends r.A{constructor(e){super("frame",e),this.stage=e,this.showFrameStyles=()=>{new f(this.stage,(0,i.Ay)("frame-styles"))},this.keyDown=e=>{"Shift"!==e.key||this.isShiftDown||(this.isShiftDown=!0,this.reform.constrain=!1)},this.keyUp=e=>{"Shift"===e.key&&this.isShiftDown&&(this.isShiftDown=!1,this.reform.constrain=!0)},this.previewShape=e=>{this.selected.setPath(e,!0),window.requestAnimationFrame(()=>this.stage.render())},this.selectShape=e=>{const t=this.selected.frameSettings.clone();this.selected.setPath(e),this.stage.history.add({type:"frameSettings",kind:"shape",layer:this.selected,settings:t}),window.requestAnimationFrame(()=>this.stage.render())},this.layerSelect=()=>{if(this.selected&&this.selected!==this.stage.fresco.getSelected()&&(this.selected.editMode=!1,this.stage.history.commitTransaction()),!this.stage.fresco.isSelectedType(o.A.TYPE_FRAME))return(0,i.Ay)("frame-settings").style.display="none",(0,i.Ay)("frame-no-layer").style.display="flex",void(this.selected=void 0);(0,i.Ay)("frame-settings").style.display="flex",(0,i.Ay)("frame-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.shapePod.setPath(this.selected.frameSettings.clip)},this.toggle=()=>{this.selected.editMode||this.selected.canvas?(this.selected.editMode=!this.selected.editMode,document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render"))):this.stage.notify("frameNoContent")},this.reformDown=(e,t)=>{this.downPoint=e,this.usedtobe=t,this.stage.coating.freeze(!0),this.addMoveListeners()},this.move=e=>{const t=this.stage.translateToRect(this.downPoint,e,this.isShiftDown,!0);t.width>0&&t.height>0&&this.drawframe(t.topLeft(),t.bottomRight()),document.dispatchEvent(new CustomEvent("legend",{detail:"W: "+Math.round(t.width/this.stage.zoom)+"  H: "+Math.round(t.height/this.stage.zoom)}))},this.drawframe=(e,t)=>{const s=this.stage.coating.ctx;s.save(),s.lineWidth=2,s.strokeStyle=a.bi,s.clearRect(0,0,s.canvas.width,s.canvas.height),s.strokeRect(e.x,e.y,t.x-e.x,t.y-e.y),s.lineWidth=1,s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y),s.moveTo(t.x,e.y),s.lineTo(e.x,t.y),s.closePath(),s.stroke()},this.up=async e=>{if(this.stage.coating.clear(!0),this.stage.coating.freeze(!1),this.removeMoveListeners(),document.dispatchEvent(new CustomEvent("legend",{detail:"stop"})),this.downPoint.distanceTo(e)>10){const t=this.stage.translateToRect(this.downPoint,e,this.isShiftDown,!1);this.addFrame(t)}else this.usedtobe||await new l.A("Add Frame","Do you want to add a new Frame layer?","Add").init()&&this.addFrameEvent()},this.addFrameEvent=()=>{let e=this.stage.getViewPort(),t=new n.A(Math.round(e.x+e.width/4),Math.round(e.y+e.height/4),Math.round(e.width/2),Math.round(e.width/2));this.addFrame(t)},this.addFrame=e=>{this.stage.addFrame(e)},this.deleteLayer=()=>this.stage.deleteLayer(),this.duplicateLayer=()=>this.stage.duplicateLayer(),this.cleanUp=()=>{var e,t;this.stage.history.commitTransaction(),null===(e=this.reform)||void 0===e||e.cleanUp(),this.reform=void 0,this.shapePod.cleanUp(),this.shapePod=void 0,null===(t=this.stage)||void 0===t||t.coating.wake(),(0,i.Ay)("frame-toggle").removeEventListener("click",this.toggle,!1),(0,i.Ay)("frame-add-button").removeEventListener("click",this.addFrameEvent,!1),(0,i.Ay)("frame-browse").removeEventListener("click",this.stage.browseFrameImage,!1),(0,i.Ay)("frame-add").removeEventListener("click",this.addFrameEvent,!1),(0,i.Ay)("frame-delete").removeEventListener("click",this.deleteLayer,!1),(0,i.Ay)("frame-duplicate").removeEventListener("click",this.duplicateLayer,!1),(0,i.Ay)("frame-styles").removeEventListener("click",this.showFrameStyles,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1)},this.stage.coating.sleep(),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),(0,i.Ay)("frame-toggle").addEventListener("click",this.toggle,!1),(0,i.Ay)("frame-add-button").addEventListener("click",this.addFrameEvent,!1),(0,i.Ay)("frame-browse").addEventListener("click",this.stage.browseFrameImage,!1),(0,i.Ay)("frame-add").addEventListener("click",this.addFrameEvent,!1),(0,i.Ay)("frame-delete").addEventListener("click",this.deleteLayer,!1),(0,i.Ay)("frame-duplicate").addEventListener("click",this.duplicateLayer,!1),(0,i.Ay)("frame-styles").addEventListener("click",this.showFrameStyles,!1),this.reform=new h.A(e,"FRAME"),this.reform.proxy=this.reformDown,this.shapePod=new c.A("frame-shape",this.selectShape,this.previewShape),this.layerSelect()}}},24491:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDSRequestorPriorAuthenticationInfo=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ThreeDSRequestorPriorAuthenticationInfo=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"threeDSReqPriorAuthData",baseName:"threeDSReqPriorAuthData",type:"string"},{name:"threeDSReqPriorAuthMethod",baseName:"threeDSReqPriorAuthMethod",type:"ThreeDSRequestorPriorAuthenticationInfo.ThreeDSReqPriorAuthMethodEnum"},{name:"threeDSReqPriorAuthTimestamp",baseName:"threeDSReqPriorAuthTimestamp",type:"string"},{name:"threeDSReqPriorRef",baseName:"threeDSReqPriorRef",type:"string"}],function(e){let t;!function(e){e._01="01",e._02="02",e._03="03",e._04="04"}(t=e.ThreeDSReqPriorAuthMethodEnum||(e.ThreeDSReqPriorAuthMethodEnum={}))}(s=t.ThreeDSRequestorPriorAuthenticationInfo||(t.ThreeDSRequestorPriorAuthenticationInfo={}))},24524:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayWithGoogleDonations=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PayWithGoogleDonations=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"PayWithGoogleDonations.FundingSourceEnum"},{name:"googlePayToken",baseName:"googlePayToken",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"PayWithGoogleDonations.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Paywithgoogle="paywithgoogle"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.PayWithGoogleDonations||(t.PayWithGoogleDonations={}))},24609:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LineItem=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.LineItem=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amountExcludingTax",baseName:"amountExcludingTax",type:"number"},{name:"amountIncludingTax",baseName:"amountIncludingTax",type:"number"},{name:"brand",baseName:"brand",type:"string"},{name:"color",baseName:"color",type:"string"},{name:"description",baseName:"description",type:"string"},{name:"id",baseName:"id",type:"string"},{name:"imageUrl",baseName:"imageUrl",type:"string"},{name:"itemCategory",baseName:"itemCategory",type:"string"},{name:"manufacturer",baseName:"manufacturer",type:"string"},{name:"productUrl",baseName:"productUrl",type:"string"},{name:"quantity",baseName:"quantity",type:"number"},{name:"receiverEmail",baseName:"receiverEmail",type:"string"},{name:"size",baseName:"size",type:"string"},{name:"sku",baseName:"sku",type:"string"},{name:"taxAmount",baseName:"taxAmount",type:"number"},{name:"taxPercentage",baseName:"taxPercentage",type:"number"},{name:"upc",baseName:"upc",type:"string"}]},25069:(e,t,s)=>{s.d(t,{A:()=>m});var i=s(21742),a=s(42268),n=s(40963),r=s(54738),o=s(98244),h=s(82042),c=s(15818),l=s(29755),d=s(23556),p=s(8689),u=s(2215);class m extends u.A{constructor(e){const t=e.fresco.getSelected(),u=new n.A(0,0,e.fresco.width,e.fresco.height),m=t.settings.locked&&t.rect.equalTo(u)?0:150;super(e,(0,i.A)("titleStrokeOutline"),!1,!1,m),this.load=async()=>{const e=Promise.resolve().then(s.bind(s,82355)),t=r.D9();await t;const{distanceTransform:i}=await e,n=this.shaders.ctx,h=this.cache.getContext("2d").getImageData(0,0,this.cache.width,this.cache.height),c=i(this.cache.width,this.cache.height,h.data);if(!n.getSupportedExtensions().includes("OES_texture_float"))return alert("sorry, this filter requires float textures"),void(0,o.A)("OES_texture_float");n.getExtension("OES_texture_float");const l=n.createTexture();n.bindTexture(n.TEXTURE_2D,l),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.cache.width,this.cache.height,0,n.ALPHA,n.FLOAT,c),n.bindTexture(n.TEXTURE_2D,null),this.map=l,(0,a.Ay)("stroke-loading").style.display="none",(0,a.Ay)("stroke-controls").style.visibility="visible",this.enableApply(),this.update()},this.update=()=>{const e={size:this.size.getValue(),opacity:this.opacity.getValue(),color:this.color.getColor(),distanceMap:this.map,cutout:this.cutout.checked};this.shaders.addShader("stroke",e.size?e:null),window.requestAnimationFrame(()=>{this.scratch.canvas=this.shaders.apply(this.cache),this.stage.render()})},this.apply=()=>{const e=this.stage.fresco.getSelected(),t=r.TL(r.oM(this.scratch.canvas)).rebase(-this.scratch.rect.x,-this.scratch.rect.y),s=r.ON(e.canvas,t.rebase(e.rect.x,e.rect.y)),i=r.oM(e.mask),a=e.rect.clone();e.extendCanvas(t),this.scratch.drawToLayer(this.selected,this.isMasked?"source-over":"copy",1),e.render(),this.stage.fresco.removeScratch(),this.stage.history.add({type:"bitmapChange",kind:"stroke",layer:e,rect:a,patchRect:t.rebase(e.rect.x,e.rect.y),patch:s,mask:i}),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),this.cleanUp()},this.cancel=()=>{this.stage.fresco.removeScratch(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),this.cleanUp()},this.disableApply(),this.shaders=new d.A,this.kind="stroke",this.stage=e,this.stage.coating.freeze(!0),this.setContent((0,a.T)("div",{className:"dialog-loading"},(0,a.T)("div",{id:"stroke-controls",className:"controls"},(0,a.T)("label",{className:"split"},(0,i.A)("color"),(0,a.T)("div",{id:"stroke-color"})),(0,a.T)("div",{id:"stroke-size",className:"range-box top-15"}),(0,a.T)("div",{id:"stroke-opacity",className:"range-box top-10"}),(0,a.T)("input",{id:"stroke-cutout",type:"checkbox"}),(0,a.T)("label",{className:"top-20 switch",htmlFor:"stroke-cutout"},(0,i.A)("strokeOutlineOnly"),(0,a.T)("span"))),(0,a.T)("div",{id:"stroke-loading",className:"message"},(0,a.T)("label",{className:"working"},(0,i.A)("loading"))))),this.cutout=(0,a.Ay)("stroke-cutout"),this.cutout.onchange=this.update,this.color=new p.A("stroke-color",c.A.fromHEX(l.Ay.mainColor),this.update,this.update),this.size=new h.A("stroke-size",{label:(0,i.A)("size"),range:[1,150],defaultValue:10,step:1,labelParse:e=>parseInt(e,10),onChange:()=>this.update()}),this.opacity=new h.A("stroke-opacity",{label:(0,i.A)("opacity"),defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.position(),this.load()}}},25110:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GooglePayDonations=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.GooglePayDonations=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"GooglePayDonations.FundingSourceEnum"},{name:"googlePayCardNetwork",baseName:"googlePayCardNetwork",type:"string"},{name:"googlePayToken",baseName:"googlePayToken",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"GooglePayDonations.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Googlepay="googlepay"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.GooglePayDonations||(t.GooglePayDonations={}))},25808:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseAdditionalData3DSecure=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponseAdditionalData3DSecure=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"cardHolderInfo",baseName:"cardHolderInfo",type:"string"},{name:"cavv",baseName:"cavv",type:"string"},{name:"cavvAlgorithm",baseName:"cavvAlgorithm",type:"string"},{name:"scaExemptionRequested",baseName:"scaExemptionRequested",type:"string"},{name:"threeds2_cardEnrolled",baseName:"threeds2.cardEnrolled",type:"boolean"}]},26059:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GenericIssuerPaymentMethodDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.GenericIssuerPaymentMethodDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"issuer",baseName:"issuer",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"GenericIssuerPaymentMethodDetails.TypeEnum"}],function(e){let t;!function(e){e.OnlineBankingPl="onlineBanking_PL",e.Eps="eps",e.OnlineBankingSk="onlineBanking_SK",e.OnlineBankingCz="onlineBanking_CZ"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.GenericIssuerPaymentMethodDetails||(t.GenericIssuerPaymentMethodDetails={}))},26241:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IdealDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.IdealDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"issuer",baseName:"issuer",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"IdealDetails.TypeEnum"}],function(e){let t;!function(e){e.Ideal="ideal"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.IdealDetails||(t.IdealDetails={}))},26651:(e,t,s)=>{s.d(t,{A:()=>v});var i=s(42268),a=s(21742),n=s(54738),r=s(53900),o=s(40963),h=s(7245),c=s(41915),l=s(29755),d=s(22866),p=s(21404),u=s(54127),m=s(58489),g=s(39989),y=s(21079);class v{constructor(e,t){this.addPointer=e=>{this.pointers.push(e),this.stage.raster.setPointerCapture(e)},this.removePointer=e=>{for(let t=0;t<this.pointers.length;t++)if(this.pointers[t]===e){this.pointers.splice(t,1);break}this.stage.raster.releasePointerCapture(e)},this.addListener=()=>{this.stage.raster.addEventListener("pointerdown",this.pointerDown,!1),this.stage.raster.addEventListener("pointermove",this.pointerMove,!1),this.stage.raster.addEventListener("pointerup",this.pointerUp,!1),this.raster.addEventListener("dblclick",this.dblClick,!1),this.raster.addEventListener("contextmenu",this.contextMenu,!0),document.addEventListener("viewport-render",this.render,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1)},this.removeListener=()=>{this.ctx.clearRect(0,0,this.raster.width,this.raster.width),this.stage.raster.removeEventListener("pointerdown",this.pointerDown,!1),this.stage.raster.removeEventListener("pointermove",this.pointerMove,!1),this.stage.raster.removeEventListener("pointerup",this.pointerUp,!1),this.raster.removeEventListener("dblclick",this.dblClick,!1),this.raster.removeEventListener("contextmenu",this.contextMenu,!0),document.removeEventListener("viewport-render",this.render,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1)},this.pointerDown=e=>{if(e.stopPropagation(),!this.stage.coating.override&&1===e.button)return this.stage.coating.setPan(this.stage.coating.raster,!0),this.stage.coating.panDown(e),!1;if(this.stage.coating.override||e.button>0)return;this.isShiftDown=e.shiftKey,this.addPointer(e.pointerId);const t=l.Ay.isHDPI?2:1;1===this.pointers.length&&this.down(new c.A(e.offsetX*t,e.offsetY*t),e.shiftKey||e.ctrlKey,e.altKey,e.ctrlKey,e.pointerType)},this.pointerMove=e=>{e.stopPropagation(),this.isShiftDown=e.shiftKey;const t=l.Ay.isHDPI?2:1;this.pointers.length<2&&this.move(new c.A(e.offsetX*t,e.offsetY*t),e.pointerType)},this.pointerUp=e=>{e.stopPropagation(),this.removePointer(e.pointerId);const t=l.Ay.isHDPI?2:1;this.up(new c.A(e.offsetX*t,e.offsetY*t),e.pointerType)},this.supress=e=>{e&&!this.supressed?(this.raster.style.cursor="unset",this.supressed=!0,this.removeListener()):!e&&this.supressed&&(this.supressed=!1,this.addListener())},this.keyDown=e=>{if(!(document.getElementsByClassName("modal").length>0||"INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName||"SELECT"===document.activeElement.nodeName||"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)){let t=e.shiftKey?10:1,s="ArrowLeft"===e.key||"ArrowRight"===e.key?"ArrowLeft"===e.key?-t:t:0,i="ArrowUp"===e.key||"ArrowDown"===e.key?"ArrowUp"===e.key?-t:t:0;this.step(s,i)}},this.keyUp=e=>{},this.contextMenu=e=>{if(l.Ay.canTouch&&this.stage.canvas.clientWidth<420)return;if(e.preventDefault(),e.stopPropagation(),"SIMPLE"===this.mode)return;const t=new c.A(e.clientX-this.raster.offsetLeft,e.clientY-this.raster.offsetTop),s=this.stage.fresco.getSelectedStack();if(0===s.length)return;const i=new Array;if(1===s.length){const e=s[0];e.type===d.A.TYPE_TEXT&&i.push(new y.kt((0,a.A)("titleEditText"),()=>this.dblClick()),new y.kt((0,a.A)("titleRasterizeLayer"),()=>this.stage.rasterize()),new y.kt),e.type!==d.A.TYPE_SHAPE&&e.type!==d.A.TYPE_ELEMENT||i.push(new y.kt((0,a.A)("titleRasterizeLayer"),()=>this.stage.rasterize()),new y.kt),e.type===d.A.TYPE_FRAME&&i.push(new y.kt(e.canvas?(0,a.A)("titleChangeImage"):(0,a.A)("titleAddImage"),()=>this.stage.browseFrameImage()),new y.kt(e.editMode?(0,a.A)("titlePositionFrame"):(0,a.A)("titlePositionContent"),e.canvas?this.dblClick:void 0),new y.kt((0,a.A)("titleAutoFitContent"),e.canvas?()=>this.stage.fitFrameContent():void 0),new y.kt((0,a.A)("titleRasterizeLayer"),e.canvas?()=>this.stage.rasterize():void 0),new y.kt((0,a.A)("titleRemoveFrameImage"),e.canvas?()=>this.stage.deleteLayer(!0):void 0),new y.kt),i.push(new y.kt((0,a.A)("titleHideLayer"),()=>this.stage.changeVisible(e,!1)),new y.kt((0,a.A)("titleLockLayer"),()=>this.stage.changeLocked(e,!0))),e.hasLink()&&i.push(new y.kt((0,a.A)("titleUnlinkLayer"),()=>this.stage.linkLayer())),i.push(new y.kt,new y.kt((0,a.A)("titleCutLayer"),()=>this.stage.cutLayer(),"Ctrl + X"),new y.kt((0,a.A)("titleCopyLayer"),()=>this.stage.copyLayer(),"Ctrl + C"),new y.kt((0,a.A)("titlePasteLayer"),()=>document.dispatchEvent(new CustomEvent("paste-menu")),"Ctrl + V"),new y.kt((0,a.A)("titleDuplicateLayer"),()=>this.stage.duplicateLayer(),"Ctrl + D"),new y.kt((0,a.A)("titleDeleteLayer"),()=>this.stage.deleteLayer(),"DEL")),e instanceof g.A&&e.hasMask()&&i.push(new y.kt,new y.kt((0,a.A)("titleLayerApplyMask"),()=>this.stage.maskApply()),new y.kt((0,a.A)("titleLayerDeleteMask"),()=>this.stage.maskDelete()))}else i.push(new y.kt(this.stage.fresco.isSelectedLinked()?(0,a.A)("titleUnlinkLayers"):(0,a.A)("titleLinkLayers"),()=>this.stage.linkLayer()),new y.kt,new y.kt((0,a.A)("titleCutLayers"),()=>this.stage.cutLayer(),"Ctrl + X"),new y.kt((0,a.A)("titleCopyLayers"),()=>this.stage.copyLayer(),"Ctrl + C"),new y.kt((0,a.A)("titlePasteLayers"),Array.isArray(this.stage.clipboard)?()=>this.stage.pasteLayer():void 0,"Ctrl + V"),new y.kt((0,a.A)("titleDuplicateLayers"),()=>this.stage.duplicateLayer(),"Ctrl + D"),new y.kt((0,a.A)("titleDeleteLayers"),()=>this.stage.deleteLayer(),"DEL"));const n=this.getLayersAt(t);if(n.length>1){const e=new Array;n.forEach(t=>{e.push(new y.kt(t.settings.name,()=>this.stage.selectLayerById(t.id)))}),i.push(new y.kt,new y.kt((0,a.A)("titleSelectLayer"),void 0,void 0,void 0,e))}new y.Ay(new c.A(e.clientX,e.clientY),i)},this.setMode=e=>{this.mode=e,"ARRANGE"===this.mode||"SIMPLE"===this.mode?this.defaultCursor="unset":"TEXT"===this.mode?this.defaultCursor="text":this.defaultCursor="crosshair",this.render()},this.down=async(e,t,s,i,a)=>{if("INPUT"===document.activeElement.nodeName&&"radio"!==document.activeElement.getAttribute("type")||"SELECT"===document.activeElement.nodeName)return;"mouse"!==a&&this.move(e,a),this.isDown=!0,this.layerOver=void 0,this.downPoint=this.stage.translateRasterToFresco(e,void 0,!1);let n=this.stage.fresco.getSelectedLinkedStack();const r=n.length>1||1===n.length&&("TEXT"===this.mode&&n[0].type===d.A.TYPE_TEXT||"FRAME"===this.mode&&n[0].type===d.A.TYPE_FRAME||"SHAPE"===this.mode&&n[0].type===d.A.TYPE_SHAPE);if(!this.isControl(n,e)&&l.Ay.autoSelect){let s=this.getLayerAt(e);!this.stage.fresco.isSelectedById(null==s?void 0:s.id)||i?(this.stage.selectLayer(s,t,i,!0),n=this.stage.fresco.getSelectedLinkedStack(),this.method="move"):window.requestAnimationFrame(this.render)}if(n.length>0){s&&(await this.stage.duplicateLayer(!1),n=this.stage.fresco.getSelectedLinkedStack());let e=1===n.length;if(!e||this.shouldReformLayer(n[0])){let t,s;if(e&&n[0].editMode&&n[0]instanceof m.A?(this.anchorAlt=this.getAnchor(n[0].trim,n[0].trim.center(),0),this.downRect=[n[0].trim.clone()]):this.downRect=this.stage.fresco.getStackRect(n),e)s=n[0].rect.center(),t=n[0].editMode?n[0].trim:n[0].rect,t.rotation=n[0].rect.rotation;else{for(let e of n)e.rect&&(t=o.A.merge(t,e.rect.getRotatedBounds()));s=t?t.center():void 0}if("rotate"===this.method)this.raster.style.cursor="grabbing",this.downRotation=180/Math.PI*Math.atan2(this.downPoint.y-s.y,this.downPoint.x-s.x)-t.rotation;else if("move"!==this.method){let e,i;switch(this.method){case"nw-resize":i=t.topLeft(),e=t.bottomRight();break;case"n-resize":i=new c.A(s.x,t.y),e=new c.A(s.x,t.bottom());break;case"ne-resize":i=t.topRight(),e=t.bottomLeft();break;case"e-resize":i=new c.A(t.right(),s.y),e=new c.A(t.x,s.y);break;case"se-resize":i=t.bottomRight(),e=t.topLeft();break;case"s-resize":case"t-resize":i=new c.A(s.x,t.bottom()),e=new c.A(s.x,t.y);break;case"sw-resize":i=t.bottomLeft(),e=t.topRight();break;case"w-resize":i=new c.A(t.x,s.y),e=new c.A(t.right(),s.y)}this.downControl=this.rotatePoint(i,s,360-t.rotation),this.downAnchor=this.rotatePoint(e,s,360-t.rotation)}else this.downControl=t.topLeft()}}this.proxy&&(0===n.length||1===n.length&&!this.shouldReformLayer(n[0]))?this.proxy(e,r):(0===n.length||1===n.length&&n[0].settings.locked)&&(this.downPoint=e,this.method="select")},this.move=(e,t)=>{if(this.stage.fresco)if(this.isDown)this.stage.fresco.isSelectedLinkedStack()&&this.downRect.length>0?this.moveStack(e):this.stage.fresco.hasSelected()&&this.downRect.length>0?this.moveSingle(e):"select"===this.method&&(this.stage.coating.ctx.lineWidth=2,this.stage.coating.ctx.strokeStyle=n.bi,this.stage.coating.ctx.clearRect(0,0,this.stage.coating.ctx.canvas.width,this.stage.coating.ctx.canvas.height),this.stage.coating.ctx.strokeRect(this.downPoint.x,this.downPoint.y,e.x-this.downPoint.x,e.y-this.downPoint.y));else{if("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName||"SELECT"===document.activeElement.nodeName)return void(this.raster.style.cursor="unset");let t=this.stage.fresco.getSelectedLinkedStack();if(this.isControl(t,e))this.layerOver&&(this.layerOver=void 0,window.requestAnimationFrame(this.render));else if(l.Ay.autoSelect){let t=this.getLayerAt(e);if(this.layerOver&&this.layerOver===t)return;this.raster.style.cursor=this.method=t?"move":"ARRANGE"===this.mode||"SIMPLE"===this.mode?"unset":this.defaultCursor,t&&!this.stage.fresco.isSelectedLinkedById(t.id)?(this.layerOver=t,window.requestAnimationFrame(this.render)):this.layerOver&&(this.layerOver=void 0,window.requestAnimationFrame(this.render))}else 1!==t.length||t[0].settings.locked?this.raster.style.cursor=this.method=this.defaultCursor:this.raster.style.cursor=this.method="move"}},this.moveSingle=e=>{const t=this.stage.translateRasterToFresco(e,void 0,!1),s=this.stage.fresco.getSelected();if(this.shouldReformLayer(s)){if("move"===this.method){if(s instanceof m.A)if(s.editMode&&s.trim){const e=this.rotatePoint(t,s.rect.center(),s.rect.rotation),i=this.rotatePoint(this.downPoint,s.rect.center(),s.rect.rotation);s.position(Math.round(this.downControl.x+(e.x-i.x)),Math.round(this.downControl.y+(e.y-i.y)))}else s.position(Math.round(this.downControl.x+(t.x-this.downPoint.x)),Math.round(this.downControl.y+(t.y-this.downPoint.y)));else{if(this.isShiftDown){const e=Math.abs(this.downPoint.x-t.x),s=Math.abs(this.downPoint.y-t.y);(e>4||s>4)&&(e<s?(t.x=this.downPoint.x,this.method="vertical"):(t.y=this.downPoint.y,this.method="horizontal"))}s.position(Math.round(this.downControl.x+(t.x-this.downPoint.x)),Math.round(this.downControl.y+(t.y-this.downPoint.y)))}this.checkMoveGuides()}else if("vertical"===this.method)this.isShiftDown||(this.method="move"),s.position(void 0,Math.round(this.downControl.y+(t.y-this.downPoint.y))),this.checkMoveGuides();else if("horizontal"===this.method)this.isShiftDown||(this.method="move"),s.position(Math.round(this.downControl.x+(t.x-this.downPoint.x)),void 0),this.checkMoveGuides();else if("rotate"===this.method){const e=s.rect.center();let i=180/Math.PI*Math.atan2(t.y-e.y,t.x-e.x)-this.downRotation;this.isShiftDown&&(i=11.25*Math.round(i/11.25)),i<0?i+=360:i>=360&&(i-=360),s.rect.rotation=i}else{let e=t.neg(this.downPoint),i=this.downAnchor,a=this.downControl.add(e);if(a=this.checkReformGuides(a),0!==s.rect.rotation){const e=new c.A((i.x+a.x)/2,(i.y+a.y)/2);a=this.rotatePoint(a,e,s.rect.rotation),i=this.rotatePoint(i,e,s.rect.rotation)}let n=(void 0!==this.constrain?this.constrain:!this.isShiftDown)?this.downRect[0].getAspect():0;switch(this.method){case"nw-resize":case"w-resize":s.calculate(a,i,n);break;case"ne-resize":s.calculate(new c.A(i.x,a.y),new c.A(a.x,i.y),n);break;case"sw-resize":s.calculate(new c.A(a.x,i.y),new c.A(i.x,a.y),n);break;case"se-resize":case"e-resize":s.calculate(i,a,n);break;case"t-resize":let e=a.y-i.y;e<10&&(e=10),s.rect.height=Math.round(e),s.rect.width=Math.round(this.downRect[0].width*(e/this.downRect[0].height))}if(s.editMode&&s instanceof m.A){let e=this.anchorAlt.neg(this.getAnchor(s.trim,s.trim.center(),0));s.trim.x=Math.round(s.trim.x+e.x),s.trim.y=Math.round(s.trim.y+e.y)}else{let e=this.downAnchor.neg(this.getAnchor(s.rect,s.rect.center(),s.rect.rotation));s.rect.x=Math.round(s.rect.x+e.x),s.rect.y=Math.round(s.rect.y+e.y)}"t-resize"===this.method&&s instanceof u.A?s.scaleBect(s.rect.height/this.downRect[0].height):!s.editMode&&s instanceof m.A?s.scaleTrim(s.rect.width/this.downRect[0].width,s.rect.height/this.downRect[0].height):s.render()}window.requestAnimationFrame(()=>{this.stage.render(),this.render()}),document.dispatchEvent(new CustomEvent("layer-arrange"))}},this.moveStack=e=>{const t=this.stage.translateRasterToFresco(e,void 0,!1),s=this.stage.fresco.getSelectedLinkedStack();if("move"===this.method){if(this.isShiftDown){const e=Math.abs(this.downPoint.x-t.x),s=Math.abs(this.downPoint.y-t.y);(e>4||s>4)&&(e<s?(t.x=this.downPoint.x,this.method="vertical"):(t.y=this.downPoint.y,this.method="horizontal"))}for(let e=0;e<s.length;e++)this.downRect[e]&&s[e].position(Math.round(this.downRect[e].x+(t.x-this.downPoint.x)),Math.round(this.downRect[e].y+(t.y-this.downPoint.y)));this.checkMoveGuides()}else if("vertical"===this.method){this.isShiftDown||(this.method="move");for(let e=0;e<s.length;e++)this.downRect[e]&&s[e].position(void 0,Math.round(this.downRect[e].y+(t.y-this.downPoint.y)));this.checkMoveGuides()}else if("horizontal"===this.method){this.isShiftDown||(this.method="move");for(let e=0;e<s.length;e++)this.downRect[e]&&s[e].position(Math.round(this.downRect[e].x+(t.x-this.downPoint.x)),void 0);this.checkMoveGuides()}else{let e=t.neg(this.downPoint),i=this.downControl.add(e);i=this.checkReformGuides(i);let a=o.A.calculate(this.downAnchor,this.downControl),n=o.A.calculate(this.downAnchor,i,a.getAspect());n.width<4&&(n.width=4);let r=n.getComparedScale(a),h=this.downAnchor.neg(this.getAnchor(n,n.center(),0));n.x+=h.x,n.y+=h.y;for(let t=0;t<s.length;t++){let e=this.downRect[t];if(e){let i=s[t];i.rect.x=Math.round(n.x+(e.x-a.x)*r.width),i.rect.y=Math.round(n.y+(e.y-a.y)*r.height),i.rect.width=Math.round(e.width*r.width),i.rect.height=Math.round(e.height*r.height),i.rect.width<1&&(i.rect.width=1),i.rect.height<1&&(i.rect.height=1),i instanceof u.A?i.scaleBect(r.width):i instanceof m.A?i.scaleTrim(r.width,r.height):i.render()}}}window.requestAnimationFrame(()=>{this.stage.render(),this.render()}),document.dispatchEvent(new CustomEvent("layer-arrange"))},this.getAnchor=(e,t,s)=>{let i;switch(this.method){case"nw-resize":i=e.bottomRight();break;case"n-resize":i=new c.A(t.x,e.bottom());break;case"ne-resize":i=e.bottomLeft();break;case"e-resize":i=new c.A(e.x,t.y);break;case"se-resize":default:i=e.topLeft();break;case"s-resize":case"t-resize":i=new c.A(t.x,e.y);break;case"sw-resize":i=e.topRight();break;case"w-resize":i=new c.A(e.right(),t.y)}return this.rotatePoint(i,t,360-s)},this.rotatePoint=(e,t,s)=>0!==s&&360!==s&&t?(this.matrix.reset(),this.matrix.translate(t),this.matrix.rotateDegree(s),this.matrix.invert(),this.matrix.transformPoint(e).add(t)):e,this.up=(e,t)=>{if(this.isDown)if(this.downRect.length>0)this.downPoint.equalTo(this.stage.translateRasterToFresco(e,void 0,!1))||this.commitHistory();else if("select"===this.method){const t=this.stage.translateToRect(this.downPoint,e,!1,!0),s=this.getLayersInside(t);s.length>0&&this.stage.selectLayerStack(s,this.isShiftDown,!0)}"rotate"===this.method&&(this.raster.style.cursor="grab"),this.isDown=!1,this.layerOver=void 0,this.downPoint=void 0,this.downControl=void 0,this.downAnchor=void 0,this.downRect=[],this.guides=[],window.requestAnimationFrame(()=>{this.stage.render(),this.render()})},this.commitHistory=(e=this.method)=>{const t=this.stage.fresco.getSelectedStack();if(this.historyRect){let e;1===t.length?e=t[0].editMode&&t[0]instanceof m.A?t[0].trim:t[0].rect:t.forEach(t=>{t.rect&&(e=o.A.merge(e,t.rect.getRotatedBounds()))});const s=e.equalTo(this.historyRect);if(this.historyRect=void 0,s)return}for(let s=0;s<t.length;s++){let i=t[s];if(i instanceof u.A&&this.downRect[s]){let e=i.rect.height/this.downRect[s].height;this.downRect[s].height=i.textSettings.size,"w-resize"!==this.method&&"e-resize"!==this.method&&1!==e&&i.setHeightScale(e)}else"move"!==e&&i instanceof m.A&&!i.editMode&&i.trimOnResize(this.downRect[s])}t.length>0&&(1===t.length?this.stage.history.add({type:"arrange",kind:"rotate"===e?"rotate":"move"===e||"vertical"===e||"horizontal"===e?"move":"resize",layer:t[0],action:{type:t[0].editMode?"trim":"rect",rect:this.downRect[0]}}):this.stage.history.add({type:"arrangeStack",id:this.stage.fresco.getStackHashId(),kind:"rotate"===e?"rotate":"move"===e||"vertical"===e||"horizontal"===e?"move":"resize",stack:Array.from(t),rects:this.downRect})),"move"!==e&&this.stage.fresco.getSelectedStack().forEach(e=>{e.render()}),document.dispatchEvent(new CustomEvent("layer-arrange"))},this.beginHistory=()=>{let e=this.stage.fresco.getSelectedLinkedStack();if(1===e.length)this.downRect=[e[0].editMode&&e[0]instanceof m.A?e[0].trim.clone():e[0].rect.clone()],this.historyRect=this.downRect[0];else{this.downRect=this.stage.fresco.getStackRect(e);for(let t of e)t.rect&&(this.historyRect=o.A.merge(this.historyRect,t.rect.getRotatedBounds()))}},this.inputRotation=e=>{const t=this.stage.fresco.getSelected();t&&t.rect&&(t.rect.rotation=e,window.requestAnimationFrame(()=>{this.stage.render(),this.render()}))},this.inputSize=(e,t)=>{let s=new r.A;if(!this.historyRect)return s;e&&(e=Math.min(e,9999)),t&&(t=Math.min(t,9999));let i=this.stage.fresco.getSelectedLinkedStack();if(1===i.length){let a=i[0];e&&a.setWidth(e,this.constrain?this.historyRect.getAspect():0),t&&a.setHeight(t,this.constrain?this.historyRect.getAspect():0),s=a.editMode?a.trim.size():a.rect.size();let n=new r.A(a.rect.width/this.historyRect.width,a.rect.height/this.historyRect.height);t&&a instanceof u.A?a.scaleBect(n.height):a instanceof m.A&&!a.editMode?a.scaleTrim(n.width,n.height):a.render()}else{let a=this.historyRect,n=this.historyRect.clone();e&&(n.width=e,n.height=Math.round(n.width/a.getAspect())),t&&(n.height=t,n.width=Math.round(n.height*a.getAspect()));let r=n.getComparedScale(a);for(let e=0;e<i.length;e++){let t=this.downRect[e];if(t){let s=i[e];s.rect.x=Math.round(n.x+(t.x-a.x)*r.width),s.rect.y=Math.round(n.y+(t.y-a.y)*r.height),s.rect.width=Math.round(t.width*r.width),s.rect.height=Math.round(t.height*r.height),s.rect.width<1&&(s.rect.width=1),s.rect.height<1&&(s.rect.height=1),s instanceof u.A?s.scaleBect(r.width):s instanceof m.A?s.scaleTrim(r.width,r.height):s.render()}}s.width=n.width,s.height=n.height}return window.requestAnimationFrame(()=>{this.stage.render(),this.render()}),s},this.inputPosition=(e,t)=>{let s=this.stage.fresco.getSelectedLinkedStack();if(1===s.length)s[0].position(e,t);else{e-=this.historyRect.x,t-=this.historyRect.y;for(let i=0;i<s.length;i++){let a=this.downRect[i];s[i].position(a.x+e,a.y+t)}}window.requestAnimationFrame(()=>{this.stage.render(),this.render()})},this.step=(e,t)=>{const s=this.stage.fresco.getSelectedLinkedStack();if(0!==s.length&&!this.historyRect&&!this.isDown){if(1===s.length){const i=s[0].editMode?s[0].trim.clone():s[0].rect.clone();s[0].position(i.x+e,i.y+t),this.stage.history.add({type:"arrange",kind:"move",layer:s[0],action:{type:s[0].editMode?"trim":"rect",rect:i}})}else{let i=this.stage.fresco.getStackRect(s);for(let a of s)this.shouldReformLayer(a)&&a.position(a.rect.x+e,a.rect.y+t);this.stage.history.add({type:"arrangeStack",id:this.stage.fresco.getStackHashId(s),kind:"move",stack:Array.from(s),rects:i})}document.dispatchEvent(new CustomEvent("layer-arrange")),window.requestAnimationFrame(()=>{this.stage.render(),this.render()})}},this.render=()=>{if(!this.stage||!this.stage.fresco||this.stage.supressRender)return;let e,t;this.ctx.clearRect(0,0,this.raster.width,this.raster.height);let s=l.Ay.isHDPI?4:2,i=l.Ay.isHDPI?4:2,a=l.Ay.isHDPI?2:1,r=l.Ay.isHDPI?20:10,h=l.Ay.isHDPI?10:5;if(this.ctx.lineWidth=i,this.layerOver){if(this.ctx.strokeStyle=n.YD,e=this.stage.getLayerLocationRect(this.layerOver),0!==e.rotation){let t=e.center();this.ctx.translate(t.x,t.y),this.ctx.rotate(e.rotation*Math.PI/180),e.x-=t.x,e.y-=t.y}l.Ay.isHDPI?this.ctx.strokeRect(e.x,e.y,e.width,e.height):this.ctx.strokeRect(e.x-1,e.y-1,e.width+2,e.height+2),this.ctx.setTransform(1,0,0,1,0,0)}let c=this.stage.fresco.getSelectedLinkedStack();if(c.length>0){let e=1===c.length;if(e&&!this.shouldReformLayer(c[0]))return;let p,u,g=!0,y=n.bi,v=n.q5;if(e?c[0].editMode&&c[0]instanceof m.A?(p=this.stage.getLayerLocationTrim(c[0]),t=this.stage.getLayerLocationRect(c[0]),u=t.center(),y=n.Sg,g=!1):(p=this.stage.getLayerLocationRect(c[0]),u=p.center()):(c.forEach(e=>{let t=this.stage.getLayerLocationRect(e);t&&(p=o.A.merge(p,t.getRotatedBounds()))}),u=p.center(),g=!1),!p)return;if(p.width<20||p.height<20?(r=6,h=3):(p.width<40||p.height<40)&&(r=8,h=4),0!==p.rotation&&(this.ctx.translate(u.x,u.y),this.ctx.rotate(p.rotation*Math.PI/180),p.x-=u.x,p.y-=u.y,t&&(t.x-=u.x,t.y-=u.y),u.x=0,u.y=0),t&&(this.ctx.lineWidth=2,this.ctx.strokeStyle=n.KP,this.ctx.strokeRect(t.x-2,t.y-2,t.width+2,t.height+2),this.ctx.lineWidth=i),this.ctx.strokeStyle=y,this.ctx.fillStyle=v,l.Ay.isHDPI?this.ctx.strokeRect(p.x,p.y,p.width,p.height):this.ctx.strokeRect(p.x-1,p.y-1,p.width+2,p.height+2),!this.isDown||"unset"===this.method)if(g&&(this.ctx.fillStyle=y,this.ctx.fillRect(p.x+p.width/2-a,p.y-r-h,i,r+h),this.ctx.beginPath(),this.ctx.arc(p.x+p.width/2,p.y-2*r,h+s,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath(),this.ctx.fillStyle=v,this.ctx.beginPath(),this.ctx.arc(p.x+p.width/2,p.y-2*r,h,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.closePath()),e&&c[0].type===d.A.TYPE_TEXT){let e=Math.round(.5*p.height);this.ctx.fillStyle=v,this.ctx.strokeStyle=y,l.Ay.isHDPI?(this.drawHandle(this.ctx,p.x-5,p.y+(p.height-e)/2,10,e,5),this.drawHandle(this.ctx,p.x+p.width-5,p.y+(p.height-e)/2,10,e,5),p.width>80&&this.drawHandle(this.ctx,u.x-40,p.y+p.height-5,80,10,5)):(this.drawHandle(this.ctx,p.x-4,p.y+(p.height-e)/2,6,e,3),this.drawHandle(this.ctx,p.x+p.width-2,p.y+(p.height-e)/2,6,e,3),p.width>40&&this.drawHandle(this.ctx,u.x-20,p.y+p.height-2,40,6,3))}else this.ctx.fillStyle=y,p.height>10&&(this.ctx.fillRect(p.x-h,p.y+p.height-h,r,r),this.ctx.fillRect(p.x+p.width-h,p.y-h,r,r)),this.ctx.fillRect(p.x-h,p.y-h,r,r),this.ctx.fillRect(p.x+p.width-h,p.y+p.height-h,r,r),this.ctx.fillStyle=v,p.height>10&&(this.ctx.fillRect(p.x-h+s,p.y+p.height-h+s,r-2*s,r-2*s),this.ctx.fillRect(p.x+p.width-h+s,p.y-h+s,r-2*s,r-2*s)),this.ctx.fillRect(p.x-h+s,p.y-h+s,r-2*s,r-2*s),this.ctx.fillRect(p.x+p.width-h+s,p.y+p.height-h+s,r-2*s,r-2*s);this.ctx.setTransform(1,0,0,1,0,0)}this.guides&&this.guides.length>0&&(this.ctx.lineWidth=l.Ay.isHDPI?2:1,l.Ay.isHDPI||this.ctx.translate(.5,.5),this.guides.forEach(e=>{e.soft?this.ctx.strokeStyle=n.RZ:this.ctx.strokeStyle=n.Al,this.ctx.beginPath(),this.ctx.moveTo(e.start.x,e.start.y),this.ctx.lineTo(e.end.x,e.end.y),this.ctx.stroke()}),this.ctx.setTransform(1,0,0,1,0,0))},this.drawHandle=(e,t,s,i,a,n=0)=>{e.beginPath(),e.moveTo(t+n,s),e.lineTo(t+i-n,s),e.quadraticCurveTo(t+i,s,t+i,s+n),e.lineTo(t+i,s+a-n),e.quadraticCurveTo(t+i,s+a,t+i-n,s+a),e.lineTo(t+n,s+a),e.quadraticCurveTo(t,s+a,t,s+a-n),e.lineTo(t,s+n),e.quadraticCurveTo(t,s,t+n,s),e.closePath(),e.fill(),e.stroke()},this.isControl=(e,t)=>{if(0===e.length)return!1;let s,i,a=1===e.length,r=l.Ay.isHDPI?l.Ay.canTouch?44:32:16,h=.5*r;if(a&&e[0].editMode&&e[0]instanceof m.A?(s=this.stage.getLayerLocationTrim(e[0]),i=this.stage.getLayerLocationRect(e[0]).center()):(a?s=this.stage.getLayerLocationRect(e[0]):e.forEach(e=>{let t=this.stage.getLayerLocationRect(e);t&&(s=o.A.merge(s,t.getRotatedBounds()))}),i=s?s.center():void 0),s){if((s.width<40||s.height<40)&&(h/=2,r/=2),t=this.rotatePoint(t,i,s.rotation),a&&e[0].type===d.A.TYPE_TEXT){if(n.HO(s.x-h,s.y,r,s.height,t.x,t.y))return this.raster.style.cursor=this.getRotatedCursor(90,s.rotation),this.method="w-resize",!0;if(n.HO(s.x+s.width-h,s.y,r,s.height,t.x,t.y))return this.raster.style.cursor=this.getRotatedCursor(270,s.rotation),this.method="e-resize",!0;const e=l.Ay.isHDPI?80:40;if(s.width>e&&n.HO(i.x-.5*e,s.y+s.height-h,e,r,t.x,t.y))return this.raster.style.cursor=this.getRotatedCursor(0,s.rotation),this.method="t-resize",!0}else{if(s.height>10){if(n.HO(s.x+s.width-h,s.y-h,r,r,t.x,t.y))return this.raster.style.cursor=this.getRotatedCursor(45,s.rotation),this.method="ne-resize",!0;if(n.HO(s.x-h,s.y+s.height-h,r,r,t.x,t.y))return this.raster.style.cursor=this.getRotatedCursor(225,s.rotation),this.method="sw-resize",!0}if(n.HO(s.x-h,s.y-h,r,r,t.x,t.y))return this.raster.style.cursor=this.getRotatedCursor(315,s.rotation),this.method="nw-resize",!0;if(n.HO(s.x+s.width-h,s.y+s.height-h,r,r,t.x,t.y))return this.raster.style.cursor=this.getRotatedCursor(135,s.rotation),this.method="se-resize",!0}return!(!a||e[0].editMode||!n.HO(s.x+s.width/2-h,s.y-(l.Ay.isHDPI?40:20)-h,r,r,t.x,t.y))&&(this.raster.style.cursor="grab",this.method="rotate",!0)}},this.getRotatedCursor=(e,t)=>{let s=e+t;s<0&&(s+=360),s>360&&(s-=360),s+=22.5;let i=7;for(;i>0&&!(s>45*i&&s<360);)i--;return["n","ne","e","se","s","sw","w","nw"][i]+"-resize"},this.checkReformGuides=e=>{var t,s;if(this.guides=[],l.Ay.showGuides||l.Ay.snapToGuides){const i=this.stage.fresco.getSelectedLinkedStack(),a=5/this.stage.zoom,n=l.Ay.snapToGuides,r=l.Ay.showGuides;let h=1===i.length&&i[0].editMode&&i[0].trim;const d=h?i[0].rect:new o.A(0,0,this.stage.fresco.width,this.stage.fresco.height),p=h?360-i[0].rect.rotation:0,u=d.center(),m=h?this.rotatePoint(e,u,1===i.length?i[0].rect.rotation:0):e;if(!h){const s=this.stage.fresco.getNotSelectedStack(i);for(let i=0;i<s.length;i++){const o=s[i].rect;if(o&&0===o.rotation&&s[i].settings.visible){if(this.willSnap(m.x,o.x,a)&&(n&&(e.x=o.x),r)){const e="ne-resize"===this.method||"se-resize"===this.method||"e-resize"===this.method;this.addGuide(new c.A(o.x,o.y),new c.A(o.x,o.bottom()),void 0,0,!0,new c.A(e?0:-1,-1),new c.A(e?0:-1,0))}if(this.willSnap(m.x,o.right(),a)&&(n&&(e.x=o.right()),r)){const e="nw-resize"===this.method||"sw-resize"===this.method||"w-resize"===this.method;this.addGuide(new c.A(o.right(),o.y),new c.A(o.right(),o.bottom()),void 0,0,!0,new c.A(e?-1:0,-1),new c.A(e?-1:0,0))}if(null!==(t=!this.constrain)&&void 0!==t?t:this.isShiftDown){if(this.willSnap(m.y,o.y,a)&&(n&&(e.y=o.y),r)){const e="sw-resize"===this.method||"se-resize"===this.method;this.addGuide(new c.A(o.x,o.y),new c.A(o.right(),o.y),void 0,0,!0,new c.A(-1,e?0:-1),new c.A(0,e?0:-1))}if(this.willSnap(m.y,o.bottom(),a)&&(n&&(e.y=o.bottom()),r)){const e="ne-resize"===this.method||"nw-resize"===this.method;this.addGuide(new c.A(o.x,o.bottom()),new c.A(o.right(),o.bottom()),void 0,0,!0,new c.A(-1,e?-1:0),new c.A(0,e?-1:0))}}}}}this.willSnap(m.x,d.x,a)&&(n&&(e.x=h?this.rotatePoint(new c.A(d.x,m.y),u,p).x:d.x),r&&this.addGuide(new c.A(d.x,d.y),new c.A(d.x,d.bottom()),u,p,!1,new c.A(-1,-1),new c.A(-1,0))),this.willSnap(m.x,d.right(),a)&&(n&&(e.x=h?this.rotatePoint(new c.A(d.right(),m.y),u,p).x:d.right()),r&&this.addGuide(new c.A(d.right(),d.y),new c.A(d.right(),d.bottom()),u,p,!1,new c.A(0,-1))),(null!==(s=!this.constrain)&&void 0!==s?s:this.isShiftDown)&&(this.willSnap(m.y,d.top(),a)&&(n&&(e.y=h?this.rotatePoint(new c.A(m.x,d.top()),u,p).y:d.top()),r&&this.addGuide(new c.A(d.x,d.y),new c.A(d.right(),d.y),u,p,!1,new c.A(-1,-1),new c.A(0,-1))),this.willSnap(m.y,d.bottom(),a)&&(n&&(e.y=h?this.rotatePoint(new c.A(m.x,d.bottom()),u,p).y:d.bottom()),r&&this.addGuide(new c.A(d.x,d.bottom()),new c.A(d.right(),d.bottom()),u,p,!1,new c.A(-1))))}return e},this.checkMoveGuides=()=>{if(this.guides=[],l.Ay.showGuides||l.Ay.snapToGuides){const e=this.stage.fresco.getSelectedLinkedStack(),t=this.stage.fresco.getNotSelectedStack(e),s=5/this.stage.zoom,i=l.Ay.snapToGuides,a=l.Ay.showGuides;let n,r,h;if(1===e.length&&e[0].editMode?(n=e[0].getGlobalTrim(),r=e[0].rect,h=360-r.rotation):(r=new o.A(0,0,this.stage.fresco.width,this.stage.fresco.height),e.forEach(e=>{e.rect&&(n=o.A.merge(n,e.rect.getRotatedBounds()))})),!n)return;let d=new c.A(0,0);const p=n.center(),u=20/this.stage.zoom;for(let o=0;o<t.length;o++){const e=t[o].rect;if(e&&0===e.rotation&&t[o].settings.visible){const t=e.center();if(this.willSnap(n.x,e.x,s)&&(d.x=n.x-e.x,a)){const s=(e.y<n.y?e.y:n.y)-u,i=(e.y+e.height>n.y+n.height?e.y+e.height:n.y+n.height)+u;this.addGuide(new c.A(e.x,s),new c.A(e.x,i),t,h,!0,new c.A(-1),new c.A(-1))}if(this.willSnap(n.x,e.x+e.width,s)&&(d.x=n.x-(e.x+e.width),a)){const s=(e.y<n.y?e.y:n.y)-u,i=(e.y+e.height>n.y+n.height?e.y+e.height:n.y+n.height)+u;this.addGuide(new c.A(e.x+e.width,s),new c.A(e.x+e.width,i),t,h,!0,new c.A(-1),new c.A(-1))}if(this.willSnap(n.x+n.width,e.x,s)&&(d.x=n.x+n.width-e.x,a)){const s=(e.y<n.y?e.y:n.y)-u,i=(e.y+e.height>n.y+n.height?e.y+e.height:n.y+n.height)+u;this.addGuide(new c.A(e.x,s),new c.A(e.x,i),t,h,!0)}if(this.willSnap(n.x+n.width,e.x+e.width,s)&&(d.x=n.x+n.width-(e.x+e.width),a)){const s=(e.y<n.y?e.y:n.y)-u,i=(e.y+e.height>n.y+n.height?e.y+e.height:n.y+n.height)+u;this.addGuide(new c.A(e.x+e.width,s),new c.A(e.x+e.width,i),t,h,!0)}if(this.willSnap(n.y,e.y,s)&&(d.y=n.y-e.y,a)){const s=(e.x<n.x?e.x:n.x)-u,i=(e.x+e.width>n.x+n.width?e.x+e.width:n.x+n.width)+u;this.addGuide(new c.A(s,e.y),new c.A(i,e.y),t,h,!0,new c.A(0,-1),new c.A(0,-1))}if(this.willSnap(n.y,e.y+e.height,s)&&(d.y=n.y-(e.y+e.height),a)){const s=(e.x<n.x?e.x:n.x)-u,i=(e.x+e.width>n.x+n.width?e.x+e.width:n.x+n.width)+u;this.addGuide(new c.A(s,e.y+e.height),new c.A(i,e.y+e.height),t,h,!0,new c.A(0,-1),new c.A(0,-1))}if(this.willSnap(n.y+n.height,e.y,s)&&(d.y=n.y+n.height-e.y,a)){const s=(e.x<n.x?e.x:n.x)-u,i=(e.x+e.width>n.x+n.width?e.x+e.width:n.x+n.width)+u;this.addGuide(new c.A(s,e.y),new c.A(i,e.y),t,h,!0)}if(this.willSnap(n.y+n.height,e.y+e.height,s)&&(d.y=n.y+n.height-(e.y+e.height),a)){const s=(e.x<n.x?e.x:n.x)-u,i=(e.x+e.width>n.x+n.width?e.x+e.width:n.x+n.width)+u;this.addGuide(new c.A(s,e.y+e.height),new c.A(i,e.y+e.height),t,h,!0)}if(this.willSnap(p.x,t.x,s)&&(d.x=n.x-Math.round(t.x-n.width/2),a)){const s=(e.y<n.y?e.y:n.y)-u,i=(e.y+e.height>n.y+n.height?e.y+e.height:n.y+n.height)+u;this.addGuide(new c.A(Math.floor(t.x),s),new c.A(Math.floor(t.x),i),t,h,!0)}if(this.willSnap(p.y,t.y,s)&&(d.y=n.y-Math.round(t.y-n.height/2),a)){const s=(e.x<n.x?e.x:n.x)-u,i=(e.x+e.width>n.x+n.width?e.x+e.width:n.x+n.width)+u;this.addGuide(new c.A(s,Math.floor(t.y)),new c.A(i,Math.floor(t.y)),t,h,!0)}}}const m=r.center();this.willSnap(p.x,m.x,s)&&(d.x=n.x-Math.round(m.x-n.width/2),a&&this.addGuide(new c.A(Math.floor(m.x),r.y),new c.A(Math.floor(m.x),r.bottom()),m,h)),this.willSnap(p.y,m.y,s)&&(d.y=n.y-Math.round(m.y-n.height/2),a&&this.addGuide(new c.A(r.x,Math.floor(m.y)),new c.A(r.right(),Math.floor(m.y)),m,h)),this.willSnap(n.x,r.x,s)&&(d.x=n.x-r.x,a&&this.addGuide(new c.A(r.x,r.y),new c.A(r.x,r.bottom()),m,h,!1,new c.A(-1,-1),new c.A(-1,0))),this.willSnap(n.right(),r.right(),s)&&(d.x=n.x-(r.right()-n.width),a&&this.addGuide(new c.A(r.right(),r.y),new c.A(r.right(),r.bottom()),m,h,!1,new c.A(0,-1))),this.willSnap(n.y,r.y,s)&&(d.y=n.y-r.y,a&&this.addGuide(new c.A(r.x,r.y),new c.A(r.right(),r.y),m,h,!1,new c.A(-1,-1),new c.A(0,-1))),this.willSnap(n.bottom(),r.bottom(),s)&&(d.y=n.y-(r.bottom()-n.height),a&&this.addGuide(new c.A(r.x,r.bottom()),new c.A(r.right(),r.bottom()),m,h,!1,new c.A(-1))),!i||0===d.x&&0===d.y||(1===e.length&&e[0].editMode?e[0].position(e[0].trim.x-d.x,e[0].trim.y-d.y):e.forEach(e=>{this.shouldReformLayer(e)&&e.position(e.rect.x-d.x,e.rect.y-d.y)}))}},this.addGuide=(e,t,s,i=0,a=!1,n,r)=>{0!==i&&(e=this.rotatePoint(e,s,i),t=this.rotatePoint(t,s,i)),e=this.stage.translateFrescoToRaster(e).add(n),t=this.stage.translateFrescoToRaster(t).add(r),this.guides.push(new h.A(e,t,a))},this.willSnap=(e,t,s)=>e<t+s&&e>t-s,this.shouldReformLayer=e=>{if(e&&e.settings.visible&&!e.settings.locked&&e.rect){if("ARRANGE"!==this.mode&&"SIMPLE"!==this.mode){if("TEXT"===this.mode&&e.type!==d.A.TYPE_TEXT)return;if("FRAME"===this.mode&&e.type!==d.A.TYPE_FRAME)return;if("SHAPE"===this.mode&&e.type!==d.A.TYPE_SHAPE)return}return!0}},this.getLayerAt=e=>{if(this.stage.fresco&&this.stage.fresco.layers.length>0)for(let t=this.stage.fresco.layers.length-1;t>=0;t--){if(!this.shouldReformLayer(this.stage.fresco.layers[t]))continue;let s,i;if(this.stage.fresco.layers[t].editMode&&this.stage.fresco.layers[t]instanceof m.A?(s=this.stage.getLayerLocationTrim(this.stage.fresco.layers[t]),i=this.stage.getLayerLocationRect(this.stage.fresco.layers[t]).center()):(s=this.stage.getLayerLocationRect(this.stage.fresco.layers[t]),i=s?s.center():void 0),s&&s.isInside(this.rotatePoint(e,i,s.rotation)))return this.stage.fresco.layers[t]}},this.getLayersAt=e=>{const t=new Array;if(this.stage.fresco&&this.stage.fresco.layers.length>0)for(let s=this.stage.fresco.layers.length-1;s>=0;s--){if("TEXT"===this.mode&&this.stage.fresco.layers[s].type!==d.A.TYPE_TEXT)continue;if("FRAME"===this.mode&&this.stage.fresco.layers[s].type!==d.A.TYPE_FRAME)continue;if("SHAPE"===this.mode&&this.stage.fresco.layers[s].type!==d.A.TYPE_SHAPE)continue;let i,a;if(this.stage.fresco.layers[s].editMode&&this.stage.fresco.layers[s]instanceof m.A?(i=this.stage.getLayerLocationTrim(this.stage.fresco.layers[s]),a=this.stage.getLayerLocationRect(this.stage.fresco.layers[s]).center()):(i=this.stage.getLayerLocationRect(this.stage.fresco.layers[s]),a=i?i.center():void 0),i&&i.isInside(this.rotatePoint(e,a,i.rotation))&&t.push(this.stage.fresco.layers[s]),t.length>5)break}return t},this.getLayersInside=e=>{const t=new Array;if(this.stage.fresco&&this.stage.fresco.layers.length>0)for(let s=this.stage.fresco.layers.length-1;s>=0;s--){const i=this.stage.getLayerLocationRect(this.stage.fresco.layers[s]);i&&e.contains(i)&&t.push(this.stage.fresco.layers[s])}return t},this.dblClick=()=>{let e=this.stage.fresco.getSelected();if(e instanceof u.A){if((0,i.Ay)("floating-text-input"))return;e.settings.visible=!1,this.removeListener(),this.stage.render(),this.render(),this.stage.supressRender=!0;let t=this.stage.getLayerLocationRect(e);l.Ay.isHDPI&&(t=t.scale(.5)),t.y+t.height>this.raster.offsetHeight&&(t.y=this.raster.offsetHeight-t.height-20),t.y<20&&(t.y=20),t.width>this.raster.offsetWidth&&(t.width=this.raster.offsetWidth-40),t.x+t.width>this.raster.offsetWidth&&(t.x=this.raster.offsetWidth-t.width-20),t.x<20&&(t.x=20);let s=document.createElement("textarea");s.id="floating-text-input",s.style.top=t.y+this.raster.offsetTop+"px",s.style.left=t.x+this.raster.offsetLeft+"px",s.style.width=t.width+"px",s.style.color="#111";let a=e.textSettings,r=n.qE(Math.round(a.size*this.stage.zoom),12,100);l.Ay.isHDPI&&(r*=.5),s.style.font=a.getCssFont(r),s.style.letterSpacing=Math.floor(a.letterSpace*(r/2.2))+"px",s.style.textAlign=a.align,s.value=e.text;const o=()=>window.setTimeout(()=>{let e=s.cloneNode();e.style.visibility="false",s.parentNode.insertBefore(e,s),e.style.height="auto",e.value=s.value;let t=e.scrollTop+e.scrollHeight+16;s.offsetTop+t>document.body.offsetHeight-20&&(t=document.body.offsetHeight-20-s.offsetTop,s.style.overflowY="auto"),s.style.height=t+"px",s.parentNode.removeChild(e)},0);s.addEventListener("input",()=>{o()},!0),document.body.appendChild(s),window.setTimeout(()=>{o(),s.focus(),s.select()},10),document.addEventListener("mousedown",this.outsideTextClick,!0)}else e instanceof m.A&&!e.settings.locked&&(e.canvas&&e.trim?(e.editMode=!e.editMode,window.requestAnimationFrame(this.render),document.dispatchEvent(new CustomEvent("layer-select"))):this.stage.browseFrameImage())},this.outsideTextClick=e=>{let t=(0,i.Ay)("floating-text-input");if(e.target!==t){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),this.stage.supressRender=!1;let s=this.stage.fresco.getSelected();if(s instanceof u.A){s.settings.visible=!0;let e=s.text;s.setText(t.value),this.stage.history.add({type:"textChange",layer:s,text:e})}this.addListener(),document.removeEventListener("mousedown",this.outsideTextClick,!0),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("text-change")),t.remove()}},this.cleanUp=()=>{this.proxy=void 0,this.removeListener(),this.raster.style.cursor="unset",this.matrix=void 0,this.raster=void 0,this.stage=void 0,this.ctx=void 0},this.stage=e,this.ctx=e.coating.ctx,this.raster=e.coating.raster,this.pointers=new Array,this.matrix=new p.A,this.downRect=[],this.guides=[],this.addListener(),this.setMode(t)}}},26806:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(21742),a=s(54738),n=s(41915),r=s(29755),o=s(42268);class h{constructor(e,t=!0,s=!1){this.setContent=(...e)=>{e[0]instanceof HTMLElement?this.content.append(...e):this.content.innerHTML+=e[0],this.position()},this.disableApply=()=>{const e=(0,o.Ay)("dialog-apply"+this.mid);e.classList.add("disabled"),e.onclick=void 0},this.enableApply=()=>{const e=(0,o.Ay)("dialog-apply"+this.mid);e.classList.remove("disabled"),e.onclick=()=>this.apply()},this.disableCancel=()=>{const e=(0,o.Ay)("dialog-cancel"+this.mid);e.classList.add("disabled"),e.onclick=void 0},this.enableCancel=()=>{const e=(0,o.Ay)("dialog-cancel"+this.mid);e.classList.remove("disabled"),e.onclick=()=>this.cancel()},this.position=()=>{this.dialog.style.left=Math.round((this.modal.offsetWidth-this.dialog.offsetWidth)/2+r.Ay.dialogPos.x)+"px",this.dialog.style.top=Math.round((this.modal.offsetHeight-this.dialog.offsetHeight)/2+r.Ay.dialogPos.y)+"px";let e=this.dialog.getBoundingClientRect(),t=this.modal.getBoundingClientRect();e.bottom>t.bottom&&(this.dialog.style.top=t.height-e.height<0?"0px":t.height-e.height+"px"),e.right>t.right&&(this.dialog.style.left=t.width-e.width<0?"0px":t.width-e.width+"px"),this.dialog.offsetTop<0&&(this.dialog.style.top="0px"),this.dialog.offsetLeft<0&&(this.dialog.style.left="0px")},this.dragStart=e=>{this.p=e,this.d=new n.A(this.dialog.offsetLeft,this.dialog.offsetTop)},this.dragMove=e=>{this.dialog.style.left=Math.round(this.d.x+(e.x-this.p.x))+"px",this.dialog.style.top=Math.round(this.d.y+(e.y-this.p.y))+"px"},this.dragEnd=e=>{r.Ay.dialogPos.x=Math.round(this.dialog.offsetLeft-(this.modal.offsetWidth-this.dialog.offsetWidth)/2),r.Ay.dialogPos.y=Math.round(this.dialog.offsetTop-(this.modal.offsetHeight-this.dialog.offsetHeight)/2)},this.resizeStart=e=>{this.d=new n.A(this.dialog.clientHeight,e.y)},this.resizeMove=e=>{const t=this.d.x+(e.y-this.d.y);this.dialog.style.height=(t<320?320:t)+"px"},this.keyDown=e=>{27!=e.keyCode||"none"===(0,o.Ay)("dialog-cancel"+this.mid).style.display?13!=e.keyCode||"none"===(0,o.Ay)("dialog-apply"+this.mid).style.display||e.shiftKey||(0,o.Ay)("dialog-apply"+this.mid).classList.contains("disabled")||this.apply():this.cancel()},this.condition=()=>{this.cleanUp()},this.cancel=()=>{this.cleanUp()},this.apply=()=>{this.cleanUp()},this.mid=a.r0(),this.modal=(0,o.T)("div",{id:"modal-"+this.mid,className:"modal"}),t&&this.modal.classList.add("dim"),document.body.appendChild(this.modal),this.dialog=(0,o.T)("div",{className:"dialog"}),this.modal.appendChild(this.dialog),this.content=(0,o.T)("div",{className:"content"});const h=(0,o.T)("div",{id:"dialog-title"+this.mid,className:"title"},e);if(document.body.clientWidth>=650&&(0,o.Bb)(h,this.dragStart,this.dragMove,this.dragEnd),this.dialog.append(h,(0,o.T)("img",{id:"dialog-close"+this.mid,className:"close ic",src:"/img/icon/close.svg",onclick:()=>this.cancel()}),(0,o.T)("div",{id:"dialog-splitter"+this.mid,className:"splitter"}),this.content,(0,o.T)("div",{className:"buttons",id:"dialog-buttons"+this.mid},(0,o.T)("a",{id:"dialog-cancel"+this.mid,className:"button negative",onclick:()=>this.cancel()},(0,i.A)("cancel")),(0,o.T)("a",{id:"dialog-apply"+this.mid,className:"button positive",onclick:()=>this.apply()},(0,i.A)("apply")))),s){const e=(0,o.T)("img",{id:"resize-"+this.mid,src:"/img/icon/three-dot.svg",className:"resize ic"});(0,o.Bb)(e,this.resizeStart,this.resizeMove),this.dialog.append(e)}document.addEventListener("keydown",this.keyDown,!1)}cleanUp(){document.removeEventListener("keydown",this.keyDown,!1),this.dialog.remove(),this.dialog=null,this.modal.remove(),this.modal=null}}},26824:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(21742),a=s(42268),n=s(54738),r=s(98244),o=s(82042),h=s(15818),c=s(23556),l=s(8689),d=s(2215);class p extends d.A{constructor(e){super(e,(0,i.A)("titleInnerGlow")),this.load=async()=>{const e=Promise.resolve().then(s.bind(s,82355)),t=n.D9();await t;const{distanceTransformInv:i}=await e,o=this.shaders.ctx,h=this.cache.getContext("2d").getImageData(0,0,this.cache.width,this.cache.height),c=i(this.cache.width,this.cache.height,h.data);if(!o.getSupportedExtensions().includes("OES_texture_float"))return alert("sorry, this filter requires float textures"),void(0,r.A)("OES_texture_float");o.getExtension("OES_texture_float");const l=o.createTexture();o.bindTexture(o.TEXTURE_2D,l),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.cache.width,this.cache.height,0,o.ALPHA,o.FLOAT,c),o.bindTexture(o.TEXTURE_2D,null),this.map=l,(0,a.Ay)("innerglow-loading").style.display="none",(0,a.Ay)("innerglow-controls").style.visibility="visible",this.enableApply(),this.update()},this.update=()=>{const e={size:this.size.getValue(),feather:this.feather.getValue(),opacity:this.opacity.getValue(),color:this.color.getColor(),distanceMap:this.map};this.change("inner-glow",e.size?e:null)},this.disableApply(),this.kind="innerGlow",this.shaders=new c.A,this.setContent((0,a.T)("div",{className:"dialog-loading"},(0,a.T)("div",{id:"innerglow-controls",className:"controls"},(0,a.T)("label",{className:"split"},(0,i.A)("color"),(0,a.T)("div",{id:"glow-color",className:"colod-pod"})),(0,a.T)("div",{id:"glow-size",className:"range-box top-15"}),(0,a.T)("div",{id:"glow-feather",className:"range-box top-10"}),(0,a.T)("div",{id:"glow-opacity",className:"range-box top-10"})),(0,a.T)("div",{id:"innerglow-loading",className:"message"},(0,a.T)("label",{className:"working"},(0,i.A)("loading"))))),this.color=new l.A("glow-color",h.A.fromHEX("#ffffff"),this.update,this.update),this.opacity=new o.A("glow-opacity",{label:(0,i.A)("opacity"),range:[0,1],defaultValue:1,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.size=new o.A("glow-size",{label:(0,i.A)("size"),range:[0,150],defaultValue:10,step:1,labelFormat:e=>`${e}px`,onChange:()=>this.update()}),this.feather=new o.A("glow-feather",{label:(0,i.A)("feather"),range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.position(),this.load()}}},26931:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(53900),a=s(41915),n=s(15818),r=s(23556),o=s(73897),h=s(54127),c=s(76315),l=s(52038);class d{constructor(e,t){this.scantime=0,this.scantype="none",this.getDuration=()=>{let e=0;return this.transitions.forEach(t=>{e=Math.max(e,t.getDuration())}),e},this.prepare=e=>{for(const t of this.transitions)t.motion.fill&&(t.begin(this.getProperty(t.motion.method,e)),this.setProperty(t.motion.method,t.motion.manner,e,t.step(0)))},this.step=(e,t)=>{for(const s of this.transitions)s.shouldRun(e)&&(s.playing||s.begin(this.getProperty(s.motion.method,t)),this.setProperty(s.motion.method,s.motion.manner,t,s.step(e)))},this.setProperty=(e,t,s,i)=>{switch(e){case"opacity":this.layer.transform.opacity=i;break;case"rotate":this.layer.transform.rotation=360*i,this.layer.transform.rAnchor=this.anchorToPoint(t);break;case"scale":this.layer.transform.scale.x=i,this.layer.transform.scale.y=i,this.layer.transform.sAnchor=this.anchorToPoint(t);break;case"scale-width":this.layer.transform.scale.x=i,this.layer.transform.sAnchor=this.anchorToPoint(t);break;case"scale-height":this.layer.transform.scale.y=i,this.layer.transform.sAnchor=this.anchorToPoint(t);break;case"self-x":this.layer.transform.offset.x=i*this.layer.getRect().width;break;case"self-y":this.layer.transform.offset.y=i*this.layer.getRect().height;break;case"offset-x":this.layer.transform.offset.x=i*s.width;break;case"offset-y":this.layer.transform.offset.y=i*s.height;break;case"viewport-x":this.layer.transform.offset.x=i*s.width-this.layer.getRect().center().x;break;case"viewport-y":this.layer.transform.offset.y=i*s.height-this.layer.getRect().center().y;break;case"viewport-box-x":const a=this.transformedRectWidth();this.layer.transform.offset.x=this.layer.getRect().center().x-(.5*a+i*(s.width-a));break;case"viewport-box-y":const n=this.transformedRectHeight();this.layer.transform.offset.y=this.layer.getRect().center().y-(.5*n+i*(s.height-n));break;default:this.setShader(e,i,t)}},this.transformedRectWidth=()=>this.layer.getRect().width*this.layer.transform.scale.x,this.transformedRectHeight=()=>this.layer.getRect().height*this.layer.transform.scale.y,this.anchorToPoint=e=>{switch(e){case"topleft":return new a.A(0,0);case"top":return new a.A(.5,0);case"topright":return new a.A(1,0);case"left":return new a.A(0,.5);case"center":return new a.A(.5,.5);case"right":return new a.A(1,.5);case"bottomleft":return new a.A(0,1);case"bottom":return new a.A(.5,1);case"bottomright":return new a.A(1,1)}return new a.A(.5,.5)},this.setShader=(e,t,s)=>{switch(this.shaders||(this.shaders=new r.A),e){case"wipe":this.shaders.addShader("wipe",{direction:s,amount:t});break;case"swipe":this.shaders.addShader("swipe",{direction:s,amount:t,color:this.getLayerAccent()});break;case"slot":this.shaders.addShader("slot",{direction:s,amount:t});break;case"blinds":this.shaders.addShader("blinds",{direction:s,amount:t});break;case"melt":this.shaders.addShader("melt",{direction:s,amount:t});break;case"warp":this.shaders.addShader("warp",{direction:s,amount:t});break;case"curtain":this.shaders.addShader("curtain",{direction:s,amount:t});break;case"split":this.shaders.addShader("split",{direction:s,sections:2,amount:t});break;case"line":this.shaders.addShader("split",{direction:s,sections:8,amount:t});break;case"marquee":this.shaders.addShader("marquee",{direction:s,amount:t});break;default:this.shaders.addShader(e,t)}this.layer.transient=this.shaders.apply(this.layer.baked?this.layer.baked:this.layer.canvas)},this.getLayerAccent=()=>this.layer instanceof h.A&&"color"===this.layer.fill.getType()?this.layer.fill.value:new n.A(255,255,255),this.getProperty=(e,t)=>{switch(e){case"opacity":return this.layer.transform.opacity;case"rotate":return this.layer.transform.rotation/360;case"scale":case"scale-width":return this.layer.transform.scale.x;case"scale-height":return this.layer.transform.scale.y;case"self-x":return this.layer.transform.offset.x/this.layer.getRect().width;case"self-y":return this.layer.transform.offset.y/this.layer.getRect().height;case"offset-x":return this.layer.transform.offset.x/t.width;case"offset-y":return this.layer.transform.offset.y/t.height;case"viewport-x":return(this.layer.getRect().center().x+this.layer.transform.offset.x)/t.width;case"viewport-y":return(this.layer.getRect().center().y+this.layer.transform.offset.y)/t.height;case"viewport-box-x":return(this.layer.getRect().center().x+this.layer.transform.offset.x)/(t.width-this.transformedRectWidth());case"viewport-box-y":return(this.layer.getRect().center().y+this.layer.transform.offset.y)/(t.height-this.transformedRectHeight())}return 0},this.finish=()=>{this.layer.transient=void 0,this.layer.transform=void 0},this.layer=e,this.transitions=t,this.layer.transform={sAnchor:new a.A(.5,.5),rAnchor:new a.A(.5,.5),scale:new a.A(1,1),offset:new a.A(0,0),rotation:0,opacity:1}}}d.bakeAnimators=e=>{const t=new Array;for(const s of e.layers)if(s.rect)if(!s.animation&&e.animation){const i=d.createPageTransitions(s,e,e.animation);i.length>0&&t.push(new d(s,i))}else if(s.animation&&!s.animation.block){const e=d.createLayerTransitions(s.animation);t.push(new d(s,e))}return t},d.createPageTransitions=(e,t,s)=>{const a=t.layerNr(e.id),n=t.layers.length,r=new i.A(t.width,t.height),h=d.filterMotions(s.enter,e,a,n,r),l=d.filterMotions(s.scene,e,a,n,r),p=d.filterMotions(s.exit,e,a,n,r);if(!h&&!l&&!p&&0===h.length&&0===l.length&&0===p.length)return;const u=0===a&&e.settings.locked?0:c.A.getOffset(e,t,s.stagger),m=s.enter?s.enter.duration+s.enter.delay:0,g=s.scene?s.scene.duration+s.scene.delay:0,y=new Array;if(h)for(const i of h)y.push(new o.A(i,s.enter.speed,s.enter.delay+u));if(l)for(const i of l)y.push(new o.A(i,s.scene.speed,s.scene.delay+u+m));if(p)for(const i of p)y.push(new o.A(i,s.exit.speed,s.enter.delay+u+m+g));return y},d.createLayerTransitions=(e,t=!1)=>{const s=!!e.enter,i=!!e.scene,a=new Array;let n=s?e.enter.duration:0,r=i?e.scene.duration:0;if(!t&&s&&(n+=e.enter.delay),(t&&s&&i||!t&&i)&&(r+=e.scene.delay),e.enter){const s=t?0:e.enter.delay;for(const t of e.enter.motions)a.push(new o.A(t,e.enter.speed,s))}if(e.scene){const i=t&&!s?0:e.scene.delay;for(const t of e.scene.motions)a.push(new o.A(t,e.scene.speed,i+n));if(e.scene.repeat>0){let t=l.A.getMotionsDuration(e.scene.motions,e.scene.speed),s=t+e.scene.gap;for(let r=0;r<e.scene.repeat;r++){for(const t of e.scene.motions)a.push(new o.A(t,e.scene.speed,s+i+n));s+=t+e.scene.gap}}}if(e.exit){const h=!t||s||i?e.exit.delay:0;for(const t of e.exit.motions)a.push(new o.A(t,e.exit.speed,h+n+r))}return a},d.createSegmentTransitions=e=>{const t=new Array;if(e)for(const s of e.motions)t.push(new o.A(s,e.speed));return t},d.filterMotions=(e,t,s,i,a)=>{if(!e||!e.motions||0===e.motions.length)return;let n;for(const r of e.motions)if(d.filterMotion(t,s,i,a,r)){n=r.filter;break}return e.motions.filter(e=>e.filter===n)},d.filterMotion=(e,t,s,i,a)=>{if("background"===a.filter)return 0===t&&e.settings.locked;if(0===t&&e.settings.locked)return!1;if("foreground"===a.filter)return t===s-1;if("all"===a.filter||a.filter===e.type)return!0;if("large"===a.filter)return e.getRect().width>.75*i.width||e.getRect().height>.75*i.height;if("medium"===a.filter)return e.getRect().width>.25*i.width&&e.getRect().width<.75*i.width&&e.getRect().height>.25*i.height&&e.getRect().height<.75*i.height;if("small"===a.filter)return e.getRect().width<.25*i.width||e.getRect().height<.25*i.height;switch(a.filter){case"odd":return t%2==1;case"even":return t%2==0;case"1-three":return t%3==0;case"2-three":return t%3==1;case"3-three":return t%3==2;case"1-four":return t%4==0;case"2-four":return t%4==1;case"3-four":return t%4==2;case"4-four":return t%4==3}};const p=d},27029:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(){this.color="",this.collapsed=!1,this.numberOfMembers=0}clone(){const e=Object.create(i.prototype);return Object.assign(e,this)}equalTo(e){return!!e&&(this.collapsed===e.collapsed&&this.numberOfMembers===e.numberOfMembers)}}},27311:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GiropayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.GiropayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"GiropayDetails.TypeEnum"}],function(e){let t;!function(e){e.Giropay="giropay"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.GiropayDetails||(t.GiropayDetails={}))},27500:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(42268),a=s(21742),n=s(26806);class r extends n.A{constructor(){super((0,a.A)("dialogChoiceTitle"),!0),this.init=()=>new Promise((e,t)=>{const s=this.content.querySelector("#open-as-new"),i=this.content.querySelector("#open-in-current");this.cancel=()=>{this.cleanUp(),e("close")},s.onclick=()=>{this.cleanUp(),e("create")},i.onclick=()=>{this.cleanUp(),e("layer")}}),this.setContent(`    \n            ${(0,a.A)("dialogChoiceHeadline")}\n            <ul class="push-buttons top-20" style="text-align: center">\n                <li id="open-as-new">\n                    <img src="/img/icon/document-new.svg" class="ic" />\n                    <span>${(0,a.A)("createNew")}</span>\n                </li>\n                <li id="open-in-current">\n                    <img src="/img/icon/document-add.svg" class="ic" />\n                    <span>${(0,a.A)("addCurrent")}</span>\n                </li>\n            </ul>\n        `),(0,i.Ay)("dialog-buttons"+this.mid).style.display="none"}}},27636:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Installments=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Installments=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"extra",baseName:"extra",type:"number"},{name:"plan",baseName:"plan",type:"Installments.PlanEnum"},{name:"value",baseName:"value",type:"number"}],function(e){let t;!function(e){e.BuynowPaylater="buynow_paylater",e.InteresRefundPrctg="interes_refund_prctg",e.InterestBonus="interest_bonus",e.NointeresRefundPrctg="nointeres_refund_prctg",e.NointerestBonus="nointerest_bonus",e.RefundPrctg="refund_prctg",e.Regular="regular",e.Revolving="revolving",e.WithInterest="with_interest"}(t=e.PlanEnum||(e.PlanEnum={}))}(s=t.Installments||(t.Installments={}))},27821:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentCancelRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentCancelRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"reference",baseName:"reference",type:"string"}]},27982:(e,t,s)=>{s.d(t,{A:()=>m});var i=s(21742),a=s(42268),n=s(26806),r=s(7324),o=s(16309),h=s(15818),c=s(14871),l=s(58354),d=s(74785),p=s(53872),u=s(29755);class m extends n.A{constructor(e,t,s){super((0,i.A)("fill"),!1),this.setSectionEvent=e=>{let t=e.target;this.setSection(t.value)},this.setSection=(e="color")=>{switch(this.holder.innerHTML="",this.patternselector=void 0,this.colorselector=void 0,this.gradselector=void 0,(0,a.Ay)("fill-type-"+e).checked=!0,e){case"color":this.colorselector=new d.A(this.holder,void 0,this.setFill,!0,!0,!0);break;case"gradient":this.gradselector=new l.A(this.holder,void 0,this.setFill,!0);break;case"pattern":this.patternselector=new p.A(this.holder,this.setFill)}this.fill&&(this.patternselector&&this.fill.value instanceof c.A&&this.patternselector.setPattern(this.fill.value),this.colorselector&&this.fill.value instanceof h.A&&this.colorselector.setColor(this.fill.value),this.gradselector&&this.fill.value instanceof o.Ay&&this.gradselector.setGrad(this.fill.value))},this.setFill=e=>{this.fill=new r.A(e),this.preview&&this.preview(this.fill)},this.cancel=()=>{this.callback&&this.callback(this.initial),this.cleanUp()},this.apply=()=>{this.callback&&(this.fill&&this.fill.value instanceof h.A&&(0,u.oY)(this.fill.value),this.callback(this.fill)),this.cleanUp()},this.fill=e,this.initial=e,this.preview=s,this.callback=t,this.dialog.style.width="340px",this.content.style.paddingBottom="0px",(0,a.Ay)("dialog-apply"+this.mid).innerText=(0,i.A)("ok");let n=(0,a.T)("div",{style:"position:relative"});this.holder=(0,a.T)("div",{id:"fill-selector-presets",className:"top-10"}),this.setContent(n,(0,a.T)("div",{className:"splitter top-10"}),this.holder),n.innerHTML+=`\n        <div id="fill-type" class="switch-field stretch">\n            <input type="radio" id="fill-type-color" name="fill-type" value="color"/><label for="fill-type-color">${(0,i.A)("color")}</label>\n            <input type="radio" id="fill-type-gradient" name="fill-type" value="gradient" /><label for="fill-type-gradient">${(0,i.A)("gradient")}</label>\n            <input type="radio" id="fill-type-pattern" name="fill-type" value="pattern" /><label for="fill-type-pattern">${(0,i.A)("pattern")}</label>\n        </div>\n        `,(0,a.Ay)("fill-type-color").addEventListener("change",this.setSectionEvent,!0),(0,a.Ay)("fill-type-gradient").addEventListener("change",this.setSectionEvent,!0),(0,a.Ay)("fill-type-pattern").addEventListener("change",this.setSectionEvent,!0),this.setSection(null==e?void 0:e.getType()),this.position()}}},27983:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleHueSaturation")),this.range="main",this.selectRange=e=>{var t,s,i;let a=e.currentTarget,r=(0,n.Ay)("hue-swatches").getElementsByTagName("div");for(var o=0;o<r.length;o++)r[o].classList.remove("active");a.classList.add("active"),this.range=a.getAttribute("data-name");let h=null!==(t=this.shaders.getShaderValue("hue"+("main"!==this.range?"-"+this.range:"")))&&void 0!==t?t:0,c=null!==(s=this.shaders.getShaderValue("saturation"+("main"!==this.range?"-"+this.range:"")))&&void 0!==s?s:0,l=null!==(i=this.shaders.getShaderValue("lightness"+("main"!==this.range?"-"+this.range:"")))&&void 0!==i?i:0;this.hue.setValue(h),this.sat.setValue(c),this.lig.setValue(l)},this.kind="hueSaturation",this.setContent((0,n.T)("div",{id:"swatches-section"},(0,n.T)("label",{},(0,r.A)("range")),(0,n.T)("div",{id:"hue-swatches",className:"swatches top-4",style:"width:100%"})),(0,n.T)("div",{id:"hue"}),(0,n.T)("div",{id:"saturation",className:"top-16"}),(0,n.T)("div",{id:"lightness",className:"top-16"}),(0,n.T)("input",{type:"checkbox",id:"colorize"}),(0,n.T)("label",{className:"top-20 switch",htmlFor:"colorize"},(0,r.A)("colorize"),(0,n.T)("span"))),(0,n.Ay)("hue-swatches").innerHTML=`\n            <div class="active" data-name="main" flow="up" tooltip="${(0,r.A)("main")}" style="margin-right:15px;"><span class="ic" style="background-color: #ccc;"></span></div>\n            <div data-name="red" flow="up" tooltip="${(0,r.A)("red")}"><span style="background-color: #D1320E"></span></div>\n            <div data-name="yellow" flow="up" tooltip="${(0,r.A)("yellow")}"><span style="background-color: #bbb215"></span></div>\n            <div data-name="green" flow="up" tooltip="${(0,r.A)("green")}"><span style="background-color: #64ab24"></span></div>\n            <div data-name="cyan" flow="up" tooltip="${(0,r.A)("cyan")}"><span style="background-color: #3EB4BF"></span></div>\n            <div data-name="blue" flow="up" tooltip="${(0,r.A)("blue")}"><span style="background-color: #2F4DE6"></span></div>\n            <div data-name="magenta" flow="up" tooltip="${(0,r.A)("magenta")}"><span style="background-color: #BF3E8A"></span></div>\n        `;let t=(0,n.Ay)("hue-swatches").getElementsByTagName("div");for(let s=0;s<t.length;s++)t[s].addEventListener("click",this.selectRange,!1);this.hue=new a.A("hue",{label:(0,r.A)("hue"),range:[-180,180],step:1,labelFormat:e=>String(e),labelParse:e=>parseInt(e,10),onChange:e=>{this.isColorize?this.change("colorize",e+181):"main"===this.range?this.change("hue",e):this.change("hue-"+this.range,e)}}),this.sat=new a.A("saturation",{label:(0,r.A)("saturation"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>{"main"===this.range?this.change("saturation",e):this.change("saturation-"+this.range,e)}}),this.lig=new a.A("lightness",{label:(0,r.A)("lightness"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>{"main"===this.range?this.change("lightness",e):this.change("lightness-"+this.range,e)}}),(0,n.Ay)("colorize").addEventListener("click",()=>{this.shaders.chain=[],this.isColorize=(0,n.Ay)("colorize").checked,(0,n.Ay)("swatches-section").style.display=this.isColorize?"none":"block",this.hue.setValue(0),this.sat.setValue(0),this.lig.setValue(0),this.change("colorize",this.isColorize?181:0)})}}},28153:(e,t,s)=>{s.d(t,{A:()=>a});class i{constructor(e,t,s,a=0,n=0,r=i.SPEED_NORMAL,o=0,h=0){this.name=e,this.motions=t,this.option=s,this.duration=a,this.delay=n,this.speed=r,this.repeat=o,this.gap=h}}i.SPEED_SNAIL=3,i.SPEED_SLOW=2,i.SPEED_NORMAL=1,i.SPEED_FAST=.5,i.SPEED_FLASH=.25;const a=i},28329:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titlePixelate")),this.setContent((0,n.T)("div",{id:"pixelate-slider"})),new a.A("pixelate-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("pixelate",e)})}}},28754:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(42268);class a{constructor(){this.notification=e=>{var t;const s=null!==(t=(0,i.Ay)("notification"))&&void 0!==t?t:this.addNotif();this.notiId&&(clearTimeout(this.notiId),s.innerHTML="",s.style.display="none"),requestAnimationFrame(()=>{s.style.display="block",s.innerHTML='<div class="message">'+e.detail+"</div>",this.position(s)}),this.notiId=setTimeout(function(){s.innerHTML="",s.style.top="-999px",s.style.left="-999px",s.style.display="none"},1500)},this.legend=e=>{var t;const s=null!==(t=(0,i.Ay)("notification"))&&void 0!==t?t:this.addNotif();if("stop"===e.detail)return s.innerHTML="",s.style.top="-999px",s.style.left="-999px",void(s.style.display="none");s.style.display="block",""===s.innerHTML?s.innerHTML='<div id="legend" class="legend">'+e.detail+"</div>":(0,i.Ay)("legend")&&((0,i.Ay)("legend").innerText=e.detail),this.position(s)},this.loading=e=>{var t;const s=null!==(t=(0,i.Ay)("notification"))&&void 0!==t?t:this.addNotif();"stop"!==e.detail?(this.notiId&&(clearTimeout(this.notiId),s.innerHTML="",s.style.display="none"),this.notiId=setTimeout(()=>{this.keepLoading?this.keepLoading=!1:(s.innerHTML="",s.style.top="-999px",s.style.left="-999px",s.style.display="none")},400),s.style.display="block",s.innerHTML=`\n            <div class="spinner">\n                <label class="working">${"start"===e.detail?"Loading":e.detail}</label>\n            </div>\n        `,this.keepLoading=!0,this.position(s)):this.keepLoading?this.keepLoading=!1:(s.innerHTML="",s.style.display="none")},this.addNotif=()=>{const e=(0,i.T)("div",{id:"notification"});return document.body.append(e),e},this.position=e=>{let t=0!==document.getElementsByClassName("modal").length,s=(0,i.Ay)("splash")&&"none"!==(0,i.Ay)("splash").style.display,a=0!==document.getElementsByClassName("canvas").length;if(t||s||!a)e.style.top=Math.round(document.documentElement.scrollTop+window.innerHeight/2-e.clientHeight/2)+"px",e.style.left=Math.round(document.body.clientWidth/2-e.clientWidth/2)+"px";else{const t=document.querySelector(".canvas").getBoundingClientRect();e.style.top=Math.round(t.height/2+t.top-e.clientHeight/2)/1.5+"px",e.style.left=Math.round(t.width/2+t.left-e.clientWidth/2)+"px"}},document.addEventListener("legend",e=>this.legend(e),!0),document.addEventListener("loading",e=>this.loading(e),!0),document.addEventListener("notification",e=>this.notification(e),!0)}}},28883:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BankAccount=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.BankAccount=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"bankAccountNumber",baseName:"bankAccountNumber",type:"string"},{name:"bankCity",baseName:"bankCity",type:"string"},{name:"bankLocationId",baseName:"bankLocationId",type:"string"},{name:"bankName",baseName:"bankName",type:"string"},{name:"bic",baseName:"bic",type:"string"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"iban",baseName:"iban",type:"string"},{name:"ownerName",baseName:"ownerName",type:"string"},{name:"taxId",baseName:"taxId",type:"string"}]},29196:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SessionResultResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.SessionResultResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"id",baseName:"id",type:"string"},{name:"status",baseName:"status",type:"SessionResultResponse.StatusEnum"}],function(e){let t;!function(e){e.Active="active",e.Canceled="canceled",e.Completed="completed",e.Expired="expired",e.PaymentPending="paymentPending",e.Refused="refused"}(t=e.StatusEnum||(e.StatusEnum={}))}(s=t.SessionResultResponse||(t.SessionResultResponse={}))},29654:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentCompletionDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentCompletionDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"MD",baseName:"MD",type:"string"},{name:"PaReq",baseName:"PaReq",type:"string"},{name:"PaRes",baseName:"PaRes",type:"string"},{name:"authorization_token",baseName:"authorization_token",type:"string"},{name:"billingToken",baseName:"billingToken",type:"string"},{name:"cupsecureplus_smscode",baseName:"cupsecureplus.smscode",type:"string"},{name:"facilitatorAccessToken",baseName:"facilitatorAccessToken",type:"string"},{name:"oneTimePasscode",baseName:"oneTimePasscode",type:"string"},{name:"orderID",baseName:"orderID",type:"string"},{name:"payerID",baseName:"payerID",type:"string"},{name:"payload",baseName:"payload",type:"string"},{name:"paymentID",baseName:"paymentID",type:"string"},{name:"paymentStatus",baseName:"paymentStatus",type:"string"},{name:"redirectResult",baseName:"redirectResult",type:"string"},{name:"resultCode",baseName:"resultCode",type:"string"},{name:"threeDSResult",baseName:"threeDSResult",type:"string"},{name:"threeds2_challengeResult",baseName:"threeds2.challengeResult",type:"string"},{name:"threeds2_fingerprint",baseName:"threeds2.fingerprint",type:"string"},{name:"vaultToken",baseName:"vaultToken",type:"string"}]},29755:(e,t,s)=>{s.d(t,{Ay:()=>u,Lr:()=>c,P2:()=>l,ZC:()=>r,oY:()=>o,pp:()=>h});var i=s(42268),a=s(98244),n=s(41915);function r(e,t){(0,a.A)("setting-"+e,t.toString());const s=window.localStorage.getItem("user-settings"),i=JSON.parse(s||"{}");p[e]=i[e]=t,window.localStorage.setItem("user-settings",JSON.stringify(i)),document.dispatchEvent(new CustomEvent("user-setting-updated",{detail:e}))}function o(e){let t=e.toHEX(),s=p.oldColor.findIndex(e=>e===t);s>-1?p.oldColor.splice(0,0,p.oldColor.splice(s,1)[0]):(p.oldColor.pop(),p.oldColor.unshift(t)),r("oldColor",p.oldColor)}function h(){let e=1,t=d();p.ddid&&""!==p.ddid&&-1!==p.ddid.indexOf(":")&&Number(p.ddid.split(":")[0])===t&&(e=Number(p.ddid.split(":")[1])+1),r("ddid",t+":"+e),(0,a.A)("daily-saves",e.toString())}function c(){if(p.ddid&&""!==p.ddid&&-1!==p.ddid.indexOf(":")&&Number(p.ddid.split(":")[0])===d()){let e=Number(p.ddid.split(":")[1]);return e<=0&&(e=666),e}return 0}function l(){return c()>=3}function d(){let e=new Date;return(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())-Date.UTC(e.getFullYear(),0,0))/24/60/60/1e3}const p=function(){const e={product:"web",debug:"",cdnUrl:"",isIOS:!1,isHDPI:!1,isSafari:!1,canTouch:!1,accent:"default",workspace:"default",disabledTools:[],allTooltip:!1,autoSelect:!0,showGuides:!0,snapToGuides:!0,smoothScaling:!0,askToPreResize:!0,useLegacySave:!1,performanceMode:!1,scrollMode:"zoom",maxHistoryUndos:25,boxBarXState:"maximized",panelFloating:!1,panelNavigator:!0,panelLayer:!0,panelHistory:!0,barQuicklink:!0,mainColor:"#ffffff",altColor:"#000000",oldColor:["#A8534B","#EC9D75","#F9D697","#DCE6A7","#9ADFB0","#57CBAB","#38A793","#5A5E5A"],gradients:[],dialogPos:new n.A(0,0),adyenClientKey:"",lastNewsCheck:"1970-01-01T00:00:00Z",ddid:""};return Object.assign(e,(()=>{const e=window.localStorage.getItem("user-settings");return JSON.parse(e||"{}")})()),Object.assign(e,(()=>{const e=new URL(window.location.href),t={};return e.searchParams.forEach((e,s)=>{t[s]=e}),t})()),Object.assign(e,(()=>{const e=(0,i.Ay)("config_data");if(e&&e.innerText){let e=JSON.parse((0,i.Ay)("config_data").innerText);return(0,i.Ay)("config_data").remove(),e}return{}})()),e}(),u=p},29821:(e,t,s)=>{s.d(t,{Ad:()=>R,HY:()=>G,NT:()=>N,Py:()=>H,Qj:()=>V,Qm:()=>U,Qn:()=>X,TD:()=>M,TX:()=>D,UM:()=>P,Vx:()=>z,Wd:()=>L,Zi:()=>$,_4:()=>q,_k:()=>O,bk:()=>j,gC:()=>C,l9:()=>_,lI:()=>n,tc:()=>I,yc:()=>W,zP:()=>B,zg:()=>F});var i=s(40963);let a;function n(e){a=e}e=s.hmd(e);const r=new Array(128).fill(void 0);r.push(void 0,null,!0,!1);let o=r.length;function h(e){o===r.length&&r.push(r.length+1);const t=o;return o=r[t],r[t]=e,t}function c(e){return r[e]}function l(e){const t=c(e);return function(e){e<132||(r[e]=o,o=e)}(e),t}let d=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});d.decode();let p=null;function u(){return null!==p&&0!==p.byteLength||(p=new Uint8Array(a.memory.buffer)),p}function m(e,t){return e>>>=0,d.decode(u().subarray(e,e+t))}let g=0;function y(e,t){const s=t(1*e.length,1)>>>0;return u().set(e,s/1),g=e.length,s}let v=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const f="function"==typeof v.encodeInto?function(e,t){return v.encodeInto(e,t)}:function(e,t){const s=v.encode(e);return t.set(s),{read:e.length,written:s.length}};function b(e,t,s){if(void 0===s){const s=v.encode(e),i=t(s.length,1)>>>0;return u().subarray(i,i+s.length).set(s),g=s.length,i}let i=e.length,a=t(i,1)>>>0;const n=u();let r=0;for(;r<i;r++){const t=e.charCodeAt(r);if(t>127)break;n[a+r]=t}if(r!==i){0!==r&&(e=e.slice(r)),a=s(a,i,i=r+3*e.length,1)>>>0;const t=u().subarray(a+r,a+i);r+=f(e,t).written}return g=r,a}let w=null;function A(){return null!==w&&0!==w.byteLength||(w=new Int32Array(a.memory.buffer)),w}let x=null;function k(e,t){return e>>>=0,(null!==x&&0!==x.byteLength||(x=new Uint8ClampedArray(a.memory.buffer)),x).subarray(e/1,e/1+t)}function S(e,t){return e>>>=0,u().subarray(e/1,e/1+t)}let E=null;function T(e,t){return e>>>=0,(null!==E&&0!==E.byteLength||(E=new Float32Array(a.memory.buffer)),E).subarray(e/4,e/4+t)}function C(e,t,s){try{const o=a.__wbindgen_add_to_stack_pointer(-16),h=y(s,a.__wbindgen_malloc),c=g;a.distanceTransform(o,e,t,h,c);var i=A()[o/4+0],n=A()[o/4+1],r=T(i,n).slice();return a.__wbindgen_free(i,4*n),r}finally{a.__wbindgen_add_to_stack_pointer(16)}}function M(e,t,s){try{const o=a.__wbindgen_add_to_stack_pointer(-16),h=y(s,a.__wbindgen_malloc),c=g;a.distanceTransformInv(o,e,t,h,c);var i=A()[o/4+0],n=A()[o/4+1],r=T(i,n).slice();return a.__wbindgen_free(i,4*n),r}finally{a.__wbindgen_add_to_stack_pointer(16)}}class P{static __wrap(e){e>>>=0;const t=Object.create(P.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_displacement_free(e)}constructor(e,t,s,i,n,r){const o=y(e,a.__wbindgen_malloc),h=g,c=a.displacement_new(o,h,t,s,i,n,r);return P.__wrap(c)}beginStroke(){const e=a.displacement_beginStroke(this.__wbg_ptr);return I.__wrap(e)}setStampSize(e){a.displacement_setStampSize(this.__wbg_ptr,e)}setDensity(e){a.displacement_setDensity(this.__wbg_ptr,e)}setStrength(e){a.displacement_setStrength(this.__wbg_ptr,e)}retarget(e,t,s){const i=y(e,a.__wbindgen_malloc),n=g;a.displacement_retarget(this.__wbg_ptr,i,n,t,s)}setMode(e){const t=b(e,a.__wbindgen_malloc,a.__wbindgen_realloc),s=g;a.displacement_setMode(this.__wbg_ptr,t,s)}applyFast(e){return l(a.displacement_applyFast(this.__wbg_ptr,h(e)))}applyQuality(e){return l(a.displacement_applyQuality(this.__wbg_ptr,h(e)))}}class D{static __wrap(e){e>>>=0;const t=Object.create(D.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_gif_free(e)}constructor(e,t,s){try{const r=a.__wbindgen_add_to_stack_pointer(-16);a.gif_new(r,e,t,s);var i=A()[r/4+0],n=A()[r/4+1];if(A()[r/4+2])throw l(n);return D.__wrap(i)}finally{a.__wbindgen_add_to_stack_pointer(16)}}addFrame(e,t,s){try{const n=a.__wbindgen_add_to_stack_pointer(-16),r=y(e,a.__wbindgen_malloc),o=g;a.gif_addFrame(n,this.__wbg_ptr,r,o,t,s);var i=A()[n/4+0];if(A()[n/4+1])throw l(i)}finally{a.__wbindgen_add_to_stack_pointer(16)}}takeResult(){try{const i=this.__destroy_into_raw(),n=a.__wbindgen_add_to_stack_pointer(-16);a.gif_takeResult(n,i);var e=A()[n/4+0],t=A()[n/4+1],s=k(e,t).slice();return a.__wbindgen_free(e,1*t),s}finally{a.__wbindgen_add_to_stack_pointer(16)}}}class N{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_gifbuffer_free(e)}}class L{static __wrap(e){e>>>=0;const t=Object.create(L.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_layer_free(e)}get kind(){let e,t;try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.layer_kind(n,this.__wbg_ptr);var s=A()[n/4+0],i=A()[n/4+1];return e=s,t=i,m(s,i)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(e,t,1)}}get x(){return a.layer_x(this.__wbg_ptr)}get y(){return a.layer_y(this.__wbg_ptr)}get name(){let e,t;try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.layer_name(n,this.__wbg_ptr);var s=A()[n/4+0],i=A()[n/4+1];return e=s,t=i,m(s,i)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(e,t,1)}}get width(){return a.layer_width(this.__wbg_ptr)}get height(){return a.layer_height(this.__wbg_ptr)}get alpha(){return a.layer_alpha(this.__wbg_ptr)}get blendMode(){let e,t;try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.layer_blendMode(n,this.__wbg_ptr);var s=A()[n/4+0],i=A()[n/4+1];return e=s,t=i,m(s,i)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(e,t,1)}}get visible(){return 0!==a.layer_visible(this.__wbg_ptr)}get locked(){return 0!==a.layer_locked(this.__wbg_ptr)}get rotation(){return a.layer_rotation(this.__wbg_ptr)}takeCanvas(){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.layer_takeCanvas(i,this.__wbg_ptr);var e=A()[i/4+0],t=A()[i/4+1],s=k(e,t).slice();return a.__wbindgen_free(e,1*t),s}finally{a.__wbindgen_add_to_stack_pointer(16)}}takeMask(){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.layer_takeMask(i,this.__wbg_ptr);var e=A()[i/4+0],t=A()[i/4+1],s=k(e,t).slice();return a.__wbindgen_free(e,1*t),s}finally{a.__wbindgen_add_to_stack_pointer(16)}}get meta(){let e,t;try{const n=a.__wbindgen_add_to_stack_pointer(-16);a.layer_meta(n,this.__wbg_ptr);var s=A()[n/4+0],i=A()[n/4+1];return e=s,t=i,m(s,i)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(e,t,1)}}}class R{static __wrap(e){e>>>=0;const t=Object.create(R.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_mp4_free(e)}constructor(e){try{const i=a.__wbindgen_add_to_stack_pointer(-16);a.mp4_new(i,e);var t=A()[i/4+0],s=A()[i/4+1];if(A()[i/4+2])throw l(s);return R.__wrap(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}addVideoTrack(e,t,s){try{const r=a.__wbindgen_add_to_stack_pointer(-16),o=y(s,a.__wbindgen_malloc),h=g;a.mp4_addVideoTrack(r,this.__wbg_ptr,e,t,o,h);var i=A()[r/4+0],n=A()[r/4+1];if(A()[r/4+2])throw l(n);return i>>>0}finally{a.__wbindgen_add_to_stack_pointer(16)}}addFrame(e,t,s,i,n,r){try{const h=a.__wbindgen_add_to_stack_pointer(-16),c=y(r,a.__wbindgen_malloc),d=g;a.mp4_addFrame(h,this.__wbg_ptr,e,t,s,i,n,c,d);var o=A()[h/4+0];if(A()[h/4+1])throw l(o)}finally{a.__wbindgen_add_to_stack_pointer(16)}}fetchFile(){try{const n=this.__destroy_into_raw(),r=a.__wbindgen_add_to_stack_pointer(-16);a.mp4_fetchFile(r,n);var e=A()[r/4+0],t=A()[r/4+1],s=A()[r/4+2];if(A()[r/4+3])throw l(s);var i=S(e,t).slice();return a.__wbindgen_free(e,1*t),i}finally{a.__wbindgen_add_to_stack_pointer(16)}}}class _{static __wrap(e){e>>>=0;const t=Object.create(_.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_pxd_free(e)}get width(){return a.__wbg_get_pxd_width(this.__wbg_ptr)}set width(e){a.__wbg_set_pxd_width(this.__wbg_ptr,e)}get height(){return a.__wbg_get_pxd_height(this.__wbg_ptr)}set height(e){a.__wbg_set_pxd_height(this.__wbg_ptr,e)}get layers(){return a.__wbg_get_pxd_layers(this.__wbg_ptr)}set layers(e){a.__wbg_set_pxd_layers(this.__wbg_ptr,e)}static decode(e){try{const i=a.__wbindgen_add_to_stack_pointer(-16),n=y(e,a.__wbindgen_malloc),r=g;a.pxd_decode(i,n,r);var t=A()[i/4+0],s=A()[i/4+1];if(A()[i/4+2])throw l(s);return _.__wrap(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}takeNextLayer(){try{const s=a.__wbindgen_add_to_stack_pointer(-16);a.pxd_takeNextLayer(s,this.__wbg_ptr);var e=A()[s/4+0],t=A()[s/4+1];if(A()[s/4+2])throw l(t);return L.__wrap(e)}finally{a.__wbindgen_add_to_stack_pointer(16)}}}class I{static __wrap(e){e>>>=0;const t=Object.create(I.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_stroke_free(e)}push(e,t,s){return l(a.stroke_push(this.__wbg_ptr,e,t,s))}}class F{static __wrap(e){e>>>=0;const t=Object.create(F.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_zipreader_free(e)}constructor(e){try{const i=a.__wbindgen_add_to_stack_pointer(-16),n=y(e,a.__wbindgen_malloc),r=g;a.zipreader_new(i,n,r);var t=A()[i/4+0],s=A()[i/4+1];if(A()[i/4+2])throw l(s);return F.__wrap(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}readFile(e){try{const r=a.__wbindgen_add_to_stack_pointer(-16),o=b(e,a.__wbindgen_malloc,a.__wbindgen_realloc),h=g;a.zipreader_readFile(r,this.__wbg_ptr,o,h);var t=A()[r/4+0],s=A()[r/4+1],i=A()[r/4+2];if(A()[r/4+3])throw l(i);var n=S(t,s).slice();return a.__wbindgen_free(t,1*s),n}finally{a.__wbindgen_add_to_stack_pointer(16)}}readString(e){let t,s;try{const d=a.__wbindgen_add_to_stack_pointer(-16),p=b(e,a.__wbindgen_malloc,a.__wbindgen_realloc),u=g;a.zipreader_readString(d,this.__wbg_ptr,p,u);var i=A()[d/4+0],n=A()[d/4+1],r=A()[d/4+2],o=A()[d/4+3],h=i,c=n;if(o)throw h=0,c=0,l(r);return t=h,s=c,m(h,c)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(t,s,1)}}}class z{static __wrap(e){e>>>=0;const t=Object.create(z.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();a.__wbg_zipwriter_free(e)}constructor(){const e=a.zipwriter_new();return z.__wrap(e)}writeFile(e,t,s){try{const n=a.__wbindgen_add_to_stack_pointer(-16),r=b(e,a.__wbindgen_malloc,a.__wbindgen_realloc),o=g,h=y(t,a.__wbindgen_malloc),c=g;a.zipwriter_writeFile(n,this.__wbg_ptr,r,o,h,c,s);var i=A()[n/4+0];if(A()[n/4+1])throw l(i)}finally{a.__wbindgen_add_to_stack_pointer(16)}}writeString(e,t,s){try{const n=a.__wbindgen_add_to_stack_pointer(-16),r=b(e,a.__wbindgen_malloc,a.__wbindgen_realloc),o=g,h=b(t,a.__wbindgen_malloc,a.__wbindgen_realloc),c=g;a.zipwriter_writeFile(n,this.__wbg_ptr,r,o,h,c,s);var i=A()[n/4+0];if(A()[n/4+1])throw l(i)}finally{a.__wbindgen_add_to_stack_pointer(16)}}finish(){try{const n=this.__destroy_into_raw(),r=a.__wbindgen_add_to_stack_pointer(-16);a.zipwriter_finish(r,n);var e=A()[r/4+0],t=A()[r/4+1],s=A()[r/4+2];if(A()[r/4+3])throw l(s);var i=S(e,t).slice();return a.__wbindgen_free(e,1*t),i}finally{a.__wbindgen_add_to_stack_pointer(16)}}}function O(e){return c(e).x}function q(e){return c(e).y}function B(e){return c(e).width}function U(e){return c(e).height}function H(){return h(a.memory)}function V(e){return h(c(e).buffer)}function $(e,t,s){return h(new Uint8ClampedArray(c(e),t>>>0,s>>>0))}function j(e){l(e)}function G(e,t,s,a){return h(new i.A(e,t,s,a))}function W(e,t){return h(m(e,t))}function X(e,t){throw new Error(m(e,t))}},30814:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceRenderOptions=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.DeviceRenderOptions=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"sdkInterface",baseName:"sdkInterface",type:"DeviceRenderOptions.SdkInterfaceEnum"},{name:"sdkUiType",baseName:"sdkUiType",type:"Array<DeviceRenderOptions.SdkUiTypeEnum>"}],function(e){let t,s;!function(e){e.Native="native",e.Html="html",e.Both="both"}(t=e.SdkInterfaceEnum||(e.SdkInterfaceEnum={})),function(e){e.MultiSelect="multiSelect",e.OtherHtml="otherHtml",e.OutOfBand="outOfBand",e.SingleSelect="singleSelect",e.Text="text"}(s=e.SdkUiTypeEnum||(e.SdkUiTypeEnum={}))}(s=t.DeviceRenderOptions||(t.DeviceRenderOptions={}))},30821:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(42268),a=s(21742),n=s(26806),r=s(54738),o=s(53900),h=s(79453),c=s(29755);class l extends n.A{constructor(e,t){if(super((0,a.A)("dialogPreResizeTitle")),this.rotation=0,this.size=1920,this.init=()=>new Promise((e,t)=>{this.apply=()=>{(0,i.Ay)("preresize-never-ask-again").checked&&(0,c.ZC)("askToPreResize",!1);const t=new o.A(Number((0,i.Ay)("pre-resize-width").value),Number((0,i.Ay)("pre-resize-height").value)),s=(0,i.Ay)("pre-resize-auto-rotate").checked?this.rotation:0;this.cleanUp(),e([t,s])},this.cancel=()=>{this.cleanUp(),e([void 0,void 0])}}),this.presetChange=e=>{let t=e.currentTarget,s=(0,i.Ay)("pre-resize-preset").getElementsByTagName("li");for(var a=0;a<s.length;a++)s[a].classList.remove("selected");t.classList.add("selected"),this.size=Number(t.getAttribute("data")),this.setSize()},this.imageSizeInputChange=e=>{let t,s,a=e.currentTarget;"pre-resize-width"===a.id?(t=r.qE(Number(a.value),1,this.width),s=Math.round(t/this.width*this.height)):(s=r.qE(Number(a.value),1,this.height),t=Math.round(s/this.height*this.width)),(0,i.Ay)("pre-resize-height").value=s.toString(),(0,i.Ay)("pre-resize-width").value=t.toString()},this.setSize=()=>{let e=(0,i.Ay)("pre-resize-width"),t=(0,i.Ay)("pre-resize-height");this.width>this.height?(e.value=this.size.toString(),t.value=Math.round(this.size/this.width*this.height).toString()):(t.value=this.size.toString(),e.value=Math.round(this.size/this.height*this.width).toString())},"premium"===(null===h.N||void 0===h.N?void 0:h.N.subscriptionAccess)?this.dialog.style.maxWidth="560px":this.dialog.style.maxWidth="480px",this.image=e,90===t||-90===t?(this.height=e.width,this.width=e.height):(this.width=e.width,this.height=e.height),this.rotation=t,this.setContent(`\n            <span style="display: block;">${(0,a.A)("dialogPreResizeInfo1")} (<span id="pre-resize-start"></span>) ${(0,a.A)("dialogPreResizeInfo2")}</span>\n\n            <input type="checkbox" id="preresize-never-ask-again" />\n            <label class="switch top-10" for="preresize-never-ask-again">${(0,a.A)("neverAskMeAgain")}<span></span></label>\n\n            <span id="pre-resize-auto-rotate-setting" style="display:none;">\n                <input type="checkbox" checked id="pre-resize-auto-rotate" />\n                <label class="switch top-20" for="pre-resize-auto-rotate">${(0,a.A)("dialogPreResizeExif")}<span></span></label>\n            </span>\n        \n            <ul id="pre-resize-preset" class="push-buttons top-20">\n                <li id="pre-resize-original" data="4096"><img src="/img/icon/layer-image.svg" class="ic"><span>${(0,a.A)("original")}<br /><small id="pre-resize-uhd-size">Max 3840 px</small></span></li>\n                <li id="pre-resize-uhd" data="3840"><img src="/img/icon/size-uhd.svg" class="ic"><span>${(0,a.A)("sizeUltraHD")}<br /><small>Max 3840 px</small></span></li>\n                <li id="pre-resize-fhd" data="1920" class="selected"><img src="/img/icon/size-fhd.svg" class="ic"><span>${(0,a.A)("sizeFullHD")}<br /><small>Max 1920 px</small></span></li>\n                <li id="pre-resize-uhd" data="1280"><img src="/img/icon/size-web.svg" class="ic"><span>${(0,a.A)("sizeWeb")}<br /><small>Max 1280 px</small></span></li>\n            </ul>\n\n            <div class="top-20" style="text-align:right;line-height:32px;">${(0,a.A)("newSize")}<input type="number" style="text-align:center;margin-left:16px" id="pre-resize-width"/> x <input type="number" style="text-align:center" id="pre-resize-height"/></div>\n        `),this.maxSize="premium"===(null===h.N||void 0===h.N?void 0:h.N.subscriptionAccess)?8192:4096,"premium"===(null===h.N||void 0===h.N?void 0:h.N.subscriptionAccess)?(this.width<3840&&this.height<3840&&((0,i.Ay)("pre-resize-uhd").style.display="none"),(0,i.Ay)("pre-resize-original").setAttribute("data",Math.min(Math.max(this.width,this.height),this.maxSize).toString()),(0,i.Ay)("pre-resize-uhd-size").innerText=(0,a.A)("dialogPreResizeMaxSize",Math.min(Math.max(this.width,this.height),this.maxSize))):this.width<3840&&this.height<3840?((0,i.Ay)("pre-resize-uhd").style.display="none",(0,i.Ay)("pre-resize-original").setAttribute("data",Math.max(this.width,this.height).toString()),(0,i.Ay)("pre-resize-uhd-size").innerText=(0,a.A)("dialogPreResizeMaxSize",Math.max(this.width,this.height))):(0,i.Ay)("pre-resize-original").style.display="none",0!==t){let e=(0,i.Ay)("pre-resize-auto-rotate-setting");e.style.display="block",e.addEventListener("change",()=>{let e=(0,i.Ay)("pre-resize-width"),t=(0,i.Ay)("pre-resize-height");const s=e.value;e.value=t.value,t.value=s},!1)}(0,i.Ay)("pre-resize-start").innerText=this.width.toString()+" x "+this.height.toString();let s=(0,i.Ay)("pre-resize-preset").getElementsByTagName("li");for(var n=0;n<s.length;n++)s[n].addEventListener("click",this.presetChange,!1);this.setSize(),(0,i.Ay)("pre-resize-width").addEventListener("change",this.imageSizeInputChange,!1),(0,i.Ay)("pre-resize-height").addEventListener("change",this.imageSizeInputChange,!1)}}},30973:(e,t,s)=>{s.d(t,{A:()=>y});var i=s(21742),a=s(26806),n=s(82042),r=s(42268),o=s(54738),h=s(98244),c=s(79453),l=s(72284),d=s(11839),p=s(3514),u=s(29755);class m extends l.A{constructor(){super(!0),(0,h.A)("after_save"),this.dialog.style.maxWidth="420px",this.setContent(`\n            <div id="after-content" style="padding:20px 0 20px;display:flex;position:relative;flex-direction:column;align-items:center;min-height:420px;">\n\n                <div style="padding:30px 30px 0px 30px;">\n                    <h2 class="split">${(0,i.A)("common-success")} <span style="font-weight:bold;font-size:small">${(0,u.Lr)()}/3  ${(0,i.A)("common-freeSave")}</span></h2>\n                    <div id="after-save-message" style="padding-top:16px"></div>\n\n                    <button id="premium-go-now" style="display:none;margin-top:140px;" class="button large w-100">${(null===c.N||void 0===c.N?void 0:c.N.eligibleForTrail)?(0,i.A)("try30DayFreePremium"):(0,i.A)("subscribeNow")}</button>\n                </div>\n\n                <div id="after-entry" class="top-20"></div>\n            </div>\n        `),this.dialog.style.overflow="unset",c.N?(this.dialog.append((0,r.T)("div",{className:"premium-plug"},(0,r.T)("img",{src:"/img/icon/premium.svg"}))),(0,r.Ay)("premium-go-now").addEventListener("click",async()=>{this.cleanUp(),new p.A("afterSave","premium")},!0),(0,r.Ay)("after-save-message").innerText=(0,i.A)("common-afterFileSaveTryPremium"),(0,r.Ay)("premium-go-now").style.display="block"):(new d.Ay({holder:(0,r.Ay)("after-entry")}),this.dialog.append((0,r.T)("div",{className:"user-plug"},(0,r.T)("img",{src:"/img/icon/user.svg"}))),(0,r.Ay)("after-save-message").innerText=(0,i.A)("common-afterFileSaveRegister"))}}var g=s(66718);class y extends a.A{constructor(e,t){if(super((0,i.A)("dialogSaveTitle"),!0),this.setType=e=>{const t=e.currentTarget.getAttribute("data");this.changeType(t)},this.changeType=(e,t=!1)=>{if(!t&&this.type===e)return;let s;if("jpg"===e){s=Number((0,r.Ay)("jpg-width").value)/this.stage.fresco.width}this.type&&(0,r.Ay)("type-"+this.type).classList.remove("active"),(0,r.Ay)("type-"+e).classList.add("active"),this.type=e,this.canvas.remove();let i="jpg"===this.type||"pdf"===this.type||"png"===this.type&&!(0,r.Ay)("png-transparent").checked||"webp"===this.type&&!(0,r.Ay)("webp-transparent").checked;this.canvas=this.stage.getOutputCanvas(this.stage.fresco,s,i?"#ffffff":void 0),(null===c.N||void 0===c.N?void 0:c.N.subscription)||(this.canvas.oncontextmenu=()=>!1),(0,r.Ay)("save-file-prop").innerHTML=this.canvas.width+" x "+this.canvas.height+"px",(0,r.Ay)("save-file-type").innerHTML="."+this.type,(0,r.Ay)("save-preview").prepend(this.canvas),this.renderBlob()},this.jpgSizeChange=e=>{let t=e.currentTarget;if(""!==t.value){if("jpg-width"===t.id){const e=o.qE(Number(t.value),1,this.canvas.width),s=Math.round(e/this.stage.fresco.width*this.stage.fresco.height);(0,r.Ay)("jpg-height").value=s.toString()}else{const e=o.qE(Number(t.value),1,this.canvas.width),s=Math.round(e/this.stage.fresco.height*this.stage.fresco.width);(0,r.Ay)("jpg-width").value=s.toString()}o.sg("save",500,()=>this.changeType("jpg",!0))}},this.renderBlob=async()=>{if((0,r.Ay)("save-file-size").innerText=(0,i.A)("dialogSaveCalculate"),"pxz"===this.type)return this.blob=void 0,void((0,r.Ay)("save-file-size").innerText=`Format: ${this.type}`);if("pdf"===this.type)return void this.canvas.toBlob(e=>{this.blob=e,(0,r.Ay)("save-file-size").innerText=`Format: ${this.type}, size: ${o.Ov(e.size+1024)}`},"image/jpeg",.95);const e="image/"+this.type.replace("jpg","jpeg"),t="jpg"===this.type?this.jpgquality.getValue():"webp"===this.type?this.webpquality.getValue():1;this.canvas.toBlob(e=>{this.blob=e,(0,r.Ay)("save-file-size").innerText=`Format: ${this.type}, size: ${o.Ov(e.size)}`},e,t)},this.applyAPI=async(e="client")=>{this.setWorking();let t=this.stage.fresco.name,s=this.stage.fresco.saveMethod;const i=this.type;let a=(0,r.Ay)("save-file-name").value||this.stage.fresco.name||"Untitled";if("pxz"===i){this.setMessage("Creating your PXZ file","You've selected a large file format, please wait while we create the file for you.");try{this.blob=await(0,g.Ab)(this.stage,{id:this.stage.fresco.id,name:t,quality:1,nonDestructive:(0,r.Ay)("save-pxz-ndestuctive").checked,type:"document",unit:"pixel"})}catch(c){return console.error(c),void this.setMessage("Error when creating PXZ file")}}"pdf"===i&&(this.blob=await(0,g.EB)(this.stage.fresco.width,this.stage.fresco.height,this.blob));const n=u.Ay.follow;let o=`image/${i}`;switch(i){case"pdf":o="application/pdf";break;case"pxz":o="application/pxz"}const h=new File([this.blob],a+"."+i,{type:o});if(s instanceof MessagePort)s.postMessage(h);else if(s instanceof URL&&n){const e=(0,r.T)("form");e.method="post",e.action=s.toString(),e.enctype="multipart/form-data",document.body.append(e),e.addEventListener("formdata",e=>{e.formData.append("file",h)}),e.submit()}else if(s instanceof URL&&!n){const t=new FormData;t.append("file",h),this.setMessage("Saving",`Uploading image to ${e}, please wait...`);try{const i=await fetch(s,{method:"post",body:t});if(i.status<=200&&i.status>=300)throw new Error("non 2xx status");let a=`<p>The image was saved to ${e}</p> <div class="buttons center"><a class="button positive" href=" ${(await i.json()).savedUrl} ">View</a></div>`;this.setMessage("Save completed",a),(0,r.Ay)("dialog-close"+this.mid).style.display="none"}catch(l){this.setMessage("Error",`Failed to save to ${e}, please try again.`)}}},this.apply=async()=>{const e=this.type;let t,s=(0,r.Ay)("save-file-name").value||this.stage.fresco.name||"Untitled";if((0,h.A)("save-file",e),!this.useLegacySave&&this.stage.fresco.savedTimesCounterForUserEase>0&&(s+="("+this.stage.fresco.savedTimesCounterForUserEase+")"),this.stage.fresco.savedTimesCounterForUserEase++,!this.useLegacySave){let i="image/jpeg",a="Jpg image";switch(e){case"pxz":i="application/pxz",a="Pixlr document";break;case"png":i="image/png",a="PNG image";break;case"webp":i="image/webp",a="WebP image"}if(t=await(0,g.D0)(s,e,a,i),!1===t)return}if("pdf"===e){this.setMessage("Creating your PDF file","You've selected a large file format, please wait while we create the file for you.");try{this.blob=await(0,g.EB)(this.stage.fresco.width,this.stage.fresco.height,this.blob)}catch(a){return console.error(a),void this.setMessage("Error when creating PDF file")}}if("pxz"===e){this.setMessage("Creating your PXZ file","You've selected a large file format, please wait while we create the file for you.");try{this.blob=await(0,g.Ab)(this.stage,{id:this.stage.fresco.id,name:s,quality:1,nonDestructive:(0,r.Ay)("save-pxz-ndestuctive").checked,type:"document",unit:"pixel"})}catch(a){return console.error(a),void this.setMessage("Error when creating PXZ file")}}if(this.blob){if(t){await(0,g.IF)(t,new File([this.blob],s+"."+e))||(0,g.gr)(new File([this.blob],s+"."+e),s,e)}else(0,g.gr)(new File([this.blob],s+"."+e),s,e);this.cleanUp(),"pxz"!==e&&(0,u.pp)(),(null===c.N||void 0===c.N?void 0:c.N.subscription)?document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("fileSaved")})):new m}},this.setWorking=()=>{(0,r.Ay)("dialog-apply"+this.mid).style.display="none",(0,r.Ay)("dialog-api-apply")&&((0,r.Ay)("dialog-api-apply").style.display="none"),(0,r.Ay)("save-settings").style.display="none",(0,r.Ay)("save-working").style.display="block"},this.setMessage=(e,t="")=>{(0,r.Ay)("dialog-apply"+this.mid).style.display="none",(0,r.Ay)("dialog-api-apply")&&((0,r.Ay)("dialog-api-apply").style.display="none"),(0,r.Ay)("save-working").style.display="none",(0,r.Ay)("save-settings").style.display="none",(0,r.Ay)("save-message").style.display="block",(0,r.Ay)("save-message-title").innerText=e,(0,r.Ay)("save-message-body").innerHTML=t,(0,r.Ay)("dialog-cancel"+this.mid).innerText=(0,i.A)("close")},this.dialog.id="save-dialog",e.fresco.block)return void this.cleanUp();if(!u.Ay.api&&!(null===c.N||void 0===c.N?void 0:c.N.subscription)&&(0,u.P2)())return this.cleanUp(),void new p.A("save","save");this.stage=e,this.dialog.style.maxWidth="820px",this.dialog.style.minHeight="600px",this.content.classList.add("flex"),this.useLegacySave=u.Ay.useLegacySave||!(0,g.zu)(),(0,r.Ay)("dialog-apply"+this.mid).innerText=this.useLegacySave?(0,i.A)("save"):(0,i.A)("saveAs"),(0,r.Ay)("dialog-buttons"+this.mid).style.paddingTop="0px",this.setContent(`\n        <section id="save-preview">\n            <div id="save-file-size" class="top-10"></div>\n            <div id="save-file-prop"></div>\n        </section>\n        <section id="save-section">\n            <div id="save-message" style="display:none;">\n                <h2 id="save-message-title"></h2>\n                <p id="save-message-body"></p>\n            </div>\n            <div id="save-working" style="display:none;">\n                <h2>${(0,i.A)("working")}...</h2>\n                \n                <div class="progress-bar top-20">\n                    <span id="save-progress" class="inner"></span>\n                </div>\n            </div>\n\n            <div id="save-settings">\n\n                <div id="file-name-section" style="display:none;padding-bottom:20px">\n                    <label>${(0,i.A)("name")}</label>\n                    <div style="display:flex">\n                        <input type="text" id="save-file-name" style="width:280px" />\n                        <div id="save-file-type" style="padding-left:10px;line-height:32px;"></div>\n                    </div>\n                </div>\n\n                <div id="type-jpg" data="jpg" class="option-task">\n                    <img src="/img/icon/file-jpg.svg" class="type ic">\n                    <div class="name">JPG <span>${(0,i.A)("smallFilesPerfect")}</span></div>\n                    <div class="settings">\n                        <div id="jpg-quality"></div>\n\n                        <div id="jpg-quality-switch" class="switch-field stretch top-10">\n                            <input type="radio" id="jpg-quality-low" name="jpg-quality-preset" value="50"/><label for="jpg-quality-low">${(0,i.A)("dialogSaveLow")}</label>\n                            <input type="radio" id="jpg-quality-med" name="jpg-quality-preset" value="70" /><label for="jpg-quality-med">${(0,i.A)("dialogSaveMed")}</label>\n                            <input type="radio" id="jpg-quality-high" name="jpg-quality-preset" value="90" checked /><label for="jpg-quality-high">${(0,i.A)("dialogSaveHigh")}</label>\n                        </div>\n\n                        <label class="split top-20">${(0,i.A)("width")} <input type="number" id="jpg-width" value="${e.fresco.width}"/></label>\n                        <label class="split top-5">${(0,i.A)("height")} <input type="number" id="jpg-height" value="${e.fresco.height}"/></label>\n                    </div>\n                </div>\n\n                <div id="type-png" data="png" class="option-task">\n                    <img src="/img/icon/file-png.svg" class="type ic">\n                    <div class="name">PNG<span>${(0,i.A)("largeAndLossless")}</span></div>\n                    <div class="settings">\n                        <input type="checkbox" id="png-transparent" checked>\n                        <label class="switch" for="png-transparent">${(0,i.A)("transparent")}<span></span></label>\n                    </div>\n                </div>\n\n                <div id="type-webp" data="webp" class="option-task">\n                    <img src="/img/icon/file-webp.svg" class="type ic">\n                    <div class="name">WebP<span>${(0,i.A)("modrenFormatSuitable")}</span></div>\n                    <div class="settings">\n                        <div id="webp-quality"></div>\n\n                        <div id="webp-quality-switch" class="switch-field stretch top-10">\n                            <input type="radio" id="webp-quality-low" name="webp-quality-preset" value="50"/><label for="webp-quality-low">${(0,i.A)("dialogSaveLow")}</label>\n                            <input type="radio" id="webp-quality-med" name="webp-quality-preset" value="70" /><label for="webp-quality-med">${(0,i.A)("dialogSaveMed")}</label>\n                            <input type="radio" id="webp-quality-high" name="webp-quality-preset" value="90" checked /><label for="webp-quality-high">${(0,i.A)("dialogSaveHigh")}</label>\n                        </div>\n\n                        <input type="checkbox" id="webp-transparent" checked>\n                        <label class="switch top-20" for="webp-transparent">${(0,i.A)("transparent")}<span></span></label>\n                    </div>\n                </div>\n\n                <div id="type-pdf" data="pdf" class="option-task">\n                    <img src="/img/icon/file-pdf.svg" class="type ic">\n                    <div class="name">PDF <span>${(0,i.A)("bestForFlyersAndMarketing")}.</span></div>\n                </div>\n\n                <div id="type-pxz" data="pxz" class="option-task">\n                    <img src="/img/icon/file-pxz.svg" class="type ic">\n                    <div class="name">PXZ <span>${(0,i.A)("completePixlrDocument")}</span></div>\n                    <div class="settings">\n                        <input type="checkbox" id="save-pxz-ndestuctive" />\n                        <label class="switch top-10" for="save-pxz-ndestuctive">${(0,i.A)("dialogSaveNonDestructive")}<span></span></label>\n                        <p>${(0,i.A)("dialogSavePXZDescription")}</p>\n                    </div>\n                </div>\n            </div>\n        </section>\n        `),this.useLegacySave?(0,r.Ay)("file-name-section").style.display="block":document.body.offsetWidth>=650&&(0,r.Ay)("dialog-buttons"+this.mid).prepend((0,r.T)("div",{style:"cursor:pointer;margin-right:auto;",onclick:()=>{document.dispatchEvent(new CustomEvent("preferences")),this.cleanUp()}},(0,i.A)("issuesSavingUseLegacy"))),document.body.clientWidth<650&&((0,r.Ay)("dialog-title"+this.mid).innerHTML+=":",(0,r.Ay)("dialog-title"+this.mid).appendChild((0,r.Ay)("save-file-size"))),this.canvas=this.stage.getOutputCanvas(),this.hasWebP=-1!==o.VI(5,5).toDataURL("image/webp").indexOf("webp"),this.type=t||(o.P1(this.canvas)?"png":"jpg"),(0,r.Ay)("type-"+this.type).append((0,r.T)("div",{className:"reko"},(0,i.A)("recommend"))),(0,r.Ay)("type-jpg").addEventListener("click",this.setType),(0,r.Ay)("type-png").addEventListener("click",this.setType),(0,r.Ay)("type-webp").addEventListener("click",this.setType),(0,r.Ay)("type-pdf").addEventListener("click",this.setType),(0,r.Ay)("type-pxz").addEventListener("click",this.setType);let s=this.stage.fresco.name?this.stage.fresco.name.lastIndexOf("."):-1;(0,r.Ay)("save-file-name").value=-1!==s?this.stage.fresco.name.substring(0,s):this.stage.fresco.name||"Untitled",this.jpgquality=new n.A("jpg-quality",{range:[.01,1],defaultValue:.9,step:.001,label:(0,i.A)("quality"),labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onEnd:e=>{e<.5?(0,r.Ay)("jpg-quality-low").checked=!0:e<.8?(0,r.Ay)("jpg-quality-med").checked=!0:(0,r.Ay)("jpg-quality-high").checked=!0,this.renderBlob()}});let a=(0,r.Ay)("jpg-quality-switch").getElementsByTagName("input");for(var l=0;l<a.length;l++)a[l].addEventListener("change",e=>{let t=e.currentTarget;this.jpgquality.setValue(Number(t.value)/100),this.renderBlob()},!1);let d=(0,r.Ay)("jpg-width");d.addEventListener("change",this.jpgSizeChange,!1),d.addEventListener("input",this.jpgSizeChange,!1);let y=(0,r.Ay)("jpg-height");y.addEventListener("change",this.jpgSizeChange,!1),y.addEventListener("input",this.jpgSizeChange,!1),this.webpquality=new n.A("webp-quality",{range:[.01,1],defaultValue:.9,step:.001,label:(0,i.A)("quality"),labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onEnd:e=>{e<.5?(0,r.Ay)("webp-quality-low").checked=!0:e<.8?(0,r.Ay)("webp-quality-med").checked=!0:(0,r.Ay)("webp-quality-high").checked=!0,this.renderBlob()}}),a=(0,r.Ay)("webp-quality-switch").getElementsByTagName("input");for(l=0;l<a.length;l++)a[l].addEventListener("change",e=>{let t=e.currentTarget;this.webpquality.setValue(Number(t.value)/100),this.renderBlob()},!1);(0,r.Ay)("webp-transparent").addEventListener("change",()=>this.changeType("webp",!0)),(0,r.Ay)("png-transparent").addEventListener("change",()=>this.changeType("png",!0));"normal"!==this.stage.fresco.saveMethod&&((0,r.Ay)("dialog-apply"+this.mid).after((0,r.T)("a",{id:"dialog-api-apply",className:"button positive",onclick:()=>this.applyAPI()},u.Ay.icon?(0,r.T)("img",{src:u.Ay.icon,style:"max-width:20px"}):void 0,(0,i.A)("save"))),(0,r.Ay)("dialog-apply"+this.mid).style.display="none",u.Ay.target&&((0,r.Ay)("dialog-api-apply").style.display="inline-flex")),this.changeType(this.type,!0)}}},31046:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Phone=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Phone=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"cc",baseName:"cc",type:"string"},{name:"subscriber",baseName:"subscriber",type:"string"}]},31747:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataSubMerchant=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataSubMerchant=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"subMerchant_numberOfSubSellers",baseName:"subMerchant.numberOfSubSellers",type:"string"},{name:"subMerchant_subSeller_subSellerNr_city",baseName:"subMerchant.subSeller[subSellerNr].city",type:"string"},{name:"subMerchant_subSeller_subSellerNr_country",baseName:"subMerchant.subSeller[subSellerNr].country",type:"string"},{name:"subMerchant_subSeller_subSellerNr_id",baseName:"subMerchant.subSeller[subSellerNr].id",type:"string"},{name:"subMerchant_subSeller_subSellerNr_mcc",baseName:"subMerchant.subSeller[subSellerNr].mcc",type:"string"},{name:"subMerchant_subSeller_subSellerNr_name",baseName:"subMerchant.subSeller[subSellerNr].name",type:"string"},{name:"subMerchant_subSeller_subSellerNr_postalCode",baseName:"subMerchant.subSeller[subSellerNr].postalCode",type:"string"},{name:"subMerchant_subSeller_subSellerNr_state",baseName:"subMerchant.subSeller[subSellerNr].state",type:"string"},{name:"subMerchant_subSeller_subSellerNr_street",baseName:"subMerchant.subSeller[subSellerNr].street",type:"string"},{name:"subMerchant_subSeller_subSellerNr_taxId",baseName:"subMerchant.subSeller[subSellerNr].taxId",type:"string"}]},32050:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AchDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AchDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"bankAccountNumber",baseName:"bankAccountNumber",type:"string"},{name:"bankAccountType",baseName:"bankAccountType",type:"AchDetails.BankAccountTypeEnum"},{name:"bankLocationId",baseName:"bankLocationId",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"encryptedBankAccountNumber",baseName:"encryptedBankAccountNumber",type:"string"},{name:"encryptedBankLocationId",baseName:"encryptedBankLocationId",type:"string"},{name:"ownerName",baseName:"ownerName",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"AchDetails.TypeEnum"}],function(e){let t,s;!function(e){e.Balance="balance",e.Checking="checking",e.Deposit="deposit",e.General="general",e.Other="other",e.Payment="payment",e.Savings="savings"}(t=e.BankAccountTypeEnum||(e.BankAccountTypeEnum={})),function(e){e.Ach="ach",e.AchPlaid="ach_plaid"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.AchDetails||(t.AchDetails={}))},32213:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataRatepay=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataRatepay=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"ratepay_installmentAmount",baseName:"ratepay.installmentAmount",type:"string"},{name:"ratepay_interestRate",baseName:"ratepay.interestRate",type:"string"},{name:"ratepay_lastInstallmentAmount",baseName:"ratepay.lastInstallmentAmount",type:"string"},{name:"ratepay_paymentFirstday",baseName:"ratepay.paymentFirstday",type:"string"},{name:"ratepaydata_deliveryDate",baseName:"ratepaydata.deliveryDate",type:"string"},{name:"ratepaydata_dueDate",baseName:"ratepaydata.dueDate",type:"string"},{name:"ratepaydata_invoiceDate",baseName:"ratepaydata.invoiceDate",type:"string"},{name:"ratepaydata_invoiceId",baseName:"ratepaydata.invoiceId",type:"string"}]},33707:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalData3DSecure=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalData3DSecure=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"allow3DS2",baseName:"allow3DS2",type:"string"},{name:"challengeWindowSize",baseName:"challengeWindowSize",type:"AdditionalData3DSecure.ChallengeWindowSizeEnum"},{name:"executeThreeD",baseName:"executeThreeD",type:"string"},{name:"mpiImplementationType",baseName:"mpiImplementationType",type:"string"},{name:"scaExemption",baseName:"scaExemption",type:"string"},{name:"threeDSVersion",baseName:"threeDSVersion",type:"string"}],function(e){let t;!function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05"}(t=e.ChallengeWindowSizeEnum||(e.ChallengeWindowSizeEnum={}))}(s=t.AdditionalData3DSecure||(t.AdditionalData3DSecure={}))},33850:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(42268),a=s(21742),n=s(54738),r=s(40963),o=s(75770);function h(e,t){return Math.floor(Math.random()*(t-e+1))+e}var c=s(82042),l=s(22866),d=s(29755),p=s(56480);class u extends o.A{constructor(e){super("pen",e),this.stage=e,this.pathPoints=[],this.layerSelect=()=>{if(!this.stage.fresco.isSelectedType(l.A.TYPE_IMAGE))return(0,i.Ay)("pen-no-layer").style.display="flex",(0,i.Ay)("pen-settings").style.display="none",this.stage.raster.style.cursor="auto",void(this.selected=null);(0,i.Ay)("pen-no-layer").style.display="none",(0,i.Ay)("pen-settings").style.display="flex",this.stage.raster.style.cursor="crosshair",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,new r.A(0,0,this.stage.fresco.width,this.stage.fresco.height),"over"),this.stage.fresco.hasSelection()&&this.scratch.addBake()},this.keyDown=e=>{if("Control"!==e.key||this.stage.coating.override){if(","===e.key||"."===e.key)switch(e.key){case",":this.size.setValue(this.size.getValue()-1);break;case".":this.size.setValue(this.size.getValue()+1)}}else this.stage.coating.setPicker()},this.keyUp=e=>{"Control"===e.key&&this.stage.coating.override&&this.stage.coating.removePicker()},this.down=e=>{this.selected&&(this.stage.coating.freeze(!0),this.mode=(0,i.Ay)("pen-mode").value,this.scratch.settings.opacity=this.opacity.getValue(),this.scratch.ctx.save(),this.scratch.ctx.lineWidth=this.size.getValue()/2,this.scratch.ctx.lineJoin=this.scratch.ctx.lineCap="round","neon"===this.mode?(this.scratch.ctx.strokeStyle="#ffffff",this.scratch.ctx.shadowColor=d.Ay.mainColor,this.scratch.ctx.shadowBlur=.1*this.amount.getValue()):(this.scratch.ctx.strokeStyle=d.Ay.mainColor,this.scratch.ctx.fillStyle=d.Ay.mainColor),this.pathPoints=[],this.pp=this.stage.translateRasterToFresco(e,null),this.pathPoints.push(this.pp),this.addMoveListeners())},this.move=e=>{e=this.stage.translateRasterToFresco(e,null),this.pathPoints.push(e);(function(e,t,s,i,a){let n,r,o,c,l;const d=a.length;if(d<2)return!1;let p=a[d-2],u=a[d-1];const m=Math.sqrt(Math.pow(p.x-u.x,2)+Math.pow(p.y-u.y,2));switch(t){case"plain":case"neon":e.beginPath(),e.moveTo(p.x,p.y),e.lineTo(u.x,u.y),e.stroke();break;case"parallel":if(n=u.x-p.x,r=u.y-p.y,n*n+r*r<500)return!1;s=Math.round(s*i*5),e.beginPath(),e.moveTo(p.x-h(0,s),p.y-h(0,s)),e.lineTo(u.x-h(0,s),u.y-h(0,s)),e.moveTo(p.x,p.y),e.lineTo(u.x,u.y),e.moveTo(p.x+h(0,s),p.y+h(0,s)),e.lineTo(u.x+h(0,s),u.y+h(0,s)),e.stroke();break;case"sketchy":if(m<.8*s)return!1;for(e.beginPath(),e.moveTo(p.x,p.y),e.lineTo(u.x,u.y),e.stroke(),e.beginPath(),e.globalAlpha=.33,c=0;c<a.length;++c)n=a[c].x-u.x,r=a[c].y-u.y,o=n*n+r*r,o<s/2*4e3&&Math.random()<i&&(e.moveTo(u.x+.3*n,u.y+.3*r),e.lineTo(a[c].x-.3*n,a[c].y-.3*r));e.stroke(),e.globalAlpha=1;break;case"shaded":for(e.beginPath(),e.moveTo(p.x,p.y),e.lineTo(u.x,u.y),e.stroke(),e.beginPath(),e.globalAlpha=.1,c=0,l=a.length-2;c<l&&!(c>50);++c)n=a[l-c].x-u.x,r=a[l-c].y-u.y,o=n*n+r*r,o<s/2*5e3*i&&(e.beginPath(),e.moveTo(u.x,u.y),e.lineTo(a[l-c].x,a[l-c].y),e.stroke());e.globalAlpha=1;break;case"furry":if(m<.8*s)return!1;for(e.beginPath(),e.moveTo(a[a.length-2].x,a[a.length-2].y),e.lineTo(a[a.length-1].x,a[a.length-1].y),e.stroke(),e.globalAlpha=.3,e.beginPath(),c=0,l=a.length;c<l;c++)n=a[c].x-a[a.length-1].x,r=a[c].y-a[a.length-1].y,o=n*n+r*r,o<s/2*2e3&&Math.random()>o/2e3&&(e.moveTo(u.x+n*i*2,u.y+r*i*2),e.lineTo(u.x-n*i*2,u.y-r*i*2));e.stroke(),e.globalAlpha=1;break;case"trail":if(m<.8*s)return!1;for(e.globalAlpha=.3,e.beginPath(),c=a.length-1,l=a.length-Math.round(25*i);c>l;--c)c>0&&(e.moveTo(u.x,u.y),e.lineTo(a[c].x,a[c].y));e.stroke(),e.globalAlpha=1;break;case"crayon":var g=Math.round(Math.sqrt(Math.pow(u.x-p.x,2)+Math.pow(u.y-p.y,2))/(5/(100*i))),y=(u.x-p.x)/g,v=(u.y-p.y)/g;for(c=0;c<g;c++)e.save(),e.globalAlpha=.4+.2*Math.random(),n=p.x+c*y,r=p.y+c*v,e.fillRect(n+(Math.random()-.5)*(s+5),r+(Math.random()-.5)*(s+5),2*Math.random()+2,Math.random()+1),e.restore();break;case"ink":e.save(),e.lineWidth=h(s,2*s),e.beginPath(),e.moveTo(p.x,p.y),e.lineTo(u.x,u.y),e.stroke(),e.restore()}return!0})(this.scratch.ctx,this.mode,this.size.getValue(),this.amount.getValue()/100,this.pathPoints)?(this.scratch.applySelection(this.stage),window.requestAnimationFrame(()=>this.stage.render())):this.pathPoints.length>1&&this.pathPoints.pop()},this.up=e=>{if(this.stage.coating.freeze(!1),this.removeMoveListeners(),this.pathPoints.length>2&&"neon"===this.mode){this.scratch.clear(),this.scratch.ctx.beginPath(),this.scratch.ctx.moveTo(this.pathPoints[0].x,this.pathPoints[0].y);for(let e=1;e<this.pathPoints.length;++e)this.scratch.ctx.lineTo(this.pathPoints[e].x,this.pathPoints[e].y);this.scratch.ctx.shadowBlur=.1*this.amount.getValue(),this.scratch.ctx.stroke(),this.scratch.ctx.shadowBlur=.2*this.amount.getValue(),this.scratch.ctx.stroke(),this.scratch.ctx.shadowBlur=.3*this.amount.getValue(),this.scratch.ctx.stroke(),this.scratch.ctx.shadowBlur=.2*this.amount.getValue(),this.scratch.ctx.stroke(),this.scratch.ctx.shadowBlur=this.amount.getValue(),this.scratch.ctx.stroke(),this.scratch.applySelection(this.stage)}this.scratch.ctx.restore();let t=n.TL(this.scratch.canvas);if(t&&t.width>0&&t.height>0){let e=this.selected.rect?n.ON(this.selected.canvas,t.rebase(this.selected.rect.x,this.selected.rect.y)):void 0;const s=n.oM(this.selected.mask),i=this.selected.rect?this.selected.rect.clone():void 0;this.selected.extendCanvas(t),this.scratch.drawToLayer(this.selected,"source-over",this.opacity.getValue()),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"pen",layer:this.selected,patchRect:this.selected.rect?t.rebase(this.selected.rect.x,this.selected.rect.y):t,patch:e,rect:i,mask:s})}window.requestAnimationFrame(()=>this.stage.render())},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.stage.coating.removePicker(),this.size.cleanUp(),this.amount.cleanUp(),this.opacity.cleanUp(),this.stage.coating.freeze(!1),this.removeMoveListeners(),this.removeDownListeners(),document.removeEventListener("keyup",this.keyUp,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("layer-select",this.layerSelect,!1)},this.scratch=new p.A,document.addEventListener("keyup",this.keyUp,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("layer-select",this.layerSelect,!1),this.size=new c.A("pen-size",{compact:!0,label:(0,a.A)("size")+":",defaultValue:3,range:[1,50],step:1}),this.amount=new c.A("pen-amount",{compact:!0,label:(0,a.A)("amount")+":",defaultValue:30,range:[1,100],step:1}),this.opacity=new c.A("pen-opacity",{compact:!0,label:(0,a.A)("opacity")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100}),this.addDownListeners(),this.layerSelect()}}},34102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseAdditionalDataOpi=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponseAdditionalDataOpi=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"opi_transToken",baseName:"opi.transToken",type:"string"}]},34475:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(21742),a=s(42268),n=s(82042),r=s(2215);class o extends r.A{constructor(e){super(e,(0,i.A)("titleSlice")),this.update=()=>{this.change("slice",{seed:this.seed.getValue(),amount:this.amount.getValue(),distance:this.distance.getValue(),line:(0,a.Ay)("slice-line").checked})},this.setContent((0,a.T)("div",{id:"slice-seed"}),(0,a.T)("div",{id:"slice-amount",className:"top-16"}),(0,a.T)("div",{id:"slice-distance",className:"top-16"}),(0,a.T)("input",{type:"checkbox",id:"slice-line"}),(0,a.T)("label",{className:"top-20 switch",htmlFor:"slice-line"},(0,i.A)("line"),(0,a.T)("span"))),this.seed=new n.A("slice-seed",{label:(0,i.A)("seed"),range:[0,200],step:1,defaultValue:100,labelFormat:e=>String(e),onChange:e=>this.update()}),this.amount=new n.A("slice-amount",{label:(0,i.A)("amount"),step:1,range:[0,25],defaultValue:4,labelFormat:e=>`${Math.round(e)}`,labelParse:e=>parseInt(e,10),onChange:e=>this.update()}),this.distance=new n.A("slice-distance",{label:(0,i.A)("distance"),step:.01,range:[-1,1],defaultValue:.2,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),(0,a.Ay)("slice-line").addEventListener("click",this.update),this.update()}}},34490:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseAdditionalDataInstallments=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponseAdditionalDataInstallments=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"installmentPaymentData_installmentType",baseName:"installmentPaymentData.installmentType",type:"string"},{name:"installmentPaymentData_option_itemNr_annualPercentageRate",baseName:"installmentPaymentData.option[itemNr].annualPercentageRate",type:"string"},{name:"installmentPaymentData_option_itemNr_firstInstallmentAmount",baseName:"installmentPaymentData.option[itemNr].firstInstallmentAmount",type:"string"},{name:"installmentPaymentData_option_itemNr_installmentFee",baseName:"installmentPaymentData.option[itemNr].installmentFee",type:"string"},{name:"installmentPaymentData_option_itemNr_interestRate",baseName:"installmentPaymentData.option[itemNr].interestRate",type:"string"},{name:"installmentPaymentData_option_itemNr_maximumNumberOfInstallments",baseName:"installmentPaymentData.option[itemNr].maximumNumberOfInstallments",type:"string"},{name:"installmentPaymentData_option_itemNr_minimumNumberOfInstallments",baseName:"installmentPaymentData.option[itemNr].minimumNumberOfInstallments",type:"string"},{name:"installmentPaymentData_option_itemNr_numberOfInstallments",baseName:"installmentPaymentData.option[itemNr].numberOfInstallments",type:"string"},{name:"installmentPaymentData_option_itemNr_subsequentInstallmentAmount",baseName:"installmentPaymentData.option[itemNr].subsequentInstallmentAmount",type:"string"},{name:"installmentPaymentData_option_itemNr_totalAmountDue",baseName:"installmentPaymentData.option[itemNr].totalAmountDue",type:"string"},{name:"installmentPaymentData_paymentOptions",baseName:"installmentPaymentData.paymentOptions",type:"string"},{name:"installments_value",baseName:"installments.value",type:"string"}]},35475:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(){this.clip="M 0,0 H 100 V 100 H 0 Z",this.clipSize=0,this.outline=!1,this.outlineColor="#555555",this.outlineSize=.3,this.shadow=!1,this.shadowBlur=.3,this.shadowOpacity=.8,this.shadowColor="#000000",this.shadowDistance=.3,this.shadowDirection=180}clone(){const e=Object.create(i.prototype);return Object.assign(e,this)}equalTo(e){return!!e&&(this.clip===e.clip&&this.outline===e.outline&&this.outlineSize===e.outlineSize&&this.outlineColor===e.outlineColor&&this.shadow===e.shadow&&this.shadowBlur===e.shadowBlur&&this.shadowColor===e.shadowColor&&this.shadowOpacity===e.shadowOpacity&&this.shadowDistance===e.shadowDistance&&this.shadowDirection===e.shadowDirection)}}},35713:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutDelegatedAuthenticationAction=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutDelegatedAuthenticationAction=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"authorisationToken",baseName:"authorisationToken",type:"string"},{name:"paymentData",baseName:"paymentData",type:"string"},{name:"paymentMethodType",baseName:"paymentMethodType",type:"string"},{name:"token",baseName:"token",type:"string"},{name:"type",baseName:"type",type:"CheckoutDelegatedAuthenticationAction.TypeEnum"},{name:"url",baseName:"url",type:"string"}],function(e){let t;!function(e){e.DelegatedAuthentication="delegatedAuthentication"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CheckoutDelegatedAuthenticationAction||(t.CheckoutDelegatedAuthenticationAction={}))},35722:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titlePolarCoordinates")),this.update=()=>{this.change("polarcoordinates",{rotate:this.rotate.getValue()*(Math.PI/1.8),overlap:this.overlap.getValue()*(Math.PI/2),flip:(0,n.Ay)("polarcoordinates-flip").checked,symmetry:(0,n.Ay)("polarcoordinates-symmetry").checked})},this.setContent((0,n.T)("div",{id:"polarcoordinates-rotate"}),(0,n.T)("div",{id:"polarcoordinates-overlap",className:"range-box top-16"}),(0,n.T)("input",{type:"checkbox",id:"polarcoordinates-flip"}),(0,n.T)("label",{className:"top-20 switch",htmlFor:"polarcoordinates-flip"},(0,r.A)("flip"),(0,n.T)("span")),(0,n.T)("input",{type:"checkbox",id:"polarcoordinates-symmetry"}),(0,n.T)("label",{className:"top-20 switch",htmlFor:"polarcoordinates-symmetry"},(0,r.A)("symmetry"),(0,n.T)("span"))),this.rotate=new a.A("polarcoordinates-rotate",{label:(0,r.A)("rotate"),step:.01,range:[0,3.6],defaultValue:0,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),this.overlap=new a.A("polarcoordinates-overlap",{label:(0,r.A)("overlap"),step:.01,range:[0,1],defaultValue:0,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),(0,n.Ay)("polarcoordinates-flip").addEventListener("click",()=>{this.update()}),(0,n.Ay)("polarcoordinates-symmetry").addEventListener("click",()=>{this.update()}),this.update()}}},36319:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApplePayDonations=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ApplePayDonations=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"applePayToken",baseName:"applePayToken",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"ApplePayDonations.FundingSourceEnum"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"ApplePayDonations.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Applepay="applepay"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.ApplePayDonations||(t.ApplePayDonations={}))},36349:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AccountInfo=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AccountInfo=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"accountAgeIndicator",baseName:"accountAgeIndicator",type:"AccountInfo.AccountAgeIndicatorEnum"},{name:"accountChangeDate",baseName:"accountChangeDate",type:"Date"},{name:"accountChangeIndicator",baseName:"accountChangeIndicator",type:"AccountInfo.AccountChangeIndicatorEnum"},{name:"accountCreationDate",baseName:"accountCreationDate",type:"Date"},{name:"accountType",baseName:"accountType",type:"AccountInfo.AccountTypeEnum"},{name:"addCardAttemptsDay",baseName:"addCardAttemptsDay",type:"number"},{name:"deliveryAddressUsageDate",baseName:"deliveryAddressUsageDate",type:"Date"},{name:"deliveryAddressUsageIndicator",baseName:"deliveryAddressUsageIndicator",type:"AccountInfo.DeliveryAddressUsageIndicatorEnum"},{name:"homePhone",baseName:"homePhone",type:"string"},{name:"mobilePhone",baseName:"mobilePhone",type:"string"},{name:"passwordChangeDate",baseName:"passwordChangeDate",type:"Date"},{name:"passwordChangeIndicator",baseName:"passwordChangeIndicator",type:"AccountInfo.PasswordChangeIndicatorEnum"},{name:"pastTransactionsDay",baseName:"pastTransactionsDay",type:"number"},{name:"pastTransactionsYear",baseName:"pastTransactionsYear",type:"number"},{name:"paymentAccountAge",baseName:"paymentAccountAge",type:"Date"},{name:"paymentAccountIndicator",baseName:"paymentAccountIndicator",type:"AccountInfo.PaymentAccountIndicatorEnum"},{name:"purchasesLast6Months",baseName:"purchasesLast6Months",type:"number"},{name:"suspiciousActivity",baseName:"suspiciousActivity",type:"boolean"},{name:"workPhone",baseName:"workPhone",type:"string"}],function(e){let t,s,i,a,n,r;!function(e){e.NotApplicable="notApplicable",e.ThisTransaction="thisTransaction",e.LessThan30Days="lessThan30Days",e.From30To60Days="from30To60Days",e.MoreThan60Days="moreThan60Days"}(t=e.AccountAgeIndicatorEnum||(e.AccountAgeIndicatorEnum={})),function(e){e.ThisTransaction="thisTransaction",e.LessThan30Days="lessThan30Days",e.From30To60Days="from30To60Days",e.MoreThan60Days="moreThan60Days"}(s=e.AccountChangeIndicatorEnum||(e.AccountChangeIndicatorEnum={})),function(e){e.NotApplicable="notApplicable",e.Credit="credit",e.Debit="debit"}(i=e.AccountTypeEnum||(e.AccountTypeEnum={})),function(e){e.ThisTransaction="thisTransaction",e.LessThan30Days="lessThan30Days",e.From30To60Days="from30To60Days",e.MoreThan60Days="moreThan60Days"}(a=e.DeliveryAddressUsageIndicatorEnum||(e.DeliveryAddressUsageIndicatorEnum={})),function(e){e.NotApplicable="notApplicable",e.ThisTransaction="thisTransaction",e.LessThan30Days="lessThan30Days",e.From30To60Days="from30To60Days",e.MoreThan60Days="moreThan60Days"}(n=e.PasswordChangeIndicatorEnum||(e.PasswordChangeIndicatorEnum={})),function(e){e.NotApplicable="notApplicable",e.ThisTransaction="thisTransaction",e.LessThan30Days="lessThan30Days",e.From30To60Days="from30To60Days",e.MoreThan60Days="moreThan60Days"}(r=e.PaymentAccountIndicatorEnum||(e.PaymentAccountIndicatorEnum={}))}(s=t.AccountInfo||(t.AccountInfo={}))},36854:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(21742),a=s(42268),n=s(26806),r=s(15818),o=s(74785),h=s(29755);class c extends n.A{constructor(e){super((0,i.A)("titlePageColor"),!1),this.change=e=>{this.stage.fresco.color=e?e.toHEX():void 0,window.requestAnimationFrame(()=>{this.stage.render()})},this.apply=()=>{this.stage.history.add({type:"background",color:this.current}),this.stage.fresco.color&&(0,h.oY)(r.A.fromHEX(this.stage.fresco.color)),this.cleanUp()},this.cancel=()=>{this.stage.fresco.color=this.current,document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),this.cleanUp()},this.dialog.style.maxWidth="380px",this.stage=e,this.current=this.stage.fresco.color;const t=(0,a.T)("div",{});this.setContent(t),this.colorselector=new o.A(t,this.current?r.A.fromHEX(this.current):void 0,this.change,!0,!0,!0),this.position()}}},36970:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApplePayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ApplePayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"applePayToken",baseName:"applePayToken",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"ApplePayDetails.FundingSourceEnum"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"ApplePayDetails.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Applepay="applepay"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.ApplePayDetails||(t.ApplePayDetails={}))},37694:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(42268),a=s(21742),n=s(26806),r=s(53900),o=s(79453);class h extends n.A{constructor(e){super((0,a.A)("dialogCanvasResizeTitle")),this.anchorChange=e=>{let t=e.currentTarget,s=(0,i.Ay)("anchor-grid").getElementsByClassName("box");for(var a=0;a<s.length;a++)s[a].classList.remove("selected");t.classList.add("selected"),this.anchor=t.getAttribute("data")},this.changecanvasRelative=()=>{let e=(0,i.Ay)("canvas-size-width"),t=(0,i.Ay)("canvas-size-height");(0,i.Ay)("canvas-size-relative").checked?(e.value="0",t.value="0"):(e.value=this.stage.fresco.width.toString(),t.value=this.stage.fresco.height.toString())},this.apply=()=>{let e=Number((0,i.Ay)("canvas-size-width").value),t=Number((0,i.Ay)("canvas-size-height").value),s=(0,i.Ay)("canvas-size-relative").checked;const a=new r.A(this.stage.fresco.width,this.stage.fresco.height);this.stage.fresco.size(e,t,s,this.anchor),this.stage.history.add({type:"pageSize",anchor:this.anchor,size:a}),this.stage.updateViewport(),document.dispatchEvent(new CustomEvent("layer-arrange")),this.cleanUp()},this.stage=e,this.maxSize=(null===o.N||void 0===o.N?void 0:o.N.subscription)?8192:4096,this.setContent(`\n            <label class="split">${(0,a.A)("width")} <input type="number" id="canvas-size-width"/></label>\n            <label class="split top-10">${(0,a.A)("height")} <input type="number" id="canvas-size-height"/></label>\n        \n            <input type="checkbox" id="canvas-size-relative" />\n            <label class="switch top-20" for="canvas-size-relative">${(0,a.A)("dialogResizeRelative")}<span></span></label>\n        \n            <label class="split top-20">${(0,a.A)("anchor")}\n                <div id="anchor-grid" class="anchor-grid">\n                    <div class="row">\n                        <div data="TL" class="box"></div>\n                        <div data="TC" class="box"></div>\n                        <div data="TR" class="box"></div>\n                    </div>\n                    <div class="row">\n                        <div data="CL" class="box"></div>\n                        <div data="CC" class="box selected"></div>\n                        <div data="CR" class="box"></div>\n                    </div>\n                    <div class="row">\n                        <div data="BL" class="box"></div>\n                        <div data="BC" class="box"></div>\n                        <div data="BR" class="box"></div>\n                    </div>\n                </div>\n            </label>\n            <div class="top-20"></div>\n        `),(0,i.Ay)("canvas-size-width").value=this.stage.fresco.width.toString(),(0,i.Ay)("canvas-size-height").value=this.stage.fresco.height.toString(),(0,i.Ay)("canvas-size-relative").addEventListener("input",this.changecanvasRelative,!1);let t=(0,i.Ay)("anchor-grid").getElementsByClassName("box");for(var s=0;s<t.length;s++)t[s].addEventListener("click",this.anchorChange,!1);this.anchor="CC"}}},37699:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(54738),a=s(78832),n=s(6395),r=s(89209);class o{constructor(e,t,s=!1,i="woff",a,n){this.name=e,this.short=t,this.premium=s,this.local=!!a,this.thumb=n,this.font=a,this.type=i}static async save(e){const t=await(0,a.P2)(),[s]=t.transaction("readwrite","fonts");await s.put(e,e.name)}static async delete(e){const t=await(0,a.P2)(),[s]=t.transaction("readwrite","fonts");await s.delete(e.name)}}class h{static async loadFontFromTemplate(e,t,s){var i,a;let n=null===(i=s.split(".")[0])||void 0===i?void 0:i.toLowerCase(),r=null===(a=s.split(".")[1])||void 0===a?void 0:a.toLowerCase();return await h.createLocalFontDesc(e,t,n,r)}static async loadFontFromUpload(e){var t,s;let i=null===(t=e.name.split(".")[0])||void 0===t?void 0:t.substring(0,50).replace(/[~`!@#$%^&*()+={}\[\];:\'\"<>.,\/\\\?]/g,"").replace(/-/g," ").replace(/   /g," ").replace(/  /g," "),a=null===(s=e.name.split(".")[1])||void 0===s?void 0:s.toLowerCase(),n=i.substring(0,20).replace(" ","").toLowerCase();if(i=(null==i?void 0:i.charAt(0).toUpperCase())+(null==i?void 0:i.slice(1)),h.fontList.find(e=>e.name===i))return void document.dispatchEvent(new CustomEvent("notification",{detail:"Font already exists!"}));let r=a;switch(a){case"otf":r="opentype";break;case"ttf":r="truetype"}const o=new Blob([e],{type:"font/"+r});let c=await h.createLocalFontDesc(o,i,n,a);return c&&document.dispatchEvent(new CustomEvent("notification",{detail:"Font was added!"})),c}static async createLocalFontDesc(e,t,s,a){const n=new o(t,s,!1,a,e);try{await h.addToDOM(n)}catch(u){return console.log(u),void document.dispatchEvent(new CustomEvent("notification",{detail:"Failed to load font!"}))}let c=new r.A(t,56);c.height>72&&c.setSize(Math.floor(72/c.height*56));const l=i.VI(500,80),d=l.getContext("2d");d.font=c.getCssFont(),d.fillStyle="#ffffff",d.textBaseline="top",d.fillText(t,0,Math.round((80-c.height)/2)-c.ascent);var p;return n.thumb=await(p=l,new Promise((e,t)=>{p.toBlob(t=>{e(t)},"image/png")})),await o.save(n),h.fontList.unshift(n),n}static async removeLocalFontDesc(e){let t=h.getFontDesc(e);t&&(await o.delete(t),h.fontList=h.fontList.filter(e=>e!==t))}static async addToDOM(e){if(!e)return;const t=e.local?new FontFace(e.name,await(0,n.CB)(e.font)):new FontFace(e.name,`url(/font/${e.short}.woff) format('woff')`);if(document.fonts.has(t))return Promise.resolve(t);let s=await t.load();return document.fonts.add(s),s}static getFontDesc(e){return h.fontList.find(t=>t.name===e)}static async getFontFile(e){let t=this.getFontDesc(e);if(!t)return;if(t.local)return new File([t.font],t.name);let s=await fetch("/font/"+t.short+".woff").then(e=>e.blob());return s?new File([s],t.short+".woff",{type:"font/woff"}):void 0}static async loadSaved(){const e=await(0,a.P2)(),[t]=e.transaction("readonly","fonts");return t.iterate()}}h.fontList=[new o("Arial","arial"),new o("Courier New","courier"),new o("Georgia","georgia"),new o("Trebuchet MS","trebuchet"),new o("Verdana","verdana"),new o("Aberus","aberus"),new o("Ablation","ablation",!0),new o("Adeft","adeft"),new o("Adelya","adelya",!0),new o("Adios Amigos","adios"),new o("Adolfine","adolfine"),new o("Agnostic","agnostic",!0),new o("Aiden","aiden"),new o("Amaranth","amaranth"),new o("Amateur Typewriter","amateur",!0),new o("Alder","alder",!0),new o("Almondia","almondia"),new o("Aloma Island","alomaisland",!0),new o("Alvida","alvida"),new o("Amoreiza","amoreiza"),new o("AmoretteLight","amorette"),new o("Angeleno Brush Script","angeleno",!0),new o("Antreas","antreas"),new o("Arm Race","arm"),new o("Artick","artick"),new o("Asap","asap"),new o("Atomsfer","atomosfer"),new o("Atthens","atthens"),new o("Avocado Sans","avocado",!0),new o("Baangkarr Press","baangkarr",!0),new o("Badstar","badstar",!0),new o("Bahram","bahram"),new o("Baileyns","baileyns"),new o("Barooduck","barooduck",!0),new o("Bearley","bearley"),new o("Beat","beat",!0),new o("BebasNeue","bebasneue"),new o("Bellquinas","bellquinas"),new o("Bengrraas","bengrraas"),new o("Beornheard","beornheard"),new o("Berretti","berretti"),new o("Biker New","biker",!0),new o("Blossom Berry Script","blossomberry",!0),new o("Boullervard","boullervard"),new o("Bondie","bondie",!0),new o("Bondrians","bondrians",!0),new o("Braga Deco","braga"),new o("Brave Hearted","brave"),new o("Bright Orchid","brightorchid",!0),new o("Brioche","brioche",!0),new o("Brocklyn","brocklyn"),new o("Bronzier","bronzier",!0),new o("Brooklyn","brooklyn",!0),new o("Brodetto","brodetto"),new o("Bronela","bronela",!0),new o("The Brownies","brownies"),new o("Bubbble Gum","bubbblegum",!0),new o("Brushcheetah","brushcheetah"),new o("Butternut Script","butternut",!0),new o("Caang","caang"),new o("Cakehtreuks","cakehtreuks"),new o("Cannoli Poke","cannoli",!0),new o("Camille","camille"),new o("Calamandria","calamandria"),new o("Caldwell","caldwell",!0),new o("Carafun","carafun"),new o("Carnavonts","carnavonts"),new o("Carvino","carvino"),new o("Cervantes","cervantes"),new o("Chaiaathah","chaiaathah",!0),new o("Chalkyal","chalkyal"),new o("Chiqarine","chiqarine"),new o("Chukies","chukies"),new o("Cincoyo","cincoyo"),new o("Clockwise","clockwise",!0),new o("Coast Redwood","coast"),new o("Colombo","colombo",!0),new o("College","college",!0),new o("Companion","companion"),new o("Corlombus","corlombus"),new o("Conseration","conseration",!0),new o("CuprumFFU","cuprum"),new o("Cupello sons","cupello",!0),new o("Costa Mala","costamala",!0),new o("Cozy","cozy",!0),new o("CreamyMoony","creamy"),new o("Cross Road","crossroad",!0),new o("Cross Road Slab","crossroadslab",!0),new o("Daddy Day","daddy"),new o("Dankduck","dankduck"),new o("Darbots","darbots",!0),new o("Davish","davish",!0),new o("Davish Rounded","davishround",!0),new o("Dear Journal","dearjournal",!0),new o("Delicious","delicious",!0),new o("Desmodus","desmodus"),new o("Desmosedici","desmosedici"),new o("Dhangdose","dhangdose"),new o("Dingle","dingle",!0),new o("Djangart Rough","djangart"),new o("Dolington","dolington",!0),new o("Doppelganger","doppelganger",!0),new o("Dorr","dorr",!0),new o("Dustin","dustin",!0),new o("Earth And Sky","earth"),new o("Easterica","easterica"),new o("Eastone","eastone"),new o("Eastwood","eastwood",!0),new o("Echizen","echizen"),new o("El-Karnito","elkarnito"),new o("Elliot","elliot"),new o("Elysian","elysian",!0),new o("Emery","emery"),new o("Empire View","empire"),new o("Eugiene","eugiene"),new o("Espano","espano",!0),new o("Erleane","erleane"),new o("Everleigh","everleigh",!0),new o("Exquisite","exquisite",!0),new o("Farewell Angelina","angelina",!0),new o("Father and Son","father"),new o("Fatherly","fatherly"),new o("Fenord","fenord",!0),new o("Finland","finland",!0),new o("Flamingo","flamingo"),new o("FoxyMist","foxy"),new o("Forever Freedom","forever",!0),new o("Game On","game"),new o("Gamour","gamour",!0),new o("Gallerina","gallerina",!0),new o("Geronide","geronide",!0),new o("Geronide Stamp","geronidestamp",!0),new o("Gingle Snowland","ginglesnowland",!0),new o("Gingerbreads","gingerbreads"),new o("Gladiolusy","gladiolusy",!0),new o("Glamper","glamper",!0),new o("Goldie Dreambox","goldiedreambox",!0),new o("Gordon","gordon",!0),new o("Gorgeous","gorgeous",!0),new o("Gingerly","gingerly",!0),new o("Goorraatt","goorraatt"),new o("Grayson","grayson",!0),new o("Great Again","great"),new o("Grovana","grovana",!0),new o("Gustavo","gustavo"),new o("Haahloddoh","haahloddoh"),new o("Hadrea","hadrea"),new o("Hairmusk","hairmusk"),new o("Hakushou","hakushou"),new o("Harietta","harietta",!0),new o("Hattori Hanzo","hattori"),new o("Haystacks","haystacks",!0),new o("Heater","heater"),new o("Hedonist","hedonist",!0),new o("Hello Alpha","helloa"),new o("Hello Daddy","hellod",!0),new o("Hello People","hello"),new o("Hello Spring","hellospring",!0),new o("Hellowins","hellowins"),new o("Heypatricks","heypatricks"),new o("Highway","highway",!0),new o("Hippo Letto","hippo"),new o("Historia","historia",!0),new o("Hollawind","hollawind"),new o("Hodor","hodor",!0),new o("Honey","honey"),new o("Honeyspice","honeyspice",!0),new o("Huckleberries","huckleberries"),new o("Hymned Sans","hymnedsans",!0),new o("Hymned Script","hymnedscript",!0),new o("IacottNeue","iacottneue",!0),new o("Icebold","icebold",!0),new o("Inder","inder"),new o("Indigo","indigo",!0),new o("Irish gold","irishgold"),new o("Irishgreen","irishgreen"),new o("Its mine","itsmine"),new o("Jacinda","jacinda",!0),new o("Jared","jared"),new o("Jarots","jarots"),new o("Jomantara","jomantara"),new o("Josefin","josefin"),new o("Juneville","juneville"),new o("Jura","jura"),new o("Kajika","kajika"),new o("Kakamora","kakamora"),new o("Katey Blue","kateyblue",!0),new o("Keripik","keripik"),new o("Ketapang","ketapang"),new o("Kindel","kindel",!0),new o("Kingbirds","kingbirds",!0),new o("Laahleggek","laahleggek"),new o("Laborations","laborations"),new o("La Fiesta","lafiesta"),new o("Landon","landon"),new o("Landre","landre",!0),new o("Langley","langley"),new o("La Vonn","vonn"),new o("Laudya Bloods","laudya"),new o("Leaderson","leaderson"),new o("Leath","leath"),new o("Legendum","legendum"),new o("Leobronx","leobronx"),new o("Little Edelweiss","little"),new o("Little Girl","littlegirl"),new o("Lotus Eater","lotuseater",!0),new o("Lobster","lobster"),new o("Lovalicious","lovalicious",!0),new o("Loverstruck","loverstruck"),new o("MaaLLaangBronks","maallaangbronks"),new o("Madison","madison"),new o("Magic Winter","magicwinter"),new o("Magic Trick","magic"),new o("Mai Leho Bahhrala","maileho"),new o("Maldisa","maldisa"),new o("Malinsha","malinsha",!0),new o("Maple Leaves","mapleleaves",!0),new o("Maxton","maxton"),new o("Market","market"),new o("Marones","marones",!0),new o("Me and my dog","meandmydog",!0),new o("Meidy","meidy"),new o("Menighampiil","menighampiil"),new o("Mewton","mewton"),new o("Merry Merry","merrymerry",!0),new o("Molot","molot"),new o("Momday","momday"),new o("Moms Note","moms"),new o("Monday Lovers","monday"),new o("Monetta","monetta"),new o("Mongli","mongli"),new o("Montour","montour"),new o("Morissette Script","morissette"),new o("Mountain","mountain"),new o("Mooka","mooka",!0),new o("More Magic","moremagic",!0),new o("Morgana Sonz","morgana",!0),new o("Nature Force","natureforce",!0),new o("Ms Orange Sky","ms"),new o("Najova","najova"),new o("Natarajasana","natarajasana"),new o("Naville","naville"),new o("Neorah","neorah"),new o("New Autumn","new"),new o("No Siesta","nosiesta"),new o("Night Jump","nightjump"),new o("Notes","notes",!0),new o("NoFire","nofire"),new o("North Avellion","northavellion",!0),new o("Northern","northern"),new o("North High Shadow","northhighsdw",!0),new o("North High","northhigh",!0),new o("Novante","novante",!0),new o("Nunu","nunu"),new o("Offlander","offlander",!0),new o("Oliemolly","oliemolly",!0),new o("Oracles","oracles"),new o("Ostern","ostern"),new o("Otakaku","otakaku"),new o("Out Hill","out"),new o("Overdose","overdose"),new o("Paabaalioot","paabaalioot"),new o("Painted Gallery","paintedgallery",!0),new o("Pandoura","pandoura"),new o("PapaRocknRoll","papa"),new o("Paradise","paradise"),new o("Patlabour","patlabour",!0),new o("Peach Market","peachmarket",!0),new o("Peanut","peanut"),new o("Peony Rose","peonyrose",!0),new o("Perfect Thoughts","perfectthoughts",!0),new o("Pina Colada","pinacolada",!0),new o("Piqolo","piqolo"),new o("Pixelo","pixelo"),new o("Plunge","plunge"),new o("Pop Fist","pop"),new o("Ponch","ponch",!0),new o("Popera","popera"),new o("Powder","powder",!0),new o("Practish","practish"),new o("Print Clearly","print"),new o("Pulsate","pulsate",!0),new o("Qlassik","qlassik"),new o("quatro","quatro",!0),new o("Quattrocento","quattrocento"),new o("Queenata","queenata"),new o("Quella Script","quella"),new o("Questro","questro"),new o("Quickie Sweet","quickie"),new o("Quill & Ink","quillink"),new o("Quish","quish"),new o("Ranania","ranania"),new o("Rankings Caps","rankingscaps",!0),new o("Raroedette","raroedette"),new o("Rawwwing","rawwwing"),new o("Raquella","raquella"),new o("Reepouh","reepouh"),new o("Regan Slab","regan"),new o("Reewoooh","reewoooh",!0),new o("Reilly","reilly"),new o("Remembrance","remembrance",!0),new o("Retrocycles","retrocycles"),new o("Retros","retros"),new o("Revans","revans",!0),new o("Reynolds Square","reynoldssquare",!0),new o("Rhapsody","rhapsody"),new o("Riverside","riverside"),new o("Republiko","republiko",!0),new o("Rocky","rocky"),new o("Roars","roars"),new o("Rockford","rockford",!0),new o("Rockrace","rockrace",!0),new o("Romaniesta","romaniesta"),new o("Romelio","romelio"),new o("Roossooh","roossooh"),new o("Ropa","ropa"),new o("Rolves","rolves",!0),new o("Roque","roque"),new o("Rosario","rosario"),new o("Roundaries","roundaries"),new o("Rowan","rowan",!0),new o("Salmonberry","salmonberry",!0),new o("San Barley","san"),new o("Saqanone","saqanone"),new o("Sants","sants"),new o("Sanur beach","sanur"),new o("Scriptonesia","scriptonesia",!0),new o("Secretary Typewriter","secretary",!0),new o("Sedalia","sedalia",!0),new o("Search","search",!0),new o("Searchlight","searchlight",!0),new o("See De Mayo","see"),new o("Serenity","serenity"),new o("The Servant","servant"),new o("Sheraton","sheraton",!0),new o("Shoelaces","shoelaces",!0),new o("Silvertone","silvertone",!0),new o("Smoother","smoother",!0),new o("Spring Break","springbreak",!0),new o("Spotlights Thin","spotlightsthin",!0),new o("Spotlights Chunky","spotlightschunky",!0),new o("Squiborn","squiborn",!0),new o("Staatliches","staatliches"),new o("Stardust Moonlight","stardust"),new o("The Stoothgart","stoothgart"),new o("Summer Coconut","summer"),new o("Summer Joy","summerjoy"),new o("Summer Nude","summernude",!0),new o("Summer Peach","summerpeach"),new o("Summer Solstice","summersolstice",!0),new o("Summery","summery"),new o("Sun Again","sunagain"),new o("Sun Pepper","sun"),new o("Sun Streets","sunstreets"),new o("Sunny Bay","sunnybay",!0),new o("Sunshine Boy","sunshine"),new o("Super Slayers","super"),new o("Surface","surface"),new o("Sweeneey","sweeneey"),new o("Teaspoon","teaspoon"),new o("Tabu","tabu"),new o("Teodore","teodore",!0),new o("TeXGyreHeros","texgyreheros"),new o("The Brocker","brocker"),new o("The California","thecalifornia"),new o("The Harison","harison"),new o("The Love For Money","theloveformoney",!0),new o("The Mastiff","mastiff"),new o("The Patriot","patriot"),new o("The Pinta","pinta"),new o("The Roxv","roxv"),new o("The Rogue","rogue"),new o("The Stegris","thestegris",!0),new o("The Queen","queen"),new o("Thirtylane","thirtylane",!0),new o("Titian","titian"),new o("Todes","todes",!0),new o("Tropical Coast","tropicalcoast"),new o("Torberta","torberta"),new o("Twigs","twigs"),new o("Twirly Ballerina","twirly",!0),new o("Unreal","unreal"),new o("Vaganza","vaganza"),new o("Valeria","valeria",!0),new o("Valery","valery"),new o("Vignette","vignette"),new o("Von Everect","von"),new o("The Voyager","voyager",!0),new o("Wandering Flowers","wandering",!0),new o("Wargate","wargate",!0),new o("Western Shooter","westernshooter",!0),new o("West Java","westjava",!0),new o("Winter Sunrise","wintersunrise",!0),new o("White Wonder","whitewonder",!0),new o("Yanone Kaffeesatz","kaffeesatz"),new o("Wonderul Wilderness","wonderulwilderness",!0),new o("Yoseline","yoseline"),new o("Zombie Dust","zombie")],h.loadFont=e=>{let t=h.fontList.find(t=>t.name===e);if(t)return h.addToDOM(t)};const c=h},37771:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(54738),a=s(41915),n=s(29755),r=s(42268);class o{constructor(e,t,s=!1){if(this.docked=!1,this.setTitle=(e,t=40)=>{e=e.length>t?`${e.substring(0,5)}...`:e,(0,r.Ay)("float-title-"+this.mid).innerHTML=e},this.position=()=>{if(this.parent)if("express"===n.Ay.product)this.float.style.left="400px",this.float.style.top=Math.round(((0,r.Ay)("workspace").clientHeight-this.float.clientHeight)/3)+"px";else{let e=this.parent.getBoundingClientRect();this.float.style.left=~~(e.right-this.float.clientWidth/2-e.width/2)+"px",this.float.style.top=e.top+30+"px"}else{const e=(0,r.Ay)("workspace").getBoundingClientRect();this.docked?(this.float.style.left="unset",this.float.style.right="0",this.float.style.top="77px",this.float.style.height=e.height-77+"px"):(this.float.style.left=e.width-~~(this.float.offsetWidth/2)-400+"px",this.float.style.height="600px",this.float.style.top="120px"),this.float.classList.toggle("docked",this.docked)}},this.setContent=(...e)=>{e[0]instanceof HTMLElement?this.content.append(...e):this.content.innerHTML+=e[0],this.position()},this.dragStart=e=>{this.docked||(this.p=e,this.d=new a.A(this.float.offsetLeft,this.float.offsetTop))},this.dragMove=e=>{this.docked||(this.float.style.left=Math.round(this.d.x+(e.x-this.p.x))+"px",this.float.style.top=Math.round(this.d.y+(e.y-this.p.y))+"px")},this.dragEnd=e=>{if(this.docked)return;let t=Math.round(this.d.y+(e.y-this.p.y)),s=Math.round(this.d.x+(e.x-this.p.x)),i=this.float.offsetWidth;t<20&&(t=20),s<-i/2&&(s=0),s+i/2>(0,r.Ay)("workspace").offsetWidth&&(s=(0,r.Ay)("workspace").offsetWidth-i),this.float.style.left=s+"px",this.float.style.top=t+"px"},this.resizeStart=e=>{this.d=new a.A(this.float.clientHeight,e.y)},this.resizeMove=e=>{const t=this.d.x+(e.y-this.d.y);this.float.style.height=(t<320?320:t)+"px"},this.keyDown=e=>{"Enter"!==e.key&&"Escape"!==e.key||this.cleanUp()},this.superCleanUp=()=>{var e;document.removeEventListener("keydown",this.keyDown,!1),this.float.remove(),this.float=null,null===(e=this.modal)||void 0===e||e.remove(),this.modal=null},this.cleanUp=()=>{this.superCleanUp()},this.parent=e,this.mid=i.r0(),this.parent){let e;document.addEventListener("keydown",this.keyDown,!1),this.modal=(0,r.T)("div",{id:"modal-"+this.mid,className:"modal"}),this.modal.addEventListener("mousedown",t=>{e=t.target}),this.modal.addEventListener("mouseup",t=>{t.target===e&&t.target===this.modal&&this.cleanUp()}),document.body.appendChild(this.modal)}this.float=(0,r.T)("div",{className:"float"}),this.modal?this.modal.appendChild(this.float):(0,r.Ay)("workspace").append(this.float),this.content=(0,r.T)("div",{className:"content"});const o=(0,r.T)("div",{id:"float-title-"+this.mid,className:"title"},t);if((0,r.Bb)(o,this.dragStart,this.dragMove,this.dragEnd),this.float.append(o,(0,r.T)("img",{id:"float-close"+this.mid,className:"close ic",src:"/img/icon/close.svg",onclick:()=>this.cleanUp()}),(0,r.T)("div",{className:"splitter small"}),this.content),s){const e=(0,r.T)("img",{id:"resize-"+this.mid,src:"/img/icon/three-dot.svg",className:"resize ic"});(0,r.Bb)(e,this.resizeStart,this.resizeMove),this.float.append(e)}this.position()}}},37888:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentSetupResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentSetupResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"paymentSession",baseName:"paymentSession",type:"string"},{name:"recurringDetails",baseName:"recurringDetails",type:"Array<RecurringDetail>"}]},38046:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(2215),a=s(82042),n=s(42268),r=s(54738),o=s(21742);class h extends i.A{constructor(e){super(e,(0,o.A)("titleDenoise")),this.valueChange=r.eD(50,()=>{this.shaders.addShader("denoise",this.radius.getValue()<.02?0:[this.radius.getValue(),this.threshold.getValue()]),setTimeout(()=>{this.scratch.canvas=this.shaders.apply(this.cache),window.requestAnimationFrame(()=>this.stage.render())},0)}),this.kind="denoise",this.setContent((0,n.T)("div",{id:"denoise-radius"}),(0,n.T)("div",{id:"denoise-threshold",className:"top-16"})),this.radius=new a.A("denoise-radius",{label:(0,o.A)("radius"),step:.01,range:[0,1],defaultValue:.4,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.valueChange()}),this.threshold=new a.A("denoise-threshold",{label:(0,o.A)("threshold"),step:.01,range:[.01,1],defaultValue:.12,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.valueChange()}),this.valueChange()}}},38135:(e,t,s)=>{s.d(t,{A:()=>v});var i=s(42268),a=s(21742),n=s(54738),r=s(40963),o=s(15818),h=s(75770),c=s(82042),l=s(41915),d=s(59350),p=s(97266),u=s(71499),m=s(37771);class g extends m.A{constructor(e,t,s){super(e,(0,a.A)("options")),this.checkIt=()=>{this.options.shrink=(0,i.Ay)("disperse-shrink").checked,this.options.hollow=(0,i.Ay)("disperse-hollow").checked,this.callback(this.options)},this.cleanUp=()=>{(0,i.Ay)("disperse-shrink").removeEventListener("click",this.checkIt,!1),(0,i.Ay)("disperse-hollow").removeEventListener("click",this.checkIt,!1),this.direction.cleanUp(),this.stretch.cleanUp(),this.amount.cleanUp(),this.spread.cleanUp(),this.scale.cleanUp(),this.superCleanUp()},this.options=t,this.callback=s,this.setContent(`\n            <section>\n                <div id="disperse-scale"></div>\n                <div id="disperse-amount"></div>\n                <div id="disperse-stretch"></div>\n                <div id="disperse-direction"></div>\n                <div id="disperse-spread"></div>\n                <input type="checkbox" checked id="disperse-shrink" />\n                <label class="top-16 switch" for="disperse-shrink">${(0,a.A)("shrink")}<span></span></label>\n                <input type="checkbox" id="disperse-hollow" />\n                <label class="top-10 switch" for="disperse-hollow">${(0,a.A)("hollow")}<span></span></label>\n            </section>\n        `),this.scale=new c.A("disperse-scale",{label:(0,a.A)("scale")+":",range:[.02,1],step:.02,defaultValue:t.scale,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>{this.options.scale=e,s(this.options)}}),this.amount=new c.A("disperse-amount",{label:(0,a.A)("amount")+":",range:[.01,1],step:.01,defaultValue:t.amount,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>{this.options.amount=e,s(this.options)}}),this.stretch=new c.A("disperse-stretch",{label:(0,a.A)("stretch")+":",range:[0,1],step:.01,defaultValue:t.stretch,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>{this.options.stretch=e,s(this.options)}}),this.direction=new c.A("disperse-direction",{label:(0,a.A)("direction")+":",range:[-180,180],defaultValue:t.direction,labelFormat:e=>e.toFixed(1),labelParse:e=>parseInt(e,10),onEnd:e=>{this.options.direction=e,s(this.options)}}),this.spread=new c.A("disperse-spread",{label:(0,a.A)("spread")+":",range:[-1,1],step:.02,defaultValue:t.spread,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onEnd:e=>{this.options.spread=e,s(this.options)}}),(0,i.Ay)("disperse-shrink").addEventListener("click",this.checkIt,!1),(0,i.Ay)("disperse-hollow").addEventListener("click",this.checkIt,!1),(0,i.Ay)("disperse-shrink").checked=this.options.shrink,(0,i.Ay)("disperse-hollow").checked=this.options.hollow}}class y{constructor(e,t,s,i,a,n,r,o,h){this.sx=e,this.sy=t,this.tx=s,this.ty=i,this.background=a,this.color=n,this.radius=r,this.rotation=o,this.factor=h}}class v extends h.A{constructor(e){super("disperse",e),this.mode="mask",this.layerSelect=async()=>{if(!(this.selected===this.stage.fresco.getSelected())&&this.maskRect){await new p.A((0,a.A)("apply"),(0,a.A)("viewDisperseApply")).init()&&this.apply()}if(!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("disperse-no-layer").style.display="flex",(0,i.Ay)("disperse-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("disperse-settings").style.display="flex",(0,i.Ay)("disperse-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"over"),this.maskRect=void 0,window.requestAnimationFrame(()=>this.stage.render()),this.setMode("mask")},this.updateBrush=()=>{this.brush.generate(),this.selected&&"mask"===this.mode?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom)):this.stage.coating.removeCursorImage(),this.scratch&&(this.scratch.settings.opacity="mask"===this.mode?.4:1)},this.selectMode=e=>{this.setMode(e.currentTarget===(0,i.Ay)("disperse-mode-mask")?"mask":"effect")},this.setMode=e=>{"effect"!==e||this.maskRect||(e="mask",this.stage.notify("viewDisperseMaskFirst")),this.mode=e,(0,i.Ay)("disperse-mode-mask").checked="mask"===this.mode,(0,i.Ay)("disperse-mode-effect").checked="effect"===this.mode,(0,i.Ay)("disperse-mask-settings").style.display="mask"===this.mode?"flex":"none",(0,i.Ay)("disperse-effect-settings").style.display="effect"===this.mode?"flex":"none",this.updateBrush(),this.disperse()},this.rand=(e,t)=>Math.random()*(t-e)+e,this.showOptions=()=>{new g((0,i.Ay)("disperse-options"),this.options,this.updateOptions)},this.updateOptions=e=>{this.options=e,this.disperse()},this.disperse=()=>{var e;if(this.scratch.clear(),"effect"!==this.mode||!this.maskRect)return;const t=this.maskRect,s=t.center(),i=this.scratch.ctx,a=this.selected.canvas.getContext("2d"),n=new Array,r=10*this.options.amount,h=Math.round(100*this.options.scale),c=Math.round(.5*h),d=Math.round(t.width/h)*Math.round(t.height/h)*r,p=this.options.direction*Math.PI/180,u=this.options.spread,m=Math.sqrt(t.width*t.width+t.height*t.height),g=Math.round(this.options.stretch*m),v=this.options.shrink,f=this.options.hollow;let b,w=0,A=0;for(;w<d&&A<5e4;){let r=new l.A(Math.round(this.rand(t.x,t.x+t.width)),Math.round(this.rand(t.y,t.y+t.height)));if(A++,this.maskData.data[4*(r.y*i.canvas.width+r.x)]>0){w++;let t=m*Math.cos(p),i=m*Math.sin(p),l=this.getBound(r.x,r.y,r.x-t,r.y-i),d=this.getBound(r.x,r.y,r.x+t,r.y+i),f=null!==(e=r.distanceTo(l)/d.distanceTo(l))&&void 0!==e?e:0,b=1-f,A=c+this.rand(.2*-c,.2*c);v&&(A=.5*A+Math.round(.5*A*b));let x=a.getImageData(d.x,d.y,1,1).data;const k=new o.A(x[0],x[1],x[2]);let S=a.getImageData(r.x,r.y,1,1).data;const E=new o.A(S[0],S[1],S[2]);let T=f*f*g,C=Math.cos(p)*T,M=Math.sin(p)*T;if(0!==u){let e=s.rotateAround(r,p),t=(r.y-e.y)*u*f;C+=Math.sin(p)*t,M+=Math.cos(p)*t}if(n.push(new y(r.x,r.y,r.x+C,r.y+M,k,E,A,6.283185308*Math.random(),b)),v&&Math.random()>b){let e=2*h*f,t=this.rand(-e,e),s=this.rand(-e,e);n.push(new y(r.x+t,r.y+s,r.x+C+t,r.y+M+s,k,E,A,6.283185308*Math.random(),b))}}}switch(document.querySelector('input[name="disperse-type"]:checked').value){case"circle":b=this.circle;break;case"square":b=this.square;break;case"hexagon":b=this.hexagon;break;case"cross":b=this.cross;break;case"triangle":b=this.triangle;break;case"heart":b=this.heart;break;case"star":b=this.star;break;case"glimmer":b=this.glimmer}i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",n.forEach(e=>{i.save(),i.translate(e.sx,e.sy),i.rotate(e.rotation),i.beginPath(),i.shadowBlur=2,i.fillStyle=i.shadowColor=e.background.toRGBA(245),b(i,c),i.closePath(),i.fill(),i.restore()}),n.forEach(e=>{Math.random()<.5&&(i.save(),i.translate(e.tx,e.ty),i.rotate(e.rotation),i.beginPath(),b(i,e.radius),i.closePath(),i.fillStyle=f?e.background.toRGBA():e.color.toRGBA(),i.fill(),f&&(i.lineWidth=.25*e.radius,i.strokeStyle=e.color.toRGBA(),i.stroke()),i.restore())}),window.requestAnimationFrame(()=>this.stage.render())},this.getBound=(e,t,s,i)=>{let a=e,n=t,r=s-e,o=i-t,h=r>0?1:-1,c=o>0?1:-1;if(r=r<0?-r:r,o=o<0?-o:o,r>o){let e=.5*r;for(let t=1;t<=r&&(a+=h,e+=o,e>=r&&(e-=r,n+=c),0!==this.maskData.data[4*(n*this.scratch.canvas.width+a)]);t++);}else{let e=.5*o;for(let t=1;t<=o&&(n+=c,e+=r,e>=o&&(e-=o,a+=h),0!==this.maskData.data[4*(n*this.scratch.canvas.width+a)]);t++);}return new l.A(a,n)},this.circle=(e,t)=>{e.arc(0,0,t,0,2*Math.PI)},this.square=(e,t)=>{e.moveTo(0,t);for(let s=0;s<4;s++)e.rotate(2*Math.PI/4),e.lineTo(0,t)},this.triangle=(e,t)=>{e.moveTo(0,0-t);for(let s=0;s<3;s++)e.rotate(Math.PI/3),e.lineTo(0,0-.5*t),e.rotate(Math.PI/3),e.lineTo(0,0-t)},this.hexagon=(e,t)=>{e.moveTo(0,t);for(let s=0;s<6;s++)e.rotate(2*Math.PI/6),e.lineTo(0,t)},this.heart=(e,t)=>{let s=.8*t;e.translate(0,-t/2),e.rotate(45*Math.PI/180),e.beginPath(),e.moveTo(0,0),e.bezierCurveTo(-s,0,-s,t,0,t),e.lineTo(t,t),e.lineTo(t,0),e.bezierCurveTo(t,-s,0,-s,0,0)},this.cross=(e,t)=>{let s=.35*t;e.moveTo(-s,-s);for(let i=0;i<4;i++)e.lineTo(-s,-t),e.lineTo(s,-t),e.lineTo(s,-s),e.rotate(Math.PI/2)},this.star=(e,t)=>{e.moveTo(0,0-t);for(let s=0;s<5;s++)e.rotate(Math.PI/5),e.lineTo(0,0-.5*t),e.rotate(Math.PI/5),e.lineTo(0,0-t)},this.glimmer=(e,t)=>{e.moveTo(0,0-t);for(let s=0;s<4;s++)e.rotate(Math.PI/4),e.lineTo(0,0-.2*t),e.rotate(Math.PI/4),e.lineTo(0,0-t)},this.down=e=>{this.selected&&"mask"===this.mode&&(this.x=this.y=-1,this.move(e),this.addMoveListeners())},this.x=-1,this.y=-1,this.move=e=>{let t=this.brush.getStep(),s=!1;if(e=this.stage.translateRasterToFresco(e,this.selected.rect),-1==this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.scratch.ctx.drawImage(this.brush.canvas,this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0),e.x!==this.x||e.y!==this.y){let i=e.x-this.x,a=e.y-this.y,n=i>0?1:-1,r=a>0?1:-1;if(i=i<0?-i:i,a=a<0?-a:a,i>a){let e=.5*i;for(let o=1;o<=i;o++)this.x+=n,e+=a,e>=i&&(e-=i,this.y+=r),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.scratch.ctx.drawImage(this.brush.canvas,this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}else{let e=.5*a;for(let o=1;o<=a;o++)this.y+=r,e+=i,e>=a&&(e-=a,this.x+=n),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.scratch.ctx.drawImage(this.brush.canvas,this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}}s&&window.requestAnimationFrame(()=>this.stage.render())},this.up=e=>{this.removeMoveListeners(),this.maskRect=n.TL(this.scratch.canvas),this.maskData=this.maskRect?this.scratch.ctx.getImageData(0,0,this.scratch.canvas.width,this.scratch.canvas.height):void 0,this.maskData&&this.setMode("effect")},this.reset=()=>{var e;this.maskRect=void 0,null===(e=this.scratch)||void 0===e||e.clear(),this.layerSelect(),window.requestAnimationFrame(()=>this.stage.render()),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("reset")}))},this.applyClick=()=>{this.apply()},this.apply=()=>{var e;if(!this.selected||!this.stage.fresco.hasLayer(this.selected))return;if(!this.maskRect)return;const t=new r.A(0,0,this.selected.rect.width,this.selected.rect.height),s=n.ON(this.selected.canvas);this.scratch.drawToLayer(this.selected),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"disperse",layer:this.selected,patchRect:t,patch:s,rect:this.selected.rect.clone()}),this.maskRect=void 0,null===(e=this.scratch)||void 0===e||e.clear(),this.layerSelect()},this.cleanUp=()=>{this.maskRect&&this.apply(),this.stage.fresco.removeScratch(),this.removeDownListeners(),window.requestAnimationFrame(()=>this.stage.render()),(0,i.Ay)("disperse-apply").removeEventListener("click",this.applyClick,!1),(0,i.Ay)("disperse-reset").removeEventListener("click",this.reset,!1),(0,i.Ay)("disperse-options").removeEventListener("click",this.showOptions,!0),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("zoom-change",this.updateBrush,!1),(0,i.Ay)("disperse-mode-mask").removeEventListener("change",this.selectMode,!0),(0,i.Ay)("disperse-mode-effect").removeEventListener("change",this.selectMode,!0),document.querySelectorAll('input[name="disperse-type"]').forEach(e=>e.removeEventListener("change",this.disperse)),this.brushSize.cleanUp(),this.selected=null,this.scratch=null},(0,i.Ay)("disperse-apply").addEventListener("click",this.applyClick,!1),(0,i.Ay)("disperse-reset").addEventListener("click",this.reset,!1),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),(0,i.Ay)("disperse-mode-mask").addEventListener("change",this.selectMode,!0),(0,i.Ay)("disperse-mode-effect").addEventListener("change",this.selectMode,!0),(0,i.Ay)("disperse-options").addEventListener("click",this.showOptions,!0),this.brush=new d.A(new u.A("circle",50,0)),this.brushSize=new c.A("disperse-brush-size",{label:(0,a.A)("size")+":",step:2,compact:!0,range:[5,200],defaultValue:this.brush.settings.size,labelFormat:e=>e.toFixed(0)+"px",onEnd:e=>{this.brush.settings.size=e,this.updateBrush()}}),document.querySelectorAll('input[name="disperse-type"]').forEach(e=>e.addEventListener("change",this.disperse)),this.options={scale:.2,amount:.2,stretch:.5,direction:0,spread:.2,shrink:!0,hollow:!1},this.addDownListeners(),this.layerSelect()}}},38658:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentAmountUpdateResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentAmountUpdateResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"industryUsage",baseName:"industryUsage",type:"PaymentAmountUpdateResponse.IndustryUsageEnum"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"paymentPspReference",baseName:"paymentPspReference",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"status",baseName:"status",type:"PaymentAmountUpdateResponse.StatusEnum"}],function(e){let t,s;!function(e){e.DelayedCharge="delayedCharge",e.Installment="installment",e.NoShow="noShow"}(t=e.IndustryUsageEnum||(e.IndustryUsageEnum={})),function(e){e.Received="received"}(s=e.StatusEnum||(e.StatusEnum={}))}(s=t.PaymentAmountUpdateResponse||(t.PaymentAmountUpdateResponse={}))},38665:(e,t,s)=>{s.d(t,{P:()=>n});var i=s(54738),a=(s(23556),s(6395));async function n(e){const t=new AbortController,{signal:s}=t,n=i.H5(e,640,640),r=await i.PG(n,{type:"image/jpeg",quality:.8}),o=new FormData;o.append("image_file",new File([r],"file.jpg"));const h=await fetch("/api/ai/remove-background/",{method:"POST",headers:{Accept:"application/json"},body:o,signal:s}),c=await h.json();if(!c.status)throw new Error(c.error);return await(0,a.kw)("data:image/jpeg;base64,"+c.data)}},39312:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutQrCodeAction=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutQrCodeAction=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"expiresAt",baseName:"expiresAt",type:"string"},{name:"paymentData",baseName:"paymentData",type:"string"},{name:"paymentMethodType",baseName:"paymentMethodType",type:"string"},{name:"qrCodeData",baseName:"qrCodeData",type:"string"},{name:"type",baseName:"type",type:"CheckoutQrCodeAction.TypeEnum"},{name:"url",baseName:"url",type:"string"}],function(e){let t;!function(e){e.QrCode="qrCode"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CheckoutQrCodeAction||(t.CheckoutQrCodeAction={}))},39612:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(42268),a=s(21742),n=s(75770),r=s(41915),o=s(21079);class h extends n.A{constructor(e){super("zoom",e),this.stage=e,this.mode="plus",this.contextMenu=e=>{e.preventDefault(),e.stopPropagation(),new o.Ay(new r.A(e.clientX,e.clientY),[new o.kt((0,a.A)("titleFitScreen"),()=>this.stage.setZoom("fit"),"Ctrl + 0"),new o.kt((0,a.A)("titleFillScreen"),()=>this.stage.setZoom("fill"),"Ctrl + 2"),new o.kt("100%",()=>this.stage.setZoom("1"),"Ctrl + 1"),new o.kt("200%",()=>this.stage.setZoom("2")),new o.kt("300%",()=>this.stage.setZoom("3"),"Ctrl + 3"),new o.kt,new o.kt((0,a.A)("titleZoomIn"),()=>this.stage.setZoomStep(!0),"Ctrl + +"),new o.kt((0,a.A)("titleZoomOut"),()=>this.stage.setZoomStep(!1),"Ctrl + -")])},this.z1x=()=>{this.stage.setZoom("1")},this.fit=()=>{this.stage.setZoom("fit")},this.fill=()=>{this.stage.setZoom("fill")},this.toggleMode=()=>{this.setMode("plus"===this.mode?"minus":"plus")},this.selectMode=e=>{this.setMode(e.currentTarget===(0,i.Ay)("zoom-mode-plus")?"plus":"minus")},this.setMode=e=>{this.mode=e,(0,i.Ay)("zoom-mode-plus").checked="plus"===this.mode,(0,i.Ay)("zoom-mode-minus").checked="minus"===this.mode,this.stage.raster.style.cursor="plus"===this.mode?"zoom-in":"zoom-out"},this.shiftDown=e=>{"Shift"!==e.key||this.isShiftDown||(this.isShiftDown=!0,this.toggleMode())},this.shiftUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1,this.toggleMode())},this.down=e=>{this.stage.supressRender=!0;const t=this.stage.getViewPort().center(),s=this.stage.translateRasterToFresco(e,void 0,!1);this.stage.setZoomStep("plus"===this.mode,2);const i=this.stage.translateRasterToFresco(e,void 0,!1);this.stage.supressRender=!1,this.stage.setAnchor(new r.A(t.x+(s.x-i.x),t.y+(s.y-i.y))),this.stage.updateViewport()},this.cleanUp=()=>{this.removeDownListeners(),document.removeEventListener("keydown",this.shiftDown,!1),document.removeEventListener("keyup",this.shiftUp,!1),(0,i.Ay)("zoom-1x").removeEventListener("click",this.z1x,!1),(0,i.Ay)("zoom-fit").removeEventListener("click",this.fit,!1),(0,i.Ay)("zoom-fill").removeEventListener("click",this.fill,!1),(0,i.Ay)("zoom-mode-plus").removeEventListener("click",this.selectMode,!1),(0,i.Ay)("zoom-mode-minus").removeEventListener("click",this.selectMode,!1),this.stage.raster.removeEventListener("contextmenu",this.contextMenu,!0)},document.addEventListener("keydown",this.shiftDown,!1),document.addEventListener("keyup",this.shiftUp,!1),(0,i.Ay)("zoom-1x").addEventListener("click",this.z1x,!1),(0,i.Ay)("zoom-fit").addEventListener("click",this.fit,!1),(0,i.Ay)("zoom-fill").addEventListener("click",this.fill,!1),this.stage.raster.addEventListener("contextmenu",this.contextMenu,!0),(0,i.Ay)("zoom-mode-plus").addEventListener("click",this.selectMode,!1),(0,i.Ay)("zoom-mode-minus").addEventListener("click",this.selectMode,!1);const t=document.querySelector('input[name="zoom-mode"]:checked').value;this.setMode(t),this.addDownListeners()}}},39689:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Recurring=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Recurring=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"contract",baseName:"contract",type:"Recurring.ContractEnum"},{name:"recurringDetailName",baseName:"recurringDetailName",type:"string"},{name:"recurringExpiry",baseName:"recurringExpiry",type:"Date"},{name:"recurringFrequency",baseName:"recurringFrequency",type:"string"},{name:"tokenService",baseName:"tokenService",type:"Recurring.TokenServiceEnum"}],function(e){let t,s;!function(e){e.Oneclick="ONECLICK",e.Recurring="RECURRING",e.Payout="PAYOUT"}(t=e.ContractEnum||(e.ContractEnum={})),function(e){e.Visatokenservice="VISATOKENSERVICE",e.Mctokenservice="MCTOKENSERVICE",e.Amextokenservice="AMEXTOKENSERVICE",e.TokenSharing="TOKEN_SHARING"}(s=e.TokenServiceEnum||(e.TokenServiceEnum={}))}(s=t.Recurring||(t.Recurring={}))},39989:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(22866),a=s(54738),n=s(40963),r=s(52038);class o extends i.A{constructor(e=a.Os(),t,s,h,c=!1){super(i.A.TYPE_IMAGE),this.id=e,this.calculate=(e,t,s)=>{this.canvas&&(this.rect.x=Math.round(e.x),this.rect.y=Math.round(e.y),this.rect.width=Math.round(t.x-e.x),this.rect.width<10&&(this.rect.width=10),0!==s?this.rect.height=Math.round(this.rect.width/s):(this.rect.height=Math.round(t.y-e.y),this.rect.height<10&&(this.rect.height=10)))},this.scale=(e,t,s)=>{this.rect&&(this.rect.x=Math.round(this.rect.x*e),this.rect.y=Math.round(this.rect.y*t),this.rect.width=Math.round(this.rect.width*e),this.rect.height=Math.round(this.rect.height*t),this.applyTransform(s))},this.wouldApplyTransform=()=>!(!this.canvas||!this.rect)&&(0!==this.rect.rotation||this.rect.width!==this.canvas.width||this.rect.height!==this.canvas.height),this.applyStraighten=e=>{this.canvas=a.oc(this.canvas,this.rect.rotation,e),this.mask&&(this.mask=a.oc(this.mask,this.rect.rotation,e)),this.rect=e,this.render()},this.applyTransform=(e=!0)=>{if(!this.wouldApplyTransform())return!1;if(this.rect.width===this.canvas.width&&this.rect.height===this.canvas.height||(this.canvas=e?a.tm(this.canvas,this.rect.width,this.rect.height):a.B3(this.canvas,this.rect.width,this.rect.height),this.mask&&(this.mask=a.tm(this.mask,this.rect.width,this.rect.height))),0!==this.rect.rotation){this.rect=this.rect.getRotatedBounds(),this.canvas=a.oc(this.canvas,this.rect.rotation,this.rect),this.mask&&(this.mask=a.oc(this.mask,this.rect.rotation,this.rect));let e=a.TL(this.canvas);e.equalTo(new n.A(0,0,this.canvas.width,this.canvas.height))||(this.canvas=a.bK(this.canvas,e),this.mask&&(this.mask=a.bK(this.mask,e)),this.rect.width=e.width,this.rect.height=e.height,this.rect.x+=e.x,this.rect.y+=e.y),this.rect.rotation=0}return this.render(),!0},this.switchCanvas=(e,t)=>{this.mask&&!this.rect.equalTo(t)&&(this.mask=a.p(this.mask,this.rect,t)),this.canvas=e,this.rect=t.clone()},this.extendCanvas=e=>{if(!this.canvas)return this.rect=e,void(this.canvas=a.Nw(e.width,e.height));let t=this.rect.union(e);this.rect.equalTo(t)||(this.canvas=a.p(this.canvas,this.rect,t),this.mask&&(this.mask=a.p(this.mask,this.rect,t)),this.rect=t)},this.hasMask=()=>!!this.mask,this.addMask=(e="clear")=>{if(this.mask=a.Nw(this.canvas.width,this.canvas.height),"fill"===e){this.mask.getContext("2d").fillRect(0,0,this.mask.width,this.mask.height)}},this.invertMask=()=>{if(this.mask){let e=a.Nw(this.mask.width,this.mask.height),t=e.getContext("2d");t.save(),t.fillRect(0,0,e.width,e.height),t.globalCompositeOperation="xor",t.drawImage(this.mask,0,0),t.restore(),this.mask=e}},this.removeMask=()=>{this.mask=void 0,this.baked=void 0},this.render=()=>{if(this.mask){if(!this.canvas)return;this.baked&&this.baked.width===this.canvas.width&&this.baked.height===this.canvas.height||(this.baked=a.Nw(this.canvas.width,this.canvas.height));var e=this.baked.getContext("2d");e.save(),e.globalCompositeOperation="copy",e.drawImage(this.canvas,0,0),e.globalCompositeOperation="destination-in",e.drawImage(this.mask,0,0),e.restore(),e=void 0}},this.shrinkWrap=()=>{const e=a.TL(this.canvas);if(!e)return this.canvas=void 0,this.mask=void 0,this.baked=void 0,this.rect=void 0,!0;if(!e.equalTo(this.rect)){const t=a.Nw(e.width,e.height);return t.getContext("2d").drawImage(this.canvas,-e.x,-e.y),this.canvas=t,this.rect=e.rebase(-this.rect.x,-this.rect.y),this.mask&&(this.mask=a.y2(this.mask,e)),!0}return!1},this.rasterize=()=>this.clone(),this.clone=(e=!1)=>{var t;let s=new o(e?this.id:a.Os(),this.settings.name,a.oM(this.canvas),null===(t=this.rect)||void 0===t?void 0:t.clone(),!1);return s.settings=Object.assign({},this.settings),e||(s.settings.locked=!1),s.animation=r.A.clone(this.animation),this.baked&&(s.baked=a.oM(this.baked)),this.hasMask()&&(s.mask=a.oM(this.mask)),s},this.canvas=s,this.rect=h,this.settings.name=t,this.settings.locked=c}}},40277:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateOrderResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CreateOrderResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"amount",baseName:"amount",type:"Amount"},{name:"expiresAt",baseName:"expiresAt",type:"string"},{name:"fraudResult",baseName:"fraudResult",type:"FraudResult"},{name:"orderData",baseName:"orderData",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"refusalReason",baseName:"refusalReason",type:"string"},{name:"remainingAmount",baseName:"remainingAmount",type:"Amount"},{name:"resultCode",baseName:"resultCode",type:"CreateOrderResponse.ResultCodeEnum"}],function(e){let t;!function(e){e.Success="Success"}(t=e.ResultCodeEnum||(e.ResultCodeEnum={}))}(s=t.CreateOrderResponse||(t.CreateOrderResponse={}))},40537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutOrderResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutOrderResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"expiresAt",baseName:"expiresAt",type:"string"},{name:"orderData",baseName:"orderData",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"remainingAmount",baseName:"remainingAmount",type:"Amount"}]},40562:(e,t,s)=>{s.a(e,async(e,i)=>{try{s.d(t,{A:()=>F});var a=s(21742),n=s(42268),r=s(54738),o=s(53900),h=s(40963),c=s(98244),l=s(41915),d=s(59857),p=s(93771),u=s(52040),m=s(63306),g=s(30973),y=s(79453),v=s(9720),f=s(37699),b=s(89209),w=s(68187),A=s(28754),x=s(82857),k=s(51668),S=s(16377),E=s(80953),T=s(97266),C=s(21079),M=s(3514),P=s(29755),D=s(66718),N=s(16499),L=s(82355),R=e([L]),_=R.then?(await R)():R;L=_[0];var I=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,s=e[Symbol.asyncIterator];return s?s.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=e[s]&&function(t){return new Promise(function(i,a){(function(e,t,s,i){Promise.resolve(i).then(function(t){e({value:t,done:s})},t)})(i,a,(t=e[s](t)).done,t.value)})}}};class F{constructor(){var e,t,s,i,R;this.navigate=e=>{"editor"===e?this.hideSplash():"home"===e&&this.showSplash()},this.showSplash=()=>{(0,n.Ay)("splash").style.display="flex",this.setHistory()},this.hideSplash=()=>{var e;(0,n.Ay)("splash").style.display="none",null===(e=(0,n.Ay)("modal-deeplink"))||void 0===e||e.remove(),this.setRads()},this.setUpSplash=()=>{var e,t,s,i,a,r;null===(e=(0,n.Ay)("splash"))||void 0===e||e.addEventListener("click",e=>{this.stage.tabs.length>0&&e.target===(0,n.Ay)("splash")&&this.hideSplash()}),null===(t=(0,n.Ay)("splash-close"))||void 0===t||t.addEventListener("mousedown",this.hideSplash,!0),null===(s=(0,n.Ay)("splash-file-menu"))||void 0===s||s.addEventListener("click",this.fileMenu,!0),null===(i=(0,n.Ay)("splash-drop-icon"))||void 0===i||i.addEventListener("mousedown",this.openClick,!0),null===(a=(0,n.Ay)("splash-open-image"))||void 0===a||a.addEventListener("mousedown",this.openClick,!0),null===(r=(0,n.Ay)("splash-open-new"))||void 0===r||r.addEventListener("mousedown",this.newClick,!0)},this.fileMenu=()=>{var e,t,s,i;const a=new u.A((0,n.Ay)("splash-file-menu"),"down");a.setContent('\n            <ul class="option-list medium">\n                <li id="splash-file-template"><img src="/img/icon/template.svg" class="ic">Find template</li>\n                <li id="splash-file-generator"><img src="/img/tool/generator.svg" class="ic">AI image generator</li>\n                <li id="splash-file-paste"><img src="/img/icon/clipboard.svg" class="ic">Paste from clipboard</li>\n                <li id="splash-file-url"><img src="/img/icon/link.svg" class="ic">Load image from URL</li>\n            </ul>\n        '),null===(e=(0,n.Ay)("splash-file-template"))||void 0===e||e.addEventListener("mousedown",()=>{window.location.href="/designer/template/",a.cleanUp()},!0),null===(t=(0,n.Ay)("splash-file-generator"))||void 0===t||t.addEventListener("mousedown",()=>{window.location.href="/image-generator/",a.cleanUp()},!0),null===(s=(0,n.Ay)("splash-file-paste"))||void 0===s||s.addEventListener("mousedown",()=>{this.pasteActivatedFromMenu(),a.cleanUp()},!0),null===(i=(0,n.Ay)("splash-file-url"))||void 0===i||i.addEventListener("mousedown",()=>{this.urlClick(),a.cleanUp()},!0)},this.setUpDeepLink=()=>{const e=(0,n.T)("div",{className:"button large positive rounded top-50",style:"min-width:250px"},(0,a.A)("openImage")),t=(0,n.T)("div",{className:"link"},(0,a.A)("close")),s=(0,n.T)("div",{id:"modal-deeplink",className:"modal dim",style:"flex-direction:column;gap:20px;align-items:center;"});s.innerHTML='<svg id="icon-deeplink" style="opacity:0.6;cursor:pointer" width="200" height="200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" class="ic">\n                <path fill="#fff" d="m2.4181 18.932-.88153-2.6572c-.15261-.47904-.11194-.99876.11334-1.4482.22542-.44773.61956-.78751 1.0956-.9445l10.376-3.6535c1.0084-.31165 2.0787.2517 2.3927 1.2593l2.5187 7.6819-3.3372-1.2593c-.30284-.11333-.64271.01615-.79338.30224l-2.8713 5.6922-2.6194-1.2593c-.25747-.12309-.56528-.061529-.7556.15112l-3.0217 2.8349-1.3349-4.1054zm13.599-11.504 2.2046-4.1762c.48035-.90871 1.5959-1.2713 2.5187-.81856l8.9412 4.6343c.44898.23275.785.63688.9319 1.1208.15189.4749.11119.99045-.11334 1.4356l-3.778 7.1908-1.3979-3.2994c-.12273-.30199-.45918-.45643-.76819-.35261l-6.5233 2.0779-1.423-4.2565c-.26042-.79413-.82707-1.4514-1.5742-1.826-.74599-.37996-1.6147-.43909-2.4053-.16371l-10.275 3.6283c-.79626.25664-1.4549.82441-1.826 1.5742-.39061.74691-.45443 1.6222-.17631 2.4179l.86894 2.7201.89412 2.5942 2.6068 7.8204c.26042.79413.82707 1.4514 1.5742 1.826.43924.21468.92155.32664 1.4104.32743.33841.001.67464-.05428.99487-.16371l10.364-3.6409c.79626-.25664 1.4549-.82441 1.826-1.5742.39061-.74691.45443-1.6222.17631-2.4179l-.10074-.30224h.06297c1.544.79997 3.4442.19665 4.2439-1.3475l6.3722-12.291c.79997-1.544.19665-3.4442-1.3475-4.2439l-8.9412-4.6343c-1.544-.79997-3.4442-.19665-4.2439 1.3475l-2.2046 4.2139m9.5717 7.6741 1.5742 3.778-1.889 3.6395c-.48035.90871-1.5959 1.2713-2.5187.81856l-1.2593-.62966-1.889-5.6796zm-4.7099 11.435c-.22542.44773-.61956.78751-1.0956.9445l-10.376 3.6535c-.97969.33024-2.0446-.17712-2.4053-1.146l-.7556-2.4053 3.1477-3.0994 2.7453 1.3727c.1533.06298.32524.06298.47854 0 .16013-.04975.29241-.16378.3652-.31483l2.9342-5.8559 3.778 1.4734.71782 2.1409.60448 1.7882c.14485.4823.09513 1.0021-.13853 1.4482zM8.4285 2.461h.61539v.61539a.61539.61539 0 0 0 1.2308 0V2.461h.61539a.61539.61539 0 0 0 0-1.2308h-.61539V.61481a.61539.61539 0 0 0-1.2308 0v.61539H8.4285a.61539.61539 0 0 0 0 1.2308zM24.429 29.538h-.61539v-.61539a.61539.61539 0 0 0-1.2308 0v.61539h-.61539a.61539.61539 0 0 0 0 1.2308h.61539v.61539a.61539.61539 0 0 0 1.2308 0v-.61539h.61539a.61539.61539 0 0 0 0-1.2308zM3.6591 7.6918a2 2 0 1 0-2-2 2 2 0 0 0 2 2zm0-3a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM29 23a2 2 0 1 0 2 2 2 2 0 0 0-2-2zm0 3a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"></path>\n                <circle cx="6.0883" cy="17.303" r="1.875" fill="#fff"></circle>\n                <circle cx="20.641" cy="8.0821" r="1.875" fill="#fff"></circle>\n            </svg>',s.append(e,t),document.body.append(s),e.addEventListener("click",()=>{this.openClick()}),t.addEventListener("click",()=>{this.showSplash(),s.remove()}),(0,n.Ay)("icon-deeplink").addEventListener("click",()=>{this.openClick()})},this.setHistory=async()=>{const e=(0,n.Ay)("splash-open-quick");e.innerHTML="";const t=(0,n.Ay)("history-content");t.innerHTML="";const s=await E.l.history();if((0,n.Ay)("splash-content-history").style.display=s.length>0?"block":"none",s.length>0){for(var i=0;i<s.length&&i<3;i++){const t=s[i],a=(0,n.T)("div");this.stage&&this.stage.tabs.some(e=>e.fresco.id===t.id)&&(a.className="active"),t.getThumbnail().then(e=>{e&&(e.onclick=()=>{this.stage&&this.stage.tabs.some(e=>e.fresco.id===t.id)?this.tabSelect(t.id):this.stage.openFromHistory(t,e)},e.alt=t.name,e.width=Math.round(e.width*(60/e.height)),e.height=60,a.appendChild(e))}),e.append(a)}e.appendChild((0,n.T)("a",{id:"quick-all",href:"#myhistory"},(0,a.A)("all"))),(0,n.Ay)("history-clear").onclick=async()=>{await new T.A("Confirm",(0,a.A)("historyClearConfirm"),(0,a.A)("clear")).init()&&(await E.l.deleteAll(),await this.setHistory(),this.stage&&this.stage.fresco&&this.stage.close(),(0,n.Ay)("splash-close").style.display="none")};for(i=0;i<s.length&&i<50;i++)t.appendChild(this.createHistoryBox(s[i]));s.length>50&&((0,n.Ay)("history-all").style.display="flex",(0,n.Ay)("history-all").onclick=this.showAllHistory),(0,n.Ay)("history-backup").onclick=async()=>{await new T.A("Confirm",(0,a.A)("historyBackupConfirm"),(0,a.A)("backup")).init()&&this.backupHistory()}}},this.backupHistory=async()=>{const e=(0,n.T)("div",{id:"modal-backup",className:"modal"});document.body.appendChild(e);const t=await E.l.history(),s=new Array;for(var i=0;i<t.length&&i<100;i++){document.dispatchEvent(new CustomEvent("loading",{detail:"Creating "+(i+1)+" of "+Math.min(t.length,100)}));const e=t[i],a=new x.A(e.id,e.name,e.width,e.height,e.transparent?void 0:e.color,e.animation,e.templateMeta);await e.restore(a);const n=await(0,D.Ab)(this.stage,{id:a.id,name:a.name,quality:1,nonDestructive:!1,type:"document",unit:"pixel"},a);s.push(new File([n],a.name+".pxz"))}document.dispatchEvent(new CustomEvent("loading",{detail:"Creating zip"}));let r=new L.ZipWriter;for(let a=0;a<s.length;a++){const e=s[a];let t=await e.arrayBuffer(),i=new Uint8Array(t);r.writeFile(e.name,i,!1)}const o=r.finish(),h=new File([new Blob([o.buffer])],"pixlr-backup("+(new Date).toDateString()+").zip",{type:"application/zip"});(0,D.gr)(h,"pixlr-backup-("+(new Date).toLocaleDateString()+")","zip"),document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("fileSaved")})),e.remove()},this.showAllHistory=async()=>{(0,n.Ay)("history-all").style.display="none";const e=await E.l.history(),t=(0,n.Ay)("history-content");for(var s=50;s<e.length;s++)t.appendChild(this.createHistoryBox(e[s]))},this.createHistoryBox=e=>{const t=this.stage&&this.stage.tabs.some(t=>t.fresco.id===e.id),s=t&&e.id===this.stage.fresco.id;let i,o=(0,n.T)("div",{id:e.id,className:"image-box"}),h=(0,n.T)("div",{className:"holder"});o.appendChild(h),t&&(o.classList.add("selected"),o.appendChild((0,n.T)("div",{id:e.id+"-active",className:"active"},s?"active":"open"))),e.getThumbnail().then(t=>{t&&(i=t,t.alt=e.name,t.width=Math.round(t.width*(180/t.height)),t.height=180,h.appendChild(t))});const d=async t=>{null==t||t.preventDefault(),null==t||t.stopPropagation();const s=(0,n.T)("div",{className:"modal dim"});(0,n.Ay)("splash").append(s),document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));const i="pxz",r=e.name||"Untitled";let o;if(!(P.Ay.useLegacySave||!(0,D.zu)())&&(o=await(0,D.D0)(r,i,"Pixlr document","application/pxz"),!1===o))return document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),void s.remove();const h=new x.A(e.id,e.name,e.width,e.height,e.transparent?void 0:e.color,e.animation,e.templateMeta);await e.restore(h);const l=await(0,D.Ab)(this.stage,{id:h.id,name:r,quality:1,nonDestructive:!1,type:"document",unit:"pixel"},h);if(l)if(o){await(0,D.IF)(o,new File([l],r+"."+i))||(0,D.gr)(new File([l],r+"."+i),r,i)}else(0,D.gr)(new File([l],r+"."+i),r,i);s.remove(),document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("fileSaved")})),(0,c.A)("save-file","pxz-home")},p=async t=>{null==t||t.preventDefault(),null==t||t.stopPropagation(),await E.l.duplicate(e.id),this.setHistory()},u=async i=>{var r,o,h;null==i||i.preventDefault(),null==i||i.stopPropagation(),await e.pendingRemove((i,a)=>{var r,o;i&&console.log(i),a&&(t&&this.tabClose(e.id,!0),s&&((0,n.Ay)(e.id).classList.remove("selected"),null===(r=(0,n.Ay)(e.id+"-active"))||void 0===r||r.remove()),null===(o=(0,n.Ay)(e.id))||void 0===o||o.remove())}),t&&this.tabClose(e.id,!0),s&&((0,n.Ay)(e.id).classList.remove("selected"),null===(r=(0,n.Ay)(e.id+"-active"))||void 0===r||r.remove());let c=(0,n.T)("div",{className:"pending-remove"}),l=(0,n.T)("span",{},(0,a.A)("historyPendingDelete")),d=(0,n.T)("a",{},` ${(0,a.A)("historyUndo")}`);d.addEventListener("click",async t=>{null==t||t.preventDefault(),null==t||t.stopPropagation(),await e.undoRemove(),(0,n.Ay)(e.id).classList.remove("pending"),c.remove()}),c.append(l,d),null===(o=(0,n.Ay)(e.id))||void 0===o||o.classList.add("pending"),null===(h=(0,n.Ay)(e.id))||void 0===h||h.append(c)},m=(0,n.T)("div",{className:"settings"});o.appendChild(m);const g=(0,n.T)("img",{className:"close",src:"/img/icon/close.svg",alt:`${(0,a.A)("historyDelete")} ${e.name}`});g.addEventListener("click",u),m.appendChild(g);const y=(0,n.T)("img",{className:"more",src:"/img/icon/three-dot.svg",alt:(0,a.A)("documentActions")});y.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=e.currentTarget.getBoundingClientRect();new C.Ay(new l.A(t.x+(0,n.Ay)("splash").scrollLeft+10,t.y+(0,n.Ay)("splash").scrollTop+10),[new C.kt((0,a.A)("historyDownloadPXZ"),d),new C.kt,new C.kt((0,a.A)("historyDuplicate"),p),new C.kt((0,a.A)("historyDelete"),u)])}),m.appendChild(y);let v=document.createElement("input");v.value=e.name?e.name.toLowerCase():"Untitled",v.className="name",v.addEventListener("click",e=>(e.stopPropagation(),!1)),v.addEventListener("keyup",r.eD(500,()=>{e.name=v.value,e.save()})),o.appendChild(v);let f=document.createElement("span");return f.innerText=r.XP(e.lastModified),f.className="since",o.appendChild(f),o.addEventListener("click",()=>{o.classList.contains("pending")||(this.stage&&this.stage.tabs.some(t=>t.fresco.id===e.id)?this.tabSelect(e.id):this.stage.openFromHistory(e,i).catch(e=>{alert("Error restoring document"),console.error(e)}))},!1),o},this.setRads=()=>{if(null==P.Ay.api&&"localhost"!==location.hostname&&"beta.pixlr.com"!==location.hostname&&!(null===y.N||void 0===y.N?void 0:y.N.subscription)&&!(0,n.Ay)("right-space")&&document.body.clientWidth>1024){const t=(0,n.T)("div",{id:"right-space"});document.body.appendChild(t),((e,t)=>{e.innerHTML=t,Array.from(e.querySelectorAll("script")).forEach(e=>{const t=document.createElement("script");Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)});const s=document.createTextNode(e.innerHTML);t.appendChild(s),e.parentNode.replaceChild(t,e)})})(t,'\n                       \n            \x3c!-- GDPR Stub File --\x3e\n            <script>"use strict"; function _typeof(t) { return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t })(t) } !function () { var t = function () { var t, e, o = [], n = window, r = n; for (; r;) { try { if (r.frames.__tcfapiLocator) { t = r; break } } catch (t) { } if (r === n.top) break; r = r.parent } t || (!function t() { var e = n.document, o = !!n.frames.__tcfapiLocator; if (!o) if (e.body) { var r = e.createElement("iframe"); r.style.cssText = "display:none", r.name = "__tcfapiLocator", e.body.appendChild(r) } else setTimeout(t, 5); return !o }(), n.__tcfapi = function () { for (var t = arguments.length, n = new Array(t), r = 0; r < t; r++)n[r] = arguments[r]; if (!n.length) return o; "setGdprApplies" === n[0] ? n.length > 3 && 2 === parseInt(n[1], 10) && "boolean" == typeof n[3] && (e = n[3], "function" == typeof n[2] && n[2]("set", !0)) : "ping" === n[0] ? "function" == typeof n[2] && n[2]({ gdprApplies: e, cmpLoaded: !1, cmpStatus: "stub" }) : o.push(n) }, n.addEventListener("message", (function (t) { var e = "string" == typeof t.data, o = {}; if (e) try { o = JSON.parse(t.data) } catch (t) { } else o = t.data; var n = "object" === _typeof(o) && null !== o ? o.__tcfapiCall : null; n && window.__tcfapi(n.command, n.version, (function (o, r) { var a = { __tcfapiReturn: { returnValue: o, success: r, callId: n.callId } }; t && t.source && t.source.postMessage && t.source.postMessage(e ? JSON.stringify(a) : a, "*") }), n.parameter) }), !1)) }; "undefined" != typeof module ? module.exports = t : t() }();<\/script>\n\n            \x3c!-- CCPA Stub File --\x3e\n            <script>(function () { var e = false; var c = window; var t = document; function r() { if (!c.frames["__uspapiLocator"]) { if (t.body) { var a = t.body; var e = t.createElement("iframe"); e.style.cssText = "display:none"; e.name = "__uspapiLocator"; a.appendChild(e) } else { setTimeout(r, 5) } } } r(); function p() { var a = arguments; __uspapi.a = __uspapi.a || []; if (!a.length) { return __uspapi.a } else if (a[0] === "ping") { a[2]({ gdprAppliesGlobally: e, cmpLoaded: false }, true) } else { __uspapi.a.push([].slice.apply(a)) } } function l(t) { var r = typeof t.data === "string"; try { var a = r ? JSON.parse(t.data) : t.data; if (a.__cmpCall) { var n = a.__cmpCall; c.__uspapi(n.command, n.parameter, function (a, e) { var c = { __cmpReturn: { returnValue: a, success: e, callId: n.callId } }; t.source.postMessage(r ? JSON.stringify(c) : c, "*") }) } } catch (a) { } } if (typeof __uspapi !== "function") { c.__uspapi = p; __uspapi.msgHandler = l; c.addEventListener("message", l, false) } })();<\/script>\n\n            \x3c!-- GPP Stub File --\x3e\n            <script>window.__gpp_addFrame=function(e){if(!window.frames[e])if(document.body){var t=document.createElement("iframe");t.style.cssText="display:none",t.name=e,document.body.appendChild(t)}else window.setTimeout(window.__gpp_addFrame,10,e)},window.__gpp_stub=function(){var e=arguments;if(__gpp.queue=__gpp.queue||[],__gpp.events=__gpp.events||[],!e.length||1==e.length&&"queue"==e[0])return __gpp.queue;if(1==e.length&&"events"==e[0])return __gpp.events;var t=e[0],p=e.length>1?e[1]:null,s=e.length>2?e[2]:null;if("ping"===t)p({gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}},!0);else if("addEventListener"===t){"lastId"in __gpp||(__gpp.lastId=0),__gpp.lastId++;var n=__gpp.lastId;__gpp.events.push({id:n,callback:p,parameter:s}),p({eventName:"listenerRegistered",listenerId:n,data:!0,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}}},!0)}else if("removeEventListener"===t){for(var a=!1,i=0;i<__gpp.events.length;i++)if(__gpp.events[i].id==s){__gpp.events.splice(i,1),a=!0;break}p({eventName:"listenerRemoved",listenerId:s,data:a,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:["2:tcfeuv2","5:tcfcav1","6:uspv1","7:usnatv1","8:uscav1","9:usvav1","10:uscov1","11:usutv1","12:usctv1"],cmpId:0,sectionList:[],applicableSections:[],gppString:"",parsedSections:{}}},!0)}else"hasSection"===t?p(!1,!0):"getSection"===t||"getField"===t?p(null,!0):__gpp.queue.push([].slice.apply(e))},window.__gpp_msghandler=function(e){var t="string"==typeof e.data;try{var p=t?JSON.parse(e.data):e.data}catch(e){p=null}if("object"==typeof p&&null!==p&&"__gppCall"in p){var s=p.__gppCall;window.__gpp(s.command,(function(p,n){var a={__gppReturn:{returnValue:p,success:n,callId:s.callId}};e.source.postMessage(t?JSON.stringify(a):a,"*")}),"parameter"in s?s.parameter:null,"version"in s?s.version:"1.1")}},"__gpp"in window&&"function"==typeof window.__gpp||(window.__gpp=window.__gpp_stub,window.addEventListener("message",window.__gpp_msghandler,!1),window.__gpp_addFrame("__gppLocator"));<\/script>\n                        \n            <script>\n                window._sp_queue = [];\n                window._sp_ = {\n                    config: {\n                        accountId: 1638,\n                        baseEndpoint: "https://cdn.privacy-mgmt.com",\n                        usnat: {\n                            includeUspApi: true,\n                        },\n\n                        gdpr: {},\n                        events: {\n                            onMessageChoiceSelect: function () {\n                                console.log("[event] onMessageChoiceSelect", arguments);\n                            },\n                            onMessageReady: function () {\n                                console.log("[event] onMessageReady", arguments);\n                            },\n                            onMessageChoiceError: function () {\n                                console.log("[event] onMessageChoiceError", arguments);\n                            },\n                            onPrivacyManagerAction: function () {\n                                console.log("[event] onPrivacyManagerAction", arguments);\n                            },\n                            onPMCancel: function () {\n                                console.log("[event] onPMCancel", arguments);\n                            },\n                            onMessageReceiveData: function () {\n                                console.log("[event] onMessageReceiveData", arguments);\n                            },\n                            onSPPMObjectReady: function () {\n                                console.log("[event] onSPPMObjectReady", arguments);\n                            },\n\n                            /* Function required for resurfacing links */\n                            onConsentReady: function (message_type, uuid, string, info) {\n                                if (message_type == "usnat" && info.applies) {\n                                    /* code to insert the GPP footer link */\n                                    document.getElementById("pmLink").style.visibility = "visible";\n                                    document.getElementById("pmLink").innerHTML =\n                                        "Do Not Sell or Share My Personal Information";\n                                    document.getElementById("pmLink").onclick = function () {\n                                        /* Set GPP ID */\n                                        window._sp_.usnat.loadPrivacyManagerModal("1035372");\n                                    };\n                                }\n                                if (message_type == "gdpr" && info.applies) {\n                                    /* code to insert the GDPR footer link */\n                                    document.getElementById("pmLink").style.visibility = "visible";\n                                    document.getElementById("pmLink").innerHTML =\n                                        "Privacy Preferences";\n                                    document.getElementById("pmLink").onclick = function () {\n                                        /* Set GDPR ID */\n                                        window._sp_.gdpr.loadPrivacyManagerModal("899033");\n                                    };\n                                }\n                            },\n                            onError: function () {\n                                console.log("[event] onError", arguments);\n                            },\n                        },\n                    },\n                };\n            <\/script>\n            <script src="https://cdn.privacy-mgmt.com/unified/wrapperMessagingWithoutDetection.js" async><\/script>\n\n            <style type="text/css">\n                #pmLink {\n                    z-index:99;\n                    border: none;\n                    color:#FFFFFF55;\n                    cursor: pointer;\n                    position:absolute;\n                    bottom:10px; right:5px;\n                    text-decoration: none;\n                    background: transparent;\n                    visibility: hidden;\n                    font-size:0.9rem;\n                }\n                #pmLink:hover {\n                    color:#FFFFFFFF;\n                }\n            </style>\n\n            <button id="pmLink">Privacy Manager</button>\n            ');try{document.body.clientWidth>1600?((0,c.A)("ads","cut"),t.style.width="300px",(0,n.Ay)("workspace").style.right="304px",t.appendChild((0,n.T)("iframe",{id:"iasriiigh",src:"/fad/cut/",frameBorder:"0",scrolling:"no",style:"width:300px;height:100%;overflow:hidden;"}))):((0,c.A)("ads","slot"),t.style.width="160px",(0,n.Ay)("workspace").style.right="164px",t.appendChild((0,n.T)("iframe",{id:"iasriiigh",src:"/fad/slot/",frameBorder:"0",scrolling:"no",style:"width:160px;height:100%;overflow:hidden;"})))}catch(e){console.log(e)}const s=()=>{(0,n.Ay)("iasriiigh").src=(0,n.Ay)("iasriiigh").src};window.setInterval(s,18e4)}},this.selectTool=e=>{},this.isSplash=()=>"none"!==(0,n.Ay)("splash").style.display,this.isModal=()=>document.getElementsByClassName("modal").length>0,this.tabSelect=e=>{this.stage.select(e),this.hideSplash()},this.tabClose=(e,t=!1)=>{this.stage.close(e),t||0!==this.stage.tabs.length||this.showSplash()},this.tabCloseAll=(e=!1)=>{this.stage.tabs.map(e=>e.fresco.id).forEach(e=>this.stage.close(e)),e||this.showSplash()},this.tabCloseOthers=e=>{this.stage.select(e);this.stage.tabs.map(e=>e.fresco.id).filter(t=>t!==e).forEach(e=>this.stage.close(e))},this.tabDuplicate=e=>{this.stage.duplicate(e)},this.tabQuickExport=e=>{this.stage.select(e),this.quickExport()},this.tabSave=(e,t)=>{this.stage.select(e),new g.A(this.stage,t)},this.dragOver=e=>{if(e.preventDefault(),e.stopPropagation(),!(this.isModal()&&this.stage.fresco||(0,n.Ay)("modal-drop"))){const e=document.createElement("div");e.id="modal-drop",e.classList.add("modal","dim"),e.innerHTML=`<div id="dim-message">${(0,a.A)("dropFile")}</div>`,document.body.appendChild(e)}},this.dragOut=e=>{e.preventDefault(),e.stopPropagation(),e.clientX<=0&&(0,n.Ay)("modal-drop")&&(0,n.Ay)("modal-drop").remove()},this.drop=async e=>{if(e.stopPropagation(),e.preventDefault(),(0,n.Ay)("modal-drop")&&(0,n.Ay)("modal-drop").remove(),document.body.style.pointerEvents="auto",this.isModal()&&this.stage.fresco)return;const t=e.dataTransfer.files;for(var s,i=0;s=t[i];i++)await p.Tq(s,this.stage,!0,"drop")},this.cut=async e=>{var t;if(r.Jn(document.activeElement))return;if(this.isModal())return;if(null===(t=this.stage.fresco)||void 0===t?void 0:t.block)return void document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("notAllowed")}));e.stopPropagation(),e.preventDefault();let s=this.stage.cut();s instanceof HTMLCanvasElement?(this.writeClipboard(e,s),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("cut")}))):navigator.clipboard.writeText("")},this.copy=async e=>{var t;if(r.Jn(document.activeElement))return;if(this.isModal())return;if(null===(t=this.stage.fresco)||void 0===t?void 0:t.block)return void document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("notAllowed")}));e.stopPropagation(),e.preventDefault();let s=this.stage.copy();s instanceof HTMLCanvasElement?(this.writeClipboard(e,s),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("copy")}))):navigator.clipboard.writeText("")},this.clear=async()=>{this.stage.clear()&&document.dispatchEvent(new CustomEvent("notification",{detail:"clear"}))},this.writeClipboard=async(e,t)=>{const s=await r.PG(t);if(s){this.stage.clipboard=t,this.stage.clipboardSize=new o.A(t.width,t.height);try{const e={name:"clipboard-write"};await navigator.permissions.query(e)}catch(i){console.log(i)}try{const e=new ClipboardItem({"image/png":s});await navigator.clipboard.write([e]),this.stage.clipboard=void 0}catch(i){console.log(i)}}},this.pasteActivatedFromMenu=async()=>{try{const e={name:"clipboard-read"};await navigator.permissions.query(e)}catch(e){console.log(e)}try{const e=await navigator.clipboard.read(),t=await e[0].getType("image/png");if(t)p.Tq(new File([t],"clipboard"),this.stage,!1,"paste"),this.stage.selectionDeselect(),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("paste")}));else{if(this.stage.clipboard)return void this.pasteLocal();document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("noPaste")}))}}catch(e){if(console.log(e),this.stage.clipboard)return void this.pasteLocal();document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("emptyPaste")}))}},this.paste=async e=>{if(!this.isModal()&&!r.Jn(document.activeElement)){if(e.clipboardData&&e.clipboardData.items.length>0){const i=e.clipboardData.items;let n;for(var t,s=0;t=i[s];s++)if("file"===t.kind){n=t;break}if(n||(n=i[0]),"string"===n.kind)return void n.getAsString(async t=>{e.preventDefault(),e.stopPropagation();let s=/<img\s[^>]*?src\s*=\s*['\"]([^'\"]*?)['\"][^>]*?>/gi.exec(t);if(s&&s.length>1){let e=await(new m.A).load(s[1]);return p.Tq(e,this.stage,this.isSplash()),this.hideSplash(),void document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("paste")}))}if(this.stage.fresco){t.length>200&&(t=t.substring(0,200));let e=Math.max(16,Math.round(this.stage.fresco.height/20)),s=Math.round(this.stage.fresco.width/1.5),i=Math.round(this.stage.fresco.height/2.5),n=Math.round((this.stage.fresco.width-s)/2),r=new b.A("verdana",e);this.stage.addText(t,new h.A(n,i,s,e),r,"paste"),this.hideSplash(),this.stage.selectionDeselect(),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("paste")}))}});if("file"===n.kind){if(-1==n.type.indexOf("image"))return;e.preventDefault(),e.stopPropagation();const t=n.getAsFile();return p.Tq(t,this.stage,this.isSplash(),"paste"),this.stage.selectionDeselect(),this.hideSplash(),void document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("paste")}))}}else if(this.stage.clipboard)return void this.pasteLocal();document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("emptyPasteGlobal")}))}},this.pasteLocal=()=>{Array.isArray(this.stage.clipboard)?this.stage.pasteLayer():this.stage.clipboard instanceof HTMLCanvasElement&&(this.stage.addImage(r.oM(this.stage.clipboard),(this.stage.fresco,this.stage.fresco.nextAddedLayerNumber()),"paste"),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("paste")})),this.stage.selectionDeselect())},this.quickExport=async(e=!1,t="png")=>{var s,i,n,o;if(this.stage.fresco.block)return!1;if(!(null===y.N||void 0===y.N?void 0:y.N.subscription)&&(0,P.P2)())return new M.A("quick-export","save"),!1;let h,l,d;if(e){if(l=null===(i=null===(s=this.stage.fresco)||void 0===s?void 0:s.getSelected())||void 0===i?void 0:i.canvas,!l)return!1;h=(null===(o=null===(n=this.stage.fresco)||void 0===n?void 0:n.getSelected())||void 0===o?void 0:o.settings.name)||"untitled"}else l=this.stage.getOutputCanvas(),h=this.stage.fresco.name||"untitled",this.stage.fresco.savedTimesCounterForUserEase>0&&(h+="("+this.stage.fresco.savedTimesCounterForUserEase+")"),this.stage.fresco.savedTimesCounterForUserEase++;if(h=h.replace(".png","").replace(".jpg",""),!(P.Ay.useLegacySave||!(0,D.zu)())&&(d=await(0,D.D0)(h,t,t.toUpperCase()+" image","image/"+t.replace("jpg","jpeg")),!1===d))return!1;const p=await r.PG(l,{type:"image/"+t.replace("jpg","jpeg"),quality:1}),u=new File([p],h+"."+t,{type:"image/"+t.replace("jpg","jpeg")});return d?(await(0,D.IF)(d,u),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("fileSaved")}))):(0,D.gr)(u,h,t),(0,P.pp)(),(0,c.A)("quick-export",e?"layer":"image"),!0},this.urlClick=e=>{(0,c.A)("open-url"),new S.A(this.stage)},this.newClick=e=>{(0,c.A)("open-new"),new k.A(this.stage)},this.openClick=async e=>{(0,c.A)("open-browse"),await p.XN(!0).then(async e=>{for(let t=0;t<e.length;t++)await p.Tq(e[t],this.stage)})},this.closeClick=()=>{(0,c.A)("close"),this.selectTool(),this.tabClose()},this.saveClick=()=>{if((0,c.A)("save"),this.selectTool(),P.Ay.api&&P.Ay.exportFormats&&P.Ay.exportFormats.length>0)return this.setSaving(),void(0,D.s5)(this.stage).finally(()=>{this.setSaving(!1)});new g.A(this.stage)},this.setSaving=(e=!0)=>{(0,n.Ay)("save").classList.toggle("working",e)};new A.A,new v.A;if((window.matchMedia("(display-mode: standalone)").matches||document.referrer.includes("android-app://"))&&(document.title="Pixlr Editor",document.documentElement.classList.add("standalone")),P.Ay.performanceMode&&(null===(e=(0,n.Ay)("splash-reels"))||void 0===e||e.remove()),document.addEventListener("cut",this.cut,!0),document.addEventListener("copy",this.copy,!0),document.addEventListener("paste",this.paste,!0),document.addEventListener("cut-menu",()=>document.execCommand("cut"),!0),document.addEventListener("copy-menu",()=>document.execCommand("copy"),!0),document.addEventListener("paste-menu",this.pasteActivatedFromMenu,!0),document.addEventListener("clear-menu",()=>this.clear(),!0),document.addEventListener("dragover",this.dragOver,!0),document.addEventListener("dragleave",this.dragOut,!0),document.addEventListener("drop",this.drop,!0),document.addEventListener("navigate",e=>this.navigate(e.detail)),this.stage=new d.A((0,n.Ay)("workspace")),null===(t=(0,n.Ay)("head-settings"))||void 0===t||t.replaceWith((0,n.Ay)("head-settings").cloneNode(!0)),null===(s=(0,n.Ay)("head-settings"))||void 0===s||s.addEventListener("click",()=>new N.A(this.stage)),null===(i=(0,n.Ay)("head-menu-settings"))||void 0===i||i.replaceWith((0,n.Ay)("head-menu-settings").cloneNode(!0)),null===(R=(0,n.Ay)("head-menu-settings"))||void 0===R||R.addEventListener("click",()=>new N.A(this.stage)),P.Ay.tabLimit&&(this.stage.tabLimit=P.Ay.tabLimit),P.Ay.file){new m.A({title:P.Ay.name||P.Ay.file.substring(P.Ay.file.lastIndexOf("/")+1),referrer:P.Ay.referrer}).load("/proxy/?url="+encodeURIComponent(P.Ay.file)).then(async e=>{await p.Tq(e,this.stage,void 0,"api"),"http"===P.Ay.api&&P.Ay.target&&(this.stage.fresco.saveMethod=new URL(P.Ay.target))})}"embedded"===P.Ay.api&&(0,w.E)(this.stage),P.Ay.api&&((0,n.Ay)("toggle-home").style.display="none"),P.Ay.file||P.Ay.api||!P.Ay.tool&&!P.Ay.task||this.setUpDeepLink(),async function(){var e,t,s,i;const a=await f.A.loadSaved();try{for(var n,r=!0,o=I(a);!(e=(n=await o.next()).done);r=!0){i=n.value,r=!1;const e=i;f.A.fontList.unshift(e)}}catch(h){t={error:h}}finally{try{r||e||!(s=o.return)||await s.call(o)}finally{if(t)throw t.error}}}(),P.Ay.api||(this.setUpSplash(),this.setHistory()),document.dispatchEvent(new CustomEvent("resize"))}}i()}catch(F){i(F)}})},40730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDSRequestData=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ThreeDSRequestData=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"challengeWindowSize",baseName:"challengeWindowSize",type:"ThreeDSRequestData.ChallengeWindowSizeEnum"},{name:"dataOnly",baseName:"dataOnly",type:"ThreeDSRequestData.DataOnlyEnum"},{name:"nativeThreeDS",baseName:"nativeThreeDS",type:"ThreeDSRequestData.NativeThreeDSEnum"},{name:"threeDSVersion",baseName:"threeDSVersion",type:"ThreeDSRequestData.ThreeDSVersionEnum"}],function(e){let t,s,i,a;!function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05"}(t=e.ChallengeWindowSizeEnum||(e.ChallengeWindowSizeEnum={})),function(e){e.False="false",e.True="true"}(s=e.DataOnlyEnum||(e.DataOnlyEnum={})),function(e){e.Preferred="preferred"}(i=e.NativeThreeDSEnum||(e.NativeThreeDSEnum={})),function(e){e._10="2.1.0",e._20="2.2.0"}(a=e.ThreeDSVersionEnum||(e.ThreeDSVersionEnum={}))}(s=t.ThreeDSRequestData||(t.ThreeDSRequestData={}))},40791:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDKEphemPubKey=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.SDKEphemPubKey=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"crv",baseName:"crv",type:"string"},{name:"kty",baseName:"kty",type:"string"},{name:"x",baseName:"x",type:"string"},{name:"y",baseName:"y",type:"string"}]},40961:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShopperInput=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ShopperInput=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"billingAddress",baseName:"billingAddress",type:"ShopperInput.BillingAddressEnum"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"ShopperInput.DeliveryAddressEnum"},{name:"personalDetails",baseName:"personalDetails",type:"ShopperInput.PersonalDetailsEnum"}],function(e){let t,s,i;!function(e){e.Editable="editable",e.Hidden="hidden",e.ReadOnly="readOnly"}(t=e.BillingAddressEnum||(e.BillingAddressEnum={})),function(e){e.Editable="editable",e.Hidden="hidden",e.ReadOnly="readOnly"}(s=e.DeliveryAddressEnum||(e.DeliveryAddressEnum={})),function(e){e.Editable="editable",e.Hidden="hidden",e.ReadOnly="readOnly"}(i=e.PersonalDetailsEnum||(e.PersonalDetailsEnum={}))}(s=t.ShopperInput||(t.ShopperInput={}))},40963:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(21404),a=s(41915),n=s(53900);class r{constructor(e=0,t=0,s=0,i=0,a=0){this.x=e,this.y=t,this.width=s,this.height=i,this.rotation=a}left(){return this.x}right(){return this.x+this.width}top(){return this.y}bottom(){return this.y+this.height}size(){return new n.A(this.width,this.height)}center(){return new a.A(this.x+this.width/2,this.y+this.height/2)}topLeft(){return new a.A(this.x,this.y)}topRight(){return new a.A(this.right(),this.y)}bottomLeft(){return new a.A(this.x,this.bottom())}bottomRight(){return new a.A(this.right(),this.bottom())}setTop(e){this.height=this.y+this.height-e,this.y=e}setLeft(e){this.width=this.x+this.width-e,this.x=e}setRight(e){this.width=Math.round(e-this.x)}setBottom(e){this.height=Math.round(e-this.y)}setCenter(e){this.x=e.x-.5*this.width,this.y=e.y-.5*this.height}setCenterX(e){this.x=e-.5*this.width}setCenterY(e){this.y=e-.5*this.height}moveRight(e){this.x=Math.round(e-this.width)}moveBottom(e){this.y=Math.round(e-this.height)}isSet(){return this.x>0||this.y>0||this.width>0||this.height>0||this.rotation>0}isInside(e){return e.x>=this.x&&e.x<this.x+this.width&&e.y>=this.y&&e.y<this.y+this.height}contains(e){return!!(e&&e.x>=this.x&&e.y>=this.y&&e.bottom()<=this.bottom()&&e.right()<=this.right())}equalTo(e){return!!e&&(this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height&&this.rotation===e.rotation)}clone(){return new r(this.x,this.y,this.width,this.height,this.rotation)}scale(e){return new r(Math.round(this.x*e),Math.round(this.y*e),Math.round(this.width*e),Math.round(this.height*e),this.rotation)}flipWidthAndHeight(){return new r(this.y,this.x,this.height,this.width)}union(e){if(!e)return this;const t=Math.min(this.x,e.x),s=Math.min(this.y,e.y),i=Math.max(this.x+this.width,e.x+e.width),a=Math.max(this.y+this.height,e.y+e.height);return new r(t,s,i-t,a-s)}intersect(e){let t=Math.max(this.x,e.x),s=Math.min(this.x+this.width,e.x+e.width);if(s<=t)return;let i=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return a<=i?void 0:new r(t,i,s-t,a-i)}rebase(e,t){return new r(Math.round(this.x-e),Math.round(this.y-t),Math.round(this.width),Math.round(this.height))}gridAlign(){return new r(Math.floor(this.x),Math.floor(this.y),Math.ceil(this.width),Math.ceil(this.height))}getRotatedBounds(){if(0===this.rotation)return this;let e=new i.A,t=this.center();e.translate(t),e.rotate(this.rotation*Math.PI/180),e.invert();const s=e.transformPoint(this.topLeft()),a=e.transformPoint(this.topRight()),n=e.transformPoint(this.bottomLeft()),o=e.transformPoint(this.bottomRight());let h=r.fromPoints([s,a,n,o]);return h.x=Math.round(h.x+t.x),h.y=Math.round(h.y+t.y),h.rotation=this.rotation,h}rotatedSize(e){const t=this.width,s=this.height,i=(e,t)=>{var s=e[0].x,i=e[0].y,n=e[1].x,r=e[1].y,o=t[0].x,h=t[0].y,c=t[1].x,l=t[1].y;return new a.A(((s*r-i*n)*(o-c)-(s-n)*(o*l-h*c))/((s-n)*(h-l)-(i-r)*(o-c)),((s*r-i*n)*(h-l)-(i-r)*(o*l-h*c))/((s-n)*(h-l)-(i-r)*(o-c)))};let r,o,h,c,l,d,p;var u=e*(Math.PI/180),m=[new a.A(0,0),new a.A(t,0),new a.A(t,s),new a.A(0,s)],g=((e,t)=>{for(var s=new Array,i=0;i<e.length;++i)s.push(new a.A(e[i].x*Math.cos(t)-e[i].y*Math.sin(t),e[i].x*Math.sin(t)+e[i].y*Math.cos(t)));return s})(m=((e,t,s)=>{for(var i=new Array,n=0;n<e.length;++n)i.push(new a.A(e[n].x+t,e[n].y+s));return i})(m,-t/2,-s/2),u);return e>=0?(r=[new a.A(0,0),new a.A(-t/2,-s/2)],h=[g[0],g[3]],d=i(r,h),o=[new a.A(0,0),new a.A(t/2,-s/2)],c=[g[0],g[1]],p=i(o,c)):(r=[new a.A(0,0),new a.A(t/2,-s/2)],h=[g[1],g[2]],p=i(r,h),o=[new a.A(0,0),new a.A(-t/2,-s/2)],c=[g[0],g[1]],d=i(o,c)),l=new a.A(Math.max(d.x,-p.x),Math.max(d.y,p.y)),new n.A(Math.round(-l.x-l.x),Math.round(-l.y-l.y))}pad(e){return new r(this.x-e,this.y-e,this.width+2*e,this.height+2*e)}getAspect(){return this.width/this.height}getComparedScale(e){if(e)return new n.A(this.width/e.width,this.height/e.height)}static calculate(e,t,s=0){if(!e||!t)return;let i=new r;return i.x=Math.round(e.x<t.x?e.x:t.x),i.y=Math.round(e.y<t.y?e.y:t.y),i.width=Math.round(e.x<t.x?t.x-i.x:e.x-i.x),i.height=0!==s?Math.round(i.width/s):Math.round(e.y<t.y?t.y-i.y:e.y-i.y),i}static merge(e,t){if(!e&&!t)return;if(e&&!t)return e;if(!e&&t)return t;const s=Math.round(Math.min(e.x,t.x)),i=Math.round(Math.min(e.y,t.y)),a=Math.round(Math.max(e.x+e.width,t.x+t.width)),n=Math.round(Math.max(e.y+e.height,t.y+t.height));return new r(s,i,a-s,n-i)}static fillFit(e,t,s,i,a=!1){let n=1;return n=e/t<s/i?s/e:i/t,a&&n>1&&(n=1),new r(Math.round((s-e*n)/2),Math.round((i-t*n)/2),Math.round(e*n),Math.round(t*n))}static bestFit(e,t,s,i,a=!1){let n=1;return n=e/t>s/i?s/e:i/t,n>1&&!a&&(n=1),new r(Math.round((s-e*n)/2),Math.round((i-t*n)/2),Math.round(e*n),Math.round(t*n))}static fromPoints(e){let t=e[0].x,s=e[0].x,i=e[0].y,a=e[0].y;return e.forEach(e=>{t=Math.min(e.x,t),s=Math.max(e.x,s),i=Math.min(e.y,i),a=Math.max(e.y,a)}),new r(Math.round(t),Math.round(i),Math.round(s-t),Math.round(a-i))}static fromPointRects(e,t,s){let i=e[0].x,a=e[0].x+t,n=e[0].y,o=e[0].y+s;return e.forEach(e=>{i=Math.min(e.x,i),a=Math.max(e.x+t,a),n=Math.min(e.y,n),o=Math.max(e.y+s,o)}),new r(i,n,a-i,o-n)}}},41705:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FraudResult=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.FraudResult=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"accountScore",baseName:"accountScore",type:"number"},{name:"results",baseName:"results",type:"Array<FraudCheckResult>"}]},41915:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e=0,t=0){this.x=e,this.y=t}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}angleTo(e){let t=-(this.x-e.x),s=this.y-e.y,i=360-Math.atan2(s,t)*(180/Math.PI);return i<0&&(i+=360),i>360&&(i-=360),i}dot(e){return this.x*e.x+this.y*e.y}lengthSQ(){return this.dot(this)}length(){return Math.sqrt(this.lengthSQ())}hypot2(){return this.dot(this)}hypot(){return Math.hypot(this.x,this.y)}add(e){return e?e instanceof i?new i(this.x+e.x,this.y+e.y):new i(this.x+e,this.y+e):this}neg(e){return e instanceof i?new i(this.x-e.x,this.y-e.y):new i(this.x-e,this.y-e)}mul(e){return e instanceof i?new i(this.x*e.x,this.y*e.y):new i(this.x*e,this.y*e)}rotateAround(e,t){let s=Math.sin(t),a=Math.cos(t),n=this.x-e.x,r=this.y-e.y,o=n*s+r*a;return new i(n*a-r*s+e.x,o+e.y)}equalTo(e){return this.x===e.x&&this.y===e.y}clone(){return new i(this.x,this.y)}}},41919:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AcctInfo=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AcctInfo=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"chAccAgeInd",baseName:"chAccAgeInd",type:"AcctInfo.ChAccAgeIndEnum"},{name:"chAccChange",baseName:"chAccChange",type:"string"},{name:"chAccChangeInd",baseName:"chAccChangeInd",type:"AcctInfo.ChAccChangeIndEnum"},{name:"chAccPwChange",baseName:"chAccPwChange",type:"string"},{name:"chAccPwChangeInd",baseName:"chAccPwChangeInd",type:"AcctInfo.ChAccPwChangeIndEnum"},{name:"chAccString",baseName:"chAccString",type:"string"},{name:"nbPurchaseAccount",baseName:"nbPurchaseAccount",type:"string"},{name:"paymentAccAge",baseName:"paymentAccAge",type:"string"},{name:"paymentAccInd",baseName:"paymentAccInd",type:"AcctInfo.PaymentAccIndEnum"},{name:"provisionAttemptsDay",baseName:"provisionAttemptsDay",type:"string"},{name:"shipAddressUsage",baseName:"shipAddressUsage",type:"string"},{name:"shipAddressUsageInd",baseName:"shipAddressUsageInd",type:"AcctInfo.ShipAddressUsageIndEnum"},{name:"shipNameIndicator",baseName:"shipNameIndicator",type:"AcctInfo.ShipNameIndicatorEnum"},{name:"suspiciousAccActivity",baseName:"suspiciousAccActivity",type:"AcctInfo.SuspiciousAccActivityEnum"},{name:"txnActivityDay",baseName:"txnActivityDay",type:"string"},{name:"txnActivityYear",baseName:"txnActivityYear",type:"string"}],function(e){let t,s,i,a,n,r,o;!function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05"}(t=e.ChAccAgeIndEnum||(e.ChAccAgeIndEnum={})),function(e){e._01="01",e._02="02",e._03="03",e._04="04"}(s=e.ChAccChangeIndEnum||(e.ChAccChangeIndEnum={})),function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05"}(i=e.ChAccPwChangeIndEnum||(e.ChAccPwChangeIndEnum={})),function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05"}(a=e.PaymentAccIndEnum||(e.PaymentAccIndEnum={})),function(e){e._01="01",e._02="02",e._03="03",e._04="04"}(n=e.ShipAddressUsageIndEnum||(e.ShipAddressUsageIndEnum={})),function(e){e._01="01",e._02="02"}(r=e.ShipNameIndicatorEnum||(e.ShipNameIndicatorEnum={})),function(e){e._01="01",e._02="02"}(o=e.SuspiciousAccActivityEnum||(e.SuspiciousAccActivityEnum={}))}(s=t.AcctInfo||(t.AcctInfo={}))},42268:(e,t,s)=>{s.d(t,{Ay:()=>n,Bb:()=>c,J9:()=>h,T:()=>r,TT:()=>d,lR:()=>o,y8:()=>l});var i=s(21742),a=s(41915);function n(e){return document.getElementById(e)}function r(e,...t){const s=document.createElement(e);if(0===t.length)return s;const i=t[0],a=!("string"==typeof i||i instanceof HTMLElement),n=a?t.slice(1):t;if(a&&i){if(i.style){const e=i.style;delete i.style,"string"==typeof e?s.setAttribute("style",e):Object.assign(s.style,e)}if(i.dataset){const e=i.dataset;delete i.dataset,"object"==typeof e&&Object.entries(e).map(([e,t])=>s.setAttribute(`data-${e}`,t))}i.tooltip&&s.setAttribute("tooltip",i.tooltip),i.flow&&s.setAttribute("flow",i.flow),Object.assign(s,i)}return s.append(...n.filter(e=>null!=e)),s}function o(e,t){const s=document.cookie.split(";").map(e=>e.trim().split("=")).find(([t,s])=>t===e);return s?s[1]:t}function h(e){return new Promise(t=>{const s=new IntersectionObserver(([e])=>{t(1===e.intersectionRatio),s.disconnect()});s.observe(e)})}function c(e,t,s,i){e.style.touchAction="none";const n=e=>{e.stopPropagation(),e.preventDefault(),s&&s(new a.A(e.clientX,e.clientY))},r=t=>{t.stopPropagation(),t.preventDefault(),i&&i(new a.A(t.clientX,t.clientY)),e.removeEventListener("pointermove",n,!0),e.removeEventListener("pointerup",r,!0),e.releasePointerCapture(t.pointerId)};e.addEventListener("pointerdown",s=>{s.preventDefault(),s.button>0||(e.addEventListener("pointermove",n,!0),e.addEventListener("pointerup",r,!0),e.setPointerCapture(s.pointerId),t&&t(new a.A(s.clientX,s.clientY)))},!0)}const l=(e="success",t="common-ServerError",s=3,a)=>{let o=t?(0,i.A)(t):"danger"==e?(0,i.A)("common-ServerError"):(0,i.A)("common-success");a&&(o=o.replace("{email}",a)),document.body.append(r("div",{id:"toast-box",className:`toast ${e}`},r("span",r("img",{src:`/images/icon/${e}_alert.svg`})),r("span",{className:"toast-text"},o),r("span",{className:`toast-close ${e}`,style:"line-height: 0;",onclick:()=>{var e;return null===(e=n("toast-box"))||void 0===e?void 0:e.remove()}},r("img",{style:"width: 14px;",src:"/images/icon/close.png"})))),setTimeout(()=>{var e;return null===(e=n("toast-box"))||void 0===e?void 0:e.remove()},1e3*s)};function d(e,t,s,a=!1){let n=!1;if(t||(t=e.value),"email"===s)(t=t.trim()).match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)||a&&""===t?(e.classList.remove("invalid"),e.nextElementSibling.style.display="none"):(n=!0,e.classList.add("invalid"),e.nextElementSibling.style.display="block");else if("password"===s){const s=e.nextElementSibling;t.length<8||t.length>50?(n=!0,e.classList.add("invalid"),s.style.display="block",t.length<8?s.innerHTML=(0,i.A)("common-MinPassword"):t.length>50&&(s.innerHTML=(0,i.A)("common-MaxPassword"))):t.indexOf("'")>-1||t.indexOf('"')>-1?(n=!0,e.classList.add("invalid"),s.style.display="block",s.innerHTML=(0,i.A)("common-InvalidSpecialChar")):e.getAttribute("data-login")||/^(?=\S*$)(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).+$/.test(t)?(e.classList.remove("invalid"),s.style.display="none"):(n=!0,e.classList.add("invalid"),s.style.display="block",s.innerHTML=(0,i.A)("common-InvalidPasswordCombination"))}else if("code"===s){const s=e.nextElementSibling;6!==t.length?(e.classList.add("invalid"),s.style.display="block",n=!0):(e.classList.remove("invalid"),s.style.display="none"),setTimeout(()=>{e.classList.remove("invalid"),s.style.display="none"},3e3)}return!n}},42865:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DonationPaymentResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.DonationPaymentResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"donationAccount",baseName:"donationAccount",type:"string"},{name:"id",baseName:"id",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"payment",baseName:"payment",type:"PaymentResponse"},{name:"reference",baseName:"reference",type:"string"},{name:"status",baseName:"status",type:"DonationPaymentResponse.StatusEnum"}],function(e){let t;!function(e){e.Completed="completed",e.Pending="pending",e.Refused="refused"}(t=e.StatusEnum||(e.StatusEnum={}))}(s=t.DonationPaymentResponse||(t.DonationPaymentResponse={}))},42903:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(21742),a=s(54738),n=s(22866),r=s(23556);class o{constructor(e,t){this.apply=()=>{setTimeout(()=>{const e=this.selected.trim?this.selected.trim.clone():this.selected.rect.clone(),t=a.oM(this.selected.canvas);if(this.selected.type!==n.A.TYPE_FRAME&&this.stage.fresco.hasSelection()){let e=a.Nw(t.width,t.height),i=e.getContext("2d");i.drawImage(this.shaders.apply(this.selected.canvas),0,0),i.globalCompositeOperation="destination-in",i.drawImage(this.stage.fresco.selection.mask,-this.selected.rect.x,-this.selected.rect.y);var s=this.selected.canvas.getContext("2d");s.drawImage(e,0,0),s=void 0,i=void 0,e=void 0}else this.selected.replaceCanvas(this.shaders.apply(this.selected.canvas));this.selected.render(),this.stage.history.add({type:"bitmapSwitch",kind:this.kind,layer:this.selected,rect:e,canvas:t}),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)(this.kind)})),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select"))})},this.kind=t,this.stage=e,this.shaders=new r.A,this.selected=this.stage.fresco.getSelected()}}},43079:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodsResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentMethodsResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"paymentMethods",baseName:"paymentMethods",type:"Array<PaymentMethod>"},{name:"storedPaymentMethods",baseName:"storedPaymentMethods",type:"Array<StoredPaymentMethod>"}]},44146:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(42268),a=s(40963),n=s(41915);class r{constructor(e,t){this.stage=e,this.active=t,this.isMouseDown=!1,this.dragStart=e=>{this.p=e,this.d=new n.A(this.panel.offsetLeft,this.panel.offsetTop)},this.dragMove=e=>{this.panel.style.left=Math.round(this.d.x+(e.x-this.p.x))+"px",this.panel.style.top=Math.round(this.d.y+(e.y-this.p.y))+"px"},this.dragEnd=e=>{let t=Math.round(this.d.y+(e.y-this.p.y)),s=Math.round(this.d.x+(e.x-this.p.x));t<76&&(t=76),s<0&&(s=0),s+120>(0,i.Ay)("workspace").offsetWidth&&(s=(0,i.Ay)("workspace").offsetWidth-240),this.panel.style.left=s+"px",this.panel.style.top=t+"px"},this.activate=e=>{this.panel.classList.toggle("active",e),e&&this.panel.classList.remove("collapse"),this.active=e,this.render()},this.render=()=>{if(!this.stage||!this.stage.fresco)return this.back.width=1,this.back.height=1,void(this.navh.innerText=this.navw.innerText="");if(this.active&&!this.isMouseDown&&!this.stage.supressRender){this.viewport=a.A.bestFit(this.stage.fresco.width,this.stage.fresco.height,140,120),this.scale=this.viewport.width/this.stage.fresco.width,this.nav.style.width=this.viewport.width+2+"px",this.nav.style.height=this.viewport.height+2+"px",this.back.width=this.viewport.width,this.back.height=this.viewport.height;var e=this.back.getContext("2d");e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high",this.stage.getOutputCanvas(this.stage.fresco,this.scale,void 0,e),e=void 0,this.position()}},this.position=()=>{if(this.active&&this.stage&&this.stage.fresco){let e=this.viewport.width,t=this.viewport.height,s=0,i=0;e=Math.round(this.back.width*(this.stage.viewClip.width/(this.stage.fresco.width*this.stage.zoom))),t=Math.round(this.back.height*(this.stage.viewClip.height/(this.stage.fresco.height*this.stage.zoom))),s=-Math.round((this.stage.offset.x<0?this.stage.offset.x/this.stage.zoom:0)*this.scale),i=-Math.round((this.stage.offset.y<0?this.stage.offset.y/this.stage.zoom:0)*this.scale),this.marker.style.width=e+"px",this.marker.style.height=t+"px",this.marker.style.left=s+"px",this.marker.style.top=i+"px",this.setSelectionOrImageSize()}},this.mouseCord=e=>{if(!this.active||!this.stage.fresco)return;let t=e.detail;t&&this.stage&&t.x>-1&&t.y>-1&&t.x<this.stage.fresco.width&&t.y<this.stage.fresco.height?(this.navx.innerText=t.x.toString(),this.navy.innerText=t.y.toString()):(this.navx.innerText="",this.navy.innerText="")},this.setSelectionOrImageSize=()=>{this.stage.fresco.hasSelection()?(this.navw.innerText=this.stage.fresco.selection.bounds.width.toString(),this.navh.innerText=this.stage.fresco.selection.bounds.height.toString()):(this.navw.innerText=this.stage.fresco.width.toString(),this.navh.innerText=this.stage.fresco.height.toString())},this.backDown=e=>{e.stopPropagation();let t=this.back.getBoundingClientRect(),s=this.stage.fresco.width/this.back.width;this.stage.setAnchor(new n.A(Math.round((e.clientX-t.x)*s),Math.round((e.clientY-t.y)*s))),this.stage.updateViewport()},this.touchStart=e=>{e.preventDefault(),e.stopPropagation(),this.down(e.changedTouches[0].clientX,e.changedTouches[0].clientY),document.addEventListener("touchmove",this.touchMove,{passive:!1}),document.addEventListener("touchend",this.touchEnd,{passive:!1})},this.touchMove=e=>{e.preventDefault(),e.stopPropagation(),this.move(e.changedTouches[0].clientX,e.changedTouches[0].clientY)},this.touchEnd=e=>{e.preventDefault(),e.stopPropagation(),this.up(e.changedTouches[0].clientX,e.changedTouches[0].clientY),document.removeEventListener("touchmove",this.touchMove),document.removeEventListener("touchend",this.touchEnd)},this.mouseDown=e=>{e.stopPropagation(),this.down(e.clientX,e.clientY),document.addEventListener("mousemove",this.mouseMove,!0),document.addEventListener("mouseup",this.mouseUp,!0)},this.mouseMove=e=>{e.stopPropagation(),this.move(e.clientX,e.clientY)},this.mouseUp=e=>{e.stopPropagation(),this.up(e.clientX,e.clientY),document.removeEventListener("mousemove",this.mouseMove,!0),document.removeEventListener("mouseup",this.mouseUp,!0)},this.down=(e,t)=>{this.isMouseDown=!0,this.downPoint=new n.A(e,t),this.downPosition=new n.A(this.marker.offsetLeft,this.marker.offsetTop)},this.move=(e,t)=>{let s=this.downPosition.x+(e-this.downPoint.x),i=this.downPosition.y+(t-this.downPoint.y);this.stage.setAnchor(new n.A(Math.round((s+this.marker.clientWidth/2)/this.scale),Math.round((i+this.marker.clientHeight/2)/this.scale))),this.stage.updateViewport()},this.up=(e,t)=>{this.isMouseDown=!1},this.panel=(0,i.Ay)("navigator-panel"),this.panel.classList.toggle("active",t),this.viewport=new a.A,this.nav=(0,i.Ay)("zoom-nav"),this.back=(0,i.Ay)("zoom-nav-back"),this.marker=(0,i.Ay)("zoom-nav-marker"),this.navx=(0,i.Ay)("nav-cord-x"),this.navy=(0,i.Ay)("nav-cord-y"),this.navw=(0,i.Ay)("nav-size-w"),this.navh=(0,i.Ay)("nav-size-h"),this.marker.addEventListener("mousedown",this.mouseDown,!1),this.marker.addEventListener("touchstart",this.touchStart,{passive:!1}),this.back.addEventListener("mousedown",this.backDown,!1),(0,i.Ay)("zoom-out").addEventListener("click",()=>this.stage.setZoomStep(!1),!1),(0,i.Ay)("zoom-in").addEventListener("click",()=>this.stage.setZoomStep(!0),!1),(0,i.Ay)("zoom-input").addEventListener("input",()=>{const e=Number.parseFloat((0,i.Ay)("zoom-input").value.replace("%",""))/100;e>0&&this.stage.setZoom(e.toString())},!1),(0,i.Ay)("zoom-input").addEventListener("blur",()=>{(0,i.Ay)("zoom-input").value=Math.round(100*this.stage.zoom)+"%"},!1),(0,i.Ay)("zoom-slider").addEventListener("input",()=>{let e=Number.parseFloat((0,i.Ay)("zoom-slider").value),t=1;t=e<=40?.1+e/40*.9:e<=75?1+(e-40)/35*4:5+(e-75)/25*45,this.stage.setZoom(t.toString())},!1),document.addEventListener("zoom-change",()=>{(0,i.Ay)("zoom-input")!==document.activeElement&&((0,i.Ay)("zoom-input").value=Math.round(100*this.stage.zoom)+"%");let e=this.stage.zoom,t=(0,i.Ay)("zoom-slider");t.value=e<=1?Math.round(40*(e-.1)).toString():e<=5?Math.round(40+(e-1)/4*35).toString():Math.round(75+(e-5)/45*25).toString()}),(0,i.Ay)("navigator-minimize").addEventListener("pointerdown",e=>{e.stopPropagation(),(0,i.Ay)("navigator-panel").classList.toggle("collapse")},!0),(0,i.Ay)("navigator-close").addEventListener("pointerdown",e=>{e.stopPropagation(),document.dispatchEvent(new CustomEvent("panel-state",{detail:"navigator-panel"}))},!0),document.addEventListener("mouse-cord",this.mouseCord),document.addEventListener("viewport-update",this.position),document.addEventListener("layerlist-update",this.render),(0,i.Bb)((0,i.Ay)("navigator-panel-title"),this.dragStart,this.dragMove,this.dragEnd)}}},44190:function(e,t,s){var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var a=Object.getOwnPropertyDescriptor(t,s);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,a)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),a=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectSerializer=void 0,a(s(36349),t),a(s(41919),t),a(s(32050),t),a(s(33707),t),a(s(61471),t),a(s(87929),t),a(s(71068),t),a(s(12664),t),a(s(78085),t),a(s(86894),t),a(s(68823),t),a(s(32213),t),a(s(10955),t),a(s(4494),t),a(s(56289),t),a(s(31747),t),a(s(14118),t),a(s(74035),t),a(s(63270),t),a(s(78604),t),a(s(77472),t),a(s(12800),t),a(s(18962),t),a(s(86857),t),a(s(36970),t),a(s(36319),t),a(s(71355),t),a(s(67839),t),a(s(4528),t),a(s(78424),t),a(s(96782),t),a(s(59858),t),a(s(94079),t),a(s(54843),t),a(s(28883),t),a(s(83864),t),a(s(64409),t),a(s(63810),t),a(s(7430),t),a(s(23123),t),a(s(69831),t),a(s(66866),t),a(s(61247),t),a(s(92082),t),a(s(45569),t),a(s(55637),t),a(s(83255),t),a(s(58772),t),a(s(76992),t),a(s(89922),t),a(s(35713),t),a(s(509),t),a(s(40537),t),a(s(39312),t),a(s(8850),t),a(s(62388),t),a(s(60254),t),a(s(56983),t),a(s(89834),t),a(s(19405),t),a(s(94233),t),a(s(54476),t),a(s(78245),t),a(s(98721),t),a(s(22049),t),a(s(40277),t),a(s(58686),t),a(s(81993),t),a(s(83427),t),a(s(30814),t),a(s(63479),t),a(s(60149),t),a(s(42865),t),a(s(62085),t),a(s(90027),t),a(s(51118),t),a(s(61268),t),a(s(58876),t),a(s(4370),t),a(s(73831),t),a(s(41705),t),a(s(72141),t),a(s(99732),t),a(s(26059),t),a(s(27311),t),a(s(11923),t),a(s(25110),t),a(s(26241),t),a(s(91188),t),a(s(86779),t),a(s(78576),t),a(s(27636),t),a(s(10081),t),a(s(59399),t),a(s(8879),t),a(s(24609),t),a(s(55080),t),a(s(89814),t),a(s(289),t),a(s(97336),t),a(s(58850),t),a(s(80422),t),a(s(60662),t),a(s(44786),t),a(s(64531),t),a(s(62103),t),a(s(58953),t),a(s(51611),t),a(s(92681),t),a(s(24524),t),a(s(68344),t),a(s(38658),t),a(s(27821),t),a(s(49785),t),a(s(80811),t),a(s(87151),t),a(s(29654),t),a(s(51864),t),a(s(89355),t),a(s(46095),t),a(s(17092),t),a(s(53507),t),a(s(81989),t),a(s(22822),t),a(s(4738),t),a(s(1439),t),a(s(63315),t),a(s(43079),t),a(s(79049),t),a(s(97197),t),a(s(78707),t),a(s(92135),t),a(s(2837),t),a(s(68209),t),a(s(59566),t),a(s(37888),t),a(s(54742),t),a(s(21912),t),a(s(89899),t),a(s(54671),t),a(s(31046),t),a(s(45568),t),a(s(68242),t),a(s(39689),t),a(s(85900),t),a(s(25808),t),a(s(11319),t),a(s(96144),t),a(s(22463),t),a(s(58726),t),a(s(34490),t),a(s(86924),t),a(s(34102),t),a(s(79809),t),a(s(47716),t),a(s(55967),t),a(s(40791),t),a(s(4586),t),a(s(49442),t),a(s(65211),t),a(s(54477),t),a(s(29196),t),a(s(40961),t),a(s(47395),t),a(s(20718),t),a(s(63026),t),a(s(92278),t),a(s(82424),t),a(s(49410),t),a(s(87628),t),a(s(86476),t),a(s(2567),t),a(s(55408),t),a(s(19383),t),a(s(98916),t),a(s(20576),t),a(s(22192),t),a(s(78861),t),a(s(65426),t),a(s(62348),t),a(s(40730),t),a(s(96495),t),a(s(24491),t),a(s(66877),t),a(s(90590),t),a(s(58710),t),a(s(74852),t),a(s(82661),t),a(s(81857),t),a(s(57892),t),a(s(95219),t),a(s(51110),t),a(s(13671),t),a(s(77851),t);const n=s(36349),r=s(41919),o=s(32050),h=s(33707),c=s(61471),l=s(87929),d=s(71068),p=s(12664),u=s(78085),m=s(86894),g=s(68823),y=s(32213),v=s(10955),f=s(4494),b=s(56289),w=s(31747),A=s(14118),x=s(74035),k=s(63270),S=s(78604),E=s(77472),T=s(12800),C=s(18962),M=s(86857),P=s(36970),D=s(36319),N=s(71355),L=s(67839),R=s(4528),_=s(78424),I=s(96782),F=s(59858),z=s(94079),O=s(54843),q=s(28883),B=s(83864),U=s(64409),H=s(63810),V=s(7430),$=s(23123),j=s(69831),G=s(66866),W=s(61247),X=s(92082),Y=s(45569),K=s(55637),Z=s(83255),Q=s(58772),J=s(76992),ee=s(89922),te=s(35713),se=s(509),ie=s(40537),ae=s(39312),ne=s(8850),re=s(62388),oe=s(60254),he=s(56983),ce=s(89834),le=s(19405),de=s(94233),pe=s(54476),ue=s(78245),me=s(98721),ge=s(22049),ye=s(40277),ve=s(58686),fe=s(81993),be=s(83427),we=s(30814),Ae=s(63479),xe=s(60149),ke=s(42865),Se=s(62085),Ee=s(90027),Te=s(51118),Ce=s(61268),Me=s(58876),Pe=s(4370),De=s(73831),Ne=s(41705),Le=s(72141),Re=s(99732),_e=s(26059),Ie=s(27311),Fe=s(11923),ze=s(25110),Oe=s(26241),qe=s(91188),Be=s(86779),Ue=s(78576),He=s(27636),Ve=s(10081),$e=s(59399),je=s(8879),Ge=s(24609),We=s(55080),Xe=s(89814),Ye=s(289),Ke=s(97336),Ze=s(58850),Qe=s(80422),Je=s(60662),et=s(44786),tt=s(64531),st=s(62103),it=s(58953),at=s(51611),nt=s(92681),rt=s(24524),ot=s(68344),ht=s(38658),ct=s(27821),lt=s(49785),dt=s(80811),pt=s(87151),ut=s(29654),mt=s(51864),gt=s(89355),yt=s(46095),vt=s(17092),ft=s(53507),bt=s(81989),wt=s(22822),At=s(4738),xt=s(1439),kt=s(63315),St=s(43079),Et=s(79049),Tt=s(97197),Ct=s(78707),Mt=s(92135),Pt=s(2837),Dt=s(68209),Nt=s(59566),Lt=s(37888),Rt=s(54742),_t=s(21912),It=s(89899),Ft=s(54671),zt=s(31046),Ot=s(45568),qt=s(68242),Bt=s(39689),Ut=s(85900),Ht=s(25808),Vt=s(11319),$t=s(96144),jt=s(22463),Gt=s(58726),Wt=s(34490),Xt=s(86924),Yt=s(34102),Kt=s(79809),Zt=s(47716),Qt=s(55967),Jt=s(40791),es=s(4586),ts=s(49442),ss=s(65211),is=s(54477),as=s(29196),ns=s(40961),rs=s(47395),os=s(20718),hs=s(63026),cs=s(92278),ls=s(82424),ds=s(49410),ps=s(87628),us=s(86476),ms=s(2567),gs=s(55408),ys=s(19383),vs=s(98916),fs=s(20576),bs=s(22192),ws=s(78861),As=s(65426),xs=s(62348),ks=s(40730),Ss=s(96495),Es=s(24491),Ts=s(66877),Cs=s(90590),Ms=s(58710),Ps=s(74852),Ds=s(82661),Ns=s(81857),Ls=s(57892),Rs=s(95219),_s=s(51110),Is=s(13671),Fs=s(77851);let zs=["string","boolean","double","integer","long","float","number","any"],Os={"AccountInfo.AccountAgeIndicatorEnum":n.AccountInfo.AccountAgeIndicatorEnum,"AccountInfo.AccountChangeIndicatorEnum":n.AccountInfo.AccountChangeIndicatorEnum,"AccountInfo.AccountTypeEnum":n.AccountInfo.AccountTypeEnum,"AccountInfo.DeliveryAddressUsageIndicatorEnum":n.AccountInfo.DeliveryAddressUsageIndicatorEnum,"AccountInfo.PasswordChangeIndicatorEnum":n.AccountInfo.PasswordChangeIndicatorEnum,"AccountInfo.PaymentAccountIndicatorEnum":n.AccountInfo.PaymentAccountIndicatorEnum,"AcctInfo.ChAccAgeIndEnum":r.AcctInfo.ChAccAgeIndEnum,"AcctInfo.ChAccChangeIndEnum":r.AcctInfo.ChAccChangeIndEnum,"AcctInfo.ChAccPwChangeIndEnum":r.AcctInfo.ChAccPwChangeIndEnum,"AcctInfo.PaymentAccIndEnum":r.AcctInfo.PaymentAccIndEnum,"AcctInfo.ShipAddressUsageIndEnum":r.AcctInfo.ShipAddressUsageIndEnum,"AcctInfo.ShipNameIndicatorEnum":r.AcctInfo.ShipNameIndicatorEnum,"AcctInfo.SuspiciousAccActivityEnum":r.AcctInfo.SuspiciousAccActivityEnum,"AchDetails.BankAccountTypeEnum":o.AchDetails.BankAccountTypeEnum,"AchDetails.TypeEnum":o.AchDetails.TypeEnum,"AdditionalData3DSecure.ChallengeWindowSizeEnum":h.AdditionalData3DSecure.ChallengeWindowSizeEnum,"AdditionalDataCommon.IndustryUsageEnum":d.AdditionalDataCommon.IndustryUsageEnum,"AfterpayDetails.TypeEnum":S.AfterpayDetails.TypeEnum,"AmazonPayDetails.TypeEnum":E.AmazonPayDetails.TypeEnum,"AncvDetails.TypeEnum":C.AncvDetails.TypeEnum,"AndroidPayDetails.TypeEnum":M.AndroidPayDetails.TypeEnum,"ApplePayDetails.FundingSourceEnum":P.ApplePayDetails.FundingSourceEnum,"ApplePayDetails.TypeEnum":P.ApplePayDetails.TypeEnum,"ApplePayDonations.FundingSourceEnum":D.ApplePayDonations.FundingSourceEnum,"ApplePayDonations.TypeEnum":D.ApplePayDonations.TypeEnum,"AuthenticationData.AttemptAuthenticationEnum":_.AuthenticationData.AttemptAuthenticationEnum,"Avs.EnabledEnum":I.Avs.EnabledEnum,"BacsDirectDebitDetails.TypeEnum":F.BacsDirectDebitDetails.TypeEnum,"BalanceCheckRequest.RecurringProcessingModelEnum":z.BalanceCheckRequest.RecurringProcessingModelEnum,"BalanceCheckRequest.ShopperInteractionEnum":z.BalanceCheckRequest.ShopperInteractionEnum,"BalanceCheckResponse.ResultCodeEnum":O.BalanceCheckResponse.ResultCodeEnum,"BillDeskDetails.TypeEnum":B.BillDeskDetails.TypeEnum,"BlikDetails.TypeEnum":H.BlikDetails.TypeEnum,"CancelOrderResponse.ResultCodeEnum":j.CancelOrderResponse.ResultCodeEnum,"CardDetails.FundingSourceEnum":X.CardDetails.FundingSourceEnum,"CardDetails.TypeEnum":X.CardDetails.TypeEnum,"CardDonations.FundingSourceEnum":Z.CardDonations.FundingSourceEnum,"CardDonations.TypeEnum":Z.CardDonations.TypeEnum,"CashAppDetails.TypeEnum":Q.CashAppDetails.TypeEnum,"CellulantDetails.TypeEnum":J.CellulantDetails.TypeEnum,"CheckoutAwaitAction.TypeEnum":ee.CheckoutAwaitAction.TypeEnum,"CheckoutDelegatedAuthenticationAction.TypeEnum":te.CheckoutDelegatedAuthenticationAction.TypeEnum,"CheckoutNativeRedirectAction.TypeEnum":se.CheckoutNativeRedirectAction.TypeEnum,"CheckoutQrCodeAction.TypeEnum":ae.CheckoutQrCodeAction.TypeEnum,"CheckoutRedirectAction.TypeEnum":ne.CheckoutRedirectAction.TypeEnum,"CheckoutSDKAction.TypeEnum":re.CheckoutSDKAction.TypeEnum,"CheckoutSessionInstallmentOption.PlansEnum":oe.CheckoutSessionInstallmentOption.PlansEnum,"CheckoutThreeDS2Action.TypeEnum":he.CheckoutThreeDS2Action.TypeEnum,"CheckoutVoucherAction.TypeEnum":ce.CheckoutVoucherAction.TypeEnum,"Configuration.CardHolderNameEnum":pe.Configuration.CardHolderNameEnum,"CreateCheckoutSessionRequest.ChannelEnum":ue.CreateCheckoutSessionRequest.ChannelEnum,"CreateCheckoutSessionRequest.ModeEnum":ue.CreateCheckoutSessionRequest.ModeEnum,"CreateCheckoutSessionRequest.RecurringProcessingModelEnum":ue.CreateCheckoutSessionRequest.RecurringProcessingModelEnum,"CreateCheckoutSessionRequest.ShopperInteractionEnum":ue.CreateCheckoutSessionRequest.ShopperInteractionEnum,"CreateCheckoutSessionRequest.StorePaymentMethodModeEnum":ue.CreateCheckoutSessionRequest.StorePaymentMethodModeEnum,"CreateCheckoutSessionResponse.ChannelEnum":me.CreateCheckoutSessionResponse.ChannelEnum,"CreateCheckoutSessionResponse.ModeEnum":me.CreateCheckoutSessionResponse.ModeEnum,"CreateCheckoutSessionResponse.RecurringProcessingModelEnum":me.CreateCheckoutSessionResponse.RecurringProcessingModelEnum,"CreateCheckoutSessionResponse.ShopperInteractionEnum":me.CreateCheckoutSessionResponse.ShopperInteractionEnum,"CreateCheckoutSessionResponse.StorePaymentMethodModeEnum":me.CreateCheckoutSessionResponse.StorePaymentMethodModeEnum,"CreateOrderResponse.ResultCodeEnum":ye.CreateOrderResponse.ResultCodeEnum,"DeliveryMethod.TypeEnum":fe.DeliveryMethod.TypeEnum,"DeviceRenderOptions.SdkInterfaceEnum":we.DeviceRenderOptions.SdkInterfaceEnum,"DeviceRenderOptions.SdkUiTypeEnum":we.DeviceRenderOptions.SdkUiTypeEnum,"DokuDetails.TypeEnum":Ae.DokuDetails.TypeEnum,"DonationPaymentRequest.ChannelEnum":xe.DonationPaymentRequest.ChannelEnum,"DonationPaymentRequest.RecurringProcessingModelEnum":xe.DonationPaymentRequest.RecurringProcessingModelEnum,"DonationPaymentRequest.ShopperInteractionEnum":xe.DonationPaymentRequest.ShopperInteractionEnum,"DonationPaymentResponse.StatusEnum":ke.DonationPaymentResponse.StatusEnum,"DotpayDetails.TypeEnum":Se.DotpayDetails.TypeEnum,"DragonpayDetails.TypeEnum":Ee.DragonpayDetails.TypeEnum,"EcontextVoucherDetails.TypeEnum":Te.EcontextVoucherDetails.TypeEnum,"GenericIssuerPaymentMethodDetails.TypeEnum":_e.GenericIssuerPaymentMethodDetails.TypeEnum,"GiropayDetails.TypeEnum":Ie.GiropayDetails.TypeEnum,"GooglePayDetails.FundingSourceEnum":Fe.GooglePayDetails.FundingSourceEnum,"GooglePayDetails.TypeEnum":Fe.GooglePayDetails.TypeEnum,"GooglePayDonations.FundingSourceEnum":ze.GooglePayDonations.FundingSourceEnum,"GooglePayDonations.TypeEnum":ze.GooglePayDonations.TypeEnum,"IdealDetails.TypeEnum":Oe.IdealDetails.TypeEnum,"IdealDonations.TypeEnum":qe.IdealDonations.TypeEnum,"InstallmentOption.PlansEnum":Ue.InstallmentOption.PlansEnum,"Installments.PlanEnum":He.Installments.PlanEnum,"KlarnaDetails.TypeEnum":je.KlarnaDetails.TypeEnum,"Mandate.AmountRuleEnum":Xe.Mandate.AmountRuleEnum,"Mandate.BillingAttemptsRuleEnum":Xe.Mandate.BillingAttemptsRuleEnum,"Mandate.FrequencyEnum":Xe.Mandate.FrequencyEnum,"MasterpassDetails.FundingSourceEnum":Ye.MasterpassDetails.FundingSourceEnum,"MasterpassDetails.TypeEnum":Ye.MasterpassDetails.TypeEnum,"MbwayDetails.TypeEnum":Ke.MbwayDetails.TypeEnum,"MerchantRiskIndicator.DeliveryAddressIndicatorEnum":Qe.MerchantRiskIndicator.DeliveryAddressIndicatorEnum,"MerchantRiskIndicator.DeliveryTimeframeEnum":Qe.MerchantRiskIndicator.DeliveryTimeframeEnum,"MobilePayDetails.TypeEnum":Je.MobilePayDetails.TypeEnum,"MolPayDetails.TypeEnum":et.MolPayDetails.TypeEnum,"OpenInvoiceDetails.TypeEnum":st.OpenInvoiceDetails.TypeEnum,"PayPalDetails.SubtypeEnum":it.PayPalDetails.SubtypeEnum,"PayPalDetails.TypeEnum":it.PayPalDetails.TypeEnum,"PayUUpiDetails.TypeEnum":at.PayUUpiDetails.TypeEnum,"PayWithGoogleDetails.FundingSourceEnum":nt.PayWithGoogleDetails.FundingSourceEnum,"PayWithGoogleDetails.TypeEnum":nt.PayWithGoogleDetails.TypeEnum,"PayWithGoogleDonations.FundingSourceEnum":rt.PayWithGoogleDonations.FundingSourceEnum,"PayWithGoogleDonations.TypeEnum":rt.PayWithGoogleDonations.TypeEnum,"PaymentAmountUpdateRequest.IndustryUsageEnum":ot.PaymentAmountUpdateRequest.IndustryUsageEnum,"PaymentAmountUpdateResponse.IndustryUsageEnum":ht.PaymentAmountUpdateResponse.IndustryUsageEnum,"PaymentAmountUpdateResponse.StatusEnum":ht.PaymentAmountUpdateResponse.StatusEnum,"PaymentCancelResponse.StatusEnum":lt.PaymentCancelResponse.StatusEnum,"PaymentCaptureResponse.StatusEnum":pt.PaymentCaptureResponse.StatusEnum,"PaymentDetails.TypeEnum":mt.PaymentDetails.TypeEnum,"PaymentDetailsResponse.ResultCodeEnum":yt.PaymentDetailsResponse.ResultCodeEnum,"PaymentLinkRequest.RecurringProcessingModelEnum":vt.PaymentLinkRequest.RecurringProcessingModelEnum,"PaymentLinkRequest.RequiredShopperFieldsEnum":vt.PaymentLinkRequest.RequiredShopperFieldsEnum,"PaymentLinkRequest.StorePaymentMethodModeEnum":vt.PaymentLinkRequest.StorePaymentMethodModeEnum,"PaymentLinkResponse.RecurringProcessingModelEnum":ft.PaymentLinkResponse.RecurringProcessingModelEnum,"PaymentLinkResponse.RequiredShopperFieldsEnum":ft.PaymentLinkResponse.RequiredShopperFieldsEnum,"PaymentLinkResponse.StatusEnum":ft.PaymentLinkResponse.StatusEnum,"PaymentLinkResponse.StorePaymentMethodModeEnum":ft.PaymentLinkResponse.StorePaymentMethodModeEnum,"PaymentMethod.FundingSourceEnum":bt.PaymentMethod.FundingSourceEnum,"PaymentMethodsRequest.ChannelEnum":kt.PaymentMethodsRequest.ChannelEnum,"PaymentMethodsRequest.StoreFiltrationModeEnum":kt.PaymentMethodsRequest.StoreFiltrationModeEnum,"PaymentRefundRequest.MerchantRefundReasonEnum":Et.PaymentRefundRequest.MerchantRefundReasonEnum,"PaymentRefundResponse.MerchantRefundReasonEnum":Tt.PaymentRefundResponse.MerchantRefundReasonEnum,"PaymentRefundResponse.StatusEnum":Tt.PaymentRefundResponse.StatusEnum,"PaymentRequest.ChannelEnum":Ct.PaymentRequest.ChannelEnum,"PaymentRequest.EntityTypeEnum":Ct.PaymentRequest.EntityTypeEnum,"PaymentRequest.IndustryUsageEnum":Ct.PaymentRequest.IndustryUsageEnum,"PaymentRequest.RecurringProcessingModelEnum":Ct.PaymentRequest.RecurringProcessingModelEnum,"PaymentRequest.ShopperInteractionEnum":Ct.PaymentRequest.ShopperInteractionEnum,"PaymentResponse.ResultCodeEnum":Mt.PaymentResponse.ResultCodeEnum,"PaymentReversalResponse.StatusEnum":Dt.PaymentReversalResponse.StatusEnum,"PaymentSetupRequest.ChannelEnum":Nt.PaymentSetupRequest.ChannelEnum,"PaymentSetupRequest.EntityTypeEnum":Nt.PaymentSetupRequest.EntityTypeEnum,"PaymentSetupRequest.ShopperInteractionEnum":Nt.PaymentSetupRequest.ShopperInteractionEnum,"PaymentVerificationResponse.ResultCodeEnum":_t.PaymentVerificationResponse.ResultCodeEnum,"PaypalUpdateOrderResponse.StatusEnum":Ft.PaypalUpdateOrderResponse.StatusEnum,"PlatformChargebackLogic.BehaviorEnum":Ot.PlatformChargebackLogic.BehaviorEnum,"RatepayDetails.TypeEnum":qt.RatepayDetails.TypeEnum,"Recurring.ContractEnum":Bt.Recurring.ContractEnum,"Recurring.TokenServiceEnum":Bt.Recurring.TokenServiceEnum,"RecurringDetail.FundingSourceEnum":Ut.RecurringDetail.FundingSourceEnum,"ResponseAdditionalDataCommon.FraudResultTypeEnum":jt.ResponseAdditionalDataCommon.FraudResultTypeEnum,"ResponseAdditionalDataCommon.RecurringProcessingModelEnum":jt.ResponseAdditionalDataCommon.RecurringProcessingModelEnum,"SamsungPayDetails.FundingSourceEnum":es.SamsungPayDetails.FundingSourceEnum,"SamsungPayDetails.TypeEnum":es.SamsungPayDetails.TypeEnum,"SepaDirectDebitDetails.TypeEnum":ts.SepaDirectDebitDetails.TypeEnum,"SessionResultResponse.StatusEnum":as.SessionResultResponse.StatusEnum,"ShopperInput.BillingAddressEnum":ns.ShopperInput.BillingAddressEnum,"ShopperInput.DeliveryAddressEnum":ns.ShopperInput.DeliveryAddressEnum,"ShopperInput.PersonalDetailsEnum":ns.ShopperInput.PersonalDetailsEnum,"Split.TypeEnum":os.Split.TypeEnum,"StandalonePaymentCancelResponse.StatusEnum":ls.StandalonePaymentCancelResponse.StatusEnum,"StoredPaymentMethodDetails.TypeEnum":us.StoredPaymentMethodDetails.TypeEnum,"StoredPaymentMethodRequest.RecurringProcessingModelEnum":ms.StoredPaymentMethodRequest.RecurringProcessingModelEnum,"ThreeDS2RequestData.AcctTypeEnum":bs.ThreeDS2RequestData.AcctTypeEnum,"ThreeDS2RequestData.AddrMatchEnum":bs.ThreeDS2RequestData.AddrMatchEnum,"ThreeDS2RequestData.ChallengeIndicatorEnum":bs.ThreeDS2RequestData.ChallengeIndicatorEnum,"ThreeDS2RequestData.ThreeDSRequestorChallengeIndEnum":bs.ThreeDS2RequestData.ThreeDSRequestorChallengeIndEnum,"ThreeDS2RequestData.TransTypeEnum":bs.ThreeDS2RequestData.TransTypeEnum,"ThreeDS2RequestData.TransactionTypeEnum":bs.ThreeDS2RequestData.TransactionTypeEnum,"ThreeDS2RequestFields.AcctTypeEnum":ws.ThreeDS2RequestFields.AcctTypeEnum,"ThreeDS2RequestFields.AddrMatchEnum":ws.ThreeDS2RequestFields.AddrMatchEnum,"ThreeDS2RequestFields.ChallengeIndicatorEnum":ws.ThreeDS2RequestFields.ChallengeIndicatorEnum,"ThreeDS2RequestFields.ThreeDSRequestorChallengeIndEnum":ws.ThreeDS2RequestFields.ThreeDSRequestorChallengeIndEnum,"ThreeDS2RequestFields.TransTypeEnum":ws.ThreeDS2RequestFields.TransTypeEnum,"ThreeDS2RequestFields.TransactionTypeEnum":ws.ThreeDS2RequestFields.TransactionTypeEnum,"ThreeDS2Result.ChallengeCancelEnum":xs.ThreeDS2Result.ChallengeCancelEnum,"ThreeDS2Result.ExemptionIndicatorEnum":xs.ThreeDS2Result.ExemptionIndicatorEnum,"ThreeDS2Result.ThreeDSRequestorChallengeIndEnum":xs.ThreeDS2Result.ThreeDSRequestorChallengeIndEnum,"ThreeDSRequestData.ChallengeWindowSizeEnum":ks.ThreeDSRequestData.ChallengeWindowSizeEnum,"ThreeDSRequestData.DataOnlyEnum":ks.ThreeDSRequestData.DataOnlyEnum,"ThreeDSRequestData.NativeThreeDSEnum":ks.ThreeDSRequestData.NativeThreeDSEnum,"ThreeDSRequestData.ThreeDSVersionEnum":ks.ThreeDSRequestData.ThreeDSVersionEnum,"ThreeDSRequestorAuthenticationInfo.ThreeDSReqAuthMethodEnum":Ss.ThreeDSRequestorAuthenticationInfo.ThreeDSReqAuthMethodEnum,"ThreeDSRequestorPriorAuthenticationInfo.ThreeDSReqPriorAuthMethodEnum":Es.ThreeDSRequestorPriorAuthenticationInfo.ThreeDSReqPriorAuthMethodEnum,"ThreeDSecureData.AuthenticationResponseEnum":Ts.ThreeDSecureData.AuthenticationResponseEnum,"ThreeDSecureData.ChallengeCancelEnum":Ts.ThreeDSecureData.ChallengeCancelEnum,"ThreeDSecureData.DirectoryResponseEnum":Ts.ThreeDSecureData.DirectoryResponseEnum,"UpdatePaymentLinkRequest.StatusEnum":Cs.UpdatePaymentLinkRequest.StatusEnum,"UpiCollectDetails.TypeEnum":Ms.UpiCollectDetails.TypeEnum,"UpiIntentDetails.TypeEnum":Ps.UpiIntentDetails.TypeEnum,"VippsDetails.TypeEnum":Ls.VippsDetails.TypeEnum,"VisaCheckoutDetails.FundingSourceEnum":Rs.VisaCheckoutDetails.FundingSourceEnum,"VisaCheckoutDetails.TypeEnum":Rs.VisaCheckoutDetails.TypeEnum,"WeChatPayDetails.TypeEnum":_s.WeChatPayDetails.TypeEnum,"WeChatPayMiniProgramDetails.TypeEnum":Is.WeChatPayMiniProgramDetails.TypeEnum,"ZipDetails.TypeEnum":Fs.ZipDetails.TypeEnum},qs={AccountInfo:n.AccountInfo,AcctInfo:r.AcctInfo,AchDetails:o.AchDetails,AdditionalData3DSecure:h.AdditionalData3DSecure,AdditionalDataAirline:c.AdditionalDataAirline,AdditionalDataCarRental:l.AdditionalDataCarRental,AdditionalDataCommon:d.AdditionalDataCommon,AdditionalDataLevel23:p.AdditionalDataLevel23,AdditionalDataLodging:u.AdditionalDataLodging,AdditionalDataOpenInvoice:m.AdditionalDataOpenInvoice,AdditionalDataOpi:g.AdditionalDataOpi,AdditionalDataRatepay:y.AdditionalDataRatepay,AdditionalDataRetry:v.AdditionalDataRetry,AdditionalDataRisk:f.AdditionalDataRisk,AdditionalDataRiskStandalone:b.AdditionalDataRiskStandalone,AdditionalDataSubMerchant:w.AdditionalDataSubMerchant,AdditionalDataTemporaryServices:A.AdditionalDataTemporaryServices,AdditionalDataWallets:x.AdditionalDataWallets,Address:k.Address,AfterpayDetails:S.AfterpayDetails,AmazonPayDetails:E.AmazonPayDetails,Amount:T.Amount,AncvDetails:C.AncvDetails,AndroidPayDetails:M.AndroidPayDetails,ApplePayDetails:P.ApplePayDetails,ApplePayDonations:D.ApplePayDonations,ApplePaySessionRequest:N.ApplePaySessionRequest,ApplePaySessionResponse:L.ApplePaySessionResponse,ApplicationInfo:R.ApplicationInfo,AuthenticationData:_.AuthenticationData,Avs:I.Avs,BacsDirectDebitDetails:F.BacsDirectDebitDetails,BalanceCheckRequest:z.BalanceCheckRequest,BalanceCheckResponse:O.BalanceCheckResponse,BankAccount:q.BankAccount,BillDeskDetails:B.BillDeskDetails,BillingAddress:U.BillingAddress,BlikDetails:H.BlikDetails,BrowserInfo:V.BrowserInfo,CancelOrderRequest:$.CancelOrderRequest,CancelOrderResponse:j.CancelOrderResponse,Card:G.Card,CardBrandDetails:W.CardBrandDetails,CardDetails:X.CardDetails,CardDetailsRequest:Y.CardDetailsRequest,CardDetailsResponse:K.CardDetailsResponse,CardDonations:Z.CardDonations,CashAppDetails:Q.CashAppDetails,CellulantDetails:J.CellulantDetails,CheckoutAwaitAction:ee.CheckoutAwaitAction,CheckoutDelegatedAuthenticationAction:te.CheckoutDelegatedAuthenticationAction,CheckoutNativeRedirectAction:se.CheckoutNativeRedirectAction,CheckoutOrderResponse:ie.CheckoutOrderResponse,CheckoutQrCodeAction:ae.CheckoutQrCodeAction,CheckoutRedirectAction:ne.CheckoutRedirectAction,CheckoutSDKAction:re.CheckoutSDKAction,CheckoutSessionInstallmentOption:oe.CheckoutSessionInstallmentOption,CheckoutThreeDS2Action:he.CheckoutThreeDS2Action,CheckoutVoucherAction:ce.CheckoutVoucherAction,CommonField:le.CommonField,Company:de.Company,Configuration:pe.Configuration,CreateCheckoutSessionRequest:ue.CreateCheckoutSessionRequest,CreateCheckoutSessionResponse:me.CreateCheckoutSessionResponse,CreateOrderRequest:ge.CreateOrderRequest,CreateOrderResponse:ye.CreateOrderResponse,DeliveryAddress:ve.DeliveryAddress,DeliveryMethod:fe.DeliveryMethod,DetailsRequestAuthenticationData:be.DetailsRequestAuthenticationData,DeviceRenderOptions:we.DeviceRenderOptions,DokuDetails:Ae.DokuDetails,DonationPaymentRequest:xe.DonationPaymentRequest,DonationPaymentResponse:ke.DonationPaymentResponse,DotpayDetails:Se.DotpayDetails,DragonpayDetails:Ee.DragonpayDetails,EcontextVoucherDetails:Te.EcontextVoucherDetails,EncryptedOrderData:Ce.EncryptedOrderData,ExternalPlatform:Me.ExternalPlatform,ForexQuote:Pe.ForexQuote,FraudCheckResult:De.FraudCheckResult,FraudResult:Ne.FraudResult,FundOrigin:Le.FundOrigin,FundRecipient:Re.FundRecipient,GenericIssuerPaymentMethodDetails:_e.GenericIssuerPaymentMethodDetails,GiropayDetails:Ie.GiropayDetails,GooglePayDetails:Fe.GooglePayDetails,GooglePayDonations:ze.GooglePayDonations,IdealDetails:Oe.IdealDetails,IdealDonations:qe.IdealDonations,InputDetail:Be.InputDetail,InstallmentOption:Ue.InstallmentOption,Installments:He.Installments,InstallmentsNumber:Ve.InstallmentsNumber,Item:$e.Item,KlarnaDetails:je.KlarnaDetails,LineItem:Ge.LineItem,ListStoredPaymentMethodsResponse:We.ListStoredPaymentMethodsResponse,Mandate:Xe.Mandate,MasterpassDetails:Ye.MasterpassDetails,MbwayDetails:Ke.MbwayDetails,MerchantDevice:Ze.MerchantDevice,MerchantRiskIndicator:Qe.MerchantRiskIndicator,MobilePayDetails:Je.MobilePayDetails,MolPayDetails:et.MolPayDetails,Name:tt.Name,OpenInvoiceDetails:st.OpenInvoiceDetails,PayPalDetails:it.PayPalDetails,PayUUpiDetails:at.PayUUpiDetails,PayWithGoogleDetails:nt.PayWithGoogleDetails,PayWithGoogleDonations:rt.PayWithGoogleDonations,PaymentAmountUpdateRequest:ot.PaymentAmountUpdateRequest,PaymentAmountUpdateResponse:ht.PaymentAmountUpdateResponse,PaymentCancelRequest:ct.PaymentCancelRequest,PaymentCancelResponse:lt.PaymentCancelResponse,PaymentCaptureRequest:dt.PaymentCaptureRequest,PaymentCaptureResponse:pt.PaymentCaptureResponse,PaymentCompletionDetails:ut.PaymentCompletionDetails,PaymentDetails:mt.PaymentDetails,PaymentDetailsRequest:gt.PaymentDetailsRequest,PaymentDetailsResponse:yt.PaymentDetailsResponse,PaymentLinkRequest:vt.PaymentLinkRequest,PaymentLinkResponse:ft.PaymentLinkResponse,PaymentMethod:bt.PaymentMethod,PaymentMethodGroup:wt.PaymentMethodGroup,PaymentMethodIssuer:At.PaymentMethodIssuer,PaymentMethodToStore:xt.PaymentMethodToStore,PaymentMethodsRequest:kt.PaymentMethodsRequest,PaymentMethodsResponse:St.PaymentMethodsResponse,PaymentRefundRequest:Et.PaymentRefundRequest,PaymentRefundResponse:Tt.PaymentRefundResponse,PaymentRequest:Ct.PaymentRequest,PaymentResponse:Mt.PaymentResponse,PaymentReversalRequest:Pt.PaymentReversalRequest,PaymentReversalResponse:Dt.PaymentReversalResponse,PaymentSetupRequest:Nt.PaymentSetupRequest,PaymentSetupResponse:Lt.PaymentSetupResponse,PaymentVerificationRequest:Rt.PaymentVerificationRequest,PaymentVerificationResponse:_t.PaymentVerificationResponse,PaypalUpdateOrderRequest:It.PaypalUpdateOrderRequest,PaypalUpdateOrderResponse:Ft.PaypalUpdateOrderResponse,Phone:zt.Phone,PlatformChargebackLogic:Ot.PlatformChargebackLogic,RatepayDetails:qt.RatepayDetails,Recurring:Bt.Recurring,RecurringDetail:Ut.RecurringDetail,ResponseAdditionalData3DSecure:Ht.ResponseAdditionalData3DSecure,ResponseAdditionalDataBillingAddress:Vt.ResponseAdditionalDataBillingAddress,ResponseAdditionalDataCard:$t.ResponseAdditionalDataCard,ResponseAdditionalDataCommon:jt.ResponseAdditionalDataCommon,ResponseAdditionalDataDomesticError:Gt.ResponseAdditionalDataDomesticError,ResponseAdditionalDataInstallments:Wt.ResponseAdditionalDataInstallments,ResponseAdditionalDataNetworkTokens:Xt.ResponseAdditionalDataNetworkTokens,ResponseAdditionalDataOpi:Yt.ResponseAdditionalDataOpi,ResponseAdditionalDataSepa:Kt.ResponseAdditionalDataSepa,ResponsePaymentMethod:Zt.ResponsePaymentMethod,RiskData:Qt.RiskData,SDKEphemPubKey:Jt.SDKEphemPubKey,SamsungPayDetails:es.SamsungPayDetails,SepaDirectDebitDetails:ts.SepaDirectDebitDetails,ServiceError:ss.ServiceError,ServiceErrorDetails:is.ServiceErrorDetails,SessionResultResponse:as.SessionResultResponse,ShopperInput:ns.ShopperInput,ShopperInteractionDevice:rs.ShopperInteractionDevice,Split:os.Split,SplitAmount:hs.SplitAmount,StandalonePaymentCancelRequest:cs.StandalonePaymentCancelRequest,StandalonePaymentCancelResponse:ls.StandalonePaymentCancelResponse,StoredDetails:ds.StoredDetails,StoredPaymentMethod:ps.StoredPaymentMethod,StoredPaymentMethodDetails:us.StoredPaymentMethodDetails,StoredPaymentMethodRequest:ms.StoredPaymentMethodRequest,StoredPaymentMethodResource:gs.StoredPaymentMethodResource,SubInputDetail:ys.SubInputDetail,SubMerchant:vs.SubMerchant,SubMerchantInfo:fs.SubMerchantInfo,ThreeDS2RequestData:bs.ThreeDS2RequestData,ThreeDS2RequestFields:ws.ThreeDS2RequestFields,ThreeDS2ResponseData:As.ThreeDS2ResponseData,ThreeDS2Result:xs.ThreeDS2Result,ThreeDSRequestData:ks.ThreeDSRequestData,ThreeDSRequestorAuthenticationInfo:Ss.ThreeDSRequestorAuthenticationInfo,ThreeDSRequestorPriorAuthenticationInfo:Es.ThreeDSRequestorPriorAuthenticationInfo,ThreeDSecureData:Ts.ThreeDSecureData,UpdatePaymentLinkRequest:Cs.UpdatePaymentLinkRequest,UpiCollectDetails:Ms.UpiCollectDetails,UpiIntentDetails:Ps.UpiIntentDetails,UtilityRequest:Ds.UtilityRequest,UtilityResponse:Ns.UtilityResponse,VippsDetails:Ls.VippsDetails,VisaCheckoutDetails:Rs.VisaCheckoutDetails,WeChatPayDetails:_s.WeChatPayDetails,WeChatPayMiniProgramDetails:Is.WeChatPayMiniProgramDetails,ZipDetails:Fs.ZipDetails};class Bs{static findCorrectType(e,t){if(null==e)return t;if(-1!==zs.indexOf(t.toLowerCase()))return t;if("Date"===t)return t;{if(Os[t])return t;if(!qs[t])return t;let i=qs[t].discriminator;if(null==i)return t;if(e[i]){var s=e[i];return qs[s]?s:t}return t}}static serialize(e,t){if(null==e)return e;if(-1!==zs.indexOf(t.toLowerCase()))return e;if(0===t.lastIndexOf("Array<",0)){let s=t.replace("Array<","");s=s.substring(0,s.length-1);let i=[];for(let t=0;t<e.length;t++){let a=e[t];i.push(Bs.serialize(a,s))}return i}if("Date"===t)return e.toISOString();if("SaleToAcquirerData"===t){const t=JSON.stringify(e);return Buffer.from(t).toString("base64")}{if(Os[t])return e;if(!qs[t])return e;t=this.findCorrectType(e,t);let s=qs[t].getAttributeTypeMap(),i={};for(let t=0;t<s.length;t++){let a=s[t];i[a.baseName]=Bs.serialize(e[a.name],a.type)}return i}}static deserialize(e,t){if(t=Bs.findCorrectType(e,t),null==e)return e;if(-1!==zs.indexOf(t.toLowerCase()))return e;if(0===t.lastIndexOf("Array<",0)){let s=t.replace("Array<","");s=s.substring(0,s.length-1);let i=[];for(let t=0;t<e.length;t++){let a=e[t];i.push(Bs.deserialize(a,s))}return i}if("Date"===t)return new Date(e);{if(Os[t])return e;if(!qs[t])return e;let s=new qs[t],i=qs[t].getAttributeTypeMap();for(let t=0;t<i.length;t++){let a=i[t];s[a.name]=Bs.deserialize(e[a.baseName],a.type)}return s}}}t.ObjectSerializer=Bs},44448:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(15818),a=s(65209),n=s(52549),r=s(59303),o=s(94711),h=s(75281);class c{static init(){c.presets||(c.grouping={"b-w":["agnes","conny","gordon","harrison","henry","logan","olay","porter","sampi","tom","vinny"],friends:["aladin","alex","amber","anne","antonio","bob","greg","hagrid","harry","ivan","jean","josh","karen","lucas","melissa","peter","salomon","sara","sophia","tony"],instage:["borg","carl","coco","doris","doug","earl","sun","blues","country","lemonpell","tiny dc","minker"],retro:["vib","ranguit","rangeen","creamlow","sven","yenely","ragwarm","greered","danligter","garage"],tuning:["punch","bright","contrast","vivid","clairify"],portrait:["matte","deep","film","sunny","gritty"],food:["berry","ensalat","morning","corn","sharp"],urban:["cement","style","mold","shimmer","stalker","sham"],nature:["beach","flower","forest"],colors:["strawberry","clementine","pear","apple","blueberry","grapes","dragon","superone","tonola","reddish","fellowing","grassland","springs","justblues","bluesteel","flowerpot","stinker","violiin","blupur","beyllo","wifortress"],artzy:["poster","glitch","mozak","frank","pinvet","night vision","darkstreet","blomberg","lolita","atonic"]},c.presets={flower:[new a.A("vibrance",.2),new a.A("saturation",.1),new a.A("temperature",.1)],forest:[new a.A("saturation",-.2),new a.A("vibrance",1),new a.A("clarity",.2),new a.A("temperature",.16),new a.A("tint",.2),new a.A("curves",new h.X([[0,0,65,52,173,190,236,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]))],beach:[new a.A("saturation",.2),new a.A("vibrance",.2),new a.A("curves",new h.X([[0,0,68,56,199,208,255,255],[0,0,255,255],[0,0,98,97,196,201,255,255],[0,0,87,85,201,182,255,255]])),new a.A("temperature",.1)],sham:[new a.A("saturation",-.3),new a.A("fill",new n.A(new i.A(153,221,255),"overlay",.3)),new a.A("curves",new h.X([[60,31,191,217],[0,0,120,134,255,255],[0,0,255,255],[0,0,120,144,255,255]]))],stalker:[new a.A("curves",new h.X([[62,64,190,191],[0,0,133,125,255,255],[0,0,54,65,209,208,255,255],[60,62,96,99,240,230,255,255]])),new a.A("contrast",.1),new a.A("saturation",-.2)],shimmer:[new a.A("temperature",-.2),new a.A("tint",-.12),new a.A("fill",new n.A(new i.A(190,11,255),"screen",.12)),new a.A("curves",new h.X([[8,23,244,227],[0,0,255,255],[0,0,131,124,255,255],[0,0,149,112,255,255]]))],mold:[new a.A("curves",new h.X([[65,64,233,233],[0,0,138,121,255,255],[0,0,60,75,184,184,255,255],[0,0,64,75,181,176,255,255]])),new a.A("contrast",.1),new a.A("saturation",-.12)],style:[new a.A("curves",new h.X([[0,0,73,74,191,177,235,221,255,255],[0,26,89,64,121,126,180,213,255,255],[0,0,71,50,190,210,255,255],[61,64,112,97,199,198,255,255]])),new a.A("vibrance",-.1),new a.A("saturation",-.4),new a.A("temperature",.1)],cement:[new a.A("curves",new h.X([[0,0,73,74,191,177,235,221,255,255],[0,0,255,255],[0,0,60,54,198,210,255,255],[0,0,73,37,150,149,199,198,255,255]])),new a.A("vibrance",-.1),new a.A("saturation",-.1)],sharp:[new a.A("curves",new h.X([[0,0,42,20,199,218,224,246,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]])),new a.A("vibrance",.1),new a.A("sharpen",.1),new a.A("clarity",.1)],corn:[new a.A("temperature",.1),new a.A("vibrance",.3),new a.A("contrast",.1),new a.A("curves",new h.X([[0,0,66,78,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]]))],morning:[new a.A("tint",.18),new a.A("temperature",.1),new a.A("highlights",.08),new a.A("levels",new o.A(0,245,0,255)),new a.A("curves",new h.X([[64,64,150,181,254,255],[0,0,122,138,255,255],[0,0,255,255],[0,0,255,255]])),new a.A("fill",new n.A(new i.A(194,120,41),"overlay",.2))],ensalat:[new a.A("highlights",.2),new a.A("shadows",-.2),new a.A("brightness",.1),new a.A("levels",new o.A(10,245,0,255)),new a.A("curves",new h.X([[0,0,135,119,191,193,255,255],[0,0,255,255],[0,0,129,121,255,255],[0,0,255,255]])),new a.A("clarity",.2),new a.A("sharpen",.15)],berry:[new a.A("vibrance",.44),new a.A("curves",new h.X([[0,0,62,66,121,135,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]])),new a.A("contrast",.2),new a.A("highlights",.4),new a.A("shadows",-.2),new a.A("levels",new o.A(20,255,0,255))],gritty:[new a.A("saturation",-.4),new a.A("levels",new o.A(20,255,0,255)),new a.A("curves",new h.X([[0,0,50,33,128,112,190,215,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]])),new a.A("clarity",1),new a.A("grain",.3)],sunny:[new a.A("fill",new n.A(new i.A(255,194,96),"overlay",.2)),new a.A("temperature",.1),new a.A("glamour",.4),new a.A("clarity",.3)],film:[new a.A("sharpen",.2),new a.A("glamour",.5),new a.A("grain",.5),new a.A("highlights",-.2),new a.A("shadows",-.2),new a.A("saturation",-.2)],matte:[new a.A("curves",new h.X([[0,50,38,56,79,82,152,153,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]])),new a.A("contrast",.12),new a.A("saturation",-.1)],deep:[new a.A("curves",new h.X([[0,0,117,99,191,198,255,255],[0,0,71,38,177,209,255,255],[0,0,236,255],[0,28,75,101,190,171,254,233]])),new a.A("saturation",-.3)],aladin:[new a.A("curves",new h.X([[0,0,255,255],[0,52,87,99,255,255],[0,0,106,107,194,190,254,212],[0,0,166,129,254,142]]))],amber:[new a.A("curves",new h.X([[0,0,255,255],[0,0,98,150,255,255],[0,0,138,117,255,255],[0,128,254,129]])),new a.A("saturation",-.3),new a.A("levels",new o.A(20,235,0,255))],anne:[new a.A("contrast",.25),new a.A("curves",new h.X([[0,0,255,255],[0,0,78,66,135,171,255,255],[0,0,99,87,180,208,255,255],[0,0,94,93,171,161,255,255]]))],antonio:[new a.A("glamour",.8)],alex:[new a.A("glamour",.6)],bob:[new a.A("saturation",-.6),new a.A("highlights",.5)],greg:[new a.A("curves",new h.X([[0,0,255,255],[0,0,74,50,181,198,255,255],[0,0,61,41,108,170,158,207,254,208],[0,0,83,56,168,204,255,255]]))],hagrid:[new a.A("vibrance",.9),new a.A("saturation",.1),new a.A("clarity",.5),new a.A("shadows",-.3)],harry:[new a.A("fill",new n.A(new i.A(214,178,119),"overlay",.7)),new a.A("grain",.5)],ivan:[new a.A("fill",new n.A(new i.A(255,0,68),"overlay",.4)),new a.A("shadows",.15),new a.A("levels",new o.A(6,255,0,255))],jean:[new a.A("levels",new o.A(56,233,0,255)),new a.A("saturation",-1),new a.A("tint",.1),new a.A("exposure",.78),new a.A("bloom",.1)],josh:[new a.A("curves",new h.X([[0,0,78,52,175,207,255,255],[0,0,255,255],[0,0,255,255],[0,64,87,129,254,193]]))],karen:[new a.A("curves",new h.X([[0,0,255,255],[0,0,89,144,255,255],[0,0,138,112,255,255],[0,0,162,88,255,255]]))],lucas:[new a.A("tint",1),new a.A("saturation",-.85),new a.A("contrast",.4),new a.A("shadows",1),new a.A("temperature",.1)],melissa:[new a.A("curves",new h.X([[0,0,255,255],[0,62,255,255],[0,0,255,255],[0,61,254,193]]))],peter:[new a.A("curves",new h.X([[0,0,255,255],[0,6,31,20,65,26,87,51,195,190,254,230],[0,11,24,27,102,131,189,195,255,255],[0,40,126,148,254,177]]))],salomon:[new a.A("curves",new h.X([[0,0,255,255],[0,0,83,50,177,213,255,255],[0,0,69,55,186,205,255,255],[11,56,254,212]])),new a.A("contrast",-.2)],sara:[new a.A("vibrance",1),new a.A("contrast",.1),new a.A("highlights",.3)],sophia:[new a.A("curves",new h.X([[0,0,255,255],[0,0,140,116,222,254],[0,0,70,59,182,201,255,255],[0,29,252,227]])),new a.A("saturation",.3)],tony:[new a.A("curves",new h.X([[0,0,255,255],[0,0,92,42,218,252],[0,0,73,75,157,194,255,255],[0,27,254,227]]))],agnes:[new a.A("desaturate",1),new a.A("contrast",.4)],conny:[new a.A("saturation",-.55),new a.A("temperature",.25),new a.A("brightness",-.25),new a.A("levels",new o.A(14,233,0,255)),new a.A("exposure",.35),new a.A("highlights",-.9)],gordon:[new a.A("desaturate",1),new a.A("temperature",.7),new a.A("tint",.3),new a.A("saturation",-.2)],harrison:[new a.A("toning",new r.A(new i.A(255,240,215),void 0,new i.A(48,26,24),1)),new a.A("grain",.2)],henry:[new a.A("toning",new r.A(new i.A(255,240,215),void 0,new i.A(48,26,24),1)),new a.A("saturation",-.5)],logan:[new a.A("glamour",.5),new a.A("tint",.4),new a.A("saturation",-.35),new a.A("toning",new r.A(new i.A(255,240,215),void 0,new i.A(48,26,24),.8))],olay:[new a.A("saturation",-1),new a.A("grain",.5),new a.A("vignette",.5)],porter:[new a.A("saturation",-1),new a.A("vignette",.4),new a.A("levels",new o.A(50,205))],tom:[new a.A("desaturate",1)],sampi:[new a.A("toning",new r.A(new i.A(255,228,196),void 0,new i.A(0,0,0),1)),new a.A("levels",new o.A(0,217,0,255)),new a.A("temperature",.3)],vinny:[new a.A("curves",new h.X([[0,0,133,111,255,255],[0,0,255,255],[0,0,255,255],[0,0,133,138,255,255]])),new a.A("vibrance",-1),new a.A("saturation",1),new a.A("temperature",.8),new a.A("contrast",-.1),new a.A("highlights",.1)],borg:[new a.A("curves",new h.X([[0,0,255,255],[0,0,94,66,227,255],[0,0,93,94,179,198,255,255],[0,19,254,228]])),new a.A("fill",new n.A(new i.A(204,255,0),"",.1))],carl:[new a.A("curves",new h.X([[0,0,255,255],[0,0,93,64,227,255],[0,0,93,94,181,189,255,255],[0,19,254,228]])),new a.A("vignette",.3),new a.A("contrast",.15),new a.A("saturation",-.3)],coco:[new a.A("curves",new h.X([[0,0,255,255],[0,0,64,97,255,255],[0,0,142,122,255,255],[0,0,144,112,255,255]]))],doris:[new a.A("curves",new h.X([[0,0,255,255],[0,0,78,48,177,209,255,255],[0,0,92,94,179,208,255,255],[0,52,254,215]])),new a.A("saturation",-.2)],doug:[new a.A("curves",new h.X([[0,0,255,255],[0,64,255,255],[0,0,255,255],[1,64,252,193]])),new a.A("highlights",.5),new a.A("shadows",-.3)],earl:[new a.A("vignette",.4),new a.A("curves",new h.X([[0,0,255,255],[0,0,222,254],[0,47,223,254],[0,129,222,255]])),new a.A("fill",new n.A(new i.A(247,218,174),"multiply",.8))],sun:[new a.A("fill",new n.A(new i.A(251,242,163),"multiply",.8)),new a.A("vignette",-.25)],blues:[new a.A("curves",new h.X([[0,0,255,255],[0,0,77,54,181,207,255,255],[0,0,73,51,180,209,255,255],[0,0,54,75,201,185,255,255]]))],country:[new a.A("curves",new h.X([[0,0,84,74,115,105,255,255],[0,0,73,80,93,124,255,255],[0,0,50,34,93,105,119,142,255,255],[0,0,85,85,125,112,255,255]]))],lemonpell:[new a.A("curves",new h.X([[0,36,80,84,156,190,255,255],[0,0,255,255],[0,0,103,105,158,176,255,255],[0,19,107,83,198,196,255,255]]))],"tiny dc":[new a.A("curves",new h.X([[0,0,255,255],[0,0,79,46,199,217,255,255],[9,1,110,126,254,232],[0,46,92,103,191,158,254,205]])),new a.A("grain",.3)],minker:[new a.A("toning",new r.A(new i.A(255,216,153),void 0,new i.A(26,0,77),.8)),new a.A("levels",new o.A(0,247,8,255)),new a.A("brightness",.14),new a.A("contrast",.4),new a.A("vibrance",.5)],superone:[new a.A("toning",new r.A(new i.A(255,216,153),void 0,new i.A(77,0,51),.8)),new a.A("levels",new o.A(50,175,0,255))],tonola:[new a.A("toning",new r.A(new i.A(221,255,153),void 0,new i.A(77,0,51),.8)),new a.A("levels",new o.A(26,213,0,255)),new a.A("saturation",.36),new a.A("temperature",.22)],reddish:[new a.A("toning",new r.A(new i.A(255,214,147),void 0,new i.A(110,37,0),.8)),new a.A("contrast",.3),new a.A("highlights",1)],fellowing:[new a.A("toning",new r.A(new i.A(255,216,153),void 0,new i.A(77,47,0),.8)),new a.A("levels",new o.A(24,203,0,255)),new a.A("contrast",.14),new a.A("saturation",.3),new a.A("temperature",.18)],grassland:[new a.A("toning",new r.A(new i.A(221,255,153),void 0,new i.A(0,77,25),.7)),new a.A("levels",new o.A(18,227,0,255)),new a.A("contrast",.16)],springs:[new a.A("toning",new r.A(new i.A(221,255,153),void 0,new i.A(0,26,38),1)),new a.A("highlights",1),new a.A("levels",new o.A(40,155,0,255)),new a.A("shadows",1)],justblues:[new a.A("toning",new r.A(new i.A(198,236,255),void 0,new i.A(26,0,77),.79)),new a.A("levels",new o.A(16,189,0,255)),new a.A("saturation",.2),new a.A("contrast",.2)],bluesteel:[new a.A("toning",new r.A(new i.A(255,216,153),void 0,new i.A(26,0,77),.8)),new a.A("levels",new o.A(0,215,12,255))],flowerpot:[new a.A("toning",new r.A(new i.A(255,153,221),void 0,new i.A(51,77,0),.8)),new a.A("levels",new o.A(22,215,0,255)),new a.A("vignette",-.2)],stinker:[new a.A("toning",new r.A(new i.A(255,216,153),void 0,new i.A(26,0,77),.8)),new a.A("levels",new o.A(0,247,8,255)),new a.A("brightness",.14),new a.A("contrast",.4)],violiin:[new a.A("contrast",.32),new a.A("toning",new r.A(new i.A(195,166,255),void 0,new i.A(33,0,0),1)),new a.A("levels",new o.A(22,223,0,255)),new a.A("exposure",.22),new a.A("brightness",.12)],blupur:[new a.A("toning",new r.A(new i.A(255,153,221),void 0,new i.A(7,68,97),.8)),new a.A("vibrance",.7),new a.A("contrast",.3)],beyllo:[new a.A("vibrance",1),new a.A("saturation",1),new a.A("temperature",-.55),new a.A("tint",.1),new a.A("levels",new o.A(0,255,24,249)),new a.A("toning",new r.A(new i.A(255,213,0),void 0,new i.A(125,3,84),.76)),new a.A("curves",new h.X([[0,0,255,255],[0,0,131,115,255,255],[0,0,136,128,255,255],[0,0,122,145,255,255]])),new a.A("vignette",.28)],wifortress:[new a.A("toning",new r.A(new i.A(108,206,255),void 0,new i.A(0,26,38),1)),new a.A("highlights",1),new a.A("levels",new o.A(40,155,0,255)),new a.A("shadows",1)],vib:[new a.A("vibrance",.1),new a.A("saturation",.5),new a.A("brightness",.1),new a.A("temperature",.5),new a.A("levels",new o.A(12,253,0,255)),new a.A("highlights",.2),new a.A("curves",new h.X([[0,0,255,255],[0,0,70,80,198,181,255,255],[0,0,140,135,255,255],[0,0,74,96,200,172,255,255]])),new a.A("toning",new r.A(new i.A(255,238,210),void 0,new i.A(54,6,6),.07)),new a.A("contrast",-.1)],ranguit:[new a.A("saturation",.22),new a.A("temperature",.96),new a.A("tint",-.28),new a.A("contrast",.14),new a.A("brightness",-.2),new a.A("levels",new o.A(0,237,56,255)),new a.A("toning",new r.A(new i.A(221,255,153),void 0,new i.A(41,35,33),.26))],rangeen:[new a.A("vibrance",1),new a.A("saturation",.46),new a.A("temperature",.36),new a.A("levels",new o.A(0,251,14,255)),new a.A("shadows",.34),new a.A("highlights",.12),new a.A("toning",new r.A(new i.A(121,255,224),void 0,new i.A(245,22,107),.12)),new a.A("contrast",-.1),new a.A("curves",new h.X([[0,0,144,152,255,255],[0,0,136,107,255,255],[0,0,115,102,255,255],[0,0,106,91,255,255]]))],creamlow:[new a.A("vibrance",.82),new a.A("saturation",-.24),new a.A("temperature",1),new a.A("tint",.78),new a.A("contrast",-.3),new a.A("levels",new o.A(40,247,0,255)),new a.A("highlights",.64),new a.A("toning",new r.A(new i.A(221,255,153),void 0,new i.A(145,39,9),.29)),new a.A("curves",new h.X([[0,0,5,13,78,83,172,162,255,255],[0,0,255,255],[0,0,131,120,255,255],[0,0,68,61,175,184,255,255]]))],sven:[new a.A("vibrance",.7),new a.A("temperature",.5),new a.A("tint",.3),new a.A("exposure",.2),new a.A("contrast",-.2),new a.A("levels",new o.A(4,255,0,235)),new a.A("highlights",-.3),new a.A("shadows",.3),new a.A("grain",.3),new a.A("vignette",.45)],yenely:[new a.A("tint",.5),new a.A("levels",new o.A(0,235,20,255)),new a.A("saturation",-.62),new a.A("contrast",-.3),new a.A("shadows",-.6),new a.A("curves",new h.X([[0,0,148,105,255,255],[0,0,92,79,128,227,255,255],[0,0,74,103,119,172,255,255],[0,0,111,148,255,255]])),new a.A("highlights",1),new a.A("brightness",.14),new a.A("temperature",.3),new a.A("vibrance",1),new a.A("exposure",-.1)],ragwarm:[new a.A("temperature",.62),new a.A("levels",new o.A(32,255,0,243)),new a.A("highlights",-.14),new a.A("vignette",.28),new a.A("toning",new r.A(new i.A(153,255,187),void 0,new i.A(21,55,143),.07)),new a.A("curves",new h.X([[0,0,126,125,255,255],[0,0,255,255],[0,0,130,121,255,255],[0,0,138,124,255,255]]))],greered:[new a.A("vibrance",.32),new a.A("temperature",.4),new a.A("tint",-.5),new a.A("brightness",.24),new a.A("contrast",-.1),new a.A("vignette",.31),new a.A("shadows",.38)],danligter:[new a.A("saturation",.86),new a.A("temperature",-1),new a.A("tint",-.92),new a.A("brightness",.22),new a.A("exposure",.22),new a.A("contrast",.1),new a.A("levels",new o.A(0,239,0,255)),new a.A("highlights",-.12),new a.A("dehaze",-.12),new a.A("toning",new r.A(new i.A(255,216,153),void 0,new i.A(0,52,77),.14)),new a.A("curves",new h.X([[0,0,255,255],[0,0,96,115,162,194,255,255],[0,0,101,97,185,189,255,255],[0,0,144,130,222,228,255,255]]))],garage:[new a.A("tint",.6),new a.A("saturation",-.04),new a.A("shadows",-1),new a.A("grain",.42),new a.A("glamour",.3)],strawberry:[new a.A("fill",new n.A(new i.A(255,0,0),"soft-light",.5))],clementine:[new a.A("fill",new n.A(new i.A(255,158,0),"soft-light",.5))],pear:[new a.A("fill",new n.A(new i.A(170,255,0),"soft-light",.5))],apple:[new a.A("fill",new n.A(new i.A(0,255,85),"soft-light",.5))],blueberry:[new a.A("fill",new n.A(new i.A(0,170,255),"soft-light",.5))],grapes:[new a.A("fill",new n.A(new i.A(85,0,255),"soft-light",.5))],dragon:[new a.A("fill",new n.A(new i.A(255,0,170),"soft-light",.5))],punch:[new a.A("curves",new h.X([[0,0,80,64,173,193,255,255],[0,0,255,255],[0,0,255,255],[0,0,255,255]])),new a.A("vibrance",.5)],bright:[new a.A("highlights",-.3),new a.A("shadows",.5),new a.A("levels",new o.A(0,215,10,255))],contrast:[new a.A("contrast",.2),new a.A("highlights",.2),new a.A("levels",new o.A(20,215,0,255)),new a.A("shadows",.4)],vivid:[new a.A("vibrance",.4),new a.A("shadows",.25)],clairify:[new a.A("clarity",.6),new a.A("sharpen",.1),new a.A("glamour",.2)],poster:[new a.A("posterize",.08)],glitch:[new a.A("slice",{seed:86,amount:4,distance:.12,line:!0}),new a.A("bleed",{seed:58,amplitude:.05,block:1.2})],mozak:[new a.A("mosaic",.5),new a.A("fringe",.2)],frank:[new a.A("fringe",.4)],pinvet:[new a.A("bloom",.33),new a.A("invert",1),new a.A("pixelate",.7)],blomberg:[new a.A("bloom",.33),new a.A("invert",1),new a.A("tint",1),new a.A("temperature",-.8),new a.A("saturation",-.5)],lolita:[new a.A("fill",new n.A(new i.A(255,153,153),"vivid-light",1))],atonic:[new a.A("curves",new h.X([[0,0,255,255],[6,235,246,4],[131,3,138,255],[1,42,251,213]]))],"night vision":[new a.A("fill",new n.A(new i.A(30,255,0),"multiply",1)),new a.A("levels",new o.A(0,183,0,255)),new a.A("vignette",.85),new a.A("grain",.6)],darkstreet:[new a.A("temperature",-1),new a.A("highlights",.58),new a.A("shadows",-1),new a.A("levels",new o.A(100,249,0,255)),new a.A("grain",1),new a.A("exposure",-1)],splash:[new a.A("desaturate",1)],blur:[new a.A("blur",.5)],zoom:[new a.A("zoom",{x:.5,y:.5,amount:.2})],spin:[new a.A("radial",{amount:.08,x:.5,y:.5,direction:2,symmetry:!1})],motion:[new a.A("motion",{amount:.7,angle:Math.PI/1.8*.23})],mozaik:[new a.A("mosaic",.5)],pixel:[new a.A("pixelate",.7)]})}static named(e){return c.init(),this.presets[e]}static firstInGroup(e){return c.init(),c.grouping[e][0]}static groupLength(e){return c.grouping[e].length}static groups(){c.init();const e=[];for(const t in c.grouping)e.push(t);return e}static names(e){c.init();const t=[];for(const s in c.grouping[e])t.push(c.grouping[e][s]);return t}}},44786:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MolPayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.MolPayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"issuer",baseName:"issuer",type:"string"},{name:"type",baseName:"type",type:"MolPayDetails.TypeEnum"}],function(e){let t;!function(e){e.FpxMy="molpay_ebanking_fpx_MY",e.Th="molpay_ebanking_TH"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.MolPayDetails||(t.MolPayDetails={}))},45432:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(21742),a=s(42268),n=s(54738),r=s(40963),o=s(23556),h=s(65209),c=s(81937),l=s(44448),d=s(2215);class p extends d.A{constructor(e){super(e,(0,i.A)("titleEffectLibrary"),!0),this.setUp=()=>{let e=r.A.fillFit(this.selected.canvas.width,this.selected.canvas.height,220,220);this.thumbnail=n.H5(this.selected.canvas,e.width,e.height),this.marked=void 0,this.renderGroups(),new c.A((0,a.Ay)("effect-content"))},this.renderGroups=()=>{(0,a.Ay)("effect-back").style.display="none";let e=(0,a.Ay)("effect-presets");e.innerHTML="",l.A.groups().forEach(t=>{const s=(0,a.T)("div",{className:"effect-group",id:t,onclick:()=>this.renderEffects(t)}),i=document.createElement("img");i.src="/img/preset/"+t+".jpg",s.appendChild(i);let n=document.createElement("span");n.innerText=t.replace("-"," & "),s.appendChild(n),e.appendChild(s)})},this.renderEffects=e=>{(0,a.Ay)("effect-back").style.display="flex",(0,a.Ay)("effect-settings").style.display="none";let t=(0,a.Ay)("effect-presets");t.innerHTML="";const s=-(this.thumbnail.width-220)/2,i=-(this.thumbnail.height-120)/2,n=new o.A([]);l.A.names(e).forEach(e=>{const a=document.createElement("div");a.classList.add("effect-preset"),a.id=e,a.addEventListener("click",this.select,!1);const r=document.createElement("canvas");r.width=220,r.height=120,a.appendChild(r);const o=r.getContext("2d");o.drawImage(this.thumbnail,s,i,this.thumbnail.width,this.thumbnail.height);let h=document.createElement("span");h.innerText=e,a.appendChild(h),t.appendChild(a);setTimeout(()=>{n.reset(),n.addPreset(e),o.drawImage(n.apply(this.thumbnail),s,i,this.thumbnail.width,this.thumbnail.height),this.marked&&this.marked.name==e&&setTimeout(()=>{a.classList.add("selected"),this.positionSettings(a)},200)},10)})},this.amount=e=>{n.sg("effect-amount",50,()=>{this.shaders.reset();const e=parseInt((0,a.Ay)("effect-amount").value,10)/100;this.shaders.addPreset(this.marked.name,e),this.scratch.canvas=this.shaders.apply(this.cache),window.requestAnimationFrame(()=>this.stage.render())})},this.back=()=>{(0,a.Ay)("effect-settings").style.display="none",this.renderGroups()},this.select=e=>{let t=e.currentTarget,s=(0,a.Ay)("effect-presets").getElementsByTagName("div");for(var i=0;i<s.length;i++)s[i].classList.remove("selected");t.classList.add("selected"),this.effect(t.id),(0,a.Ay)("effect-settings").style.display="none",setTimeout(()=>{this.positionSettings(t)},200)},this.positionSettings=e=>{(0,a.Ay)("effect-amount").value=(0,a.Ay)("effect_amount_out").innerHTML=(100*this.marked.value).toString();let t=(0,a.Ay)("effect-settings");t.style.display="block",t.style.top=e.offsetTop+"px",t.style.left=e.offsetLeft+"px"},this.effect=e=>{this.selected&&(this.kind="effect - "+e,this.shaders.reset(),this.marked=new h.A(e,1),this.shaders.addPreset(e,1),this.scratch.canvas=this.shaders.apply(this.cache),window.requestAnimationFrame(()=>this.stage.render()))},this.reset=()=>{if(!this.selected)return;let e=(0,a.Ay)("effect-presets").getElementsByTagName("div");for(var t=0;t<e.length;t++)e[t].classList.remove("selected");this.marked=null,(0,a.Ay)("effect-settings").style.display="none",this.scratch.setTarget(this.selected.id,this.selected.rect,"replace",this.cache),this.stage.render()},this.dialog.style.width="500px",this.dialog.style.height="400px",this.dialog.style.maxWidth="500px",this.content.style.padding="0px 0px 0px 20px",this.content.id="effect-content",this.compare.remove(),this.setContent('\n            <div id="effect-settings">\n                <img class="close" id="effect-remove" src="/img/icon/close.svg" title="Remove effect">\n                <div class="range-white" id="effect-settings-amount">\n                    <input type="range" value="100" min="0" max="100" step="1" id="effect-amount" name="effect_amount" oninput="effect_amount_out.value=this.value" />\n                    <output name="effect_amount_out" id="effect_amount_out" for="effect_amount">100</output>\n                </div>\n            </div>\n        \n            <section id="effect-presets" class="top-20">\n            </section>\n        '),(0,a.Ay)("dialog-buttons"+this.mid).insertBefore((0,a.T)("a",{className:"button negative",id:"effect-back",style:"margin-right:auto"},(0,a.T)("img",{src:"/img/icon/back-small.svg",width:14,height:14}),(0,i.A)("back")),(0,a.Ay)("dialog-cancel"+this.mid)),(0,a.Ay)("effect-back").addEventListener("click",this.back,!1),(0,a.Ay)("effect-remove").addEventListener("click",this.reset,!1),(0,a.Ay)("effect-amount").addEventListener("input",this.amount,!1),(0,a.Ay)("effect-settings").style.display="none",(0,a.Ay)("effect-back").style.display="none",this.setUp()}}},45568:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformChargebackLogic=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PlatformChargebackLogic=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"behavior",baseName:"behavior",type:"PlatformChargebackLogic.BehaviorEnum"},{name:"costAllocationAccount",baseName:"costAllocationAccount",type:"string"},{name:"targetAccount",baseName:"targetAccount",type:"string"}],function(e){let t;!function(e){e.DeductAccordingToSplitRatio="deductAccordingToSplitRatio",e.DeductFromLiableAccount="deductFromLiableAccount",e.DeductFromOneBalanceAccount="deductFromOneBalanceAccount"}(t=e.BehaviorEnum||(e.BehaviorEnum={}))}(s=t.PlatformChargebackLogic||(t.PlatformChargebackLogic={}))},45569:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardDetailsRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CardDetailsRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"cardNumber",baseName:"cardNumber",type:"string"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"encryptedCardNumber",baseName:"encryptedCardNumber",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"supportedBrands",baseName:"supportedBrands",type:"Array<string>"}]},46095:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentDetailsResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentDetailsResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"amount",baseName:"amount",type:"Amount"},{name:"donationToken",baseName:"donationToken",type:"string"},{name:"fraudResult",baseName:"fraudResult",type:"FraudResult"},{name:"merchantReference",baseName:"merchantReference",type:"string"},{name:"order",baseName:"order",type:"CheckoutOrderResponse"},{name:"paymentMethod",baseName:"paymentMethod",type:"ResponsePaymentMethod"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"refusalReason",baseName:"refusalReason",type:"string"},{name:"refusalReasonCode",baseName:"refusalReasonCode",type:"string"},{name:"resultCode",baseName:"resultCode",type:"PaymentDetailsResponse.ResultCodeEnum"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"threeDS2ResponseData",baseName:"threeDS2ResponseData",type:"ThreeDS2ResponseData"},{name:"threeDS2Result",baseName:"threeDS2Result",type:"ThreeDS2Result"},{name:"threeDSPaymentData",baseName:"threeDSPaymentData",type:"string"}],function(e){let t;!function(e){e.AuthenticationFinished="AuthenticationFinished",e.AuthenticationNotRequired="AuthenticationNotRequired",e.Authorised="Authorised",e.Cancelled="Cancelled",e.ChallengeShopper="ChallengeShopper",e.Error="Error",e.IdentifyShopper="IdentifyShopper",e.PartiallyAuthorised="PartiallyAuthorised",e.Pending="Pending",e.PresentToShopper="PresentToShopper",e.Received="Received",e.RedirectShopper="RedirectShopper",e.Refused="Refused",e.Success="Success"}(t=e.ResultCodeEnum||(e.ResultCodeEnum={}))}(s=t.PaymentDetailsResponse||(t.PaymentDetailsResponse={}))},46207:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(42268),a=s(41915),n=s(21079),r=s(21742);class o{constructor(e){this.web=e,this.resize=()=>{this.bar.style.left=this.web.stage.raster.offsetLeft+"px",this.bar.style.width=this.web.stage.raster.offsetWidth+"px"},this.handleTabContextMenu=(e,t)=>{e.preventDefault(),e.stopPropagation(),new n.Ay(new a.A(e.clientX,e.clientY),[new n.kt((0,r.A)("close"),()=>{this.web.tabClose(t)}),new n.kt((0,r.A)("closeAll"),()=>{this.web.tabCloseAll()}),new n.kt((0,r.A)("closeOthers"),()=>{this.web.tabCloseOthers(t)}),new n.K5,new n.kt((0,r.A)("duplicate"),()=>{this.web.tabDuplicate(t)}),new n.K5,new n.kt((0,r.A)("save"),()=>{this.web.tabSave(t)}),new n.kt((0,r.A)("saveAsPZX"),()=>{this.web.tabSave(t,"pxz")}),new n.kt((0,r.A)("quickExportPNG"),()=>{this.web.tabQuickExport(t)})])},this.render=()=>{if(this.tabs.innerHTML="",this.web.stage.showTabs){this.bar.style.display="block",this.resize();for(let e=0;e<this.web.stage.tabs.length;e++){const t=this.web.stage.tabs[e].fresco;if(this.web.stage.fresco&&t.id===this.web.stage.fresco.id){const e=(0,i.T)("li",{id:t.id,title:t.name,className:"active",oncontextmenu:e=>this.handleTabContextMenu(e,t.id)},t.name,(0,i.T)("img",{className:"close ic",width:10,height:10,src:"/img/icon/close.svg",onclick:()=>{this.web.tabClose(t.id)}}));this.tabs.appendChild(e)}else{let e;const s=(0,i.T)("li",{id:t.id,title:t.name,onclick:()=>this.web.tabSelect(t.id),onmouseenter:()=>{this.web.stage.layerDrag&&!this.web.stage.layerDrag.blocked&&(s.classList.add("countup"),e=window.setTimeout(()=>this.web.tabSelect(t.id),300))},onmouseleave:()=>{window.clearTimeout(e),e=void 0,s.classList.remove("countup")},oncontextmenu:e=>this.handleTabContextMenu(e,t.id)},t.name,(0,i.T)("img",{className:"close ic",src:"/img/icon/close.svg",width:10,height:10,onclick:()=>this.web.tabClose(t.id)}));this.tabs.appendChild(s)}}}else this.bar.style.display="none"},this.tabs=(0,i.T)("ul",{id:"tabs"}),this.bar=(0,i.T)("div",{id:"tab-bar"},this.tabs,(0,i.T)("div",{id:"tabs-drop"},(0,i.T)("img",{src:"/img/icon/tabs.svg",className:"ic",width:18,height:18,loading:"lazy"}))),(0,i.Ay)("workspace").appendChild(this.bar),this.bar.style.display="none",(0,i.Ay)("tabs-drop").addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=e.currentTarget.getBoundingClientRect(),s=new Array;for(let i=0;i<this.web.stage.tabs.length;i++){const e=this.web.stage.tabs[i].fresco;s.push(new n.kt(e.name,()=>this.web.tabSelect(e.id)))}new n.Ay(new a.A(t.x+25,t.y+16),s,!0)}),document.addEventListener("fresco-select",this.render),document.addEventListener("resize",this.resize)}}},46825:(e,t,s)=>{var i=s(29821);e.exports=s.v(t,e.id,"9826786be4943de684a7",{"./pixlr_bg.js":{__wbg_x_7af334499c70ecf9:i._k,__wbg_y_7b2e0b17f2702db7:i._4,__wbg_width_9a7937fdc4208452:i.zP,__wbg_height_c0440005f53e9792:i.Qm,__wbindgen_memory:i.Py,__wbg_buffer_085ec1f694018c4f:i.Qj,__wbg_newwithbyteoffsetandlength_a624c98280289b0f:i.Zi,__wbindgen_object_drop_ref:i.bk,__wbg_new_4c0b35176d4e6c47:i.HY,__wbindgen_string_new:i.yc,__wbindgen_throw:i.Qn}})},47378:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(2215),a=s(82042),n=s(42268),r=s(21742),o=s(54738);class h extends i.A{constructor(e){super(e,(0,r.A)("titleFishEye")),this.update=o.eD(50,()=>{const e=Number(document.querySelector('input[name="edge-fill"]:checked').value),t={amount:this.amount.getValue(),aperture:this.aperture.getValue()*(Math.PI/1.8),x:this.x.getValue(),y:this.y.getValue(),edgeFill:e};this.change("fisheye",t)}),this.setContent(`\n             <div id="fish-eye-aperture"></div>\n             <div id="fish-eye-x" class="top-16"></div>\n             <div id="fish-eye-y" class="top-16"></div>\n             <div id="fish-eye-amount" class="top-10"></div>\n             <label class="split top-35">${(0,r.A)("edgeFill")}</label>\n             <div class="switch-field top-5" id="fish-eye-edge-fill">\n                 <input type="radio" id="edge-fill-none" name="edge-fill" value="0" checked/><label for="edge-fill-none">${(0,r.A)("none")}</label>\n                 <input type="radio" id="edge-fill-reflect" name="edge-fill" value="1"/><label for="edge-fill-reflect">${(0,r.A)("reflect")}</label>\n                 <input type="radio" id="edge-fill-repeat" name="edge-fill" value="2"/><label for="edge-fill-repeat">${(0,r.A)("repeat")}</label>\n             </div>\n            `),this.amount=new a.A("fish-eye-amount",{label:(0,r.A)("stretch"),range:[0,1],defaultValue:0,step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.aperture=new a.A("fish-eye-aperture",{label:(0,r.A)("buldge"),step:.01,range:[-Math.PI/2,Math.PI/2],defaultValue:0,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),this.x=new a.A("fish-eye-x",{label:"X",range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.y=new a.A("fish-eye-y",{label:"Y",range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),(0,n.Ay)("edge-fill-none").addEventListener("change",this.update,!1),(0,n.Ay)("edge-fill-reflect").addEventListener("change",this.update,!1),(0,n.Ay)("edge-fill-repeat").addEventListener("change",this.update,!1),this.update()}}},47395:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShopperInteractionDevice=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ShopperInteractionDevice=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"locale",baseName:"locale",type:"string"},{name:"os",baseName:"os",type:"string"},{name:"osVersion",baseName:"osVersion",type:"string"}]},47716:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsePaymentMethod=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponsePaymentMethod=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"brand",baseName:"brand",type:"string"},{name:"type",baseName:"type",type:"string"}]},48373:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(42903);class a extends i.A{constructor(e){super(e,"sobel"),this.shaders.addShader("sobel",1),this.apply()}}},49143:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(21742),a=s(54738),n=s(42268),r=s(98244),o=s(2215),h=s(82042),c=s(15818),l=s(8689),d=s(40963);class p extends o.A{constructor(e){const t=e.fresco.getSelected(),o=new d.A(0,0,e.fresco.width,e.fresco.height),p=t.settings.locked&&t.rect.equalTo(o)?0:150;super(e,(0,i.A)("titleOuterGlow"),!1,!1,p),this.load=async()=>{const e=Promise.resolve().then(s.bind(s,82355)),t=a.D9();await t;const{distanceTransform:i}=await e,o=this.shaders.ctx,h=this.cache.getContext("2d").getImageData(0,0,this.cache.width,this.cache.height),c=i(this.cache.width,this.cache.height,h.data);if(!o.getSupportedExtensions().includes("OES_texture_float"))return alert("sorry, this filter requires float textures"),void(0,r.A)("OES_texture_float");o.getExtension("OES_texture_float");const l=o.createTexture();o.bindTexture(o.TEXTURE_2D,l),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.cache.width,this.cache.height,0,o.ALPHA,o.FLOAT,c),o.bindTexture(o.TEXTURE_2D,null),this.map=l,(0,n.Ay)("outerglow-loading").style.display="none",(0,n.Ay)("outerglow-controls").style.visibility="visible",this.enableApply(),this.update()},this.update=()=>{const e={size:this.size.getValue(),feather:this.feather.getValue(),opacity:this.opacity.getValue(),color:this.color.getColor(),distanceMap:this.map};this.shaders.addShader("outer-glow",e.size?e:null),window.requestAnimationFrame(()=>{this.scratch.canvas=this.shaders.apply(this.cache),this.stage.render()})},this.apply=()=>{const e=this.stage.fresco.getSelected(),t=a.TL(a.oM(this.scratch.canvas)).rebase(-this.scratch.rect.x,-this.scratch.rect.y),s=a.ON(e.canvas,t.rebase(e.rect.x,e.rect.y)),i=a.oM(e.mask),n=e.rect.clone();e.extendCanvas(t),this.scratch.drawToLayer(e),e.render(),this.stage.fresco.removeScratch(),this.stage.history.add({type:"bitmapChange",kind:"outerGlow",layer:e,rect:n,patchRect:t.rebase(e.rect.x,e.rect.y),patch:s,mask:i}),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),this.cleanUp()},this.cancel=()=>{this.stage.fresco.removeScratch(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),this.cleanUp()},this.disableApply(),this.setContent((0,n.T)("div",{className:"dialog-loading"},(0,n.T)("div",{id:"outerglow-controls",className:"controls"},(0,n.T)("label",{className:"split"},(0,i.A)("color"),(0,n.T)("div",{id:"glow-color"})),(0,n.T)("div",{id:"glow-size",className:"range-box top-15"}),(0,n.T)("div",{id:"glow-feather",className:"range-box top-10"}),(0,n.T)("div",{id:"glow-opacity",className:"range-box top-10"})),(0,n.T)("div",{id:"outerglow-loading",className:"message"},(0,n.T)("label",{className:"working"},(0,i.A)("loading"))))),this.color=new l.A("glow-color",c.A.fromHEX("#ffffff"),this.update,this.update),this.opacity=new h.A("glow-opacity",{label:(0,i.A)("opacity"),range:[0,1],defaultValue:1,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.size=new h.A("glow-size",{label:(0,i.A)("size"),range:[0,150],defaultValue:15,step:1,labelFormat:e=>`${e}px`,onChange:()=>this.update()}),this.feather=new h.A("glow-feather",{label:(0,i.A)("feather"),range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.position(),this.load()}}},49410:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StoredDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.StoredDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"bank",baseName:"bank",type:"BankAccount"},{name:"card",baseName:"card",type:"Card"},{name:"emailAddress",baseName:"emailAddress",type:"string"}]},49442:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SepaDirectDebitDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.SepaDirectDebitDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"iban",baseName:"iban",type:"string"},{name:"ownerName",baseName:"ownerName",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"SepaDirectDebitDetails.TypeEnum"}],function(e){let t;!function(e){e.Sepadirectdebit="sepadirectdebit",e.SepadirectdebitAmazonpay="sepadirectdebit_amazonpay"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.SepaDirectDebitDetails||(t.SepaDirectDebitDetails={}))},49785:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentCancelResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentCancelResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"paymentPspReference",baseName:"paymentPspReference",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"status",baseName:"status",type:"PaymentCancelResponse.StatusEnum"}],function(e){let t;!function(e){e.Received="received"}(t=e.StatusEnum||(e.StatusEnum={}))}(s=t.PaymentCancelResponse||(t.PaymentCancelResponse={}))},50295:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(42268),a=s(72284),n=s(11839);class r extends a.A{constructor(e={}){super(!0),this.setContent(`\n            <div id="entry-pop-right" class="half">\n                ${e.content||'\n                    <h1 class="large center top-20"><strong>Hi there!</strong></h1>\n                    <h3 class="center top-10">Welcome to Pixlr, so happy to see you!</h3>\n                '}\n                <div id="entry-auth-holder" class="top-20"></div>\n            </div>\n        `);let t=(0,i.T)("div",{id:"entry-pop-left",className:"hero"});this.dialog.insertBefore(t,this.content),this.auth=new n.Ay(Object.assign({view:"chooser",holder:(0,i.Ay)("entry-auth-holder")},e))}}},50816:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleDehaze")),this.setContent((0,n.T)("div",{id:"dehaze-slider"})),new a.A("dehaze-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("dehaze",e)})}}},51110:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WeChatPayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.WeChatPayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"type",baseName:"type",type:"WeChatPayDetails.TypeEnum"}],function(e){let t;!function(e){e.Wechatpay="wechatpay",e.WechatpayPos="wechatpay_pos"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.WeChatPayDetails||(t.WeChatPayDetails={}))},51118:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EcontextVoucherDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.EcontextVoucherDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"firstName",baseName:"firstName",type:"string"},{name:"lastName",baseName:"lastName",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"type",baseName:"type",type:"EcontextVoucherDetails.TypeEnum"}],function(e){let t;!function(e){e.Seveneleven="econtext_seveneleven",e.Stores="econtext_stores"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.EcontextVoucherDetails||(t.EcontextVoucherDetails={}))},51532:(e,t,s)=>{s.d(t,{A:()=>a});class i{constructor(e){switch(this.type=e,this.type){case i.EASE_LINEAR:this.calculate=i.linear;break;case i.EASE_TWENTY_LADDER:this.calculate=i.ladderTwenty;break;case i.EASE_TEN_LADDER:this.calculate=i.ladderTen;break;case i.EASE_FIVE_LADDER:this.calculate=i.ladderFive;break;case i.EASE_THREE_LADDER:this.calculate=i.ladderThree;break;case i.EASE_IN_SINE:this.calculate=i.inSine;break;case i.EASE_OUT_SINE:this.calculate=i.outSine;break;case i.EASE_IN_OUT_SINE:this.calculate=i.inOutSine;break;case i.EASE_IN_CUBIC:this.calculate=i.inCubic;break;case i.EASE_OUT_CUBIC:this.calculate=i.outCubic;break;case i.EASE_IN_OUT_CUBIC:this.calculate=i.inOutCubic;break;case i.EASE_IN_QUINT:this.calculate=i.inQuint;break;case i.EASE_OUT_QUINT:this.calculate=i.outQuint;break;case i.EASE_IN_OUT_QUINT:this.calculate=i.inOutQuint;break;case i.EASE_IN_CIRC:this.calculate=i.inCirc;break;case i.EASE_OUT_CIRC:this.calculate=i.outCirc;break;case i.EASE_IN_OUT_CIRC:this.calculate=i.inOutCirc;break;case i.EASE_IN_QUAD:this.calculate=i.inQuad;break;case i.EASE_OUT_QUAD:this.calculate=i.outQuad;break;case i.EASE_IN_OUT_QUAD:this.calculate=i.inOutQuad;break;case i.EASE_IN_QUART:this.calculate=i.inQuart;break;case i.EASE_OUT_QUART:this.calculate=i.outQuart;break;case i.EASE_IN_OUT_QUART:this.calculate=i.inOutQuart;break;case i.EASE_IN_EXPO:this.calculate=i.inExpo;break;case i.EASE_OUT_EXPO:this.calculate=i.outExpo;break;case i.EASE_IN_OUT_EXPO:this.calculate=i.inOutExpo;break;case i.EASE_IN_BACK:this.calculate=i.inBack;break;case i.EASE_OUT_BACK:this.calculate=i.outBack;break;case i.EASE_IN_OUT_BACK:this.calculate=i.inOutBack;break;case i.EASE_IN_BOUNCE:this.calculate=i.inBounce;break;case i.EASE_OUT_BOUNCE:this.calculate=i.outBounce;break;case i.EASE_IN_OUT_BOUNCE:this.calculate=i.inOutBounce;break;case i.EASE_IN_ELASTIC:this.calculate=i.inElastic;break;case i.EASE_OUT_ELASTIC:this.calculate=i.outElastic;break;case i.EASE_IN_OUT_ELASTIC:this.calculate=i.inOutElastic}}static inOutQuint(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}static outCirc(e){return Math.sqrt(1-Math.pow(e-1,2))}static inOutCirc(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}}i.EASE_LINEAR="linear",i.EASE_TWENTY_LADDER="twenty-ladder",i.EASE_TEN_LADDER="ten-ladder",i.EASE_FIVE_LADDER="five-ladder",i.EASE_THREE_LADDER="three-ladder",i.EASE_IN_SINE="in-sine",i.EASE_OUT_SINE="out-sine",i.EASE_IN_OUT_SINE="in-out-sine",i.EASE_IN_CUBIC="in-cubic",i.EASE_OUT_CUBIC="out-cubic",i.EASE_IN_OUT_CUBIC="in-out-cubic",i.EASE_IN_QUINT="in-quint",i.EASE_OUT_QUINT="out-quint",i.EASE_IN_OUT_QUINT="in-out-quint",i.EASE_IN_CIRC="in-circ",i.EASE_OUT_CIRC="out-circ",i.EASE_IN_OUT_CIRC="in-out-circ",i.EASE_IN_QUAD="in-quad",i.EASE_OUT_QUAD="out-quad",i.EASE_IN_OUT_QUAD="in-out-quad",i.EASE_IN_QUART="in-quart",i.EASE_OUT_QUART="out-quart",i.EASE_IN_OUT_QUART="in-out-quart",i.EASE_IN_EXPO="in-expo",i.EASE_OUT_EXPO="out-expo",i.EASE_IN_OUT_EXPO="in-out-expo",i.EASE_IN_BACK="in-back",i.EASE_OUT_BACK="out-back",i.EASE_IN_OUT_BACK="in-out-back",i.EASE_IN_BOUNCE="in-bounce",i.EASE_OUT_BOUNCE="out-bounce",i.EASE_IN_OUT_BOUNCE="in-out-bounce",i.EASE_IN_ELASTIC="in-elastic",i.EASE_OUT_ELASTIC="out-elastic",i.EASE_IN_OUT_ELASTIC="in-out-elastic",i.linear=e=>e,i.ladderTwenty=e=>i.ladder(e,20),i.ladderTen=e=>i.ladder(e,10),i.ladderFive=e=>i.ladder(e,5),i.ladderThree=e=>i.ladder(e,3),i.ladder=(e,t)=>Math.ceil(e*t)*(1/t),i.inSine=e=>1-Math.cos(e*Math.PI/2),i.outSine=e=>Math.sin(e*Math.PI/2),i.inOutSine=e=>-(Math.cos(Math.PI*e)-1)/2,i.inCubic=e=>e*e*e,i.outCubic=e=>1-Math.pow(1-e,3),i.inOutCubic=e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,i.inQuint=e=>e*e*e*e*e,i.outQuint=e=>1-Math.pow(1-e,5),i.inCirc=e=>1-Math.sqrt(1-Math.pow(e,2)),i.inQuad=e=>e*e,i.outQuad=e=>1-(1-e)*(1-e),i.inOutQuad=e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,i.inQuart=e=>e*e*e*e,i.outQuart=e=>1-Math.pow(1-e,4),i.inOutQuart=e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,i.inExpo=e=>0===e?0:Math.pow(2,10*e-10),i.outExpo=e=>1===e?1:1-Math.pow(2,-10*e),i.inOutExpo=e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,i.inBack=e=>{const t=1.70158;return 2.70158*e*e*e-t*e*e},i.outBack=e=>{const t=1.70158;return 1+2.70158*Math.pow(e-1,3)+t*Math.pow(e-1,2)},i.inOutBack=e=>{const t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2},i.inBounce=e=>1-i.outBounce(1-e),i.outBounce=e=>{const t=7.5625,s=2.75;return e<1/s?t*e*e:e<2/s?t*(e-=1.5/s)*e+.75:e<2.5/s?t*(e-=2.25/s)*e+.9375:t*(e-=2.625/s)*e+.984375},i.inOutBounce=e=>e<.5?(1-i.outBounce(1-2*e))/2:(1+i.outBounce(2*e-1))/2,i.inElastic=e=>{const t=2*Math.PI/3;return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*t)},i.outElastic=e=>{const t=2*Math.PI/3;return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*t)+1},i.inOutElastic=e=>{const t=2*Math.PI/4.5;return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1};const a=i},51611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayUUpiDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PayUUpiDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"shopperNotificationReference",baseName:"shopperNotificationReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"PayUUpiDetails.TypeEnum"},{name:"virtualPaymentAddress",baseName:"virtualPaymentAddress",type:"string"}],function(e){let t;!function(e){e.PayuInUpi="payu_IN_upi"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.PayUUpiDetails||(t.PayUUpiDetails={}))},51668:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(21742),a=s(26806),n=s(42268),r=s(15818),o=s(81937),h=s(79453),c=s(74785);class l extends a.A{constructor(e){if(super((0,i.A)("createNew"),!0,document.body.clientWidth>=650),this.selectType=e=>{let t=e.currentTarget;this.setType(t.id.replace("tab-",""))},this.setType=e=>{switch(this.type&&(this.holder.innerHTML="",(0,n.Ay)("tab-"+this.type).classList.remove("selected")),(0,n.Ay)("tab-"+e).classList.add("selected"),this.type=e,this.type){case"recommended":if(this.stage.clipboardSize){let e=this.stage.clipboardSize;this.addBox((0,i.A)("clipboard"),e.width,e.height,"/img/icon/new-cutout.svg")}this.addBox((0,i.A)("social-media-post"),1080,1080,"/img/icon/category/social.svg"),this.addBox((0,i.A)("social-media-story"),1080,1920,"/img/icon/category/social.svg"),this.addBox("Web med",1600,900,"/img/icon/category/web.svg"),this.addBox("Thumb 720p",1280,720,"/img/icon/category/video.svg"),this.addBox("Wide 1080p",1920,1080,"/img/icon/category/video.svg"),this.addBox("Art grid",1e3,1e3,"/img/icon/category/art.svg"),this.addBox("12 mpx 4:3",4032,3024,"/img/icon/category/landscape.svg"),this.addBox("8 mpx 4:3",3264,2448,"/img/icon/category/landscape.svg");break;case"photo":this.addBox("12 mpx 4:3",4032,3024,"/img/icon/category/landscape.svg"),this.addBox("8 mpx 4:3",3264,2448,"/img/icon/category/landscape.svg"),this.addBox("Landscape 3x2 in",900,600,"/img/icon/category/landscape.svg"),this.addBox("Landscape 6x4 in",1800,1200,"/img/icon/category/landscape.svg"),this.addBox("Landscape 7x5 in",2100,1500,"/img/icon/category/landscape.svg"),this.addBox("Landscape 10x8 in",3e3,2400,"/img/icon/category/landscape.svg"),this.addBox("Portrait 2x3 in",600,900,"/img/icon/category/portrait.svg"),this.addBox("Portrait 4x6 in",1200,1800,"/img/icon/category/portrait.svg"),this.addBox("Portrait 5x7 in",1500,2100,"/img/icon/category/portrait.svg"),this.addBox("Portrait 8x10 in",2400,3e3,"/img/icon/category/portrait.svg");break;case"social":this.addBox((0,i.A)("instagram-square"),1080,1080,"/img/icon/category/instagram.svg"),this.addBox((0,i.A)("instagram-post"),1080,1350,"/img/icon/category/instagram.svg"),this.addBox((0,i.A)("instagram-story"),1080,1920,"/img/icon/category/instagram.svg"),this.addBox((0,i.A)("facebook-post"),1200,630,"/img/icon/category/facebook.svg"),this.addBox((0,i.A)("facebook-story"),1080,1920,"/img/icon/category/facebook.svg"),this.addBox((0,i.A)("facebook-cover"),851,315,"/img/icon/category/facebook.svg"),this.addBox((0,i.A)("facebook-profile"),850,850,"/img/icon/category/facebook.svg"),this.addBox((0,i.A)("twitter-post"),1600,900,"/img/icon/category/twitter.svg"),this.addBox((0,i.A)("twitter-cover"),1500,500,"/img/icon/category/twitter.svg"),this.addBox((0,i.A)("twitter-profile"),400,400,"/img/icon/category/twitter.svg"),this.addBox((0,i.A)("youtube-profile"),800,800,"/img/icon/category/youtube.svg"),this.addBox((0,i.A)("youtube-thumbnail"),1280,720,"/img/icon/category/youtube.svg"),this.addBox((0,i.A)("youtube-channel-art"),2048,1152,"/img/icon/category/youtube.svg"),this.addBox((0,i.A)("pinterest-pin"),1e3,1500,"/img/icon/category/pinterest.svg"),this.addBox((0,i.A)("pinterest-square-pin"),1e3,1e3,"/img/icon/category/pinterest.svg"),this.addBox((0,i.A)("pinterest-long-pin"),1e3,2100,"/img/icon/category/pinterest.svg");break;case"print":this.addBox("Letter 8 x 11 in",2400,3300,"/img/icon/category/paper.svg"),this.addBox("Legal 8 x 14 in",2400,4200,"/img/icon/category/paper.svg",!0),this.addBox("Tabloid 11 x 17 in",3300,5100,"/img/icon/category/paper.svg",!0),this.addBox("A3 297 x 420 mm",3508,4961,"/img/icon/category/paper.svg",!0),this.addBox("A4 210 x 297 mm",2480,3508,"/img/icon/category/paper.svg"),this.addBox("A5 148 x 210 mm",1748,2480,"/img/icon/category/paper.svg"),this.addBox("A6 105 x 148 mm",1240,1748,"/img/icon/category/paper.svg"),this.addBox((0,i.A)("business-card"),1050,600,"/img/icon/category/business-card.svg"),this.addBox((0,i.A)("flyer")+" 4.25 x 5.5 in",1275,1650,"/img/icon/category/flyer.svg"),this.addBox((0,i.A)("flyer")+" 5.5 x 8.5 in",1650,2550,"/img/icon/category/flyer.svg"),this.addBox((0,i.A)("flyer")+" 8.5 x 11 in",2550,3300,"/img/icon/category/flyer.svg"),this.addBox((0,i.A)("brochure")+" 8.5 x 11 in",2550,3300,"/img/icon/category/flyer.svg"),this.addBox((0,i.A)("brochure")+" 8.5 x 14 in",2550,4200,"/img/icon/category/flyer.svg",!0),this.addBox((0,i.A)("brochure")+" 11 x 17 in",3300,5100,"/img/icon/category/flyer.svg",!0),this.addBox((0,i.A)("invitation")+" 4 x 6 in",384,576,"/img/icon/category/invitation.svg"),this.addBox((0,i.A)("invitation")+" 5 x 7 in",480,672,"/img/icon/category/invitation.svg");break;case"web":this.addBox("Web 1994",800,600,"/img/icon/category/web.svg"),this.addBox("Web 2004",1280,720,"/img/icon/category/web.svg"),this.addBox("Web 2012",1366,768,"/img/icon/category/web.svg"),this.addBox("Web 2016",1440,900,"/img/icon/category/web.svg"),this.addBox("Web 2020",1920,1200,"/img/icon/category/web.svg"),this.addBox("Icon 16",16,16,"/img/icon/category/icon.svg"),this.addBox("Icon 32",32,32,"/img/icon/category/icon.svg"),this.addBox("Icon 64",64,64,"/img/icon/category/icon.svg"),this.addBox("Icon 512",512,512,"/img/icon/category/icon.svg"),this.addBox("Icon 1024",1024,1024,"/img/icon/category/icon.svg");break;case"video":this.addBox("360p",640,360,"/img/icon/category/video.svg"),this.addBox("480p",854,480,"/img/icon/category/video.svg"),this.addBox("720p",1280,720,"/img/icon/category/video.svg"),this.addBox("1080p HD",1920,1080,"/img/icon/category/video.svg"),this.addBox("1440p 2K",2560,1440,"/img/icon/category/video.svg"),this.addBox("4K UHD",3840,2160,"/img/icon/category/video.svg")}},this.presetChange=e=>{let t=e.currentTarget,s=(0,n.Ay)("ceate-new-outer").getElementsByClassName("new-box");for(var i=0;i<s.length;i++)s[i].classList.remove("selected");t.classList.add("selected");let a=t.getAttribute("data").split(":");(0,n.Ay)("new-canvas-width").value=a[0],(0,n.Ay)("new-canvas-height").value=a[1]},this.addBox=(e,t,s,i,a=!1)=>{let r=(0,n.T)("div",{className:"new-box",style:"width:"+this.boxSize+"px"},(0,n.T)("div",{className:"holder"},(0,n.T)("img",{src:i})),(0,n.T)("span",{},e),(0,n.T)("small",{},t+"x"+s+" px"));a&&r.classList.add("premium"),r.addEventListener("click",this.presetChange,!1),r.setAttribute("data",t+":"+s),this.holder.appendChild(r)},this.apply=async()=>{let e=(0,n.Ay)("new-canvas-width").value,t=(0,n.Ay)("new-canvas-height").value,s=Number.isNaN(Number(e))?600:Number(e),i=Number.isNaN(Number(t))?600:Number(t),a="premium"===(null===h.N||void 0===h.N?void 0:h.N.subscriptionAccess)?8192:4096;s>a&&(s=a),i>a&&(i=a);let r=(0,n.Ay)("new-canvas-name").value,o=!(0,n.Ay)("new-canvas-background").checked;this.stage.createNew(r,s,i,o?void 0:this.backgroundColor.getHex()),this.cleanUp()},this.stage=e,(0,n.Ay)("dialog-apply"+this.mid).innerText=(0,i.A)("create"),(0,n.Ay)("dialog-buttons"+this.mid).style.marginTop="0px",document.body.clientWidth>=650){this.dialog.style.width="90%",this.dialog.style.maxWidth="1200px",this.dialog.style.height=document.body.offsetHeight-300+"px",this.content.style.padding="0",this.content.style.height="1vh",this.content.style.display="flex",this.content.style.position="relative",this.content.style.flexDirection="column",this.setContent(`\n\n                <ul id="preset-type" class="tab-list top-10" style="flex: 0 1 auto;margin-left:20px;margin-right:20px;margin-bottom:10px">\n                    <li id="tab-recommended">${(0,i.A)("recommended")}</li>\n                    <li id="tab-photo">${(0,i.A)("photo")}</li>\n                    <li id="tab-social">${(0,i.A)("social")}</li>\n                    <li id="tab-web">${(0,i.A)("web")}</li>\n                    <li id="tab-print">${(0,i.A)("print")}</li>\n                    <li id="tab-video">${(0,i.A)("video")}</li>\n                </ul>\n                <div class="flex" style="position:relative;height:calc(100% - 58px);margin:0px 20px;">\n\n                    <div id="ceate-new-outer" style="flex-grow:2">\n                        <div id="create-new-content" class="new-holder">\n\n                        </div>\n                    </div>\n                    <div style="flex: 0 0 auto;flex-basis:220px;width:220px;min-width:220px;margin-left:10px;overflow:hidden;">\n                        <label for="new-canvas-name">${(0,i.A)("name")}</label>\n                        <input type="text" style="width: 100%;" id="new-canvas-name" value="${(0,i.A)("untitled")}" />\n\n                        <label class="split top-20">${(0,i.A)("width")} <input type="number" id="new-canvas-width" value="1920"/></label>\n                        <label class="split">${(0,i.A)("height")} <input type="number" id="new-canvas-height" value="1080"/></label>\n                        <label class="top-10" style="text-align:right;font-size:10px;float:none;clear: both;">${(0,i.A)("max")}<span id="new-max-size">4096 x 4096 px</span></label>\n\n                        <input type="checkbox" class="toggle-check" id="new-canvas-background" />\n                        <label class="switch subline top-20" for="new-canvas-background">${(0,i.A)("background")}<span></span><span class="arrow"></span></label>\n                        <div class="toggle">\n                            <div id="new-canvas-background-color-picker" class="color-picker top-0"></div>\n                        </div>\n                    </div>\n                <div>\n                \n            `),this.holder=(0,n.Ay)("create-new-content");let e=(0,n.Ay)("preset-type").getElementsByTagName("li");for(var t=0;t<e.length;t++)e[t].addEventListener("click",this.selectType,!1);let s=this.holder.clientWidth,a=Math.floor(s/125);this.boxSize=Math.floor(125+(s-125*a)/a),new o.A((0,n.Ay)("ceate-new-outer")),this.setType("recommended")}else this.setContent(`\n\n                <label for="new-canvas-name">${(0,i.A)("name")}</label>\n                <input type="text" style="width: 100%;" id="new-canvas-name" value="${(0,i.A)("untitled")}" />\n\n                <label class="split top-20">${(0,i.A)("width")} <input type="number" id="new-canvas-width" value="1920"/></label>\n                <label class="split">${(0,i.A)("height")} <input type="number" id="new-canvas-height" value="1080"/></label>\n                <label class="top-10" style="text-align:right;font-size:10px;float:none;clear: both;">${(0,i.A)("max")}<span id="new-max-size">4096 x 4096 px</span></label>\n\n                <input type="checkbox" class="toggle-check" id="new-canvas-background" />\n                <label class="switch subline top-20" for="new-canvas-background">${(0,i.A)("background")}<span></span><span class="arrow"></span></label>\n                <div class="toggle">\n                    <div id="new-canvas-background-color-picker" class="color-picker top-0"></div>\n                </div>\n            `);this.backgroundColor=new c.A((0,n.Ay)("new-canvas-background-color-picker"),new r.A,void 0,!1,!1),"premium"===(null===h.N||void 0===h.N?void 0:h.N.subscriptionAccess)&&((0,n.Ay)("new-max-size").innerText="8192 x 8192 px"),this.position()}}},51787:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(52040),a=s(74785);class n extends i.A{constructor(e,t,s,i,n=!1,r=!0,o="right"){super(e),this.cleanUp=()=>{this.callback&&this.callback(this.selector.color),this.superClean()},this.color=t,this.preview=i,this.callback=s,this.selector=new a.A(this.content,this.color,this.preview,n,r,!0),this.position(o)}}},51864:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"type",baseName:"type",type:"PaymentDetails.TypeEnum"}],function(e){let t;!function(e){e.Alipay="alipay",e.Multibanco="multibanco",e.BankTransferIban="bankTransfer_IBAN",e.Paybright="paybright",e.Paynow="paynow",e.Affirm="affirm",e.AffirmPos="affirm_pos",e.Trustly="trustly",e.Trustlyvector="trustlyvector",e.Oney="oney",e.Facilypay="facilypay",e.Facilypay3x="facilypay_3x",e.Facilypay4x="facilypay_4x",e.Facilypay6x="facilypay_6x",e.Facilypay10x="facilypay_10x",e.Facilypay12x="facilypay_12x",e.Unionpay="unionpay",e.KcpBanktransfer="kcp_banktransfer",e.KcpPayco="kcp_payco",e.KcpCreditcard="kcp_creditcard",e.WechatpaySdk="wechatpaySDK",e.WechatpayQr="wechatpayQR",e.WechatpayWeb="wechatpayWeb",e.MolpayBoost="molpay_boost",e.WalletIn="wallet_IN",e.PayuInCashcard="payu_IN_cashcard",e.PayuInNb="payu_IN_nb",e.UpiQr="upi_qr",e.Paytm="paytm",e.MolpayEbankingVn="molpay_ebanking_VN",e.Paybybank="paybybank",e.EbankingFi="ebanking_FI",e.MolpayEbankingMy="molpay_ebanking_MY",e.MolpayEbankingDirectMy="molpay_ebanking_direct_MY",e.Swish="swish",e.Pix="pix",e.Walley="walley",e.WalleyB2b="walley_b2b",e.Alma="alma",e.Paypo="paypo",e.MolpayFpx="molpay_fpx",e.Konbini="konbini",e.DirectEbanking="directEbanking",e.Boletobancario="boletobancario",e.Neteller="neteller",e.Paysafecard="paysafecard",e.Cashticket="cashticket",e.Ikano="ikano",e.Karenmillen="karenmillen",e.Oasis="oasis",e.Warehouse="warehouse",e.PrimeiropayBoleto="primeiropay_boleto",e.Mada="mada",e.Benefit="benefit",e.Knet="knet",e.Omannet="omannet",e.GopayWallet="gopay_wallet",e.KcpNaverpay="kcp_naverpay",e.OnlinebankingIn="onlinebanking_IN",e.Fawry="fawry",e.Atome="atome",e.Moneybookers="moneybookers",e.Naps="naps",e.Nordea="nordea",e.BoletobancarioBradesco="boletobancario_bradesco",e.BoletobancarioItau="boletobancario_itau",e.BoletobancarioSantander="boletobancario_santander",e.BoletobancarioBancodobrasil="boletobancario_bancodobrasil",e.BoletobancarioHsbc="boletobancario_hsbc",e.MolpayMaybank2u="molpay_maybank2u",e.MolpayCimb="molpay_cimb",e.MolpayRhb="molpay_rhb",e.MolpayAmb="molpay_amb",e.MolpayHlb="molpay_hlb",e.MolpayAffinEpg="molpay_affin_epg",e.MolpayBankislam="molpay_bankislam",e.MolpayPublicbank="molpay_publicbank",e.FpxAgrobank="fpx_agrobank",e.Touchngo="touchngo",e.Maybank2uMae="maybank2u_mae",e.Duitnow="duitnow",e.Promptpay="promptpay",e.TwintPos="twint_pos",e.AlipayHk="alipay_hk",e.AlipayHkWeb="alipay_hk_web",e.AlipayHkWap="alipay_hk_wap",e.AlipayWap="alipay_wap",e.Balanceplatform="balanceplatform"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.PaymentDetails||(t.PaymentDetails={}))},52038:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(28153),a=s(76315);class n{constructor(e=!1,t=void 0,s=void 0,i=void 0,a=void 0){this.block=e,this.enter=t,this.scene=s,this.exit=i,this.stagger=a}}n.fromInjection=(e,t)=>{let s=t?n.clone(t):new n;if(s.block=!1,!e)return s;if(e.enter&&(s.enter&&(e.enter.delay=s.enter.delay,e.enter.speed=s.enter.speed),s.enter=e.enter,s.enter.duration=s.enter.duration?s.enter.duration:n.getMotionsDuration(s.enter.motions)),e.scene&&(s.scene&&(e.scene.delay=s.scene.delay,e.scene.speed=s.scene.speed,e.scene.repeat=s.scene.repeat,e.scene.gap=s.scene.gap),s.scene=e.scene,s.scene.motions)){let e=n.getMotionsDuration(s.scene.motions);s.scene.duration=e+s.scene.repeat*(e+s.scene.gap)}return e.exit&&(s.exit&&(e.exit.delay=s.exit.delay,e.exit.speed=s.exit.speed),s.exit=e.exit,s.exit.duration=n.getMotionsDuration(s.exit.motions)),e.stagger&&(s.stagger=e.stagger),s},n.getSegment=(e,t)=>{if(t)switch(e){case"enter":return t.enter;case"scene":return t.scene;case"exit":return t.exit}},n.setSegmentSpeed=(e,t)=>{if(!e)return;e.speed=t;let s=n.getMotionsDuration(e.motions,e.speed);e.duration=s+e.repeat*(s+e.gap)},n.setSegmentRepeat=(e,t)=>{if(!e)return;let s=n.getMotionsDuration(e.motions,e.speed);e.repeat=t,e.duration=s+t*(s+e.gap)},n.setSegmentGap=(e,t)=>{if(!e)return;let s=n.getMotionsDuration(e.motions,e.speed);e.gap=t,e.duration=s+e.repeat*(s+e.gap)},n.getAnimationSegment=(e,t)=>{if(!t)return;const s=new n(t.block);return"enter"===e&&(s.enter=new i.A(t.enter.name,[...t.enter.motions],t.enter.option,t.enter.duration,t.enter.delay,t.enter.speed,t.enter.repeat,t.enter.gap)),"scene"===e&&(s.scene=new i.A(t.scene.name,[...t.scene.motions],t.scene.option,t.scene.duration,t.scene.delay,t.scene.speed,t.scene.repeat,t.scene.gap)),"exit"===e&&(s.exit=new i.A(t.exit.name,[...t.exit.motions],t.exit.option,t.exit.duration,t.exit.delay,t.exit.speed,t.exit.repeat,t.exit.gap)),s},n.getMotionsDuration=(e,t=1)=>{if(!e||0===e.length)return 0;let s=0;for(const i of e)s=Math.max(s,Math.round((i.delay+i.duration)*t));return s},n.clone=e=>{if(!e)return;const t=new n(e.block);return e.enter&&(t.enter=new i.A(e.enter.name,[...e.enter.motions],e.enter.option,e.enter.duration,e.enter.delay,e.enter.speed,e.enter.repeat,e.enter.gap)),e.scene&&(t.scene=new i.A(e.scene.name,[...e.scene.motions],e.scene.option,e.scene.duration,e.scene.delay,e.scene.speed,e.scene.repeat,e.scene.gap)),e.exit&&(t.exit=new i.A(e.exit.name,[...e.exit.motions],e.exit.option,e.exit.duration,e.exit.delay,e.exit.speed,e.exit.repeat,e.exit.gap)),e.stagger&&(t.stagger=new a.A(e.stagger.duration,e.stagger.metod)),t};const r=n},52040:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(54738),a=s(42268);class n{constructor(e,t="right"){let s;this.position=(e=this.flow)=>{let t=this.parent.getBoundingClientRect();if("up"===e||document.body.clientWidth<650)this.drop.style.left=i.qE(t.right-this.drop.offsetWidth+15,5,document.body.clientWidth-this.drop.offsetWidth)+"px",this.drop.style.top=t.top-this.drop.offsetHeight+"px",this.drop.classList.add("up");else{switch(e){case"right":this.drop.style.left=t.right-5+"px",this.drop.style.top=t.top-24+"px";break;case"left":this.drop.style.left=t.left-this.drop.offsetWidth+this.parent.offsetWidth/2+38+"px",this.drop.style.top=t.top-this.drop.offsetHeight+"px";break;case"down":this.drop.style.left=t.left+this.parent.offsetWidth/2-36+"px",this.drop.style.top=t.bottom+5+"px"}this.drop.classList.add(e)}},this.setContent=(...e)=>{e[0]instanceof HTMLElement?this.content.append(...e):this.content.innerHTML+=e[0],this.position()},this.keyDown=e=>{"Enter"!==e.key&&"Escape"!==e.key||this.cleanUp()},this.superClean=()=>{var e;document.removeEventListener("keydown",this.keyDown,!1),this.drop.remove(),this.drop=null,null===(e=this.modal)||void 0===e||e.remove(),this.modal=null},this.cleanUp=()=>{this.superClean()},this.flow=t,this.parent=e,this.mid=i.r0(),this.content=(0,a.T)("div",{className:"content"}),this.drop=(0,a.T)("div",{className:"drop"},this.content),this.modal=(0,a.T)("div",{id:"modal-"+this.mid,className:"modal"},this.drop),this.modal.addEventListener("mousedown",e=>{s=e.target}),this.modal.addEventListener("mouseup",e=>{e.target===s&&e.target===this.modal&&this.cleanUp()}),document.body.appendChild(this.modal),document.addEventListener("keydown",this.keyDown,!1),this.position(t)}}},52549:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e,t,s){this.color=e,this.blend=t,this.amount=s}}},53226:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(42268),a=s(54738),n=s(75770),r=s(82042),o=s(59350),h=s(71499),c=s(85337),l=s(21742);class d extends n.A{constructor(e){super("temper",e),this.mode="increase",this.method="vibrance",this.layerSelect=()=>{if(!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("temper-no-layer").style.display="flex",(0,i.Ay)("temper-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("temper-settings").style.display="flex",(0,i.Ay)("temper-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"over"),this.stage.fresco.hasSelection()&&this.scratch.addBake(),this.updateBrush()},this.toggleMode=()=>{this.setMode("increase"===this.mode?"decrease":"increase")},this.selectMode=e=>{this.setMode(e.currentTarget===(0,i.Ay)("temper-mode-increase")?"increase":"decrease")},this.setMode=e=>{this.mode=e,(0,i.Ay)("temper-mode-increase").checked="increase"===this.mode,(0,i.Ay)("temper-mode-decrease").checked="decrease"===this.mode},this.isShiftDown=!1,this.keyDown=e=>{if("Shift"===e.key&&!this.isShiftDown)return this.isShiftDown=!0,void this.toggleMode();switch(e.key){case",":e.shiftKey?this.brushPod.stepSoftness(.1):this.brushPod.stepSize(-10);break;case".":e.shiftKey?this.brushPod.stepSoftness(-.1):this.brushPod.stepSize(10)}},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1,this.toggleMode())},this.updateBrush=()=>{this.selected?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom)):this.stage.coating.removeCursorImage()},this.down=(e,t)=>{this.selected&&(this.stage.coating.freeze(!0),this.method=document.querySelector('input[name="temper-method"]:checked').value,this.isShiftDown||(this.x=this.y=-1),"touch"!==t&&this.move(e),this.addMoveListeners())},this.x=-1,this.y=-1,this.move=e=>{let t=2*this.brush.getStep(),s=!1;if(e=this.stage.translateRasterToFresco(e,this.selected.rect),-1===this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0),e.x!==this.x||e.y!==this.y){let i=e.x-this.x,a=e.y-this.y,n=i>0?1:-1,r=a>0?1:-1;if(i=i<0?-i:i,a=a<0?-a:a,i>a){let e=.5*i;for(let o=1;o<=i;o++)this.x+=n,e+=a,e>=i&&(e-=i,this.y+=r),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}else{let e=.5*a;for(let o=1;o<=a;o++)this.y+=r,e+=i,e>=a&&(e-=a,this.x+=n),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}}s&&(this.scratch.applySelection(this.stage),window.requestAnimationFrame(()=>this.stage.render()))},this.drawShape=(e,t)=>{let s=this.strength.getValue();"decrease"===this.mode&&(s*=-1);let i=this.getPatchContext(this.brush.canvas.width,this.brush.canvas.height);switch(i.save(),i.drawImage(this.selected.canvas,-e,-t),this.method){case"vibrance":this.vibrance(i,s);break;case"saturation":this.saturation(i,s);break;case"temperature":this.temperature(i,s)}i.globalCompositeOperation="destination-in",i.drawImage(this.brush.canvas,0,0),i.restore(),this.scratch.ctx.drawImage(this.patch,e,t)},this.getPatchContext=(e,t)=>this.patch?(this.patch.width!==e||this.patch.height!==t?(this.patch.width=e,this.patch.height=t):this.ptx.clearRect(0,0,e,t),this.ptx):(this.patch=a.VI(e,t),this.ptx=this.patch.getContext("2d"),this.ptx),this.up=e=>{this.stage.coating.freeze(!1),this.removeMoveListeners();let t=a.TL(this.scratch.getCanvas());if(t&&t.width>0&&t.height>0){let e=a.ON(this.selected.canvas,t);const s=this.selected.rect.clone();this.scratch.drawToLayer(this.selected),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"temper",layer:this.selected,patchRect:t,patch:e,rect:s})}window.requestAnimationFrame(()=>this.stage.render())},this.saturation=(e,t)=>{var s=e.canvas.width,i=e.canvas.height;t+=100,t/=100;for(var a,n,r,o,h,c,l=e.getImageData(0,0,s,i),d=l.data,p=i;p--;)for(a=s;a--;)n=d[h=4*(p*s+a)],r=d[h+1],o=d[h+2],(n=(c=Math.sqrt(n*n*.299+r*r*.587+o*o*.114))+(n-c)*t)>255?n=255:n<0&&(n=0),(r=c+(r-c)*t)>255?r=255:r<0&&(r=0),(o=c+(o-c)*t)>255?o=255:o<0&&(o=0),d[h]=n,d[h+1]=r,d[h+2]=o;e.putImageData(l,0,0)},this.vibrance=(e,t)=>{var s=e.canvas.width,i=e.canvas.height;t*=-.02;for(var n,r,o,h,c,l,d,p,u=e.getImageData(0,0,s,i),m=u.data,g=i;g--;)for(n=s;n--;)l=.299*(r=m[c=4*(g*s+n)])+.587*(o=m[c+1])+.114*(h=m[c+2]),d=Math.max(r,o,h),Math.min(r,o,h),p=(d-l)*t/255,(r=a.jh(r,d,p))>255?r=255:r<0&&(r=0),(o=a.jh(o,d,p))>255?o=255:o<0&&(o=0),(h=a.jh(h,d,p))>255?h=255:h<0&&(h=0),m[c]=r,m[c+1]=o,m[c+2]=h;e.putImageData(u,0,0)},this.temperature=(e,t)=>{var s=e.canvas.width,i=e.canvas.height;t=Math.round(t/10);for(var a,n,r,o,h=e.getImageData(0,0,s,i),c=h.data,l=i;l--;)for(a=s;a--;)(n=c[o=4*(l*s+a)]+t)>255?n=255:n<0&&(n=0),(r=c[o+2]-t)>255?r=255:r<0&&(r=0),c[o]=n,c[o+2]=r;e.putImageData(h,0,0)},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.brushPod.cleanUp(),this.strength.cleanUp(),this.stage.coating.freeze(!1),this.removeMoveListeners(),this.removeDownListeners(),document.removeEventListener("zoom-change",this.updateBrush,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),(0,i.Ay)("temper-mode-increase").removeEventListener("click",this.selectMode,!1),(0,i.Ay)("temper-mode-decrease").removeEventListener("click",this.selectMode,!1),this.selected=null,this.patch=null,this.ptx=null},document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),(0,i.Ay)("temper-mode-increase").addEventListener("click",this.selectMode,!1),(0,i.Ay)("temper-mode-decrease").addEventListener("click",this.selectMode,!1),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),this.brush=new o.A(new h.A),this.brushPod=new c.A(e,"temper-brush",this.brush,this.updateBrush),this.strength=new r.A("temper-brush-strength",{compact:!0,label:(0,l.A)("strength")+":",range:[1,100],defaultValue:30,step:1});const t=document.querySelector('input[name="temper-mode"]:checked').value;this.setMode(t),this.addDownListeners(),this.layerSelect()}}},53507:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentLinkResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentLinkResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"allowedPaymentMethods",baseName:"allowedPaymentMethods",type:"Array<string>"},{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"billingAddress",baseName:"billingAddress",type:"Address"},{name:"blockedPaymentMethods",baseName:"blockedPaymentMethods",type:"Array<string>"},{name:"captureDelayHours",baseName:"captureDelayHours",type:"number"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"dateOfBirth",baseName:"dateOfBirth",type:"string"},{name:"deliverAt",baseName:"deliverAt",type:"Date"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"Address"},{name:"description",baseName:"description",type:"string"},{name:"expiresAt",baseName:"expiresAt",type:"Date"},{name:"id",baseName:"id",type:"string"},{name:"installmentOptions",baseName:"installmentOptions",type:"{ [key: string]: InstallmentOption; }"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"manualCapture",baseName:"manualCapture",type:"boolean"},{name:"mcc",baseName:"mcc",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantOrderReference",baseName:"merchantOrderReference",type:"string"},{name:"metadata",baseName:"metadata",type:"{ [key: string]: string; }"},{name:"recurringProcessingModel",baseName:"recurringProcessingModel",type:"PaymentLinkResponse.RecurringProcessingModelEnum"},{name:"reference",baseName:"reference",type:"string"},{name:"requiredShopperFields",baseName:"requiredShopperFields",type:"Array<PaymentLinkResponse.RequiredShopperFieldsEnum>"},{name:"returnUrl",baseName:"returnUrl",type:"string"},{name:"reusable",baseName:"reusable",type:"boolean"},{name:"riskData",baseName:"riskData",type:"RiskData"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"shopperStatement",baseName:"shopperStatement",type:"string"},{name:"showRemovePaymentMethodButton",baseName:"showRemovePaymentMethodButton",type:"boolean"},{name:"socialSecurityNumber",baseName:"socialSecurityNumber",type:"string"},{name:"splitCardFundingSources",baseName:"splitCardFundingSources",type:"boolean"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"status",baseName:"status",type:"PaymentLinkResponse.StatusEnum"},{name:"store",baseName:"store",type:"string"},{name:"storePaymentMethodMode",baseName:"storePaymentMethodMode",type:"PaymentLinkResponse.StorePaymentMethodModeEnum"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"themeId",baseName:"themeId",type:"string"},{name:"updatedAt",baseName:"updatedAt",type:"Date"},{name:"url",baseName:"url",type:"string"}],function(e){let t,s,i,a;!function(e){e.CardOnFile="CardOnFile",e.Subscription="Subscription",e.UnscheduledCardOnFile="UnscheduledCardOnFile"}(t=e.RecurringProcessingModelEnum||(e.RecurringProcessingModelEnum={})),function(e){e.BillingAddress="billingAddress",e.DeliveryAddress="deliveryAddress",e.ShopperEmail="shopperEmail",e.ShopperName="shopperName",e.TelephoneNumber="telephoneNumber"}(s=e.RequiredShopperFieldsEnum||(e.RequiredShopperFieldsEnum={})),function(e){e.Active="active",e.Completed="completed",e.Expired="expired",e.Paid="paid",e.PaymentPending="paymentPending"}(i=e.StatusEnum||(e.StatusEnum={})),function(e){e.AskForConsent="askForConsent",e.Disabled="disabled",e.Enabled="enabled"}(a=e.StorePaymentMethodModeEnum||(e.StorePaymentMethodModeEnum={}))}(s=t.PaymentLinkResponse||(t.PaymentLinkResponse={}))},53872:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(21742),a=s(54738),n=s(82042),r=s(42268),o=s(15818),h=s(81937),c=s(14871),l=s(6395),d=s(96785);class p{constructor(e,t){this.SERVER_URL="/api/assets/",this.populatePresets=async()=>{const e=await(await fetch(this.SERVER_URL+"?platform=web&category=pattern&sort=name&limit=100")).json(),{status:t,data:{assets:s}}=e;if(!t)return;if(0===s.length)return;const i=(0,r.Ay)("pattern-selector-presets-ss-content"),a=(0,r.T)("div",{className:"pattern-pod empty"});a.setAttribute("data","empty"),a.addEventListener("click",this.selectPreset,!0),i.append(a),s.forEach(e=>{const t=e.thumbnailSmall,s=(0,r.T)("div",{className:"pattern-pod"});s.setAttribute("data",e.path),s.addEventListener("click",this.selectPreset,!0),s.style.backgroundImage="url("+t+")",i.append(s)})},this.populatePack=()=>{},this.selectPreset=async e=>{this.marked&&this.marked.classList.remove("selected"),this.marked=e.currentTarget,this.marked.classList.add("selected");let t=this.marked.getAttribute("data");if("empty"===t)this.pattern=void 0;else{if(!this.pattern){let e=this.scale.getValue();this.pattern=new c.A(void 0,e<0?1+e/12.5:1+e,this.direction.getValue())}this.pattern.svg=await fetch(t+"?ref").then(e=>e.text());let e=new Blob([this.pattern.svg],{type:"image/svg+xml"});this.pattern.image=await(0,l.Ep)(e),this.extractColors()}this.updatePreview()},this.changeColor=e=>{this.colorPod=e.currentTarget,new d.A(o.A.fromHEX(this.colorPod.title),this.setColor)},this.extractColors=()=>{let e=[];this.pattern.svg.replace(/fill:?=?"?(#[abcdef0-9]{3,8})/gi,function(t,s){return e.push(s),t}),this.pattern.svg.replace(/stroke:?=?"?(#[abcdef0-9]{3,8})/gi,function(t,s){return e.push(s),t});e=e.filter((e,t,s)=>s.indexOf(e)===t).slice(0,10);let t=(0,r.Ay)("pattern-color-list");t.innerHTML="",e.forEach(e=>{t.appendChild((0,r.T)("div",{onclick:this.changeColor,className:"color-pod small",title:e,style:"border:none;border-radius:3px;display:inline-block;margin:5px 5px 5px 0px;background-color:"+e}))})},this.setColor=async e=>{let t=this.colorPod.title,s=e.toHEX();this.colorPod.title=s,this.colorPod.style.backgroundColor=s;var i=new RegExp(t,"g");this.pattern.svg=this.pattern.svg.replace(i,s);let a=new Blob([this.pattern.svg],{type:"image/svg+xml"});this.pattern.image=await(0,l.Ep)(a),this.updatePreview()},this.setPattern=e=>{this.pattern=e;let t=this.pattern.scale;this.scale.setValue(t<1?-12.5*(1-t):t-1),this.direction.setValue(this.pattern.direction),this.extractColors(),this.updatePreview()},this.scaleChange=e=>{this.pattern&&(e=e<0?1+e/12.5:1+e,this.pattern.scale=e,this.updatePreview(!1))},this.directionChange=e=>{this.pattern&&(this.pattern.direction=e,this.updatePreview(!1))},this.updatePreview=(e=!0)=>{this.pattern?(this.ctx.save(),this.ctx.fillStyle=this.pattern.createCanvasPattern(this.ctx),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore()):this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.callback&&e&&this.callback(this.pattern)},this.callback=t,this.canvas=a.VI(300,120),this.canvas.classList.add("transparent"),this.canvas.style.borderRadius="2px",this.ctx=this.canvas.getContext("2d");let s=(0,r.T)("div",{className:"option top-5",style:"display:flex;"},(0,r.T)("div",{id:"pattern-scale"}),(0,r.T)("div",{id:"pattern-direction",className:"tab-20"})),p=(0,r.T)("div",{id:"pattern-color-list",style:"display:block;"}),u=(0,r.T)("div",{id:"pattern-selector-top"},this.canvas,p,s),m=(0,r.T)("div",{id:"pattern-selector-presets",className:"top-10"});this.container=(0,r.T)("div",{id:"pattern-selector"},u,(0,r.T)("div",{className:"splitter top-8"}),m),e.appendChild(this.container),new h.A((0,r.Ay)("pattern-selector-presets")),this.scale=new n.A("pattern-scale",{label:(0,i.A)("scale")+":",compact:!0,range:[-10,10],defaultValue:0,labelFormat:e=>e.toFixed(1),labelParse:e=>parseInt(e,10),onChange:this.scaleChange,onEnd:()=>this.updatePreview()}),this.direction=new n.A("pattern-direction",{label:(0,i.A)("direction")+":",compact:!0,range:[0,360],defaultValue:0,labelFormat:e=>e.toFixed(1),labelParse:e=>parseInt(e,10),onChange:this.directionChange,onEnd:()=>this.updatePreview()}),this.populatePresets()}}},53900:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e=0,t=0){this.width=e,this.height=t}}},54127:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(54738),a=s(22866),n=s(7324),r=s(40963),o=s(15818),h=s(41915),c=s(39989),l=s(89209),d=s(52038);class p extends a.A{constructor(e=i.Os(),t,s,u){super(a.A.TYPE_TEXT),this.id=e,this.prepare=async(e=!1)=>{this.fill&&!e||(this.fill=await n.A.fromString(this.textSettings.fillType,this.textSettings.fillValue),document.dispatchEvent(new CustomEvent("layer-select"))),this.setText()},this.setText=(e=this.text)=>{this.text=e,this.settings.name=e.substring(0,25)+"..",this.textSettings.uppercase?this.words=this.text.replace(/[\n]/g,"  ").toUpperCase().split(" "):this.words=this.text.replace(/[\n]/g,"  ").split(" "),this.render()},this.setTextSize=e=>{this.textSettings.setSize(e),this.render()},this.setLineSpace=e=>{this.textSettings.lineSpace=e,this.render()},this.setLetterSpace=e=>{this.textSettings.letterSpace=e,this.render()},this.setTextFill=(e,t=!1)=>{this.fill=e,t||(this.textSettings.fillType=e.getType(),this.textSettings.fillValue=e.getStringValue()),this.render()},this.setTextFont=(e,t=!1)=>{this.textSettings.setFont(e),this.render(t)},this.setTextUpperCase=e=>{this.textSettings.uppercase=e,this.setText(this.text)},this.setTextItalic=e=>{this.textSettings.italic=e,this.setText(this.text)},this.setTextBold=e=>{this.textSettings.bold=e,this.setText(this.text)},this.setTextUnderline=e=>{this.textSettings.underline=e,this.setText(this.text)},this.setTextAlign=e=>{this.textSettings.align=e,this.render()},this.setCurve=(e,t,s,i,a)=>{this.textSettings.curve=e,this.textSettings.curveType=t,this.textSettings.curveAmount=s,this.textSettings.curveSpread=i,this.textSettings.curveFlip=a,this.render()},this.setWarp=(e,t,s,i,a,n,r)=>{this.textSettings.warp=e,this.textSettings.warpType=t,this.textSettings.warpMode=s,this.textSettings.warpEdgeSize=i,this.textSettings.warpCenterSize=a,this.textSettings.warpHorizontalOffset=n,this.textSettings.warpVerticalOffset=r,this.render()},this.setBackground=(e,t,s,i,a)=>{this.textSettings.background=e,this.textSettings.backgroundType=t,this.textSettings.backgroundColor=s,this.textSettings.backgroundPunch=i,this.textSettings.backgroundOffset=a,this.render()},this.setOutline=(e,t,s,i,a,n)=>{this.textSettings.outline=e,this.textSettings.outlineSize=t,this.textSettings.outlineColor=s,this.textSettings.outlinePunch=i,this.textSettings.outlineDistance=a,this.textSettings.outlineDirection=n,this.render()},this.setShadow=(e,t,s,i,a,n)=>{this.textSettings.shadow=e,this.textSettings.shadowBlur=t,this.textSettings.shadowAlpha=s,this.textSettings.shadowColor=i,this.textSettings.shadowDistance=a,this.textSettings.shadowDirection=n,this.render()},this.setTextSettings=e=>{this.textSettings=e,this.render()},this.setCanvasStyle=()=>{var e;this.ctx.textBaseline="top",this.ctx.font=this.textSettings.getCssFont(),this.ctx.strokeStyle=this.textSettings.outlineColor,this.ctx.lineWidth=Math.round(this.textSettings.outlineSize*this.textSettings.padding),this.ctx.lineJoin="miter",this.ctx.miterLimit=2,null===(e=this.fill)||void 0===e||e.addToCanvasFillStyle(this.ctx)},this.isPunchOut=!1,this.isWordBackground=!1,this.render=(e=!1)=>{this.isPunchOut=void 0===this.fill||this.textSettings.background&&this.textSettings.backgroundPunch||this.textSettings.outline&&this.textSettings.outlinePunch,this.isWordBackground=this.textSettings.background&&this.textSettings.backgroundType===l.A.BACKGROUND_WORD;let t=this.textSettings.padding;this.canvas||(this.canvas=i.Nw(50,50)),this.ctx||(this.ctx=this.canvas.getContext("2d")),this.setCanvasStyle();const s=new h.A;if(this.textSettings.outline&&this.textSettings.outlineDistance>0){const e=(this.textSettings.outlineDirection-90)*Math.PI/180;s.x=Math.cos(e)*this.textSettings.outlineDistance*t,s.y=Math.sin(e)*this.textSettings.outlineDistance*t}const a=this.textSettings.getLineSpacing();let n=this.textSettings.height+t+a,c=this.textSettings.background?Math.round(this.textSettings.backgroundOffset*t):0;this.textSettings.background&&this.textSettings.backgroundType!==l.A.BACKGROUND_FULL&&(n+=2*t);let d=this.splitTextIntoLines(n);this.setCanvasSize(d.length,a),this.setCanvasStyle();let p=!1;if(this.textSettings.curve&&"arc"===this.textSettings.curveType){if(p=!0,0!==this.textSettings.curveAmount){const e=this.textSettings.getLetterSpacing();let[t,s]=this.calculateArcRadius(),i=(t-this.textSettings.height/2)*Math.PI*2;p=(this.ctx.measureText(" ").width+e)/i*Math.PI*2<5e-4}this.textSettings.curveAmount<=0&&!p&&(d=d.reverse())}for(let i=0;i<d.length;i++){if(""===d[i])continue;const e=this.lineWidth(d[i]);this.textSettings.curve&&!p?this.drawCurveLine(d[i],t+i*n,e,c,s):this.drawLine(d[i],t+i*n,e,c,s,p)}if(this.textSettings.warp){this.transient=i.oM(this.canvas),this.ctx.imageSmoothingEnabled=!0,this.ctx.imageSmoothingQuality="high";let e=this.textSettings.warpMode,s="angular"===this.textSettings.warpType,a=this.textSettings.background||this.textSettings.outline?0:t,n=this.transient.width,r=this.transient.height-2*a,o=r+r*this.textSettings.warpEdgeSize,h=r+r*this.textSettings.warpCenterSize,c=n*(.5+.5*this.textSettings.warpHorizontalOffset),l=n*(1-(.5+.5*this.textSettings.warpHorizontalOffset)),d=180/(2*c),p=180/(2*l),u=0,m=r*this.textSettings.warpVerticalOffset;if("upper"===e)m<0?(this.rect.height=Math.max(Math.abs(m)+o,h),u-=m):this.rect.height=Math.max(m+h,o);else if("lower"===e)m*=-1,u=Math.max(o,h-m)-r,this.rect.height=m<=0?Math.max(Math.abs(m)+h,o):Math.max(m+o,h);else if("middle"===e){m*=.75,u=.5*(Math.max(o,h)-r);let e=.5*(o-h),t=Math.max(h,o);if(m<0){let e=.5*(o-h),t=Math.max(h,o);e+h+Math.abs(m)>t?(this.rect.height=e+h+Math.abs(m),u-=e+m,e<0&&(u+=e)):(this.rect.height=t,h>o&&(u-=m))}else e+h+m>t?(this.rect.height=e+h+m,e<0&&(u+=e)):(this.rect.height=t,h>o&&(u-=m))}for(this.rect.height+=2*a,this.canvas.width=this.rect.width,this.canvas.height=this.rect.height;n--;){let t=0;t=n>c?s?1-(n-c)/l:Math.sin((l-(n-c))*p*Math.PI/180):s?1-(c-n)/c:Math.sin(n*d*Math.PI/180);let i=(1-t)*o+h*t,g=t*m,y="upper"===e?0:"lower"===e?r-i:.5*(r-i);this.ctx.drawImage(this.transient,n,a,1,r,n,a+g+y+u,1,i)}this.transient=void 0}if(this.textSettings.shadow&&!e){this.baked||(this.baked=i.Nw(100,100));let e=this.baked.getContext("2d");if(this.bect=new r.A(this.rect.x-4*t,this.rect.y-4*t,this.rect.width+8*t,this.rect.height+8*t,this.rect.rotation),this.baked.width=this.bect.width,this.baked.height=this.bect.height,this.textSettings.shadow){e.save();var u=(this.textSettings.shadowDirection-90)*Math.PI/180,m=Math.cos(u)*this.textSettings.shadowDistance,g=Math.sin(u)*this.textSettings.shadowDistance;e.shadowBlur=this.textSettings.shadowBlur*this.textSettings.padding*2,e.shadowOffsetX=m*this.textSettings.padding*2,e.shadowOffsetY=g*this.textSettings.padding*2,e.shadowColor=o.A.fromHEX(this.textSettings.shadowColor,Math.round(255*this.textSettings.shadowAlpha)).toRGBA(),e.drawImage(this.canvas,4*t,4*t),e.restore()}}else this.baked=void 0,this.bect=void 0},this.scaleBect=e=>{if(this.bect){const t=4*this.textSettings.padding*e;this.bect=new r.A(this.rect.x-t,this.rect.y-t,this.rect.width+2*t,this.rect.height+2*t,this.rect.rotation),this.bect.width<1&&(this.bect.width=1),this.bect.height<1&&(this.bect.height=1)}},this.setCanvasSize=(e,t)=>{if(this.textSettings.background&&this.textSettings.backgroundType!==l.A.BACKGROUND_FULL?this.rect.height=(this.textSettings.height+3*this.textSettings.padding)*e+t*(e-1)-this.textSettings.padding:this.rect.height=(this.textSettings.height+this.textSettings.padding)*e+t*(e-1)+this.textSettings.padding,this.textSettings.curve)switch(this.textSettings.curveType){case"arc":let e=this.calculateArcHeight();this.rect.height+=e;break;case"circle":this.rect.height=this.rect.width;break;case"half":this.rect.height=Math.round(this.rect.width/2)}this.canvas.width=this.rect.width,this.canvas.height=this.rect.height,this.textSettings.background&&this.textSettings.backgroundType===l.A.BACKGROUND_FULL&&(this.ctx.fillStyle=this.textSettings.backgroundColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height))},this.splitTextIntoLines=e=>{let t="",s=new Array,i=this.textSettings.curve?this.curveMaxWidth(0,e):this.rect.width;for(var a=0;a<this.words.length;a++){let n=""!==t?t+" "+this.words[a]:this.words[a];if(""===this.words[a]||this.lineWidth(n)>i&&n!==this.words[a]){if(s.push(t),t=""===this.words[a]?"":this.words[a],this.textSettings.curve&&(i=this.curveMaxWidth(s.length,e),i<0))return s}else t=n}return s.push(t),s},this.lineWidth=e=>{let t=0,s=this.textSettings.getLineSpacing(),i=this.textSettings.getLetterSpacing();if(this.isWordBackground){let a=e.split(" ").filter(e=>e);for(let e=0;e<a.length;e++)t+=this.measureTextWidth(a[e],i,!0)+2*this.textSettings.padding,t+=this.textSettings.padding+s;this.textSettings.curve&&"circle"===this.textSettings.curveType||(t-=this.textSettings.padding+s)}else this.textSettings.curve&&"circle"===this.textSettings.curveType?(t=this.measureTextWidth(e,i,!1),t+=this.measureTextWidth(" ",i,!1)):(t=this.measureTextWidth(e,i,!0),t+=2*this.textSettings.padding);return t},this.curveMaxWidth=(e,t)=>{if("arc"===this.textSettings.curveType){if(0===this.textSettings.curveAmount)return this.rect.width;let[e,s]=this.calculateArcRadius();return this.textSettings.curveAmount<0&&(s+=-t/4),s}if("circle"===this.textSettings.curveType){let s=this.rect.width/2-this.textSettings.padding-e*t;return s<t?-1:s*Math.PI*2}{let s=this.rect.width/2-e*t-(this.textSettings.background?this.textSettings.padding:0);return s<t?-1:s*Math.PI}},this.calculateArcHeight=()=>Math.round(this.rect.width/5*Math.abs(this.textSettings.curveAmount)),this.calculateArcRadius=()=>{let e=this.calculateArcHeight(),t=new h.A(0,e),s=new h.A(this.rect.width/2,0),i=new h.A(this.rect.width,e),a=(s.y-t.y)/(s.x-t.x),n=(i.y-s.y)/(i.x-s.x),r=-1*((a*n*(t.y-i.y)+n*(t.x+s.x)-a*(s.x+i.x))/(2*(n-a))-(t.x+s.x)/2)/a+(t.y+s.y)/2;return[r,Math.atan2(this.rect.width/2,r-e)*r*2]},this.drawHalfLine=(e,t,s,i,a)=>{var n;const r=this.textSettings.curveFlip,o=this.textSettings.curveSpread,h=this.textSettings.getLineSpacing(),c=this.textSettings.getLetterSpacing();let d=!1,p=this.rect.width/2-t,u=p*Math.PI*2;if(this.textSettings.background)if(this.textSettings.backgroundType===l.A.BACKGROUND_LINE){let e=p-this.textSettings.height/2;e>0&&(this.ctx.save(),this.ctx.strokeStyle=this.textSettings.backgroundColor,this.ctx.lineWidth=this.textSettings.height+2*this.textSettings.padding,this.ctx.beginPath(),this.ctx.ellipse(this.rect.width/2,r?0:this.rect.width/2,e,e,0,Math.PI,0,r),this.ctx.stroke(),this.ctx.restore())}else if(this.textSettings.backgroundType===l.A.BACKGROUND_WORD){let t=o?-u/4:-s/2,a=(u/2-s)/e.replace(/\s/g,"").length;this.ctx.save(),this.ctx.strokeStyle=this.textSettings.backgroundColor,this.ctx.lineWidth=this.textSettings.height+2*this.textSettings.padding;let n=e.split(" ").filter(e=>e);for(var m=0;m<n.length;m++){let e=this.measureTextWidth(n[m],c,!0);o&&(e+=a*n[m].length);let s=p-this.textSettings.height/2;if(s<this.textSettings.height)continue;let l=(e+2*this.textSettings.padding)/u*360*(Math.PI/180),d=t/u*360*(Math.PI/180),g=r?90:270,y=g*(Math.PI/180)+(r?-d:d),v=g*(Math.PI/180)+(r?-(l+d):l+d);if(this.ctx.beginPath(),this.ctx.arc(this.rect.width/2,r?0:this.rect.width/2,s,y,v,r),this.ctx.stroke(),this.textSettings.underline){const a=Math.ceil(.06*this.textSettings.height),n=Math.round(this.textSettings.padding+c);this.fill.addToCanvasStrokeStyle(this.ctx),this.ctx.lineWidth=a,d=(t+n)/u*360*(Math.PI/180),l=(e-2*c)/u*360*(Math.PI/180),y=g*(Math.PI/180)+(r?-d:d),v=g*(Math.PI/180)+(r?-(l+d):l+d);const o=Math.round(.5*(this.textSettings.baseline+a)+i);this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.ctx.beginPath(),this.ctx.arc(this.rect.width/2,r?0:this.rect.width/2,s+(r?o:-o),y,v,r),this.ctx.stroke(),this.ctx.globalCompositeOperation="source-over",this.ctx.strokeStyle=this.textSettings.backgroundColor,this.ctx.lineWidth=this.textSettings.height+2*this.textSettings.padding}t+=Math.round(e+3*this.textSettings.padding+h)}this.ctx.restore(),d=!0}let g=0;if(o){g=(u/2-s)/(d?e.replace(/\s/g,"").length:e.length+1)/2,s=d?u/2:u/2-2*g}if(this.textSettings.underline&&!this.isWordBackground){let e=p-this.textSettings.height/2;if(e<this.textSettings.height){const t=Math.ceil(.06*this.textSettings.height);let a=(s-2*Math.round(this.textSettings.padding+c))/(p*Math.PI*2)*360*(Math.PI/180/2),n=r?90:270,o=n*(Math.PI/180)-a,h=n*(Math.PI/180)+a;const l=Math.round(.5*(this.textSettings.baseline+t)+i);this.ctx.save(),this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.fill.addToCanvasStrokeStyle(this.ctx),this.ctx.lineWidth=t,this.ctx.beginPath(),r?this.ctx.arc(this.rect.width/2,0,e+l,o,h):this.ctx.arc(this.rect.width/2,this.rect.width/2,e-l,o,h),this.ctx.stroke(),this.ctx.restore()}}if(this.ctx.save(),e.length>0){const t=.5*this.rect.width,o=r?0:.5*this.rect.width;null===(n=this.fill)||void 0===n||n.addToCanvasFillStyle(this.ctx,-t,-o),this.ctx.translate(t,o);let l=r?p-this.textSettings.height-this.textSettings.ascent:-p-this.textSettings.ascent;this.ctx.textAlign="center";let m=r?-1:1,v=d?2*c+2*this.textSettings.padding:2*this.textSettings.padding+2*c;this.ctx.rotate((s-v)/u*Math.PI*-m),this.ctx.textAlign="center";for(var y=0;y<e.length;y++){if(d&&" "===e[y]){if(y>0&&" "===e[y-1])continue;this.ctx.rotate((3*this.textSettings.padding+h+c)/u*(2*Math.PI)*m);continue}let t=this.ctx.measureText(e[y]).width/2;this.ctx.rotate((t+g)/u*Math.PI*2*m),this.drawChar(e[y],0,l+i,a),this.ctx.rotate((t+c+g)/u*Math.PI*2*m)}}this.ctx.restore()},this.drawCircleLine=(e,t,s,i,a)=>{var n;const r=this.textSettings.curveFlip,o=this.textSettings.curveSpread,h=this.textSettings.getLineSpacing(),c=this.textSettings.getLetterSpacing();let d=!1,p=this.rect.width/2-t,u=p*Math.PI*2;if(this.textSettings.background)if(this.textSettings.backgroundType===l.A.BACKGROUND_LINE){let e=p-this.textSettings.height/2;e>this.textSettings.height&&(this.ctx.save(),this.ctx.strokeStyle=this.textSettings.backgroundColor,this.ctx.lineWidth=this.textSettings.height+2*this.textSettings.padding,this.ctx.beginPath(),this.ctx.ellipse(this.rect.width/2,this.rect.width/2,e,e,0,0,2*Math.PI),this.ctx.stroke(),this.ctx.restore())}else if(this.textSettings.backgroundType===l.A.BACKGROUND_WORD){let t=o?this.textSettings.padding/2+h/2-u/2:this.textSettings.padding/2+h/2-s/2,a=(u-s)/e.replace(/\s/g,"").length;this.ctx.save(),this.ctx.strokeStyle=this.textSettings.backgroundColor,this.ctx.lineWidth=this.textSettings.height+2*this.textSettings.padding;let n=e.split(" ").filter(e=>e);for(var m=0;m<n.length;m++){let e=this.measureTextWidth(n[m],c,!0);o&&(e+=a*n[m].length);let s=p-this.textSettings.height/2;if(s<this.textSettings.height)continue;let l=(e+2*this.textSettings.padding)/u*360*(Math.PI/180),d=t/u*360*(Math.PI/180),g=r?90:270,y=g*(Math.PI/180)+(r?-d:d),v=g*(Math.PI/180)+(r?-(l+d):l+d);if(this.ctx.beginPath(),this.ctx.arc(this.rect.width/2,this.rect.width/2,s,y,v,r),this.ctx.stroke(),this.textSettings.underline){const a=Math.ceil(.06*this.textSettings.height),n=Math.round(this.textSettings.padding+c);this.fill.addToCanvasStrokeStyle(this.ctx),this.ctx.lineWidth=a,d=(t+n)/u*360*(Math.PI/180),l=(e-2*c)/u*360*(Math.PI/180),y=g*(Math.PI/180)+(r?-d:d),v=g*(Math.PI/180)+(r?-(l+d):l+d);const o=Math.round(.5*(this.textSettings.baseline+a)+i);this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.ctx.beginPath(),this.ctx.arc(this.rect.width/2,this.rect.width/2,s+(r?o:-o),y,v,r),this.ctx.stroke(),this.ctx.globalCompositeOperation="source-over",this.ctx.strokeStyle=this.textSettings.backgroundColor,this.ctx.lineWidth=this.textSettings.height+2*this.textSettings.padding}t+=Math.round(e+3*this.textSettings.padding+h)}this.ctx.restore(),d=!0}let g=0;if(o){g=(u-s)/(d?e.replace(/\s/g,"").length:e.length+1)/2,s=d?u:u-2*g}if(this.textSettings.underline&&!this.isWordBackground){let e=p-this.textSettings.height/2;if(e>this.textSettings.height){const t=Math.ceil(.06*this.textSettings.height);let a=(s-2*Math.round(this.textSettings.padding+c))/(p*Math.PI*2)*360*(Math.PI/180/2),n=r?90:270,o=n*(Math.PI/180)-a,h=n*(Math.PI/180)+a;const l=Math.round(.5*(this.textSettings.baseline+t)+i);this.ctx.save(),this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.fill.addToCanvasStrokeStyle(this.ctx),this.ctx.lineWidth=t,this.ctx.beginPath(),r?this.ctx.arc(this.rect.width/2,this.rect.width/2,e+l,o,h):this.ctx.arc(this.rect.width/2,this.rect.width/2,e-l,o,h),this.ctx.stroke(),this.ctx.restore()}}if(this.ctx.save(),e.length>0){const t=.5*this.rect.width,o=.5*this.rect.height;null===(n=this.fill)||void 0===n||n.addToCanvasFillStyle(this.ctx,-t,-o),this.ctx.translate(t,o);let l=r?p-this.textSettings.height-this.textSettings.ascent:-p-this.textSettings.ascent,m=r?-1:1,v=d?2*c+3*this.textSettings.padding+h:this.measureTextWidth(" ",c,!0);this.ctx.rotate((s-v)/u*Math.PI*-m),this.ctx.textAlign="center";for(var y=0;y<e.length;y++){if(d&&" "===e[y]){if(y>0&&" "===e[y-1])continue;this.ctx.rotate((3*this.textSettings.padding+h+c)/u*(2*Math.PI)*m);continue}let t=this.ctx.measureText(e[y]).width/2;this.ctx.rotate((t+g)/u*Math.PI*2*m),this.drawChar(e[y],0,l+i,a),this.ctx.rotate((t+c+g)/u*Math.PI*2*m)}}this.ctx.restore()},this.drawArcLine=(e,t,s,i,a)=>{var n;const r=this.textSettings.getLineSpacing(),o=this.textSettings.getLetterSpacing();let[h,c]=this.calculateArcRadius(),d=h-t,p=d*Math.PI*2,u=this.textSettings.curveAmount<0,m=!1;if(this.textSettings.background)if(this.textSettings.backgroundType===l.A.BACKGROUND_WORD){let t=-s/2;this.ctx.save(),this.ctx.strokeStyle=this.textSettings.backgroundColor,this.ctx.lineWidth=this.textSettings.height+2*this.textSettings.padding;let a=e.split(" ").filter(e=>e);for(var g=0;g<a.length;g++){let e=this.measureTextWidth(a[g],o,!0),s=d-this.textSettings.height/2;if(s<this.textSettings.height)continue;let n=(e+2*this.textSettings.padding)/p*360*(Math.PI/180),c=t/p*360*(Math.PI/180),l=u?this.canvas.height-h:h,m=u?90:270,y=m*(Math.PI/180)+(u?-c:c),v=m*(Math.PI/180)+(u?-(n+c):n+c);if(this.ctx.beginPath(),u?this.ctx.arc(this.rect.width/2,l,s,v,y):this.ctx.arc(this.rect.width/2,l,s,y,v),this.ctx.stroke(),this.textSettings.underline){const a=Math.ceil(.06*this.textSettings.height),r=Math.round(this.textSettings.padding+o);this.fill.addToCanvasStrokeStyle(this.ctx),this.ctx.lineWidth=a,c=(t+r)/p*360*(Math.PI/180),n=(e-2*o)/p*360*(Math.PI/180),y=m*(Math.PI/180)+(u?-c:c),v=m*(Math.PI/180)+(u?-(n+c):n+c);const h=Math.round(.5*(this.textSettings.baseline+a)+i);this.ctx.beginPath(),this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),u?this.ctx.arc(this.rect.width/2,l,s+h,v,y):this.ctx.arc(this.rect.width/2,l,s-h,y,v),this.ctx.stroke(),this.ctx.globalCompositeOperation="source-over",this.ctx.strokeStyle=this.textSettings.backgroundColor,this.ctx.lineWidth=this.textSettings.height+2*this.textSettings.padding}t+=Math.round(e+3*this.textSettings.padding+r)}this.ctx.restore(),m=!0}else if(this.textSettings.backgroundType===l.A.BACKGROUND_LINE){let e=d-this.textSettings.height/2;if(e>this.textSettings.height){let t=s/(d*Math.PI*2)*360*(Math.PI/180/2),i=u?this.canvas.height-h:h,a=u?90:270,n=a*(Math.PI/180)-t,r=a*(Math.PI/180)+t;this.ctx.save(),this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.ctx.strokeStyle=this.textSettings.backgroundColor,this.ctx.lineWidth=this.textSettings.height+2*this.textSettings.padding,this.ctx.beginPath(),this.ctx.arc(this.rect.width/2,i,e,n,r),this.ctx.stroke(),this.ctx.restore()}}if(this.textSettings.underline&&!this.isWordBackground){let e=d-this.textSettings.height/2;if(e>this.textSettings.height){const t=Math.ceil(.06*this.textSettings.height);let a=(s-2*Math.round(this.textSettings.padding+o))/(d*Math.PI*2)*360*(Math.PI/180/2),n=u?this.canvas.height-h:h,r=u?90:270,c=r*(Math.PI/180)-a,l=r*(Math.PI/180)+a;const p=Math.round(.5*(this.textSettings.baseline+t)+i);this.ctx.save(),this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.fill.addToCanvasStrokeStyle(this.ctx),this.ctx.lineWidth=t,this.ctx.beginPath(),u?this.ctx.arc(this.rect.width/2,n,e+p,c,l):this.ctx.arc(this.rect.width/2,n,e-p,c,l),this.ctx.stroke(),this.ctx.restore()}}if(this.ctx.save(),e.length>0){let t=u?-1:1,c=u?d-this.textSettings.height-this.textSettings.ascent:-d-this.textSettings.ascent;this.ctx.textAlign="center";const l=.5*this.ctx.canvas.width,g=u?this.canvas.height-h:h;this.ctx.translate(l,g),null===(n=this.fill)||void 0===n||n.addToCanvasFillStyle(this.ctx,-l,-g),this.ctx.rotate((s-2*o-2*this.textSettings.padding)/p*Math.PI*-t);for(var y=0;y<e.length;y++){if(m&&" "===e[y]){if(y>0&&" "===e[y-1])continue;this.ctx.rotate((3*this.textSettings.padding+r+o)/p*(2*Math.PI)*t);continue}let s=this.ctx.measureText(e[y]).width;s/p*Math.PI*2>5e-4?(this.ctx.rotate(s/2/p*Math.PI*2*t),this.drawChar(e[y],0,c+i,a),this.ctx.rotate((s/2+o)/p*Math.PI*2*t)):(this.drawChar(e[y],s/2,c+i,a),this.ctx.rotate((s+o)/p*Math.PI*2*t))}}this.ctx.restore()},this.drawLine=(e,t,s,i,a,n=!1)=>{var r,o;let h=0,c=0;const d=this.textSettings.getLineSpacing(),p=this.textSettings.getLetterSpacing(),u=Math.ceil(.06*this.textSettings.height),m=Math.round(this.textSettings.padding+p),g=e.split(" ");if("center"==this.textSettings.align?h=Math.round((this.rect.width-s)/2):"right"==this.textSettings.align?h=Math.round(this.rect.width-s):"justify"==this.textSettings.align&&g.length>1&&s/this.rect.width>.7&&(c=this.isWordBackground?(this.rect.width-s)/(e.split(" ").filter(e=>e).length-1):(this.rect.width-s)/(g.length-1),s=this.rect.width),this.textSettings.background&&this.textSettings.backgroundType===l.A.BACKGROUND_LINE&&(this.ctx.fillStyle=this.textSettings.backgroundColor,this.ctx.fillRect(h,t-this.textSettings.padding,Math.round(s),this.textSettings.height+2*this.textSettings.padding),null===(r=this.fill)||void 0===r||r.addToCanvasFillStyle(this.ctx)),this.textSettings.underline&&!this.isWordBackground){const e=Math.ceil(.06*this.textSettings.height),a=Math.round(this.textSettings.padding+p);this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.ctx.fillRect(h+a,t+this.textSettings.baseline+e+i,s-2*a,e),this.ctx.globalCompositeOperation="source-over"}if(0!==c||this.isWordBackground){let e=this.ctx.measureText(" ").width;for(let s=0;s<g.length;s++){const n=this.measureTextWidth(g[s],p,!0);if(this.isWordBackground){if(!g[s])continue;this.ctx.fillStyle=this.textSettings.backgroundColor,this.ctx.fillRect(h,t-this.textSettings.padding,Math.round(n+2*this.textSettings.padding),this.textSettings.height+2*this.textSettings.padding),null===(o=this.fill)||void 0===o||o.addToCanvasFillStyle(this.ctx),e=3*this.textSettings.padding+d,this.textSettings.underline&&(this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.ctx.fillRect(h+m,t+this.textSettings.baseline+u+i,Math.round(n+2*this.textSettings.padding)-2*m,u),this.ctx.globalCompositeOperation="source-over")}0===p?this.drawText(g[s],h+this.textSettings.padding+p,t-this.textSettings.ascent+i,a):this.drawSpacedText(g[s],h+this.textSettings.padding+p,t-this.textSettings.ascent+i,p,a),h+=Math.round(n+e+c)}}else 0!==p||n?this.drawSpacedText(e,h+this.textSettings.padding+p,t-this.textSettings.ascent+i,p,a):this.drawText(e,h+this.textSettings.padding+p,t-this.textSettings.ascent+i,a)},this.drawSpacedText=(e,t,s,i,a)=>{let n=0,r="";for(;n<e.length;)r=e[n++],this.drawChar(r,t,s,a),t+=this.ctx.measureText(r).width+i},this.drawText=(e,t,s,i)=>{this.textSettings.outline&&0===i.x&&0===i.y&&this.ctx.strokeText(e,t,s),this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.ctx.fillText(e,t,s),this.ctx.globalCompositeOperation="source-over",!this.textSettings.outline||0===i.x&&0===i.y||this.ctx.strokeText(e,t+i.x,s+i.y)},this.drawChar=(e,t,s,i)=>{this.textSettings.outline&&0===i.x&&0===i.y&&this.ctx.strokeText(e,t,s),this.isPunchOut&&(this.ctx.globalCompositeOperation="destination-out"),this.ctx.fillText(e,t,s),this.ctx.globalCompositeOperation="source-over",!this.textSettings.outline||0===i.x&&0===i.y||this.ctx.strokeText(e,t+i.x,s+i.y)},this.measureTextWidth=(e,t,s)=>{if(!e)return 0;let i=0;if(0!==t){for(let t=0;t<e.length;t++)i+=this.ctx.measureText(e[t]).width;i+=e.length*t}else i=this.ctx.measureText(e).width;return s&&(i+=t),i},this.position=(e,t)=>{this.rect&&(void 0!==e&&(this.rect.x=e),void 0!==t&&(this.rect.y=t),this.bect&&(this.bect.x=this.rect.x-4*this.textSettings.padding,this.bect.y=this.rect.y-4*this.textSettings.padding))},this.scale=(e,t)=>{this.textSettings.setSize(Math.round(this.textSettings.size*t)),this.rect.x=Math.round(this.rect.x*e),this.rect.y=Math.round(this.rect.y*t),this.rect.width=Math.round(this.rect.width*e),this.render()},this.calculate=(e,t)=>{this.rect.x=Math.round(e.x),this.rect.width=Math.round(t.x-e.x),this.rect.width<20&&(this.rect.width=20),this.render()},this.setWidth=e=>{this.rect.width=Math.round(e),this.rect.width<20&&(this.rect.width=20),this.render()},this.getHeight=()=>this.textSettings.height,this.setHeightScale=e=>{let t=Math.round(this.textSettings.size*e);this.setTextSize(t>1e3?1e3:t)},this.rotate=e=>{this.rect.rotation+=e?-90:90},this.rasterize=()=>{let e=this.baked?this.baked:this.canvas,t=this.bect?this.bect.clone():this.rect.clone();const s=new c.A(i.Os(),this.settings.name,e,t,this.settings.locked);return s.settings=Object.assign({},this.settings),s.applyTransform(),s},this.clone=(e=!1)=>{let t=new p(e?this.id:i.Os(),this.text,this.rect.clone(),this.textSettings.clone());return t.settings=Object.assign({},this.settings),t.animation=d.A.clone(this.animation),t.rect=this.rect.clone(),t.canvas=i.oM(this.canvas),t.prepare(),t},this.textSettings=u,this.text=t,this.rect=s}drawCurveLine(e,t,s,i,a){switch(this.textSettings.curveType){case"arc":this.drawArcLine(e,t,s,i,a);break;case"circle":this.drawCircleLine(e,t,s,i,a);break;case"half":this.drawHalfLine(e,t,s,i,a)}}}},54476:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Configuration=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Configuration=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"avs",baseName:"avs",type:"Avs"},{name:"cardHolderName",baseName:"cardHolderName",type:"Configuration.CardHolderNameEnum"},{name:"installments",baseName:"installments",type:"InstallmentsNumber"},{name:"shopperInput",baseName:"shopperInput",type:"ShopperInput"}],function(e){let t;!function(e){e.None="NONE",e.Optional="OPTIONAL",e.Required="REQUIRED"}(t=e.CardHolderNameEnum||(e.CardHolderNameEnum={}))}(s=t.Configuration||(t.Configuration={}))},54477:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceErrorDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ServiceErrorDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"errorCode",baseName:"errorCode",type:"string"},{name:"errorType",baseName:"errorType",type:"string"},{name:"message",baseName:"message",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"}]},54671:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaypalUpdateOrderResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaypalUpdateOrderResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"paymentData",baseName:"paymentData",type:"string"},{name:"status",baseName:"status",type:"PaypalUpdateOrderResponse.StatusEnum"}],function(e){let t;!function(e){e.Error="error",e.Success="success"}(t=e.StatusEnum||(e.StatusEnum={}))}(s=t.PaypalUpdateOrderResponse||(t.PaypalUpdateOrderResponse={}))},54738:(e,t,s)=>{s.d(t,{$e:()=>x,Al:()=>d,B3:()=>M,D9:()=>J,Dk:()=>re,E5:()=>he,H5:()=>N,HO:()=>f,Jn:()=>te,KP:()=>u,Nw:()=>w,ON:()=>S,Os:()=>H,Ov:()=>U,P1:()=>G,PG:()=>E,Q5:()=>oe,RZ:()=>p,SE:()=>F,Sg:()=>h,T6:()=>X,TL:()=>q,VI:()=>b,XP:()=>ee,YD:()=>l,aE:()=>v,bD:()=>g,bK:()=>L,bi:()=>c,eD:()=>Z,fu:()=>m,j4:()=>D,jh:()=>j,k8:()=>C,lz:()=>A,m$:()=>ne,oM:()=>I,oR:()=>se,oc:()=>z,p:()=>R,p3:()=>ae,q5:()=>o,qE:()=>$,r$:()=>k,r0:()=>V,sg:()=>K,tN:()=>T,tm:()=>P,tn:()=>W,uk:()=>Q,wc:()=>ie,y2:()=>_,yu:()=>y,yz:()=>O,z:()=>r,zR:()=>B});var i=s(21742),a=s(40963),n=s(41915);const r="rgba(255,255,255, 0.7)",o="rgb(255,255,255)",h="rgb(32,209,139)",c="rgb(0,163,218)",l="rgb(209,72,14)",d="rgb(255,0,255)",p="rgb(67,201,143)",u="rgb(75,75,75)",m="rgb(148,148,148)";function g(e,t){if(void 0===t)return;if(t instanceof e)return t;const s=Object.create(e.prototype);return Object.assign(s,t)}function y(e,t,s,i,a=!0){let n;return n=e/t>s/i?s/e:i/t,a&&n>1?1:n}function v(e,t,s,i){return e/t<s/i?s/e:i/t}function f(e,t,s,i,a,n){return n>=t&&n<t+i&&a>=e&&a<e+s}function b(e,t){e<0&&(e=1),t<0&&(t=1);let s=document.createElement("canvas");return s.width=e,s.height=t,s}function w(e,t){e<0&&(e=1),t<0&&(t=1);let s=document.createElement("canvas");return s.width=e,s.height=t,s}async function A(e){if(!e)return;const t=URL.createObjectURL(e),s=await x(t);return URL.revokeObjectURL(t),s}function x(e,t=!1){if(void 0!==e)return new Promise((s,i)=>{if(!e)return console.log("Invalid URL in dataURLToCanvas"),void s(void 0);const a=t?b(100,100):w(100,100),n=a.getContext("2d"),r=new Image;r.onerror=e=>i(e),r.onload=()=>{a.width=r.width,a.height=r.height,n.drawImage(r,0,0),s(a)},r.src=e})}function k(e,t){if(!e)return;const s=t||new a.A(0,0,e.width,e.height),i=w(s.width,s.height);return i.getContext("2d").drawImage(e,-s.x,-s.y),new Promise((e,t)=>{i||e(void 0),i.toBlob(s=>{const i=new FileReader;i.onerror=e=>t(e),i.onload=()=>e(i.result),i.readAsDataURL(s)},"image/jpeg",1)})}function S(e,t){if(!e)return;const s=t||new a.A(0,0,e.width,e.height);return e.getContext("2d").getImageData(s.x,s.y,s.width,s.height)}function E(e,t){if(!e)return;const s=(null==t?void 0:t.rect)||new a.A(0,0,e.width,e.height),i=w(s.width,s.height);return i.getContext("2d").drawImage(e,-s.x,-s.y),new Promise((e,s)=>i.toBlob(e,null==t?void 0:t.type,null==t?void 0:t.quality))}function T(e,t,s){if(!e||!t)return;let i=e.getContext("2d");i.save(),i.globalCompositeOperation="copy",i.drawImage(t,s.x,s.y),i.restore(),i=void 0}function C(e,t,s=0,i=!1){let n=i?b(e.width,e.height):w(e.width,e.height),r=n.getContext("2d");if(r.drawImage(e,0,0,e.width,e.height),r=void 0,n.width>t||n.height>t){let s=a.A.bestFit(e.width,e.height,t,t);n=P(n,s.width,s.height)}return 0!==s&&(n=F(n,s)),n}function M(e,t,s){if(!e)return;let i=w(t,s);var a=e.getContext("2d").getImageData(0,0,e.width,e.height),n=new Int32Array(a.data.buffer),r=e.width,o=e.height,h=i.width,c=i.height;let l=i.getContext("2d");var d=l.getImageData(0,0,i.width,i.height),p=new Int32Array(d.data.buffer);const u=h/r,m=c/o;for(let g=0;g<c;){const e=r*~~(g/m),t=h*g++;for(let s=0;s<h;)p[t+s++]=n[e+~~(s/u)]}return l.putImageData(d,0,0),i}function P(e,t,s){if(!e)return;if(t>e.width||s>e.width)return N(e,t,s);if(t<4096&&s<4096&&(e.width>4096||e.height>4096)){let t=a.A.bestFit(e.width,e.height,4096,4096);e=N(e,t.width,t.height)}let i=w(t,s);var n=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height).data,r=e.width,o=e.height,h=i.width,c=i.height;let l=i.getContext("2d");for(var d=l.getImageData(0,0,i.width,i.height),p=d.data,u=r/h,m=o/c,g=Math.ceil(u/2),y=Math.ceil(m/2),v=0;v<c;v++)for(var f=0;f<h;f++){for(var b=4*(f+v*h),A=0,x=0,k=0,S=0,E=0,T=0,C=(v+.5)*m,M=Math.floor(v*m);M<(v+1)*m;M++)for(var P=Math.abs(C-(M+.5))/y,D=(f+.5)*u,L=P*P,R=Math.floor(f*u);R<(f+1)*u;R++){var _=Math.abs(D-(R+.5))/g,I=Math.sqrt(L+_*_);I>=-1&&I<=1&&(A=2*I*I*I-3*I*I+1)>0&&(k+=A*n[_=4*(R+M*r)],S+=A*n[_+1],E+=A*n[_+2],T+=A*n[_+3],x+=A)}p[b]=k/x,p[b+1]=S/x,p[b+2]=E/x,p[b+3]=T/x}return l.putImageData(d,0,0),i}async function D(e,t,s,i){var a;if(!e)return;if(t>e.width||s>e.width)return N(e,t,s);let n=null!==(a=i)&&void 0!==a?a:w(t,s);var r=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,e.width,e.height).data,o=e.width,h=e.height,c=n.width,l=n.height;const d=n.getContext("2d");for(var p=d.getImageData(0,0,n.width,n.height),u=p.data,m=o/c,g=h/l,y=Math.ceil(m/2),v=Math.ceil(g/2),f=0;f<l;f++)for(var b=0;b<c;b++){for(var A=4*(b+f*c),x=0,k=0,S=0,E=0,T=0,C=0,M=(f+.5)*g,P=Math.floor(f*g);P<(f+1)*g;P++)for(var D=Math.abs(M-(P+.5))/v,L=(b+.5)*m,R=D*D,_=Math.floor(b*m);_<(b+1)*m;_++){var I=Math.abs(L-(_+.5))/y,F=Math.sqrt(R+I*I);F>=-1&&F<=1&&(x=2*F*F*F-3*F*F+1)>0&&(S+=x*r[I=4*(_+P*o)],E+=x*r[I+1],T+=x*r[I+2],C+=x*r[I+3],k+=x)}u[A]=S/k,u[A+1]=E/k,u[A+2]=T/k,u[A+3]=C/k}return d.putImageData(p,0,0),n}function N(e,t,s,i=!0,a){if(!e)return;t<1&&(t=1),s<1&&(s=1);let n=null!=a?a:w(t,s);var r=n.getContext("2d");return r.imageSmoothingQuality="high",r.imageSmoothingEnabled=i,r.drawImage(e,0,0,n.width,n.height),r=void 0,n}function L(e,t){let s=w(t.width,t.height),i=s.getContext("2d");return i.drawImage(e,-t.x,-t.y),i=void 0,s}function R(e,t,s){let i=w(s.width,s.height),a=i.getContext("2d");return a.imageSmoothingQuality="high",a.imageSmoothingEnabled=!0,a.drawImage(e,t.x-s.x,t.y-s.y,t.width,t.height),a=void 0,i}function _(e,t){if(e){var s=w(t.width,t.height),i=s.getContext("2d");return i.drawImage(e,-t.x,-t.y),i=void 0,s}}function I(e,t=!1){if(e){var s=t||e instanceof HTMLCanvasElement?b(e.width,e.height):w(e.width,e.height),i=s.getContext("2d");return i.drawImage(e,0,0),i=void 0,s}}function F(e,t){if(e){var s=w(e.width,e.height),i=s.getContext("2d");return 180!==t&&(s.width=e.height,s.height=e.width),i.translate(s.width/2,s.height/2),i.rotate(t*Math.PI/180),i.drawImage(e,-e.width/2,-e.height/2),i.setTransform(1,0,0,1,0,0),i=void 0,s}}function z(e,t,s){let i=w(s.width,s.height),a=i.getContext("2d");return a.save(),a.translate(s.width/2,s.height/2),a.rotate(t*Math.PI/180),a.drawImage(e,-e.width/2,-e.height/2),a.restore(),a=null,i}function O(e,t){if(e){var s=w(e.width,e.height),i=s.getContext("2d");return i.save(),t?(i.scale(1,-1),i.drawImage(e,0,-e.height,e.width,e.height)):(i.scale(-1,1),i.drawImage(e,-e.width,0,e.width,e.height)),i.restore(),i=void 0,s}}function q(e){if(!e)return;const t=e.width,s=e.height;return B(e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,t,s))}function B(e){if(!e)return;const t=e.width,s=e.height;let i,n,r=new Uint32Array(e.data.buffer),o=-1,h=-1,c=-1,l=-1;for(n=0;n<s;++n){for(i=0;i<t;++i)if(r[i+n*t]>0){h=n;break}if(-1!==h)break}if(-1!==h){for(n=s-1;n>=h;--n){for(i=0;i<t;++i)if(r[i+n*t]>0){l=n+1;break}if(-1!==l)break}for(i=0;i<t;++i){for(n=h;n<=l;++n)if(r[i+n*t]>0){o=i;break}if(-1!==o)break}for(i=t-1;i>=o;--i){for(n=h;n<=l;++n)if(r[i+n*t]>0){c=i+1;break}if(-1!==c)break}return new a.A(o,h,c-o,l-h)}}function U(e){let t=e/1024;return t>1024?(t/1024).toFixed(1)+"mb":t>100?Math.round(t)+"kb":Math.round(10*t)/10+"kb"}function H(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function V(){return"xxxxyxxx4xxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function $(e,t,s){return isNaN(e)?t:Math.min(Math.max(e,t),s)}const j=(e,t,s)=>t*s+e*(1-s);function G(e){let t=!1,s=e.getContext("2d").getImageData(0,0,e.width,e.height).data;for(var i=0;i<s.length;i+=4)if(s[i+3]<255){t=!0;break}return t}function W(e){let t=new n.A(0,255);var s=Array(256);s.fill(0);var i=e.getContext("2d").getImageData(0,0,e.width,e.height).data;for(let n=0;n<i.length;n+=4)s[i[n]]+=1,s[i[n+1]]+=1,s[i[n+2]]+=1;var a=Math.round(e.width*e.height/1e3);let r;for(r=0;r<256;++r)if(s[r]>a){t.x=r;break}for(r=255;r>=0;--r)if(s[r]>a){t.y=r;break}return t.x>100&&(t.x=100),t.y<155&&(t.y=155),t}function X(e){let t=1,s=1,i=e.width<500&&e.height<500?e:N(e,500,500);const a=i.width,n=i.height;let r,o,h,c,l,d,p,u,m,g=i.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,a,n).data;for(l=n;l--;)for(c=a;c--;)d=4*(l*a+c),r=g[d],o=g[d+1],h=g[d+2],p=Math.min(r,o,h),u=Math.max(r,o,h),s+=u/255,m=u-p,m&&(t+=m/u);return t=(t+s)/(i.width*i.height*2),t}const Y={};function K(e,t,s){window.clearTimeout(Y[e]),Y[e]=window.setTimeout(()=>{delete Y[e],s()},t)}const Z=(e,t)=>{let s;return(...i)=>{clearTimeout(s),s=window.setTimeout(()=>t(...i),e)}};function Q(e){return new Promise((t,s)=>{setTimeout(()=>t(),e)})}function J(){return new Promise((e,t)=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{e()})})})}function ee(e){const t=((new Date).getTime()-e.getTime())/1e3;if(t<0)return"It's the future man";const s=Math.floor(t/86400);if(s>=1)return s>1?(0,i.A)("sinceDays",s):(0,i.A)("sinceDay");const a=Math.floor(t/3600);if(a>=1)return a>1?(0,i.A)("sinceHours",a):(0,i.A)("sinceHour");const n=Math.floor(t/60);return n>=1?n>1?(0,i.A)("sinceMinutes",n):(0,i.A)("sinceMinute"):(0,i.A)("sinceNow")}function te(e){if(!e)return!1;if("TEXTAREA"===e.nodeName)return!0;if("INPUT"===e.nodeName){const t=e,s=t.type.toLowerCase();return"text"===s||"number"===s||"url"===s||!!t.contentEditable}return!1}function se(e){let t=new n.A(e.offsetLeft,e.offsetTop);for(;e.offsetParent&&(t.x=t.x+e.offsetParent.offsetLeft,t.y=t.y+e.offsetParent.offsetTop,e!=document.getElementsByTagName("body")[0]);)e=e.offsetParent;return t}class ie{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}then(e,t){return this.promise.then(e,t)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}}Symbol.toStringTag;class ae extends Error{constructor(){super("Promise canceled")}}class ne extends ie{constructor(e,t){super(),this.canceled=!1,this.isCanceled=()=>this.canceled,this.cancel=()=>{this.canceled||(this.canceled=!0,this.cancelCallback(),this.reject(new ae))},this.cancelCallback=t,(async()=>{try{this.resolve(await e())}catch(t){this.reject(t)}})()}}const re=e=>e.substring(0,e.lastIndexOf("."))||e,oe=e=>{const t=e.lastIndexOf("("),s=e.lastIndexOf(")"),i=()=>{const t=e.lastIndexOf(".");return`${e.slice(0,t)} (1)${e.slice(t)}`};if(!t||!s)return i();const a=parseInt(e.slice(t+1,s));return a?e.slice(0,t+1)+(a+1)+e.slice(s):i()},he=e=>new Promise(t=>{const s=new FileReader;s.onloadend=function(e){const s=new Uint8Array(e.target.result).subarray(0,12),i=Array.from(s,e=>e.toString(16).padStart(2,"0")).join("");t(i.startsWith("000000186674797068656963"))},s.readAsArrayBuffer(e.slice(0,12))})},54742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentVerificationRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentVerificationRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"payload",baseName:"payload",type:"string"}]},54843:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BalanceCheckResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.BalanceCheckResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"balance",baseName:"balance",type:"Amount"},{name:"fraudResult",baseName:"fraudResult",type:"FraudResult"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"refusalReason",baseName:"refusalReason",type:"string"},{name:"resultCode",baseName:"resultCode",type:"BalanceCheckResponse.ResultCodeEnum"},{name:"transactionLimit",baseName:"transactionLimit",type:"Amount"}],function(e){let t;!function(e){e.Success="Success",e.NotEnoughBalance="NotEnoughBalance",e.Failed="Failed"}(t=e.ResultCodeEnum||(e.ResultCodeEnum={}))}(s=t.BalanceCheckResponse||(t.BalanceCheckResponse={}))},54907:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleNoise")),this.setContent((0,n.T)("div",{id:"noise-slider"})),new a.A("noise-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("noise",e)})}}},54975:(e,t,s)=>{s.d(t,{A:()=>D});var i=s(42268),a=s(21742),n=s(54738),r=s(7324),o=s(40963),h=s(75770),c=s(82042),l=s(15818),d=s(22866),p=s(29755),u=s(66827),m=s(26651),g=s(41915),y=s(81937),v=s(79453),f=s(37699),b=s(93771),w=s(3514);class A{constructor(e,t,s,r){if(this.addLocalFont=()=>{(0,b.XN)(!0).then(async e=>{for(var t,s=0;t=e[s];s++)await(0,b.Tq)(t,this.stage);this.removeEventHandlers(),this.showFontList()})},this.showFontList=()=>{(0,i.Ay)("font-wrap").classList.add("show"),(0,i.Ay)("font-wrap").classList.add("modal"),this.populateFonts(),this.setEventHandlers(),this.selected&&this.setFont(this.selected)},this.hideFontList=(e=!0)=>{(0,i.Ay)("font-wrap").classList.remove("show"),(0,i.Ay)("font-wrap").classList.remove("modal"),e&&this.inFocus&&this.inFocus.getAttribute("data")!==this.selected&&this.loadFont(this.selected,!0),this.selected&&(0,i.Ay)("font:"+this.selected)&&(0,i.Ay)("font:"+this.selected).classList.remove("selected"),this.removeEventHandlers()},this.populateFonts=()=>{const e=(0,i.Ay)("font-list-holder-ss-content");e.childElementCount!==f.A.fontList.length&&(e.innerHTML="",f.A.fontList.forEach(t=>{let s=document.createElement("div");t.local?s.append((0,i.T)("img",{src:URL.createObjectURL(t.thumb),title:t.name,className:"thumb ic",loading:"lazy",width:200,height:40}),(0,i.T)("img",{src:"/img/icon/close.svg",title:"Remove font",className:"close ic",onclick:e=>this.removeFont(e,"font:"+t.name)})):s.append((0,i.T)("img",{src:"/font/"+t.short+".png",title:t.name,className:"thumb ic",loading:"lazy",width:200,height:40})),s.setAttribute("data",t.name),s.setAttribute("id","font:"+t.name),s.classList.add("font-pod"),t.premium&&s.classList.add("premium"),e.appendChild(s)}))},this.setEventHandlers=()=>{document.addEventListener("keydown",this.keyPress,!0);const e=document.querySelectorAll("#font-list-holder div.font-pod");for(let t=0;t<e.length;t++)e[t].addEventListener("click",this.selectFont,!1),e[t].addEventListener("mouseenter",this.enterFont,!1)},this.removeEventHandlers=()=>{document.removeEventListener("keydown",this.keyPress,!0);const e=document.querySelectorAll("#font-list-holder div.font-pod");for(let t=0;t<e.length;t++)e[t].removeEventListener("click",this.selectFont,!1),e[t].removeEventListener("mouseenter",this.enterFont,!1)},this.dragStart=e=>{e.stopPropagation(),this.p=new g.A(e.clientX,e.clientY),this.d=new g.A(this.fontList.offsetLeft,this.fontList.offsetTop),document.addEventListener("mousemove",this.dragMove,!0),document.addEventListener("mouseup",this.dragEnd,!0)},this.dragMove=e=>{e.stopPropagation(),this.fontList.style.left=Math.round(this.d.x+(e.clientX-this.p.x))+"px",this.fontList.style.top=Math.round(this.d.y+(e.clientY-this.p.y))+"px"},this.dragEnd=e=>{e.stopPropagation(),this.p=void 0,document.removeEventListener("mousemove",this.dragMove,!0),document.removeEventListener("mouseup",this.dragEnd,!0)},this.keyPress=e=>{var t;const s=()=>{const e=document.querySelectorAll("#font-list-holder div.font-pod"),t=(0,i.Ay)("font-search").value;this.inFocus=void 0;for(let s=0;s<e.length;s++){e[s].getAttribute("data").toLowerCase().startsWith(t)?(e[s].style.display="block",this.inFocus||(this.inFocus=e[s])):e[s].style.display="none"}};if(e.ctrlKey||"Backspace"===e.key||"Delete"===e.key)n.sg("preview",200,s);else{if(e.preventDefault(),e.stopPropagation(),null===(t=this.inFocus)||void 0===t||t.classList.remove("focus"),!this.inFocus){const e=document.querySelectorAll("#font-list-holder div.font-pod");this.inFocus=e[0]}if("ArrowUp"===e.key){for(this.inFocus=this.inFocus.previousElementSibling;this.inFocus&&"none"===this.inFocus.style.display;)this.inFocus=this.inFocus.previousElementSibling;if(!this.inFocus){const e=document.querySelectorAll("#font-list-holder div.font-pod");this.inFocus=e[e.length-1]}}else if("ArrowDown"===e.key){for(this.inFocus=this.inFocus.nextElementSibling;this.inFocus&&"none"===this.inFocus.style.display;)this.inFocus=this.inFocus.nextElementSibling;if(!this.inFocus){const e=document.querySelectorAll("#font-list-holder div.font-pod");this.inFocus=e[0]}}else{if("Escape"===e.key)return void this.hideFontList();if("Enter"===e.key)this.inFocus&&this.inFocus.getAttribute("data")!==this.selected&&(this.inFocus.classList.contains("premium")&&"premium"!==(null===v.N||void 0===v.N?void 0:v.N.subscriptionAccess)&&!this.stage.fresco.block||(this.loadFont(this.inFocus.getAttribute("data")),this.hideFontList(!1)),this.hideFontList(!0));else{let t=(0,i.Ay)("font-search").value;if(e.key.length>1)return;t+=e.key,(0,i.Ay)("font-search").value=t,s()}}if(this.inFocus){this.inFocus.classList.add("focus");const e=this.inFocus.getAttribute("data");this.inFocus.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"}),n.sg("preview",200,()=>{this.loadFont(e,!0)})}}},this.lx=0,this.ly=0,this.enterFont=e=>{var t;if(e.clientX===this.lx&&e.clientY===this.ly)return;this.lx=e.clientX,this.ly=e.clientY,null===(t=this.inFocus)||void 0===t||t.classList.remove("focus"),this.inFocus=e.currentTarget,this.inFocus.classList.add("focus");const s=this.inFocus.getAttribute("data");n.sg("preview",200,()=>{this.loadFont(s,!0)})},this.selectFont=e=>{let t=e.currentTarget,s=t.classList.contains("premium"),i=t.getAttribute("data");!s||"premium"===(null===v.N||void 0===v.N?void 0:v.N.subscriptionAccess)||this.stage.fresco.block?(this.loadFont(i),this.hideFontList(!1)):new w.A("font","premium")},this.removeFont=(e,t)=>{e.preventDefault(),e.stopPropagation();let s=(0,i.Ay)(t);f.A.removeLocalFontDesc(s.getAttribute("data")),s.remove()},this.loadFont=async(e,t=!1)=>{try{await f.A.loadFont(e);if(t)this.preview(e);else{const t=this.selected;t!==e&&(this.setFont(e),this.callback(e,t))}}catch(s){console.error("Could not load font",e,s)}},this.cleanUp=()=>{this.hideFontList(),(0,i.Ay)("font-search").blur(),this.removeEventHandlers(),this.holder.removeEventListener("click",this.showFontList,!1)},this.stage=e,this.holder=t,this.preview=r,this.callback=s,this.holder.addEventListener("click",this.showFontList,!1),this.selected=f.A.fontList[0].name,!(0,i.Ay)("font-list")){let e=(0,i.T)("div",{id:"font-wrap",onmousedown:e=>{e.target===(0,i.Ay)("font-wrap")&&this.hideFontList()}},(0,i.T)("div",{id:"font-list"},(0,i.T)("img",{id:"font-close",className:"close ic",src:"/img/icon/close.svg",onclick:()=>this.hideFontList()}),(0,i.T)("div",{id:"font-list-title",className:"title",onmousedown:e=>this.dragStart(e)},(0,a.A)("font")),(0,i.T)("div",{className:"splitter"}),(0,i.T)("div",{style:"position:relative;margin: 10px 15px;"},(0,i.T)("input",{id:"font-search",className:"font-search",type:"text",placeholder:(0,a.A)("search")}),(0,i.T)("img",{id:"font-search-icon",className:"search-icon ic",src:"/img/tool/zoom.svg"})),(0,i.T)("div",{id:"font-list-holder"}),(0,i.T)("div",{id:"font-list-add"},(0,i.T)("div",{className:"button positive w-100",onclick:this.addLocalFont},(0,i.T)("img",{src:"/img/icon/plus.svg",width:20,height:20}),(0,a.A)("addLocalFont")))));document.body.appendChild(e),new y.A((0,i.Ay)("font-list-holder"))}this.fontList=(0,i.Ay)("font-list")}setFont(e){this.selected&&(0,i.Ay)("font:"+this.selected)&&(0,i.Ay)("font:"+this.selected).classList.remove("selected");let t=(0,i.Ay)("font:"+e);if(t){t.classList.add("selected");let e=t.childNodes[0];this.holder.innerHTML='<img src="'+e.src+'" class="ic" title="'+e.title+'" />'}else{let t=f.A.getFontDesc(e);t&&(t.local?this.holder.innerHTML='<img src="'+URL.createObjectURL(t.thumb)+'" class="ic" title="'+t.name+'" />':this.holder.innerHTML='<img src="/font/'+t.short+'.png" class="ic" title="'+t.name+'" />')}this.selected=e}}var x=s(89209),k=s(97266),S=s(37771);class E extends S.A{constructor(e,t){super(t,(0,a.A)("format")),this.changeUppercase=()=>{const e=this.selected.textSettings.clone();this.selected.setTextUpperCase(!this.selected.textSettings.uppercase),(0,i.Ay)("text-uppercase").classList.toggle("selected",this.selected.textSettings.uppercase),this.stage.history.add({type:"textSettings",kind:"uppercase",layer:this.selected,settings:e}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeItalic=()=>{const e=this.selected.textSettings.clone();this.selected.setTextItalic(!this.selected.textSettings.italic),(0,i.Ay)("text-italic").classList.toggle("selected",this.selected.textSettings.italic),this.stage.history.add({type:"textSettings",kind:"italic",layer:this.selected,settings:e}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeBold=()=>{const e=this.selected.textSettings.clone();this.selected.setTextBold(!this.selected.textSettings.bold),(0,i.Ay)("text-bold").classList.toggle("selected",this.selected.textSettings.bold),this.stage.history.add({type:"textSettings",kind:"bold",layer:this.selected,settings:e}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeUnderline=()=>{const e=this.selected.textSettings.clone();this.selected.setTextUnderline(!this.selected.textSettings.underline),(0,i.Ay)("text-underline").classList.toggle("selected",this.selected.textSettings.underline),this.stage.history.add({type:"textSettings",kind:"underline",layer:this.selected,settings:e}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeLineSpace=e=>{this.selected.textSettings.lineSpace=e,n.sg("text-change",50,()=>{this.selected.setLineSpace(e),document.dispatchEvent(new CustomEvent("viewport-render"))})},this.changeLetterSpace=e=>{this.selected.textSettings.letterSpace=e,n.sg("text-change",50,()=>{this.selected.setLetterSpace(e),document.dispatchEvent(new CustomEvent("viewport-render"))})},this.changeAlign=e=>{const t=this.selected.textSettings.clone(),s=document.querySelector('input[name="text-align"]:checked').value;this.selected.setTextAlign(s),t.align!==this.selected.textSettings.align&&this.stage.history.add({type:"textSettings",kind:"align",layer:this.selected,settings:t}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.cleanUp=()=>{this.lineSpacing.cleanUp(),this.letterSpacing.cleanUp(),(0,i.Ay)("text-align-left").removeEventListener("click",this.changeAlign,!1),(0,i.Ay)("text-align-center").removeEventListener("click",this.changeAlign,!1),(0,i.Ay)("text-align-right").removeEventListener("click",this.changeAlign,!1),(0,i.Ay)("text-align-justify").removeEventListener("click",this.changeAlign,!1),(0,i.Ay)("text-uppercase").removeEventListener("click",this.changeUppercase,!1),(0,i.Ay)("text-italic").removeEventListener("click",this.changeItalic,!1),(0,i.Ay)("text-bold").removeEventListener("click",this.changeBold,!1),(0,i.Ay)("text-underline").removeEventListener("click",this.changeUnderline,!1),this.superCleanUp()},this.stage=e,this.setContent(`\n            <section>\n                <div id="line-space" class="range-box top-5"></div>\n                <div id="letter-space" class="range-box top-10"></div>\n                <label class="top-10">${(0,a.A)("align")}</label>\n                <div class="switch-icon-field stretch top-5">\n                    <input type="radio" id="text-align-left" name="text-align" value="left"><label for="text-align-left" tooltip="${(0,a.A)("alignLeft")}" flow="up-right"><img src="/img/icon/align-left.svg" class="ic"></label>\n                    <input type="radio" id="text-align-center" name="text-align" value="center"><label for="text-align-center" tooltip="${(0,a.A)("alignCenter")}" flow="up"><img src="/img/icon/align-center.svg" class="ic"></label>\n                    <input type="radio" id="text-align-right" name="text-align" value="right"><label for="text-align-right" tooltip="${(0,a.A)("alignRight")}" flow="up"><img src="/img/icon/align-right.svg" class="ic"></label>\n                    <input type="radio" id="text-align-justify" name="text-align" value="justify"><label for="text-align-justify" tooltip="${(0,a.A)("alignJustify")}" flow="up"><img src="/img/icon/align-justify.svg" class="ic"></label>\n                </div>\n                <label class="top-16">${(0,a.A)("style")}</label>\n                <ul class="icon-button-set stretch top-5">\n                    <li id="text-uppercase" tooltip="${(0,a.A)("uppercase")}" flow="up"><img class="ic" src="/img/icon/uppercase.svg" /><div class="mark"></div></li>\n                    <li id="text-italic" tooltip="${(0,a.A)("italic")}" flow="up"><img class="ic" src="/img/icon/italic.svg" /><div class="mark"></div></li>\n                    <li id="text-bold" tooltip="${(0,a.A)("bold")}" flow="up"><img class="ic" src="/img/icon/bold.svg" /><div class="mark"></div></li>\n                    <li id="text-underline" tooltip="${(0,a.A)("underline")}" flow="up"><img class="ic" src="/img/icon/underline.svg" /><div class="mark"></div></li>\n                </ul>\n            </section>\n        `),this.selected=this.stage.fresco.getSelected();let s=this.selected.textSettings;const r={onStart:()=>{s=this.selected.textSettings.clone()},labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100};this.lineSpacing=new c.A("line-space",Object.assign(Object.assign({},r),{label:(0,a.A)("lineSpace"),range:[-1,1],onChange:this.changeLineSpace,onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"linespace",layer:this.selected,settings:s})}})),this.lineSpacing.setValue(s.lineSpace),this.letterSpacing=new c.A("letter-space",Object.assign(Object.assign({},r),{label:(0,a.A)("letterSpace"),range:[-.2,1],onChange:this.changeLetterSpace,onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"letterspace",layer:this.selected,settings:s})}})),this.letterSpacing.setValue(s.letterSpace),(0,i.Ay)("text-uppercase").classList.toggle("selected",this.selected.textSettings.uppercase),(0,i.Ay)("text-italic").classList.toggle("selected",this.selected.textSettings.italic),(0,i.Ay)("text-bold").classList.toggle("selected",this.selected.textSettings.bold),(0,i.Ay)("text-underline").classList.toggle("selected",this.selected.textSettings.underline),(0,i.Ay)("text-align-left").checked="left"===this.selected.textSettings.align,(0,i.Ay)("text-align-center").checked="center"===this.selected.textSettings.align,(0,i.Ay)("text-align-right").checked="right"===this.selected.textSettings.align,(0,i.Ay)("text-align-justify").checked="justify"===this.selected.textSettings.align,(0,i.Ay)("text-align-left").addEventListener("click",this.changeAlign,!1),(0,i.Ay)("text-align-center").addEventListener("click",this.changeAlign,!1),(0,i.Ay)("text-align-right").addEventListener("click",this.changeAlign,!1),(0,i.Ay)("text-align-justify").addEventListener("click",this.changeAlign,!1),(0,i.Ay)("text-uppercase").addEventListener("click",this.changeUppercase,!1),(0,i.Ay)("text-italic").addEventListener("click",this.changeItalic,!1),(0,i.Ay)("text-bold").addEventListener("click",this.changeBold,!1),(0,i.Ay)("text-underline").addEventListener("click",this.changeUnderline,!1)}}var T=s(8689);class C extends S.A{constructor(e,t){super(t,(0,a.A)("styles"),!0),this.updateInputs=()=>{(0,i.Ay)("text-background").checked=this.selected.textSettings.background,(0,i.Ay)("text-background-punch").checked=this.selected.textSettings.backgroundPunch,this.backgroundColor.setColor(this.selected.textSettings.backgroundColor),this.backgroundOffset.setValue(this.selected.textSettings.backgroundOffset),(0,i.Ay)("text-background-type-full").checked=this.selected.textSettings.backgroundType==x.A.BACKGROUND_FULL,(0,i.Ay)("text-background-type-line").checked=this.selected.textSettings.backgroundType==x.A.BACKGROUND_LINE,(0,i.Ay)("text-background-type-word").checked=this.selected.textSettings.backgroundType==x.A.BACKGROUND_WORD,(0,i.Ay)("text-outline").checked=this.selected.textSettings.outline,(0,i.Ay)("text-outline-punch").checked=this.selected.textSettings.outlinePunch,this.outlineColor.setColor(this.selected.textSettings.outlineColor),this.outlineSize.setValue(this.selected.textSettings.outlineSize),this.outlineDistance.setValue(this.selected.textSettings.outlineDistance),this.outlineDirection.setValue(this.selected.textSettings.outlineDirection),(0,i.Ay)("text-shadow").checked=this.selected.textSettings.shadow,this.shadowColor.setColor(this.selected.textSettings.shadowColor),this.shadowBlur.setValue(this.selected.textSettings.shadowBlur),this.shadowAlpha.setValue(this.selected.textSettings.shadowAlpha),this.shadowDirection.setValue(this.selected.textSettings.shadowDirection),this.shadowDistance.setValue(this.selected.textSettings.shadowDistance),(0,i.Ay)("text-curve").checked=this.selected.textSettings.curve,this.curveAmount.setValue(this.selected.textSettings.curveAmount),(0,i.Ay)("text-curve-flip").checked=this.selected.textSettings.curveFlip,(0,i.Ay)("text-curve-spread").checked=this.selected.textSettings.curveSpread,(0,i.Ay)("text-curve-type-arc").checked="arc"===this.selected.textSettings.curveType,(0,i.Ay)("text-curve-type-circle").checked="circle"===this.selected.textSettings.curveType,(0,i.Ay)("text-curve-type-half").checked="half"===this.selected.textSettings.curveType,(0,i.Ay)("text-curve-amount").style.display="arc"!==this.selected.textSettings.curveType?"none":"block",(0,i.Ay)("text-curve-flip-label").style.display="arc"!==this.selected.textSettings.curveType?"block":"none",(0,i.Ay)("text-curve-spread-label").style.display="arc"!==this.selected.textSettings.curveType?"block":"none",(0,i.Ay)("text-warp").checked=this.selected.textSettings.warp,(0,i.Ay)("text-warp-type-circular").checked=this.selected.textSettings.warpType===x.A.WARP_CIRCULAR,(0,i.Ay)("text-warp-type-angular").checked=this.selected.textSettings.warpType===x.A.WARP_ANGULAR,(0,i.Ay)("text-warp-mode-upper").checked=this.selected.textSettings.warpMode===x.A.WARP_UPPER,(0,i.Ay)("text-warp-mode-middle").checked=this.selected.textSettings.warpMode===x.A.WARP_MIDDLE,(0,i.Ay)("text-warp-mode-lower").checked=this.selected.textSettings.warpMode===x.A.WARP_LOWER,this.warpEdgeSize.setValue(this.selected.textSettings.warpEdgeSize),this.warpCenterSize.setValue(this.selected.textSettings.warpCenterSize),this.warpHorizontalOffset.setValue(this.selected.textSettings.warpHorizontalOffset),this.warpVerticalOffset.setValue(this.selected.textSettings.warpVerticalOffset)},this.changeBackground=e=>{const t=this.selected.textSettings.clone();let s=(0,i.Ay)("text-background").checked,a=(0,i.Ay)("text-background-punch").checked,n=this.backgroundOffset.getValue(),r=this.backgroundColor.getColor().toHEX(),o="";o=(0,i.Ay)("text-background-type-full").checked?x.A.BACKGROUND_FULL:(0,i.Ay)("text-background-type-line").checked?x.A.BACKGROUND_LINE:x.A.BACKGROUND_WORD,this.selected.setBackground(s,o,r,a,n),this.stage.history.add({type:"textSettings",kind:"background",layer:this.selected,settings:t}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeCurveState=()=>{const e=this.selected.textSettings.clone();this.changeCurve(),this.stage.history.add({type:"textSettings",kind:"curve",layer:this.selected,settings:e})},this.changeCurve=()=>{let e=this.curveAmount.getValue(),t=(0,i.Ay)("text-curve").checked,s=(0,i.Ay)("text-curve-flip").checked,a=(0,i.Ay)("text-curve-spread").checked,n=document.querySelector('input[name="curve-type"]:checked').value;(0,i.Ay)("text-curve-amount").style.display="arc"!==n?"none":"block",(0,i.Ay)("text-curve-flip-label").style.display="arc"!==n?"block":"none",(0,i.Ay)("text-curve-spread-label").style.display="arc"!==n?"block":"none",this.selected.setCurve(t,n,e,a,s),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeWarpState=()=>{const e=this.selected.textSettings.clone();this.changeWarp(),this.stage.history.add({type:"textSettings",kind:"warp",layer:this.selected,settings:e})},this.changeWarp=()=>{let e=(0,i.Ay)("text-warp").checked,t=this.warpEdgeSize.getValue(),s=this.warpCenterSize.getValue(),a=this.warpHorizontalOffset.getValue(),n=this.warpVerticalOffset.getValue(),r=document.querySelector('input[name="warp-type"]:checked').value,o=document.querySelector('input[name="warp-mode"]:checked').value;this.selected.setWarp(e,r,o,t,s,a,n),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeOutlineState=()=>{const e=this.selected.textSettings.clone();this.changeOutline(),this.stage.history.add({type:"textSettings",kind:"outline",layer:this.selected,settings:e})},this.changeOutline=()=>{let e=(0,i.Ay)("text-outline").checked,t=(0,i.Ay)("text-outline-punch").checked,s=this.outlineColor.getColor().toHEX(),a=this.outlineSize.getValue(),n=this.outlineDistance.getValue(),r=this.outlineDirection.getValue();this.selected.setOutline(e,a,s,t,n,r),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeOutlineColor=e=>{const t=this.selected.textSettings.clone();this.changeOutline(),this.stage.history.add({type:"textSettings",kind:"outline",layer:this.selected,settings:t})},this.changeShadowState=()=>{const e=this.selected.textSettings.clone();this.changeShadow(),this.stage.history.add({type:"textSettings",kind:"shadow",layer:this.selected,settings:e})},this.changeShadow=()=>{this.selected.setShadow((0,i.Ay)("text-shadow").checked,this.shadowBlur.getValue(),this.shadowAlpha.getValue(),this.shadowColor.getColor().toHEX(),this.shadowDistance.getValue(),this.shadowDirection.getValue()),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeShadowColor=e=>{const t=this.selected.textSettings.clone();this.changeShadow(),this.stage.history.add({type:"textSettings",kind:"shadow",layer:this.selected,settings:t})},this.cleanUp=()=>{this.selected=void 0,this.backgroundColor.cleanUp(),this.backgroundColor=void 0,this.outlineColor.cleanUp(),this.outlineColor=void 0,this.shadowColor.cleanUp(),this.shadowColor=void 0,this.curveAmount.cleanUp(),this.outlineSize.cleanUp(),this.outlineDistance.cleanUp(),this.outlineDirection.cleanUp(),this.warpEdgeSize.cleanUp(),this.warpCenterSize.cleanUp(),this.warpVerticalOffset.cleanUp(),this.warpHorizontalOffset.cleanUp(),this.shadowBlur.cleanUp(),this.shadowAlpha.cleanUp(),this.shadowDistance.cleanUp(),this.shadowDirection.cleanUp(),(0,i.Ay)("text-background").removeEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-background-punch").removeEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-background-type-full").removeEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-background-type-line").removeEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-background-type-word").removeEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-outline").removeEventListener("change",this.changeOutlineState,!1),(0,i.Ay)("text-outline-punch").removeEventListener("change",this.changeOutlineState,!1),(0,i.Ay)("text-shadow").removeEventListener("change",this.changeShadowState,!1),(0,i.Ay)("text-curve").removeEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-flip").removeEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-spread").removeEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-type-arc").removeEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-type-circle").removeEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-type-half").removeEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-warp").removeEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-type-circular").removeEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-type-angular").removeEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-mode-upper").removeEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-mode-middle").removeEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-mode-lower").removeEventListener("change",this.changeWarpState,!1),this.superCleanUp()},this.stage=e,this.selected=this.stage.fresco.getSelected(),this.content.id="text-style-content",this.content.style.height="333px",this.setContent(`\n            <section>\n                <div>\n                    <input type="checkbox" class="toggle-check" id="text-curve" />\n                    <label class="switch subline top-4" for="text-curve">${(0,a.A)("curve")}<span></span><span class="arrow"></span></label>\n                    <div class="toggle">\n                        <div id="text-curve-type" class="switch-field stretch top-4">\n                            <input type="radio" id="text-curve-type-arc" name="curve-type" value="arc" checked/><label for="text-curve-type-arc">${(0,a.A)("arc")}</label>\n                            <input type="radio" id="text-curve-type-circle" name="curve-type" value="circle" /><label for="text-curve-type-circle">${(0,a.A)("circle")}</label>\n                            <input type="radio" id="text-curve-type-half" name="curve-type" value="half" /><label for="text-curve-type-half">${(0,a.A)("half")}</label>\n                        </div>\n                        <div id="text-curve-amount" class="top-16"></div>\n                        <input type="checkbox" id="text-curve-spread" />\n                        <label class="top-16 switch" id="text-curve-spread-label" for="text-curve-spread">${(0,a.A)("spread")}<span></span></label>\n                        <input type="checkbox" id="text-curve-flip" />\n                        <label class="top-16 switch" id="text-curve-flip-label" for="text-curve-flip">${(0,a.A)("flip")}<span></span></label>\n                    </div>\n                </div>\n                <div>\n                    <input type="checkbox" class="toggle-check" id="text-warp" />\n                    <label class="switch subline top-10" for="text-warp">${(0,a.A)("warp")}<span></span><span class="arrow"></span></label>\n                    <div class="toggle">\n        \n                        <div id="text-warp-mode" class="switch-icon-field stretch">\n                            <input type="radio" id="text-warp-mode-upper" name="warp-mode" value="upper" checked /><label for="text-warp-mode-upper" tooltip="Upper" flow="up-left"><img src="/img/icon/warp-upper.svg" class="ic" width="18" height="18"></label>\n                            <input type="radio" id="text-warp-mode-middle" name="warp-mode" value="middle" /><label for="text-warp-mode-middle" tooltip="Middle" flow="up"><img src="/img/icon/warp-middle.svg" class="ic" width="18" height="18"></label>\n                            <input type="radio" id="text-warp-mode-lower" name="warp-mode" value="lower" /><label for="text-warp-mode-lower" tooltip="Lower" flow="up-right"><img src="/img/icon/warp-lower.svg" class="ic" width="18" height="18"></label>\n                        </div>\n                        <div id="text-warp-type" class="switch-field stretch top-16">\n                            <input type="radio" id="text-warp-type-circular" name="warp-type" value="circular" checked/><label for="text-warp-type-circular">${(0,a.A)("circular")}</label>\n                            <input type="radio" id="text-warp-type-angular" name="warp-type" value="angular" /><label for="text-warp-type-angular">${(0,a.A)("angular")}</label>\n                        </div>\n                        <div id="text-warp-edge-size" class="top-16"></div>\n                        <div id="text-warp-center-size"></div>\n                        <div id="text-warp-horizontal-offset"></div>\n                        <div id="text-warp-vertical-offset"></div>\n                    </div>\n                </div>\n                <div>\n                    <input type="checkbox" class="toggle-check" id="text-background" />\n                    <label class="switch subline top-10" for="text-background">${(0,a.A)("background")}<span></span><span class="arrow"></span></label>\n                    <div class="toggle">\n                        <label class="split">${(0,a.A)("color")}<div id="text-background-color"></div></label>\n                        <input type="checkbox" id="text-background-punch" />\n                        <label class="top-15 switch" for="text-background-punch">${(0,a.A)("punchout")}<span></span></label>\n                        <div id="text-background-offset" class="top-15"></div>\n                        <div id="text-background-type" class="switch-field stretch top-16">\n                            <input type="radio" id="text-background-type-full" name="background-type" value="full" checked/><label for="text-background-type-full">${(0,a.A)("full")}</label>\n                            <input type="radio" id="text-background-type-line" name="background-type" value="line" /><label for="text-background-type-line">${(0,a.A)("line")}</label>\n                            <input type="radio" id="text-background-type-word" name="background-type" value="word" /><label for="text-background-type-word">${(0,a.A)("word")}</label>\n                        </div>\n                    </div>\n                </div>\n                <div>\n                    <input type="checkbox" class="toggle-check" id="text-outline" />\n                    <label class="switch subline top-10" for="text-outline">${(0,a.A)("outline")}<span></span><span class="arrow"></span></label>\n                    <div class="toggle">\n                        <label class="split">${(0,a.A)("color")}<div id="text-outline-color"></div></label>\n                        <input type="checkbox" id="text-outline-punch" />\n                        <label class="top-15 switch" for="text-outline-punch">${(0,a.A)("punchout")}<span></span></label>\n                        <div id="text-outline-size" class="top-15"></div>\n                        <div id="text-outline-distance"></div>\n                        <div id="text-outline-direction"></div>\n                    </div>\n                </div>\n                <div>\n                <input type="checkbox" class="toggle-check" id="text-shadow" />\n                <label class="switch subline top-10" for="text-shadow">${(0,a.A)("shadow")}<span></span><span class="arrow"></span></label>\n                <div class="toggle">\n                        <label class="split">${(0,a.A)("color")}<div id="text-shadow-color"></div></label>\n                        <div id="text-shadow-blur" class="top-10"></div>\n                        <div id="text-shadow-distance"></div>\n                        <div id="text-shadow-direction"></div>\n                        <div id="text-shadow-alpha"></div>\n                    </div>\n                </div>\n            <section>\n        `);let s=this.selected.textSettings;this.backgroundColor=new T.A("text-background-color",l.A.fromHEX(p.Ay.altColor),this.changeBackground),this.outlineColor=new T.A("text-outline-color",l.A.fromHEX(p.Ay.altColor),this.changeOutlineColor),this.shadowColor=new T.A("text-shadow-color",l.A.fromHEX(p.Ay.altColor),this.changeShadowColor);const n={onStart:()=>{s=this.selected.textSettings.clone()},labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100};this.outlineSize=new c.A("text-outline-size",Object.assign(Object.assign({},n),{label:(0,a.A)("size"),range:[.01,1],defaultValue:.3,onChange:()=>this.changeOutline(),onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"outline",layer:this.selected,settings:s})}})),this.outlineDistance=new c.A("text-outline-distance",Object.assign(Object.assign({},n),{label:(0,a.A)("distance"),range:[0,1],onChange:()=>this.changeOutline(),onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"outline",layer:this.selected,settings:s})}})),this.outlineDirection=new c.A("text-outline-direction",Object.assign(Object.assign({},n),{label:(0,a.A)("direction"),range:[0,360],defaultValue:180,labelFormat:e=>e.toFixed(1),labelParse:e=>parseInt(e,10),onChange:()=>this.changeOutline(),onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"outline",layer:this.selected,settings:s})}}));const r=Object.assign(Object.assign({},n),{range:[0,1],onChange:()=>this.changeShadow(),onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"shadow",layer:this.selected,settings:s})}});this.backgroundOffset=new c.A("text-background-offset",Object.assign(Object.assign({},n),{label:(0,a.A)("offset"),range:[-1,1],onEnd:()=>{this.changeBackground()}})),this.shadowBlur=new c.A("text-shadow-blur",Object.assign(Object.assign({},r),{label:(0,a.A)("blur")})),this.shadowAlpha=new c.A("text-shadow-alpha",Object.assign(Object.assign({},r),{label:(0,a.A)("opacity"),defaultValue:1})),this.shadowDistance=new c.A("text-shadow-distance",Object.assign(Object.assign({},r),{label:(0,a.A)("distance"),range:[0,1]})),this.shadowDirection=new c.A("text-shadow-direction",Object.assign(Object.assign({},r),{label:(0,a.A)("direction"),range:[0,360],defaultValue:180,labelFormat:e=>e.toFixed(1),labelParse:e=>parseInt(e,10)})),this.curveAmount=new c.A("text-curve-amount",{label:(0,a.A)("amount"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.changeCurve(),onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"curve",layer:this.selected,settings:s})}}),this.warpEdgeSize=new c.A("text-warp-edge-size",Object.assign(Object.assign({},n),{label:(0,a.A)("edgeSize"),range:[-1,1],onChange:()=>this.changeWarp(),onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"warp",layer:this.selected,settings:s})}})),this.warpCenterSize=new c.A("text-warp-center-size",Object.assign(Object.assign({},n),{label:(0,a.A)("centerSize"),range:[-1,1],onChange:()=>this.changeWarp(),onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"warp",layer:this.selected,settings:s})}})),this.warpHorizontalOffset=new c.A("text-warp-horizontal-offset",Object.assign(Object.assign({},n),{label:(0,a.A)("horizontalOffset"),range:[-1,1],onChange:()=>this.changeWarp(),onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"warp",layer:this.selected,settings:s})}})),this.warpVerticalOffset=new c.A("text-warp-vertical-offset",Object.assign(Object.assign({},n),{label:(0,a.A)("verticalOffset"),range:[-1,1],onChange:()=>this.changeWarp(),onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"warp",layer:this.selected,settings:s})}})),(0,i.Ay)("text-background").addEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-background-punch").addEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-background-type-full").addEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-background-type-line").addEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-background-type-word").addEventListener("change",this.changeBackground,!1),(0,i.Ay)("text-curve").addEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-flip").addEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-spread").addEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-type-arc").addEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-type-circle").addEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-curve-type-half").addEventListener("change",this.changeCurveState,!1),(0,i.Ay)("text-warp").addEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-type-circular").addEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-type-angular").addEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-mode-upper").addEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-mode-middle").addEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-warp-mode-lower").addEventListener("change",this.changeWarpState,!1),(0,i.Ay)("text-outline").addEventListener("change",this.changeOutlineState,!1),(0,i.Ay)("text-outline-punch").addEventListener("change",this.changeOutlineState,!1),(0,i.Ay)("text-shadow").addEventListener("change",this.changeShadowState,!1),this.updateInputs(),new y.A(this.content)}}var M=s(98244);class P extends S.A{constructor(e,t){super(t,(0,a.A)("preset"),!0),this.SERVER_URL="/",this.populatePresets=async()=>{const e=await fetch("/text/index.json"),t=await e.json(),s=(0,i.Ay)("text-preset-content-ss-content");s.classList.add("text-holder"),s.innerHTML="",t.presets.forEach(e=>{const t="/text/"+e.id+"/thumbnail.webp",a=(0,i.T)("div",{id:e.id,className:"text-box"});a.setAttribute("loading","lazy"),e.premium&&a.classList.add("premium"),a.addEventListener("click",this.selectPreset,!0),a.style.backgroundImage="url("+t+")",s.append(a)})},this.selectPreset=async e=>{if(this.working)return;if(e.currentTarget.classList.contains("premium")&&"premium"!==(null===v.N||void 0===v.N?void 0:v.N.subscriptionAccess))return this.cleanUp(),void new w.A("font","premium");this.working=!0;const t=e.currentTarget.getAttribute("id");await(0,b.h6)(this.stage,"/text/"+t+"/manifest.json"),this.working=!1,(0,M.A)("text-preset",t)},this.stage=e,this.float.style.height="70%",this.float.style.width="265px",this.content.id="text-preset-content",new y.A(this.content),this.populatePresets()}}class D extends h.A{constructor(e){let t;super("text",e),this.showTextFormat=()=>{new E(this.stage,(0,i.Ay)("text-format"))},this.showTextStyles=()=>{new C(this.stage,(0,i.Ay)("text-styles"))},this.showTextPresets=()=>{new P(this.stage,(0,i.Ay)("text-presets"))},this.layerSelect=()=>{if(this.stage.fresco.getSelected()!==this.selected&&this.stage.history.commitTransaction(),!this.stage.fresco.isSelectedType(d.A.TYPE_TEXT))return(0,i.Ay)("text-settings").style.display="none",(0,i.Ay)("text-no-layer").style.display="flex",void(this.selected=void 0);(0,i.Ay)("text-settings").style.display="flex",(0,i.Ay)("text-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.fill.setFill(this.selected.fill),this.font.setFont(this.selected.textSettings.font),this.textSize.setValue(this.selected.textSettings.size)},this.layerArrange=()=>{this.selected&&this.textSize.setValue(this.selected.textSettings.size)},this.changeSize=e=>{this.selected.textSettings.size=e,n.sg("text-change",50,()=>{this.selected.setTextSize(e),document.dispatchEvent(new CustomEvent("viewport-render"))})},this.previewFill=e=>{this.selected.setTextFill(e,!0),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeFill=e=>{const t=this.selected.textSettings.clone();this.selected.setTextFill(e),this.stage.history.add({type:"textSettings",kind:"fill",layer:this.selected,settings:t}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.previewFont=e=>{this.selected&&(this.selected.setTextFont(e,!0),document.dispatchEvent(new CustomEvent("viewport-render")))},this.changeFont=(e,t)=>{if(!this.selected)return;const s=this.selected.textSettings.clone();s.font=t,this.selected.setTextFont(e),this.stage.history.add({type:"textSettings",kind:"font",layer:this.selected,settings:s}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.reformDown=(e,t)=>{this.downPoint=e,this.usedtobe=t,this.stage.coating.freeze(!0),this.addMoveListeners()},this.move=e=>{const t=this.stage.translateToRect(this.downPoint,e,!1,!0);t.width>0&&t.height>0&&this.drawframe(t.topLeft(),t.bottomRight()),document.dispatchEvent(new CustomEvent("legend",{detail:"W: "+Math.round(t.width/this.stage.zoom)+"  H: "+Math.round(t.height/this.stage.zoom)}))},this.drawframe=(e,t)=>{const s=this.stage.coating.ctx;s.lineWidth=p.Ay.isHDPI?4:2,s.strokeStyle=n.bi,s.clearRect(0,0,s.canvas.width,s.canvas.height),s.strokeRect(e.x,e.y,t.x-e.x,t.y-e.y)},this.up=async e=>{if(this.stage.coating.clear(!0),this.stage.coating.freeze(!1),this.removeMoveListeners(),document.dispatchEvent(new CustomEvent("legend",{detail:"stop"})),this.downPoint.distanceTo(e)>10){const t=this.stage.translateToRect(this.downPoint,e,!1,!1);t.height=Math.round(t.height/3),t.height<20&&(t.height=20),this.addText(t)}else this.usedtobe||await new k.A((0,a.A)("addText"),(0,a.A)("doYouWantToAddANewTextLayer"),(0,a.A)("add")).init()&&this.addTextEvent()},this.addTextEvent=()=>{let e=this.stage.getViewPort();this.addText(new o.A(Math.round(e.x+(e.width-Math.round(e.width/1.2))/2),Math.round(e.y+e.height/2.5),Math.round(e.width/1.2),this.textSize.getValue()))},this.addText=async e=>{let t=new x.A(this.font.selected,e.height);await this.font.loadFont(this.font.selected),this.fill.setFill(new r.A(l.A.fromHEX(p.Ay.mainColor))),t.fillType=this.fill.getFill().getType(),t.fillValue=this.fill.getFill().getStringValue(),await this.stage.addText((0,a.A)("loremIpsum"),e,t,"add"),this.editMode()},this.editMode=()=>{this.reform.dblClick()},this.deleteLayer=()=>{this.stage.deleteLayer()},this.duplicateLayer=()=>{this.stage.duplicateLayer()},this.cleanUp=()=>{this.stage.history.commitTransaction(),this.reform.cleanUp(),this.reform=void 0,this.stage.coating.wake(),this.font.cleanUp(),this.font=null,this.fill.cleanUp(),this.fill=null,this.textSize.cleanUp(),(0,i.Ay)("text-edit").removeEventListener("click",this.editMode,!0),(0,i.Ay)("add-text-button").removeEventListener("click",this.addTextEvent,!0),(0,i.Ay)("text-format").removeEventListener("click",this.showTextFormat,!1),(0,i.Ay)("text-styles").removeEventListener("click",this.showTextStyles,!1),(0,i.Ay)("text-presets").removeEventListener("click",this.showTextPresets,!1),(0,i.Ay)("text-add").removeEventListener("click",this.addTextEvent,!1),(0,i.Ay)("text-delete").removeEventListener("click",this.deleteLayer,!1),(0,i.Ay)("text-duplicate").removeEventListener("click",this.duplicateLayer,!1),document.removeEventListener("add-text",this.addTextEvent,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("layer-arrange",this.layerArrange,!1)},this.stage=e,this.stage.coating.sleep(),this.fill=new u.A("text-fill",new r.A(l.A.fromHEX(p.Ay.mainColor)),this.changeFill,this.previewFill),this.font=new A(this.stage,(0,i.Ay)("text-font-picker"),this.changeFont,this.previewFont),(0,i.Ay)("add-text-button").addEventListener("click",this.addTextEvent,!0),(0,i.Ay)("text-edit").addEventListener("click",this.editMode,!0),this.textSize=new c.A("text-size",{compact:!0,label:(0,a.A)("size")+":",range:[4,100,1e3],defaultValue:60,step:[2,5],stops:[0,.4,1],labelFormat:e=>e.toString(),labelParse:e=>parseInt(e),onStart:()=>{t=this.selected.textSettings.clone()},onEnd:()=>{this.stage.history.add({type:"textSettings",kind:"size",layer:this.selected,settings:t})},onChange:this.changeSize}),(0,i.Ay)("text-add").addEventListener("click",this.addTextEvent,!1),(0,i.Ay)("text-delete").addEventListener("click",this.deleteLayer,!1),(0,i.Ay)("text-duplicate").addEventListener("click",this.duplicateLayer,!1),(0,i.Ay)("text-format").addEventListener("click",this.showTextFormat,!1),(0,i.Ay)("text-styles").addEventListener("click",this.showTextStyles,!1),(0,i.Ay)("text-presets").addEventListener("click",this.showTextPresets,!1),document.addEventListener("add-text",this.addTextEvent,!1),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("layer-arrange",this.layerArrange,!1),this.reform=new m.A(e,"TEXT"),this.reform.proxy=this.reformDown,this.layerSelect()}}},55080:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ListStoredPaymentMethodsResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ListStoredPaymentMethodsResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"storedPaymentMethods",baseName:"storedPaymentMethods",type:"Array<StoredPaymentMethodResource>"}]},55098:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleGrain")),this.setContent((0,n.T)("div",{id:"grain-slider"})),new a.A("grain-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("grain",e)})}}},55408:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StoredPaymentMethodResource=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.StoredPaymentMethodResource=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"brand",baseName:"brand",type:"string"},{name:"expiryMonth",baseName:"expiryMonth",type:"string"},{name:"expiryYear",baseName:"expiryYear",type:"string"},{name:"externalResponseCode",baseName:"externalResponseCode",type:"string"},{name:"externalTokenReference",baseName:"externalTokenReference",type:"string"},{name:"holderName",baseName:"holderName",type:"string"},{name:"iban",baseName:"iban",type:"string"},{name:"id",baseName:"id",type:"string"},{name:"issuerName",baseName:"issuerName",type:"string"},{name:"lastFour",baseName:"lastFour",type:"string"},{name:"name",baseName:"name",type:"string"},{name:"networkTxReference",baseName:"networkTxReference",type:"string"},{name:"ownerName",baseName:"ownerName",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"supportedRecurringProcessingModels",baseName:"supportedRecurringProcessingModels",type:"Array<string>"},{name:"type",baseName:"type",type:"string"}]},55614:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titlealphaThreshold")),this.setContent((0,n.T)("div",{id:"alphaThreshold"})),new a.A("alphaThreshold",{label:(0,r.A)("threshold"),step:.01,defaultValue:.5,range:[0,1],labelFormat:e=>`${Math.round(255*e)}`,labelParse:e=>parseInt(e,10)/255,onChange:e=>this.change("alphaThreshold",e+1e-13)}),this.change("alphaThreshold",.5)}}},55637:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardDetailsResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CardDetailsResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"brands",baseName:"brands",type:"Array<CardBrandDetails>"},{name:"issuingCountryCode",baseName:"issuingCountryCode",type:"string"}]},55696:(e,t,s)=>{s.a(e,async(e,i)=>{try{s.r(t);var a=s(29755),n=s(57695),r=e([n]);if(n=(r.then?(await r)():r)[0],"cGl4bHIuY29t"!==window.btoa(document.location.hostname.split(".").slice(-2).join(".")))throw new Error;a.Ay.product="editor";new n.A;i()}catch(o){i(o)}})},55949:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(42268),a=s(75770),n=s(41915),r=s(15818),o=s(29755);class h extends a.A{constructor(e,t){super("picker",e),this.stage=e,this.target="main",this.toggleTarget=()=>{this.setTarget("main"===this.target?"alt":"main")},this.selectTarget=e=>{this.setTarget(e.currentTarget===(0,i.Ay)("picker-target-main")?"main":"alt")},this.setTarget=e=>{this.target=e,(0,i.Ay)("picker-target-main").checked="main"===this.target,(0,i.Ay)("picker-target-alt").checked="alt"===this.target},this.setPreset=e=>{let t=r.A.fromRGB(e.currentTarget.style.backgroundColor);this.callback(t,!this.isShiftDown,!0)},this.shiftDown=e=>{"Shift"!==e.key||this.isShiftDown||(this.isShiftDown=!0,this.toggleTarget())},this.shiftUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1,this.toggleTarget())},this.layerSelect=()=>{this.output=this.stage.getOutputCanvas(),this.ctx=this.output.getContext("2d")},this.down=e=>{this.stage.coating.freeze(!0),e=this.stage.translateRasterToFresco(e,void 0,!1);let t=this.ctx.getImageData(e.x,e.y,1,1).data;this.callback(new r.A(t[0],t[1],t[2]),"main"===this.target),this.addMoveListeners()},this.move=e=>{e=this.stage.translateRasterToFresco(e,void 0,!1);let t=this.ctx.getImageData(e.x,e.y,1,1).data;this.callback(new r.A(t[0],t[1],t[2]),"main"===this.target,!1)},this.pickerPreviewColor=e=>{let t=new n.A(e.clientX,e.clientY);if(this.preview.style.top=t.y-50+"px",this.preview.style.left=t.x+10+"px",this.preview.style.display="block",t.x-=this.stage.canvas.offsetLeft,t.y-=this.stage.canvas.offsetTop,o.Ay.isHDPI&&(t.x*=2,t.y*=2),t.x<0||t.y<0||t.x>this.stage.canvas.width||t.y>this.stage.canvas.height)return void(this.preview.style.display="none");let s=this.stage.canvas.getContext("2d").getImageData(t.x,t.y,1,1).data;this.preview.style.backgroundColor=new r.A(s[0],s[1],s[2]).toHEX()},this.pickerPreviewLeave=()=>{this.preview.style.display="none"},this.up=e=>{this.stage.coating.freeze(!1),this.removeMoveListeners(),e=this.stage.translateRasterToFresco(e,void 0,!1);let t=this.ctx.getImageData(e.x,e.y,1,1).data;this.callback(new r.A(t[0],t[1],t[2]),"main"===this.target,!0),this.setShades()},this.setShades=()=>{let e=r.A.fromHEX("main"===this.target?o.Ay.mainColor:o.Ay.altColor);(0,i.Ay)("picker-shade-1").style.backgroundColor=new r.A(e.r-50,e.g-50,e.b-50).toHEX(),(0,i.Ay)("picker-shade-2").style.backgroundColor=new r.A(e.r-25,e.g-25,e.b-25).toHEX(),(0,i.Ay)("picker-shade-3").style.backgroundColor=e.toHEX(),(0,i.Ay)("picker-shade-4").style.backgroundColor=new r.A(e.r+25,e.g+25,e.b+25).toHEX(),(0,i.Ay)("picker-shade-5").style.backgroundColor=new r.A(e.r+50,e.g+50,e.b+50).toHEX(),(0,i.Ay)("picker-triad-1").style.backgroundColor=e.toHEX(),(0,i.Ay)("picker-triad-2").style.backgroundColor=e.rotateHue(90).toHEX(),(0,i.Ay)("picker-triad-3").style.backgroundColor=e.rotateHue(180).toHEX(),(0,i.Ay)("picker-tetra-1").style.backgroundColor=e.toHEX(),(0,i.Ay)("picker-tetra-2").style.backgroundColor=e.rotateHue(60).toHEX(),(0,i.Ay)("picker-tetra-3").style.backgroundColor=e.rotateHue(120).toHEX(),(0,i.Ay)("picker-tetra-4").style.backgroundColor=e.rotateHue(180).toHEX(),(0,i.Ay)("picker-analo-1").style.backgroundColor=e.rotateHue(-30).toHEX(),(0,i.Ay)("picker-analo-2").style.backgroundColor=e.toHEX(),(0,i.Ay)("picker-analo-3").style.backgroundColor=e.rotateHue(30).toHEX(),(0,i.Ay)("picker-comp-1").style.backgroundColor=e.toHEX(),(0,i.Ay)("picker-comp-2").style.backgroundColor=e.rotateHue(180).toHEX()},this.cleanUp=()=>{this.removeDownListeners(),this.ctx=void 0,this.output=void 0,this.preview.remove(),this.preview=void 0,(0,i.Ay)("picker").querySelectorAll(".color-pod").forEach(e=>e.removeEventListener("click",this.setPreset)),(0,i.Ay)("picker-target-main").removeEventListener("click",this.selectTarget,!1),(0,i.Ay)("picker-target-alt").removeEventListener("click",this.selectTarget,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.shiftDown,!1),document.removeEventListener("keyup",this.shiftUp,!1),this.stage.raster.removeEventListener("mousemove",this.pickerPreviewColor,!0),this.stage.raster.removeEventListener("mouseleave",this.pickerPreviewLeave,!0)},this.callback=t,document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("keydown",this.shiftDown,!1),document.addEventListener("keyup",this.shiftUp,!1),this.stage.raster.addEventListener("mousemove",this.pickerPreviewColor,!0),this.stage.raster.addEventListener("mouseleave",this.pickerPreviewLeave,!0),(0,i.Ay)("picker-target-main").addEventListener("click",this.selectTarget,!1),(0,i.Ay)("picker-target-alt").addEventListener("click",this.selectTarget,!1),this.stage.raster.style.cursor="crosshair",(0,i.Ay)("picker").querySelectorAll(".color-pod").forEach(e=>e.addEventListener("click",this.setPreset)),this.addDownListeners(),this.layerSelect(),this.setShades(),this.preview=(0,i.T)("div",{id:"color-picker-preview",style:"display:none"}),(0,i.Ay)("workspace").appendChild(this.preview);const s=document.querySelector('input[name="picker-target"]:checked').value;this.setTarget(s)}}},55967:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RiskData=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.RiskData=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"clientData",baseName:"clientData",type:"string"},{name:"customFields",baseName:"customFields",type:"{ [key: string]: string; }"},{name:"fraudOffset",baseName:"fraudOffset",type:"number"},{name:"profileReference",baseName:"profileReference",type:"string"}]},56256:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(42268),a=s(21742),n=s(54738),r=s(79453),o=s(64483),h=s(81937),c=s(26806),l=s(50295),d=s(96703),p=s(3514);class u extends c.A{constructor(e){super((0,a.A)("titleSuperSharp"),!1),this.messy=!1,this.working=!1,this.layerSelect=()=>{this.reset();const e=this.selected===this.stage.fresco.getSelected();this.selected&&!e&&this.apply(),this.stage.fresco.isSelectedImageWithCanvas()?((0,i.Ay)("super-sharp-no-layer").style.display="none",(0,i.Ay)("super-sharp-compare").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"replace",this.selected.canvas)):(0,i.Ay)("super-sharp-no-layer").style.display="block"},this.showCreditPop=()=>{new d.A("credits")},this.renderCreditAmount=()=>{if(!r.N)return(0,i.Ay)("super-sharp-credit-count").style.display="none",(0,a.A)("common-signUpLogIn");(0,i.Ay)("super-sharp-credit-count").innerHTML=`${r.N.credits.toString()}`},this.execute=async()=>{if(r.N)if(r.N.credits){if(!this.working){this.working=!0,(0,i.Ay)("super-sharp-execute").classList.add("working");try{const e=await(0,o.P)(this.scratch.canvas);this.scratch.replaceCanvas(e),this.stage.render(),document.dispatchEvent(new CustomEvent("notification",{detail:"Voil!"})),(0,i.Ay)("super-sharp-compare").style.display="flex",(0,i.Ay)(`dialog-apply${this.mid}`).classList.remove("disabled"),this.renderCreditAmount()}catch(e){console.error(e),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("genericError")}))}finally{this.working=!1,(0,i.Ay)("super-sharp-execute").classList.remove("working")}}}else r.N.subscription?new d.A("credits"):new p.A("super-sharp","credit");else new l.A},this.compareDown=()=>{this.scratch.setRenderMode("none"),window.requestAnimationFrame(()=>this.stage.render())},this.compareUp=()=>{this.scratch.setRenderMode("replace"),window.requestAnimationFrame(()=>this.stage.render())},this.cancelClick=()=>{document.dispatchEvent(new CustomEvent("tool-cancel")),document.dispatchEvent(new CustomEvent("select-tool",{detail:"ai"}))},this.apply=()=>{const e=n.oM(this.selected.canvas),t=this.selected.rect.clone();this.selected.canvas=this.scratch.canvas,this.stage.history.add({type:"bitmapSwitch",kind:"super-sharp",layer:this.selected,canvas:e,rect:t}),this.cleanUp()},this.reset=()=>{(0,i.Ay)("super-sharp-no-layer").style.display="none",(0,i.Ay)(`dialog-apply${this.mid}`).classList.add("disabled")},this.cancel=()=>{this.cleanUp()},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.stage.render(),document.removeEventListener("layer-select",this.layerSelect,!1),(0,i.Ay)("super-sharp-execute").removeEventListener("click",this.execute,!1),(0,i.Ay)("super-sharp-compare").removeEventListener("mousedown",this.compareDown,!1),(0,i.Ay)("super-sharp-compare").removeEventListener("touchstart",this.compareDown,!1),(0,i.Ay)("super-sharp-compare").removeEventListener("mouseup",this.compareUp,!1),(0,i.Ay)("super-sharp-compare").removeEventListener("touchend",this.compareUp,!1),(0,i.Ay)("super-sharp-credit-count").removeEventListener("click",this.showCreditPop,!1),this.selected=void 0,this.scratch=void 0,super.cleanUp()},this.stage=e,this.dialog.style.maxWidth="380px",this.setContent(`\n            <div id="super-sharp-content" style="flex:0 0 auto;width:100%;position:relative;overflow: hidden;">\n                <div id="generative-expand-base" style="padding:20px;overflow: hidden;">\n    \n                    <section id="super-sharp-no-layer">\n                        <span class="tip top-20"><img src="/img/icon/tip-lock.svg" width="16" height="16" loading="lazy" class="tip-icon ic"/>${(0,a.A)("genericNoImageMessage")}</span>\n                    </section>\n\n                    <div id="super-sharp-desc" class="tip" style="gap: 2px;"><img src="/img/icon/tip-bulb.svg" width="16" height="16" loading="lazy" class="tip-icon ic"/>\n                        <span>${(0,a.A)("superSharpDesc")}</span>\n                    </div>\n                \n                    <div id="super-sharp-execute" class="button positive top-30" style="width: 100%; height: 34px;"><img src="/img/tool/wand.svg" width="18" height="18" loading="lazy">${(0,a.A)("superSharp")} (1c)</div>\n                    <div id="super-sharp-compare" style="padding: 30px 40px 10px 40px">\n                        <a class="button outline flow-down w-100" tooltip="${(0,a.A)("holdDown")}" flow="up"><img src="/img/icon/compare-small.svg" class="ic" width="16" height="16" loading="lazy">${(0,a.A)("compare")}</a>\n                    </div>\n\n                </div>\n               \n            </div>\n        `),(0,i.Ay)(`dialog-buttons${this.mid}`).insertBefore((0,i.T)("div",{id:"super-sharp-credit-count",className:"credit-meter",onclick:this.showCreditPop},""),(0,i.Ay)(`dialog-cancel${this.mid}`)),document.addEventListener("layer-select",this.layerSelect,!1),(0,i.Ay)("super-sharp-execute").addEventListener("click",this.execute,!1),(0,i.Ay)("super-sharp-compare").addEventListener("mousedown",this.compareDown,!1),(0,i.Ay)("super-sharp-compare").addEventListener("touchstart",this.compareDown,!1),(0,i.Ay)("super-sharp-compare").addEventListener("mouseup",this.compareUp,!1),(0,i.Ay)("super-sharp-compare").addEventListener("touchend",this.compareUp,!1),new h.A((0,i.Ay)("super-sharp-content")),this.layerSelect(),this.renderCreditAmount()}}},56289:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataRiskStandalone=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataRiskStandalone=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"PayPal_CountryCode",baseName:"PayPal.CountryCode",type:"string"},{name:"PayPal_EmailId",baseName:"PayPal.EmailId",type:"string"},{name:"PayPal_FirstName",baseName:"PayPal.FirstName",type:"string"},{name:"PayPal_LastName",baseName:"PayPal.LastName",type:"string"},{name:"PayPal_PayerId",baseName:"PayPal.PayerId",type:"string"},{name:"PayPal_Phone",baseName:"PayPal.Phone",type:"string"},{name:"PayPal_ProtectionEligibility",baseName:"PayPal.ProtectionEligibility",type:"string"},{name:"PayPal_TransactionId",baseName:"PayPal.TransactionId",type:"string"},{name:"avsResultRaw",baseName:"avsResultRaw",type:"string"},{name:"bin",baseName:"bin",type:"string"},{name:"cvcResultRaw",baseName:"cvcResultRaw",type:"string"},{name:"riskToken",baseName:"riskToken",type:"string"},{name:"threeDAuthenticated",baseName:"threeDAuthenticated",type:"string"},{name:"threeDOffered",baseName:"threeDOffered",type:"string"},{name:"tokenDataType",baseName:"tokenDataType",type:"string"}]},56479:(e,t,s)=>{s.d(t,{Ug:()=>n,d8:()=>a});class i{constructor(e){this.internal=e}send(e,t){this.internal.postMessage(e,t)}async receive(){return await new Promise((e,t)=>{this.internal.onmessage=t=>{this.internal.onerror=void 0,this.internal.onmessage=void 0,e(t.data)},this.internal.onerror=t})}terminate(){var e;null===(e=this.internal)||void 0===e||e.terminate(),this.internal=null}}class a extends i{constructor(){super(new Worker(new URL(s.p+s.u(1161),s.b)))}}class n extends i{constructor(){super(new Worker(new URL(s.p+s.u(2904),s.b)))}}},56480:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(54738),a=s(22866),n=s(41915);class r extends a.A{constructor(){super(a.A.TYPE_SCRATCH),this.renderMode="none",this.setRenderMode=e=>{this.renderMode=e},this.calculate=(e,t,s)=>{this.canvas&&(this.rect.x=Math.round(e.x),this.rect.y=Math.round(e.y),this.rect.width=Math.round(t.x-e.x),this.rect.width<10&&(this.rect.width=10),0!==s?this.rect.height=Math.round(this.rect.width/s):(this.rect.height=Math.round(t.y-e.y),this.rect.height<10&&(this.rect.height=10)))},this.clear=e=>{e?i.tN(this.canvas,e,new n.A(0,0)):this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.baked&&this.btx.clearRect(0,0,this.baked.width,this.baked.height)},this.addBake=()=>{this.baked=i.oM(this.canvas),this.btx=this.baked.getContext("2d"),this.btx.imageSmoothingEnabled=!1},this.getCanvas=()=>this.baked?this.baked:this.canvas,this.applySelection=e=>{if(e.fresco.hasSelection()){let t=this.baked?this.btx:this.ctx;t.save(),this.baked&&(t.globalCompositeOperation="copy",t.drawImage(this.canvas,0,0)),t.globalCompositeOperation="destination-in",t.drawImage(e.fresco.selection.mask,-this.rect.x,-this.rect.y),t.restore()}},this.drawCanvas=(e,t="source-over",s=1)=>{e&&(this.ctx.save(),this.ctx.save(),this.ctx.globalAlpha=s,this.ctx.globalCompositeOperation=t,this.ctx.drawImage(e,0,0,e.width,e.height),this.ctx.restore())},this.drawToLayer=(e,t="source-over",s=1)=>{if(e&&e.canvas&&e.rect)if(e.type===a.A.TYPE_FRAME){this.canvas.width===e.canvas.width&&this.canvas.height===e.canvas.height||(e.canvas.width=this.canvas.width,e.canvas.height=this.canvas.height);const t=e.canvas.getContext("2d");t.imageSmoothingEnabled=!1,t.clearRect(0,0,e.canvas.width,e.canvas.height),t.drawImage(this.canvas,0,0)}else{const i=e.canvas.getContext("2d");if(i.save(),i.globalAlpha=s,i.imageSmoothingEnabled=!1,i.globalCompositeOperation=t,this.rect.rotation){i.imageSmoothingQuality="high",i.imageSmoothingEnabled=!0;let e=this.rect.x+.5*this.rect.width,t=this.rect.y+.5*this.rect.height;i.save(),i.translate(e,t),i.rotate(this.rect.rotation*Math.PI/180),i.drawImage(this.baked?this.baked:this.canvas,-.5*this.rect.width,-.5*this.rect.height,this.rect.width,this.rect.height),i.restore()}else i.drawImage(this.baked?this.baked:this.canvas,Math.round(this.rect.x-e.rect.x),Math.round(this.rect.y-e.rect.y),this.rect.width,this.rect.height);i.restore()}}}setTarget(e,t,s,a){this.id=e,this.rect=t.clone(),this.renderMode=s,this.canvas=a?i.oM(a):i.Nw(t.width,t.height),this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.baked=void 0,this.btx=void 0}}},56709:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(54738),a=s(53900),n=s(26931);class r{constructor(e,t=24,s=1,r=!1,o=!1){this.requestFrame=async()=>{if(this.currentFrame+=1,this.currentFrame>this.totalFrames)return void this.cancel();const e=this.currentFrame*this.interval,t=new a.A(this.fresco.width,this.fresco.height);for(const s of this.animators)s.step(e,t);return this.stage.renderOutputFrame(this.ctx,this.inclusive,this.transparency),1!==this.scale?(await i.D9(),await i.j4(this.output,this.scaled.width,this.scaled.height,this.scaled)):this.output},this.cancel=()=>{if(this.animators)for(const e of this.animators)e.finish()},this.scale=s,this.stage=e,this.fresco=e.fresco,this.inclusive=o,this.transparency=r,this.animators=[];let h=this.fresco.width,c=this.fresco.height;if(h%2==1&&(h-=1),c%2==1&&(c-=1),this.output=i.Nw(h,c),1!==s){let e=Math.round(this.fresco.width*s),t=Math.round(this.fresco.height*s);e%2==1&&(e-=1),t%2==1&&(t-=1),this.scaled=i.Nw(e,t)}this.ctx=this.output.getContext("2d"),this.animators=n.A.bakeAnimators(e.fresco),this.runTime=0;for(const i of this.animators)this.runTime=Math.max(this.runTime,i.getDuration()),i.prepare(new a.A(this.fresco.width,this.fresco.height));this.currentFrame=0,this.interval=1e3/t,this.totalFrames=Math.ceil((this.runTime+50)/1e3)*t}}},56983:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutThreeDS2Action=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutThreeDS2Action=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"authorisationToken",baseName:"authorisationToken",type:"string"},{name:"paymentData",baseName:"paymentData",type:"string"},{name:"paymentMethodType",baseName:"paymentMethodType",type:"string"},{name:"subtype",baseName:"subtype",type:"string"},{name:"token",baseName:"token",type:"string"},{name:"type",baseName:"type",type:"CheckoutThreeDS2Action.TypeEnum"},{name:"url",baseName:"url",type:"string"}],function(e){let t;!function(e){e.ThreeDs2="threeDS2"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CheckoutThreeDS2Action||(t.CheckoutThreeDS2Action={}))},57346:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(42268),a=s(54738),n=s(75770),r=s(82042),o=s(15818),h=s(59350),c=s(71499),l=s(21742);class d extends n.A{constructor(e){super("liquify",e),this.timedStroke=!1,this.keyDown=e=>{if(","===e.key||"."===e.key){switch(e.key){case",":this.size.setValue(this.size.getValue()-10);break;case".":this.size.setValue(this.size.getValue()+10)}this.updateBrush()}},this.layerSelect=async()=>{const{Displacement:e}=await Promise.resolve().then(s.bind(s,82355));if(!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("liquify-no-layer").style.display="flex",(0,i.Ay)("liquify-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("liquify-settings").style.display="flex",(0,i.Ay)("liquify-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.settings.blendmode=this.selected.settings.blendmode,this.scratch.settings.opacity=this.selected.settings.opacity,this.scratch.setTarget(this.selected.id,this.selected.rect,"replace"),this.scratch.ctx.drawImage(this.selected.canvas,0,0);const t=this.selected.canvas.getContext("2d").getImageData(0,0,this.selected.canvas.width,this.selected.canvas.height);if(this.displacement)this.displacement.retarget(t.data,t.width,t.height);else{this.displacement=new e(t.data,t.width,t.height,this.size.getValue(),this.strength.getValue(),this.density.getValue());const s=document.querySelector('input[name="liquify-mode"]:checked').value;this.setMode(s),this.brush.settings.size=this.size.getValue()}this.updateBrush(),this.stage.render()},this.selectMode=e=>{this.setMode(e.currentTarget.value)},this.setMode=e=>{var t;this.timedStroke="MOVE"!==e,null===(t=this.displacement)||void 0===t||t.setMode(e)},this.updateBrush=()=>{var e;this.brush.settings.size=this.size.getValue(),null===(e=this.displacement)||void 0===e||e.setStampSize(this.size.getValue()),this.brush.generate(),this.selected?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom,new o.A(255,255,255,255))):this.stage.coating.removeCursorImage()},this.down=(e,t)=>{this.selected&&this.displacement&&(this.stage.coating.freeze(!0),this.stroke=this.displacement.beginStroke(),this.highQualityStroke=(0,i.Ay)("liquify-hq-preview").checked,"touch"!==t&&this.move(e),this.addMoveListeners())},this.move=e=>{const t=this.stage.translateRasterToFresco(e,this.selected.rect),s=this.stroke.push(t.x,t.y,this.timedStroke);if(s){this.strokeDamage=s.union(this.strokeDamage);const e=this.highQualityStroke?this.displacement.applyQuality(s):this.displacement.applyFast(s);this.scratch.ctx.putImageData(new ImageData(e,s.width,s.height),s.x,s.y),window.requestAnimationFrame(()=>this.stage.render())}this.timedStroke&&(window.clearTimeout(this.strokeTimeout),this.strokeTimeout=window.setTimeout(()=>this.move(e),16))},this.up=e=>{var t;if(null===(t=this.stroke)||void 0===t||t.free(),this.stroke=void 0,window.clearTimeout(this.strokeTimeout),this.removeMoveListeners(),!this.displacement||!this.strokeDamage)return;const s=this.strokeDamage;if(this.strokeDamage=void 0,!this.highQualityStroke){let e=this.displacement.applyQuality(s);this.scratch.ctx.putImageData(new ImageData(e,s.width,s.height),s.x,s.y),window.requestAnimationFrame(()=>this.stage.render())}const i=a.ON(this.selected.canvas,s),n=this.selected.rect.clone(),r=this.selected.canvas.getContext("2d");r.clearRect(s.x,s.y,s.width,s.height),r.drawImage(this.scratch.canvas,s.x,s.y,s.width,s.height,s.x,s.y,s.width,s.height),this.scratch.clear(),this.scratch.ctx.drawImage(this.selected.canvas,0,0),this.selected.render(),this.stage.render(),this.stage.history.add({type:"bitmapChange",kind:"liquify",layer:this.selected,patchRect:s,patch:i,rect:n})},this.cleanUp=()=>{var e,t,s;null===(e=this.displacement)||void 0===e||e.free(),null===(t=this.stroke)||void 0===t||t.free(),null===(s=this.stage.fresco)||void 0===s||s.removeScratch(),this.removeDownListeners(),this.size.cleanUp(),this.strength.cleanUp(),this.density.cleanUp(),document.removeEventListener("zoom-change",this.updateBrush,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.keyDown,!1),document.getElementsByName("liquify-mode").forEach(e=>{e.removeEventListener("click",this.selectMode,!1)})},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),document.addEventListener("keydown",this.keyDown,!1),document.getElementsByName("liquify-mode").forEach(e=>{e.addEventListener("click",this.selectMode,!1)}),this.brush=new h.A(new c.A("circle",50,0)),this.size=new r.A("liquify-brush-size",{compact:!0,label:(0,l.A)("size")+":",step:2,range:[5,500],defaultValue:50,labelFormat:e=>e.toFixed(0),onEnd:()=>this.updateBrush()}),this.strength=new r.A("liquify-brush-strength",{compact:!0,label:(0,l.A)("strength")+":",range:[.01,1],defaultValue:.5,step:.01,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onEnd:e=>{var t;return null===(t=this.displacement)||void 0===t?void 0:t.setStrength(e)}}),this.density=new r.A("liquify-brush-density",{compact:!0,label:(0,l.A)("density")+":",range:[0,.95],defaultValue:.5,step:.01,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onEnd:e=>{var t;return null===(t=this.displacement)||void 0===t?void 0:t.setDensity(e)}}),this.addDownListeners(),this.layerSelect()}}},57653:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e,t,s){this.framebuffer=e,this.renderbuffer=t,this.texture=s}destroy(e){e.deleteFramebuffer(this.framebuffer),e.deleteRenderbuffer(this.renderbuffer),e.deleteTexture(this.texture)}}},57695:(e,t,s)=>{s.a(e,async(e,i)=>{try{s.d(t,{A:()=>ut});var a=s(42268),n=s(40963),r=s(98244),o=s(41915),h=s(22866),c=s(69424),l=s(87852),d=s(54738),p=s(15818),u=s(86344),m=s(16377),g=s(36854),y=s(91601),v=s(37694),f=s(6709),b=s(94121),w=s(96666),A=s(56256),x=s(98483),k=s(39989),S=s(96785),E=s(93771),T=s(29755),C=s(40562),M=s(46207),P=s(13791),D=s(18505),N=s(44146),L=s(89352),R=s(87971),_=s(74298),I=s(27983),F=s(66544),z=s(58435),O=s(21164),q=s(7623),B=s(12895),U=s(2006),H=s(45432),V=s(17550),$=s(99189),j=s(58e3),G=s(81551),W=s(64019),X=s(93354),Y=s(14887),K=s(60492),Z=s(18252),Q=s(15047),J=s(38046),ee=s(95362),te=s(22220),se=s(55098),ie=s(54907),ae=s(50816),ne=s(71419),re=s(92270),oe=s(28329),he=s(72617),ce=s(98762),le=s(25069),de=s(15923),pe=s(70586),ue=s(55614),me=s(17096),ge=s(15872),ye=s(49143),ve=s(26824),fe=s(4380),be=s(18177),we=s(34475),Ae=s(16040),xe=s(47378),ke=s(78360),Se=s(11980),Ee=s(66496),Te=s(3729),Ce=s(16499),Me=s(77441),Pe=s(69504),De=s(35722),Ne=s(78282),Le=s(33850),Re=s(54975),_e=s(10809),Ie=s(69429),Fe=s(39612),ze=s(79522),Oe=s(99810),qe=s(85806),Be=s(98865),Ue=s(23580),He=s(97802),Ve=s(61161),$e=s(89373),je=s(4059),Ge=s(18155),We=s(4894),Xe=s(22400),Ye=s(53226),Ke=s(411),Ze=s(55949),Qe=s(87257),Je=s(57346),et=s(69175),tt=s(75707),st=s(19883),it=s(38135),at=s(72357),nt=s(9735),rt=s(90593),ot=s(57906),ht=s(48373),ct=s(59423),lt=s(64872),dt=e([C]),pt=dt.then?(await dt)():dt;C=pt[0];class ut extends C.A{constructor(){super(),this.hasDock=!1,this.isKeyDown=!1,this.isPreviewMode=!1,this.initial=!0,this.resize=()=>{if(this.stage&&(0,a.Ay)("menu-bar")){if(this.isPreviewMode)this.stage.resize(0,0,this.stage.workspace.offsetWidth,this.stage.workspace.offsetHeight-1);else{let e=T.Ay.barQuicklink?(0,a.Ay)("right-bar").offsetWidth+1:0,t=T.Ay.panelFloating?0:(0,a.Ay)("menu-bar").offsetWidth+1,s=T.Ay.panelFloating?46:(0,a.Ay)("panel-bar").offsetWidth+1,i="none"===(0,a.Ay)("tab-bar").style.display?0:33;this.stage.resize(t,77+i,this.stage.workspace.offsetWidth-t-s-e,this.stage.workspace.offsetHeight-77-i),(0,a.Ay)("panel-bar").style.right=e+"px"}this.tabBar&&this.tabBar.resize(),this.scrollbar&&this.scrollbar.resize(),this.tool&&"crop"===this.tool.name&&this.tool.refit(),this.initial&&(this.positionFloatingPanels(),this.initial=!1)}},this.togglePreviewMode=()=>{var e,t;this.isSplash()||this.isModal()||(this.isPreviewMode=!this.isPreviewMode,this.isPreviewMode?((0,a.Ay)("top-bar").style.display="none",(0,a.Ay)("panel-bar").style.display="none",(0,a.Ay)("right-bar").style.display="none",(0,a.Ay)("menu-bar").style.display="none",(0,a.Ay)("tab-bar").style.display="none",this.tool instanceof Qe.A&&(null===(e=this.tool.reform)||void 0===e||e.supress(!0))):((0,a.Ay)("panel-bar").style.display="flex",(0,a.Ay)("top-bar").style.display="block",(0,a.Ay)("menu-bar").style.display="block",T.Ay.barQuicklink&&((0,a.Ay)("right-bar").style.display="flex"),this.tabBar.render(),this.tool instanceof Qe.A&&(null===(t=this.tool.reform)||void 0===t||t.supress(!1))),this.resize())},this.keyDown=async e=>{var t;const s=document.activeElement;if(d.Jn(s))"Enter"===e.key&&"TEXTAREA"!==s.nodeName&&document.activeElement.blur();else if(this.isSplash())"Escape"===e.key&&this.stage.fresco&&this.hideSplash();else if("Control"!==e.key&&"Shift"!==e.key&&" "!==e.key&&this.tool instanceof Qe.A&&(null===(t=this.tool.selectron)||void 0===t||t.cleanCut()),!this.isModal())if(e.ctrlKey||e.metaKey)switch(e.key.toLowerCase()){case"a":return e.preventDefault(),void this.stage.selectionAll();case"b":return e.preventDefault(),void new K.A(this.stage);case"d":return e.preventDefault(),void(this.stage.fresco.hasSelection()?this.stage.selectionDeselect():await this.stage.duplicateLayer());case"e":return e.preventDefault(),void this.newClick();case"i":return e.preventDefault(),void this.stage.selectionInvert();case"j":return e.preventDefault(),void this.stage.pasteFromSelection();case"m":return e.preventDefault(),void(this.stage.fresco&&this.stage.fresco.isSelectedShaderbleWithCanvas()&&new B.A(this.stage));case"l":return e.preventDefault(),void(this.stage.fresco&&this.stage.fresco.isSelectedShaderbleWithCanvas()&&new U.A(this.stage));case"o":return e.preventDefault(),void this.openClick();case"s":return e.preventDefault(),void this.saveClick();case"p":return e.preventDefault(),void this.print();case"u":return e.preventDefault(),void(this.stage.fresco&&this.stage.fresco.isSelectedShaderbleWithCanvas()&&new I.A(this.stage));case"w":case"q":return e.preventDefault(),void this.closeClick();case"r":return e.preventDefault(),void this.setTool("arrange",!0,"TRANSFORM");case"k":return e.preventDefault(),void this.setTool("arrange",!0,"DISTORT");case"z":return e.preventDefault(),void(e.shiftKey?this.stage.history.redo():this.stage.history.undo());case"y":return e.preventDefault(),void this.stage.history.redo();case"0":return e.preventDefault(),void this.stage.setZoom("fit");case"1":return e.preventDefault(),void this.stage.setZoom("1");case"2":return e.preventDefault(),void this.stage.setZoom("fill");case"3":return e.preventDefault(),void this.stage.setZoom("3");case"6":return e.preventDefault(),void this.stage.mergeDown();case"7":return e.preventDefault(),void this.stage.mergeVisible();case"8":return e.preventDefault(),void this.stage.mergeFlatten();case"4":return e.preventDefault(),void this.stage.moveUp();case"5":return e.preventDefault(),void this.stage.moveDown();case"-":return e.preventDefault(),void this.stage.setZoomStep(!1);case"+":case"=":return e.preventDefault(),void this.stage.setZoomStep(!0);case"enter":return void this.stage.playAnimation()}else{if(" "===e.key&&(!this.tool||"hand"!==this.tool.name))return this.stage.coating.setPan(),void e.preventDefault();if("Tab"===e.key)return e.preventDefault(),void this.togglePreviewMode();if("Escape"===e.key)return this.isPreviewMode&&this.togglePreviewMode(),void(this.tool&&this.tool.cancel());if("Enter"!==e.key)if("Delete"!==e.key&&"Backspace"!==e.key)switch(e.key.toLowerCase()){case"a":this.setTool("replace");break;case"b":this.setTool("draw");break;case"c":this.setTool("crop");break;case"d":this.setTool("detail");break;case"e":this.setTool("eraser");break;case"f":this.setTool("fill");break;case"g":this.setTool("gradient");break;case"h":this.setTool("heal");break;case"i":this.setTool("picker");break;case"j":this.setTool("focus");break;case"k":this.setTool("cutout");break;case"l":this.setTool("lasso");break;case"m":this.setTool("marquee");break;case"n":this.setTool("frame");break;case"o":this.setTool("toning");break;case"p":this.setTool("pen");break;case"q":this.setTool("liquify");break;case"r":this.setTool("temper");break;case"s":this.setTool("clone");break;case"t":this.setTool("text");break;case"u":this.setTool("shape");break;case"v":this.setTool("arrange");break;case"w":this.setTool("wand");break;case"x":this.switchColor();break;case"y":this.setTool("disperse");break;case"z":this.setTool("zoom")}else this.stage.fresco&&(this.stage.fresco.hasSelection()?this.clear():this.stage.deleteLayer(),e.preventDefault());else this.tool&&this.tool.apply()}},this.keyUp=e=>{this.isModal()?e.preventDefault():" "!==e.key||this.tool&&"hand"===this.tool.name||this.stage.coating.removePan()},this.setUpTopBar=()=>{var e;null===(e=(0,a.Ay)("toggle-home"))||void 0===e||e.addEventListener("click",()=>{var e;null===(e=this.tool)||void 0===e||e.apply(),this.showSplash()},!1);let t=(0,a.Ay)("menu").querySelectorAll("#menu>li>label");for(var s=0;s<t.length;s++)t[s].addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),(0,a.Ay)("menu").classList.toggle("active");const t=e=>{e.target.classList.contains("more")||((0,a.Ay)("menu").classList.remove("active"),document.removeEventListener("click",t,!1))};document.addEventListener("click",t,!1)},!0);const i=(e,t)=>{(0,a.Ay)(e).addEventListener("click",()=>{var s;null===(s=this.stage)||void 0===s||s.stopAnimation(),"edit-undo"!==e&&"edit-redo"!==e&&this.tool&&(this.stage.history.commitTransaction(),this.tool.apply()),(e=>!(0,a.Ay)(e).classList.contains("disabled"))(e)&&t()},!0)},o=()=>{var e,t;let s=null===(e=this.stage.fresco)||void 0===e?void 0:e.getSelected(),i=this.stage.isSelectedLayerShaderble(),n=i&&s.type===h.A.TYPE_FRAME;const r=null===(t=this.stage.fresco)||void 0===t?void 0:t.hasSelection(),o=s&&s instanceof k.A&&s.hasMask();(0,a.Ay)("menu").querySelectorAll(".image").forEach(e=>{e.classList.toggle("disabled",!i),n&&e.classList.contains("noframe")&&e.classList.add("disabled")}),(0,a.Ay)("menu").querySelectorAll(".selection").forEach(e=>{e.classList.toggle("disabled",!r)}),(0,a.Ay)("menu").querySelectorAll(".mask").forEach(e=>{e.classList.toggle("disabled",!o)}),(0,a.Ay)("layer-merge-down").classList.toggle("disabled",!s),this.stage.fresco&&((0,a.Ay)("file-print").classList.toggle("disabled",this.stage.fresco.block),(0,a.Ay)("export-image").classList.toggle("disabled",this.stage.fresco.block),(0,a.Ay)("export-layer").classList.toggle("disabled",this.stage.fresco.block))};document.addEventListener("layer-select",o),document.addEventListener("history-update",async e=>{(0,a.Ay)("edit-undo").classList.toggle("disabled",e.detail&&e.detail.atStart),(0,a.Ay)("edit-redo").classList.toggle("disabled",e.detail&&e.detail.atEnd),o()}),i("file-new",this.newClick),i("file-save",this.saveClick),i("file-print",()=>this.print()),i("file-close",this.closeClick),i("file-open",this.openClick),i("file-open-url",()=>new m.A(this.stage)),i("file-add-element",()=>new K.A(this.stage)),i("export-image",()=>this.quickExport()),i("export-layer",()=>this.quickExport(!0)),i("edit-undo",()=>this.stage.history.undo()),i("edit-redo",()=>this.stage.history.redo()),i("edit-cut",()=>document.execCommand("cut")),i("edit-copy",()=>document.execCommand("copy")),i("edit-paste",()=>this.pasteActivatedFromMenu()),i("edit-clear",()=>this.clear()),i("edit-stroke",()=>new le.A(this.stage)),i("edit-fill",()=>new de.A(this.stage)),i("edit-infill",()=>new Ne.A(this.stage)),i("edit-free-transform",()=>this.setTool("arrange",!0,"TRANSFORM")),i("edit-free-distort",()=>this.setTool("arrange",!0,"DISTORT")),i("edit-rotate-left",()=>this.stage.rotateSelected(!0)),i("edit-rotate-right",()=>this.stage.rotateSelected(!1)),i("edit-flip-horizontal",()=>this.stage.flipSelected(!1)),i("edit-flip-vertical",()=>this.stage.flipSelected(!0)),i("edit-preferences",()=>new Ce.A(this.stage)),i("selection-all",()=>this.stage.selectionAll()),i("selection-deselect",()=>this.stage.selectionDeselect()),i("selection-invert",()=>this.stage.selectionInvert()),i("selection-pixels",()=>this.stage.selectionPixels()),i("selection-subject",()=>this.stage.selectionSubject()),i("selection-save",()=>this.stage.selectionSave()),i("selection-restore",()=>this.stage.selectionRestore()),i("selection-convert",()=>{this.stage.selectionConvert(),this.setTool("cutout")}),i("image-canvas-resize",()=>new v.A(this.stage)),i("image-resize",()=>new y.A(this.stage)),i("image-smart-resize",()=>new f.A(this.stage)),i("image-canvas-color",()=>new g.A(this.stage)),i("image-flip-vertical",()=>this.stage.flip(!0)),i("image-flip-horizontal",()=>this.stage.flip(!1)),i("image-rotate-left",()=>this.stage.rotate(!0)),i("image-rotate-right",()=>this.stage.rotate(!1)),i("image-crop",()=>{if(this.stage.fresco.hasSelection()){const e=new n.A(this.stage.fresco.selection.bounds.x,this.stage.fresco.selection.bounds.y,this.stage.fresco.selection.bounds.width,this.stage.fresco.selection.bounds.height);this.stage.selectionDeselect(),this.stage.crop(e)}}),i("image-trim",()=>{let e=this.stage.getOutputCanvas(this.stage.fresco,1),t=d.TL(e);t.width>0&&t.height>0&&this.stage.crop(t)}),i("image-generative-expand",()=>{new b.A(this.stage),this.resize()}),i("image-super-scale",()=>{new w.A(this.stage),this.resize()}),i("layer-new",()=>this.stage.addEmpty()),i("layer-open",async()=>{(0,r.A)("open-browse"),await(0,E.XN)(!0).then(async e=>{document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));for(let t=0;t<e.length;t++)await(0,E.Tq)(e[t],this.stage,!1);document.dispatchEvent(new CustomEvent("loading",{detail:"stop"}))})}),i("layer-url",()=>new m.A(this.stage,!1)),i("layer-add-element",()=>new K.A(this.stage)),i("layer-duplicate",async()=>await this.stage.duplicateLayer()),i("layer-delete",()=>this.stage.deleteLayer()),i("layer-merge-down",()=>this.stage.mergeDown()),i("layer-merge-visible",()=>this.stage.mergeVisible()),i("layer-merge-flatten",()=>this.stage.mergeFlatten()),i("layer-move-up",()=>this.stage.moveUp()),i("layer-move-down",()=>this.stage.moveDown()),i("layer-rasterize",()=>this.stage.rasterize()),i("layer-ai-mask",()=>new u.A(this.stage)),i("layer-add-mask",()=>{this.stage.maskAdd(),this.setTool("cutout")}),i("layer-convert-mask",()=>{this.stage.maskConvert(),this.setTool("arrange")}),i("layer-extract-mask",()=>this.stage.maskExtract()),i("layer-invert-mask",()=>this.stage.maskInvert()),i("layer-delete-mask",()=>this.stage.maskDelete()),i("layer-apply-mask",()=>this.stage.maskApply()),i("adjust-auto",()=>new rt.A(this.stage)),i("adjust-pop",()=>new nt.A(this.stage)),i("adjust-bw",()=>new at.A(this.stage)),i("adjust-brightness-contrast",()=>new L.A(this.stage)),i("adjust-temperature-tint",()=>new _.A(this.stage)),i("adjust-hue-saturation",()=>new I.A(this.stage)),i("adjust-vibrance",()=>new z.A(this.stage)),i("adjust-balance",()=>new q.A(this.stage)),i("adjust-highlights-shadows",()=>new R.A(this.stage)),i("adjust-exposure",()=>new O.A(this.stage)),i("adjust-monochrome",()=>new F.A(this.stage)),i("adjust-curves",()=>new B.A(this.stage)),i("adjust-levels",()=>new U.A(this.stage)),i("adjust-threshold",()=>new pe.A(this.stage)),i("adjust-alphaThreshold",()=>new ue.A(this.stage)),i("adjust-posterize",()=>new Z.A(this.stage)),i("adjust-desaturate",()=>new lt.A(this.stage)),i("adjust-invert",()=>new ot.A(this.stage)),i("adjust-solarize",()=>new ct.A(this.stage)),i("adjust-mimichdr",()=>new ke.A(this.stage)),i("adjust-lookup",()=>new me.A(this.stage)),i("filter-effect",()=>new H.A(this.stage)),i("filter-super-sharp",()=>new A.A(this.stage)),i("filter-remove-noise",()=>new x.A(this.stage)),i("filter-drop-shadow",()=>new ge.A(this.stage)),i("filter-outline",()=>new le.A(this.stage)),i("filter-outer-glow",()=>new ye.A(this.stage)),i("filter-inner-glow",()=>new ve.A(this.stage)),i("filter-bevel",()=>new be.A(this.stage)),i("filter-sharpen",()=>new V.A(this.stage)),i("filter-clarity",()=>new $.A(this.stage)),i("filter-blur",()=>new j.A(this.stage)),i("filter-zoom-blur",()=>new G.A(this.stage)),i("filter-gaussian-blur",()=>new W.A(this.stage)),i("filter-motion-blur",()=>new X.A(this.stage)),i("filter-radial-blur",()=>new Y.A(this.stage)),i("filter-smooth",()=>new Q.A(this.stage)),i("filter-denoise",()=>new J.A(this.stage)),i("filter-bloom",()=>new ee.A(this.stage)),i("filter-glamour",()=>new te.A(this.stage)),i("filter-fringe",()=>new re.A(this.stage)),i("filter-rgb-split",()=>new Ee.A(this.stage)),i("filter-scanlines",()=>new Te.A(this.stage)),i("filter-interference",()=>new Me.A(this.stage)),i("filter-slice",()=>new we.A(this.stage)),i("filter-grain",()=>new se.A(this.stage)),i("filter-noise",()=>new ie.A(this.stage)),i("filter-dehaze",()=>new ae.A(this.stage)),i("filter-vignette",()=>new ne.A(this.stage)),i("filter-pixelate",()=>new oe.A(this.stage)),i("filter-mosaic",()=>new he.A(this.stage)),i("filter-halftone",()=>new fe.A(this.stage)),i("filter-sobel",()=>new ht.A(this.stage)),i("filter-polarcoordinates",()=>new De.A(this.stage)),i("filter-fish-eye",()=>new xe.A(this.stage)),i("filter-reflect",()=>new Se.A(this.stage)),i("filter-wave",()=>new Ae.A(this.stage)),i("filter-kaleidoscope",()=>new Pe.A(this.stage)),i("view-restore",()=>this.restorePanel()),i("view-floating",()=>this.toggleFloatingPanel()),i("view-navigator",()=>this.togglePanel("navigator-panel")),i("view-layer",()=>this.togglePanel("layer-panel")),i("view-history",()=>this.togglePanel("history-panel")),i("view-quicklink",()=>this.toggleQuicklink()),i("view-zoom-in",()=>this.stage.setZoomStep(!0)),i("view-zoom-out",()=>this.stage.setZoomStep(!1)),i("view-zoom-fit",()=>this.stage.setZoom("fit")),i("view-zoom-fill",()=>this.stage.setZoom("fill")),i("view-zoom-1x",()=>this.stage.setZoom("1")),i("view-zoom-2x",()=>this.stage.setZoom("2")),i("view-zoom-3x",()=>this.stage.setZoom("3")),i("view-preview",()=>this.togglePreviewMode()),i("view-full-screen",()=>document.documentElement.requestFullscreen()),i("view-theme",()=>new Ce.A(this.stage)),i("help-shortcuts",()=>new ce.A),i("help-error-report",()=>new l.A(this.stage))},this.setUpMenuBar=()=>{const e=(0,a.Ay)("tool-menu").getElementsByTagName("li");for(var t=0;t<e.length;t++)e[t].addEventListener("click",e=>this.setTool(e.currentTarget.getAttribute("data")),!1),e[t].addEventListener("pointerenter",e=>this.showToolTip(e.currentTarget.getAttribute("data"),e),!1),e[t].addEventListener("pointerleave",e=>this.hideToolTip(e.currentTarget.getAttribute("data"),e),!1);(0,a.Ay)("color-main").style.backgroundColor=T.Ay.mainColor,(0,a.Ay)("color-main").addEventListener("click",()=>new S.A(p.A.fromHEX(T.Ay.mainColor),e=>{this.setColor(e,!0)}),!1),(0,a.Ay)("color-alt").style.backgroundColor=T.Ay.altColor,(0,a.Ay)("color-alt").addEventListener("click",()=>new S.A(p.A.fromHEX(T.Ay.altColor),e=>{this.setColor(e,!1)}),!1),(0,a.Ay)("color-switch").addEventListener("click",this.switchColor,!1),(0,a.Ay)("tool-zoom").addEventListener("dblclick",()=>this.stage.setZoom("1"),!1),(0,a.Ay)("menu-bar").classList.toggle("floating",T.Ay.panelFloating),(0,a.Bb)((0,a.Ay)("menu-handle"),this.dragMenuStart,this.dragMenuMove,this.dragMenuUp),this.setTool("arrange")},this.setUpToolList=()=>{if(T.Ay.disabledTools.length>0){const t=(0,a.Ay)("tool-menu").getElementsByTagName("li");for(var e=0;e<t.length;e++)T.Ay.disabledTools.includes(t[e].getAttribute("data"))&&(t[e].style.display="none")}},this.hideNoneAPIControls=()=>{(0,a.Ay)("toggle-home").style.display="none",(0,a.Ay)("file-close").style.display="none"},this.dragMenuStart=e=>{this.p=e,this.d=new o.A((0,a.Ay)("menu-bar").offsetLeft,(0,a.Ay)("menu-bar").offsetTop)},this.dragMenuMove=e=>{(0,a.Ay)("menu-bar").style.left=Math.round(this.d.x+(e.x-this.p.x))+"px",(0,a.Ay)("menu-bar").style.top=Math.round(this.d.y+(e.y-this.p.y))+"px"},this.dragMenuUp=e=>{let t=Math.round(this.d.y+(e.y-this.p.y)),s=Math.round(this.d.x+(e.x-this.p.x));t<76&&(t=76),s<0&&(s=0),s+72>(0,a.Ay)("workspace").offsetWidth&&(s=(0,a.Ay)("workspace").offsetWidth-72),(0,a.Ay)("menu-bar").style.left=s+"px",(0,a.Ay)("menu-bar").style.top=t+"px"},this.setColorEvent=e=>{const t=e.detail;(0,T.oY)(t),this.setColor(t,!0)},this.setColor=(e,t)=>{let s=e.toHEX();t?((0,T.ZC)("mainColor",s),(0,a.Ay)("color-main").style.backgroundColor=s):((0,T.ZC)("altColor",s),(0,a.Ay)("color-alt").style.backgroundColor=s)},this.switchColor=()=>{let e=T.Ay.mainColor,t=T.Ay.altColor;(0,T.ZC)("altColor",e),(0,T.ZC)("mainColor",t),(0,a.Ay)("color-main").style.backgroundColor=t,(0,a.Ay)("color-alt").style.backgroundColor=e},this.resetColor=()=>{(0,T.ZC)("altColor","#FFFFFF"),(0,T.ZC)("mainColor","#000000"),(0,a.Ay)("color-main").style.backgroundColor="#000000",(0,a.Ay)("color-alt").style.backgroundColor="#FFFFFF"},this.setUpRightBar=()=>{T.Ay.barQuicklink||((0,a.Ay)("right-bar").style.display="none"),(0,a.Ay)("shortcut-save").addEventListener("click",this.saveClick),(0,a.Ay)("shortcut-navigator").addEventListener("click",()=>this.togglePanel("navigator-panel")),(0,a.Ay)("shortcut-layers").addEventListener("click",()=>this.togglePanel("layer-panel")),(0,a.Ay)("shortcut-history").addEventListener("click",()=>this.togglePanel("history-panel"))},this.setUpPanelBar=()=>{this.tabBar=new M.A(this),this.layerPanel=new P.A(this.stage,T.Ay.panelLayer),this.historyPanel=new D.A(this.stage,T.Ay.panelHistory),this.navigatorPanel=new N.A(this.stage,T.Ay.panelNavigator),this.scrollbar=new c.A(this.stage),(T.Ay.panelLayer||T.Ay.panelHistory||T.Ay.panelNavigator)&&(0,a.Ay)("panel-bar").classList.add("active"),(0,a.Ay)("panel-bar").classList.toggle("floating",T.Ay.panelFloating)},this.togglePanel=e=>{const t=!(0,a.Ay)(e).classList.contains("active");switch(e){case"navigator-panel":(0,T.ZC)("panelNavigator",t),this.navigatorPanel.activate(t);break;case"layer-panel":(0,T.ZC)("panelLayer",t),this.layerPanel.activate(t);break;case"history-panel":(0,T.ZC)("panelHistory",t),this.historyPanel.activate(t)}let s=!1;const i=(0,a.Ay)("panel-bar").getElementsByClassName("panel");for(let a=0;a<i.length;a++)if(i[a].classList.contains("active")){s=!0;break}(0,a.Ay)("panel-bar").classList.toggle("active",s),T.Ay.panelFloating?t&&((0,a.Ay)(e).style.left=~~(((0,a.Ay)("workspace").clientWidth-240)/2)+"px",(0,a.Ay)(e).style.top=~~(((0,a.Ay)("workspace").clientHeight-70)/2)+"px"):this.resize()},this.toggleQuicklink=()=>{const e="none"===(0,a.Ay)("right-bar").style.display;(0,T.ZC)("barQuicklink",e),(0,a.Ay)("right-bar").style.display=e?"flex":"none",this.resize()},this.restorePanel=()=>{(0,a.Ay)("panel-bar").classList.remove("floating"),(0,a.Ay)("menu-bar").classList.remove("floating"),(0,a.Ay)("panel-bar").classList.add("active"),this.navigatorPanel.activate(!0),this.layerPanel.activate(!0),this.historyPanel.activate(!0),(0,T.ZC)("panelNavigator",!0),(0,T.ZC)("panelLayer",!0),(0,T.ZC)("panelHistory",!0),(0,T.ZC)("panelFloating",!1),this.positionFloatingPanels(),this.resize()},this.toggleFloatingPanel=()=>{const e=!T.Ay.panelFloating;(0,T.ZC)("panelFloating",e),(0,a.Ay)("panel-bar").classList.toggle("floating"),(0,a.Ay)("menu-bar").classList.toggle("floating"),this.resize()},this.positionFloatingPanels=()=>{const e=(0,a.Ay)("menu-bar");e.style.top="100px",e.style.left="20px";const t=(0,a.Ay)("workspace").offsetWidth-51,s=(0,a.Ay)("workspace").offsetHeight;let i=100;if(this.navigatorPanel.active){const e=(0,a.Ay)("navigator-panel");e.style.top=i+"px",e.style.left=t-260+"px",i+=e.offsetHeight+20}let n=Math.min(~~(s-i)/2-20,300);if(this.layerPanel.active&&this.historyPanel.active||(n*=2),this.layerPanel.active){const e=(0,a.Ay)("layer-panel");e.style.top=i+"px",e.style.left=t-260+"px",e.style.height=n+"px",i+=n+20}if(this.historyPanel.active){const e=(0,a.Ay)("history-panel");e.style.top=i+"px",e.style.left=t-260+"px",e.style.height=n+"px"}},this.hovering=!1,this.selectToolEvent=e=>{window.clearTimeout(this.onit),window.clearTimeout(this.offit),e&&e.detail?this.setTool(e.detail,!0):this.setTool("arrange")},this.setTool=async(e,t=!1,s)=>{var i;if(!T.Ay.disabledTools.includes(e)&&(null===(i=this.stage)||void 0===i||i.stopAnimation(),t||!this.tool||this.tool.name!==e)){switch(this.tool&&((0,a.Ay)("tool-"+this.tool.name).classList.remove("active"),(0,a.Ay)(this.tool.name).classList.remove("active"),this.tool.cleanUp(),this.tool=void 0,this.stage.coating.removeCursorImage()),e){case"crop":this.tool=new _e.A(this.stage);break;case"cutout":this.tool=new Ge.A(this.stage);break;case"frame":this.tool=new Ue.A(this.stage);break;case"arrange":this.tool=new Qe.A(this.stage,s||"ARRANGE");break;case"marquee":this.tool=new et.A(this.stage);break;case"lasso":this.tool=new $e.A(this.stage);break;case"wand":this.tool=new Ie.A(this.stage);break;case"clone":this.tool=new He.A(this.stage);break;case"heal":this.tool=new qe.A(this.stage);break;case"detail":this.tool=new We.A(this.stage);break;case"toning":this.tool=new Xe.A(this.stage);break;case"temper":this.tool=new Ye.A(this.stage);break;case"focus":this.tool=new je.A(this.stage);break;case"disperse":this.tool=new it.A(this.stage);break;case"liquify":this.tool=new Je.A(this.stage);break;case"pen":this.tool=new Le.A(this.stage);break;case"fill":this.tool=new Oe.A(this.stage);break;case"draw":this.tool=new Be.A(this.stage);break;case"shape":this.tool=new Ve.A(this.stage);break;case"eraser":this.tool=new Ke.A(this.stage);break;case"replace":this.tool=new tt.A(this.stage);break;case"gradient":this.tool=new st.A(this.stage);break;case"text":this.tool=new Re.A(this.stage);break;case"zoom":this.tool=new Fe.A(this.stage);break;case"hand":this.tool=new ze.A(this.stage);break;case"picker":this.tool=new Ze.A(this.stage,(e,t)=>{(0,T.oY)(e),this.setColor(e,t)})}this.tool&&((0,a.Ay)("tooltip-"+this.tool.name).classList.remove("active"),(0,a.Ay)("tool-"+this.tool.name).classList.add("active"),(0,a.Ay)(this.tool.name).classList.add("active"))}},this.print=async()=>{let e=this.stage.getOutputCanvas(this.stage.fresco,1).toDataURL();var t=window.open("about:blank","_new");t.document.open(),t.document.write("<html><head><script>function step1(){\nsetTimeout('step2()', 10);}\nfunction step2(){window.print();window.close()}\n<\/script></head><body onload='step1()'>\n<img src='"+e+"' /></body></html>"),t.document.close()},window.onresize=()=>this.resize(),document.body.onkeydown=e=>this.keyDown(e),document.body.onkeyup=e=>this.keyUp(e),document.addEventListener("resize",()=>this.resize()),document.addEventListener("select-tool",this.selectToolEvent,!0),document.addEventListener("set-color",this.setColorEvent,!0),document.addEventListener("preferences",()=>new Ce.A(this.stage),!0),document.addEventListener("panel-state",e=>this.togglePanel(e.detail)),this.setUpTopBar(),this.setUpMenuBar(),this.setUpPanelBar(),this.setUpRightBar(),this.setUpToolList(),T.Ay.api&&this.hideNoneAPIControls()}showToolTip(e,t){"mouse"===t.pointerType&&(window.clearTimeout(this.offit),this.onit=window.setTimeout(()=>{let t=(0,a.Ay)("tooltip-"+e);t.style.top=(0,a.Ay)("tool-"+e).offsetTop-10+"px",t.style.left=(0,a.Ay)("tool-"+e).offsetLeft+40+"px",t.offsetTop+t.offsetHeight>(0,a.Ay)("menu-bar").offsetHeight-10&&(t.style.top=(0,a.Ay)("menu-bar").offsetHeight-t.offsetHeight-10+"px"),t.classList.add("active"),this.hovering=!0},this.hovering?0:666))}hideToolTip(e,t){"mouse"===t.pointerType&&(window.clearTimeout(this.onit),window.clearTimeout(this.offit),(0,a.Ay)("tooltip-"+e).classList.remove("active"),this.offit=window.setTimeout(()=>{this.hovering=!1},1e3))}}i()}catch(ut){i(ut)}})},57892:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VippsDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.VippsDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"type",baseName:"type",type:"VippsDetails.TypeEnum"}],function(e){let t;!function(e){e.Vipps="vipps"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.VippsDetails||(t.VippsDetails={}))},57906:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(42903);class a extends i.A{constructor(e){super(e,"invert"),this.shaders.addShader("invert",1),this.apply()}}},58e3:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleBlur")),this.setContent((0,n.T)("div",{id:"blur-slider"})),new a.A("blur-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("blur",e)})}}},58281:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(42268),a=s(58354),n=s(21742),r=s(54738),o=s(82042),h=s(15818);class c{constructor(e){this.updatePreview=()=>{this.preview.style.backgroundImage=this.grad.toCSS(),this.callback&&this.callback(this.grad)},this.populateStops=()=>{this.stoplist.innerHTML="";for(let e=0;e<this.grad.stops.length;++e){const t=Math.round(300*this.grad.stops[e].position);this.stoplist.append((0,i.T)("div",{id:this.grad.stops[e].id,className:"knob",style:"left:"+t+"px"},(0,i.T)("div",{id:this.grad.stops[e].id+"-color",style:"background:"+this.grad.stops[e].color.toHEX()})))}this.setHandlers()},this.addStop=e=>{e.stopPropagation(),e.preventDefault();const t=this.grad.addStop(new h.A(0,255,0),Math.round(e.clientX-this.container.offsetLeft-14)/300),s=Math.round(300*t.position),a=(0,i.T)("div",{id:t.id,className:"knob",style:"left:"+s+"px"},(0,i.T)("div",{id:t.id+"-color",style:"background:"+t.color.toHEX()}));a.addEventListener("mousedown",this.mouseDown,!0),a.addEventListener("touchstart",this.touchStart,{passive:!0}),this.stoplist.append(a),this.selectStop(t.id),this.updatePreview()},this.removeStop=()=>{if(this.grad.stops.length>2){(0,i.Ay)(this.selected.id)&&(0,i.Ay)(this.selected.id).remove();const e=this.grad.removeStop(this.selected.id);this.selected=void 0,this.selectStop(e),this.updatePreview()}},this.selectStop=e=>{this.selected&&this.selected.id===e||(this.selected&&(0,i.Ay)(this.selected.id)&&(0,i.Ay)(this.selected.id).classList.remove("selected"),this.selected=this.grad.getStop(e),(0,i.Ay)(this.selected.id).classList.add("selected"),this.opacity.setValue(this.selected.color.a/255),(0,i.Ay)("grad-editor-remove").classList.toggle("disabled",this.grad.stops.length<3))},this.down=(e,t,s)=>{this.selectStop(s.id),this.downX=e,this.target=s,this.start=s.offsetLeft+6},this.move=(e,t)=>{let s=r.qE(this.start+(e-this.downX),0,300);this.target.style.left=s+"px",this.selected.position=s/300,this.grad.sort(),this.updatePreview()},this.setHandlers=()=>{const e=document.querySelectorAll("#grad-editor-stoplist > .knob");for(let t=0;t<e.length;t++)e[t].addEventListener("mousedown",this.mouseDown,!0),e[t].addEventListener("touchstart",this.touchStart,{passive:!0}),0===t&&this.selectStop(e[t].id)},this.removeHandlers=()=>{const e=document.querySelectorAll("#grad-editor-stoplist > .knob");for(let t=0;t<e.length;t++)e[t].removeEventListener("mousedown",this.mouseDown,!0),e[t].removeEventListener("touchstart",this.touchStart)},this.touchStart=e=>{e.preventDefault(),e.stopPropagation(),this.down(e.changedTouches[0].clientX,e.changedTouches[0].clientY,e.currentTarget),document.addEventListener("touchmove",this.touchMove,{passive:!0}),document.addEventListener("touchend",this.touchEnd,{passive:!0})},this.touchMove=e=>{e.preventDefault(),e.stopPropagation(),this.move(e.changedTouches[0].clientX,e.changedTouches[0].clientY)},this.touchEnd=e=>{e.preventDefault(),e.stopPropagation(),document.removeEventListener("touchmove",this.touchMove),document.removeEventListener("touchend",this.touchEnd)},this.mouseDown=e=>{e.preventDefault(),e.stopPropagation(),this.down(e.clientX,e.clientY,e.currentTarget),document.addEventListener("mousemove",this.mouseMove,!0),document.addEventListener("mouseup",this.mouseUp,!0)},this.mouseMove=e=>{e.stopPropagation(),this.move(e.clientX,e.clientY)},this.mouseUp=e=>{e.stopPropagation(),e.preventDefault(),document.removeEventListener("mousemove",this.mouseMove,!0),document.removeEventListener("mouseup",this.mouseUp,!0)},this.cleanUp=()=>{var e;this.removeHandlers(),this.addlist.removeEventListener("click",this.addStop,!0),(0,i.Ay)("grad-editor-remove").removeEventListener("click",this.removeStop,!0),this.gradpod.update(this.grad),this.container.remove(),null===(e=this.modal)||void 0===e||e.remove()},this.gradpod=e,this.grad=e.grad,this.modal=(0,i.Ay)("workspace").appendChild((0,i.T)("div",{id:"grad-editor-modal",className:"modal"}));let t=(0,i.T)("div",{style:"position:relative"}),s=(0,i.T)("div",{className:"option",style:"display:flex;position:relative"});this.container=(0,i.T)("div",{id:"grad-editor"},t,s),this.container.classList.add("grad-editor-float"),(0,i.Ay)("workspace").appendChild(this.container),this.preview=(0,i.T)("div",{id:"grad-editor-preview"}),this.stoplist=(0,i.T)("div",{id:"grad-editor-stoplist"}),this.addlist=(0,i.T)("div",{id:"grad-editor-addlist"}),t.append((0,i.T)("div",{id:"grad-editor-preview-holder"},this.preview),this.stoplist,this.addlist),s.append((0,i.T)("div",{id:"grad-editor-opacity"}),(0,i.T)("ul",{className:"icon-button-set",style:"margin-left:auto"},(0,i.T)("li",{id:"grad-editor-remove"},(0,i.T)("img",{src:"/img/icon/delete.svg",className:"ic"}))));const a=(0,i.Ay)("grad-editor-remove");a.setAttribute("tooltip",(0,n.A)("removeStop")),a.setAttribute("flow","down"),a.addEventListener("click",this.removeStop,!0);let c=this.gradpod.container.getBoundingClientRect();this.modal.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),e.target===e.currentTarget&&this.cleanUp()},!1),this.container.style.top=c.bottom+5+"px",this.container.style.left=c.left-5+"px",this.container.style.display="flex",this.preview=(0,i.Ay)("grad-editor-preview"),this.opacity=new o.A("grad-editor-opacity",{label:(0,n.A)("opacity")+":",compact:!0,defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onChange:e=>{this.selected.color.a=Math.round(255*e),this.updatePreview()}}),this.addlist.addEventListener("click",this.addStop,!1),this.populateStops(),this.setHandlers(),this.updatePreview()}}class l{constructor(e,t,s=!1){this.update=e=>{this.grad=e,this.container.style.backgroundImage=this.grad.toCSS()},this.picker=()=>{this.mini?new c(this):new a.A(void 0,this,this.update)},this.cleanUp=()=>{this.container.removeEventListener("click",this.picker,!1)},this.grad=t,this.mini=s,this.container=(0,i.Ay)(e),this.container.classList.add("grad-pod"),this.container.style.backgroundImage=this.grad.toCSS(),this.container.addEventListener("click",this.picker,!1)}}},58354:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(21742),a=s(54738),n=s(82042),r=s(42268),o=s(41915),h=s(8689),c=s(15818),l=s(81937),d=s(29755),p=s(16309);class u{constructor(e,t,s,u=!1){this.populatePresets=()=>{let e=[new p.mR([d.Ay.mainColor+"FF",d.Ay.altColor+"FF"],[0,1]),new p.mR(["#000000FF","#FFFFFFFF"],[0,1]),new p.mR(["#999999FF","#03205AFF","#000000FF"],[0,.5,1]),new p.mR(["#000000FF","#00000000"],[0,1]),new p.mR(["#FFFFFFFF","#FFFFFF00"],[0,1]),new p.mR(["#00A8DFFF","#323496FF","#CA1688FF","#EB2E2EFF","#FDE92DFF","#009E54FF"],[0,.2,.4,.6,.8,1]),new p.mR(["#0B01B8FF","#DE9E31FF","#0B01B8FF"],[.25,.5,.75]),new p.mR(["#000000FF","#FF0000FF"],[0,1]),new p.mR(["#FFFFFFFF","#FF0000FF"],[0,1]),new p.mR(["#FFFFFFFF","#00FF00FF"],[0,1]),new p.mR(["#FFFFFFFF","#0000FFFF"],[0,1]),new p.mR(["#00FFFFFF","#FF8000FF"],[0,1]),new p.mR(["#c2e59cff","#64b3f4ff"],[0,1]),new p.mR(["#8E0E00FF","#1F1C18FF"],[0,1]),new p.mR(["#f46b45FF","#eea849FF"],[0,1]),new p.mR(["#fc00ffff","#00dbdeff"],[0,1]),new p.mR(["#CCCCB2ff","#757519ff"],[0,1]),new p.mR(["#F1F2B5FF","#135058FF"],[0,1]),new p.mR(["#7b4397FF","#dc2430FF"],[0,1]),new p.mR(["#8e9eabFF","#eef2f3FF"],[0,1]),new p.mR(["#00bf8fFF","#001510FF"],[0,1]),new p.mR(["#ff0084FF","#33001bFF"],[0,1]),new p.mR(["#833ab4FF","#fd1d1dFF","#fcb045FF"],[0,.5,1]),new p.mR(["#FEAC5EFF","#C779D0FF","#fcb045FF"],[0,.5,1]),new p.mR(["#6441A5FF","#2a0845FF"],[0,1]),new p.mR(["#43cea2FF","#185a9dFF"],[0,1]),new p.mR(["#FFA17FFF","#00223EFF"],[0,1]),new p.mR(["#360033FF","#0b8793FF"],[0,1]),new p.mR(["#948E99FF","#2E1437FF"],[0,1]),new p.mR(["#1e130cFF","#9a8478FF"],[0,1]),new p.mR(["#D38312FF","#A83279FF"],[0,1]),new p.mR(["#70e1f5FF","#ffd194FF"],[0,1]),new p.mR(["#556270FF","#ff6b6bFF"],[0,1]),new p.mR(["#000000FF","#e74c3cFF"],[0,1]),new p.mR(["#f0c27bff","#4b1248ff"],[0,1]),new p.mR(["#fbd3e9ff","#bb377dff"],[0,1]),new p.mR(["#649173ff","#dbd5a4ff"],[0,1]),new p.mR(["#b993d6ff","#8ca6dbff"],[0,1]),new p.mR(["#d3959bff","#bfe6baff"],[0,1]),new p.mR(["#dad299ff","#b0dab9ff"],[0,1]),new p.mR(["#f2709cff","#ff9472ff"],[0,1]),new p.mR(["#5d4157ff","#a8cabaff"],[0,1]),new p.mR(["#ddd6f3ff","#faaca8ff"],[0,1]),new p.mR(["#fc354cff","#0abfbcff"],[0,1]),new p.mR(["#414d0bff","#727a17ff"],[0,1]),new p.mR(["#134e5eff","#71b280ff"],[0,1]),new p.mR(["#2bc0e4ff","#eaecc6ff"],[0,1]),new p.mR(["#603813ff","#b29f94ff"],[0,1]),new p.mR(["#bbd2c5FF","#536976FF","#292e49FF"],[0,.5,1]),new p.mR(["#1e9600FF","#fff200FF","#ff0000FF"],[0,.5,1]),new p.mR(["#06beb6ff","#48b1bfff"],[0,1]),new p.mR(["#eb3349ff","#f45c43ff"],[0,1]),new p.mR(["#56ab2fff","#a8e063ff"],[0,1]),new p.mR(["#614385ff","#516395ff"],[0,1]),new p.mR(["#ddd6f3ff","#faaca8ff"],[0,1]),new p.mR(["#3a1c71FF","#d76d77FF","#ffaf7bFF"],[0,.5,1]),new p.mR(["#4ca1afff","#c4e0e5ff"],[0,1]),new p.mR(["#dbdcd7ff","#b8235aff","#801357ff","#3d1635ff","#1c1a27ff"],[0,.59,.71,.84,1]),new p.mR(["#f83600ff","#f9d423ff"],[0,1]),new p.mR(["#71a192ff","#b7bb81ff","#f5b752ff","#db6549ff","#7b4163ff"],[0,.25,.5,.8,1]),new p.mR(["#00737AFF","#DE5159FF","#7F3038ff","#150C14FF"],[0,.5,.75,1]),new p.mR(["#8FB9A8FF","#FEFAD4FF","#FCD0BAff","#F1828DFF","#765D69FF"],[0,.4,.5,.75,1]),new p.mR(["#F26627FF","#F9A26CFF","#EFEEEEff","#98D7D1FF","#325D79FF"],[0,.3,.5,.75,1]),new p.mR(["#F18C8EFF","#F0B7A4FF","#F1D1B5ff","#568EA6FF","#305F72FF"],[0,.3,.5,.75,1]),new p.mR(["#FCBB6DFF","#D8737FFF","#AB6CB2FF","#685D79FF","#475C7AFF"],[0,.3,.5,.75,1]),new p.mR(["#CC2A49FF","#F99E4CFF","#F36F38FF","#EF4648FF","#582841FF"],[0,.3,.5,.75,1]),new p.mR(["#092B38FF","#9C5773FF","##CDCDC5FF"],[0,.5,1]),new p.mR(["#009e00FF","#ffff96FF"],[0,1]),new p.mR(["#fcce78FF","#7e2d02FF"],[0,1]),new p.mR(["#ffdb01FF","#0e197dFF"],[0,1]),new p.mR(["#B4C6CCFF","#FE4929FF"],[0,1]),new p.mR(["#B71970FF","#01416DFF"],[0,1]),new p.mR(["#471B0DFF","#F0E867FF"],[0,1]),new p.mR(["#1A2713FF","#E2EAB1FF"],[0,1]),new p.mR(["#B03F2AFF","#FFEBB0FF"],[0,1])];const t=(0,r.Ay)("grad-selector-presets-ss-content");if(this.extended){const e=(0,r.T)("div",{className:"grad-pod square empty"});e.setAttribute("data","empty"),e.addEventListener("click",this.selectPreset,!0),t.append(e)}e.forEach(e=>{const s=(0,r.T)("div",{className:"grad-pod square",style:"background:"+e.toCSS()});s.setAttribute("data",JSON.stringify(e)),s.addEventListener("click",this.selectPreset,!0),t.append(s)})},this.selectPreset=e=>{this.removeHandlers(),this.marked&&this.marked.classList.remove("selected"),this.marked=e.currentTarget,this.marked.classList.add("selected"),"empty"!==this.marked.getAttribute("data")?(this.grad=p.Ay.fromPreset(a.bD(p.mR,JSON.parse(this.marked.getAttribute("data")))),this.extended&&(this.grad.direction=this.direction.getValue(),this.grad.type=(0,r.Ay)("grad-type-linear").checked?"linear":"radial"),this.populateStops(),this.updatePreview()):this.callback&&this.callback(void 0)},this.setGrad=e=>{this.grad=e,this.extended&&((0,r.Ay)("grad-type-linear").checked="linear"===this.grad.type,(0,r.Ay)("grad-type-radial").checked="radial"===this.grad.type,this.direction.setValue(this.grad.direction)),this.removeHandlers(),this.populateStops(),this.updatePreview(!1)},this.directionChange=()=>{this.grad.direction=this.direction.getValue(),this.updatePreview()},this.typeChange=e=>{let t=e.target;this.grad.type="linear"===t.value?"linear":"radial",(0,r.Ay)("grad-direction").style.display="linear"===this.grad.type?"flex":"none",this.updatePreview()},this.updatePreview=(e=!0)=>{this.preview.style.backgroundImage=this.grad.toCSS(),this.callback&&e&&this.callback(this.grad)},this.populateStops=()=>{this.stoplist.innerHTML="";for(let e=0;e<this.grad.stops.length;++e){const t=Math.round(this.width*this.grad.stops[e].position);this.stoplist.append((0,r.T)("div",{id:this.grad.stops[e].id,className:"knob",style:"left:"+t+"px"},(0,r.T)("div",{className:"bg ic"}),(0,r.T)("div",{className:"color",id:this.grad.stops[e].id+"-color",style:"background:"+this.grad.stops[e].color.toHEX()})))}this.setHandlers()},this.addStop=e=>{e.stopPropagation(),e.preventDefault();const t=this.grad.addStop(this.colorpod.getColor().clone(),Math.round(e.offsetX)/this.width),s=Math.round(this.width*t.position),i=(0,r.T)("div",{id:t.id,className:"knob",style:"left:"+s+"px"},(0,r.T)("div",{className:"bg ic"}),(0,r.T)("div",{className:"color",id:t.id+"-color",style:"background:"+t.color.toHEX()}));i.addEventListener("mousedown",this.mouseDown,!0),i.addEventListener("touchstart",this.touchStart,{passive:!0}),this.stoplist.append(i),this.selectStop(t.id),this.updatePreview()},this.removeStop=()=>{if(this.grad.stops.length>2){(0,r.Ay)(this.selected.id)&&(0,r.Ay)(this.selected.id).remove();const e=this.grad.removeStop(this.selected.id);this.selected=void 0,this.selectStop(e),this.updatePreview()}},this.selectStop=e=>{this.selected&&this.selected.id===e||(this.selected&&(0,r.Ay)(this.selected.id)&&(0,r.Ay)(this.selected.id).classList.remove("selected"),this.selected=this.grad.getStop(e),(0,r.Ay)(this.selected.id).classList.add("selected"),this.colorpod.setColor(this.selected.color),this.opacity.setValue(this.selected.color.a/255),(0,r.Ay)("grad-selector-remove").classList.toggle("disabled",this.grad.stops.length<3))},this.down=(e,t,s)=>{this.selectStop(s.id),this.downX=e,this.target=s,this.start=s.offsetLeft+6},this.move=(e,t,s=!0)=>{let i=a.qE(this.start+(e-this.downX),0,this.width);this.target.style.left=i+"px",this.selected.position=i/this.width,this.grad.sort(),this.updatePreview(s)},this.setHandlers=()=>{const e=document.querySelectorAll("#grad-selector-stoplist > .knob");for(let t=0;t<e.length;t++)e[t].addEventListener("mousedown",this.mouseDown,!0),e[t].addEventListener("touchstart",this.touchStart,{passive:!0}),0===t&&this.selectStop(e[t].id)},this.removeHandlers=()=>{const e=document.querySelectorAll("#grad-selector-stoplist > .knob");for(let t=0;t<e.length;t++)e[t].removeEventListener("mousedown",this.mouseDown,!0),e[t].removeEventListener("touchstart",this.touchStart)},this.touchStart=e=>{e.stopPropagation(),this.down(e.changedTouches[0].clientX,e.changedTouches[0].clientY,e.currentTarget),document.addEventListener("touchmove",this.touchMove,{passive:!0}),document.addEventListener("touchend",this.touchEnd,{passive:!0})},this.touchMove=e=>{e.stopPropagation(),this.move(e.changedTouches[0].clientX,e.changedTouches[0].clientY,!1)},this.touchEnd=e=>{e.stopPropagation(),this.move(e.changedTouches[0].clientX,e.changedTouches[0].clientY,!0),document.removeEventListener("touchmove",this.touchMove),document.removeEventListener("touchend",this.touchEnd)},this.mouseDown=e=>{e.preventDefault(),e.stopPropagation(),this.down(e.clientX,e.clientY,e.currentTarget),document.addEventListener("mousemove",this.mouseMove,!0),document.addEventListener("mouseup",this.mouseUp,!0)},this.mouseMove=e=>{e.stopPropagation(),this.move(e.clientX,e.clientY,!1)},this.mouseUp=e=>{e.stopPropagation(),e.preventDefault(),this.move(e.clientX,e.clientY,!0),document.removeEventListener("mousemove",this.mouseMove,!0),document.removeEventListener("mouseup",this.mouseUp,!0)},this.resizeStart=e=>{this.d=new o.A(this.container.clientHeight,e.y)},this.resizeMove=e=>{const t=this.d.x+(e.y-this.d.y);this.container.style.height=(t<320?320:t)+"px"},this.cleanUp=()=>{var e;this.removeHandlers(),this.addlist.removeEventListener("click",this.addStop,!0),(0,r.Ay)("grad-selector-remove").removeEventListener("click",this.removeStop,!0),this.container.remove(),null===(e=this.modal)||void 0===e||e.remove()},this.extended=u,this.gradpod=t,this.grad=t?t.grad:p.Ay.fromColors(c.A.fromHEX(d.Ay.mainColor),c.A.fromHEX(d.Ay.altColor)),this.callback=s,this.asControl=!t,this.asControl||(this.modal=(0,r.Ay)("workspace").appendChild((0,r.T)("div",{id:"grad-selector-modal",className:"modal"})));let m=(0,r.T)("div",{style:"position:relative"}),g=(0,r.T)("div",{className:"option",style:"display:flex;justify-content: space-between"}),y=(0,r.T)("div",{id:"grad-selector-presets",className:"top-10"});if(this.container=(0,r.T)("div",{id:"grad-selector"},m,g),e?e.appendChild(this.container):(this.container.classList.add("grad-selector-float"),(0,r.Ay)("workspace").appendChild(this.container)),this.preview=(0,r.T)("div",{id:"grad-selector-preview"}),this.stoplist=(0,r.T)("div",{id:"grad-selector-stoplist"}),this.addlist=(0,r.T)("div",{id:"grad-selector-addlist"}),m.append((0,r.T)("div",{id:"grad-selector-preview-holder"},this.preview),this.stoplist,this.addlist),g.append((0,r.T)("div",{id:"grad-selector-opacity"}),(0,r.T)("label",{className:"tab-30",style:"width:unset"},(0,i.A)("color")+":"),(0,r.T)("div",{id:"grad-selector-color",className:"tab-5"}),(0,r.T)("ul",{className:"icon-button-set",style:"margin-left:auto"},(0,r.T)("li",{id:"grad-selector-remove"},(0,r.T)("img",{src:"/img/icon/delete.svg",className:"ic"})))),this.container.append((0,r.T)("div",{className:"splitter top-8"})),u){let e=(0,r.T)("div",{className:"option top-10",style:"display:flex;justify-content: space-between"});e.innerHTML+=`\n                    <div id="gradient-type" class="switch-field">\n                        <input type="radio" id="grad-type-linear" name="grad-type" value="linear" checked/><label for="grad-type-linear">${(0,i.A)("linear")}</label>\n                        <input type="radio" id="grad-type-radial" name="grad-type" value="radial" /><label for="grad-type-radial">${(0,i.A)("radial")}</label>\n                    </div>\n                    <div id="grad-direction"></div>\n                    `,this.container.append(e),(0,r.Ay)("grad-type-linear").addEventListener("click",this.typeChange,!0),(0,r.Ay)("grad-type-radial").addEventListener("click",this.typeChange,!0),this.direction=new n.A("grad-direction",{label:(0,i.A)("direction")+":",compact:!0,range:[0,360],defaultValue:0,labelFormat:e=>e.toFixed(1),labelParse:e=>parseInt(e,10),onChange:this.directionChange})}this.container.append(y);const v=(0,r.Ay)("grad-selector-remove");if(v.setAttribute("tooltip",(0,i.A)("removeStop")),v.setAttribute("flow","down"),v.addEventListener("click",this.removeStop,!0),this.asControl)(0,r.Ay)("grad-selector-presets").style.height="180px";else{let e=this.gradpod.container.getBoundingClientRect();this.modal.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),e.target===e.currentTarget&&this.cleanUp()},!1),this.container.style.top=e.bottom+5+"px",this.container.style.left=e.left-~~(this.container.offsetWidth/2)+40+"px",this.container.style.display="flex",this.container.style.height="360px";const t=(0,r.T)("img",{src:"/img/icon/three-dot.svg",className:"resize ic"});(0,r.Bb)(t,this.resizeStart,this.resizeMove),this.container.append(t)}this.preview=(0,r.Ay)("grad-selector-preview"),this.opacity=new n.A("grad-selector-opacity",{label:(0,i.A)("opacity")+":",compact:!0,defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onChange:e=>{this.selected.color.a=Math.round(255*e),this.updatePreview()}}),this.colorpod=new h.A("grad-selector-color",new c.A,e=>{e.a=this.selected.color.a,this.selected.color=e,(0,r.Ay)(this.selected.id+"-color").style.background=e.toHEX(),this.updatePreview()}),this.addlist.addEventListener("click",this.addStop,!1),this.width=m.clientWidth,this.populateStops(),this.setHandlers(),this.updatePreview(!1),new l.A((0,r.Ay)("grad-selector-presets")),this.populatePresets()}}},58435:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleVibrance")),this.setContent((0,n.T)("div",{id:"vibrance"})),new a.A("vibrance",{label:(0,r.A)("amount"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("vibrance",e)})}}},58489:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(22866),a=s(54738),n=s(40963),r=s(15818),o=s(41915),h=s(39989),c=s(35475),l=s(52038);class d extends i.A{constructor(e=a.Os(),t,s,p=new c.A){super(i.A.TYPE_FRAME),this.id=e,this.prepare=()=>{this.setPath()},this.calculate=(e,t,s)=>{this.editMode&&this.trim?(this.trim.x=Math.round(e.x),this.trim.y=Math.round(e.y),this.trim.width=Math.round(t.x-e.x),this.trim.height=0===s?Math.round(t.y-e.y):Math.round(this.trim.width/(this.canvas.width/this.canvas.height)),this.trim.width<10&&(this.trim.width=10),this.trim.height<10&&(this.trim.height=10)):(this.rect.x=Math.round(e.x),this.rect.y=Math.round(e.y),this.rect.width=Math.round(t.x-e.x),this.rect.height=0!==s?Math.round(this.rect.width/s):Math.round(t.y-e.y),this.rect.width<10&&(this.rect.width=10),this.rect.height<10&&(this.rect.height=10))},this.setWidth=(e,t)=>{this.rect&&(e<1&&(e=1),this.editMode&&this.trim?(this.trim.width=e,0!==t&&(this.trim.height=Math.round(this.trim.width/(this.canvas.width/this.canvas.height)))):(this.rect.width=e,0!==t&&(this.rect.height=this.rect.width*t)),this.render())},this.setHeight=(e,t)=>{this.rect&&(e<1&&(e=1),this.editMode&&this.trim?(this.trim.height=e,0!==t&&(this.trim.height=Math.round(this.trim.height/(this.canvas.height/this.canvas.width)))):(this.rect.height=e,0!==t&&(this.rect.width=this.rect.height/t)),this.render())},this.position=(e,t)=>{this.rect&&(this.editMode?(this.trim&&(void 0!==e&&(this.trim.x=e),void 0!==t&&(this.trim.y=t)),this.render()):(void 0!==e&&(this.rect.x=e),void 0!==t&&(this.rect.y=t),this.bect.x=this.rect.x-(this.bect.width-this.rect.width)/2,this.bect.y=this.rect.y-(this.bect.height-this.rect.height)/2))},this.scale=(e,t)=>{this.rect&&(this.rect.x=Math.round(this.rect.x*e),this.rect.y=Math.round(this.rect.y*t),this.rect.width=Math.round(this.rect.width*e),this.rect.height=Math.round(this.rect.height*t),this.trim&&(this.trim.x=Math.round(this.trim.x*e),this.trim.y=Math.round(this.trim.y*t),this.trim.width=Math.round(this.trim.width*e),this.trim.height=Math.round(this.trim.height*t)),this.frameSettings.outlineSize>0&&(this.frameSettings.outlineSize=Math.round(this.frameSettings.outlineSize*e)),this.frameSettings.shadow&&(this.frameSettings.shadowDistance=Math.round(100*this.frameSettings.shadowDistance*e)/100,this.frameSettings.shadowBlur=Math.round(100*this.frameSettings.shadowBlur*e)/100),this.render())},this.rotate=e=>{this.rect.rotation+=e?-90:90},this.flip=e=>{this.canvas&&(this.canvas=a.yz(this.canvas,e),this.render())},this.setPath=(e=this.frameSettings.clip,t=!1)=>{t||(this.frameSettings.clip=e),this.path2D=new Path2D(e),this.render()},this.setOutline=(e,t,s)=>{this.frameSettings.outline=e,this.frameSettings.outlineSize=t,this.frameSettings.outlineColor=s,this.render()},this.setShadow=(e,t,s,i,a,n)=>{this.frameSettings.shadow=e,this.frameSettings.shadowBlur=t,this.frameSettings.shadowOpacity=s,this.frameSettings.shadowColor=i,this.frameSettings.shadowDistance=a,this.frameSettings.shadowDirection=n,this.render()},this.setFrameSettings=e=>{this.frameSettings=e,this.render()},this.setContent=e=>{this.canvas=e,this.fitContent()},this.trimOnResize=e=>{if(!this.trim)return;let t=this.rect.getComparedScale(e);this.trim.x=Math.round(this.trim.x*t.width),this.trim.y=Math.round(this.trim.y*t.height),this.trim.width=Math.round(this.trim.width*t.width),this.trim.height=Math.round(this.trim.height*t.height)},this.fitContent=()=>{this.canvas?this.trim=n.A.fillFit(this.canvas.width,this.canvas.height,this.rect.width,this.rect.height):this.trim=void 0,this.render()},this.getGlobalTrim=()=>{if(this.trim)return new n.A(this.rect.x+this.trim.x,this.rect.y+this.trim.y,this.trim.width,this.trim.height,this.rect.rotation)},this.scaleTrim=(e,t)=>{if(this.trim){let s=this.trim.clone();this.trim.x=Math.round(this.trim.x*e),this.trim.y=Math.round(this.trim.y*t),this.trim.width=Math.round(this.trim.width*e),this.trim.height=Math.round(this.trim.height*t),this.trim.width<1&&(this.trim.width=1),this.trim.height<1&&(this.trim.height=1),this.trim=s}this.render()},this.render=()=>{this.frameSettings.clip;if(this.bect=this.rect.clone(),this.frameSettings.shadow){let e=100*this.frameSettings.shadowBlur;e+=Math.abs(100*this.frameSettings.shadowDistance),this.bect.width+=2*e,this.bect.height+=2*e,this.bect.x-=e,this.bect.y-=e}const e=this.baked.getContext("2d");this.baked.width!==this.bect.width||this.baked.height!==this.bect.height?(this.baked.height=this.bect.height,this.baked.width=this.bect.width):e.clearRect(0,0,this.baked.width,this.baked.height);const t=new Path2D;let s=e.lineWidth=this.frameSettings.outline?Math.round(100*this.frameSettings.outlineSize):this.canvas?0:2;if(this.path2D&&t.addPath(this.path2D,(new DOMMatrix).scale((this.rect.width-s)/100,(this.rect.height-s)/100)),e.save(),e.translate(this.rect.x-this.bect.x+s/2,this.rect.y-this.bect.y+s/2),this.canvas)this.frameSettings.outline?(e.strokeStyle=this.frameSettings.outlineColor,e.lineWidth=s,this.frameSettings.shadow&&this.shadowContext(e),e.fill(t),e.stroke(t)):this.frameSettings.shadow&&(this.shadowContext(e),e.fill(t)),e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0,e.clip(t),e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high",e.drawImage(this.canvas,this.trim.x-s/2,this.trim.y-s/2,this.trim.width,this.trim.height);else{e.save(),this.frameSettings.outline?e.strokeStyle=this.frameSettings.outlineColor:e.strokeStyle="#ccc",e.fillStyle="rgba(0, 0, 0, 0.3)",this.frameSettings.shadow&&this.shadowContext(e),e.fill(t),e.stroke(t),e.restore();const s=new o.A(Math.round(this.bect.width/2),Math.round(this.bect.height/2));let i=20;e.lineWidth=8,this.rect.width>500&&this.rect.height>500&&(e.lineWidth=16,i=40),e.strokeStyle="rgba(255, 255, 255, 0.5)",e.beginPath(),e.moveTo(s.x-i,s.y),e.lineTo(s.x+i,s.y),e.moveTo(s.x,s.y-i),e.lineTo(s.x,s.y+i),e.closePath(),e.stroke()}e.restore()},this.shadowContext=e=>{const t=r.A.fromHEX(this.frameSettings.shadowColor,Math.round(255*this.frameSettings.shadowOpacity)).toRGBA();var s=(this.frameSettings.shadowDirection-90)*Math.PI/180,i=Math.cos(s)*this.frameSettings.shadowDistance,a=Math.sin(s)*this.frameSettings.shadowDistance;e.fillStyle=t,e.shadowColor=t,e.shadowBlur=100*this.frameSettings.shadowBlur,e.shadowOffsetX=100*i,e.shadowOffsetY=100*a},this.replaceCanvas=e=>{const t=this.canvas.getContext("2d");t.save(),t.globalCompositeOperation="copy",t.drawImage(e,0,0),t.restore()},this.switchCanvas=(e,t)=>{this.canvas=e,this.trim=t.clone(),this.render()},this.rasterize=()=>{let e=this.baked?this.baked:this.canvas,t=this.bect?this.bect.clone():this.rect.clone();const s=new h.A(a.Os(),this.settings.name,e,t,this.settings.locked);return s.settings=Object.assign({},this.settings),s.applyTransform(),s},this.clone=(e=!1)=>{var t;let s=new d(e?this.id:a.Os(),this.settings.name,this.rect.clone(),this.frameSettings.clone());return s.settings=Object.assign({},this.settings),s.animation=l.A.clone(this.animation),s.trim=null===(t=this.trim)||void 0===t?void 0:t.clone(),s.canvas=a.oM(this.canvas),s.render(),e&&(s.id=this.id,s.settings.name=this.settings.name),s},this.rect=s,this.settings.name=t,this.frameSettings=p,this.baked=a.Nw(s.width,s.height),this.prepare()}}},58686:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeliveryAddress=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.DeliveryAddress=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"city",baseName:"city",type:"string"},{name:"country",baseName:"country",type:"string"},{name:"firstName",baseName:"firstName",type:"string"},{name:"houseNumberOrName",baseName:"houseNumberOrName",type:"string"},{name:"lastName",baseName:"lastName",type:"string"},{name:"postalCode",baseName:"postalCode",type:"string"},{name:"stateOrProvince",baseName:"stateOrProvince",type:"string"},{name:"street",baseName:"street",type:"string"}]},58710:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpiCollectDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.UpiCollectDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"billingSequenceNumber",baseName:"billingSequenceNumber",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"shopperNotificationReference",baseName:"shopperNotificationReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"UpiCollectDetails.TypeEnum"},{name:"virtualPaymentAddress",baseName:"virtualPaymentAddress",type:"string"}],function(e){let t;!function(e){e.UpiCollect="upi_collect"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.UpiCollectDetails||(t.UpiCollectDetails={}))},58726:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseAdditionalDataDomesticError=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponseAdditionalDataDomesticError=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"domesticRefusalReasonRaw",baseName:"domesticRefusalReasonRaw",type:"string"},{name:"domesticShopperAdvice",baseName:"domesticShopperAdvice",type:"string"}]},58772:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CashAppDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CashAppDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"cashtag",baseName:"cashtag",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"customerId",baseName:"customerId",type:"string"},{name:"grantId",baseName:"grantId",type:"string"},{name:"onFileGrantId",baseName:"onFileGrantId",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"requestId",baseName:"requestId",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"CashAppDetails.TypeEnum"}],function(e){let t;!function(e){e.Cashapp="cashapp"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CashAppDetails||(t.CashAppDetails={}))},58850:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MerchantDevice=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.MerchantDevice=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"os",baseName:"os",type:"string"},{name:"osVersion",baseName:"osVersion",type:"string"},{name:"reference",baseName:"reference",type:"string"}]},58876:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalPlatform=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ExternalPlatform=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"integrator",baseName:"integrator",type:"string"},{name:"name",baseName:"name",type:"string"},{name:"version",baseName:"version",type:"string"}]},58953:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PayPalDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"orderID",baseName:"orderID",type:"string"},{name:"payeePreferred",baseName:"payeePreferred",type:"string"},{name:"payerID",baseName:"payerID",type:"string"},{name:"payerSelected",baseName:"payerSelected",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"subtype",baseName:"subtype",type:"PayPalDetails.SubtypeEnum"},{name:"type",baseName:"type",type:"PayPalDetails.TypeEnum"}],function(e){let t,s;!function(e){e.Redirect="redirect",e.Sdk="sdk"}(t=e.SubtypeEnum||(e.SubtypeEnum={})),function(e){e.Paypal="paypal"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.PayPalDetails||(t.PayPalDetails={}))},59303:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e,t,s,i=1){this.highlight=e,this.midtone=t,this.shadow=s,this.amount=i}static fillPaletteMap(e,t){if(e.midtone){for(let s=0;s<128;s++){let i=s/127;t.data[4*s]=Math.round(e.midtone.r*i+e.shadow.r*(1-i)),t.data[4*s+1]=Math.round(e.midtone.g*i+e.shadow.g*(1-i)),t.data[4*s+2]=Math.round(e.midtone.b*i+e.shadow.b*(1-i))}for(let s=128;s<256;s++){let i=(s-127)/128;t.data[4*s]=Math.round(e.highlight.r*i+e.midtone.r*(1-i)),t.data[4*s+1]=Math.round(e.highlight.g*i+e.midtone.g*(1-i)),t.data[4*s+2]=Math.round(e.highlight.b*i+e.midtone.b*(1-i))}}else for(let s=0;s<256;++s){let i=s/255;t.data[4*s]=Math.round(e.highlight.r*i+e.shadow.r*(1-i)),t.data[4*s+1]=Math.round(e.highlight.g*i+e.shadow.g*(1-i)),t.data[4*s+2]=Math.round(e.highlight.b*i+e.shadow.b*(1-i))}}}},59350:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(42268),a=s(54738),n=s(15818),r=s(41915),o=s(71499);class h{constructor(e){this.getSettingsString=()=>JSON.stringify(this.settings),this.setSettingsString=e=>{this.settings=a.bD(o.A,JSON.parse(e)),this.generate()},this.getStep=()=>Math.round(this.settings.distance*this.settings.size),this.getCursorImage=(e,t=new n.A(255,255,255,255))=>{if(!(this.canvas.width*e>512||this.canvas.height*e>512))return this.generatetOutline(e,t)},this.generateBasic=(e,t)=>{let s=this.settings.softness;if(this.settings.size<3){if(1===this.settings.size||s<.25)return this.canvas.width=this.settings.size,this.canvas.height=this.settings.size,this.context.fillStyle=e.toRGBA(),void this.context.fillRect(0,0,this.canvas.width,this.canvas.height);s-=.25}const i=this.settings.size,a=(i%2?i:i+1)/2;let n,o,h,c,l,d,p,u,m,g=0,y=0,v=new r.A(0,0),f=new r.A(0,0);switch(d=Math.sin(this.settings.angle*Math.PI/180),l=Math.cos(this.settings.angle*Math.PI/180),m=a*this.settings.aspect,v.x=l*a,v.y=d*a*-1,f.x=d*m,f.y=l*m,this.settings.type){case"circle":g=Math.ceil(Math.sqrt(v.x*v.x+f.x*f.x)),y=Math.ceil(Math.sqrt(v.y*v.y+f.y*f.y));break;case"square":g=Math.ceil(Math.abs(v.x)+Math.abs(f.x)),y=Math.ceil(Math.abs(v.y)+Math.abs(f.y));break;case"diamond":g=Math.ceil(Math.max(Math.abs(v.x),Math.abs(f.x))),y=Math.ceil(Math.max(Math.abs(v.y),Math.abs(f.y)))}this.settings.spikes>2&&(g=y=Math.ceil(Math.sqrt(a*a+m*m)),f.x=d*a,f.y=l*a),this.canvas.width=2*g+1,this.canvas.height=2*y+1;const b=this.lookupTable(a,s);p=Math.cos(-2*Math.PI/this.settings.spikes),u=Math.sin(-2*Math.PI/this.settings.spikes);const w=this.context.canvas.width,A=this.context.getImageData(0,0,w,this.context.canvas.height);for(h=-y;h<=y;++h)for(o=-g;o<=g;++o){let s=0,i=l*o-d*h,r=Math.abs(d*o+l*h);if(this.settings.spikes>2){let e,t,s=Math.atan2(r,i);for(;s>Math.PI/this.settings.spikes;)t=i,e=r,i=p*t-u*e,r=u*t+p*e,s-=2*Math.PI/this.settings.spikes}switch(r/=this.settings.aspect,this.settings.type){case"circle":s=Math.sqrt(i*i+r*r);break;case"square":s=Math.max(Math.abs(i),Math.abs(r));break;case"diamond":s=Math.abs(i)+Math.abs(r)}n=s<a+1?b[Math.floor(4*s)]:0,t&&(n=n<64?0:255),c=4*((h+y)*w+(o+g)),A.data[c]=e.r,A.data[c+1]=e.g,A.data[c+2]=e.b,A.data[c+3]=n}this.context.putImageData(A,0,0)},this.generateCustom=(e,t)=>{},this.canvas=(0,i.T)("canvas"),this.settings=e,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.generate()}generate(e=new n.A,t=!1){"custom"===this.settings.type?this.generateCustom(e,t):this.generateBasic(e,t)}generatetOutline(e=1,t=new n.A(255,255,255,255)){const s=Math.round(this.canvas.width*e)||1,i=Math.round(this.canvas.height*e)||1;let r=a.VI(s+2,i+2);const o=r.getContext("2d");o.fillStyle=t.toRGBA(),o.shadowColor=new n.A(0,0,0).toRGBA(),o.shadowBlur=1,s>20&&i>20&&(o.fillRect(~~(s/2)-3,~~(i/2),8,2),o.fillRect(~~(s/2),~~(i/2)-3,2,8));let h,c,l,d,p,u=1!=e?a.H5(this.canvas,s,i,!1).getContext("2d").getImageData(0,0,s,i):this.context.getImageData(0,0,s,i);for(let a=0;a<i;++a){c=!0,l=Boolean(u.data[a*s*4+3]<64);for(let e=0;e<s;++e)h=c,c=l,l=e+1===s||u.data[4*(a*s+e+1)+3]<64,c||(d=a-1<0||u.data[4*((a-1)*s+e)+3]<64,p=a+1===i||u.data[4*((a+1)*s+e)+3]<64,(h||d||l||p)&&o.fillRect(e+1,a+1,1,1))}if(s<=20&&i<=20){const e=a.VI(33,33),s=e.getContext("2d");s.drawImage(r,Math.floor((33-r.width)/2),Math.floor((33-r.height)/2)),s.fillStyle=t.toRGBA(),s.shadowColor=new n.A(0,0,0).toRGBA(),s.shadowBlur=1,s.fillRect(2,15,4,2),s.fillRect(26,15,4,2),s.fillRect(15,2,2,4),s.fillRect(15,26,2,4),r=e}return r}lookupTable(e,t){const s=new Array;let i,a,n=0;const r=new Array(4),o=Math.round(e+1),h=4*Math.ceil(1+Math.sqrt(o*o*2));let c;for(a=t<4e-7?1e6:.4/t,c=0;c<4;c++)i=Math.abs((c+.5)/4-.5),r[c]=i>e?0:this.gaussian(Math.pow(i/e,a)),n+=r[c];for(c=0;i<e||n>1e-5;i+=1/4){n-=r[c%4],r[c%4]=i>e?0:this.gaussian(Math.pow(i/e,a)),n+=r[c%4];let t=Math.floor(63.75*n);s[c++]=Math.max(0,t)}for(;c<h;)s[c++]=0;return s}gaussian(e){return e<-.5?2*(e=-1-e)*e:e<.5?1-2*e*e:2*(e=1-e)*e}}},59399:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Item=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"id",baseName:"id",type:"string"},{name:"name",baseName:"name",type:"string"}]},59423:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(42903);class a extends i.A{constructor(e){super(e,"solarize"),this.shaders.addShader("solarize",1),this.apply()}}},59566:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentSetupRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentSetupRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"additionalAmount",baseName:"additionalAmount",type:"Amount"},{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"allowedPaymentMethods",baseName:"allowedPaymentMethods",type:"Array<string>"},{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"billingAddress",baseName:"billingAddress",type:"Address"},{name:"blockedPaymentMethods",baseName:"blockedPaymentMethods",type:"Array<string>"},{name:"captureDelayHours",baseName:"captureDelayHours",type:"number"},{name:"channel",baseName:"channel",type:"PaymentSetupRequest.ChannelEnum"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"company",baseName:"company",type:"Company"},{name:"configuration",baseName:"configuration",type:"Configuration"},{name:"conversionId",baseName:"conversionId",type:"string"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"dateOfBirth",baseName:"dateOfBirth",type:"string"},{name:"dccQuote",baseName:"dccQuote",type:"ForexQuote"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"Address"},{name:"deliveryDate",baseName:"deliveryDate",type:"Date"},{name:"enableOneClick",baseName:"enableOneClick",type:"boolean"},{name:"enablePayOut",baseName:"enablePayOut",type:"boolean"},{name:"enableRecurring",baseName:"enableRecurring",type:"boolean"},{name:"entityType",baseName:"entityType",type:"PaymentSetupRequest.EntityTypeEnum"},{name:"fraudOffset",baseName:"fraudOffset",type:"number"},{name:"installments",baseName:"installments",type:"Installments"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"localizedShopperStatement",baseName:"localizedShopperStatement",type:"{ [key: string]: string; }"},{name:"mandate",baseName:"mandate",type:"Mandate"},{name:"mcc",baseName:"mcc",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantOrderReference",baseName:"merchantOrderReference",type:"string"},{name:"metadata",baseName:"metadata",type:"{ [key: string]: string; }"},{name:"orderReference",baseName:"orderReference",type:"string"},{name:"origin",baseName:"origin",type:"string"},{name:"platformChargebackLogic",baseName:"platformChargebackLogic",type:"PlatformChargebackLogic"},{name:"recurringExpiry",baseName:"recurringExpiry",type:"string"},{name:"recurringFrequency",baseName:"recurringFrequency",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"returnUrl",baseName:"returnUrl",type:"string"},{name:"riskData",baseName:"riskData",type:"RiskData"},{name:"sdkVersion",baseName:"sdkVersion",type:"string"},{name:"sessionValidity",baseName:"sessionValidity",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperIP",baseName:"shopperIP",type:"string"},{name:"shopperInteraction",baseName:"shopperInteraction",type:"PaymentSetupRequest.ShopperInteractionEnum"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"shopperStatement",baseName:"shopperStatement",type:"string"},{name:"socialSecurityNumber",baseName:"socialSecurityNumber",type:"string"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"store",baseName:"store",type:"string"},{name:"storePaymentMethod",baseName:"storePaymentMethod",type:"boolean"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"threeDSAuthenticationOnly",baseName:"threeDSAuthenticationOnly",type:"boolean"},{name:"token",baseName:"token",type:"string"},{name:"trustedShopper",baseName:"trustedShopper",type:"boolean"}],function(e){let t,s,i;!function(e){e.IOs="iOS",e.Android="Android",e.Web="Web"}(t=e.ChannelEnum||(e.ChannelEnum={})),function(e){e.NaturalPerson="NaturalPerson",e.CompanyName="CompanyName"}(s=e.EntityTypeEnum||(e.EntityTypeEnum={})),function(e){e.Ecommerce="Ecommerce",e.ContAuth="ContAuth",e.Moto="Moto",e.Pos="POS"}(i=e.ShopperInteractionEnum||(e.ShopperInteractionEnum={}))}(s=t.PaymentSetupRequest||(t.PaymentSetupRequest={}))},59857:(e,t,s)=>{s.d(t,{A:()=>L});var i=s(21742),a=s(42268),n=s(78832),r=s(98244),o=s(29755),h=s(93771),c=s(82857),l=s(9810),d=s(26931),p=s(38665),u=s(54738),m=s(53900),g=s(40963),y=s(41915),v=s(22866),f=s(23556),b=s(54127),w=s(58489),A=s(39989),x=s(86445),k=s(10122),S=s(89209),E=s(14983),T=s(79453),C=s(95251),M=s(80953),P=s(13947),D=s(27029);class N{constructor(e,t,s=!1){this.zoom=1,this.zoomMode="fit",this.anchor=new y.A(0,0),this.fresco=e,this.history=new C.J(e,t,s)}}class L{constructor(e){this.tabLimit=10,this.showTabs=!1,this.bounds="editor"===o.Ay.product?20:40,this.syncDisabled=!1,this.supressRender=!1,this.zoom=1,this.zoomMode="fit",this.createBGPattern=()=>{let e="#2D2F34",t="#1D2023";switch(o.Ay.workspace){case"iron":e="#2d2d2d",t="#3e3e3e";break;case"steel":e="#f5f5f5",t="#b6b6b6";break;case"light":e="#ffffff",t="#cccccc"}let s=u.VI(20,20),i=s.getContext("2d");i.fillStyle=e,i.fillRect(0,0,20,20),i.fillStyle=t,i.fillRect(10,0,10,10),i.fillRect(0,10,10,10),this.ptn=this.ctx.createPattern(s,"repeat")},this.doSync=e=>{e instanceof CustomEvent&&this.syncDocument(e.detail)},this.doRender=e=>{e instanceof CustomEvent&&(this.supressRender=!1===e.detail)},this.touch=()=>{document.documentElement.classList.add("touch"),document.removeEventListener("touchstart",this.touch,!1),o.Ay.canTouch=!0},this.notify=e=>{document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)(e)}))},this.syncQueue=0,this.browseFrameImage=async()=>{await h.XN(!1,!0).then(async e=>{document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));for(let t=0;t<e.length;t++)await h.Tq(e[t],this,!1,"frame");document.dispatchEvent(new CustomEvent("loading",{detail:"stop"}))})},this.setFrameContent=e=>{var t;const s=this.fresco.getSelected();let i,a;s.canvas&&(i=u.oM(s.canvas),a=null===(t=s.trim)||void 0===t?void 0:t.clone()),s.setContent(e),s.editMode=!1;const n=i?e?"replace":"delete":"add";this.history.add({type:"frameContent",kind:n,layer:s,canvas:i,trim:a}),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update"))},this.fitFrameContent=()=>{var e;const t=this.fresco.getSelected();if(t instanceof w.A){let s=null===(e=t.trim)||void 0===e?void 0:e.clone();t.fitContent(),this.history.add({type:"arrange",layer:t,kind:"fitContent",action:{type:"trim",rect:s}})}document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update"))},this.addLayer=e=>{for(let t=0;t<e.length;t++)this.fresco.addLayer(e[t]),this.history.add({type:"addLayer",kind:"add"+e[t].type,layer:e[t]});this.fresco.selectLayerStack(e)},this.addCopiedLayer=async e=>{let t,s=new Array,a=new g.A(0,0,this.fresco.width,this.fresco.height),n=this.fresco.getStackBounds(e);n&&!a.contains(n)&&(t=new y.A(Math.round((a.width-n.width)/2),Math.round((a.height-n.height)/2)));for(let r=0;r<e.length;r++){let a=e[r].clone();-1===a.settings.name.indexOf((0,i.A)("copy"))&&(a.settings.name+=" "+(0,i.A)("copy")),a.settings.link="",t&&(a.rect.x=a.rect.x-n.x+t.x,a.rect.y=a.rect.y-n.y+t.y),a instanceof x.A||a instanceof b.A||a instanceof w.A?await a.prepare():a.render(),this.fresco.addLayer(a),this.history.add({type:"addLayer",kind:"paste"+a.type,layer:a}),s.push(a)}this.fresco.selectLayerStack(s),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render"))},this.duplicateLayer=async(e=!0)=>{let t=this.fresco.getSelectedStack();if(0===t.length)return;let s=new Array;for(let a=0;a<t.length;a++){let e=t[a].clone();-1===e.settings.name.indexOf((0,i.A)("copy"))&&(e.settings.name+=" "+(0,i.A)("copy")),e.settings.link="",e instanceof x.A||e instanceof b.A||e instanceof w.A?await e.prepare():e.render(),this.fresco.addLayer(e),this.history.add({type:"addLayer",kind:"duplicate"+e.type,layer:e}),s.push(e)}this.fresco.selectLayerStack(s),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),e&&this.notify("duplicated")},this.deleteLayer=(e=!1)=>{let t=this.fresco.getSelectedStack();if(0!==t.length){if(1===t.length&&t[0]instanceof w.A&&(e||t[0].editMode))this.setFrameContent(void 0);else{this.fresco.getStackId().forEach(e=>{const t=this.fresco.layerNr(e),s=this.fresco.deleteLayerById(e);this.history.add({type:"deleteLayer",layer:s,index:t})}),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render"))}this.notify("deleted")}},this.linkLayer=()=>{let e=this.fresco.getSelectedStack();if(0===e.length||1===e.length&&!e[0].hasLink())return;let t="add";const s=new Array,i=u.r0(),a=e.filter(e=>!e.hasLink());if(a.length===e.length)e.forEach(e=>{var t;s.push({layer:e,link:null!==(t=e.settings.link)&&void 0!==t?t:""}),e.settings.link=i});else if(0===a.length){t="remove";const i=new Set;e.forEach(e=>{var t;i.add(e.settings.link),s.push({layer:e,link:null!==(t=e.settings.link)&&void 0!==t?t:""}),e.settings.link=""}),i.forEach(e=>{var t;const i=this.fresco.layers.filter(t=>t.settings.link===e);1===i.length&&(s.push({layer:i[0],link:null!==(t=i[0].settings.link)&&void 0!==t?t:""}),i[0].settings.link="")})}else{const t=new Set;if(e.forEach(e=>{t.add(e.settings.link)}),1===t.entries.length){let e=[...t][0];a.forEach(t=>{var i;s.push({layer:t,link:null!==(i=t.settings.link)&&void 0!==i?i:""}),t.settings.link=e})}else e.forEach(e=>{var t;s.push({layer:e,link:null!==(t=e.settings.link)&&void 0!==t?t:""}),e.settings.link=i}),t.forEach(e=>{var t;const i=this.fresco.layers.filter(t=>t.settings.link===e);1===i.length&&(s.push({layer:i[0],link:null!==(t=i[0].settings.link)&&void 0!==t?t:""}),i[0].settings.link="")})}s.length>0&&this.history.add({type:"link",kind:t,stack:s}),this.fresco.updateSelectedLinkedStack(),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render"))},this.selectLayer=(e,t=!1,s=!1,i=!1)=>{this.selectLayerById(e?e.id:void 0,t,s,i)},this.selectLayerStack=(e,t=!1,s=!1)=>{this.fresco.selectLayerStack(e,t),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render"))},this.selectLayerById=(e,t=!1,s=!1,i=!1)=>{this.fresco.selectLayerById(e,t,s)&&(document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),i&&document.dispatchEvent(new CustomEvent("layer-marked")))},this.unselectLayerById=e=>{this.fresco.unselectLayerById(e)&&(document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")))},this.isSelectedLayerShaderble=()=>{var e;const t=null===(e=this.fresco)||void 0===e?void 0:e.getSelected();return t&&(t.type===v.A.TYPE_IMAGE||t.type===v.A.TYPE_FRAME||t.type===v.A.TYPE_ELEMENT)&&!!t.canvas},this.mergeDown=()=>{if(!this.fresco.getSelected())return;const e=this.fresco.getSelected(),t=this.fresco.layers.findIndex(t=>e.id===t.id),s=this.fresco.layers.map(e=>e.id);if(t<1)return void this.notify("noMerger");const i=this.fresco.layers[t-1],a=e.rect?e.rect.getRotatedBounds():void 0,n=i.rect?i.rect.getRotatedBounds():void 0,r=a?a.union(n):n;let o;if(r){o=u.Nw(r.width,r.height);const t=o.getContext("2d");this.renderLayer(t,i,!1,r.topLeft()),this.renderLayer(t,e,!1,r.topLeft())}const h=new A.A(u.Os(),e.settings.name,o,r,i.settings.locked),c=this.fresco.layers.splice(t-1,2,h);this.fresco.selectLayerById(h.id),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),this.history.add({type:"merge",kind:"down",layers:c,order:s,target:h}),this.notify("layersMerged")},this.mergeVisible=()=>{const e=this.fresco.layers.findIndex(e=>e.settings.visible),t=this.fresco.layers.map(e=>e.id);if(e<0)return void this.notify("noMerge");const s=this.fresco.layers[e];let i=this.getOutputCanvas();const a=new A.A(u.Os(),s.settings.name,i,new g.A(0,0,i.width,i.height),!0),n=this.fresco.layers.filter(e=>e.settings.visible);this.fresco.layers=this.fresco.layers.filter(e=>!e.settings.visible),this.fresco.layers.splice(e,0,a),this.fresco.selectLayerById(a.id),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),this.history.add({type:"merge",kind:"visible",order:t,layers:n,target:a}),this.notify("layersMerged")},this.mergeFlatten=()=>{let e=this.getOutputCanvas();const t=new A.A(u.Os(),(0,i.A)("background"),e,new g.A(0,0,e.width,e.height),!0),s=this.fresco.layers.slice(),a=this.fresco.layers.map(e=>e.id);this.fresco.layers=[t],this.fresco.selectLayerById(t.id),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),this.history.add({type:"merge",kind:"flatten",layers:s,order:a,target:t}),this.notify("imageFlattend")},this.moveUp=()=>{if(this.fresco.getSelected()){let e=this.fresco.selectedLayerNr(),t=e+1;(0!=e||!this.fresco.lockedBackground())&&t<this.fresco.numLayers()&&this.changeOrder(e,t)}},this.moveDown=()=>{if(this.fresco.getSelected()){let e=this.fresco.selectedLayerNr(),t=e-1;(t>0||!this.fresco.lockedBackground()&&1==e)&&this.changeOrder(e,t)}},this.changeOrder=(e,t)=>{this.fresco.changeLayerOrder(e,t),this.render(),this.history.add({type:"order",from:e,to:t})},this.changeVisible=(e,t)=>{if(!e)return;const s=Object.assign({},e.settings);e.settings.visible=t,this.history.add({type:"layerSettings",kind:"visible",layer:e,settings:s}),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeLocked=(e,t)=>{if(e||(e=this.fresco.getSelected()),!e)return;const s=Object.assign({},e.settings);e.settings.locked=t,this.history.add({type:"layerSettings",kind:"locked",layer:e,settings:s}),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select"))},this.changeCollapsed=e=>{const t=e.groupSettings.clone();e.groupSettings.collapsed=!e.groupSettings.collapsed,this.history.add({type:"groupSettings",kind:"collapse",layer:e,settings:t}),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select"))},this.unblock=()=>{var e;this.fresco.unblock(),null===(e=(0,a.Ay)("premium-unlock-message"))||void 0===e||e.remove(),document.dispatchEvent(new CustomEvent("sync-document",{detail:this.fresco})),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select"))},this.rasterize=()=>{let e=this.fresco.getSelectedStack();if(0===e.length)return;let t=new Array;for(let s=0;s<e.length;s++){let i=e[s];if(i instanceof A.A||i instanceof w.A&&!i.canvas){t.push(i);continue}const a=this.fresco.layers.findIndex(e=>e.id===i.id),n=i.rasterize();this.fresco.layers.splice(a,1,n),this.history.add({type:"rasterize",kind:i.type,newId:n.id,layer:i}),t.push(n)}t.length>0?(this.fresco.selectLayerStack(t),this.notify("layerRasterized")):this.notify("noRasterization"),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render"))},this.cutLayer=()=>{let e=this.fresco.getSelectedStack();if(e.length>0){let t=new Array;e.forEach(e=>{t.push(e.clone())}),this.clipboard=t,this.clipboardSize=this.fresco.getStackBounds(t).size(),this.deleteLayer(),this.notify("cut")}},this.copyLayer=()=>{let e=this.fresco.getSelectedStack();if(e.length>0){let t=new Array;e.forEach(e=>{t.push(e.clone())}),this.clipboard=t,this.clipboardSize=this.fresco.getStackBounds(t).size(),this.notify("copy")}},this.pasteLayer=()=>{Array.isArray(this.clipboard)?(this.addCopiedLayer(this.clipboard),this.notify("paste")):document.dispatchEvent(new CustomEvent("viewport-render"))},this.pasteFromSelection=()=>{if(this.fresco.hasSelection()){let e=this.copy();e instanceof HTMLCanvasElement?(this.addImage(u.oM(e),(this.fresco,this.fresco.nextAddedLayerNumber()),"paste"),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("paste")})),this.selectionDeselect()):this.notify("selectionEmpty")}else this.notify("selectionEmpty")},this.cut=()=>{if(!this.fresco.hasSelection())return void this.cutLayer();let e=this.copy();return e?(this.clear("cut"),this.selectionDeselect(),e):void 0},this.copy=()=>{if(!this.fresco)return;if(!this.fresco.hasSelection()&&this.fresco.hasSelected())return void this.copyLayer();const e=this.fresco.getSelected();if(!e||!e.rect||!e.rect.isSet())return void this.notify("selectionEmpty");let t=this.fresco.selection.bounds.intersect(e.rect);if(t){let s=u.Nw(t.width,t.height),i=s.getContext("2d");i.drawImage(e.baked?e.baked:e.canvas,e.rect.x-t.x,e.rect.y-t.y);const a=new y.A(-t.x,-t.y);return i.save(),i.globalCompositeOperation="destination-in",i.drawImage(this.fresco.selection.mask,a.x,a.y),i.restore(),i=void 0,s}this.notify("selectionEmpty")},this.clear=(e="clear")=>{if(!this.fresco||!this.fresco.hasSelection())return!1;if(!this.fresco.isSelectedImageWithCanvas())return this.notify("notAImageLayer"),!1;const t=this.fresco.getSelected();let s=this.fresco.selection.bounds.intersect(t.rect);if(!s)return void this.notify("selectionEmpty");s=s.rebase(t.rect.x,t.rect.y);const i=u.ON(t.canvas,s),a=t.rect.clone();let n=t.canvas.getContext("2d");return n.save(),n.globalCompositeOperation="destination-out",n.drawImage(this.fresco.selection.mask,-t.rect.x,-t.rect.y),n.restore(),n=void 0,t.shrinkWrap(),t.render(),t.rect&&(s=s.rebase(t.rect.x-a.x,t.rect.y-a.y)),this.history.add({type:"bitmapChange",kind:e,layer:t,patchRect:s,rect:a,patch:i}),this.render(),!0},this.primeCut=(e=!0)=>{if(!this.fresco||!this.fresco.hasSelection())return[void 0,void 0];const t=this.fresco.getSelected();if(!t||!t.rect)return this.notify("noLayerSelected"),[void 0,void 0];const s=this.fresco.selection.bounds.intersect(t.rect);if(s){let i=u.Nw(s.width,s.height),a=i.getContext("2d");return a.drawImage(t.canvas,t.rect.x-s.x,t.rect.y-s.y),a.save(),a.globalCompositeOperation="destination-in",a.drawImage(this.fresco.selection.mask,-s.x,-s.y),a.restore(),a=void 0,e&&(a=t.canvas.getContext("2d"),a.save(),a.globalCompositeOperation="destination-out",a.drawImage(this.fresco.selection.mask,-t.rect.x,-t.rect.y),a.restore(),a=void 0,t.render()),[i,s]}return this.notify("selectionEmpty"),[void 0,void 0]},this.selectionSave=()=>{this.fresco&&this.fresco.selection&&((0,a.Ay)("selection-restore").classList.remove("disabled"),this.selection=u.oM(this.fresco.selection.mask),this.notify("selectionSaved"))},this.selectionRestore=()=>{var e,t;this.selection&&(this.history.add({type:"selectionChange",kind:"restore",selection:u.oM(null===(t=null===(e=this.fresco)||void 0===e?void 0:e.selection)||void 0===t?void 0:t.mask)}),this.fresco.addSelection(),this.fresco.selection.drawOnMask(this.selection,0,!1,!1),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")))},this.selectionAll=()=>{var e,t;this.fresco&&(this.history.add({type:"selectionChange",kind:"all",selection:u.oM(null===(t=null===(e=this.fresco)||void 0===e?void 0:e.selection)||void 0===t?void 0:t.mask)}),this.fresco.addSelection(),this.fresco.selection.selectAll(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")))},this.selectionDeselect=()=>{var e,t;this.fresco&&this.fresco.selection&&(this.history.add({type:"selectionChange",kind:"deselect",selection:u.oM(null===(t=null===(e=this.fresco)||void 0===e?void 0:e.selection)||void 0===t?void 0:t.mask)}),this.fresco.removeSelection(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")))},this.selectionInvert=()=>{var e,t;this.fresco&&this.fresco.hasSelection()&&(this.history.add({type:"selectionChange",kind:"invert",selection:u.oM(null===(t=null===(e=this.fresco)||void 0===e?void 0:e.selection)||void 0===t?void 0:t.mask)}),this.fresco.selection.invert(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")))},this.selectionPixels=()=>{var e,t;const s=this.fresco.getSelected();if(!s||!s.canvas)return;this.history.add({type:"selectionChange",kind:"pixels",selection:u.oM(null===(t=null===(e=this.fresco)||void 0===e?void 0:e.selection)||void 0===t?void 0:t.mask)}),this.fresco.addSelection(),this.fresco.clearSelection();let i=new f.A;i.addShader("alpha-mask",1);const a=i.apply(s.canvas);this.fresco.selection.drawOnMask(a,0,!1,!1,s.rect.topLeft()),i.cleanUp(),i=void 0,document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select"))},this.selectionSubject=async()=>{var e,t;const s=this.fresco.getSelected();if(!s||!s.canvas)return;document.dispatchEvent(new CustomEvent("loading",{detail:"start"})),this.history.add({type:"selectionChange",kind:"subject",selection:u.oM(null===(t=null===(e=this.fresco)||void 0===e?void 0:e.selection)||void 0===t?void 0:t.mask)}),this.fresco.addSelection(),this.fresco.clearSelection();const i=await(0,p.P)(s.canvas),a=new f.A;a.addShader("alpha-shift-mask",!0);const n=a.apply(u.k8(i,1080)),r=u.Nw(s.canvas.width,s.canvas.height);r.getContext("2d").drawImage(n,0,0,r.width,r.height),this.fresco.selection.drawOnMask(r,0,!1,!1,s.rect.topLeft()),a.cleanUp(),document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select"))},this.selectionConvert=()=>{if(!this.fresco.isSelectedImageWithCanvas())return;if(!this.fresco.hasSelection())return;const e=this.fresco.getSelected(),t=u.oM(this.fresco.selection.mask);e.addMask(),e.mask.getContext("2d").drawImage(this.fresco.selection.mask,-e.rect.x,-e.rect.y),this.fresco.removeSelection(),this.history.add({type:"convertSelectionToMask",layer:e,selection:t}),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select"))},this.maskAdd=()=>{if(!this.fresco.isSelectedImageWithCanvas())return;const e=this.fresco.getSelected();this.history.add({type:"mask",layer:e,rect:e.rect.clone()}),e.addMask(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select"))},this.maskApply=()=>{if(!this.fresco.isSelectedImageWithCanvas())return void document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("noCutout")}));const e=this.fresco.getSelected(),t=e.mask,s=e.canvas,a=e.rect.clone();e.render(),e.canvas=e.baked,e.removeMask(),e.shrinkWrap(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("maskApplied")})),this.history.add({type:"applyMask",layer:e,canvas:s,mask:t,rect:a})},this.maskInvert=()=>{if(!this.fresco.isSelectedImageWithCanvas())return void document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("noCutout")}));const e=this.fresco.getSelected();e.hasMask()?(e.invertMask(),e.render(),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("invert")})),document.dispatchEvent(new CustomEvent("layer-select")),this.history.add({type:"maskInvert",layer:e})):document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("noCutout")}))},this.maskDelete=()=>{if(!this.fresco.getSelected())return;const e=this.fresco.getSelected();if(!e.hasMask())return;const t=u.ON(e.mask);e.removeMask(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("reset")})),this.history.add({type:"mask",layer:e,rect:new g.A(0,0,t.width,t.height),patch:t})},this.maskExtract=()=>{const e=this.fresco.getSelected();if(e&&e.mask){let t=u.oM(e.canvas),s=t.getContext("2d");s.save(),s.globalCompositeOperation="destination-in",s.drawImage(e.mask,0,0),s.restore(),s=void 0;let a=u.TL(e.mask),n=u.Nw(a.width,a.height);s=n.getContext("2d"),s.drawImage(t,-a.x,-a.y),this.addImage(n,"Cutout","extract"),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("layerCreated")}))}else document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("noCutout")}))},this.maskConvert=()=>{const e=this.fresco.getSelected();if(!e||!e.hasMask())return;const t=e.mask;this.fresco.addSelection(),this.fresco.selection.drawOnMask(e.mask,0,!1,!1,e.rect.topLeft()),e.removeMask(),this.history.add({type:"convertMaskToSelection",layer:e,mask:t}),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layer-select"))},this.resize=(e,t,s,i)=>{this.canvas.height=this.raster.height=o.Ay.isHDPI?2*i:i,this.canvas.width=this.raster.width=o.Ay.isHDPI?2*s:s,this.canvas.style.left=this.raster.style.left=e+"px",this.canvas.style.top=this.raster.style.top=t+"px",this.canvas.style.width=this.raster.style.width=s+"px",this.canvas.style.height=this.raster.style.height=i+"px";let a=this.raster.getBoundingClientRect();this.rasterRect=new g.A(a.x,a.y,a.width,a.height),this.setZoom(this.zoomMode)},this.setZoomStep=(e,t=1)=>{this.fresco&&(1===t&&(this.zoom=Math.round(10*this.zoom)/10),this.zoom+=e?this.zoom>=5?1*t:.1*t:this.zoom>=6?-1*t:-.1*t,this.zoom=u.qE(this.zoom,.1,50),this.zoomMode="free",this.updateViewport(),document.dispatchEvent(new CustomEvent("zoom-change")))},this.setFluidZoom=e=>{if(!this.fresco)return;const t=o.Ay.isHDPI?.1:.12;this.zoomMode="free",this.zoom+=e?this.zoom*t:-this.zoom*t,this.zoom=u.qE(this.zoom,.1,50),this.zoom>.95&&this.zoom<1.05&&(this.zoom=1),this.updateViewport(),document.dispatchEvent(new CustomEvent("zoom-change"))},this.resetZoom=()=>{this.setZoom(this.zoomMode)},this.setZoom=e=>{this.fresco&&("fit"===e?(this.zoomMode="fit",this.zoom=u.yu(this.fresco.width,this.fresco.height,this.raster.width-2*this.bounds,this.raster.height-2*this.bounds),this.anchor.x=Math.round(this.fresco.width/2),this.anchor.y=Math.round(this.fresco.height/2)):"fill"===e?(this.zoomMode="fill",this.zoom=u.aE(this.fresco.width,this.fresco.height,this.raster.width,this.raster.height),this.anchor.x=Math.round(this.fresco.width/2),this.anchor.y=Math.round(this.fresco.height/2)):"free"!==e&&(this.zoomMode="free",this.zoom=Number.parseFloat(e),this.zoom=u.qE(this.zoom,.1,50)),this.updateViewport(),document.dispatchEvent(new CustomEvent("zoom-change")))},this.setAnchor=e=>{this.anchor.x=u.qE(e.x,0,this.fresco.width),this.anchor.y=u.qE(e.y,0,this.fresco.height)},this.resetAnchor=()=>{this.setAnchor(this.getViewPortAnchor())},this.updateViewport=()=>{if(!this.fresco)return;const e=this.fresco.width*this.zoom,t=this.fresco.height*this.zoom,s=.5*(this.canvas.width-e),i=.5*(this.canvas.height-t),a=e<this.canvas.width?e:this.canvas.width,n=t<this.canvas.height?t:this.canvas.height,r=s<0?0:s,h=i<0?0:i;this.viewClip=new g.A(~~r,~~h,~~a,~~n),this.offset=new y.A(this.viewClip.x,this.viewClip.y),this.overshot=new y.A;const c=o.Ay.isHDPI?500:250;if(0===this.offset.x){let t=this.anchor.x*this.zoom-this.canvas.width/2,s=e-this.canvas.width;if(this.offset.x=-u.qE(t,0,s),t<0){let e=u.qE(-1*t,0,c);this.viewClip.width=this.canvas.width-e,this.viewClip.x=e,this.offset.x+=e,this.overshot.x=e}if(t>s){let e=u.qE(t-s,0,c);this.viewClip.width=this.canvas.width-e,this.offset.x-=e,this.overshot.x=-e}}if(0===this.offset.y){let e=this.anchor.y*this.zoom-this.canvas.height/2,t=this.fresco.height*this.zoom-this.canvas.height;if(this.offset.y=-u.qE(e,0,t),e<0){let t=u.qE(-1*e,0,c);this.viewClip.height=this.canvas.height-t,this.viewClip.y=t,this.offset.y+=t,this.overshot.y=t}if(e>t){let s=u.qE(e-t,0,c);this.viewClip.height=this.canvas.height-s,this.offset.y-=s,this.overshot.y=-s}}this.supressRender||document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("viewport-update"))},this.getViewPort=()=>new g.A(this.offset.x>0?0:-1*~~(this.offset.x/this.zoom),this.offset.y>0?0:-1*~~(this.offset.y/this.zoom),Math.ceil(this.viewClip.width/this.zoom),Math.ceil(this.viewClip.height/this.zoom)),this.getViewPortAnchor=()=>{let e=new y.A;return e.x=(this.offset.x>0?-this.offset.x/this.zoom:this.offset.x/this.zoom*-1)+this.canvas.width/this.zoom/2,e.y=(this.offset.y>0?-this.offset.y/this.zoom:this.offset.y/this.zoom*-1)+this.canvas.height/this.zoom/2,e},this.getLayerLocationRect=e=>{if(e.rect)return new g.A(Math.round(e.rect.x*this.zoom+this.offset.x),Math.round(e.rect.y*this.zoom+this.offset.y),Math.round(e.rect.width*this.zoom),Math.round(e.rect.height*this.zoom),e.rect.rotation)},this.getLayerLocationTrim=e=>{if(!e.trim)return;let t=e.getGlobalTrim();return new g.A(Math.round(t.x*this.zoom+this.offset.x),Math.round(t.y*this.zoom+this.offset.y),Math.round(t.width*this.zoom),Math.round(t.height*this.zoom),t.rotation)},this.translateToRect=(e,t,s,i)=>{if(s){const s=e.x-t.x,i=e.y-t.y;let a=Math.sqrt(s*s+i*i)/Math.sqrt(2);t.x=e.x+(s>0?-a:a),t.y=e.y+(i>0?-a:a)}let a=e.x<t.x?e.x:t.x,n=e.y<t.y?e.y:t.y,r=e.x<t.x?t.x:e.x,o=e.y<t.y?t.y:e.y;return e=this.translateRasterToFresco(new y.A(a,n),void 0,!0),(t=this.translateRasterToFresco(new y.A(r,o),void 0,!1)).x=Math.ceil(t.x),t.y=Math.ceil(t.y),i&&(e=this.translateFrescoToRaster(e),t=this.translateFrescoToRaster(t)),new g.A(e.x,e.y,t.x-e.x,t.y-e.y)},this.translateRasterToFresco=(e,t=void 0,s=!0)=>{let i=(e.x-this.offset.x)/this.zoom,a=(e.y-this.offset.y)/this.zoom;return t&&(i-=t.x,a-=t.y),s?new y.A(Math.floor(i),Math.floor(a)):new y.A(i,a)},this.translateFrescoToRaster=(e,t)=>{let s=e.x,i=e.y;return t&&(s+=t.x,i+=t.y),s=Math.round(s*this.zoom)+this.offset.x,i=Math.round(i*this.zoom)+this.offset.y,new y.A(s,i)},this.animationId=0,this.isAnimating=!1,this.playAnimation=(e=24,t=new Array)=>{if(this.isAnimating)return;this.animators=t,0===this.animators.length&&(this.animators=d.A.bakeAnimators(this.fresco));let s=0;for(const i of this.animators)s=Math.max(s,i.getDuration()),i.prepare(new m.A(this.fresco.width,this.fresco.height));if(s>0){this.coating.hide(),this.isAnimating=!0,document.dispatchEvent(new CustomEvent("animation-play",{detail:s}));let t=0,i=performance.now(),a=performance.now();const n=1e3/e,r=Math.ceil((s+50)/1e3)*e,o=()=>{const e=performance.now(),s=e-i;s>n&&(t++,i=e-s%n,this.stepAnimation(i-a)),t>r?this.finnishAnimation():this.animationId=window.requestAnimationFrame(o)};o()}},this.stepAnimation=e=>{if(!this.animators)return;const t=new m.A(this.fresco.width,this.fresco.height);for(const s of this.animators)s.step(e,t);document.dispatchEvent(new CustomEvent("animation-step",{detail:e})),this.render()},this.stopAnimation=()=>{window.cancelAnimationFrame(this.animationId),this.finnishAnimation()},this.finnishAnimation=()=>{if(this.isAnimating){if(this.animators)for(const e of this.animators)e.finish();this.isAnimating=!1,this.coating.show(),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("animation-stop"))}},this.render=()=>{if(!this.supressRender)if(this.fresco){if(this.ctx&&(this.ctx=this.canvas.getContext("2d")),this.ctx.save(),this.ctx.globalAlpha=1,this.ctx.globalCompositeOperation="source-over",this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.rect(this.viewClip.x,this.viewClip.y,this.viewClip.width,this.viewClip.height),this.ctx.clip(),this.ctx.fillStyle=this.fresco.color?this.fresco.color:this.ptn,this.ctx.fillRect(this.viewClip.x,this.viewClip.y,this.viewClip.width,this.viewClip.height),this.ctx.translate(this.offset.x,this.offset.y),this.ctx.scale(this.zoom,this.zoom),this.isAnimating)for(var e=0;e<this.fresco.layers.length;e++){const t=this.fresco.layers[e];t.settings.visible&&(t.transform?this.renderTransformedLayer(this.ctx,t):this.renderLayer(this.ctx,t,this.zoom<1))}else for(let e=0;e<this.fresco.layers.length;e++){const t=this.fresco.layers[e];t.settings.visible&&(this.fresco.hasScratch()&&this.fresco.scratch.id===t.id?("over"===this.fresco.scratch.renderMode&&this.renderLayer(this.ctx,t,this.zoom<1),this.renderLayer(this.ctx,this.fresco.scratch,this.zoom<1)):this.renderLayer(this.ctx,t,this.zoom<1))}if(this.ctx.restore(),this.fresco.block){this.ctx.globalAlpha=1,this.ctx.globalCompositeOperation="source-over";let e=this.canvas.width<this.canvas.height?this.canvas.height:this.canvas.width;this.ctx.drawImage(this.premiumGrid,0,this.canvas.height-e,e,e)}}else this.fresco||(this.canvas.width=1,this.canvas.height=1)},this.renderOutputFrame=(e,t,s=!1)=>{e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),s||(e.fillStyle=this.fresco.color?this.fresco.color:"#000000",e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high";for(var i=0;i<this.fresco.layers.length;i++){const s=this.fresco.layers[i];(t||s.settings.visible)&&(s.transform?this.renderTransformedLayer(e,s):this.renderLayer(e,s,!1))}e.restore()},this.renderTransformedLayer=(e,t)=>{var s;if((t.canvas||t.baked)&&t.rect){e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high",e.globalAlpha=t.settings.opacity*(null!==(s=t.transform.opacity)&&void 0!==s?s:1),e.globalCompositeOperation=""===t.settings.blendmode?"source-over":t.settings.blendmode;try{e.save();const s=t.bect?t.bect:t.rect,i=t.transient?t.transient:t.baked?t.baked:t.canvas;let a=s.x+.5*s.width+t.transform.offset.x,n=s.y+.5*s.height+t.transform.offset.y;e.translate(a,n),a=-.5*s.width,n=-.5*s.height,t.rect.rotation&&e.rotate(t.rect.rotation*Math.PI/180),t.transform.rotation&&(e.translate(s.width*(t.transform.rAnchor.x-.5),s.height*(t.transform.rAnchor.y-.5)),e.rotate(t.transform.rotation*Math.PI/180),a=-s.width*t.transform.rAnchor.x,n=-s.height*t.transform.rAnchor.y),!t.transform.scale||1===t.transform.scale.x&&1===t.transform.scale.y||(e.translate(s.width*(t.transform.sAnchor.x-.5),s.height*(t.transform.sAnchor.y-.5)),e.scale(t.transform.scale.x,t.transform.scale.y),a=-s.width*t.transform.sAnchor.x,n=-s.height*t.transform.sAnchor.y),e.drawImage(i,a,n,s.width,s.height),e.restore()}catch(i){console.log(i)}}},this.renderLayer=(e,t,s,i)=>{if((t.canvas||t.baked)&&t.rect){e.imageSmoothingQuality="high",e.globalAlpha=t.settings.opacity,e.imageSmoothingEnabled=s||0!==t.rect.rotation,e.globalCompositeOperation=""===t.settings.blendmode?"source-over":t.settings.blendmode;try{const s=t.bect?t.bect:t.rect,a=t.transient?t.transient:t.baked?t.baked:t.canvas;if(t.rect.rotation){let n=s.x+.5*s.width,r=s.y+.5*s.height;i&&(n-=i.x,r-=i.y),e.save(),e.translate(n,r),e.rotate(t.rect.rotation*Math.PI/180),e.drawImage(a,-.5*s.width,-.5*s.height,s.width,s.height),e.restore()}else{let t=s.x,n=s.y;i&&(t-=i.x,n-=i.y),e.drawImage(a,t,n,s.width,s.height)}}catch(a){console.log(a)}}},this.renderPreview=e=>{this.ctx&&e&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(e,this.viewClip.x,this.viewClip.y,this.viewClip.width,this.viewClip.height))},this.getThumbnail=()=>{if(this.canvas)return this.getOutputCanvas(this.fresco,u.aE(this.fresco.width,this.fresco.height,200,180))},this.getSingleLayerOutputCanvas=()=>{const e=this.fresco.getSelected();if(!e||!e.canvas)return;let t=u.Nw(this.fresco.width,this.fresco.height),s=t.getContext("2d");return this.renderLayer(s,e,!1),s=null,t},this.getOutputCanvas=(e=this.fresco,t=1,s,i)=>{if(t>1&&(t=1),!i){i=u.VI(Math.round(e.width*t),Math.round(e.height*t)).getContext("2d")}i.save(),i.scale(t,t),e.color||s?(i.fillStyle=e.color?e.color:s,i.fillRect(0,0,i.canvas.width,i.canvas.height)):i.clearRect(0,0,i.canvas.width,i.canvas.height);for(var a=0;a<e.layers.length;a++){const s=e.layers[a];s.settings.visible&&this.renderLayer(i,s,t<1)}return i.restore(),i.canvas},this.layerDragMove=()=>{this.layerDrag.fresco!==this.fresco.id&&this.coating.drawDropPreviewRect(this.layerDrag.position,this.layerDrag.layer)},this.layerDragDrop=()=>{const e=this.layerDrag;if(e.fresco===this.fresco.id)return;const t=this.layerDrag.layer.clone(),s=new y.A(e.position.x-this.rasterRect.x,e.position.y-this.rasterRect.y),i=this.translateRasterToFresco(s);t.rect.x=i.x-e.layer.rect.width/2,t.rect.y=i.y-e.layer.rect.height/2,t.settings.link="",this.fresco.addLayer(t),this.coating.clear(),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update")),this.history.add({type:"addLayer",kind:"duplicate"+t.type,layer:t})},this.close=e=>{this.stopAnimation(),void 0===e&&this.fresco&&(e=this.fresco.id);const t=this.tabs.findIndex(t=>t.fresco.id===e),s=this.fresco&&this.fresco.id===e;if(!(t<0)){if(this.tabs.splice(t,1).forEach(e=>e.fresco.cleanUp()),1===this.tabs.length&&o.Ay.api&&(this.showTabs=!1,document.dispatchEvent(new CustomEvent("fresco-select")),document.dispatchEvent(new CustomEvent("resize"))),0===this.tabs.length)return this.history=null,this.fresco=null,this.showTabs=!1,this.coating.clear(),this.render(),document.dispatchEvent(new CustomEvent("tool-apply")),document.dispatchEvent(new CustomEvent("fresco-select")),document.dispatchEvent(new CustomEvent("history-update")),document.dispatchEvent(new CustomEvent("viewport-update")),void document.dispatchEvent(new CustomEvent("layerlist-update"));if(s){const e=Math.min(t,this.tabs.length-1);this.select(this.tabs[e].fresco.id)}else document.dispatchEvent(new CustomEvent("fresco-select"))}},this.cleanUp=()=>{document.removeEventListener("viewport-render",this.render,!1),document.removeEventListener("sync-document",this.doSync,!1),document.removeEventListener("layer-drag-move",this.layerDragMove,!1),document.removeEventListener("layer-drag-drop",this.layerDragDrop,!1),document.removeEventListener("render-enabled",this.doRender,!1),document.removeEventListener("reset-viewport",this.resetZoom,!1),document.removeEventListener("unblock-viewport",this.unblock,!1),document.removeEventListener("touchstart",this.touch,!1)},this.workspace=e,this.tabs=[],document.addEventListener("touchstart",this.touch,!1),o.Ay.isHDPI=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches&&!o.Ay.performanceMode&&document.body.clientWidth<650,o.Ay.isSafari=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),o.Ay.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent),o.Ay.isIOS&&document.documentElement.classList.add("ios"),this.canvas=this.workspace.querySelector(".canvas"),this.canvas||(this.canvas=(0,a.T)("canvas",{className:"canvas"}),e.appendChild(this.canvas)),this.canvas.width=this.canvas.height=1,this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.createBGPattern(),this.raster=this.workspace.querySelector(".raster"),this.raster||(this.raster=(0,a.T)("canvas",{className:"raster"}),e.appendChild(this.raster)),this.anchor=new y.A(0,0),this.offset=new y.A(0,0),this.coating=new l.A(this),document.addEventListener("viewport-render",this.render,!1),document.addEventListener("sync-document",this.doSync,!1),document.addEventListener("layer-drag-move",this.layerDragMove,!1),document.addEventListener("layer-drag-drop",this.layerDragDrop,!1),document.addEventListener("render-enabled",this.doRender,!1),document.addEventListener("reset-viewport",this.resetZoom,!1),document.addEventListener("unblock-viewport",this.unblock,!1),"premium"!==(null===T.N||void 0===T.N?void 0:T.N.subscriptionAccess)&&(this.premiumGrid=(0,a.T)("img",{src:"/img/misc/premium-grid.svg"}))}async syncDocument(e){var t,s,i;if(!(!e||this.syncQueue>0||this.syncDisabled||o.Ay.api)&&(!e.templateMeta||this.history.hasChanges()))try{this.syncQueue++;let a,r=new Date;e.id===(null===(t=this.fresco)||void 0===t?void 0:t.id)&&(a=await u.PG(this.getThumbnail()));const o=e.layers.map(e=>e.id),h=await u.PG(null===(s=null==e?void 0:e.selection)||void 0===s?void 0:s.mask),c=await(0,n.P2)(),[l,d,p,m]=c.transaction("readwrite","document-meta","document-thumbnail","document-selection","layer-meta");let g=u.bD(M.l,await l.get(e.id));g||(g=new M.l(e.id,e.name,e.width,e.height,e.color,e.templateMeta,e.animation)),g.lastModified=r,g.width=e.width,g.color=e.color,g.height=e.height,g.selected=null===(i=null==e?void 0:e.getSelected())||void 0===i?void 0:i.id,g.templateMeta=e.templateMeta,g.animation=e.animation,g.order=o;const[y]=await Promise.all([m.index("document").getAllKeys(e.id),a?d.put(a,e.id):void 0,h?p.put(h,e.id):p.delete(e.id),l.put(g)]),v=y.filter(t=>!e.layers.some(e=>e.id===t)),f=e.layers.filter(e=>!y.includes(e.id));await Promise.all(f.map(t=>M.z.sync(t,e))),await Promise.all(v.map(async e=>M.z.delete(e)));const b=e.layers.filter(e=>e.syncRequested&&(!e.syncLatest||e.syncRequested>e.syncLatest));await Promise.all(b.map(t=>M.z.sync(t,e))),document.cookie="has-history=true; path=/; SameSite=Strict; expires=Fri, 31 Dec 9999 23:59:59 GMT"}finally{this.syncQueue--}}createNew(e,t,s,i){document.dispatchEvent(new CustomEvent("navigate",{detail:"editor"})),this.addTab(new c.A(u.Os(),e,t,s,i),"create"),this.addEmpty(),this.setZoom("fit"),document.dispatchEvent(new CustomEvent("navigate",{detail:"editor"}))}async openFromHistory(e,t){document.dispatchEvent(new CustomEvent("navigate",{detail:"editor"})),e.templateMeta&&e.templateMeta.premium&&"premium"===(null===T.N||void 0===T.N?void 0:T.N.subscriptionAccess)&&(e.templateMeta.locked=!1);const s=new c.A(e.id,e.name,e.width,e.height,e.transparent?void 0:e.color,e.animation,e.templateMeta);this.addTab(s,"document"),this.setZoom("fit"),this.renderPreview(t),this.supressRender=!0,document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));try{await e.restore(s),s.layers.length>0&&this.selectLayer(s.layers[0])}catch(i){console.log(i)}document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),this.supressRender=!1,document.dispatchEvent(new CustomEvent("fresco-select")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("selection-update")),document.dispatchEvent(new CustomEvent("resize")),document.dispatchEvent(new CustomEvent("navigate",{detail:"editor"}))}addGroup(){let e="Group "+this.fresco.nextAddedLayerNumber();const t=new D.A;this.fresco.numSelected()>1&&(t.numberOfMembers=this.fresco.numSelected());let s=new P.A(u.Os(),e,t);return this.fresco.addLayer(s),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update")),this.history.add({type:"addLayer",kind:"group",layer:s}),s}addEmpty(){let e="Layer "+this.fresco.nextAddedLayerNumber(),t=new A.A(u.Os(),e);return this.fresco.addLayer(t),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update")),this.history.add({type:"addLayer",kind:"addemptyimage",layer:t}),t}addImage(e,t,s){if(document.dispatchEvent(new CustomEvent("navigate",{detail:"editor"})),this.fresco||this.addTab(new c.A(u.Os(),t,e.width,e.height,void 0,void 0,void 0,s),"image"),"frame"===s&&this.fresco.getSelected()instanceof w.A)return void this.setFrameContent(e);const a=0===this.fresco.layers.length;let n=this.fresco.addLayer(new A.A(u.Os(),a?(0,i.A)("background"):t,e,new g.A(0,0,e.width,e.height),a));if(a)this.setZoom("fit"),this.syncDocument(this.fresco);else{let e=this.getViewPort().center();n.rect.x=Math.round(e.x-n.rect.width/2),n.rect.y=Math.round(e.y-n.rect.height/2),this.history.add({type:"addLayer",kind:s+"image",layer:n})}return document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("navigate",{detail:"editor"})),o.Ay.tool&&(document.dispatchEvent(new CustomEvent("select-tool",{detail:o.Ay.tool})),o.Ay.tool=void 0),n}async addSVGShape(e,t,s){document.dispatchEvent(new CustomEvent("navigate",{detail:"editor"}));let i=new E.A;i.variant="svg",i.content=e;let a=new x.A(u.Os(),t,void 0,i);if(await a.prepare(),this.fresco||this.addTab(new c.A(u.Os(),a.settings.name,a.rect.width,a.rect.height,void 0,void 0,void 0,s),"shape"),this.fresco.addLayer(a),1===this.fresco.layers.length)this.setZoom("fit"),this.syncDocument(this.fresco);else{let e=this.getViewPort().center();a.rect.x=Math.round(e.x-a.rect.width/2),a.rect.y=Math.round(e.y-a.rect.height/2),this.history.add({type:"addLayer",kind:s+"shape",layer:a})}return document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("navigate",{detail:"editor"})),o.Ay.tool&&(document.dispatchEvent(new CustomEvent("select-tool",{detail:o.Ay.tool})),o.Ay.tool=void 0),a}async addShape(e,t,s="add"){e||(e=new g.A(Math.round(this.fresco.width/4),Math.round(this.fresco.height/4),Math.round(this.fresco.width/2),Math.round(this.fresco.height/2))),t||((t=new E.A).variant="rectangle",t.fillType="color",t.fillValue="#444444");let a=(0,i.A)("shape")+" "+this.fresco.nextAddedLayerNumber(),n=new x.A(u.Os(),a,e,t);return await n.prepare(),this.fresco.addLayer(n),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),this.history.add({type:"addLayer",kind:s+"shape",layer:n}),n}addElement(e,t,s,i,a){let n;if((0,r.A)("add-element",s),a!==k.A.SCALE_METHOD_NONE)if((this.fresco.height>this.fresco.width&&e.height<e.width||this.fresco.width>this.fresco.height&&e.width<e.height)&&(e=u.SE(e,90)),n=new k.A(u.Os(),t,e,s,"overlay",i,a),a==k.A.SCALE_METHOD_FILL){let t=g.A.fillFit(e.width,e.height,this.fresco.width,this.fresco.height);n.calculate(new y.A(t.x,t.y),new y.A(t.right(),t.bottom()),0)}else n.calculate(new y.A(0,0),new y.A(this.fresco.width,this.fresco.height),0);else{let r=g.A.bestFit(e.width,e.height,this.fresco.width,this.fresco.height);(e.height>this.fresco.height||e.width>this.fresco.width)&&(e=u.tm(e,r.width,r.height)),n=new k.A(u.Os(),t,e,s,"sticker",i,a),n.rect.x=r.x,n.rect.y=r.y}return this.fresco.addLayer(n),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update")),this.history.add({type:"addLayer",kind:"addelement",layer:n}),n}async addText(e,t,s,i="add"){if(!e||!t||!s){e="Lorem ipsum ..",(s=new S.A("Verdana",40)).fillType="color",s.fillValue="#ffffff";let i=this.getViewPort();t=new g.A(Math.round(i.x+(i.width-Math.round(i.width/1.2))/2),Math.round(i.y+i.height/2.5),Math.round(i.width/1.2),40)}const a=new b.A(u.Os(),e,t,s);return await a.prepare(),this.fresco.addLayer(a),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),this.history.add({type:"addLayer",kind:i+"text",layer:a}),a}addFrame(e){e||(e=new g.A(Math.round(this.fresco.width/4),Math.round(this.fresco.height/4),Math.round(this.fresco.width/2),Math.round(this.fresco.height/2)));let t=(0,i.A)("frame")+" "+this.fresco.nextAddedLayerNumber();const s=new w.A(u.Os(),t,e);return this.fresco.addLayer(s),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),this.history.add({type:"addLayer",kind:"addframe",layer:s}),s}crop(e){const t=new m.A(this.fresco.width,this.fresco.height),s=new y.A(-e.x,-e.y);this.fresco.crop(e),this.updateViewport(),this.history.add({type:"crop",offset:s,size:t})}flip(e){this.fresco.flip(e),this.render(),this.history.add({type:"flip",vertical:e})}rotate(e){this.fresco.rotate(e),this.updateViewport(),this.history.add({type:"rotate",counterClock:e})}rotateSelected(e){const t=this.fresco.getSelected();t?t.settings.locked?this.notify("layer locked"):(this.history.add({type:"rotateLayer",layer:t,counterClock:e}),t.rotate(e),document.dispatchEvent(new CustomEvent("viewport-render"))):this.notify("no layer selected")}flipSelected(e){if(!this.isSelectedLayerShaderble())return void this.notify("onlyImageLayer");const t=this.fresco.getSelected();t.settings.locked?this.notify("layerLocked"):(this.history.add({type:"flipLayer",layer:t,vertical:e}),t.flip(e),t.render(),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("viewport-render")))}straighten(e){if(!this.fresco.lockedBackground())return;const t=this.fresco.layers[0].rect.rotatedSize(e);this.fresco.straighten(e,t.width,t.height),this.updateViewport()}addTab(e,t,s=!0,i=!1,a=!1){i||document.dispatchEvent(new CustomEvent("navigate",{detail:"editor"}));const n=new N(e,t,a);this.tabs.push(n),s&&(this.fresco=n.fresco,this.history=n.history,this.setZoom("fit"),n.zoom=this.zoom,n.zoomMode=this.zoomMode,n.anchor=this.anchor,document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("layerlist-update")),this.history.dispatchHistoryStatus()),this.tabs.length>this.tabLimit&&this.close(this.tabs[0].fresco.id),this.tabs.length>1&&(this.showTabs=!0),document.dispatchEvent(new CustomEvent("fresco-select")),document.dispatchEvent(new CustomEvent("resize"))}select(e){this.stopAnimation();const t=this.tabs.find(t=>t.fresco.id===e);if(!t)return;const s=this.tabs.find(e=>{var t;return e.fresco.id===(null===(t=this.fresco)||void 0===t?void 0:t.id)});s&&(s.zoom=this.zoom,s.zoomMode=this.zoomMode,s.anchor=this.anchor.clone()),this.fresco=t.fresco,this.history=t.history,this.zoom=t.zoom,this.zoomMode=t.zoomMode,this.anchor=t.anchor,this.updateViewport(),document.dispatchEvent(new CustomEvent("zoom-change")),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("fresco-select")),document.dispatchEvent(new CustomEvent("resize")),this.history.dispatchHistoryStatus()}duplicate(e){const t=this.tabs.find(t=>t.fresco.id===e);if(!t)return;const s=t.fresco.clone();this.addTab(s,"image"),this.syncDocument(s)}}},59858:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BacsDirectDebitDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.BacsDirectDebitDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"bankAccountNumber",baseName:"bankAccountNumber",type:"string"},{name:"bankLocationId",baseName:"bankLocationId",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"holderName",baseName:"holderName",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"BacsDirectDebitDetails.TypeEnum"}],function(e){let t;!function(e){e.DirectdebitGb="directdebit_GB"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.BacsDirectDebitDetails||(t.BacsDirectDebitDetails={}))},60149:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DonationPaymentRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.DonationPaymentRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"accountInfo",baseName:"accountInfo",type:"AccountInfo"},{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"authenticationData",baseName:"authenticationData",type:"AuthenticationData"},{name:"billingAddress",baseName:"billingAddress",type:"BillingAddress"},{name:"browserInfo",baseName:"browserInfo",type:"BrowserInfo"},{name:"channel",baseName:"channel",type:"DonationPaymentRequest.ChannelEnum"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"conversionId",baseName:"conversionId",type:"string"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"dateOfBirth",baseName:"dateOfBirth",type:"Date"},{name:"deliverAt",baseName:"deliverAt",type:"Date"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"DeliveryAddress"},{name:"deviceFingerprint",baseName:"deviceFingerprint",type:"string"},{name:"donationAccount",baseName:"donationAccount",type:"string"},{name:"donationOriginalPspReference",baseName:"donationOriginalPspReference",type:"string"},{name:"donationToken",baseName:"donationToken",type:"string"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantRiskIndicator",baseName:"merchantRiskIndicator",type:"MerchantRiskIndicator"},{name:"metadata",baseName:"metadata",type:"{ [key: string]: string; }"},{name:"mpiData",baseName:"mpiData",type:"ThreeDSecureData"},{name:"origin",baseName:"origin",type:"string"},{name:"paymentMethod",baseName:"paymentMethod",type:"ApplePayDonations | CardDonations | GooglePayDonations | IdealDonations | PayWithGoogleDonations | null"},{name:"recurringProcessingModel",baseName:"recurringProcessingModel",type:"DonationPaymentRequest.RecurringProcessingModelEnum"},{name:"redirectFromIssuerMethod",baseName:"redirectFromIssuerMethod",type:"string"},{name:"redirectToIssuerMethod",baseName:"redirectToIssuerMethod",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"returnUrl",baseName:"returnUrl",type:"string"},{name:"sessionValidity",baseName:"sessionValidity",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperIP",baseName:"shopperIP",type:"string"},{name:"shopperInteraction",baseName:"shopperInteraction",type:"DonationPaymentRequest.ShopperInteractionEnum"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"socialSecurityNumber",baseName:"socialSecurityNumber",type:"string"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"threeDS2RequestData",baseName:"threeDS2RequestData",type:"ThreeDS2RequestFields"},{name:"threeDSAuthenticationOnly",baseName:"threeDSAuthenticationOnly",type:"boolean"}],function(e){let t,s,i;!function(e){e.IOs="iOS",e.Android="Android",e.Web="Web"}(t=e.ChannelEnum||(e.ChannelEnum={})),function(e){e.CardOnFile="CardOnFile",e.Subscription="Subscription",e.UnscheduledCardOnFile="UnscheduledCardOnFile"}(s=e.RecurringProcessingModelEnum||(e.RecurringProcessingModelEnum={})),function(e){e.Ecommerce="Ecommerce",e.ContAuth="ContAuth",e.Moto="Moto",e.Pos="POS"}(i=e.ShopperInteractionEnum||(e.ShopperInteractionEnum={}))}(s=t.DonationPaymentRequest||(t.DonationPaymentRequest={}))},60254:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutSessionInstallmentOption=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutSessionInstallmentOption=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"plans",baseName:"plans",type:"Array<CheckoutSessionInstallmentOption.PlansEnum>"},{name:"preselectedValue",baseName:"preselectedValue",type:"number"},{name:"values",baseName:"values",type:"Array<number>"}],function(e){let t;!function(e){e.BuynowPaylater="buynow_paylater",e.InteresRefundPrctg="interes_refund_prctg",e.InterestBonus="interest_bonus",e.NointeresRefundPrctg="nointeres_refund_prctg",e.NointerestBonus="nointerest_bonus",e.RefundPrctg="refund_prctg",e.Regular="regular",e.Revolving="revolving",e.WithInterest="with_interest"}(t=e.PlansEnum||(e.PlansEnum={}))}(s=t.CheckoutSessionInstallmentOption||(t.CheckoutSessionInstallmentOption={}))},60492:(e,t,s)=>{s.d(t,{A:()=>g});var i=s(21742),a=s(42268),n=s(53900),r=s(54738),o=s(22866),h=s(81937),c=s(26806),l=s(10122),d=s(3514),p=s(79453),u=s(6395);async function m(e){const t=await fetch(`https://pixlr.com/api/assets/${e}/download/`),s=await t.json();if(!s.status)throw new Error(s.message);return s.data.url}class g extends c.A{constructor(e){super((0,i.A)("titleAddElement"),!1,!0),this.cache=new Map,this.SERVER_URL="https://pixlr.com/api/assets/collections/keyword/",this.layerSelect=()=>{let e=!0;if(this.stage.fresco.isSelectedType(o.A.TYPE_ELEMENT)?(this.layer=this.stage.fresco.getSelected(),e=this.layer.settings.name!==this.selected,this.selected=this.layer.settings.name,(0,a.Ay)("add-element-list").classList.add("element-layer-selected")):(this.layer=null,this.selected="",(0,a.Ay)("add-element-list").classList.remove("element-layer-selected")),this.subcategory&&e){(0,a.Ay)("element-settings").style.display="none";const e=(0,a.Ay)("add-element-list").querySelectorAll(".element-box");for(let t=0;t<e.length;t++){const s=e[t];this.layer&&this.layer.settings.name===s.id?(s.classList.add("selected"),setTimeout(()=>{this.positionSettings(s,!0)},200)):s.classList.remove("selected")}}},this.back=()=>{this.subcategory?this.fetchCategory():this.showCategoryList()},this.showCategoryList=()=>{(0,a.Ay)("add-element-back").style.display="none",(0,a.Ay)("add-element-category-list").style.display="block",(0,a.Ay)("add-element-category").style.display="none",(0,a.Ay)("element-settings").style.display="none"},this.selectCategory=e=>{(0,a.Ay)("add-element-category-list").style.display="none",(0,a.Ay)("add-element-category").style.display="block",(0,a.Ay)("add-element-loading").style.display="block",(0,a.Ay)("element-settings").style.display="none",(0,a.Ay)("add-element-back").style.display="flex",(0,a.Ay)("add-element-list").innerHTML="",this.category=e.currentTarget.getAttribute("data"),this.fetchCategory()},this.fetchCategory=async()=>{if((0,a.Ay)("add-element-list").innerHTML="",(0,a.Ay)("add-element-loading").style.display="block",(0,a.Ay)("element-settings").style.display="none",this.cache.has(this.category))this.renderCategory(this.category,this.cache.get(this.category));else try{const e=await fetch(this.SERVER_URL+this.category+"?platform=web"),t=await e.json();if(!t.status)throw new Error("server_error");let s=t.data;this.cache.set(this.category,s),this.renderCategory(this.category,s)}catch(e){console.log(e),(0,a.Ay)("add-element-loading").style.display="none",window.navigator.onLine?(0,a.Ay)("add-element-error").style.display="block":(0,a.Ay)("add-element-offline").style.display="block"}},this.renderCategory=(e,t)=>{(0,a.Ay)("add-element-loading").style.display="none";let s=(0,a.Ay)("add-element-list");this.subcategory="",t.forEach(t=>{let n=document.createElement("div");n.classList.add("element-group"),n.addEventListener("click",()=>{this.renderSubCategory(this.category,t.name,t.assets)},!1);let r=document.createElement("div");r.classList.add("wrap",e),n.appendChild(r);let o=document.createElement("img");if(t.assets.length>0&&(o.src=t.assets[0].thumbnailSmall,o.style.objectFit="cover",o.style.overflow="hidden"),r.appendChild(o),"premium"===t.type){let e=(0,a.T)("div",{className:"premium-tag"},(0,a.T)("img",{src:"/img/icon/premium.svg"}));e.setAttribute("tooltip",(0,i.A)("premium")),e.setAttribute("flow","up-right"),r.append(e)}let h=document.createElement("span");h.innerText=t.name.replace("_"," "),n.appendChild(h),s.appendChild(n)}),(0,a.Ay)("add-element-content").getElementsByClassName("ss-content")[0].scrollTo(0,0)},this.renderSubCategory=(e,t,s)=>{let n=(0,a.Ay)("add-element-list");n.innerHTML="",this.subcategory=t;let r=e==l.A.VARIANT_OVERLAY;s.forEach(t=>{let s=document.createElement("div");if(s.classList.add("element-box"),s.id=t.id,r){let a=document.createElement("a");a.classList.add("add","button","negative"),a.innerHTML="<img src='/img/icon/duplicate.svg'/> "+(0,i.A)("add"),a.addEventListener("click",i=>{var a,n,r;"premium"!==t.type||"premium"===(null===p.N||void 0===p.N?void 0:p.N.subscriptionAccess)?this.addElement(s.id,!1,e,t.id,m(t.id),null===(a=null==t?void 0:t.metaData)||void 0===a?void 0:a.blendmode,null===(n=null==t?void 0:t.metaData)||void 0===n?void 0:n.opacity,null===(r=null==t?void 0:t.metaData)||void 0===r?void 0:r.scalemode):new d.A("element","premium")},!1),s.appendChild(a)}s.addEventListener("click",i=>{var a,n,o;"premium"!==t.type||"premium"===(null===p.N||void 0===p.N?void 0:p.N.subscriptionAccess)?this.addElement(s.id,r,e,t.id,m(t.id),null===(a=null==t?void 0:t.metaData)||void 0===a?void 0:a.blendmode,null===(n=null==t?void 0:t.metaData)||void 0===n?void 0:n.opacity,null===(o=null==t?void 0:t.metaData)||void 0===o?void 0:o.scalemode):new d.A("element","premium")},!1);let o=document.createElement("div");o.classList.add("wrap",e),s.appendChild(o);let h=document.createElement("img");if(h.src=t.thumbnailSmall,o.appendChild(h),"premium"===t.type){let e=(0,a.T)("div",{className:"premium-tag"},(0,a.T)("img",{src:"/img/icon/premium.svg"}));e.setAttribute("tooltip",(0,i.A)("premium")),e.setAttribute("flow","right"),o.append(e)}let c=document.createElement("span");s.appendChild(c),this.layer&&this.layer.settings.name==s.id&&setTimeout(()=>{s.classList.add("selected"),this.positionSettings(s,!0)},200),n.appendChild(s)}),(0,a.Ay)("add-element-content").getElementsByClassName("ss-content")[0].scrollTo(0,0)},this.select=e=>{(0,a.Ay)("element-settings").style.display="none";let t=(0,a.Ay)(e),s=(0,a.Ay)("add-element-list").getElementsByTagName("div");for(var i=0;i<s.length;i++)s[i].classList.remove("selected");t.classList.add("selected"),this.selected=t.id,setTimeout(()=>{this.positionSettings(t)},200)},this.positionSettings=(e,t=!1)=>{(0,a.Ay)("element-opacity").value=(0,a.Ay)("element_opacity_out").innerHTML=this.layer?Math.round(100*this.layer.settings.opacity).toString():"100",t&&((0,a.Ay)("element-progress").style.display="none"),(0,a.Ay)("element-rotate-flip").style.display="overlay"===this.category||"border"===this.category?"block":"none";let s=(0,a.Ay)("element-settings");s.style.display="block",s.style.top=e.offsetTop+"px",s.style.left=e.offsetLeft+"px"},this.addElement=async(e,t,s,i,n,o="",h=1,c=l.A.SCALE_METHOD_NONE)=>{t=t&&this.layer&&this.layer.variant===s,this.select(e),this.canceled=!1,this.loading=!0;const d=(0,a.Ay)("element-progress");d.style.display="block",d.value=0;try{const e=await n,t=await(0,u.yP)(e,e=>{this.canceled||(-1==e?d.removeAttribute("value"):d.value=e)});if(d.style.display="none",this.canceled)return;const s=await(0,u.Ep)(t);if(this.canceled)return;this.loading=!1;let a=r.k8(s,4096);this.layer=this.stage.addElement(a,i,e,o,c)}catch(p){console.log("Error",p),d.style.display="none"}},this.delete=()=>{this.loading?(this.loading=!1,this.canceled=!0,this.layerSelect()):(this.layer=null,this.selected="",this.stage.deleteLayer())},this.opacityDown=e=>{this.layer&&(this.opacityStart=this.layer.settings.opacity)},this.opacityUp=e=>{this.layer&&this.stage.history.add({type:"layerSettings",kind:"opacity",layer:this.layer,settings:Object.assign(Object.assign({},this.layer.settings),{opacity:this.opacityStart})})},this.opacity=e=>{this.layer&&(this.layer.settings.opacity=Number((0,a.Ay)("element-opacity").value)/100,document.dispatchEvent(new CustomEvent("viewport-render")))},this.rotateOrFlip=e=>{let t=this.stage.fresco.getSelected();if(!t||!t.rect)return;switch(e.currentTarget.getAttribute("id")){case"element-flip-vertical":t.flip(!0);break;case"element-flip-horizontal":t.flip(!1);break;case"element-rotate-left":t.rotateAndFit(!0,new n.A(this.stage.fresco.width,this.stage.fresco.width));break;case"element-rotate-right":t.rotateAndFit(!1,new n.A(this.stage.fresco.width,this.stage.fresco.width))}document.dispatchEvent(new CustomEvent("viewport-render"))},this.cleanUp=()=>{(0,a.Ay)("add-element-list").innerHTML="",document.removeEventListener("layer-select",this.layerSelect,!1),(0,a.Ay)("element-rotate-left").removeEventListener("click",this.rotateOrFlip,!1),(0,a.Ay)("element-rotate-right").removeEventListener("click",this.rotateOrFlip,!1),(0,a.Ay)("element-flip-horizontal").removeEventListener("click",this.rotateOrFlip,!1),(0,a.Ay)("element-flip-vertical").removeEventListener("click",this.rotateOrFlip,!1),(0,a.Ay)("add-element-back").removeEventListener("click",this.back,!1),(0,a.Ay)("element-delete").removeEventListener("click",this.delete,!1);const e=(0,a.Ay)("element-opacity");e.removeEventListener("input",this.opacity,!1),e.removeEventListener("mousedown",this.opacityDown,!1),e.removeEventListener("mouseup",this.opacityUp,!1),e.removeEventListener("touchstart",this.opacityDown,!1),e.removeEventListener("touchend",this.opacityUp,!1);let t=(0,a.Ay)("add-element-category-list").getElementsByTagName("li");for(var s=0;s<t.length;s++)t[s].removeEventListener("click",this.selectCategory,!1);document.removeEventListener("keydown",this.keyDown,!1),this.dialog.remove(),this.dialog=null,this.modal.remove(),this.modal=null},this.stage=e,this.dialog.style.width="500px",this.dialog.style.height="400px",this.dialog.style.maxWidth="500px",this.content.style.padding="0px 0px 0px 20px",this.content.id="add-element-content",document.addEventListener("layer-select",this.layerSelect,!1),this.setContent(`\n            <div id="element-settings">\n                <progress id="element-progress" value="0" max="100"></progress>\n                <img class="close" id="element-delete" src="/img/icon/close.svg" title="Delete">\n                <div class="range-white" id="element-settings-amount">\n                    <label>${(0,i.A)("transparency")}</label>\n                    <input type="range" value="100" min="0" max="100" step="1" id="element-opacity" name="element_opacity" oninput="element_opacity_out.value=this.value" />\n                    <output name="element_opacity_out" id="element_opacity_out" for="element_opacity">100</output>\n                </div>\n                <ul id="element-rotate-flip" class="small-icon-button-set">\n                    <li id="element-rotate-left"><img src="/img/icon/rotate-left.svg" alt="Rotate Left"></li>\n                    <li id="element-rotate-right"><img src="/img/icon/rotate-right.svg"  alt="Rotate Right"></li>\n                    <li id="element-flip-horizontal"><img src="/img/icon/flip-horizontal.svg"  alt="Flip Horizontal"></li>\n                    <li id="element-flip-vertical"><img src="/img/icon/flip-vertical.svg"  alt="Flip Vertical"></li>\n                </ul>\n            </div>\n\n            <ul id="add-element-category-list" class="section-list top-20">\n                <li data="overlay" id="add-element-overlay"><span>${(0,i.A)("overlay")}</span>\n                </li><li data="border" id="add-element-border"><span>${(0,i.A)("border")}</span>\n                </li><li data="shape" id="add-element-shape"><span>${(0,i.A)("shape")}</span>\n                </li><li data="sticker" id="add-element-sticker"><span>${(0,i.A)("sticker")}</span></li>\n            </ul>\n\n            <div id="add-element-category" style="display:none;" >\n                \n                <div id="add-element-loading" class="top-20" style="display:none;">${(0,i.A)("loading")} .. </div>\n                <div id="add-element-list" class="top-20">\n\n                </div>\n                <div id="add-element-error" class="top-20" style="display: none">\n                    <h3>${(0,i.A)("error")}</h3>\n                    <p>\n                        ${(0,i.A)("genericError")}\n                    </p>\n                </div>\n                <div id="add-element-offline" class="top-20" style="display: none">\n                    <h3>${(0,i.A)("offline")}</h3>\n                    <p>\n                        ${(0,i.A)("genericOffline")}\n                    </p>\n                </div>\n            </div>\n        `),(0,a.Ay)("dialog-buttons"+this.mid).insertBefore((0,a.T)("a",{className:"button negative",id:"add-element-back",style:"margin-right:auto"},(0,a.T)("img",{src:"/img/icon/back-small.svg",width:14,height:14}),(0,i.A)("back")),(0,a.Ay)("dialog-cancel"+this.mid)),(0,a.Ay)("dialog-apply"+this.mid).style.display="none",(0,a.Ay)("dialog-cancel"+this.mid).innerText=(0,i.A)("close"),(0,a.Ay)("add-element-back").addEventListener("click",this.back,!1),(0,a.Ay)("element-delete").addEventListener("click",this.delete,!1);const t=(0,a.Ay)("element-opacity");t.addEventListener("input",this.opacity,!1),t.addEventListener("mousedown",this.opacityDown,!1),t.addEventListener("mouseup",this.opacityUp,!1),t.addEventListener("touchstart",this.opacityDown,{passive:!0}),t.addEventListener("touchend",this.opacityUp,{passive:!0}),(0,a.Ay)("element-rotate-left").addEventListener("click",this.rotateOrFlip,!1),(0,a.Ay)("element-rotate-right").addEventListener("click",this.rotateOrFlip,!1),(0,a.Ay)("element-flip-horizontal").addEventListener("click",this.rotateOrFlip,!1),(0,a.Ay)("element-flip-vertical").addEventListener("click",this.rotateOrFlip,!1);let s=(0,a.Ay)("add-element-category-list").getElementsByTagName("li");for(var c=0;c<s.length;c++)s[c].addEventListener("click",this.selectCategory,!1);this.showCategoryList(),this.layerSelect(),new h.A(this.content)}}},60662:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MobilePayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.MobilePayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"type",baseName:"type",type:"MobilePayDetails.TypeEnum"}],function(e){let t;!function(e){e.Mobilepay="mobilepay"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.MobilePayDetails||(t.MobilePayDetails={}))},61161:(e,t,s)=>{s.d(t,{A:()=>k});var i=s(42268),a=s(21742),n=s(54738),r=s(40963),o=s(7324),h=s(75770),c=s(15818),l=s(82042),d=s(22866),p=s(29755),u=s(66495),m=s(26651),g=s(66827),y=s(8689),v=s(86755),f=s(86445),b=s(14983),w=s(81937),A=s(37771);class x extends A.A{constructor(e,t){super(t,(0,a.A)("styles"),!0),this.updateInputs=()=>{var e,t;(0,i.Ay)("shape-outline-settings").style.display="line"===this.selected.shapeSettings.variant?"none":"block",(0,i.Ay)("shape-outline").checked=this.selected.shapeSettings.outlineSize>0,this.outlineColor.setColor(null!==(e=this.selected.shapeSettings.outlineColor)&&void 0!==e?e:"#555555"),this.outlineSize.setValue(this.selected.shapeSettings.outlineSize),(0,i.Ay)("shape-shadow").checked=this.selected.shapeSettings.shadow,this.shadowColor.setColor(null!==(t=this.selected.shapeSettings.shadowColor)&&void 0!==t?t:"#000000"),this.shadowBlur.setValue(this.selected.shapeSettings.shadowBlur),this.shadowOpacity.setValue(this.selected.shapeSettings.shadowOpacity),this.shadowDistance.setValue(this.selected.shapeSettings.shadowDistance),this.shadowDirection.setValue(this.selected.shapeSettings.shadowDirection)},this.changeOutlineState=()=>{const e=this.selected.shapeSettings.clone();this.changeOutline(),this.stage.history.add({type:"shapeSettings",kind:"outline",layer:this.selected,settings:e})},this.changeOutline=()=>{let e=(0,i.Ay)("shape-outline").checked,t=this.outlineColor.getColor().toHEX(),s=this.outlineSize.getValue();this.selected.setOutline(e?s:0,t),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeOutlineColor=e=>{const t=this.selected.shapeSettings.clone();this.changeOutline(),this.stage.history.add({type:"shapeSettings",kind:"outline",layer:this.selected,settings:t})},this.changeShadowState=()=>{const e=this.selected.shapeSettings.clone();this.changeShadow(),this.stage.history.add({type:"shapeSettings",kind:"shadow",layer:this.selected,settings:e})},this.changeShadow=()=>{this.selected.setShadow((0,i.Ay)("shape-shadow").checked,this.shadowBlur.getValue(),this.shadowOpacity.getValue(),this.shadowColor.getColor().toHEX(),this.shadowDistance.getValue(),this.shadowDirection.getValue()),document.dispatchEvent(new CustomEvent("viewport-render"))},this.changeShadowColor=e=>{const t=this.selected.shapeSettings.clone();this.changeShadow(),this.stage.history.add({type:"shapeSettings",kind:"shadow",layer:this.selected,settings:t})},this.cleanUp=()=>{this.selected=void 0,this.outlineColor.cleanUp(),this.outlineColor=void 0,this.shadowColor.cleanUp(),this.shadowColor=void 0,this.outlineSize.cleanUp(),this.shadowBlur.cleanUp(),this.shadowOpacity.cleanUp(),this.shadowDistance.cleanUp(),this.shadowDirection.cleanUp(),(0,i.Ay)("shape-outline").removeEventListener("change",this.changeOutlineState,!1),(0,i.Ay)("shape-shadow").removeEventListener("change",this.changeShadowState,!1),this.superCleanUp()},this.stage=e,this.selected=this.stage.fresco.getSelected(),this.content.id="shape-style-content",this.content.style.height="400px",this.setContent(`\n            <section>\n                <div id="shape-outline-settings">\n                    <input type="checkbox" class="toggle-check" id="shape-outline" />\n                    <label class="switch subline top-4" for="shape-outline">${(0,a.A)("outline")}<span></span><span class="arrow"></span></label>\n                    <div class="toggle">\n                        <label class="split">${(0,a.A)("color")}<div id="shape-outline-color"></div></label>\n                        <div id="shape-outline-size" class="top-10"></div>\n                    </div>\n                </div>\n                <div>\n                    <input type="checkbox" class="toggle-check" id="shape-shadow" />\n                    <label class="switch subline top-10" for="shape-shadow">${(0,a.A)("shadow")}<span></span><span class="arrow"></span></label>\n                    <div class="toggle">\n                        <label class="split">${(0,a.A)("color")}<div id="shape-shadow-color"></div></label>\n                        <div id="shape-shadow-blur" class="top-10"></div>\n                        <div id="shape-shadow-distance"></div>\n                        <div id="shape-shadow-direction"></div>\n                        <div id="shape-shadow-opacity"></div>\n                    </div>\n                </div>\n            </section>\n        `),this.outlineColor=new y.A("shape-outline-color",c.A.fromHEX(p.Ay.altColor),this.changeOutlineColor),this.shadowColor=new y.A("shape-shadow-color",c.A.fromHEX(p.Ay.altColor),this.changeShadowColor);let s=this.selected.shapeSettings;const n={onStart:()=>{s=this.selected.shapeSettings.clone()},labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,100)/100};this.outlineSize=new l.A("shape-outline-size",{label:(0,a.A)("size"),defaultValue:4,range:[1,100],step:1,onChange:()=>this.changeOutline(),onEnd:()=>{this.stage.history.add({type:"shapeSettings",kind:"outline",layer:this.selected,settings:s})}});const r=Object.assign(Object.assign({},n),{range:[0,1],onChange:()=>this.changeShadow(),onEnd:()=>{this.stage.history.add({type:"shapeSettings",kind:"shadow",layer:this.selected,settings:s})}});this.shadowBlur=new l.A("shape-shadow-blur",Object.assign(Object.assign({},r),{label:(0,a.A)("blur")})),this.shadowOpacity=new l.A("shape-shadow-opacity",Object.assign(Object.assign({},r),{label:(0,a.A)("opacity"),defaultValue:1})),this.shadowDistance=new l.A("shape-shadow-distance",Object.assign(Object.assign({},r),{label:(0,a.A)("distance"),range:[0,1]})),this.shadowDirection=new l.A("shape-shadow-direction",Object.assign(Object.assign({},r),{label:(0,a.A)("direction"),range:[0,360],defaultValue:180,labelFormat:e=>e.toFixed(1),labelParse:e=>parseInt(e,10)})),(0,i.Ay)("shape-outline").addEventListener("change",this.changeOutlineState,!1),(0,i.Ay)("shape-shadow").addEventListener("change",this.changeShadowState,!1),this.updateInputs(),new w.A(this.content)}}class k extends h.A{constructor(e){super("shape",e),this.stage=e,this.isShiftDown=!1,this.showShapeStyles=()=>{new x(this.stage,(0,i.Ay)("shape-styles"))},this.keyDown=e=>{if("Shift"!==e.key||this.isShiftDown||(this.isShiftDown=!0,this.reform&&(this.reform.constrain=!1)),"Control"!==e.key||this.stage.coating.override||"draw"!==this.mode){if(","===e.key||"."===e.key)switch(e.key){case",":"draw"===this.mode?this.drawStroke.setValue(this.drawStroke.getValue()-1):this.lineSize.setValue(this.lineSize.getValue()-1,!0);break;case".":"draw"===this.mode?this.drawStroke.setValue(this.drawStroke.getValue()+1):this.lineSize.setValue(this.lineSize.getValue()+1,!0)}}else this.stage.coating.setPicker()},this.keyUp=e=>{"Shift"===e.key&&this.isShiftDown&&(this.isShiftDown=!1,this.reform&&(this.reform.constrain=!0)),"Control"===e.key&&this.stage.coating.override&&this.stage.coating.removePicker()},this.setMode=()=>{this.mode=document.querySelector('input[name="shape-mode"]:checked').value,"draw"===this.mode?this.setDrawType():this.setType(),this.layerSelect()},this.setDrawType=()=>{this.stage.coating.wake(),"bezier"===this.variant&&(this.stage.coating.freeze(!1),this.removeMoveListeners(),window.requestAnimationFrame(()=>this.stage.render())),this.variant=document.querySelector('input[name="shape-draw-type"]:checked').value,(0,i.Ay)("shape-draw-fill-settings").style.display="line"===this.variant||"bezier"===this.variant?"none":"flex",(0,i.Ay)("shape-draw-radii").style.display="rounded"===this.variant?"block":"none"},this.setType=()=>{this.stage.coating.sleep(),this.removeMoveListeners(),this.variant=document.querySelector('input[name="shape-type"]:checked').value,(0,i.Ay)("shape-path").style.display="path"===this.variant?"flex":"none",(0,i.Ay)("shape-fill-settings").style.display="line"===this.variant?"none":"flex",(0,i.Ay)("shape-line-settings").style.display="line"!==this.variant?"none":"flex",(0,i.Ay)("shape-outline-radii").style.display="rounded"===this.variant?"block":"none"},this.selectType=()=>{if(this.selected instanceof f.A){this.variant=document.querySelector('input[name="shape-type"]:checked').value;const e=this.selected.shapeSettings.clone();"path"===this.variant?this.selected.setPath(this.shape.getPath()):this.selected.setVariant(this.variant),this.stage.history.add({type:"shapeSettings",kind:"type",layer:this.selected,settings:e}),window.requestAnimationFrame(()=>this.stage.render())}this.setType()},this.previewShape=e=>{this.selected instanceof f.A&&(this.selected.setPath(e,!0),window.requestAnimationFrame(()=>this.stage.render()))},this.selectShape=e=>{if(this.selected instanceof f.A){const t=this.selected.shapeSettings.clone();this.selected.setPath(e),this.stage.history.add({type:"shapeSettings",kind:"shape",layer:this.selected,settings:t}),window.requestAnimationFrame(()=>this.stage.render())}},this.previewFill=e=>{this.selected instanceof f.A&&(this.selected.setFill(e,!0),window.requestAnimationFrame(()=>this.stage.render()))},this.selectFill=e=>{if(this.selected instanceof f.A){const t=this.selected.shapeSettings.clone();this.selected.setFill(e),this.stage.history.add({type:"shapeSettings",kind:"fill",layer:this.selected,settings:t}),window.requestAnimationFrame(()=>this.stage.render())}},this.selectLine=()=>{if(this.selected instanceof f.A){const e=this.selected.shapeSettings.clone();this.selected.setOutline(this.lineSize.getValue(),this.lineColor.getColor().toHEX()),this.stage.history.add({type:"shapeSettings",kind:"outline",layer:this.selected,settings:e}),document.dispatchEvent(new CustomEvent("viewport-render"))}},this.previewLineColor=e=>{this.selected instanceof f.A&&(this.selected.setOutline(this.lineSize.getValue(),this.lineColor.getColor().toHEX()),document.dispatchEvent(new CustomEvent("viewport-render")))},this.selectOutlineRadii=()=>{if(this.selected instanceof f.A){const e=this.selected.shapeSettings.clone();this.selected.setRadii(this.outlineRadii.getValue()),this.stage.history.add({type:"shapeSettings",kind:"radii",layer:this.selected,settings:e}),window.requestAnimationFrame(()=>this.stage.render())}},this.layerSelect=()=>{if((0,i.Ay)("shape-settings").style.display="none",(0,i.Ay)("shape-draw-settings").style.display="none",(0,i.Ay)("shape-draw-no-layer").style.display="none","draw"===this.mode){if(this.stage.history.commitTransaction(),this.reform&&this.reform.cleanUp(),this.reform=void 0,!this.stage.fresco.isSelectedType(d.A.TYPE_IMAGE))return(0,i.Ay)("shape-draw-no-layer").style.display="flex",this.stage.raster.style.cursor="auto",void(this.selected=void 0);(0,i.Ay)("shape-draw-settings").style.display="flex",this.stage.raster.style.cursor="crosshair",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,new r.A(0,0,this.stage.fresco.width,this.stage.fresco.height),"over")}else{if(this.selected!==this.stage.fresco.getSelected()&&this.stage.history.commitTransaction(),(0,i.Ay)("shape-settings").style.display="flex",(0,i.Ay)("shape-action").style.display="none",(0,i.Ay)("shape-styles-settings").style.display="none",this.reform||(this.reform=new m.A(this.stage,"SHAPE"),this.reform.proxy=this.downReform),this.stage.fresco.isSelectedType(d.A.TYPE_SHAPE))if(this.selected=this.stage.fresco.getSelected(),"svg"===this.selected.shapeSettings.variant)this.selected=void 0;else{let e=this.selected.shapeSettings;(0,i.Ay)("shape-type-"+e.variant).checked=!0,this.setType(),this.outlineRadii.setValue(e.radii),this.lineSize.setValue(e.outlineSize),this.lineColor.setColor(e.outlineColor),this.fill.setFill(this.selected.fill),"path"===e.variant&&this.shape.setPath(e.content),(0,i.Ay)("shape-action").style.display="flex",(0,i.Ay)("shape-styles-settings").style.display="flex"}else this.selected=void 0;document.querySelectorAll('input[name="shape-type"]').forEach(e=>{let t=!0;this.selected instanceof f.A&&("line"===this.selected.shapeSettings.variant&&"line"!==e.value||"line"!==this.selected.shapeSettings.variant&&"line"===e.value)&&(t=!1),(0,i.Ay)(e.id+"-label").style.display=t?"block":"none"})}},this.down=e=>{this.reform||this.downDraw(e)},this.move=e=>{"draw"===this.mode?this.moveDraw(e):this.moveDesign(e)},this.up=e=>{"draw"===this.mode?this.upDraw(e):this.upDesign(e)},this.downReform=(e,t)=>{this.downPoint=e,"line"===this.variant&&0===this.lineSize.getValue()||("line"===this.variant||this.fill.getFill()&&this.fill.getFill().value)&&("path"===this.variant&&(this.path2D=new Path2D(this.shape.getPath())),this.addMoveListeners())},this.moveDesign=e=>{if(this.isShiftDown){const t=this.downPoint.x-e.x,s=this.downPoint.y-e.y;if("line"===this.variant)Math.abs(t)<Math.abs(s)?e.x=this.downPoint.x:e.y=this.downPoint.y;else{let i=Math.sqrt(t*t+s*s)/Math.sqrt(2);e.x=this.downPoint.x+(t>0?-i:i),e.y=this.downPoint.y+(s>0?-i:i)}}const t=this.stage.coating.ctx;switch(t.lineWidth="line"===this.variant?Math.max(Math.round(this.lineSize.getValue()*this.stage.zoom),1):2,t.strokeStyle=n.bi,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.save(),this.variant){case"path":const s=this.stage.translateToRect(this.downPoint,e,this.isShiftDown,!0);if(s.width>0&&s.height>0){const e=new Path2D;e.addPath(this.path2D,(new DOMMatrix).scale(s.width/100,s.height/100)),t.translate(s.x,s.y),t.stroke(e)}break;case"rounded":const i=r.A.fromPoints([this.downPoint,e]);u.A.roundRect(t,i.x,i.y,i.width,i.height,Math.max(Math.round(this.outlineRadii.getValue()*this.stage.zoom),1)),t.stroke();break;case"rectangle":t.strokeRect(this.downPoint.x,this.downPoint.y,e.x-this.downPoint.x,e.y-this.downPoint.y);break;case"ellipse":u.A.ellipse(t,this.downPoint,e),t.stroke();break;case"line":u.A.line(t,this.downPoint,e),t.stroke()}t.restore()},this.upDesign=e=>{const t=this.stage.coating.ctx;if(t.clearRect(0,0,t.canvas.width,t.canvas.height),this.removeMoveListeners(),this.downPoint.distanceTo(e)<6)return;let s=this.stage.translateToRect(this.downPoint,e,"line"!==this.variant&&this.isShiftDown,!1),i=new b.A;switch(this.variant){case"path":i.variant="path",i.content=this.shape.getPath();break;case"rounded":i.variant="rounded",i.radii=this.outlineRadii.getValue();break;case"rectangle":i.variant="rectangle";break;case"ellipse":i.variant="ellipse";break;case"line":if(i.variant="line",this.isShiftDown){const t=this.downPoint.x-e.x,s=this.downPoint.y-e.y;if("line"===this.variant)Math.abs(t)<Math.abs(s)?e.x=this.downPoint.x:e.y=this.downPoint.y;else{let i=Math.sqrt(t*t+s*s)/Math.sqrt(2);e.x=this.downPoint.x+(t>0?-i:i),e.y=this.downPoint.y+(s>0?-i:i)}}let t=s.center(),a=s.bottomRight().distanceTo(s.topLeft());s.x=Math.round(t.x-a/2),s.y=t.y-Math.ceil(this.lineSize.getValue()/2),s.width=Math.round(a),s.height=this.lineSize.getValue(),s.rotation=this.stage.translateRasterToFresco(this.downPoint).angleTo(this.stage.translateRasterToFresco(e)),i.outlineSize=this.lineSize.getValue(),i.outlineColor=this.lineColor.getColor().toHEX()}let a=this.fill.getFill();a&&a.value&&(i.fillType=this.fill.getFill().getType(),i.fillValue=this.fill.getFill().getStringValue()),this.stage.addShape(s,i)},this.downDraw=e=>{if(!this.selected)return;if((0,i.Ay)("shape-draw-fill").checked||0!==this.drawStroke.getValue()){if("bezier"===this.variant&&this.upPoint)return this.stage.coating.freeze(!1),this.addDrawHistory(),this.downPoint=this.upPoint=void 0,void this.removeMoveListeners();this.scratch.ctx.fillStyle=p.Ay.altColor,this.scratch.ctx.strokeStyle=p.Ay.mainColor,this.scratch.ctx.lineWidth=this.drawStroke.getValue(),this.scratch.settings.opacity=this.drawOpacity.getValue(),this.downPoint=this.stage.translateRasterToFresco(e),this.stage.coating.freeze(!0),this.addMoveListeners()}},this.moveDraw=e=>{this.scratch.clear(),e=this.stage.translateRasterToFresco(e),this.scratch.ctx.save();const t=(0,i.Ay)("shape-draw-fill").checked;if(this.isShiftDown){const t=this.downPoint.x-e.x,s=this.downPoint.y-e.y;if("line"===this.variant||"bezier"===this.variant)Math.abs(t)<Math.abs(s)?e.x=this.downPoint.x:e.y=this.downPoint.y;else{let i=Math.sqrt(t*t+s*s)/Math.sqrt(2);e.x=this.downPoint.x+(t>0?-i:i),e.y=this.downPoint.y+(s>0?-i:i)}}this.isDown||"bezier"!==this.variant?("bezier"===this.variant?(u.A.line(this.scratch.ctx,this.downPoint,e),this.scratch.ctx.stroke()):(t||"line"===this.variant)&&u.A.fill(this.scratch.ctx,this.variant,this.downPoint,e,this.drawRadii.getValue()),this.drawStroke.getValue()>0&&"line"!==this.variant&&"bezier"!==this.variant&&u.A.stroke(this.scratch.ctx,this.variant,this.downPoint,e,this.drawRadii.getValue())):(u.A.bezier(this.scratch.ctx,this.downPoint,this.upPoint,e),this.scratch.ctx.stroke()),this.scratch.ctx.restore(),this.scratch.applySelection(this.stage),window.requestAnimationFrame(()=>this.stage.render())},this.upDraw=e=>{this.upPoint=this.stage.translateRasterToFresco(e);const t=this.downPoint.x===this.upPoint.x&&this.downPoint.y===this.upPoint.y;!t&&"bezier"===this.variant&&this.upPoint||(this.upPoint=void 0,this.stage.coating.freeze(!1),this.removeMoveListeners(),t||(this.move(e),this.addDrawHistory()))},this.addDrawHistory=()=>{let e=n.TL(this.scratch.getCanvas());if(e&&e.width>0&&e.height>0){let t=this.selected.rect?n.ON(this.selected.canvas,e.rebase(this.selected.rect.x,this.selected.rect.y)):void 0;const s=n.oM(this.selected.mask),i=this.selected.rect?this.selected.rect.clone():void 0;this.selected.extendCanvas(e),this.scratch.drawToLayer(this.selected,void 0,this.drawOpacity.getValue()),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"shape",layer:this.selected,patchRect:this.selected.rect?e.rebase(this.selected.rect.x,this.selected.rect.y):e,patch:t,rect:i,mask:s})}},this.deleteLayer=()=>this.stage.deleteLayer(),this.duplicateLayer=()=>this.stage.duplicateLayer(),this.cleanUp=()=>{var e;this.stage.history.commitTransaction(),this.reform&&(this.reform.cleanUp(),this.reform=void 0),null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.stage.coating.removePicker(),this.stage.coating.wake(),this.stage.coating.freeze(!1),this.removeMoveListeners(),this.removeDownListeners(),window.requestAnimationFrame(()=>this.stage.render()),this.drawRadii.cleanUp(),this.drawStroke.cleanUp(),this.drawOpacity.cleanUp(),this.fill.cleanUp(),this.shape.cleanUp(),this.lineColor.cleanUp(),this.lineSize.cleanUp(),this.outlineRadii.cleanUp(),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keyup",this.keyUp,!1),document.removeEventListener("keydown",this.keyDown,!1),document.querySelectorAll('input[name="shape-draw-type"]').forEach(e=>e.removeEventListener("change",this.setDrawType)),document.querySelectorAll('input[name="shape-type"]').forEach(e=>e.removeEventListener("change",this.selectType)),(0,i.Ay)("shape-delete").removeEventListener("click",this.deleteLayer,!0),(0,i.Ay)("shape-duplicate").removeEventListener("click",this.duplicateLayer,!0),(0,i.Ay)("shape-mode-draw").removeEventListener("change",this.setMode),(0,i.Ay)("shape-mode-design").removeEventListener("change",this.setMode),(0,i.Ay)("shape-styles").removeEventListener("click",this.showShapeStyles,!1)},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),(0,i.Ay)("shape-mode-draw").addEventListener("change",this.setMode),(0,i.Ay)("shape-mode-design").addEventListener("change",this.setMode),(0,i.Ay)("shape-styles").addEventListener("click",this.showShapeStyles,!1),this.drawStroke=new l.A("shape-draw-size",{compact:!0,label:(0,a.A)("outline")+":",defaultValue:5,range:[0,50],step:1}),this.drawRadii=new l.A("shape-draw-radii",{compact:!0,label:(0,a.A)("radius")+":",defaultValue:5,range:[0,100],step:1}),this.drawOpacity=new l.A("shape-draw-opacity",{compact:!0,label:(0,a.A)("opacity")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%"}),document.querySelectorAll('input[name="shape-draw-type"]').forEach(e=>e.addEventListener("change",this.setDrawType)),document.querySelectorAll('input[name="shape-type"]').forEach(e=>e.addEventListener("change",this.selectType)),this.shape=new v.A("shape-shape",this.selectShape,this.previewShape),this.fill=new g.A("shape-fill",new o.A(c.A.fromHEX(p.Ay.mainColor)),this.selectFill,this.previewFill),this.lineColor=new y.A("shape-line-color",c.A.fromHEX(p.Ay.altColor),this.selectLine,this.previewLineColor),this.lineSize=new l.A("shape-line-size",{compact:!0,label:(0,a.A)("size")+":",defaultValue:4,range:[1,100],step:1,onEnd:this.selectLine}),this.outlineRadii=new l.A("shape-outline-radii",{compact:!0,label:(0,a.A)("radius")+":",defaultValue:5,range:[0,100],step:1,onEnd:this.selectOutlineRadii}),(0,i.Ay)("shape-delete").addEventListener("click",this.deleteLayer,!0),(0,i.Ay)("shape-duplicate").addEventListener("click",this.duplicateLayer,!0),this.addDownListeners(),this.setMode()}}},61247:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardBrandDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CardBrandDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"supported",baseName:"supported",type:"boolean"},{name:"type",baseName:"type",type:"string"}]},61268:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptedOrderData=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.EncryptedOrderData=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"orderData",baseName:"orderData",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"}]},61471:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataAirline=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataAirline=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"airline_agency_invoice_number",baseName:"airline.agency_invoice_number",type:"string"},{name:"airline_agency_plan_name",baseName:"airline.agency_plan_name",type:"string"},{name:"airline_airline_code",baseName:"airline.airline_code",type:"string"},{name:"airline_airline_designator_code",baseName:"airline.airline_designator_code",type:"string"},{name:"airline_boarding_fee",baseName:"airline.boarding_fee",type:"string"},{name:"airline_computerized_reservation_system",baseName:"airline.computerized_reservation_system",type:"string"},{name:"airline_customer_reference_number",baseName:"airline.customer_reference_number",type:"string"},{name:"airline_document_type",baseName:"airline.document_type",type:"string"},{name:"airline_flight_date",baseName:"airline.flight_date",type:"string"},{name:"airline_leg_carrier_code",baseName:"airline.leg.carrier_code",type:"string"},{name:"airline_leg_class_of_travel",baseName:"airline.leg.class_of_travel",type:"string"},{name:"airline_leg_date_of_travel",baseName:"airline.leg.date_of_travel",type:"string"},{name:"airline_leg_depart_airport",baseName:"airline.leg.depart_airport",type:"string"},{name:"airline_leg_depart_tax",baseName:"airline.leg.depart_tax",type:"string"},{name:"airline_leg_destination_code",baseName:"airline.leg.destination_code",type:"string"},{name:"airline_leg_fare_base_code",baseName:"airline.leg.fare_base_code",type:"string"},{name:"airline_leg_flight_number",baseName:"airline.leg.flight_number",type:"string"},{name:"airline_leg_stop_over_code",baseName:"airline.leg.stop_over_code",type:"string"},{name:"airline_passenger_date_of_birth",baseName:"airline.passenger.date_of_birth",type:"string"},{name:"airline_passenger_first_name",baseName:"airline.passenger.first_name",type:"string"},{name:"airline_passenger_last_name",baseName:"airline.passenger.last_name",type:"string"},{name:"airline_passenger_telephone_number",baseName:"airline.passenger.telephone_number",type:"string"},{name:"airline_passenger_traveller_type",baseName:"airline.passenger.traveller_type",type:"string"},{name:"airline_passenger_name",baseName:"airline.passenger_name",type:"string"},{name:"airline_ticket_issue_address",baseName:"airline.ticket_issue_address",type:"string"},{name:"airline_ticket_number",baseName:"airline.ticket_number",type:"string"},{name:"airline_travel_agency_code",baseName:"airline.travel_agency_code",type:"string"},{name:"airline_travel_agency_name",baseName:"airline.travel_agency_name",type:"string"}]},62085:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DotpayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.DotpayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"issuer",baseName:"issuer",type:"string"},{name:"type",baseName:"type",type:"DotpayDetails.TypeEnum"}],function(e){let t;!function(e){e.Dotpay="dotpay"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.DotpayDetails||(t.DotpayDetails={}))},62103:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OpenInvoiceDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.OpenInvoiceDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"billingAddress",baseName:"billingAddress",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"string"},{name:"personalDetails",baseName:"personalDetails",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"OpenInvoiceDetails.TypeEnum"}],function(e){let t;!function(e){e.Openinvoice="openinvoice",e.AfterpayDirectdebit="afterpay_directdebit",e.AtomePos="atome_pos"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.OpenInvoiceDetails||(t.OpenInvoiceDetails={}))},62348:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDS2Result=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ThreeDS2Result=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"authenticationValue",baseName:"authenticationValue",type:"string"},{name:"cavvAlgorithm",baseName:"cavvAlgorithm",type:"string"},{name:"challengeCancel",baseName:"challengeCancel",type:"ThreeDS2Result.ChallengeCancelEnum"},{name:"dsTransID",baseName:"dsTransID",type:"string"},{name:"eci",baseName:"eci",type:"string"},{name:"exemptionIndicator",baseName:"exemptionIndicator",type:"ThreeDS2Result.ExemptionIndicatorEnum"},{name:"messageVersion",baseName:"messageVersion",type:"string"},{name:"riskScore",baseName:"riskScore",type:"string"},{name:"threeDSRequestorChallengeInd",baseName:"threeDSRequestorChallengeInd",type:"ThreeDS2Result.ThreeDSRequestorChallengeIndEnum"},{name:"threeDSServerTransID",baseName:"threeDSServerTransID",type:"string"},{name:"timestamp",baseName:"timestamp",type:"string"},{name:"transStatus",baseName:"transStatus",type:"string"},{name:"transStatusReason",baseName:"transStatusReason",type:"string"},{name:"whiteListStatus",baseName:"whiteListStatus",type:"string"}],function(e){let t,s,i;!function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05",e._06="06",e._07="07"}(t=e.ChallengeCancelEnum||(e.ChallengeCancelEnum={})),function(e){e.LowValue="lowValue",e.SecureCorporate="secureCorporate",e.TrustedBeneficiary="trustedBeneficiary",e.TransactionRiskAnalysis="transactionRiskAnalysis"}(s=e.ExemptionIndicatorEnum||(e.ExemptionIndicatorEnum={})),function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05",e._06="06"}(i=e.ThreeDSRequestorChallengeIndEnum||(e.ThreeDSRequestorChallengeIndEnum={}))}(s=t.ThreeDS2Result||(t.ThreeDS2Result={}))},62388:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutSDKAction=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutSDKAction=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"paymentData",baseName:"paymentData",type:"string"},{name:"paymentMethodType",baseName:"paymentMethodType",type:"string"},{name:"sdkData",baseName:"sdkData",type:"{ [key: string]: string; }"},{name:"type",baseName:"type",type:"CheckoutSDKAction.TypeEnum"},{name:"url",baseName:"url",type:"string"}],function(e){let t;!function(e){e.Sdk="sdk",e.WechatpaySdk="wechatpaySDK"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CheckoutSDKAction||(t.CheckoutSDKAction={}))},63026:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SplitAmount=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.SplitAmount=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"currency",baseName:"currency",type:"string"},{name:"value",baseName:"value",type:"number"}]},63270:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Address=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"city",baseName:"city",type:"string"},{name:"country",baseName:"country",type:"string"},{name:"houseNumberOrName",baseName:"houseNumberOrName",type:"string"},{name:"postalCode",baseName:"postalCode",type:"string"},{name:"stateOrProvince",baseName:"stateOrProvince",type:"string"},{name:"street",baseName:"street",type:"string"}]},63306:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(42268),a=s(21742),n=s(26806),r=s(98244),o=s(6395);class h extends n.A{constructor(e={}){super((0,a.A)("dialogLoadTitle")),this.load=async e=>{(0,r.A)("load-url");const t=(0,i.Ay)("load-message");try{this.cancel=()=>{throw h.CANCEL};const s=this.settings.title||(0,a.A)("image"),n=this.settings.referrer||(0,a.A)("source");t.innerText=(0,a.A)("dialogLoadLoadingFrom",s.toLowerCase(),n.toLowerCase());const r=await(0,o.yP)(e,e=>{const t=(0,i.Ay)("load-progress");-1==e?t.removeAttribute("value"):t.value=e}),c=new File([r],this.settings.title||e.substring(e.lastIndexOf("/")+1),{type:r.type});return this.cleanUp(),c}catch(s){if(s===h.CANCEL)return void this.cleanUp();(0,i.Ay)("load-progress")&&(t.innerText=(0,a.A)("dialogLoadError"),(0,i.Ay)("load-progress").style.display="none",this.cancel=()=>{this.cleanUp()})}},this.settings=e,this.setContent('\n            <p id="load-message"></p><br />\n\n            <progress id="load-progress" value="0" max="100" style="width: 100%;"></progress>\n            <br><br>\n        '),(0,i.Ay)("dialog-apply"+this.mid).style.display="none";(0,i.Ay)("load-message").innerText=(0,a.A)("dialogLoadPrepare")}}h.CANCEL=new Error("CANCEL");const c=h},63315:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodsRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentMethodsRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"allowedPaymentMethods",baseName:"allowedPaymentMethods",type:"Array<string>"},{name:"amount",baseName:"amount",type:"Amount"},{name:"blockedPaymentMethods",baseName:"blockedPaymentMethods",type:"Array<string>"},{name:"channel",baseName:"channel",type:"PaymentMethodsRequest.ChannelEnum"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"order",baseName:"order",type:"EncryptedOrderData"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"splitCardFundingSources",baseName:"splitCardFundingSources",type:"boolean"},{name:"store",baseName:"store",type:"string"},{name:"storeFiltrationMode",baseName:"storeFiltrationMode",type:"PaymentMethodsRequest.StoreFiltrationModeEnum"}],function(e){let t,s;!function(e){e.IOs="iOS",e.Android="Android",e.Web="Web"}(t=e.ChannelEnum||(e.ChannelEnum={})),function(e){e.Exclusive="exclusive",e.Inclusive="inclusive",e.SkipFilter="skipFilter"}(s=e.StoreFiltrationModeEnum||(e.StoreFiltrationModeEnum={}))}(s=t.PaymentMethodsRequest||(t.PaymentMethodsRequest={}))},63479:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DokuDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.DokuDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"firstName",baseName:"firstName",type:"string"},{name:"lastName",baseName:"lastName",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"type",baseName:"type",type:"DokuDetails.TypeEnum"}],function(e){let t;!function(e){e.MandiriVa="doku_mandiri_va",e.CimbVa="doku_cimb_va",e.DanamonVa="doku_danamon_va",e.BniVa="doku_bni_va",e.PermataLiteAtm="doku_permata_lite_atm",e.BriVa="doku_bri_va",e.BcaVa="doku_bca_va",e.Alfamart="doku_alfamart",e.Indomaret="doku_indomaret",e.Wallet="doku_wallet",e.Ovo="doku_ovo"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.DokuDetails||(t.DokuDetails={}))},63810:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BlikDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.BlikDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"blikCode",baseName:"blikCode",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"BlikDetails.TypeEnum"}],function(e){let t;!function(e){e.Blik="blik"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.BlikDetails||(t.BlikDetails={}))},64019:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleGaussianBlur")),this.setContent((0,n.T)("div",{id:"gaussian-slider"})),new a.A("gaussian-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("gaussian",e)})}}},64409:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BillingAddress=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.BillingAddress=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"city",baseName:"city",type:"string"},{name:"country",baseName:"country",type:"string"},{name:"houseNumberOrName",baseName:"houseNumberOrName",type:"string"},{name:"postalCode",baseName:"postalCode",type:"string"},{name:"stateOrProvince",baseName:"stateOrProvince",type:"string"},{name:"street",baseName:"street",type:"string"}]},64483:(e,t,s)=>{s.d(t,{P:()=>n,o:()=>r});var i=s(78508),a=s(54738);async function n(e,t="image/png"){const s=await fetch("/api/auth/ai/remove-background/"),n=await s.json();if(!1===n.status)throw new Error(n.message);const r=(await a.r$(e)).replace("data:image/jpeg;base64,",""),o=await fetch("https://ai.pixlr.com/deblur",{method:"POST",headers:{authorizationtoken:n.data,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({image_b64:r,accept:t})});o.status>=200&&o.status<300&&await i.wj("deblur");const h=await o.blob();return a.lz(h)}async function r(e,t="image/png"){const s=await fetch("/api/auth/ai/remove-background/"),n=await s.json();if(!1===n.status)throw new Error(n.message);const r=(await a.r$(e)).replace("data:image/jpeg;base64,",""),o=await fetch("https://ai.pixlr.com/denoise",{method:"POST",headers:{authorizationtoken:n.data,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({image_b64:r,accept:t})});o.status>=200&&o.status<300&&await i.wj("denoise");const h=await o.blob();return a.lz(h)}},64531:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Name=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Name=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"firstName",baseName:"firstName",type:"string"},{name:"lastName",baseName:"lastName",type:"string"}]},64872:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(42903);class a extends i.A{constructor(e){super(e,"desaturate"),this.shaders.addShader("desaturate",1),this.apply()}}},65209:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e,t){this.name=e,this.value=t}}},65211:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceError=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ServiceError=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"errorCode",baseName:"errorCode",type:"string"},{name:"errorType",baseName:"errorType",type:"string"},{name:"message",baseName:"message",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"status",baseName:"status",type:"number"}]},65426:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDS2ResponseData=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ThreeDS2ResponseData=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"acsChallengeMandated",baseName:"acsChallengeMandated",type:"string"},{name:"acsOperatorID",baseName:"acsOperatorID",type:"string"},{name:"acsReferenceNumber",baseName:"acsReferenceNumber",type:"string"},{name:"acsSignedContent",baseName:"acsSignedContent",type:"string"},{name:"acsTransID",baseName:"acsTransID",type:"string"},{name:"acsURL",baseName:"acsURL",type:"string"},{name:"authenticationType",baseName:"authenticationType",type:"string"},{name:"cardHolderInfo",baseName:"cardHolderInfo",type:"string"},{name:"cavvAlgorithm",baseName:"cavvAlgorithm",type:"string"},{name:"challengeIndicator",baseName:"challengeIndicator",type:"string"},{name:"dsReferenceNumber",baseName:"dsReferenceNumber",type:"string"},{name:"dsTransID",baseName:"dsTransID",type:"string"},{name:"exemptionIndicator",baseName:"exemptionIndicator",type:"string"},{name:"messageVersion",baseName:"messageVersion",type:"string"},{name:"riskScore",baseName:"riskScore",type:"string"},{name:"sdkEphemPubKey",baseName:"sdkEphemPubKey",type:"string"},{name:"threeDSServerTransID",baseName:"threeDSServerTransID",type:"string"},{name:"transStatus",baseName:"transStatus",type:"string"},{name:"transStatusReason",baseName:"transStatusReason",type:"string"}]},66495:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(40963);class a{static roundRect(e,t,s,i,a,n=0){const r=Math.min(i/2,a/2,n);e instanceof Path2D||e.beginPath(),e.moveTo(t+r,s),e.lineTo(t+i-r,s),e.quadraticCurveTo(t+i,s,t+i,s+r),e.lineTo(t+i,s+a-r),e.quadraticCurveTo(t+i,s+a,t+i-r,s+a),e.lineTo(t+r,s+a),e.quadraticCurveTo(t,s+a,t,s+a-r),e.lineTo(t,s+r),e.quadraticCurveTo(t,s,t+r,s),e.closePath()}static cutRect(e,t,s,i,a,n=0){const r=Math.min(i/2,a/2,n);e.beginPath(),e.moveTo(t+r,s),e.lineTo(t+i-r,s),e.lineTo(t+i,s+r),e.lineTo(t+i,s+a-r),e.lineTo(t+i-r,s+a),e.lineTo(t+r,s+a),e.lineTo(t,s+a-r),e.lineTo(t,s+r),e.lineTo(t+r,s),e.closePath()}}a.ellipse=(e,t,s)=>{let i=.5*(s.x-t.x),a=.5*(s.y-t.y),n=t.x+i,r=t.y+a,o=.01,h=o,c=2*Math.PI-o;for(e.beginPath(),e.moveTo(n+i*Math.cos(0),r+a*Math.sin(0));h<c;h+=o)e.lineTo(n+i*Math.cos(h),r+a*Math.sin(h));e.closePath()},a.triangle=(e,t,s)=>{e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(s.x,s.y),e.lineTo(t.x-(s.x-t.x),s.y),e.lineTo(t.x,t.y),e.closePath()},a.star=(e,t,s)=>{let i=Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2));e.beginPath(),e.translate(t.x,t.y),e.moveTo(0,0-i);for(var a=0;a<5;a++)e.rotate(Math.PI/5),e.lineTo(0,0-.5*i),e.rotate(Math.PI/5),e.lineTo(0,0-i);e.translate(-t.x,-t.y)},a.heart=(e,t,s)=>{let i=Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2)),a=.8*i;e.save(),e.translate(t.x,t.y-i/2),e.rotate(45*Math.PI/180),e.beginPath(),e.moveTo(0,0),e.bezierCurveTo(-a,0,-a,i,0,i),e.lineTo(i,i),e.lineTo(i,0),e.bezierCurveTo(i,-a,0,-a,0,0),e.closePath(),e.restore()},a.rectangle=(e,t,s,i,a)=>{e.beginPath(),e.moveTo(t,s),e.lineTo(t+i,s),e.lineTo(t+i,s+a),e.lineTo(t,s+a),e.lineTo(t,s),e.closePath()},a.line=(e,t,s)=>{e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(s.x,s.y)},a.bezier=(e,t,s,i)=>{e.beginPath(),e.moveTo(t.x,t.y),e.quadraticCurveTo(i.x,i.y,s.x,s.y)},a.arc=(e,t,s)=>{e.beginPath(),e.arc(t.x,t.y,s,0,2*Math.PI)},a.fill=(e,t,s,n,r)=>{switch(t){case"rectangle":e.fillRect(s.x,s.y,n.x-s.x,n.y-s.y);break;case"rounded":const t=i.A.fromPoints([s,n]);a.roundRect(e,t.x,t.y,t.width,t.height,r),e.fill();break;case"ellipse":a.ellipse(e,s,n),e.fill();break;case"triangle":a.triangle(e,s,n),e.fill();break;case"star":a.star(e,s,n),e.fill();break;case"heart":a.heart(e,s,n),e.fill();break;case"line":a.line(e,s,n),e.stroke()}},a.stroke=(e,t,s,n,r)=>{switch(t){case"rectangle":e.strokeRect(s.x,s.y,n.x-s.x,n.y-s.y);break;case"rounded":const t=i.A.fromPoints([s,n]);a.roundRect(e,t.x,t.y,t.width,t.height,r),e.stroke();break;case"ellipse":a.ellipse(e,s,n),e.stroke();break;case"triangle":a.triangle(e,s,n),e.stroke();break;case"star":a.star(e,s,n),e.stroke();break;case"heart":a.heart(e,s,n),e.stroke();break;case"line":a.line(e,s,n),e.stroke()}};const n=a},66496:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleRGBSplit")),this.type="red-blue",this.selectSwatch=e=>{(0,n.Ay)("split-"+this.type).classList.remove("active");let t=e.currentTarget;this.type=t.getAttribute("data"),t.classList.add("active"),this.update()},this.update=()=>{this.change("rgb-split",{distance:this.distance.getValue()/20,amount:this.amount.getValue(),direction:this.direction.getValue(),type:this.type})},this.kind="rgbSplit",this.setContent((0,n.T)("div",{id:"split-distance"}),(0,n.T)("div",{id:"split-direction",className:"range-box top-16"}),(0,n.T)("div",{id:"split-amount",className:"range-box top-16"})),this.setContent(`\n            <label class="top-16">${(0,r.A)("color")}</label>\n            <div id="split-swatches" class="swatches top-4">\n                <div data="red-blue" id="split-red-blue" class="twin active"><span style="background-color: #d1480e;"></span><span style="background-color: #3a6e9a;"></span></div>\n                <div data="green-red" id="split-green-red" class="twin"><span style="background-color: #929C1F;"></span><span style="background-color: #d1480e;"></span></div>\n                <div data="blue-green" id="split-blue-green" class="twin"><span style="background-color: #3a6e9a;"></span><span style="background-color: #929C1F;"></span></div>\n\n                <div data="red" id="split-red"><span style="background-color: #d1480e;"></span></div>\n                <div data="green" id="split-green"><span style="background-color:#929C1F;"></span></div>\n                <div data="blue" id="split-blue"><span style="background-color: #3a6e9a"></span></div>\n            </div>\n        `),this.distance=new a.A("split-distance",{label:(0,r.A)("distance"),step:.01,range:[0,1],defaultValue:.2,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),this.direction=new a.A("split-direction",{label:(0,r.A)("direction"),step:1,range:[0,360],defaultValue:180,labelFormat:e=>`${Math.round(e)}`,labelParse:e=>parseInt(e,10),onChange:e=>this.update()}),this.amount=new a.A("split-amount",{label:(0,r.A)("amount"),step:.01,range:[0,1],defaultValue:1,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),document.querySelector("#split-swatches").querySelectorAll("div").forEach(e=>e.addEventListener("click",this.selectSwatch)),this.update()}}},66544:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(2215),a=s(42268),n=s(21742);class r extends i.A{constructor(e){super(e,(0,n.A)("titleMonochrome")),this.setValue=(e,t,s)=>{this.mRed.style.height=Math.round(24+100*e)+"px",this.mGreen.style.height=Math.round(24+100*t)+"px",this.mBlue.style.height=Math.round(24+100*s)+"px",(0,a.Ay)("monochrome-red").innerText="R: "+(100*e).toFixed(1)+"%",(0,a.Ay)("monochrome-green").innerText="G: "+(100*t).toFixed(1)+"%",(0,a.Ay)("monochrome-blue").innerText="B: "+(100*s).toFixed(1)+"%",this.update(e,t,s)},this.update=(e,t,s)=>{this.change("monochrome",{r:e,g:t,b:s})},this.dialog.style.width="440px",this.dialog.style.maxWidth="440px",this.mRed=(0,a.T)("div",{style:"background-color:#d1480e;"}),this.mGreen=(0,a.T)("div",{style:"background-color:#929C1F;"}),this.mBlue=(0,a.T)("div",{style:"background-color:#3a6e9a;"}),this.content.classList.add("flex");var t=(0,a.T)("div",{style:"margin-top:2px",className:"select"});t.innerHTML='\n            <select id="monochrome-preset">\n                <option value="0.299:0.587:0.114" selected>Rec601 Luma (Vision)</option>\n                <option value="0.2126:0.7152:0.0722">sRGB ITU-R BT.709</option>\n                <option value="0.2627:0.6780:0.0593">HDR ITU-R BT.2100</option>\n                <option value="0.3333333:0.3333334:0.3333333">Unweighted</option>\n                <option value="1:0:0">Red</option>\n                <option value="0:1:0">Green</option>\n                <option value="0:0:1">Blue</option>\n                <option value="0.18:0.41:0.41">Agfa 200X</option>\n                <option value="0.25:0.39:0.36">Agfapan 25</option>\n                <option value="0.21:0.40:0.39">Agfapan 100</option>\n                <option value="0.20:0.41:0.39">Agfapan 400</option>\n                <option value="0.21:0.42:0.37">Ilford Delta 100 & XP2 Super</option>\n                <option value="0.22:0.42:0.36">Ilford Delta 400</option>\n                <option value="0.31:0.36:0.33">Ilford Delta 400 Pro & 3200</option>\n                <option value="0.28:0.41:0.31">Ilford FP4</option>\n                <option value="0.23:0.37:0.40">Ilford HP5</option>\n                <option value="0.33:0.36:0.31">Ilford Pan F</option>\n                <option value="0.36:0.31:0.33">Ilford SFX</option>\n                <option value="0.21:0.42:0.37">Ilford</option>\n                <option value="0.24:0.37:0.39">Kodak Tmax 100</option>\n                <option value="0.27:0.36:0.37">Kodak Tmax 400</option>\n                <option value="0.25:0.35:0.40">Kodak Tri-X</option>\n                <option value="0.5:0.5:0">Red Green</option>\n                <option value="0:0.5:0.5:">Green Blue</option>\n                <option value="0.5:0:0.5:">Blue Red</option>\n            </select>\n        ';let s=(0,a.T)("div",{style:"margin:10px 20px;opacity:0.7",className:"flex"});s.innerHTML='\n            <div id="monochrome-red">R: </div>\n            <div id="monochrome-green">G: </div>\n            <div id="monochrome-blue">B: </div>\n        ',this.setContent((0,a.T)("div",{style:"position:relative;margin-top:20px;margin-bottom:30px;margin-left:10px;margin-right:5px;"},(0,a.T)("div",{className:"swatch-slider"},this.mRed),(0,a.T)("div",{className:"swatch-slider"},this.mGreen),(0,a.T)("div",{className:"swatch-slider"},this.mBlue)),(0,a.T)("div",{style:"flex-grow:1;margin:20px"},(0,a.T)("label",{},(0,n.A)("preset")),t,s)),(0,a.Ay)("monochrome-preset").addEventListener("change",()=>{let e=(0,a.Ay)("monochrome-preset").value.split(":");this.setValue(Number(e[0]),Number(e[1]),Number(e[2]))}),this.setValue(.299,.587,.114)}}},66718:(e,t,s)=>{s.d(t,{Ab:()=>w,D0:()=>v,EB:()=>x,IF:()=>f,gr:()=>b,s5:()=>E,zu:()=>y});var i=s(21742),a=s(42268),n=s(54738),r=s(16309),o=s(98244),h=s(15818),c=s(22866),l=s(14871),d=s(56709),p=s(10122),u=s(37699),m=s(56479),g=s(29755);s(93771);function y(){return void 0!==window.showSaveFilePicker}async function v(e,t,s,i="image/png"){try{return await window.showSaveFilePicker({suggestedName:e+"."+t,types:[{description:s,accept:{[i]:["."+t]}}]})}catch(a){if("AbortError"===a.name)return!1;throw a}}async function f(e,t){try{const s=await e.createWritable();await s.write(t),await s.close()}catch(s){return console.log(s),!1}return!0}function b(e,t,s){let i=(0,a.T)("a",{id:"download-link"});window.document.body.append(i),i.download=t+"."+s,i.href=URL.createObjectURL(e),void 0===i.download?window.location=i.href:i.click(),i.remove()}async function w(e,t,i=e.fresco){const{ZipWriter:a}=await Promise.all([s.e(6825),s.e(9262)]).then(s.bind(s,82355)),g="pixel"!==t.unit,y=i.color&&"component"!==t.type?i.color:void 0;let v=(e,t)=>0==t?e:v(t,e%t),f=e=>g?e/i.width:e,b=e=>g?e/i.height:e;const w=v(i.width,i.height),x=g?i.width/w:i.width,k=g?i.height/w:i.height;let S={id:t.id,name:t.name,type:t.type,unit:t.unit,width:x,height:k,background:y,stack:new Array};i.animation&&(S.animation=i.animation);const E=new Array,T=new Array,C=e.getOutputCanvas(i);if("template"===t.type&&e.fresco===i){const t=n.tm(C,Math.round(i.width*(640/i.height)),640),a=await n.PG(t,{type:"image/webp",quality:.9});if(E.push(new File([a],"preview.webp")),e.fresco.hasAnimation()){const t=300/k,i=await function(e,t,i,a,r){return function(e){let t;try{return t=new window.VideoEncoder({output:()=>{},error:()=>{}}),t.configure({width:16,height:16,codec:e,hardwareAcceleration:"prefer-software",framerate:30,bitrate:4e6}),!0}catch(s){return!1}finally{null==t||t.close()}}("avc1.420034")?((0,o.A)("video-encode","fast"),function(e,t,i,a,r){let o,h;const c=new n.m$(()=>new Promise(async(n,c)=>{try{const{Mp4:l}=await Promise.all([s.e(6825),s.e(2355)]).then(s.bind(s,82355)),p=1e6;h=new l(p);const u=Math.round(p/t),m=new d.A(e,t,i,!1,a);let g=0,y=!1,v=null;o=new VideoEncoder({output:(e,t)=>{if(y)return void console.error("Unexpected frames to process");if(null===v&&"key"===e.type){const e=new Uint8Array(t.decoderConfig.description);v=h.addVideoTrack(t.decoderConfig.codedWidth,t.decoderConfig.codedHeight,e)}const s=new Uint8Array(e.byteLength);e.copyTo(s),h.addFrame(v,u*g,u,0,"key"===e.type,s),g+=1,r&&r(g/m.totalFrames),g===m.totalFrames&&(y=!0,n(new Blob([h.fetchFile()],{type:"video/mp4"})))},error:e=>{console.error(e),c(e)}});let f=await m.requestFrame();const b=A(f.width,f.height,t);for(o.configure({width:f.width,height:f.height,codec:"avc1.420034",hardwareAcceleration:"prefer-software",framerate:t,bitrate:b});f;){const e=new VideoFrame(f,{timestamp:u*(m.currentFrame-1),duration:u});o.encode(e),e.close(),f=await m.requestFrame()}await o.flush()}catch(l){console.error(l)}finally{try{null==o||o.close()}catch(p){}}}),()=>{try{null==o||o.close(),null==h||h.free()}catch(e){}});return c}(e,t,i,a,r)):((0,o.A)("video-encode","slow"),function(e,t,s,i,a){const r=new m.Ug,o=new n.m$(async()=>{try{const h=new d.A(e,t,s,!1,i);let c,l,p=await h.requestFrame();for(;p;){const e=await n.PG(p,{type:"image/jpeg",quality:.92}),t=await new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(new Uint8Array(i.result)),i.readAsArrayBuffer(e)});if(o.isCanceled())throw new n.p3;r.send({type:"addFile",name:`${h.currentFrame}.jpeg`,data:t},[t.buffer]),c=p.width,l=p.height,a&&a(h.currentFrame/h.totalFrames/2),p=await h.requestFrame()}const u=A(c,l,t);for(r.send({type:"run",arguments:["-r",t.toFixed(0),"-f","image2","-s",`${c}x${l}`,"-i","%d.jpeg","-start_number","1","-vframes",h.totalFrames.toFixed(0),"-vcodec","libx264","-crf","23","-vb",u.toFixed(0),"-pix_fmt","yuv420p","-preset","ultrafast","out.mp4"]});;){const e=await r.receive();switch(e.type){case"progress":a&&a(e.frame/h.totalFrames/2+.5);break;case"result":return new Blob([e.data],{type:"video/mp4"})}}}finally{null==r||r.terminate()}},()=>{null==r||r.terminate()});return o}(e,t,i,a,r))}(e,24,t,!0);E.push(new File([i],"preview.mp4"))}}const M="component"===t.type?480:350,P=n.tm(C,Math.round(i.width*(M/i.height)),M),D=await n.PG(P,{type:"image/webp",quality:.7});E.push(new File([D],"thumbnail.webp"));for(let s=0;s<i.layers.length;s++){let e=i.layers[s];if("document"!==t.type&&!e.settings.visible||!e.rect)continue;if("template"===t.type&&"group"===e.type)continue;const a=n.r0();let o={name:e.settings.name,type:e.type,rect:e.rect?{x:f(e.rect.x),y:b(e.rect.y),w:f(e.rect.width),h:b(e.rect.height),r:Number(e.rect.rotation.toFixed(2))}:void 0,blendmode:""!==e.settings.blendmode?e.settings.blendmode:void 0,opacity:Math.round(100*e.settings.opacity)/100,locked:e.settings.locked,visible:e.settings.visible,link:e.settings.link};switch(e.animation&&(o.animation=e.animation),e.macro&&(o.macro=e.macro),e.type){case c.A.TYPE_ELEMENT:case c.A.TYPE_IMAGE:o.type=c.A.TYPE_IMAGE;let s=e.canvas;if(e instanceof p.A&&e.rect&&s&&(e.rect.width===s.width&&e.rect.height===s.height||(s=n.tm(s,e.rect.width,e.rect.height))),e.mask){let t=n.r0();const s=await n.PG(e.mask,{type:"image/web",quality:.8});E.push(new File([s],t+".webp")),o.mask=t+".webp"}if(s){const e=await n.PG(s,{type:t.nonDestructive?"image/png":"image/webp",quality:t.quality});E.push(new File([e],a+(t.nonDestructive?".png":".webp"))),o.content=a+(t.nonDestructive?".png":".webp")}break;case c.A.TYPE_TEXT:let i=e,d=u.A.getFontDesc(i.textSettings.font);if(d&&!T.find(e=>e.name===d.name)&&T.push(d),o.content=i.text,o.format={size:b(i.textSettings.size),align:i.textSettings.align,bold:i.textSettings.bold,italic:i.textSettings.italic,underline:i.textSettings.underline,uppercase:i.textSettings.uppercase,linespace:i.textSettings.lineSpace,letterspace:i.textSettings.letterSpace,font:{name:i.textSettings.font,content:d?d.short+"."+d.type:""}},i.fill&&i.fill.value&&(o.format.fill={type:i.fill.getType()},i.fill.value instanceof h.A&&(o.format.fill.value=i.fill.value.toHEX()),i.fill.value instanceof r.Ay&&(o.format.fill.value=i.fill.value.toIGradient()),i.fill.value instanceof l.A)){let e=n.r0();E.push(new File([new Blob([i.fill.value.svg],{type:"image/svg+xml;charset=utf-8"})],e+".svg")),o.format.fill.value=i.fill.value.toIPattern(e+".svg")}(i.textSettings.curve||i.textSettings.warp||i.textSettings.background||i.textSettings.outline||i.textSettings.shadow)&&(o.style={},i.textSettings.warp&&(o.style.warp={type:i.textSettings.warpType,mode:i.textSettings.warpMode,edgesize:i.textSettings.warpEdgeSize,centersize:i.textSettings.warpCenterSize,verticaloffset:i.textSettings.warpVerticalOffset,horizontaloffset:i.textSettings.warpHorizontalOffset}),i.textSettings.curve&&(o.style.curve={type:i.textSettings.curveType,amount:i.textSettings.curveAmount,spread:i.textSettings.curveSpread,flip:i.textSettings.curveFlip}),i.textSettings.background&&(o.style.background={type:i.textSettings.backgroundType,color:i.textSettings.backgroundColor,punch:i.textSettings.backgroundPunch,offset:i.textSettings.backgroundOffset}),i.textSettings.outline&&(o.style.outline={size:i.textSettings.outlineSize,color:i.textSettings.outlineColor,punch:i.textSettings.outlinePunch,distance:i.textSettings.outlineDistance,direction:i.textSettings.outlineDirection}),i.textSettings.shadow&&(o.style.shadow={blur:i.textSettings.shadowBlur,color:i.textSettings.shadowColor,opacity:i.textSettings.shadowAlpha,distance:i.textSettings.shadowDistance,direction:i.textSettings.shadowDirection}));break;case c.A.TYPE_SHAPE:let m=e;if("svg"===m.shapeSettings.variant)m.shapeSettings.content&&(E.push(new File([new Blob([m.shapeSettings.content],{type:"image/svg+xml;charset=utf-8"})],a+".svg")),o.content=a+".svg"),o.format={variant:m.shapeSettings.variant};else if(o.content=m.shapeSettings.content,o.format={variant:m.shapeSettings.variant},0!==m.shapeSettings.radii&&(o.format.radii=m.shapeSettings.radii),m.fill&&m.fill.value&&(o.format.fill={type:m.fill.getType()},m.fill.value instanceof h.A&&(o.format.fill.value=m.fill.value.toHEX()),m.fill.value instanceof r.Ay&&(o.format.fill.value=m.fill.value.toIGradient()),m.fill.value instanceof l.A)){let e=n.r0();E.push(new File([new Blob([m.fill.value.svg],{type:"image/svg+xml;charset=utf-8"})],e+".svg")),o.format.fill.value=m.fill.value.toIPattern(e+".svg")}(m.shapeSettings.shadow||m.shapeSettings.outlineSize>0)&&(o.style={},m.shapeSettings.outlineSize>0&&(o.style.outline={size:m.shapeSettings.outlineSize,color:m.shapeSettings.outlineColor}),m.shapeSettings.shadow&&(o.style.shadow={blur:m.shapeSettings.shadowBlur,color:m.shapeSettings.shadowColor,opacity:m.shapeSettings.shadowOpacity,distance:m.shapeSettings.shadowDistance,direction:m.shapeSettings.shadowDirection}));break;case c.A.TYPE_FRAME:let g=e;if(g.canvas){!g.trim||g.trim.width===g.canvas.width&&g.trim.height===g.canvas.height||(g.canvas=n.tm(g.canvas,g.trim.width,g.trim.height));const e=await n.PG(g.canvas,{type:"image/web",quality:t.quality});E.push(new File([e],a+".webp")),o.content=a+".webp"}o.frame={trim:g.trim?{x:f(g.trim.x),y:b(g.trim.y),w:f(g.trim.width),h:b(g.trim.height),r:0}:void 0,clip:g.frameSettings.clip},(g.frameSettings.outline||g.frameSettings.shadow)&&(o.style={},g.frameSettings.outline&&(o.style.outline={size:g.frameSettings.outlineSize,color:g.frameSettings.outlineColor}),g.frameSettings.shadow&&(o.style.shadow={blur:g.frameSettings.shadowBlur,color:g.frameSettings.shadowColor,opacity:g.frameSettings.shadowOpacity,distance:g.frameSettings.shadowDistance,direction:g.frameSettings.shadowDirection}));break;case c.A.TYPE_GROUP:let y=e;o.meta={members:y.groupSettings.numberOfMembers,collapsed:y.groupSettings.collapsed,color:y.groupSettings.color}}S.stack.push(o)}let N=new a;N.writeString("manifest.json",JSON.stringify(S),!0);for(let s=0;s<E.length;s++){const e=E[s];let t=await e.arrayBuffer(),i=new Uint8Array(t);N.writeFile(e.name,i,e.name.endsWith(".svg"))}for(let s=0;s<T.length;s++){const e=T[s];let t=await u.A.getFontFile(e.name);if(t){let s=await t.arrayBuffer(),i=new Uint8Array(s);N.writeFile(e.short+"."+e.type,i,!0)}}const L=N.finish();return new Blob([L.buffer])}function A(e,t,s,i=.18){return Math.round(e*t*s*i)}async function x(e,t,i){const a=await s.e(885).then(s.bind(s,62987)),n=await a.PDFDocument.create(),r=n.addPage([e,t]),o=await n.embedJpg(await i.arrayBuffer());return r.drawImage(o,{x:0,y:0,width:e,height:t}),new Blob([await n.save()])}const k=async(e,t,s="client")=>{const i=g.Ay.follow;if(t instanceof MessagePort)t.postMessage(e);else if(t instanceof URL&&i){const s=(0,a.T)("form");s.method="post",s.action=t.toString(),s.enctype="multipart/form-data",document.body.append(s),s.addEventListener("formdata",t=>{Array.isArray(e)?e.forEach((e,s)=>{t.formData.append(`file[${s}]`,e)}):t.formData.append("file",e)}),s.submit()}else if(t instanceof URL&&!i){const i=new FormData;Array.isArray(e)?e.forEach((e,t)=>{i.append(`file[${t}]`,e)}):i.append("file",e);try{const e=await fetch(t,{method:"post",body:i});if(e.status<200&&e.status>=300)throw new Error("non 2xx status");let a=`<p>The image was saved to ${s}</p> <div class="buttons center"><a class="button positive xlarge" href=" ${(await e.json()).savedUrl} ">View</a></div>`;return console.log("Save completed",a),a}catch(n){return console.log(`Error Failed to save to ${s}, please try again.`),`Error Failed to save to ${s}, please try again.`}}},S=async(e="png",t,s=!1)=>{if(t.fresco.block)return;let a,r;r=t.getOutputCanvas(),a=t.fresco.name||"untitled",a=n.Dk(a);let h=await n.PG(r,{type:"image/"+e.replace("jpg","jpeg"),quality:1});if("pxz"===e)try{h=await w(t,{id:t.fresco.id,name:a,quality:1,nonDestructive:!0,type:"document",unit:"pixel"})}catch(d){return console.error(d),void console.log("Error when creating PXZ file")}if("pdf"===e){h=await n.PG(r,{type:"image/jpeg",quality:1});try{h=await x(t.fresco.width,t.fresco.height,h)}catch(d){return console.error(d),void console.log("Error when creating PDF file")}}let c="image/jpeg",l="Jpg image";switch(e){case"pxz":c="application/pxz",l="Pixlr document";break;case"png":c="image/png",l="PNG image";break;case"webp":c="image/webp",l="WebP image";break;case"pdf":c="application/pdf",l="PDF document";break;case"jpeg":c="image/jpeg",l="Jpeg image"}if(s)return new File([h],a+"."+e,{type:c});await(async(e,t,s,a,n,r="normal")=>{if("normal"!==r){const s=new File([n],e+"."+t,{type:a});return void(await k(s,r,g.Ay.referrer))}let o;if(!g.Ay.useLegacySave&&y()&&(o=await v(e,t,s,a),!1===o))return!1;!1!==o&&(o?(await f(o,new File([n],e+"."+t))||b(new File([n],e+"."+t),e,t),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("fileSaved")}))):b(new File([n],e+"."+t),e,t))})(a,e,l,c,h,t.fresco.saveMethod),(0,o.A)("quick-save","page")},E=async e=>{if(!(1!==g.Ay.exportFormats.length)){const t=await S(g.Ay.exportFormats[0],e,!0);return void(await k(t,e.fresco.saveMethod,g.Ay.referrer))}const t=g.Ay.exportFormats.map(t=>S(t,e,!0)),s=await Promise.all(t);await k(s,e.fresco.saveMethod,g.Ay.referrer)}},66827:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(42268),a=s(16309),n=s(15818),r=s(14871),o=s(27982);class h{constructor(e,t,s,h){this.previewFill=e=>{this.setFill(e),this.preview&&this.preview(this.fill)},this.callbackFill=e=>{this.setFill(e),this.callback&&this.callback(this.fill)},this.setFill=e=>{this.fill=e,this.holder.classList.remove("empty"),this.holder.style.backgroundColor="unset",this.holder.style.backgroundImage="unset",this.fill&&this.fill.value?this.fill.value instanceof n.A?this.holder.style.backgroundColor=this.fill.value.toHEX():(this.fill.value instanceof a.Ay||this.fill.value instanceof r.A)&&(this.holder.style.backgroundImage=this.fill.value.toCSS()):this.holder.classList.add("empty")},this.getFill=()=>this.fill,this.picker=()=>{new o.A(this.fill,this.callbackFill,this.previewFill)},this.cleanUp=()=>{this.container.removeEventListener("click",this.picker,!1)},this.fill=t,this.preview=h,this.callback=s,this.container=(0,i.Ay)(e),this.container.classList.add("fill-pod"),this.container.addEventListener("click",this.picker,!1),this.container.hasChildNodes()?this.holder=(0,i.Ay)(e+"-holder"):(this.holder=(0,i.T)("div",{id:e+"-holder"}),this.container.appendChild(this.holder)),this.setFill(t)}}},66866:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Card=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"cvc",baseName:"cvc",type:"string"},{name:"expiryMonth",baseName:"expiryMonth",type:"string"},{name:"expiryYear",baseName:"expiryYear",type:"string"},{name:"holderName",baseName:"holderName",type:"string"},{name:"issueNumber",baseName:"issueNumber",type:"string"},{name:"number",baseName:"number",type:"string"},{name:"startMonth",baseName:"startMonth",type:"string"},{name:"startYear",baseName:"startYear",type:"string"}]},66877:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDSecureData=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ThreeDSecureData=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"authenticationResponse",baseName:"authenticationResponse",type:"ThreeDSecureData.AuthenticationResponseEnum"},{name:"cavv",baseName:"cavv",type:"string"},{name:"cavvAlgorithm",baseName:"cavvAlgorithm",type:"string"},{name:"challengeCancel",baseName:"challengeCancel",type:"ThreeDSecureData.ChallengeCancelEnum"},{name:"directoryResponse",baseName:"directoryResponse",type:"ThreeDSecureData.DirectoryResponseEnum"},{name:"dsTransID",baseName:"dsTransID",type:"string"},{name:"eci",baseName:"eci",type:"string"},{name:"riskScore",baseName:"riskScore",type:"string"},{name:"threeDSVersion",baseName:"threeDSVersion",type:"string"},{name:"tokenAuthenticationVerificationValue",baseName:"tokenAuthenticationVerificationValue",type:"string"},{name:"transStatusReason",baseName:"transStatusReason",type:"string"},{name:"xid",baseName:"xid",type:"string"}],function(e){let t,s,i;!function(e){e.Y="Y",e.N="N",e.U="U",e.A="A"}(t=e.AuthenticationResponseEnum||(e.AuthenticationResponseEnum={})),function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05",e._06="06",e._07="07"}(s=e.ChallengeCancelEnum||(e.ChallengeCancelEnum={})),function(e){e.A="A",e.C="C",e.D="D",e.I="I",e.N="N",e.R="R",e.U="U",e.Y="Y"}(i=e.DirectoryResponseEnum||(e.DirectoryResponseEnum={}))}(s=t.ThreeDSecureData||(t.ThreeDSecureData={}))},67839:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApplePaySessionResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ApplePaySessionResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"data",baseName:"data",type:"string"}]},67983:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e,t,s){this.start=e,this.stop=t,this.row=s}}},68150:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(42268),a=s(21742),n=s(26806),r=s(29755);class o extends n.A{constructor(){super((0,a.A)("titlePreferences"),!1),this.getLanguage=()=>{const e=location.pathname.split("/");return e[1]&&2===e[1].length?e[1]:"us"},this.setLanguage=e=>{const t=location.pathname.split("/");t[1]&&2===t[1].length?t[1]=e:t.splice(1,0,e),location.href=t.join("/")},this.dialog.style.maxWidth="440px",this.setContent(`\n\n                <label class="split" for="settings-language">${(0,a.A)("language")}\n                <div class="select top-0" style="width:auto">\n                    <select id="settings-language">\n                        <option value="us">English</option>\n                        <option value="id">Bahasa Indonesia</option>\n                        <option value="ml">Bahasa Melayu</option>\n                        <option value="cz">etina</option>\n                        <option value="dk">Dansk</option>\n                        <option value="de">Deutsch</option>\n                        <option value="es">Espaol</option>\n                        <option value="ph">Filipino</option>\n                        <option value="fr">Franais</option>\n                        <option value="hr">Hrvatski</option>\n                        <option value="it">Italiano</option>\n                        <option value="nl">Nederlands</option>\n                        <option value="no">Norsk</option>\n                        <option value="pl">Polski</option>\n                        <option value="pt">Portugus</option>\n                        <option value="br">Portugus (Brasileiro)</option>\n                        <option value="ro">Romanian</option>\n                        <option value="rs"></option>\n                        <option value="ru"></option>\n                        <option value="fi">Suomi</option>\n                        <option value="se">Svenska</option>\n                        <option value="tr">Trke</option>\n                        <option value="vn">Ting Vit</option>\n                        <option value="th"></option>\n                        <option value="gr"></option>\n                        <option value="kr"></option>\n                        <option value="jp"></option>\n                        <option value="cn"></option>\n                        <option value="tw"></option>\n                    </select> \n                </div>\n            </label>\n\n            <div class="splitter small top-10"></div>\n\n            <label class=" top-10">${(0,a.A)("viewOBarAccent")}</label>\n            <div id="preference-accent" class="top-4 color-pod-list" style="gap:3px;">\n                <div class="color-pod small" data="ash" style="background-color:#383E42"></div>\n                <div class="color-pod small" data="brown" style="background-color:#715649"></div>\n                <div class="color-pod small" data="coral" style="background-color:#F3764C"></div>\n                <div class="color-pod small" data="pink" style="background-color:#F17686"></div>\n                <div class="color-pod small" data="rose" style="background-color:#FE5151"></div>\n                <div class="color-pod small" data="red" style="background-color:#BA2B46"></div>\n                <div class="color-pod small" data="plum" style="background-color:#5A354F"></div>\n                <div class="color-pod small" data="maroon" style="background-color:#A82068"></div>\n                <div class="color-pod small" data="purple" style="background-color:#7D4199"></div>\n                <div class="color-pod small" data="lavender" style="background-color:#6D5DD2"></div>\n                <div class="color-pod small" data="denim" style="background-color:#496171"></div>\n                <div class="color-pod small" data="blue" style="background-color:#0099CC"></div>\n                <div class="color-pod small" data="teal" style="background-color:#00A5A5"></div>\n                <div class="color-pod small" data="green" style="background-color:#48B07B"></div>\n                <div class="color-pod small" data="lime" style="background-color:#95C20F"></div>\n                <div class="color-pod small" data="mustard" style="background-color:#F5BB00"></div>\n            </div>\n\n            <label class="top-16">${(0,a.A)("viewOBarWorkspace")}</label>\n            <div id="preference-workspace" class="color-selector-presets extended top-4" style="width:200px">\n                <div data="dark" class="color-pod square" style="background-color: #232529"></div>\n                <div data="iron" class="color-pod square" style="background-color: #606060"></div>\n                <div data="steel" class="color-pod square" style="background-color: #999999"></div>\n                <div data="light" class="color-pod square" style="background-color: #cccccc"></div>\n            </div>\n\n            <a id="preference-theme-reset" class="link top-20" style="display:inline-block;">${(0,a.A)("reset")}</a>\n\n        `);let e=r.Ay.accent,t=(0,i.Ay)("preference-accent").getElementsByTagName("div");for(var s=0;s<t.length;s+=1)t[s].addEventListener("click",t=>{document.documentElement.classList.remove(e),e=t.currentTarget.getAttribute("data"),document.documentElement.classList.add(e),document.dispatchEvent(new CustomEvent("layerlist-update")),(0,r.ZC)("accent",e)});let n=r.Ay.workspace,o=(0,i.Ay)("preference-workspace").getElementsByTagName("div");for(s=0;s<o.length;s+=1)o[s].addEventListener("click",e=>{document.documentElement.classList.remove(n),n=e.currentTarget.getAttribute("data"),document.documentElement.classList.add(n),(0,r.ZC)("workspace",n)});(0,i.Ay)("preference-theme-reset").addEventListener("click",()=>{(0,r.ZC)("workspace","default"),(0,r.ZC)("accent","default"),document.documentElement.className=""});const h=(0,i.Ay)("settings-language");h.value=this.getLanguage(),h.onchange=()=>this.setLanguage(h.value),(0,i.Ay)("dialog-apply"+this.mid).style.display="none",(0,i.Ay)("dialog-cancel"+this.mid).innerText=(0,a.A)("close")}}},68187:(e,t,s)=>{s.d(t,{E:()=>r});var i=s(29755),a=s(93771),n=s(63306);function r(e){const{port1:t,port2:s}=new MessageChannel;t.onmessage=async t=>{const s=t.ports[0];switch(t.data.op){case"open":{const i=t.data.buffer,n=new File([new Blob([i])],t.data.name);await a.Tq(n,e,void 0,"api"),e.fresco.saveMethod=s;break}case"open-url":{const r=t.data.url;new n.A({title:r.substring(r.lastIndexOf("/")+1),referrer:i.Ay.referrer}).load("/proxy/?url="+encodeURIComponent(r)).then(async t=>{await a.Tq(t,e,void 0,"api"),e.fresco.saveMethod=s});break}default:console.error(`Unknown op ${t.data.op}`)}},window.parent.postMessage({op:"ready"},i.Ay.messageOrigin,[s])}},68209:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentReversalResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentReversalResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"paymentPspReference",baseName:"paymentPspReference",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"status",baseName:"status",type:"PaymentReversalResponse.StatusEnum"}],function(e){let t;!function(e){e.Received="received"}(t=e.StatusEnum||(e.StatusEnum={}))}(s=t.PaymentReversalResponse||(t.PaymentReversalResponse={}))},68242:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RatepayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.RatepayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"billingAddress",baseName:"billingAddress",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"string"},{name:"personalDetails",baseName:"personalDetails",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"RatepayDetails.TypeEnum"}],function(e){let t;!function(e){e.Ratepay="ratepay",e.RatepayDirectdebit="ratepay_directdebit"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.RatepayDetails||(t.RatepayDetails={}))},68344:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentAmountUpdateRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentAmountUpdateRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"industryUsage",baseName:"industryUsage",type:"PaymentAmountUpdateRequest.IndustryUsageEnum"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"splits",baseName:"splits",type:"Array<Split>"}],function(e){let t;!function(e){e.DelayedCharge="delayedCharge",e.Installment="installment",e.NoShow="noShow"}(t=e.IndustryUsageEnum||(e.IndustryUsageEnum={}))}(s=t.PaymentAmountUpdateRequest||(t.PaymentAmountUpdateRequest={}))},68823:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataOpi=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataOpi=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"opi_includeTransToken",baseName:"opi.includeTransToken",type:"string"}]},69175:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(8594),a=s(82042),n=s(40963),r=s(42268),o=s(21742);class h extends i.A{constructor(e){super("marquee",e),this.selectMode=()=>{this.mode=document.querySelector('input[name="marquee-mode"]:checked').value},this.keyDown=e=>{"Shift"!==e.key||this.isShiftDown||(this.isShiftDown=!0,this.isDown||((0,r.Ay)("marquee-mode-add").checked=!0,this.selectMode())),"Control"!==e.key||this.isCtrlDown||(this.isCtrlDown=!0,this.isDown||((0,r.Ay)("marquee-mode-remove").checked=!0,this.selectMode()))},this.keyUp=e=>{"Shift"===e.key&&this.isShiftDown&&(this.isShiftDown=!1,this.isCtrlDown||this.isDown||((0,r.Ay)("marquee-mode-new").checked=!0,this.selectMode())),"Control"===e.key&&this.isCtrlDown&&(this.isCtrlDown=!1,this.isDown||((0,r.Ay)("marquee-mode-new").checked=!0,this.selectMode()))},this.down=e=>{this.setHistory(),this.stage.coating.freeze(!0),this.addMoveListeners(),this.type=document.querySelector('input[name="marquee-type"]:checked').value,"new"===this.mode&&this.stage.fresco.selection&&(this.stage.fresco.selection.clear(),window.requestAnimationFrame(()=>this.stage.coating.render()))},this.move=e=>{if(this.isDown){let t=this.stage.translateToRect(this.downPoint,e,!this.stage.fresco.hasSelection()&&this.isShiftDown,!0);window.requestAnimationFrame(()=>{"rectangle"===this.type?this.stage.coating.drawAntRectangle(t):this.stage.coating.drawAntEllipse(t)}),document.dispatchEvent(new CustomEvent("legend",{detail:"W: "+Math.round(t.width/this.stage.zoom)+"  H: "+Math.round(t.height/this.stage.zoom)}))}},this.up=e=>{this.isDown=!1,this.stage.coating.freeze(!1),this.removeMoveListeners(),document.dispatchEvent(new CustomEvent("legend",{detail:"stop"}));let t=this.stage.translateToRect(this.downPoint,e,!this.stage.fresco.hasSelection()&&this.isShiftDown,!1);this.downPoint.x===e.x&&this.downPoint.y===e.y||!t.intersect(new n.A(0,0,this.stage.fresco.width,this.stage.fresco.height))?this.stage.fresco.selection&&this.stage.fresco.selection.bounds&&this.stage.fresco.selection.bounds.width>0&&(this.stage.fresco.selection.reset(),this.addHistory("deselect"),window.requestAnimationFrame(()=>this.stage.coating.render())):(this.stage.fresco.addSelection(),"rectangle"===this.type?this.stage.fresco.selection.editRectangle(t,this.feather.getValue(),"remove"===this.mode):this.stage.fresco.selection.editEllipse(t,this.feather.getValue(),!(0,r.Ay)("marquee-anti-alias").checked,"remove"===this.mode),window.requestAnimationFrame(()=>this.stage.coating.render()),this.addHistory())},this.cleanUp=()=>{var e;(this.isShiftDown||this.isCtrlDown)&&((0,r.Ay)("marquee-mode-new").checked=!0),this.superClean(),this.stage.fresco&&this.stage.fresco.selection&&0===(null===(e=this.stage.fresco.selection.outline)||void 0===e?void 0:e.length)&&this.stage.fresco.removeSelection(),this.feather.cleanUp(),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),(0,r.Ay)("marquee-mode-new").removeEventListener("change",this.selectMode,!1),(0,r.Ay)("marquee-mode-add").removeEventListener("change",this.selectMode,!1),(0,r.Ay)("marquee-mode-remove").removeEventListener("change",this.selectMode,!1)},document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),this.feather=new a.A("marquee-feather",{compact:!0,defaultValue:0,label:(0,o.A)("feather")+":",labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100}),(0,r.Ay)("marquee-mode-new").addEventListener("change",this.selectMode,!1),(0,r.Ay)("marquee-mode-add").addEventListener("change",this.selectMode,!1),(0,r.Ay)("marquee-mode-remove").addEventListener("change",this.selectMode,!1),this.selectMode()}}},69424:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(42268),a=s(41915),n=s(29755);class r{constructor(e){this.verticalDrag=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();let t=(e.clientY-this.downPoint.y)/this.spaceHeightRatio/this.stage.zoom;this.stage.setAnchor(this.downPos.add(new a.A(0,t))),this.stage.updateViewport()},this.verticalStop=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),document.removeEventListener("pointermove",this.verticalDrag,!0),document.removeEventListener("pointerup",this.verticalStop,!0)},this.horizontalDrag=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();let t=(e.clientX-this.downPoint.x)/this.spaceWidthRatio/this.stage.zoom;this.stage.setAnchor(this.downPos.add(new a.A(t,0))),this.stage.updateViewport()},this.horizontalStop=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),document.removeEventListener("pointermove",this.horizontalDrag,!0),document.removeEventListener("pointerup",this.horizontalStop,!0)},this.resize=()=>{this.verticalHolder.style.top=this.stage.raster.offsetTop+"px",this.verticalHolder.style.left=this.stage.raster.offsetLeft+this.stage.raster.offsetWidth-16+"px",this.verticalHolder.style.height=this.stage.raster.offsetHeight-16+"px",this.horizontalHolder.style.top=this.stage.raster.offsetTop+this.stage.raster.offsetHeight-16+"px",this.horizontalHolder.style.left=this.stage.raster.offsetLeft+"px",this.horizontalHolder.style.width=this.stage.raster.offsetWidth+"px",this.spaceHeight=this.stage.raster.offsetHeight-20,this.spaceWidth=this.stage.raster.offsetWidth-181,this.render()},this.render=()=>{if(!this.stage.fresco)return;const e=n.Ay.isHDPI?500:250;this.imageInfo.innerText=this.stage.fresco?this.stage.fresco.width+" x "+this.stage.fresco.height+" px @ "+Math.round(100*this.stage.zoom)+"%":"";let t=this.stage.fresco.width*this.stage.zoom,s=this.stage.fresco.height*this.stage.zoom;this.horizontalSlider.style.display=this.stage.raster.width<=t?"block":"none",this.verticalSlider.style.display=this.stage.raster.height<=s?"block":"none",this.spaceHeightRatio=this.spaceHeight/(s+2*e),this.spaceWidthRatio=this.spaceWidth/(t+2*e);const i=Math.round(this.spaceWidth*(this.stage.raster.width/(t+2*e))),a=Math.round(this.spaceHeight*(this.stage.raster.height/(s+2*e))),r=-1*(this.stage.offset.x-e)/(t+2*e),o=-1*(this.stage.offset.y-e)/(s+2*e),h=Math.round((this.spaceWidth-(i<30?30-i:0))*r),c=Math.round((this.spaceHeight-(a<30?30-a:0))*o);this.horizontalSlider.style.width=Math.max(i,30)+"px",this.horizontalSlider.style.left=162+h+"px",this.verticalSlider.style.height=Math.max(a,30)+"px",this.verticalSlider.style.top=2+c+"px"},this.stage=e,this.verticalSlider=(0,i.T)("div",{id:"vertical-scroll-slider"}),this.verticalHolder=(0,i.T)("div",{id:"vertical-scroll-holder"},this.verticalSlider),(0,i.Ay)("workspace").appendChild(this.verticalHolder),this.imageInfo=(0,i.T)("div",{id:"horizontal-image-info"}),this.horizontalSlider=(0,i.T)("div",{id:"horizontal-scroll-slider"}),this.horizontalHolder=(0,i.T)("div",{id:"horizontal-scroll-holder"},this.imageInfo,this.horizontalSlider),(0,i.Ay)("workspace").appendChild(this.horizontalHolder),document.addEventListener("viewport-update",this.render),this.verticalHolder.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const t=n.Ay.isHDPI?500:250;let s=(e.offsetY-2)/this.spaceHeightRatio/this.stage.zoom,i=this.stage.anchor.clone();i.y=s-t/this.stage.zoom,this.stage.setAnchor(i),this.stage.updateViewport()},!1),this.verticalSlider.addEventListener("click",e=>(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1),!0),this.verticalSlider.addEventListener("pointerdown",e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.stage.resetAnchor(),this.downPoint=new a.A(e.clientX,e.clientY),this.downPos=this.stage.anchor.clone(),document.addEventListener("pointermove",this.verticalDrag,!0),document.addEventListener("pointerup",this.verticalStop,!0)},!0),this.horizontalHolder.addEventListener("click",e=>{if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),e.offsetX-160>this.spaceWidth)this.stage.setZoom("fit");else if(e.offsetX>160){const t=n.Ay.isHDPI?500:250;let s=(e.offsetX-160)/this.spaceWidthRatio/this.stage.zoom,i=this.stage.anchor.clone();i.x=s-t/this.stage.zoom,this.stage.setAnchor(i),this.stage.updateViewport()}},!1),this.horizontalSlider.addEventListener("click",e=>(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1),!0),this.horizontalSlider.addEventListener("pointerdown",e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.stage.resetAnchor(),this.downPoint=new a.A(e.clientX,e.clientY),this.downPos=this.stage.anchor.clone(),document.addEventListener("pointermove",this.horizontalDrag,!0),document.addEventListener("pointerup",this.horizontalStop,!0)},!0)}}},69429:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(42268),a=s(21742),n=s(54738),r=s(67983),o=s(40963),h=s(82042),c=s(15818),l=s(8594);class d extends l.A{constructor(e){super("wand",e),this.selectMode=()=>{this.mode=document.querySelector('input[name="wand-mode"]:checked').value},this.keyDown=e=>{"Shift"!==e.key||this.isShiftDown||(this.isShiftDown=!0,this.isDown||((0,i.Ay)("wand-mode-add").checked=!0,this.selectMode())),"Control"!==e.key||this.isCtrlDown||(this.isCtrlDown=!0,this.isDown||((0,i.Ay)("wand-mode-remove").checked=!0,this.selectMode()))},this.keyUp=e=>{"Shift"===e.key&&this.isShiftDown&&(this.isShiftDown=!1,this.isCtrlDown||this.isDown||((0,i.Ay)("wand-mode-new").checked=!0,this.selectMode())),"Control"===e.key&&this.isCtrlDown&&(this.isCtrlDown=!1,this.isDown||((0,i.Ay)("wand-mode-new").checked=!0,this.selectMode()))},this.layerSelect=()=>{this.scratch=this.stage.fresco.addScratch(),this.flat=this.stage.getOutputCanvas(),this.canvas=this.stage.getSingleLayerOutputCanvas()},this.down=e=>{this.stage.coating.animateCursorTap();let t=!this.canvas||(0,i.Ay)("wand-sample-all").checked;e=this.stage.translateRasterToFresco(e),"new"===this.mode&&this.stage.fresco.selection&&this.stage.fresco.selection.clear();let s=this.tolerance.getValue();if(t)this.canvasData=new Uint8Array(this.flat.getContext("2d").getImageData(0,0,this.flat.width,this.flat.height).data.buffer),this.scratch.setTarget("flat",new o.A(0,0,this.flat.width,this.flat.height),"none");else{if(!this.canvas)return;this.canvasData=new Uint8Array(this.canvas.getContext("2d").getImageData(0,0,this.canvas.width,this.canvas.height).data.buffer),this.scratch.setTarget("flat",new o.A(0,0,this.canvas.width,this.canvas.height),"none")}if(this.setHistory(),e.x<0||e.y<0||e.x>this.scratch.canvas.width||e.y>this.scratch.canvas.height)return void(this.stage.fresco.hasSelection()&&(this.stage.fresco.selection.reset(),this.addHistory("deselect")));let a=4*(e.y*(t?this.flat.width:this.canvas.width)+e.x),r=new c.A(this.canvasData[a],this.canvasData[a+1],this.canvasData[a+2],this.canvasData[a+3]),h=this.scratch.ctx.getImageData(0,0,this.scratch.canvas.width,this.scratch.canvas.height);this.scratchData=new Uint8Array(h.data.buffer),(0,i.Ay)("wand-contiguous").checked?this.floodFill(e,r,s,(0,i.Ay)("wand-anti-alias").checked):this.allFill(r,s,(0,i.Ay)("wand-anti-alias").checked),this.scratch.ctx.putImageData(h,0,0);let l=n.TL(this.scratch.canvas);l&&l.width>0&&l.height>0&&(this.stage.fresco.addSelection(),this.stage.fresco.selection.drawOnMask(this.scratch.canvas,this.feather.getValue(),!1,"remove"===this.mode),window.requestAnimationFrame(()=>{this.stage.coating.render()})),this.isDown=!1,this.addHistory()},this.allFill=(e,t,s)=>{var i,a;let n,r,o,h,c,l,d;for(var p=0,u=this.scratch.canvas.height;p<u;++p)for(var m=0,g=this.scratch.canvas.width;m<g;++m)a=4*(p*g+m),h=e.a-this.canvasData[a+3],r=h<0?-h:h,e.a>0&&(c=e.r-this.canvasData[a],n=c<0?-c:c,n>r&&(r=n),l=e.g-this.canvasData[a+1],n=l<0?-l:l,n>r&&(r=n),d=e.b-this.canvasData[a+2],n=d<0?-d:d,n>r&&(r=n)),s&&t>0?(o=1.5-r/t,i=o<=0?0:o<.5?Math.round(512*o):255):i=r>t?0:255,i>64&&(i>128&&(i=255),this.scratchData[a+3]=i)},this.floodFill=(e,t,s,i)=>{let a=this.scratch.canvas.width,n=this.scratch.canvas.height,r=new Array,o=new Array(a*n);for(this.linearFill(e.x,e.y,t,s,i,r,o);r.length>0;)for(var h=r.shift(),c=h.start;c<=h.stop;++c)h.row>0&&!o[(h.row-1)*a+c]&&this.linearFill(c,h.row-1,t,s,i,r,o),h.row<n-1&&!o[(h.row+1)*a+c]&&this.linearFill(c,h.row+1,t,s,i,r,o)},this.linearFill=(e,t,s,i,a,n,o)=>{var h=this.scratch.canvas.width;o[h*t+e]=!0;let c=4*(h*t+e),l=this.tolerate(c,s,i,a);if(l>5&&(this.scratchData[c+3]=l>160?255:l),l>64){for(var d=e-1,p=e+1;d>=0&&!o[h*t+d]&&l>64;)o[h*t+d]=!0,c=4*(h*t+d),l=this.tolerate(c,s,i,a),l>5&&(this.scratchData[c+3]=l>160?255:l),--d;for(l=255;p<h&&!o[h*t+p]&&l>64;)o[h*t+p]=!0,c=4*(h*t+p),l=this.tolerate(c,s,i,a),l>5&&(this.scratchData[c+3]=l>160?255:l),++p;n.push(new r.A(d+1,p-1,t))}},this.tolerate=(e,t,s,i=!1)=>{let a,n,r,o,h,c,l;return o=t.a-this.canvasData[e+3],n=o<0?-o:o,t.a>0&&(h=t.r-this.canvasData[e],a=h<0?-h:h,a>n&&(n=a),c=t.g-this.canvasData[e+1],a=c<0?-c:c,a>n&&(n=a),l=t.b-this.canvasData[e+2],a=l<0?-l:l,a>n&&(n=a)),i&&s>0?(r=1.5-n/s,r<=0?0:r<.5?Math.round(512*r):255):n>s?0:255},this.cleanUp=()=>{var e,t;(this.isShiftDown||this.isCtrlDown)&&((0,i.Ay)("wand-mode-new").checked=!0),this.superClean(),this.stage.fresco&&this.stage.fresco.selection&&0===(null===(e=this.stage.fresco.selection.outline)||void 0===e?void 0:e.length)&&this.stage.fresco.removeSelection(),null===(t=this.stage.fresco)||void 0===t||t.removeScratch(),this.canvas=void 0,this.flat=void 0,this.feather.cleanUp(),this.tolerance.cleanUp(),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),(0,i.Ay)("wand-mode-new").removeEventListener("change",this.selectMode,!1),(0,i.Ay)("wand-mode-add").removeEventListener("change",this.selectMode,!1),(0,i.Ay)("wand-mode-remove").removeEventListener("change",this.selectMode,!1)},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),this.tolerance=new h.A("wand-tolerance",{compact:!0,label:(0,a.A)("tolerance")+":",defaultValue:32,range:[0,255],step:1}),this.feather=new h.A("wand-feather",{compact:!0,defaultValue:0,label:(0,a.A)("feather")+":",labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100}),(0,i.Ay)("wand-mode-new").addEventListener("change",this.selectMode,!1),(0,i.Ay)("wand-mode-add").addEventListener("change",this.selectMode,!1),(0,i.Ay)("wand-mode-remove").addEventListener("change",this.selectMode,!1),this.selectMode(),this.layerSelect()}}},69504:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(21742),a=s(54738),n=s(82042),r=s(2215);class o extends r.A{constructor(e){super(e,(0,i.A)("titleKaleidoscope")),this.update=()=>{a.sg("kaleidoscope",50,()=>{const e={amount:this.amount.getValue(),stretch:this.stretch.getValue(),position:this.pos.getValue()};this.change("kaleidoscope",e)})},this.setContent('\n             <div id="kaleidoscope-amount"></div>\n             <div id="kaleidoscope-stretch" class="top-16"></div>\n             <div id="kaleidoscope-position" class="top-16"></div>\n            '),this.amount=new n.A("kaleidoscope-amount",{label:(0,i.A)("amount"),range:[2,20],defaultValue:5,step:1,onChange:()=>this.update()}),this.stretch=new n.A("kaleidoscope-stretch",{label:"Stretch",range:[0,1],defaultValue:0,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.pos=new n.A("kaleidoscope-position",{label:"Position",range:[0,1],defaultValue:0,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.update()}}},69831:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancelOrderResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CancelOrderResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"pspReference",baseName:"pspReference",type:"string"},{name:"resultCode",baseName:"resultCode",type:"CancelOrderResponse.ResultCodeEnum"}],function(e){let t;!function(e){e.Received="Received"}(t=e.ResultCodeEnum||(e.ResultCodeEnum={}))}(s=t.CancelOrderResponse||(t.CancelOrderResponse={}))},70586:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleThreshold")),this.setContent((0,n.T)("div",{id:"threshold"})),new a.A("threshold",{label:(0,r.A)("level"),step:.01,defaultValue:.5,range:[0,1],labelFormat:e=>`${Math.round(255*e)}`,labelParse:e=>parseInt(e,10)/255,onChange:e=>this.change("threshold",e+1e-13)}),this.change("threshold",.5)}}},71068:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataCommon=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataCommon=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"RequestedTestErrorResponseCode",baseName:"RequestedTestErrorResponseCode",type:"string"},{name:"allowPartialAuth",baseName:"allowPartialAuth",type:"string"},{name:"authorisationType",baseName:"authorisationType",type:"string"},{name:"customRoutingFlag",baseName:"customRoutingFlag",type:"string"},{name:"industryUsage",baseName:"industryUsage",type:"AdditionalDataCommon.IndustryUsageEnum"},{name:"manualCapture",baseName:"manualCapture",type:"string"},{name:"networkTxReference",baseName:"networkTxReference",type:"string"},{name:"overwriteBrand",baseName:"overwriteBrand",type:"string"},{name:"subMerchantCity",baseName:"subMerchantCity",type:"string"},{name:"subMerchantCountry",baseName:"subMerchantCountry",type:"string"},{name:"subMerchantID",baseName:"subMerchantID",type:"string"},{name:"subMerchantName",baseName:"subMerchantName",type:"string"},{name:"subMerchantPostalCode",baseName:"subMerchantPostalCode",type:"string"},{name:"subMerchantState",baseName:"subMerchantState",type:"string"},{name:"subMerchantStreet",baseName:"subMerchantStreet",type:"string"},{name:"subMerchantTaxId",baseName:"subMerchantTaxId",type:"string"}],function(e){let t;!function(e){e.NoShow="NoShow",e.DelayedCharge="DelayedCharge"}(t=e.IndustryUsageEnum||(e.IndustryUsageEnum={}))}(s=t.AdditionalDataCommon||(t.AdditionalDataCommon={}))},71355:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ApplePaySessionRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ApplePaySessionRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"displayName",baseName:"displayName",type:"string"},{name:"domainName",baseName:"domainName",type:"string"},{name:"merchantIdentifier",baseName:"merchantIdentifier",type:"string"}]},71419:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleVignette")),this.setContent((0,n.T)("div",{id:"vignette-slider"})),new a.A("vignette-slider",{label:(0,r.A)("amount"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("vignette",e)})}}},71499:(e,t,s)=>{s.d(t,{A:()=>a});class i{constructor(e="circle",t=40,s=.2,i=1,a=0,n=1,r=2,o=.2,h=void 0){this.type=e,this.size=t,this.softness=s,this.opacity=i,this.angle=a,this.aspect=n,this.spikes=r,this.distance=o,this.source=h}}i.isEqual=(e,t)=>!(!e||!t)&&(e.type===t.type&&e.size===t.size&&e.softness===t.softness&&e.angle===t.angle&&e.aspect===t.aspect&&e.spikes===t.spikes&&e.source===t.source);const a=i},72141:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FundOrigin=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.FundOrigin=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"billingAddress",baseName:"billingAddress",type:"Address"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"walletIdentifier",baseName:"walletIdentifier",type:"string"}]},72284:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(42268),a=s(54738);class n{constructor(e=!0,t){this.scopedId=e=>`${this.mid}-${e}`,this.setContent=(...e)=>{e[0]instanceof HTMLElement?this.content.append(...e):this.content.innerHTML+=e[0]},this.keyDown=e=>{"Escape"!==e.key&&"Esc"!==e.key||this.cleanUp()},this.cleanUp=()=>{document.removeEventListener("keydown",this.keyDown,!1),this.dialog.classList.remove("ani"),this.modal.classList.remove("dim"),setTimeout(()=>{this.dialog.remove(),this.dialog=null,this.modal.remove(),this.modal=null},200),this.redirectUrl&&(window.location.href=this.redirectUrl)},this.redirectUrl=t,this.mid=a.r0(),this.modal=(0,i.T)("div",{id:"modal-"+this.mid,className:"modal"}),document.body.appendChild(this.modal),this.dialog=(0,i.T)("div",{className:"announce"}),this.modal.appendChild(this.dialog),this.content=(0,i.T)("div",{className:"content"}),this.dialog.append((0,i.T)("div",{id:"announce-close"+this.mid,className:"announce-close",onclick:()=>this.cleanUp()},(0,i.T)("img",{src:"/img/icon/close.svg"})),this.content),document.addEventListener("keydown",this.keyDown,!1),setTimeout(()=>this.dialog.classList.add("ani"),5),e&&setTimeout(()=>this.modal.classList.add("dim"),5)}}},72357:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(42903);class a extends i.A{constructor(e){super(e,"bw"),this.shaders.addShader("saturation",-1),this.shaders.addShader("contrast",.2),this.shaders.addShader("exposure",.1),this.shaders.addShader("clarity",.1),this.apply()}}},72617:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleMosaic")),this.setContent((0,n.T)("div",{id:"mosaic-slider"})),new a.A("mosaic-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("mosaic",e)})}}},73831:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FraudCheckResult=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.FraudCheckResult=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"accountScore",baseName:"accountScore",type:"number"},{name:"checkId",baseName:"checkId",type:"number"},{name:"name",baseName:"name",type:"string"}]},73897:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(51532);class a{constructor(e,t,s=0){this.shouldRun=e=>{const t=e<this.idelay,s=e>this.idelay+this.iduration;return s&&!this.end?(this.end=!0,!0):!t&&!s},this.getDuration=()=>this.idelay+this.iduration,this.fill=e=>{this.initial=void 0===this.motion.value.set?e:this.motion.value.set;const t=void 0===this.motion.value.from?this.initial:this.motion.value.from,s=void 0===this.motion.value.to?this.initial:this.motion.value.to;return 2===this.motion.direction||4===this.motion.direction?s-(s-t):t+(s-t)},this.begin=e=>{this.end=!1,this.playing=!0,this.initial=void 0===this.motion.value.set?e:this.motion.value.set,this.ibefore=void 0===this.motion.value.from?this.initial:this.motion.value.from,this.iafter=void 0===this.motion.value.to?this.initial:this.motion.value.to},this.step=e=>{if(0===e||e-this.idelay<1||0===this.ipass||0===this.motion.iterations)return this.ibefore;let t=Math.ceil((e-this.idelay)/this.ipass),s=(e-this.idelay)%this.ipass,i=0===s?1:s/this.ipass;(this.end||t>this.motion.iterations)&&(t=this.motion.iterations,i=1);const a=(this.iafter-this.ibefore)*this.ease.calculate(i);return this.flip(t)?this.iafter-a:this.ibefore+a},this.flip=e=>2===this.motion.direction||3===this.motion.direction&&e%2==0||4===this.motion.direction&&e%2==1,this.motion=e,this.ease=new i.A(e.easing),this.idelay=Math.round(this.motion.delay*t+s),this.iduration=Math.round(this.motion.duration*t),this.ipass=0===this.iduration||0===this.motion.iterations?0:this.iduration/this.motion.iterations}}},74035:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataWallets=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataWallets=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"androidpay_token",baseName:"androidpay.token",type:"string"},{name:"masterpass_transactionId",baseName:"masterpass.transactionId",type:"string"},{name:"payment_token",baseName:"payment.token",type:"string"},{name:"paywithgoogle_token",baseName:"paywithgoogle.token",type:"string"},{name:"samsungpay_token",baseName:"samsungpay.token",type:"string"},{name:"visacheckout_callId",baseName:"visacheckout.callId",type:"string"}]},74298:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleTemperatureTint")),this.kind="temperatureTint",this.setContent((0,n.T)("div",{id:"temperature"}),(0,n.T)("div",{id:"tint",className:"top-16"})),new a.A("temperature",{label:(0,r.A)("temperature"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("temperature",e)}),new a.A("tint",{label:(0,r.A)("tint"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("tint",e)})}}},74785:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(54738),a=s(41915),n=s(29755),r=s(15818),o=s(42268);class h{constructor(e,t,s,h=!1,c=!0,l=!1,d){var p,u;if(this.activeColorPick=async e=>{if((0,o.Ay)("modal-color-select"))return;this.colorPreview=(0,o.T)("div",{className:"color-selector-preview",style:"display:none;"});const t=(0,o.T)("div",{id:"modal-color-select",style:"cursor:crosshair;",className:"modal"},this.colorPreview);t.addEventListener("click",this.removeColorPicker,!0),t.addEventListener("mousemove",this.pickerPreviewColor,!0),document.body.appendChild(t);const s=document.getElementsByClassName("canvas");for(var a=0;a<s.length;a++)if(await(0,o.J9)(s[a])){this.stageCRect=s[a].getBoundingClientRect(),this.stageCanvas=i.oM(s[a]);break}if(!this.stageCanvas){let e=document.getElementsByClassName("canvas")[0];this.stageCRect=e.getBoundingClientRect(),this.stageCanvas=i.oM(e)}this.stageCanvasCTX=this.stageCanvas.getContext("2d")},this.pickerPreviewColor=e=>{if(!this.stageCanvas)return;let t=new a.A(e.clientX,e.clientY);this.colorPreview.style.top=t.y-60+"px",this.colorPreview.style.left=t.x+10+"px",this.colorPreview.style.display="block";const s=n.Ay.isHDPI?2:1;if(t.x=(t.x-this.stageCRect.left)*s,t.y=(t.y-this.stageCRect.top)*s,t.x<0||t.y<0||t.x>this.stageCRect.width*s||t.y>this.stageCRect.height*s)return void(this.colorPreview.style.display="none");let i=this.stageCanvasCTX.getImageData(t.x,t.y,1,1).data;this.colorPreview.style.backgroundColor=new r.A(i[0],i[1],i[2]).toHEX()},this.removeColorPicker=e=>{(0,o.Ay)("modal-color-select").remove(),this.colorPreview=null;let t=new a.A(e.clientX,e.clientY);const s=n.Ay.isHDPI?2:1;if(t.x=(t.x-this.stageCRect.left)*s,t.y=(t.y-this.stageCRect.top)*s,t.x<0||t.y<0||t.x>this.stageCRect.width*s||t.y>this.stageCRect.height*s)return;let i=this.stageCanvasCTX.getImageData(t.x,t.y,1,1).data,h=new r.A(i[0],i[1],i[2]);this.setHex(h.toHEX(),!0),this.updateColor(!0)},this.satMouseDown=e=>{e.stopPropagation(),document.addEventListener("mousemove",this.satMouseMove,!0),document.addEventListener("mouseup",this.satMouseUp,!0);var t=this.satSlide.getBoundingClientRect(),s=e.pageX-t.left,i=e.pageY-t.top;this.selectSat(s,i)},this.satMouseMove=e=>{e.stopPropagation();var t=this.satSlide.getBoundingClientRect(),s=e.pageX-t.left,i=e.pageY-t.top;this.selectSat(s,i)},this.satMouseUp=e=>{e.stopPropagation(),document.removeEventListener("mousemove",this.satMouseMove,!0),document.removeEventListener("mouseup",this.satMouseUp,!0)},this.satTouchStart=e=>{e.stopPropagation(),document.addEventListener("touchmove",this.satTouchMove,{passive:!1}),document.addEventListener("touchend",this.satTouchEnd,{passive:!1});var t=this.satSlide.getBoundingClientRect(),s=e.targetTouches[0].pageX-t.left,i=e.targetTouches[0].pageY-t.top;this.selectSat(s,i)},this.satTouchMove=e=>{e.stopPropagation();var t=this.satSlide.getBoundingClientRect(),s=e.targetTouches[0].pageX-t.left,i=e.targetTouches[0].pageY-t.top;this.selectSat(s,i)},this.satTouchEnd=e=>{e.stopPropagation(),document.removeEventListener("touchmove",this.satTouchMove),document.removeEventListener("touchend",this.satTouchEnd)},this.selectSat=(e,t)=>{e=i.qE(e,0,this.width),t=i.qE(t,0,this.height),this.hsb.s=e/this.width,this.hsb.b=1-t/this.height,this.setSat(),this.updateColor()},this.setSat=()=>{this.satKnob.style.left=this.hsb.s*this.width-9+"px",this.satKnob.style.top=(1-this.hsb.b)*this.height-9+"px"},this.hueMouseDown=e=>{e.stopPropagation(),document.addEventListener("mousemove",this.hueMouseMove,!0),document.addEventListener("mouseup",this.hueMouseUp,!0);var t=this.hueSlide.getBoundingClientRect(),s=e.pageX-t.left;this.selectHue(s)},this.hueMouseMove=e=>{e.stopPropagation();var t=this.hueSlide.getBoundingClientRect(),s=e.pageX-t.left;this.selectHue(s)},this.hueMouseUp=e=>{e.stopPropagation(),document.removeEventListener("mousemove",this.hueMouseMove,!0),document.removeEventListener("mouseup",this.hueMouseUp,!0)},this.hueTouchStart=e=>{e.stopPropagation(),this.hueSlide.addEventListener("touchmove",this.hueTouchMove,{passive:!1}),document.addEventListener("touchend",this.hueTouchEnd,{passive:!1});var t=e.target.getBoundingClientRect(),s=e.targetTouches[0].pageX-t.left;this.selectHue(s)},this.hueTouchMove=e=>{e.stopPropagation();var t=e.target.getBoundingClientRect(),s=e.targetTouches[0].pageX-t.left;this.selectHue(s)},this.hueTouchEnd=e=>{e.stopPropagation(),this.hueSlide.removeEventListener("touchmove",this.hueTouchMove),document.removeEventListener("touchend",this.hueTouchEnd)},this.selectHue=e=>{e=i.qE(e,0,this.width),this.hsb.h=Math.round(e/this.width*360),this.setHue(),this.updateColor()},this.setHue=()=>{this.hueKnob.style.left=this.hsb.h/360*this.width-2+"px";let e=this.satSlide.getContext("2d");e.fillStyle=r.A.fromHSB(this.hsb.h,1,1).toHEX(),e.fillRect(0,0,this.satSlide.width,this.satSlide.height);var t=e.createLinearGradient(0,0,this.satSlide.width,0);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=t,e.fillRect(0,0,this.satSlide.width,this.satSlide.height);var s=e.createLinearGradient(0,0,0,this.satSlide.height);s.addColorStop(0,"rgba(0,0,0,0)"),s.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=s,e.fillRect(0,0,this.satSlide.width,this.satSlide.height)},this.selectPod=e=>{var t;let s=e.currentTarget;if(s.classList.contains("selected")&&!this.extended)"block"==this.selector.style.display?this.selector.style.display="none":(this.selector.style.display="block",this.setHex(s.getAttribute("data")));else{if(null===(t=this.selected)||void 0===t||t.classList.remove("selected"),this.selected=s,this.selected.classList.add("selected"),this.selector.style.display="block","empty"===s.getAttribute("data"))return this.color=void 0,void(this.callback&&this.callback(void 0));this.setHex(s.getAttribute("data"),!0)}},this.updateColor=(e=!0,t=!0)=>{clearTimeout(this.setTimer),this.color=r.A.fromHSB(this.hsb.h,this.hsb.s,this.hsb.b);const s=this.color.toHEX();this.hexInput.value=s,t&&this.selected&&(this.selected.classList.contains("empty")&&(this.selected.classList.remove("selected"),this.selected=this.selected.nextElementSibling,this.selected.classList.add("selected")),this.selected.setAttribute("data",s),this.selected.style.backgroundColor=s),this.setTimer=setTimeout(()=>{this.callback&&e&&this.callback(this.color)},50)},this.hexInputInput=e=>{/^#[0-9A-F]{6}$/i.test(this.hexInput.value)&&this.setHex(this.hexInput.value,!1)},this.hexInputBlur=e=>{/^#[0-9A-F]{6}$/i.test(this.hexInput.value)?this.setHex(this.hexInput.value,!0):this.hexInput.value=this.getHex()},this.setColor=(e,t=!1)=>{this.hsb=e.toHSB(),this.setHue(),this.setSat(),this.updateColor(t,!0)},this.setHex=(e,t=!1)=>this.setColor(r.A.fromHEX(e),t),this.getHex=()=>this.color.toHEX(),this.getColor=()=>this.color,this.color=t,this.holder=e,this.callback=s,this.height=120,this.extended=l,this.holder.innerHTML="",this.width=d||this.holder.getBoundingClientRect().width,this.selector=(0,o.T)("div",{className:"color-selector"}),l){if(this.presets=(0,o.T)("div",{className:"color-selector-presets"}),h){let e=(0,o.T)("div",{className:"color-pod square empty"});e.addEventListener("click",this.selectPod,!1),e.setAttribute("data","empty"),this.color||(e.classList.add("selected"),this.selected=e),this.presets.appendChild(e)}let e=[...n.Ay.oldColor.slice(),"#ffffff","#888888","#000000"];for(let t=0;t<e.length;++t){let s=(0,o.T)("div",{className:"color-pod square"});s.addEventListener("click",this.selectPod,!1),s.style.backgroundColor=e[t],s.setAttribute("data",e[t]),this.presets.appendChild(s),0!==t||l||(this.selected=s,s.classList.add("selected"))}this.presets.classList.add("top-10"),this.holder.append(this.selector,(0,o.T)("div",{className:"splitter top-10"}),this.presets)}else this.holder.append(this.selector);let m=(0,o.T)("div",{className:"color-selector-sat",style:"width:"+this.width+"px; height:"+this.height+"px;"});this.selector.appendChild(m),this.satSlide=i.VI(this.width,this.height),this.satSlide.addEventListener("mousedown",this.satMouseDown,!1),this.satSlide.addEventListener("touchstart",this.satTouchStart,{passive:!1}),this.satSlide.classList.add("color-selector-sat-slide"),m.appendChild(this.satSlide),this.satKnob=document.createElement("div"),this.satKnob.classList.add("color-selector-sat-knob","ic"),m.appendChild(this.satKnob);let g=document.createElement("div");g.classList.add("color-selector-hue"),g.style.width=this.width+"px",this.selector.appendChild(g),this.hueSlide=document.createElement("div"),this.hueSlide.style.width=this.width+"px",this.hueSlide.addEventListener("mousedown",this.hueMouseDown,!1),this.hueSlide.addEventListener("touchstart",this.hueTouchStart,{passive:!1}),this.hueSlide.classList.add("color-selector-hue-slide"),g.appendChild(this.hueSlide),this.hueKnob=document.createElement("div"),this.hueKnob.classList.add("color-selector-hue-knob","ic"),g.appendChild(this.hueKnob);let y=(0,o.T)("div",{className:"color-selector-bar"});if(!l){if(h){let e=(0,o.T)("div",{className:"color-pod empty"});e.addEventListener("click",this.selectPod,!1),e.setAttribute("data","empty"),this.color||(this.selected=e),y.appendChild(e)}let e=(0,o.T)("div",{className:"color-pod"});e.addEventListener("click",this.selectPod,!1),y.appendChild(e),h&&!this.color||(this.selected=e)}if(this.hexInput=(0,o.T)("input",{type:"text",spellcheck:!1,maxLength:7,style:"width:90px;text-transform:uppercase;"}),this.hexInput.addEventListener("input",this.hexInputInput,!1),this.hexInput.addEventListener("blur",this.hexInputBlur,!1),y.appendChild(this.hexInput),c){let e=(0,o.T)("div",{className:"icon-button",style:"margin-left:auto;"},(0,o.T)("img",{src:"/img/tool/picker.svg",className:"ic"}));e.addEventListener("click",this.activeColorPick,!1),y.appendChild(e)}this.selector.appendChild(y),this.hsb=r.A.fromHEX(null!==(u=null===(p=this.color)||void 0===p?void 0:p.toHEX())&&void 0!==u?u:"#ffffff").toHSB(),this.setHue(),this.setSat(),this.updateColor(!1,!!this.color),this.color=t}}},74852:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpiIntentDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.UpiIntentDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"appId",baseName:"appId",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"shopperNotificationReference",baseName:"shopperNotificationReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"UpiIntentDetails.TypeEnum"}],function(e){let t;!function(e){e.UpiIntent="upi_intent"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.UpiIntentDetails||(t.UpiIntentDetails={}))},75281:(e,t,s)=>{s.d(t,{A:()=>r,X:()=>n});var i=s(41915),a=s(95009);class n{constructor(e){this.preset=e}static createCurveSet(e){const t=new Array,s=new Array,a=new Array,n=new Array;for(let r=0;r<e.preset[0].length;r+=2)t.push(new i.A(e.preset[0][r],e.preset[0][r+1]));for(let r=0;r<e.preset[1].length;r+=2)s.push(new i.A(e.preset[1][r],e.preset[1][r+1]));for(let r=0;r<e.preset[2].length;r+=2)a.push(new i.A(e.preset[2][r],e.preset[2][r+1]));for(let r=0;r<e.preset[3].length;r+=2)n.push(new i.A(e.preset[3][r],e.preset[3][r+1]));return new r(1,t,s,a,n)}}class r{constructor(e=255,t=[],s=[],i=[],a=[]){this.scale=e,this.rgb=t,this.red=s,this.green=i,this.blue=a,this.percent=1}static getInterpolation(e,t){let s=[],i=[],n=new Float32Array(256);for(var r=0;r<t.length;r++)s.push(t[r].x*e),i.push(t[r].y*e);let o=new a.A(s,i);for(var h=0;h<Math.ceil(s[0]);h++)n[h]=i[0];for(h=Math.ceil(s[0]);h<Math.ceil(s[s.length-1]);h++)n[h]=o.interpolate(h);for(h=Math.ceil(s[s.length-1]);h<256;h++)n[h]=i[i.length-1];return n}static fillPaletteMap(e,t){let s=r.getInterpolation(e.scale,e.rgb),i=r.getInterpolation(e.scale,e.red),a=r.getInterpolation(e.scale,e.green),n=r.getInterpolation(e.scale,e.blue);for(let r=0;r<256;++r){let o=r-s[r];t.data[4*r]=r-Math.round((r-(i[r]-o))*e.percent),t.data[4*r+1]=r-Math.round((r-(a[r]-o))*e.percent),t.data[4*r+2]=r-Math.round((r-(n[r]-o))*e.percent)}}}},75307:(e,t,s)=>{s.d(t,{A:()=>i});class i{static rotation(e){return new Promise((t,s)=>{const i=new FileReader;i.onload=e=>{e.target||t(0);const s=e.target,i=new DataView(s.result);65496!==i.getUint16(0,!1)&&t(0);const a=i.byteLength;let n=2;for(;n<a;){i.getUint16(n+2,!1)<=8&&t(0);const e=i.getUint16(n,!1);if(n+=2,65505===e){1165519206!==i.getUint32(n+=2,!1)&&t(0);const e=18761===i.getUint16(n+=6,!1);n+=i.getUint32(n+4,e);const s=i.getUint16(n,e);n+=2;for(let a=0;a<s;a++)if(274===i.getUint16(n+12*a,e)){switch(i.getUint16(n+12*a+8,e)){case 8:t(-90);break;case 6:t(90);break;case 3:t(180);break;default:t(0)}return}}else{if(65280&~e)break;n+=i.getUint16(n,!1)}}t(0)},i.readAsArrayBuffer(e)})}}},75707:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(42268),a=s(21742),n=s(54738),r=s(75770),o=s(82042),h=s(29755),c=s(59350),l=s(85337),d=s(15818),p=s(71499);class u extends r.A{constructor(e){super("replace",e),this.stage=e,this.isShiftDown=!1,this.keyDown=e=>{if("Shift"!==e.key)if("Control"!==e.key||this.stage.coating.override)switch(e.key){case",":e.shiftKey?this.brushPod.stepSoftness(.1):this.brushPod.stepSize(-10);break;case".":e.shiftKey?this.brushPod.stepSoftness(-.1):this.brushPod.stepSize(10)}else this.stage.coating.setPicker();else this.isShiftDown=!0},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1),"Control"===e.key&&this.stage.coating.override&&this.stage.coating.removePicker()},this.layerSelect=()=>{if(!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("replace-no-layer").style.display="flex",(0,i.Ay)("replace-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("replace-no-layer").style.display="none",(0,i.Ay)("replace-settings").style.display="flex",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"over"),this.cache=n.oM(this.selected.canvas),this.cachectx=this.cache.getContext("2d"),this.stage.fresco.hasSelection()&&this.scratch.addBake(),this.updateBrush()},this.updateBrush=()=>{this.brush.generate(new d.A,(0,i.Ay)("replace-hard-tip").checked),this.selected?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom,new d.A(255,255,255,255))):this.stage.coating.removeCursorImage()},this.down=(e,t)=>{if(!this.selected)return;this.stage.coating.freeze(!0),this.mode=(0,i.Ay)("replace-mode").value,this.scratch.settings.opacity=this.opacity.getValue();const s=this.tolerance.getValue();this.sRGB=this.getSourcePixelAverage(this.stage.translateRasterToFresco(e,this.selected.rect)),this.sHSB=this.sRGB.toHSB(),this.shmax=this.sHSB.h+s,this.shmin=this.sHSB.h-s,this.shmax>360&&(this.shmax-=360),this.shmin<0&&(this.shmin+=360),this.tRGB=d.A.fromHEX(h.Ay.mainColor),this.tHSB=this.tRGB.toHSB(),this.isShiftDown||(this.x=this.y=-1),"touch"!==t&&this.move(e),this.addMoveListeners()},this.getSourcePixelAverage=e=>{let t=0,s=0,i=0;const a=this.cache.getContext("2d").getImageData(e.x-1,e.y-1,3,3).data;for(let n=0;n<36;n+=4)t+=a[n],s+=a[n+1],i+=a[n+2];return new d.A(Math.round(t/9),Math.round(s/9),Math.round(i/9))},this.x=-1,this.y=-1,this.move=e=>{let t=this.brush.getStep(),s=!1;if(e=this.stage.translateRasterToFresco(e,this.selected.rect),-1===this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0),e.x!==this.x||e.y!==this.y){let i=e.x-this.x,a=e.y-this.y,n=i>0?1:-1,r=a>0?1:-1;if(i=i<0?-i:i,a=a<0?-a:a,i>a){let e=.5*i;for(let o=1;o<=i;o++)this.x+=n,e+=a,e>=i&&(e-=i,this.y+=r),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),this.lx=this.x,this.ly=this.y,s=!0)}else{let e=.5*a;for(let o=1;o<=a;o++)this.y+=r,e+=i,e>=a&&(e-=a,this.x+=n),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),this.lx=this.x,this.ly=this.y,s=!0)}}s&&(this.scratch.applySelection(this.stage),window.requestAnimationFrame(()=>this.stage.render()))},this.drawShape=(e,t)=>{const s=this.brush.canvas.width,i=this.brush.canvas.height;let a=this.getPatchContext(s,i);a.save(),a.drawImage(this.selected.canvas,-e,-t);const n=a.getImageData(0,0,s,i),r=this.cachectx.getImageData(e,t,s,i);switch(this.mode){case"auto":this.changeAuto(n.data,r.data,s,i);break;case"hue":this.changeHue(n.data,s,i);break;case"sat":this.changeSat(n.data,s,i);break;case"bri":this.changeBri(n.data,s,i);break;case"fill":this.changeFill(n.data,s,i)}a.putImageData(n,0,0),a.globalCompositeOperation="destination-in",a.drawImage(this.brush.canvas,0,0),a.restore(),this.scratch.ctx.drawImage(this.patch,e,t)},this.changeAuto=(e,t,s,i)=>{let a,n,r,o,h,c,l,d,p,u,m,g,y,v,f,b,w=i;const A=this.tHSB.b/this.sHSB.b,x=this.tHSB.s/this.sHSB.s;for(;w--;)for(a=s;a--;)if(b=4*(w*s+a),r=t[b],o=t[b+1],h=t[b+2],p=Math.min(r,o,h),u=Math.max(r,o,h),d=u/255,m=u-p,c=l=0,m&&(l=m/u,c=r==u?(o-h)/m*60:o==u?60*(2+(h-r)/m):60*(4+(r-o)/m),c>360?c-=360:c<0&&(c+=360)),l<.05||d<.05||c<this.shmax&&c>this.shmin||this.shmax<this.shmin&&(c>this.shmin||c<this.shmax)){if(c=this.tHSB.h,d*=A,l*=x,d<0?d=0:d>1&&(d=1),0===d)r=0,o=0,h=0;else if(0===l)r=o=h=d;else switch(g=c/60,n=g-~~g,v=d*(1-l),f=d*(1-l*n),y=d*(1-l*(1-n)),~~g){case 0:case 6:r=d,o=y,h=v;break;case 1:r=f,o=d,h=v;break;case 2:r=v,o=d,h=y;break;case 3:r=v,o=f,h=d;break;case 4:r=y,o=v,h=d;break;case 5:r=d,o=v,h=f}r*=255,o*=255,h*=255,e[b]=r,e[b+1]=o,e[b+2]=h}},this.changeHue=(e,t,s)=>{let i,a,n,r,o,h,c,l,d,p,u,m,g,y,v,f,b=s;for(;b--;)for(i=t;i--;)if(f=4*(b*t+i),n=e[f],r=e[f+1],o=e[f+2],d=Math.min(n,r,o),p=Math.max(n,r,o),l=p/255,u=p-d,h=c=0,u&&(c=u/p,h=n==p?(r-o)/u*60:r==p?60*(2+(o-n)/u):60*(4+(n-r)/u),h>360?h-=360:h<0&&(h+=360)),c>.2&&h<this.shmax&&h>this.shmin||this.shmax<this.shmin&&(h>this.shmin||h<this.shmax)){if(h=this.tHSB.h,l<0?l=0:l>1&&(l=1),0==l)n=0,r=0,o=0;else if(0==c)n=r=o=l;else switch(m=h/60,a=m-~~m,y=l*(1-c),v=l*(1-c*a),g=l*(1-c*(1-a)),~~m){case 0:case 6:n=l,r=g,o=y;break;case 1:n=v,r=l,o=y;break;case 2:n=y,r=l,o=g;break;case 3:n=y,r=v,o=l;break;case 4:n=g,r=y,o=l;break;case 5:n=l,r=y,o=v}n*=255,r*=255,o*=255,e[f]=n,e[f+1]=r,e[f+2]=o}},this.changeSat=(e,t,s)=>{let i,a,n,r,o,h,c,l,d,p,u,m,g,y,v,f,b=s;const w=this.tHSB.s/this.sHSB.s;for(;b--;)for(i=t;i--;)if(f=4*(b*t+i),n=e[f],r=e[f+1],o=e[f+2],d=Math.min(n,r,o),p=Math.max(n,r,o),l=p/255,u=p-d,h=c=0,u&&(c=u/p,h=n==p?(r-o)/u*60:r==p?60*(2+(o-n)/u):60*(4+(n-r)/u),h>360?h-=360:h<0&&(h+=360)),h<this.shmax&&h>this.shmin||this.shmax<this.shmin&&(h>this.shmin||h<this.shmax)){if(c*=w,l<0?l=0:l>1&&(l=1),0==l)n=0,r=0,o=0;else if(0==c)n=r=o=l;else switch(m=h/60,a=m-~~m,y=l*(1-c),v=l*(1-c*a),g=l*(1-c*(1-a)),~~m){case 0:case 6:n=l,r=g,o=y;break;case 1:n=v,r=l,o=y;break;case 2:n=y,r=l,o=g;break;case 3:n=y,r=v,o=l;break;case 4:n=g,r=y,o=l;break;case 5:n=l,r=y,o=v}n*=255,r*=255,o*=255,e[f]=n,e[f+1]=r,e[f+2]=o}},this.changeBri=(e,t,s)=>{let i,a,n,r,o,h,c,l,d,p,u,m,g,y,v,f=s;const b=this.tHSB.b/this.sHSB.b;for(;f--;)for(i=t;i--;){v=4*(f*t+i),n=e[v],r=e[v+1],o=e[v+2],d=Math.min(n,r,o),p=Math.max(n,r,o),l=p/255;var w=p-d;if(h=c=0,w&&(c=w/p,h=n==p?(r-o)/w*60:r==p?60*(2+(o-n)/w):60*(4+(n-r)/w),h>360?h-=360:h<0&&(h+=360)),h<this.shmax&&h>this.shmin||this.shmax<this.shmin&&(h>this.shmin||h<this.shmax)){if(l*=b,l<0?l=0:l>1&&(l=1),0==l)n=0,r=0,o=0;else if(0==c)n=r=o=l;else switch(u=h/60,a=u-~~u,g=l*(1-c),y=l*(1-c*a),m=l*(1-c*(1-a)),~~u){case 0:case 6:n=l,r=m,o=g;break;case 1:n=y,r=l,o=g;break;case 2:n=g,r=l,o=m;break;case 3:n=g,r=y,o=l;break;case 4:n=m,r=g,o=l;break;case 5:n=l,r=g,o=y}n*=255,r*=255,o*=255,e[v]=n,e[v+1]=r,e[v+2]=o}}},this.changeFill=(e,t,s)=>{let i,a,n,r,o,h,c,l,d,p,u=s;for(;u--;)for(i=t;i--;){p=4*(u*t+i),a=e[p],n=e[p+1],r=e[p+2],l=Math.min(a,n,r),d=Math.max(a,n,r),c=d/255;var m=d-l;o=h=0,m&&(h=m/d,o=a==d?(n-r)/m*60:n==d?60*(2+(r-a)/m):60*(4+(a-n)/m),o>360?o-=360:o<0&&(o+=360)),(h>.2&&c>.1&&o<this.shmax&&o>this.shmin||this.shmax<this.shmin&&(o>this.shmin||o<this.shmax))&&(e[p]=this.tRGB.r,e[p+1]=this.tRGB.g,e[p+2]=this.tRGB.b)}},this.getPatchContext=(e,t)=>this.patch?(this.patch.width!==e||this.patch.height!==t?(this.patch.width=e,this.patch.height=t):this.ptx.clearRect(0,0,e,t),this.ptx):(this.patch=n.VI(e,t),this.ptx=this.patch.getContext("2d"),this.ptx),this.up=e=>{this.stage.coating.freeze(!1),this.removeMoveListeners();let t=n.TL(this.scratch.getCanvas());if(t&&t.width>0&&t.height>0){let e=n.ON(this.selected.canvas,t);const s=this.selected.rect.clone();this.scratch.drawToLayer(this.selected,"source-over",this.opacity.getValue()),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"replace",layer:this.selected,patchRect:t,patch:e,rect:s})}window.requestAnimationFrame(()=>this.stage.render())},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.brushPod.cleanUp(),this.stage.coating.freeze(!1),this.removeMoveListeners(),this.removeDownListeners(),(0,i.Ay)("replace-hard-tip").addEventListener("click",this.updateBrush,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("zoom-change",this.updateBrush,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1)},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),(0,i.Ay)("replace-hard-tip").addEventListener("click",this.updateBrush,!1),this.brush=new c.A(new p.A),this.brushPod=new l.A(e,"replace-brush",this.brush,this.updateBrush),this.tolerance=new o.A("replace-tolerance",{compact:!0,label:(0,a.A)("tolerance")+":",defaultValue:36,range:[0,150],step:1}),this.opacity=new o.A("replace-opacity",{compact:!0,label:(0,a.A)("opacity")+":",defaultValue:1,range:[0,1],labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100}),this.addDownListeners(),this.layerSelect()}}},75770:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(41915),a=s(29755);class n{constructor(e,t){this.applyClick=()=>{document.dispatchEvent(new CustomEvent("tool-apply"))},this.cancelClick=()=>{document.dispatchEvent(new CustomEvent("tool-cancel"))},this.addPointer=e=>{this.pointers.push(e),this.stage.raster.setPointerCapture(e)},this.removePointer=e=>{for(let t=0;t<this.pointers.length;t++)if(this.pointers[t]===e.pointerId){this.pointers.splice(t,1);break}this.stage.raster.releasePointerCapture(e.pointerId)},this.pointerDown=e=>{if(e.stopPropagation(),this.stage.coating.override||e.button>0)return;this.isDown=!0,this.addPointer(e.pointerId);const t=a.Ay.isHDPI?2:1;1===this.pointers.length&&this.down(new i.A(e.offsetX*t,e.offsetY*t),e.pointerType,e.pressure)},this.pointerMove=e=>{e.stopPropagation();const t=a.Ay.isHDPI?2:1;this.pointers.length<2&&this.move(new i.A(e.offsetX*t,e.offsetY*t),e.pointerType,e.pressure)},this.pointerUp=e=>{e.stopPropagation(),this.isDown=!1;const t=a.Ay.isHDPI?2:1;this.up(new i.A(e.offsetX*t,e.offsetY*t))},this.dblClick=e=>{e.stopPropagation();const t=a.Ay.isHDPI?2:1;this.dbl(new i.A(e.offsetX*t,e.offsetY*t))},this.addDownListeners=()=>{this.stage.raster.addEventListener("pointerdown",this.pointerDown,!1),this.stage.raster.addEventListener("pointerup",this.removePointer,!1)},this.removeDownListeners=()=>{for(let e=0;e<this.pointers.length;e++)this.stage.raster.releasePointerCapture(this.pointers[e]);this.stage.raster.removeEventListener("pointerdown",this.pointerDown,!1),this.stage.raster.removeEventListener("pointerup",this.removePointer,!1)},this.addMoveListeners=()=>{this.stage.raster.addEventListener("pointermove",this.pointerMove,!1),this.stage.raster.addEventListener("pointerup",this.pointerUp,!1)},this.removeMoveListeners=()=>{this.stage.raster.removeEventListener("pointermove",this.pointerMove,!1),this.stage.raster.removeEventListener("pointerup",this.pointerUp,!1)},this.down=(e,t,s)=>{},this.move=(e,t,s)=>{},this.dbl=e=>{},this.up=e=>{},this.apply=()=>{},this.cancel=()=>{},this.cleanUp=()=>{},this.name=e,this.stage=t,this.pointers=new Array}}},76315:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(54738),a=s(41915);class n{constructor(e,t="top"){this.duration=e,this.metod=t}}n.getOffset=(e,t,s)=>{let n=0;if(void 0===s||0===s.duration||!e.rect)return n;switch(s.metod){case"top":n=e.getRect().y/t.height;break;case"bottom":n=1-e.getRect().y/t.height;break;case"left":n=e.getRect().x/t.width;break;case"right":n=1-e.getRect().x/t.width;break;case"back":n=t.layerNr(e.id)/t.layers.length;break;case"front":n=1-t.layerNr(e.id)/t.layers.length;break;case"center":n=new a.A(t.width/2,t.height/2).distanceTo(e.getRect().center())/Math.sqrt(t.width*t.width+t.height*t.height)/2;break;case"bounds":n=1-new a.A(t.width/2,t.height/2).distanceTo(e.getRect().center())/Math.sqrt(t.width*t.width+t.height*t.height)/2}return Math.round((0,i.qE)(n*s.duration,0,s.duration))};const r=n},76992:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellulantDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CellulantDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"issuer",baseName:"issuer",type:"string"},{name:"type",baseName:"type",type:"CellulantDetails.TypeEnum"}],function(e){let t;!function(e){e.Cellulant="cellulant"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CellulantDetails||(t.CellulantDetails={}))},77441:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleInterference")),this.update=()=>{this.change("interference",{seed:this.seed.getValue(),amount:this.amount.getValue(),direction:(0,n.Ay)("interfer-direction").checked})},this.kind="interference",this.setContent((0,n.T)("div",{id:"interfer-seed"}),(0,n.T)("div",{id:"interfer-amount",className:"range-box top-16"}),(0,n.T)("input",{type:"checkbox",id:"interfer-direction"}),(0,n.T)("label",{className:"top-20 switch",htmlFor:"interfer-direction"},(0,r.A)("vertical"),(0,n.T)("span"))),this.seed=new a.A("interfer-seed",{label:(0,r.A)("seed"),range:[0,100],step:1,defaultValue:23,labelFormat:e=>String(e),onChange:e=>this.update()}),this.amount=new a.A("interfer-amount",{label:(0,r.A)("amount"),step:.01,range:[-1,1],defaultValue:.2,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),(0,n.Ay)("interfer-direction").addEventListener("click",()=>{this.update()}),this.update()}}},77472:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AmazonPayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AmazonPayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amazonPayToken",baseName:"amazonPayToken",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"checkoutSessionId",baseName:"checkoutSessionId",type:"string"},{name:"type",baseName:"type",type:"AmazonPayDetails.TypeEnum"}],function(e){let t;!function(e){e.Amazonpay="amazonpay"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.AmazonPayDetails||(t.AmazonPayDetails={}))},77851:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ZipDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ZipDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"clickAndCollect",baseName:"clickAndCollect",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"ZipDetails.TypeEnum"}],function(e){let t;!function(e){e.Zip="zip",e.ZipPos="zip_pos"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.ZipDetails||(t.ZipDetails={}))},78085:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataLodging=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataLodging=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"lodging_checkInDate",baseName:"lodging.checkInDate",type:"string"},{name:"lodging_checkOutDate",baseName:"lodging.checkOutDate",type:"string"},{name:"lodging_customerServiceTollFreeNumber",baseName:"lodging.customerServiceTollFreeNumber",type:"string"},{name:"lodging_fireSafetyActIndicator",baseName:"lodging.fireSafetyActIndicator",type:"string"},{name:"lodging_folioCashAdvances",baseName:"lodging.folioCashAdvances",type:"string"},{name:"lodging_folioNumber",baseName:"lodging.folioNumber",type:"string"},{name:"lodging_foodBeverageCharges",baseName:"lodging.foodBeverageCharges",type:"string"},{name:"lodging_noShowIndicator",baseName:"lodging.noShowIndicator",type:"string"},{name:"lodging_prepaidExpenses",baseName:"lodging.prepaidExpenses",type:"string"},{name:"lodging_propertyPhoneNumber",baseName:"lodging.propertyPhoneNumber",type:"string"},{name:"lodging_room1_numberOfNights",baseName:"lodging.room1.numberOfNights",type:"string"},{name:"lodging_room1_rate",baseName:"lodging.room1.rate",type:"string"},{name:"lodging_totalRoomTax",baseName:"lodging.totalRoomTax",type:"string"},{name:"lodging_totalTax",baseName:"lodging.totalTax",type:"string"},{name:"travelEntertainmentAuthData_duration",baseName:"travelEntertainmentAuthData.duration",type:"string"},{name:"travelEntertainmentAuthData_market",baseName:"travelEntertainmentAuthData.market",type:"string"}]},78245:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateCheckoutSessionRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CreateCheckoutSessionRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"accountInfo",baseName:"accountInfo",type:"AccountInfo"},{name:"additionalAmount",baseName:"additionalAmount",type:"Amount"},{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"allowedPaymentMethods",baseName:"allowedPaymentMethods",type:"Array<string>"},{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"authenticationData",baseName:"authenticationData",type:"AuthenticationData"},{name:"billingAddress",baseName:"billingAddress",type:"BillingAddress"},{name:"blockedPaymentMethods",baseName:"blockedPaymentMethods",type:"Array<string>"},{name:"captureDelayHours",baseName:"captureDelayHours",type:"number"},{name:"channel",baseName:"channel",type:"CreateCheckoutSessionRequest.ChannelEnum"},{name:"company",baseName:"company",type:"Company"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"dateOfBirth",baseName:"dateOfBirth",type:"string"},{name:"deliverAt",baseName:"deliverAt",type:"Date"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"DeliveryAddress"},{name:"enableOneClick",baseName:"enableOneClick",type:"boolean"},{name:"enablePayOut",baseName:"enablePayOut",type:"boolean"},{name:"enableRecurring",baseName:"enableRecurring",type:"boolean"},{name:"expiresAt",baseName:"expiresAt",type:"Date"},{name:"fundOrigin",baseName:"fundOrigin",type:"FundOrigin"},{name:"fundRecipient",baseName:"fundRecipient",type:"FundRecipient"},{name:"installmentOptions",baseName:"installmentOptions",type:"{ [key: string]: CheckoutSessionInstallmentOption; }"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"mandate",baseName:"mandate",type:"Mandate"},{name:"mcc",baseName:"mcc",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantOrderReference",baseName:"merchantOrderReference",type:"string"},{name:"metadata",baseName:"metadata",type:"{ [key: string]: string; }"},{name:"mode",baseName:"mode",type:"CreateCheckoutSessionRequest.ModeEnum"},{name:"mpiData",baseName:"mpiData",type:"ThreeDSecureData"},{name:"platformChargebackLogic",baseName:"platformChargebackLogic",type:"PlatformChargebackLogic"},{name:"recurringExpiry",baseName:"recurringExpiry",type:"string"},{name:"recurringFrequency",baseName:"recurringFrequency",type:"string"},{name:"recurringProcessingModel",baseName:"recurringProcessingModel",type:"CreateCheckoutSessionRequest.RecurringProcessingModelEnum"},{name:"redirectFromIssuerMethod",baseName:"redirectFromIssuerMethod",type:"string"},{name:"redirectToIssuerMethod",baseName:"redirectToIssuerMethod",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"returnUrl",baseName:"returnUrl",type:"string"},{name:"riskData",baseName:"riskData",type:"RiskData"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperIP",baseName:"shopperIP",type:"string"},{name:"shopperInteraction",baseName:"shopperInteraction",type:"CreateCheckoutSessionRequest.ShopperInteractionEnum"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"shopperStatement",baseName:"shopperStatement",type:"string"},{name:"showInstallmentAmount",baseName:"showInstallmentAmount",type:"boolean"},{name:"showRemovePaymentMethodButton",baseName:"showRemovePaymentMethodButton",type:"boolean"},{name:"socialSecurityNumber",baseName:"socialSecurityNumber",type:"string"},{name:"splitCardFundingSources",baseName:"splitCardFundingSources",type:"boolean"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"store",baseName:"store",type:"string"},{name:"storePaymentMethod",baseName:"storePaymentMethod",type:"boolean"},{name:"storePaymentMethodMode",baseName:"storePaymentMethodMode",type:"CreateCheckoutSessionRequest.StorePaymentMethodModeEnum"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"themeId",baseName:"themeId",type:"string"},{name:"threeDSAuthenticationOnly",baseName:"threeDSAuthenticationOnly",type:"boolean"},{name:"trustedShopper",baseName:"trustedShopper",type:"boolean"}],function(e){let t,s,i,a,n;!function(e){e.IOs="iOS",e.Android="Android",e.Web="Web"}(t=e.ChannelEnum||(e.ChannelEnum={})),function(e){e.Embedded="embedded",e.Hosted="hosted"}(s=e.ModeEnum||(e.ModeEnum={})),function(e){e.CardOnFile="CardOnFile",e.Subscription="Subscription",e.UnscheduledCardOnFile="UnscheduledCardOnFile"}(i=e.RecurringProcessingModelEnum||(e.RecurringProcessingModelEnum={})),function(e){e.Ecommerce="Ecommerce",e.ContAuth="ContAuth",e.Moto="Moto",e.Pos="POS"}(a=e.ShopperInteractionEnum||(e.ShopperInteractionEnum={})),function(e){e.AskForConsent="askForConsent",e.Disabled="disabled",e.Enabled="enabled"}(n=e.StorePaymentMethodModeEnum||(e.StorePaymentMethodModeEnum={}))}(s=t.CreateCheckoutSessionRequest||(t.CreateCheckoutSessionRequest={}))},78282:(e,t,s)=>{s.d(t,{A:()=>y});var i=s(21742),a=s(42268),n=s(78508),r=s(54738),o=s(40963),h=s(82042),c=s(79453),l=s(26806),d=s(50295),p=s(96703),u=s(39989),m=s(3514);const g=1024;class y extends l.A{constructor(e){super((0,i.A)("titleAiInfill"),!1),this.dirtyMask=!0,this.working=!1,this.renderCreditAmount=()=>{c.N?(0,a.Ay)("generative-fill-credit-count").innerHTML=c.N.credits.toString():((0,a.Ay)("generative-fill-execute").innerText=(0,i.A)("common-signUpLogIn"),(0,a.Ay)("generative-fill-credit-count").style.display="none")},this.cancel=()=>{this.cleanUp()},this.apply=()=>{const e=(0,a.Ay)("infill-newlayer").checked,t=r.tm(this.result,this.imageRect.width,this.imageRect.height);if(e){const e=new u.A(r.Os(),this.prompt.value.substring(0,25)+"..",t,this.maskRect.clone());this.stage.fresco.addLayer(e),this.stage.history.add({type:"addLayer",kind:"aiinfill",layer:e})}else{const e=this.selected;let s=r.ON(e.canvas,this.imageRect.rebase(e.rect.x,e.rect.y));const i=r.oM(this.selected.mask),a=e.rect.clone();e.extendCanvas(this.imageRect);e.canvas.getContext("2d").drawImage(t,0,0,this.imageRect.width,this.imageRect.height,this.imageRect.x,this.imageRect.y,this.imageRect.width,this.imageRect.height),this.stage.history.add({type:"bitmapChange",kind:"aiinfill",layer:this.selected,patchRect:this.imageRect.rebase(this.selected.rect.x,this.selected.rect.y),patch:s,rect:a,mask:i})}document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update")),this.cleanUp()},this.execute=async()=>{if(c.N)if(c.N.credits)try{this.working=!0,this.updateButtonStatus(),(0,a.Ay)("infill-working").style.display="flex";const e=document.querySelector('input[name="generative-fill-model"]:checked').value;let t=this.renderMask();const s=new FormData;s.set("model",e),s.set("prompt",this.prompt.value),s.set("image",await r.PG(this.baseImage)),s.set("mask",await r.PG(t));const i=await fetch("/api/ai/inpaint?inverted=true",{method:"post",body:s}),o=await i.json();if(0==o.status)return void console.log(o.message);const h=await r.$e("data:image/jpg;base64,"+o.data),c=h.getContext("2d");c.globalCompositeOperation="destination-in",c.drawImage(this.baseImage,0,0),c.globalCompositeOperation="source-over",this.result=h,this.renderPreview(this.result),n.W2().then(()=>{this.renderCreditAmount()})}finally{(0,a.Ay)("infill-working").style.display="none",(0,a.Ay)("generative-fill-execute").classList.remove("disabled"),this.working=!1,this.updateButtonStatus()}else c.N.subscription?new p.A("credits"):new m.A("generative-fill","credit");else new d.A},this.updateButtonStatus=()=>{this.working||!this.result?this.disableApply():this.enableApply(),this.working||0===this.prompt.value.length?(0,a.Ay)("generative-fill-execute").classList.add("disabled"):(0,a.Ay)("generative-fill-execute").classList.remove("disabled")},this.dialog.style.width="auto",this.dialog.style.maxWidth="unset",this.stage=e,this.selected=this.stage.fresco.getSelected(),this.bounds=this.stage.fresco.selection.bounds;const t=Math.max(this.bounds.width,this.bounds.height);this.maskRect=new o.A(0,0,t,t).pad(50),this.maskRect.setCenter(this.bounds.center()),this.imageRect=this.maskRect.rebase(this.selected.rect.x,this.selected.rect.y),this.baseImage=r.VI(g,g),this.mask=r.VI(g,g),this.baseImage.getContext("2d").drawImage(this.selected.canvas,this.imageRect.x,this.imageRect.y,this.imageRect.width,this.imageRect.height,0,0,this.baseImage.width,this.baseImage.height),this.preview=r.VI(g,g),this.preview.style.width="356px",this.preview.style.height="356px",this.previewContext=this.preview.getContext("2d"),this.prompt=(0,a.T)("textarea",{rows:3,placeholder:(0,i.A)("aiInfillPrompt"),style:{width:"100%"}}),this.setContent((0,a.T)("div",{style:"display:flex; gap: 10px"},(0,a.T)("div",{style:"width: 250px"},this.prompt,(0,a.T)("div",{id:"infill-influence",className:"range-box top-15"}),(0,a.T)("input",{type:"checkbox",id:"infill-newlayer",checked:!0}),(0,a.T)("label",{className:"top-10 switch",htmlFor:"infill-newlayer"},(0,i.A)("aiInfillNewLayer"),(0,a.T)("span")),(0,a.T)("label",{className:"top-15"},(0,i.A)("model")),(0,a.T)("div",{className:"switch-field stretch",style:" flex-wrap:wrap"},(0,a.T)("input",{type:"radio",id:"generative-fill-model-speed",name:"generative-fill-model",value:"speed",checked:!0}),(0,a.T)("label",{htmlFor:"generative-fill-model-speed"},"speed"),(0,a.T)("input",{type:"radio",id:"generative-fill-model-pro",name:"generative-fill-model",value:"pro"}),(0,a.T)("label",{htmlFor:"generative-fill-model-pro"},"pro")),(0,a.T)("div",{className:"top-35",style:"display:flex;flex-direction:column; padding-top: 35px"},(0,a.T)("a",{id:"generative-fill-execute",className:"button positive",onclick:()=>this.execute()},(0,i.A)("aiInfillGenerate")+" (1c)"))),(0,a.T)("div",(0,a.T)("div",{className:"dialog-loading",style:{border:"2px solid var(--component-highlight)",borderRadius:"4px",overflow:"hidden",position:"relative"}},this.preview,(0,a.T)("div",{id:"infill-working",className:"message",style:"background-color: #424549e3; display: none"},(0,a.T)("label",{className:"working"},(0,i.A)("working"))))))),(0,a.Ay)("dialog-buttons"+this.mid).prepend((0,a.T)("div",{id:"generative-fill-credit-count",className:"credit-meter",onclick:()=>{new p.A("credits")}})),this.influence=new h.A("infill-influence",{defaultValue:1,onChange:()=>{this.dirtyMask=!0},label:(0,i.A)("aiInfillInfluence"),labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,100)/100}),this.prompt.addEventListener("keyup",this.updateButtonStatus),this.updateButtonStatus(),this.renderPreview(this.baseImage),this.position(),this.renderCreditAmount()}renderMask(){if(!this.dirtyMask)return this.mask;const e=this.mask.getContext("2d");return e.clearRect(0,0,g,g),e.fillStyle="white",e.fillRect(0,0,g,g),e.globalAlpha=this.influence.getValue(),e.drawImage(this.stage.fresco.selection.mask,this.maskRect.x,this.maskRect.y,this.maskRect.width,this.maskRect.height,0,0,g,g),this.mask}renderPreview(e){this.previewContext.globalAlpha=1,this.previewContext.clearRect(0,0,g,g),this.previewContext.drawImage(this.stage.fresco.selection.mask,this.maskRect.x,this.maskRect.y,this.maskRect.width,this.maskRect.height,0,0,g,g),this.previewContext.globalCompositeOperation="xor",this.previewContext.fillRect(0,0,g,g),this.previewContext.globalAlpha=.3,this.previewContext.globalCompositeOperation="copy",this.previewContext.drawImage(this.preview,0,0),this.previewContext.globalAlpha=1,this.previewContext.globalCompositeOperation="destination-over",this.previewContext.drawImage(e,0,0)}}},78360:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(2215),a=s(82042),n=s(42268),r=s(54738),o=s(21742);class h extends i.A{constructor(e){super(e,(0,o.A)("titleMimicHDR")),this.createBlurMap=()=>{this.shaders.addShader("blur",1),this.shaders.addShader("invert",1),this.shaders.addShader("desaturate",1),this.blurmap=r.oM(this.shaders.apply(this.cache)),this.shaders.reset()},this.update=r.eD(10,()=>{this.change("mimichdr",0===this.amount.getValue()?0:{amount:this.amount.getValue(),contra:this.contra.getValue(),blurMap:this.blurmap})}),this.kind="mimicHDR",this.setContent((0,n.T)("div",{id:"mimichdr-amount"}),(0,n.T)("div",{id:"mimichdr-contra"})),this.amount=new a.A("mimichdr-amount",{label:(0,o.A)("amount"),range:[0,1],step:.01,defaultValue:.5,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),this.contra=new a.A("mimichdr-contra",{label:(0,o.A)("contrast"),range:[0,1],step:.01,defaultValue:.2,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),this.createBlurMap(),this.update()}}},78424:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationData=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AuthenticationData=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"attemptAuthentication",baseName:"attemptAuthentication",type:"AuthenticationData.AttemptAuthenticationEnum"},{name:"authenticationOnly",baseName:"authenticationOnly",type:"boolean"},{name:"threeDSRequestData",baseName:"threeDSRequestData",type:"ThreeDSRequestData"}],function(e){let t;!function(e){e.Always="always",e.Never="never"}(t=e.AttemptAuthenticationEnum||(e.AttemptAuthenticationEnum={}))}(s=t.AuthenticationData||(t.AuthenticationData={}))},78508:(e,t,s)=>{s.d(t,{In:()=>n,Pe:()=>d,Vi:()=>h,W2:()=>m,Wv:()=>c,X6:()=>p,XC:()=>r,_t:()=>u,gs:()=>o,sG:()=>l,wj:()=>g});var i=s(79453),a=s(42268);async function n(e,t="GET",s={},i=!1){try{const n={"Content-Type":"application/json"};i&&(n.Authorization=`Bearer ${(0,a.lR)("__pat",(0,a.lR)("__prt",""))}`);const r={method:t,headers:n};"GET"!==t&&(r.body=JSON.stringify(s));const o=await fetch(e,r);return await o.json()}catch(n){return console.error(n),{status:!1,message:"Internal Server Error"}}}const r=()=>n("/checkout/giftcard"),o=e=>{const t=new URLSearchParams;(null==e?void 0:e.length)&&t.append("codes",e.join(","));const s=t.toString();return n("/checkout/plans/"+(s?`?${s}`:""))},h=e=>n("/checkout/upgrade/details","POST",{plan:e}),c=(e={})=>n("/checkout/paymentmethods","POST",e),l=(e,t)=>n(`/paypal/polling?id=${e}&type=${t}`,"POST"),d=(e,t,s)=>n(`/api/promo/status/?code=${e}&product=${t}&splan=${s}`),p=()=>n("/api/country/"),u=async()=>{try{const e=await fetch("/api/geoip/"),t=await e.json();return t.registeredCountry.isoCode}catch(e){return"US"}},m=()=>n("/api/credits/","GET").then(e=>{!0===e.status&&(i.N.credits=e.data.credits)}),g=e=>n(`/api/credits/consumecost/${e}/`,"POST").then(e=>{!0===e.status&&(i.N.credits=e.data)})},78576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstallmentOption=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.InstallmentOption=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"maxValue",baseName:"maxValue",type:"number"},{name:"plans",baseName:"plans",type:"Array<InstallmentOption.PlansEnum>"},{name:"preselectedValue",baseName:"preselectedValue",type:"number"},{name:"values",baseName:"values",type:"Array<number>"}],function(e){let t;!function(e){e.BuynowPaylater="buynow_paylater",e.InteresRefundPrctg="interes_refund_prctg",e.InterestBonus="interest_bonus",e.NointeresRefundPrctg="nointeres_refund_prctg",e.NointerestBonus="nointerest_bonus",e.RefundPrctg="refund_prctg",e.Regular="regular",e.Revolving="revolving",e.WithInterest="with_interest"}(t=e.PlansEnum||(e.PlansEnum={}))}(s=t.InstallmentOption||(t.InstallmentOption={}))},78604:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AfterpayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AfterpayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"billingAddress",baseName:"billingAddress",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"string"},{name:"personalDetails",baseName:"personalDetails",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"AfterpayDetails.TypeEnum"}],function(e){let t;!function(e){e.AfterpayDefault="afterpay_default",e.Afterpaytouch="afterpaytouch",e.AfterpayB2b="afterpay_b2b",e.Clearpay="clearpay"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.AfterpayDetails||(t.AfterpayDetails={}))},78707:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"accountInfo",baseName:"accountInfo",type:"AccountInfo"},{name:"additionalAmount",baseName:"additionalAmount",type:"Amount"},{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"authenticationData",baseName:"authenticationData",type:"AuthenticationData"},{name:"billingAddress",baseName:"billingAddress",type:"BillingAddress"},{name:"browserInfo",baseName:"browserInfo",type:"BrowserInfo"},{name:"captureDelayHours",baseName:"captureDelayHours",type:"number"},{name:"channel",baseName:"channel",type:"PaymentRequest.ChannelEnum"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"company",baseName:"company",type:"Company"},{name:"conversionId",baseName:"conversionId",type:"string"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"dateOfBirth",baseName:"dateOfBirth",type:"Date"},{name:"dccQuote",baseName:"dccQuote",type:"ForexQuote"},{name:"deliverAt",baseName:"deliverAt",type:"Date"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"DeliveryAddress"},{name:"deliveryDate",baseName:"deliveryDate",type:"Date"},{name:"deviceFingerprint",baseName:"deviceFingerprint",type:"string"},{name:"enableOneClick",baseName:"enableOneClick",type:"boolean"},{name:"enablePayOut",baseName:"enablePayOut",type:"boolean"},{name:"enableRecurring",baseName:"enableRecurring",type:"boolean"},{name:"entityType",baseName:"entityType",type:"PaymentRequest.EntityTypeEnum"},{name:"fraudOffset",baseName:"fraudOffset",type:"number"},{name:"fundOrigin",baseName:"fundOrigin",type:"FundOrigin"},{name:"fundRecipient",baseName:"fundRecipient",type:"FundRecipient"},{name:"industryUsage",baseName:"industryUsage",type:"PaymentRequest.IndustryUsageEnum"},{name:"installments",baseName:"installments",type:"Installments"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"localizedShopperStatement",baseName:"localizedShopperStatement",type:"{ [key: string]: string; }"},{name:"mandate",baseName:"mandate",type:"Mandate"},{name:"mcc",baseName:"mcc",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantOrderReference",baseName:"merchantOrderReference",type:"string"},{name:"merchantRiskIndicator",baseName:"merchantRiskIndicator",type:"MerchantRiskIndicator"},{name:"metadata",baseName:"metadata",type:"{ [key: string]: string; }"},{name:"mpiData",baseName:"mpiData",type:"ThreeDSecureData"},{name:"order",baseName:"order",type:"EncryptedOrderData"},{name:"orderReference",baseName:"orderReference",type:"string"},{name:"origin",baseName:"origin",type:"string"},{name:"paymentMethod",baseName:"paymentMethod",type:"AchDetails | AfterpayDetails | AmazonPayDetails | AncvDetails | AndroidPayDetails | ApplePayDetails | BacsDirectDebitDetails | BillDeskDetails | BlikDetails | CardDetails | CashAppDetails | CellulantDetails | DokuDetails | DotpayDetails | DragonpayDetails | EcontextVoucherDetails | GenericIssuerPaymentMethodDetails | GiropayDetails | GooglePayDetails | IdealDetails | KlarnaDetails | MasterpassDetails | MbwayDetails | MobilePayDetails | MolPayDetails | OpenInvoiceDetails | PayPalDetails | PayUUpiDetails | PayWithGoogleDetails | PaymentDetails | RatepayDetails | SamsungPayDetails | SepaDirectDebitDetails | StoredPaymentMethodDetails | UpiCollectDetails | UpiIntentDetails | VippsDetails | VisaCheckoutDetails | WeChatPayDetails | WeChatPayMiniProgramDetails | ZipDetails | null"},{name:"platformChargebackLogic",baseName:"platformChargebackLogic",type:"PlatformChargebackLogic"},{name:"recurringExpiry",baseName:"recurringExpiry",type:"string"},{name:"recurringFrequency",baseName:"recurringFrequency",type:"string"},{name:"recurringProcessingModel",baseName:"recurringProcessingModel",type:"PaymentRequest.RecurringProcessingModelEnum"},{name:"redirectFromIssuerMethod",baseName:"redirectFromIssuerMethod",type:"string"},{name:"redirectToIssuerMethod",baseName:"redirectToIssuerMethod",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"returnUrl",baseName:"returnUrl",type:"string"},{name:"riskData",baseName:"riskData",type:"RiskData"},{name:"sessionValidity",baseName:"sessionValidity",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperIP",baseName:"shopperIP",type:"string"},{name:"shopperInteraction",baseName:"shopperInteraction",type:"PaymentRequest.ShopperInteractionEnum"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"shopperStatement",baseName:"shopperStatement",type:"string"},{name:"socialSecurityNumber",baseName:"socialSecurityNumber",type:"string"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"store",baseName:"store",type:"string"},{name:"storePaymentMethod",baseName:"storePaymentMethod",type:"boolean"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"threeDS2RequestData",baseName:"threeDS2RequestData",type:"ThreeDS2RequestFields"},{name:"threeDSAuthenticationOnly",baseName:"threeDSAuthenticationOnly",type:"boolean"},{name:"trustedShopper",baseName:"trustedShopper",type:"boolean"}],function(e){let t,s,i,a,n;!function(e){e.IOs="iOS",e.Android="Android",e.Web="Web"}(t=e.ChannelEnum||(e.ChannelEnum={})),function(e){e.NaturalPerson="NaturalPerson",e.CompanyName="CompanyName"}(s=e.EntityTypeEnum||(e.EntityTypeEnum={})),function(e){e.DelayedCharge="delayedCharge",e.Installment="installment",e.NoShow="noShow"}(i=e.IndustryUsageEnum||(e.IndustryUsageEnum={})),function(e){e.CardOnFile="CardOnFile",e.Subscription="Subscription",e.UnscheduledCardOnFile="UnscheduledCardOnFile"}(a=e.RecurringProcessingModelEnum||(e.RecurringProcessingModelEnum={})),function(e){e.Ecommerce="Ecommerce",e.ContAuth="ContAuth",e.Moto="Moto",e.Pos="POS"}(n=e.ShopperInteractionEnum||(e.ShopperInteractionEnum={}))}(s=t.PaymentRequest||(t.PaymentRequest={}))},78832:(e,t,s)=>{s.d(t,{P2:()=>n});var i,a=s(54738);async function n(){try{return await h.open()}catch(e){return Promise.resolve(new d)}}class r{constructor(e){this.next=()=>this.queue.pop(),this.queue=[new a.wc];let t=this.queue[0];e.onsuccess=()=>{const s=e.result;s?(t.resolve({done:!1,value:s.value}),t=new a.wc,this.queue.unshift(t),s.continue()):t.resolve({done:!0,value:void 0})},e.onerror=()=>{t.reject(e.error)}}[Symbol.asyncIterator](){return this}}class o{constructor(e){this.inner=e}static bound(e,t,s=!1,i=!1){return new o(IDBKeyRange.bound(e,t,s,i))}static lowerBound(e,t){return new o(IDBKeyRange.lowerBound(e,t))}static upperBound(e,t){return new o(IDBKeyRange.upperBound(e,t))}static only(e){return new o(IDBKeyRange.only(e))}static unwrap(e){return e instanceof o?e.inner:e}}class h{constructor(e){this.underlying=e}static availiable(){return!navigator.userAgent.includes("Edge")&&!!window.indexedDB}transaction(e,...t){const s=this.underlying.transaction(t,e);return t.map(e=>new c(s.objectStore(e)))}}i=h,h.open=async()=>i.availiable()?new Promise((e,t)=>{const s=window.indexedDB.open("pixlr",2);s.onupgradeneeded=e=>{const t=s.result;0===e.oldVersion?(t.createObjectStore("blobs"),t.createObjectStore("fonts"),t.createObjectStore("document-meta",{keyPath:"id"}),t.createObjectStore("document-selection"),t.createObjectStore("document-thumbnail"),t.createObjectStore("layer-meta",{keyPath:"id"}).createIndex("document","document"),t.createObjectStore("layer-mask"),t.createObjectStore("layer-bitmap")):t.deleteObjectStore("history")},s.onerror=e=>t(s.error),s.onsuccess=()=>e(new i(s.result))}):Promise.reject(new Error("Browser does not support indexedDB"));class c{constructor(e){this.underlying=e}get(e){return new Promise((t,s)=>{const i=this.underlying.get(e);i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}getAll(e,t){return new Promise((s,i)=>{const a=this.underlying.getAll(o.unwrap(e),t);a.onsuccess=()=>s(a.result),a.onerror=()=>i(a.error)})}iterate(e,t){const s=this.underlying.openCursor(o.unwrap(e),t);return new r(s)}index(e){const t=this.underlying.index(e);return new l(t)}cursor(e,t,s){return new Promise((i,a)=>{const n=this.underlying.openCursor(o.unwrap(t),s);n.onsuccess=()=>{const t=n.result;if(t){const s=e(t.value,t);"number"==typeof s?t.advance(s):!1!==s?t.continue():i()}else i()},n.onerror=()=>a(n.error)})}put(e,t){return new Promise((s,i)=>{const a=this.underlying.put(e,t);a.onsuccess=()=>{s()},a.onerror=()=>{i(a.error)}})}add(e,t){return new Promise((s,i)=>{const a=this.underlying.add(e,t);a.onsuccess=()=>{s()},a.onerror=()=>{i(a.error)}})}clear(){return new Promise((e,t)=>{let s=this.underlying.clear();s.onsuccess=()=>e(),s.onerror=()=>t(s.error)})}count(e){return new Promise((t,s)=>{let i;i=void 0===e?this.underlying.count():this.underlying.count(o.unwrap(e)),i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}delete(e){return new Promise((t,s)=>{const i=this.underlying.delete(o.unwrap(e));i.onsuccess=()=>t(),i.onerror=()=>s(i.error)})}}class l{constructor(e){this.underlying=e,this.name=e.name,this.keyPath=e.keyPath,this.multiEntry=e.multiEntry,this.unique=e.unique}get(e){return new Promise((t,s)=>{const i=this.underlying.get(e);i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}getAll(e,t){return new Promise((s,i)=>{const a=this.underlying.getAll(o.unwrap(e),t);a.onsuccess=()=>s(a.result),a.onerror=()=>i(a.error)})}count(e){return new Promise((t,s)=>{let i;i=void 0===e?this.underlying.count():this.underlying.count(o.unwrap(e)),i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})}cursor(e,t,s){return new Promise((i,a)=>{const n=this.underlying.openCursor(o.unwrap(t),s);n.onsuccess=()=>{const t=n.result;t?(e(t.value,t),t.continue()):i()},n.onerror=()=>a(n.error)})}iterate(e,t){const s=this.underlying.openCursor(o.unwrap(e),t);return new r(s)}getAllKeys(e,t){return new Promise((s,i)=>{const a=this.underlying.getAllKeys(o.unwrap(e),t);a.onsuccess=()=>s(a.result),a.onerror=()=>i(a.error)})}}class d{transaction(e,...t){return t.map(e=>new p(e))}}class p{constructor(e){this.name=e}index(e){return this}put(e,t){}add(e,t){}clear(){}delete(e){}async get(e){}async getAll(e,t){return[]}async count(e){return 0}async cursor(e,t,s){}iterate(e,t){return{next:()=>Promise.resolve({done:!0,value:void 0}),[Symbol.asyncIterator](){return this}}}}},78861:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDS2RequestFields=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ThreeDS2RequestFields=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"acctInfo",baseName:"acctInfo",type:"AcctInfo"},{name:"acctType",baseName:"acctType",type:"ThreeDS2RequestFields.AcctTypeEnum"},{name:"acquirerBIN",baseName:"acquirerBIN",type:"string"},{name:"acquirerMerchantID",baseName:"acquirerMerchantID",type:"string"},{name:"addrMatch",baseName:"addrMatch",type:"ThreeDS2RequestFields.AddrMatchEnum"},{name:"authenticationOnly",baseName:"authenticationOnly",type:"boolean"},{name:"challengeIndicator",baseName:"challengeIndicator",type:"ThreeDS2RequestFields.ChallengeIndicatorEnum"},{name:"deviceRenderOptions",baseName:"deviceRenderOptions",type:"DeviceRenderOptions"},{name:"homePhone",baseName:"homePhone",type:"Phone"},{name:"mcc",baseName:"mcc",type:"string"},{name:"merchantName",baseName:"merchantName",type:"string"},{name:"messageVersion",baseName:"messageVersion",type:"string"},{name:"mobilePhone",baseName:"mobilePhone",type:"Phone"},{name:"notificationURL",baseName:"notificationURL",type:"string"},{name:"payTokenInd",baseName:"payTokenInd",type:"boolean"},{name:"paymentAuthenticationUseCase",baseName:"paymentAuthenticationUseCase",type:"string"},{name:"purchaseInstalData",baseName:"purchaseInstalData",type:"string"},{name:"recurringExpiry",baseName:"recurringExpiry",type:"string"},{name:"recurringFrequency",baseName:"recurringFrequency",type:"string"},{name:"sdkAppID",baseName:"sdkAppID",type:"string"},{name:"sdkEphemPubKey",baseName:"sdkEphemPubKey",type:"SDKEphemPubKey"},{name:"sdkMaxTimeout",baseName:"sdkMaxTimeout",type:"number"},{name:"sdkReferenceNumber",baseName:"sdkReferenceNumber",type:"string"},{name:"sdkTransID",baseName:"sdkTransID",type:"string"},{name:"threeDSCompInd",baseName:"threeDSCompInd",type:"string"},{name:"threeDSRequestorAuthenticationInd",baseName:"threeDSRequestorAuthenticationInd",type:"string"},{name:"threeDSRequestorAuthenticationInfo",baseName:"threeDSRequestorAuthenticationInfo",type:"ThreeDSRequestorAuthenticationInfo"},{name:"threeDSRequestorChallengeInd",baseName:"threeDSRequestorChallengeInd",type:"ThreeDS2RequestFields.ThreeDSRequestorChallengeIndEnum"},{name:"threeDSRequestorID",baseName:"threeDSRequestorID",type:"string"},{name:"threeDSRequestorName",baseName:"threeDSRequestorName",type:"string"},{name:"threeDSRequestorPriorAuthenticationInfo",baseName:"threeDSRequestorPriorAuthenticationInfo",type:"ThreeDSRequestorPriorAuthenticationInfo"},{name:"threeDSRequestorURL",baseName:"threeDSRequestorURL",type:"string"},{name:"transType",baseName:"transType",type:"ThreeDS2RequestFields.TransTypeEnum"},{name:"transactionType",baseName:"transactionType",type:"ThreeDS2RequestFields.TransactionTypeEnum"},{name:"whiteListStatus",baseName:"whiteListStatus",type:"string"},{name:"workPhone",baseName:"workPhone",type:"Phone"}],function(e){let t,s,i,a,n,r;!function(e){e._01="01",e._02="02",e._03="03"}(t=e.AcctTypeEnum||(e.AcctTypeEnum={})),function(e){e.Y="Y",e.N="N"}(s=e.AddrMatchEnum||(e.AddrMatchEnum={})),function(e){e.NoPreference="noPreference",e.RequestNoChallenge="requestNoChallenge",e.RequestChallenge="requestChallenge",e.RequestChallengeAsMandate="requestChallengeAsMandate"}(i=e.ChallengeIndicatorEnum||(e.ChallengeIndicatorEnum={})),function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05",e._06="06"}(a=e.ThreeDSRequestorChallengeIndEnum||(e.ThreeDSRequestorChallengeIndEnum={})),function(e){e._01="01",e._03="03",e._10="10",e._11="11",e._28="28"}(n=e.TransTypeEnum||(e.TransTypeEnum={})),function(e){e.GoodsOrServicePurchase="goodsOrServicePurchase",e.CheckAcceptance="checkAcceptance",e.AccountFunding="accountFunding",e.QuasiCashTransaction="quasiCashTransaction",e.PrepaidActivationAndLoad="prepaidActivationAndLoad"}(r=e.TransactionTypeEnum||(e.TransactionTypeEnum={}))}(s=t.ThreeDS2RequestFields||(t.ThreeDS2RequestFields={}))},79049:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentRefundRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentRefundRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantRefundReason",baseName:"merchantRefundReason",type:"PaymentRefundRequest.MerchantRefundReasonEnum | null"},{name:"reference",baseName:"reference",type:"string"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"store",baseName:"store",type:"string"}],function(e){let t;!function(e){e.Fraud="FRAUD",e.CustomerRequest="CUSTOMER REQUEST",e.Return="RETURN",e.Duplicate="DUPLICATE",e.Other="OTHER"}(t=e.MerchantRefundReasonEnum||(e.MerchantRefundReasonEnum={}))}(s=t.PaymentRefundRequest||(t.PaymentRefundRequest={}))},79453:(e,t,s)=>{s.d(t,{N:()=>a});var i=s(42268);const a=function(){let e;const t=(0,i.Ay)("current_user");if(t&&"null"!==t.innerText)try{e=JSON.parse(t.innerText)}catch(a){console.error("Could not read user data json")}const s=new URL(location.href);return e&&"pixlr.com"!==s.hostname&&"true"===s.searchParams.get("premium")&&(e.subscription=!0,e.subscriptionAccess="premium"),e}()},79522:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(42268),a=s(75770);class n extends a.A{constructor(e){super("hand",e),this.stage=e,this.z1x=()=>{this.stage.setZoom("1")},this.fit=()=>{this.stage.setZoom("fit")},this.fill=()=>{this.stage.setZoom("fill")},this.cleanUp=()=>{this.stage.coating.removePan(),(0,i.Ay)("hand-1x").removeEventListener("click",this.z1x,!1),(0,i.Ay)("hand-fit").removeEventListener("click",this.fit,!1),(0,i.Ay)("hand-fill").removeEventListener("click",this.fill,!1)},(0,i.Ay)("hand-1x").addEventListener("click",this.z1x,!1),(0,i.Ay)("hand-fit").addEventListener("click",this.fit,!1),(0,i.Ay)("hand-fill").addEventListener("click",this.fill,!1),this.stage.coating.setPan()}}},79809:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseAdditionalDataSepa=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponseAdditionalDataSepa=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"sepadirectdebit_dateOfSignature",baseName:"sepadirectdebit.dateOfSignature",type:"string"},{name:"sepadirectdebit_mandateId",baseName:"sepadirectdebit.mandateId",type:"string"},{name:"sepadirectdebit_sequenceType",baseName:"sepadirectdebit.sequenceType",type:"string"}]},80422:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MerchantRiskIndicator=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.MerchantRiskIndicator=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"addressMatch",baseName:"addressMatch",type:"boolean"},{name:"deliveryAddressIndicator",baseName:"deliveryAddressIndicator",type:"MerchantRiskIndicator.DeliveryAddressIndicatorEnum"},{name:"deliveryEmail",baseName:"deliveryEmail",type:"string"},{name:"deliveryEmailAddress",baseName:"deliveryEmailAddress",type:"string"},{name:"deliveryTimeframe",baseName:"deliveryTimeframe",type:"MerchantRiskIndicator.DeliveryTimeframeEnum"},{name:"giftCardAmount",baseName:"giftCardAmount",type:"Amount"},{name:"giftCardCount",baseName:"giftCardCount",type:"number"},{name:"giftCardCurr",baseName:"giftCardCurr",type:"string"},{name:"preOrderDate",baseName:"preOrderDate",type:"Date"},{name:"preOrderPurchase",baseName:"preOrderPurchase",type:"boolean"},{name:"preOrderPurchaseInd",baseName:"preOrderPurchaseInd",type:"string"},{name:"reorderItems",baseName:"reorderItems",type:"boolean"},{name:"reorderItemsInd",baseName:"reorderItemsInd",type:"string"},{name:"shipIndicator",baseName:"shipIndicator",type:"string"}],function(e){let t,s;!function(e){e.ShipToBillingAddress="shipToBillingAddress",e.ShipToVerifiedAddress="shipToVerifiedAddress",e.ShipToNewAddress="shipToNewAddress",e.ShipToStore="shipToStore",e.DigitalGoods="digitalGoods",e.GoodsNotShipped="goodsNotShipped",e.Other="other"}(t=e.DeliveryAddressIndicatorEnum||(e.DeliveryAddressIndicatorEnum={})),function(e){e.ElectronicDelivery="electronicDelivery",e.SameDayShipping="sameDayShipping",e.OvernightShipping="overnightShipping",e.TwoOrMoreDaysShipping="twoOrMoreDaysShipping"}(s=e.DeliveryTimeframeEnum||(e.DeliveryTimeframeEnum={}))}(s=t.MerchantRiskIndicator||(t.MerchantRiskIndicator={}))},80811:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentCaptureRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentCaptureRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"platformChargebackLogic",baseName:"platformChargebackLogic",type:"PlatformChargebackLogic"},{name:"reference",baseName:"reference",type:"string"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"subMerchants",baseName:"subMerchants",type:"Array<SubMerchantInfo>"}]},80953:(e,t,s)=>{s.d(t,{l:()=>w,z:()=>A});var i=s(78832),a=s(54738),n=s(6395),r=s(40963),o=s(54127),h=s(39989),c=s(58489),l=s(86445),d=s(10122),p=s(22866),u=s(89209),m=s(35475),g=s(14983),y=s(37699),v=s(52038),f=s(27029),b=s(13947);class w{constructor(e,t,s,i,a,n,r){this.name=t,this.width=s,this.height=i,this.color=a,this.animation=r,this.templateMeta=n,this.id=e,this.lastModified=new Date,this.pinned=!1,this.timeoutId=null}async restore(e){const t=await(0,i.P2)();try{const[s,i]=t.transaction("readonly","layer-meta","document-selection"),[n,o]=await Promise.all([s.index("document").getAll(this.id),i.get(this.id)]);this.order||(this.order=n.sort((e,t)=>e.order-t.order).map(e=>e.id));let h=[];if(this.order.forEach(e=>{const t=n.find(t=>t.id===e);t&&("bitmap"===t.type&&(t.type=p.A.TYPE_IMAGE),t.settings.rotation&&t.rect&&void 0===t.rect.rotation&&(t.rect.rotation=t.settings.rotation),t.rect&&void 0===t.rect.rotation&&(t.rect=new r.A(t.rect.x,t.rect.y,t.rect.width,t.rect.height,0)),h.push(t))}),h.length!==n.length){console.warn("Had layers that could not be sorted, this is a problem");const e=n.filter(e=>!this.order.includes(e.id));h=h.concat(e)}if(o){e.addSelection();const t=e.selection;t.mask=await a.lz(o),t.ctx=t.mask.getContext("2d"),t.createOutline()}const c=await Promise.all(h.map(async e=>{const s=a.bD(A,e),[i,n]=t.transaction("readonly","layer-bitmap","layer-mask"),[r,o]=await Promise.all([i.get(s.id),n.get(s.id)]);return s.toLayer(r,o)}));c.forEach(t=>e.layers.push(t))}catch(s){throw console.error("Restore",s),s}}async save(){const e=await(0,i.P2)(),[t]=e.transaction("readwrite","document-meta");await t.put(this)}async remove(){const e=await(0,i.P2)(),[t,s,a,n,r,o]=e.transaction("readwrite","document-meta","document-thumbnail","document-selection","layer-meta","layer-mask","layer-bitmap"),h=[t.delete(this.id),s.delete(this.id),a.delete(this.id)],c=await n.index("document").getAll(this.id);for(let i=0;i<c.length;i++){const e=c[i];h.push(n.delete(e.id)),h.push(o.delete(e.id)),h.push(r.delete(e.id))}await Promise.all(h)}async pendingRemove(e){const t=setTimeout(async()=>{await this.remove(),e(null,this)},5e3);this.timeoutId=t}async undoRemove(){clearTimeout(this.timeoutId)}static async saveOrder(e){const t=e.layers.map(e=>e.id),s=await(0,i.P2)(),[a]=s.transaction("readwrite","document-meta"),n=await a.get(e.id);n.order=t,await a.put(n)}static async duplicate(e){const t=await(0,i.P2)(),[s,n,r,o,h,c]=t.transaction("readwrite","document-meta","document-thumbnail","document-selection","layer-meta","layer-mask","layer-bitmap"),l=a.Os(),d=[(async()=>{const t=await n.get(e);t&&await n.add(t,l)})(),(async()=>{const t=await r.get(e);t&&await r.add(t,l)})()],p=await o.index("document").getAll(e),u={};for(let i=0;i<p.length;i++){const e=p[i],t=e.id,s=a.Os();u[t]=s,d.push((async()=>{e.id=s,e.document=l,await o.add(e)})(),(async()=>{const e=await c.get(t);e&&await c.add(e,s)})(),(async()=>{const e=await h.get(t);e&&await h.add(e,s)})())}d.push((async()=>{const t=await s.get(e);t.id=l,t.pinned=!1,t.order=t.order.map(e=>u[e]),t.lastModified=new Date,await s.add(t)})()),await Promise.all(d)}static async deleteAll(){const e=await(0,i.P2)(),[t]=e.transaction("readwrite","document-meta"),s=await t.getAll();for(let i=0;i<s.length;i++){const e=a.bD(w,s[i]);e.pinned||await e.remove()}}async getThumbnail(){const e=await(0,i.P2)(),[t]=e.transaction("readonly","document-thumbnail"),s=await t.get(this.id);return s?"string"==typeof s?(0,n.kw)(s):(0,n.Ep)(s):Promise.resolve(void 0)}static async getAll(){const e=await(0,i.P2)(),[t]=e.transaction("readonly","document-meta");return(await t.getAll()).map(e=>a.bD(w,e))}static async history(){return w.getAll().then(e=>e.sort((e,t)=>e.lastModified===t.lastModified?0:e.lastModified<t.lastModified?1:-1))}static async getByID(e){const t=await(0,i.P2)(),[s]=t.transaction("readonly","document-meta"),n=await s.get(e);return a.bD(w,n)}async pin(){this.pinned=!0,await this.save()}async unpin(){this.pinned=!1,await this.save()}}class A{constructor(e,t){this.order=0,this.id=e.id,this.type=e.type,this.document=t,this.settings=e.settings,this.animation=e.animation,this.rect=e.rect,this.trim=e.trim,e instanceof o.A&&(this.textSettings=e.textSettings,this.text=e.text),e instanceof d.A&&(this.url=e.url,this.variant=e.variant,this.scalemethod=e.scalemethod),e instanceof l.A&&(this.shapeSettings=e.shapeSettings),e instanceof c.A&&(this.frameSettings=e.frameSettings),e instanceof b.A&&(this.groupSettings=e.groupSettings)}async toLayer(e,t){const s="string"==typeof e?await a.$e(e):await a.lz(e),i="string"==typeof t?await a.$e(t):await a.lz(t);switch(this.type){case p.A.TYPE_IMAGE:{const e=new h.A(this.id,this.settings.name,s,a.bD(r.A,this.rect),this.settings.locked);return i&&(e.mask=i,e.render()),e.settings=this.settings,e.animation=a.bD(v.A,this.animation),e}case p.A.TYPE_ELEMENT:{const e=new d.A(this.id,this.settings.name,s,this.url,this.variant,this.settings.blendmode,this.scalemethod);return e.settings=this.settings,e.rect=a.bD(r.A,this.rect),e.animation=a.bD(v.A,this.animation),e}case p.A.TYPE_TEXT:{const e=new o.A(this.id,this.text,a.bD(r.A,this.rect),a.bD(u.A,this.textSettings));return e.settings=this.settings,e.animation=a.bD(v.A,this.animation),await y.A.loadFont(this.textSettings.font),await e.prepare(),e}case p.A.TYPE_SHAPE:{const e=new l.A(this.id,this.settings.name,a.bD(r.A,this.rect),a.bD(g.A,this.shapeSettings));return e.settings=this.settings,e.animation=a.bD(v.A,this.animation),await e.prepare(),e}case p.A.TYPE_FRAME:{const e=new c.A(this.id,this.settings.name,a.bD(r.A,this.rect),a.bD(m.A,this.frameSettings));return e.canvas=s,e.settings=this.settings,e.trim=a.bD(r.A,this.trim),e.animation=a.bD(v.A,this.animation),e.canvas&&e.render(),e}case p.A.TYPE_GROUP:{const e=new b.A(this.id,this.settings.name,a.bD(f.A,this.groupSettings));return e.settings=this.settings,e.animation=a.bD(v.A,this.animation),e}}}static async delete(e){const t=await(0,i.P2)();let[s,a,n]=t.transaction("readwrite","layer-bitmap","layer-meta","layer-mask");await Promise.all([s.delete(e),a.delete(e),n.delete(e)])}static async sync(e,t){if(!t.hasLayer(e))throw new Error("This is probably a bug, cant create layermeta from layer not in the fresco");const s=new A(e,t.id);let n=!1;if(e.type===p.A.TYPE_IMAGE||e.type===p.A.TYPE_ELEMENT?n=e.rect&&e.rect.isSet()&&!!e.canvas||!e.rect&&!e.canvas:e.type===p.A.TYPE_FRAME&&(n=e.trim&&e.trim.isSet()&&!!e.canvas||!e.trim&&!e.canvas),n){const[t,n]=await Promise.all([a.PG(e.canvas),a.PG(e.mask)]),r=await(0,i.P2)();let[o,h,c]=r.transaction("readwrite","layer-bitmap","layer-meta","layer-mask");await Promise.all([h.put(s),t?o.put(t,s.id):o.delete(s.id),n?c.put(n,s.id):c.delete(s.id)])}else{const e=await(0,i.P2)();let[t]=e.transaction("readwrite","layer-meta");await t.put(s)}e.syncLatest=new Date}}},81551:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(21742),a=s(42268),n=s(82042),r=s(2215),o=s(54738);class h extends r.A{constructor(e){super(e,(0,i.A)("titleZoomBlur")),this.update=o.eD(50,()=>{const e={x:this.x.getValue(),y:1-this.y.getValue(),amount:this.amount.getValue()};this.change("zoom",e.amount?e:void 0)}),this.kind="zoom",this.setContent((0,a.T)("div",{id:"zoom-amount"}),(0,a.T)("div",{id:"zoom-x",className:"top-10"}),(0,a.T)("div",{id:"zoom-y",className:"top-10"})),this.amount=new n.A("zoom-amount",{label:(0,i.A)("amount"),range:[0,1],defaultValue:.2,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.x=new n.A("zoom-x",{label:"X",range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.y=new n.A("zoom-y",{label:"Y",range:[0,1],defaultValue:.5,step:.01,labelFormat:e=>`${Math.round(100*e)}%`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.update()}}},81718:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(1177);class a{constructor(e,t,s){this.uniform={},this.attribute={},this.texture=new Map,this.program=e.createProgram(),e.attachShader(this.program,this.compile(e,t,e.VERTEX_SHADER)),e.attachShader(this.program,this.compile(e,s,e.FRAGMENT_SHADER)),e.linkProgram(this.program),e.useProgram(this.program),e.getProgramParameter(this.program,e.LINK_STATUS)||console.log(e.getProgramInfoLog(this.program));const a=this.collect(t,"attribute");for(const[i,c]of a)this.attribute[i]=e.getAttribLocation(this.program,i);let n=[];const r=this.collect(t,"uniform");for(const[i,c]of r)this.uniform[i]=e.getUniformLocation(this.program,i);const o=this.collect(s,"uniform");for(const[i,c]of o)this.uniform[i]=e.getUniformLocation(this.program,i),"sampler2D"===c&&n.push(i);for(var h in n){let t=n[h],s=e.getUniformLocation(this.program,t);"texture"===t?(e.uniform1i(s,0),this.texture.set(0,new i.A(t))):(e.uniform1i(s,1),this.texture.set(1,new i.A(t)))}}collect(e,t){const s=[],i=new RegExp("\\b"+t+" (\\w+) (\\w+)","ig");return e.replace(i,function(e,t,i){return s.push([i,t]),e}),s}compile(e,t,s){var i=e.createShader(s);return e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.log(e.getShaderInfoLog(i)),console.log(t),null)}getTextureById(e){let t=null;return this.texture.forEach(function(s){s.id!==e||(t=s)}),t||(console.error("Having no texture that is named `%s`.",e),null)}destroy(e){e.deleteProgram(this.program),this.texture.forEach(function(t){t.destroy(e)}),this.texture.clear()}}},81857:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UtilityResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.UtilityResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"originKeys",baseName:"originKeys",type:"{ [key: string]: string; }"}]},81937:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(42268);class a{constructor(e){for(this.scrollTop=()=>{this.content.scrollTo(0,0)},this.moveBar=e=>{let t=this.content.scrollHeight,s=this.content.clientHeight;if(this.scrollRatio=s/t,this.scrollRatio>=1)this.bar.classList.add("ss-hidden");else{this.bar.classList.remove("ss-hidden");const e=Math.max(this.scrollRatio*s,20),i=this.content.scrollTop/(t-s)*(s-e);this.bar.style.cssText="height:"+e+"px; top:"+i+"px"}},e.classList.add("ss-wrapper"),this.content=(0,i.T)("div",{id:e.id+"-ss-content",className:"ss-content"});e.firstChild;)this.content.appendChild(e.firstChild);e.appendChild(this.content),this.bar=(0,i.T)("div",{className:"ss-scroll"}),e.append(this.bar);let t=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var t=e.pageY-this.lastPageY;this.lastPageY=e.pageY,this.content.scrollTop+=t/this.scrollRatio},s=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),document.removeEventListener("mousemove",t,!0),document.removeEventListener("mouseup",s,!0)};this.bar.addEventListener("mousedown",e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.lastPageY=e.pageY,document.addEventListener("mousemove",t,!0),document.addEventListener("mouseup",s,!0)},!0),this.moveBar(null),window.addEventListener("resize",this.moveBar),this.content.addEventListener("click",this.moveBar),this.content.addEventListener("scroll",this.moveBar),this.content.addEventListener("mouseenter",this.moveBar)}}},81989:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethod=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentMethod=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"brand",baseName:"brand",type:"string"},{name:"brands",baseName:"brands",type:"Array<string>"},{name:"configuration",baseName:"configuration",type:"{ [key: string]: string; }"},{name:"fundingSource",baseName:"fundingSource",type:"PaymentMethod.FundingSourceEnum"},{name:"group",baseName:"group",type:"PaymentMethodGroup"},{name:"inputDetails",baseName:"inputDetails",type:"Array<InputDetail>"},{name:"issuers",baseName:"issuers",type:"Array<PaymentMethodIssuer>"},{name:"name",baseName:"name",type:"string"},{name:"type",baseName:"type",type:"string"}],function(e){let t;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={}))}(s=t.PaymentMethod||(t.PaymentMethod={}))},81993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeliveryMethod=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.DeliveryMethod=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"description",baseName:"description",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"selected",baseName:"selected",type:"boolean"},{name:"type",baseName:"type",type:"DeliveryMethod.TypeEnum"}],function(e){let t;!function(e){e.Shipping="Shipping"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.DeliveryMethod||(t.DeliveryMethod={}))},82042:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(21742),a=s(54738),n=s(42268);const r={step:[.01],range:[0,1],stops:[0,1],compact:!1,force:!1,defaultValue:0,labelFormat:e=>String(e),labelParse:e=>parseInt(e,10)};class o{constructor(e,t={}){if(this.findElements=()=>{this.outlet=this.container.querySelector("input"),this.slider=this.container.querySelector(".slider"),this.diff=this.container.querySelector(".slider .diff"),this.label=this.container.querySelector(".info label"),this.hold=this.container.querySelector(".slider-holder"),this.bound=this.container.querySelector(".slider-holder .bound"),this.knob=this.container.querySelector(".slider-holder .bound .knob")},this.buildElements=()=>{this.container.classList.add("range-box"),this.label=document.createElement("label"),this.label.innerText=(this.options.label||this.name)+" ",this.outlet=document.createElement("input"),this.outlet.type="text",this.outlet.autocomplete="off",this.outlet.value=this.options.labelFormat(this.options.defaultValue);const e=document.createElement("div");e.className="info",e.appendChild(this.label),e.appendChild(this.outlet),this.knob=document.createElement("div"),this.knob.innerHTML="<div></div>",this.knob.className="knob",this.bound=(0,n.T)("div",{className:"bound"},this.knob),this.diff=(0,n.T)("div",{className:"diff"}),this.slider=(0,n.T)("div",{className:"slider"},this.diff),this.hold=(0,n.T)("div",{className:"slider-holder"},this.slider,this.bound),this.container.appendChild(e),this.container.appendChild(this.hold)},this.labelOver=()=>{this.value!==this.options.defaultValue&&(this.label.innerText=(0,i.A)("reset")+" ")},this.labelOut=()=>{this.label.innerText=(this.options.label||this.name)+" "},this.labelClick=()=>{if(this.value===this.options.defaultValue)return;const e=this.value;this.options.onStart&&this.options.onStart(this.value,this.name),this.reset(),this.options.onChange&&this.options.onChange(this.value,this.name),this.options.onEnd&&this.options.onEnd(this.value,e,this.name)},this.sliderMouseDown=e=>{e.preventDefault(),e.stopPropagation(),this.knobDown(e),this.move(e.clientX)},this.knobDown=e=>{document.addEventListener("mousemove",this.knobMouseMove,!1),document.addEventListener("touchmove",this.knobTouchMove,{passive:!1}),document.addEventListener("mouseup",this.knobUp,!0),document.addEventListener("touchend",this.knobUp,{passive:!1}),this.knob.classList.add("grabbed"),e.preventDefault(),e.stopPropagation(),this.downValue=this.value,this.options.onStart&&setTimeout(()=>this.options.onStart(this.downValue,this.name),0)},this.move=e=>{const t=this.bound.getBoundingClientRect();if(e<=t.left)return void this.setAmount(0);if(e>=t.right)return void this.setAmount(1);const s=(e-t.left)/t.width;this.setAmount(s)},this.knobMouseMove=e=>{e.preventDefault(),e.stopPropagation(),this.move(e.clientX)},this.knobTouchMove=e=>{e.preventDefault(),e.stopPropagation(),this.move(e.touches[0].clientX)},this.knobUp=()=>{if(document.removeEventListener("mousemove",this.knobMouseMove,!1),document.removeEventListener("touchmove",this.knobTouchMove),document.removeEventListener("mouseup",this.knobUp,!0),document.removeEventListener("touchend",this.knobUp),this.knob.classList.remove("grabbed"),this.options.onEnd&&(this.options.force||this.downValue!==this.value)){const e=this.downValue;this.downValue=this.value,setTimeout(()=>this.options.onEnd(this.value,e,this.name),0)}},this.outletKeyUp=e=>{const t=this.options.labelParse(this.outlet.value);if(isNaN(t))return;const s=this.options.range[0],i=this.options.range[this.options.range.length-1],a=Math.max(Math.min(t,i),s);this.value=a,this.hold.classList.toggle("changed",this.isChanged()),this.diff.style.backgroundImage=this.generateDiff(this.options.defaultValue,this.value);const n=this.calculateAmount(this.value);this.setKnob(100*n),this.options.onChange&&void 0!==e&&setTimeout(()=>this.options.onChange(this.value,this.name),0)},this.outletFocus=e=>{if(this.options.onStart&&(this.downValue=this.value,this.options.onStart(this.value,this.name)),this.options.compact){this.hold.style.display="flex";const e=a.oR(this.container);this.hold.style.left=e.x+this.container.offsetWidth-this.hold.offsetWidth+10+"px",this.hold.style.top=e.y+34+"px"}},this.outletBlur=e=>{this.options.compact&&(this.hold.style.display="none");const t=this.options.labelParse(this.outlet.value);isNaN(t)||(this.outlet.value=this.options.labelFormat(this.value),this.options.onEnd&&(this.options.force||this.downValue!==this.value)&&void 0!==e&&this.options.onEnd(this.value,this.downValue,this.name))},this.calculateAmount=e=>{for(let t=1;t<this.options.range.length;t++){const s=this.options.range[t-1],i=this.options.range[t];if(e>=s&&e<=i){const a=this.options.stops[t-1];return a+(e-s)/(i-s)*(this.options.stops[t]-a)}}if(e==this.options.defaultValue)throw new Error("Cant recurse on default value with calculateAmount, this is a bug");return this.calculateAmount(this.options.defaultValue)},this.setKnob=e=>{const t=100*this.calculateAmount(this.options.defaultValue),s=this.generateDiff(t,e);requestAnimationFrame(()=>{this.knob.style.marginLeft=`${e}%`,this.diff.style.backgroundImage=s})},this.roundToStep=(e,t,s,i)=>{const a=e%t;return 0===a||e===s||e===i?e:e-a},this.generateDiff=(e,t)=>{if(e===t)return"none";const s="var(--accent-color)";this.knob.clientWidth;return t>e?`linear-gradient(to right, transparent 0%, transparent ${e}%, ${s} ${e}%, ${s} calc(${t}%), transparent calc(${t}%), transparent 100%)`:`linear-gradient(to right, transparent 0%, transparent calc(${t}% ), ${s} calc(${t}%), ${s} ${e}%, transparent ${e}%, transparent 100%)`},this.setAmount=(e,t=!1)=>{const[s,i]=this.bucket(e),a=this.options.range[s],n=this.options.range[s+1],r=this.options.step[s];this.setKnob(100*e),this.value=this.roundToStep(i*(n-a)+a,r,a,n),this.hold.classList.toggle("changed",this.value!==this.options.defaultValue),this.outlet.value=this.options.labelFormat(this.value),this.options.onChange&&!t&&setTimeout(()=>this.options.onChange(this.value,this.name),0)},this.bucket=e=>{for(let t=1;t<this.options.stops.length;t++){const s=this.options.stops[t-1],i=this.options.stops[t];if(e>=s&&e<=i)return[t-1,(e-s)/(i-s)]}throw new Error(`Could not assign ${e} to a bucket, this is a bug`)},this.setValue=(e,t=!1)=>{const s=this.value;void 0===e&&(e=this.options.defaultValue);const i=this.options.range[0],a=this.options.range[this.options.range.length-1];this.value=Math.max(Math.min(e,a),i),this.hold.classList.toggle("changed",this.isChanged()),this.outlet.value=this.options.labelFormat(this.value);const n=this.calculateAmount(this.value);this.setKnob(100*n),(this.options.onChange||this.options.onEnd)&&t&&setTimeout(()=>{this.options.onChange&&this.options.onChange(this.value,this.name),this.options.onEnd&&this.options.onEnd(this.value,s,this.name)},0)},this.isChanged=()=>this.value!==this.options.defaultValue,this.getValue=()=>{var e;return null!==(e=this.value)&&void 0!==e?e:0},this.reset=()=>{this.value=this.options.defaultValue,this.setKnob(100*this.calculateAmount(this.value)),this.hold.classList.remove("changed"),this.outlet.value=this.options.labelFormat(this.value),this.label.innerText=(this.options.label||this.name)+" "},this.cleanUp=()=>{document.removeEventListener("mousemove",this.knobMouseMove,!1),document.removeEventListener("touchmove",this.knobTouchMove),document.removeEventListener("mouseup",this.knobUp,!0),document.removeEventListener("touchend",this.knobUp),this.knob.removeEventListener("mousedown",this.knobDown,!1),this.knob.removeEventListener("touchstart",this.knobDown),this.hold.removeEventListener("mousedown",this.sliderMouseDown,!1),this.outlet.removeEventListener("focus",this.outletFocus,!1),this.outlet.removeEventListener("keyup",this.outletKeyUp,!1),this.outlet.removeEventListener("blur",this.outletBlur,!1),this.options.compact||(this.label.removeEventListener("mouseover",this.labelOver,!1),this.label.removeEventListener("mouseleave",this.labelOut,!1),this.label.removeEventListener("click",this.labelClick,!1))},this.hide=()=>{this.container.style.display="none"},this.show=()=>{this.container.style.display="block"},this.disable=()=>{this.container.classList.add("disabled")},this.enable=()=>{this.container.classList.remove("disabled")},this.name=e,this.container=(0,n.Ay)(e),this.options=Object.assign(Object.assign({},r),t),this.value=this.options.defaultValue,Array.isArray(this.options.step)||(this.options=Object.assign(Object.assign({},this.options),{step:[this.options.step]})),this.options.stops.length<2)throw new Error("Slider need to have atleast two stops, default is [0,1]");if(this.options.range.length!=this.options.stops.length)throw new Error("Slider range option and slide stops option, needs to be the same length");if(this.options.step.length!=this.options.stops.length-1)throw new Error("Step array must be the same length as the number of ranges (slider options range - 1)");this.options.compact&&this.container.classList.add("compact");!!this.container.querySelector(".slider")?this.findElements():this.buildElements(),this.knob.addEventListener("mousedown",this.knobDown,!1),this.knob.addEventListener("touchstart",this.knobDown,{passive:!1}),this.hold.addEventListener("mousedown",this.sliderMouseDown,!1),this.outlet.addEventListener("focus",this.outletFocus,!1),this.outlet.addEventListener("keyup",this.outletKeyUp,!1),this.outlet.addEventListener("blur",this.outletBlur,!1),this.options.compact||(this.label.addEventListener("mouseover",this.labelOver,!1),this.label.addEventListener("mouseleave",this.labelOut,!1),this.label.addEventListener("click",this.labelClick,!1)),this.outlet.value!==this.options.labelFormat(this.options.defaultValue)?(this.outletKeyUp(void 0),this.outletBlur(void 0)):this.reset()}}},82355:(e,t,s)=>{s.a(e,async(e,i)=>{try{s.r(t),s.d(t,{Displacement:()=>n.UM,Gif:()=>n.TX,GifBuffer:()=>n.NT,Layer:()=>n.Wd,Mp4:()=>n.Ad,PXD:()=>n.l9,Stroke:()=>n.tc,ZipReader:()=>n.zg,ZipWriter:()=>n.Vx,__wbg_buffer_085ec1f694018c4f:()=>n.Qj,__wbg_height_c0440005f53e9792:()=>n.Qm,__wbg_new_4c0b35176d4e6c47:()=>n.HY,__wbg_newwithbyteoffsetandlength_a624c98280289b0f:()=>n.Zi,__wbg_set_wasm:()=>n.lI,__wbg_width_9a7937fdc4208452:()=>n.zP,__wbg_x_7af334499c70ecf9:()=>n._k,__wbg_y_7b2e0b17f2702db7:()=>n._4,__wbindgen_memory:()=>n.Py,__wbindgen_object_drop_ref:()=>n.bk,__wbindgen_string_new:()=>n.yc,__wbindgen_throw:()=>n.Qn,distanceTransform:()=>n.gC,distanceTransformInv:()=>n.TD});var a=s(46825),n=s(29821),r=e([a]);a=(r.then?(await r)():r)[0],(0,n.lI)(a),i()}catch(o){i(o)}})},82424:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StandalonePaymentCancelResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.StandalonePaymentCancelResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"paymentReference",baseName:"paymentReference",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"status",baseName:"status",type:"StandalonePaymentCancelResponse.StatusEnum"}],function(e){let t;!function(e){e.Received="received"}(t=e.StatusEnum||(e.StatusEnum={}))}(s=t.StandalonePaymentCancelResponse||(t.StandalonePaymentCancelResponse={}))},82661:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UtilityRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.UtilityRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"originDomains",baseName:"originDomains",type:"Array<string>"}]},82857:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(22866),a=s(40963),n=s(54738),r=s(58489),o=s(56480),h=s(22656);class c{constructor(e,t,s,o,h,l,d,p){this.saveMethod="normal",this.block=!1,this.layerAddedCounterForUserEase=0,this.savedTimesCounterForUserEase=0,this.setBlock=(e=!1)=>{this.block=e||Boolean(!!this.templateMeta&&this.templateMeta.locked)},this.unblock=()=>{this.block=!1,this.templateMeta&&(this.templateMeta.locked=!1)},this.getSelected=()=>1!==this.selected.length?void 0:this.selected[0],this.getSelectedStack=()=>this.selected,this.getSelectedLinkedStack=()=>this.selectedLinked,this.updateSelectedLinkedStack=()=>{let e=new Set;for(let s of this.selected)s.hasLink()&&e.add(s.settings.link);let t=this.layers.filter(t=>e.has(t.settings.link));this.selectedLinked=[...new Set([...this.selected,...t])]},this.getNotSelectedStack=(e=this.selected)=>this.layers.filter(t=>!e.includes(t)),this.getStackRect=(e=this.selected)=>{let t=new Array;for(let s of e)t.push(s.rect?s.rect.clone():void 0);return t},this.getStackBounds=(e=this.selected)=>{let t;if(1===e.length)t=e[0].editMode&&e[0]instanceof r.A?e[0].trim.clone():e[0].rect?e[0].rect.clone():void 0;else for(let s of e)s.rect&&(t=a.A.merge(t,s.rect.getRotatedBounds()));return t},this.getStackId=(e=this.selected)=>{let t=new Array;return e.forEach(e=>{t.push(e.id)}),t},this.getStackHashId=(e=this.selected)=>{if(0===e.length)return;if(1===e.length)return e[0].id;let t=this.getStackId(e).join(),s=0;for(let i=0;i<t.length;i++)s=(s<<5)-s+t.charCodeAt(i),s&=s;return s.toString()},this.getLayerById=e=>{let t;return this.layers.forEach(s=>{s.id===e&&(t=s)}),t},this.hasSelected=()=>this.selected.length>0,this.isSelectedStack=()=>this.selected.length>1,this.isSelectedLinkedStack=()=>this.selectedLinked.length>1,this.isSelectedType=e=>1===this.selected.length&&this.selected[0].type===e,this.isSelectedImageWithCanvas=()=>(!this.selected||1===this.selected.length)&&(this.selected[0].type===i.A.TYPE_IMAGE&&!!this.selected[0].canvas),this.isSelectedShaderbleWithCanvas=()=>(!this.selected||1===this.selected.length)&&((this.selected[0].type===i.A.TYPE_IMAGE||this.selected[0].type===i.A.TYPE_FRAME||this.selected[0].type===i.A.TYPE_ELEMENT)&&!!this.selected[0].canvas),this.isSelectedById=e=>{if(e)return-1!==this.selected.findIndex(t=>t.id===e)},this.isSelectedLinkedById=e=>{if(e)return-1!==this.selectedLinked.findIndex(t=>t.id===e)},this.selectLayerById=(e,t=!1,s=!1)=>{this.selected[0]&&(this.selected[0].editMode=!1);let a=!1;return e?t?this.isSelectedById(e)?s&&(this.unselectLayerById(e),a=!0):(this.selected.push(this.getLayerById(e)),a=!0):this.isSelectedById(e)&&1===this.selected.length||(this.selected=[this.getLayerById(e)],a=!0):0!==this.layers.length&&this.layers[0].settings.locked&&this.layers[0].type===i.A.TYPE_IMAGE?0===this.selected.length||1===this.selected.length&&this.selected[0]===this.layers[0]||(this.selected=[this.layers[0]],a=!0):0!==this.selected.length&&(this.selected=[],a=!0),this.selected.length>1&&this.selected.sort((e,t)=>this.layers.indexOf(e)-this.layers.indexOf(t)),this.updateSelectedLinkedStack(),a},this.unselectLayerById=e=>{const t=this.selected.findIndex(t=>t.id===e);return-1!==t?(this.selected.splice(t,1),!0):(this.updateSelectedLinkedStack(),!1)},this.unselectLayers=()=>{this.selected=[],this.selectedLinked=[]},this.selectLayerStack=(e,t=!1)=>{this.selected=e,this.updateSelectedLinkedStack()},this.deleteLayerById=e=>{const t=this.layers.findIndex(t=>t.id===e);let s;return-1!==t&&(s=this.layers[t],this.layers.splice(t,1),this.unselectLayerById(e)),!this.hasSelected()&&this.layers.length>0&&(this.selected=[this.layers[t>0?t-1:0]]),this.updateSelectedLinkedStack(),s},this.clone=e=>{const t=(0,n.Q5)(this.name),s=new c(e||n.Os(),t,this.width,this.height,this.color,this.animation,this.templateMeta,this.source);return s.layers=this.layers.map(e=>e.clone()),s},this.cleanUp=()=>{this.saveMethod instanceof MessagePort&&(this.saveMethod.postMessage("close"),this.saveMethod.close())},this.id=e,this.name=t,this.width=s,this.height=o,this.color=h,this.animation=l,this.templateMeta=d,this.source=p,this.layers=[],this.selected=[],this.selectedLinked=[],this.setBlock()}addScratch(){return this.scratch||(this.scratch=new o.A),this.scratch}removeScratch(){this.scratch=void 0}hasScratch(){return!!this.scratch&&"none"!==this.scratch.renderMode}addSelection(){this.selection||(this.selection=new h.A(this.width,this.height))}clearSelection(){this.selection&&this.selection.clear()}removeSelection(){this.selection&&(this.selection.cleanUp(),this.selection=void 0)}hasSelection(){return this.selection&&this.selection.bounds&&this.selection.outline&&this.selection.outline.length>0}hasAnimation(){if(this.animation)return!0;for(const e of this.layers)if(e.animation&&!e.animation.block)return!0;return!1}hasLayers(){return this.layers.length>0}hasLayer(e){return this.layerNr(e.id)>=0}numLayers(){return this.layers.length}numSelected(){return this.selected.length}isSelectedLinked(){return this.selected.filter(e=>e.hasLink()).length===this.selected.length}nextAddedLayerNumber(){return this.numLayers()>this.layerAddedCounterForUserEase&&(this.layerAddedCounterForUserEase=this.numLayers()),(this.layerAddedCounterForUserEase+1).toString()}lockedBackground(){return this.layers.length>0&&this.layers[0].settings.locked&&this.layers[0].type===i.A.TYPE_IMAGE}selectedLayerNr(){if(0===this.selected.length)return-1;if(1===this.selected.length)return this.layerNr(this.selected[0].id);let e=0;return this.selected.forEach(t=>{e=Math.max(e,this.layerNr(t.id))}),e}layerNr(e){return this.layers.findIndex(t=>t.id===e)}changeLayerOrder(e,t){this.layers.splice(t,0,this.layers.splice(e,1)[0])}rotate(e){let t=this.width;this.width=this.height,this.height=t;for(let s=0;s<this.layers.length;s++)this.layers[s].rotate(e),this.layers[s].render()}flip(e){for(let t=0;t<this.layers.length;t++)this.layers[t].type===i.A.TYPE_IMAGE&&(this.layers[t].flip(e),this.layers[t].render())}straighten(e,t,s){if(this.lockedBackground()){let i=this.layers[0];i.rect.rotation=e,i.rect.x=-(i.rect.width-t)/2,i.rect.y=-(i.rect.height-s)/2}this.width=t,this.height=s}crop(e){this.width=e.width,this.height=e.height;for(let t=0;t<this.layers.length;t++)this.layers[t].rect&&(this.layers[t].rect.x-=e.x,this.layers[t].rect.y-=e.y,this.layers[t].render());this.selection&&this.selection.size(this.width,this.height)}setSize(e,t){this.width=e,this.height=t}resize(e,t,s){let i=e/this.width,a=t/this.height;this.width=e,this.height=t;for(let n=0;n<this.layers.length;n++)this.layers[n].scale(i,a,s);this.selection&&this.selection.resize(this.width,this.height)}size(e,t,s,i){let a=s?e:e-this.width,n=s?t:t-this.height;if(this.width=s?this.width+e:e,this.height=s?this.height+t:t,"TL"!=i){"CL"!=i&&"BL"!=i||(a=0),"TC"!=i&&"CC"!=i&&"BC"!=i||(a=Math.round(a/2)),"TC"!=i&&"TR"!=i||(n=0),"CL"!=i&&"CC"!=i&&"CR"!=i||(n=Math.round(n/2));for(let e=0;e<this.layers.length;e++)this.layers[e].rect&&(this.layers[e].rect.x+=a,this.layers[e].rect.y+=n,this.layers[e].render())}this.selection&&this.selection.size(this.width,this.height)}addLayer(e){this.layerAddedCounterForUserEase++;let t=this.selectedLayerNr();return t>-1?this.layers.splice(t+1,0,e):this.layers.push(e),this.selected=[e],this.updateSelectedLinkedStack(),e}replaceLayer(e){const t=this.layers.findIndex(t=>t.id===e.id);this.layers[t]=e;const s=this.selected.findIndex(t=>t.id===e.id);-1!==s&&(this.selected[s]=e),this.updateSelectedLinkedStack()}}},83255:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardDonations=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CardDonations=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"brand",baseName:"brand",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"cupsecureplus_smscode",baseName:"cupsecureplus.smscode",type:"string"},{name:"cvc",baseName:"cvc",type:"string"},{name:"encryptedCardNumber",baseName:"encryptedCardNumber",type:"string"},{name:"encryptedExpiryMonth",baseName:"encryptedExpiryMonth",type:"string"},{name:"encryptedExpiryYear",baseName:"encryptedExpiryYear",type:"string"},{name:"encryptedSecurityCode",baseName:"encryptedSecurityCode",type:"string"},{name:"expiryMonth",baseName:"expiryMonth",type:"string"},{name:"expiryYear",baseName:"expiryYear",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"CardDonations.FundingSourceEnum"},{name:"holderName",baseName:"holderName",type:"string"},{name:"networkPaymentReference",baseName:"networkPaymentReference",type:"string"},{name:"number",baseName:"number",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"shopperNotificationReference",baseName:"shopperNotificationReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"threeDS2SdkVersion",baseName:"threeDS2SdkVersion",type:"string"},{name:"type",baseName:"type",type:"CardDonations.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Bcmc="bcmc",e.Scheme="scheme",e.NetworkToken="networkToken",e.Giftcard="giftcard",e.Card="card"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.CardDonations||(t.CardDonations={}))},83427:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DetailsRequestAuthenticationData=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.DetailsRequestAuthenticationData=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"authenticationOnly",baseName:"authenticationOnly",type:"boolean"}]},83864:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BillDeskDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.BillDeskDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"issuer",baseName:"issuer",type:"string"},{name:"type",baseName:"type",type:"BillDeskDetails.TypeEnum"}],function(e){let t;!function(e){e.Online="billdesk_online",e.Wallet="billdesk_wallet"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.BillDeskDetails||(t.BillDeskDetails={}))},85337:(e,t,s)=>{s.d(t,{A:()=>m});var i=s(54738),a=s(42268),n=s(40963),r=s(21742),o=s(41915),h=s(82042),c=s(59350),l=s(21404),d=s(81937),p=s(71499);class u{constructor(e,t){this.stage=e,this.angleChange=()=>{let e=Number(this.angle.value.replace("",""));e<0&&(e=0),e>360&&(e=360),this.brush.settings.angle=Math.round(e),this.updatePreview(!1)},this.updatePreview=e=>{this.brush.settings.softness=this.softness.getValue(),this.brush.settings.distance=this.distance.getValue(),this.brush.settings.size=this.size.getValue()>125&&e?125:this.size.getValue(),this.brush.generate();const t=this.preview.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height);const s=n.A.bestFit(this.brush.canvas.width,this.brush.canvas.height,t.canvas.width,t.canvas.height);t.drawImage(this.brush.canvas,s.x,s.y,s.width,s.height),this.renderStroke(),this.renderOutline()},this.renderOutline=()=>{const e=this.raster.getContext("2d");e.clearRect(0,0,120,120),e.save(),e.translate(60,60),e.rotate(-this.brush.settings.angle*Math.PI/180);const t=45,s=Math.round(90*this.brush.settings.aspect)/2;e.lineWidth=2,e.fillStyle="#999",e.strokeStyle="#444",e.beginPath(),e.moveTo(0,s),e.lineTo(0,-s),e.stroke(),e.beginPath(),e.moveTo(t,0),e.lineTo(-45,0),e.stroke(),e.lineWidth=2,e.strokeStyle="#999",e.beginPath(),e.ellipse(0,0,t,s,0,0,2*Math.PI),e.stroke(),e.beginPath(),e.ellipse(0,s,6,6,0,0,2*Math.PI),e.fill(),e.beginPath(),e.ellipse(0,-s,6,6,0,0,2*Math.PI),e.fill(),e.beginPath(),e.moveTo(50,-6),e.lineTo(50,6),e.lineTo(58,0),e.lineTo(50,-6),e.fill(),e.restore()},this.renderStroke=()=>{var e=this.stroke.getContext("2d");e.imageSmoothingQuality="high",e.imageSmoothingEnabled=!0;const t=n.A.bestFit(this.brush.canvas.width,this.brush.canvas.height,30,30),s=Math.floor(this.brush.getStep()*(t.width/this.brush.canvas.width))||1;var i=0,a=2*Math.PI/((e.canvas.width-40)/s);let r=~~(t.width/2),o=~~(t.height/2);e.clearRect(0,0,e.canvas.width,e.canvas.height);for(let n=20;n<=e.canvas.width-20;n+=s)e.drawImage(this.brush.canvas,n-r,30-12*Math.sin(i)-o,t.width,t.height),i+=a},this.setUp=()=>{let e=this.brushpod.container.getBoundingClientRect(),t=this.stage.workspace.getBoundingClientRect();this.modal.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),e.target===e.currentTarget&&this.cleanUp()},!1),this.container.style.top=e.bottom-3-t.y+"px",this.container.style.left=e.x-t.x+"px",this.container.style.height="450px",this.container.style.display="flex",this.size=new h.A("brush-size",{label:(0,r.A)("size"),range:[1,100,1e3],step:[1,10],stops:[0,.4,1],defaultValue:this.brush.settings.size,labelFormat:e=>e+"px",onChange:()=>{this.updatePreview(!0)},onEnd:()=>{this.updatePreview(!1)}}),this.softness=new h.A("brush-softness",{label:(0,r.A)("softness"),defaultValue:this.brush.settings.softness,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100,onChange:()=>{this.updatePreview(!0)},onEnd:()=>{this.updatePreview(!1)}}),this.distance=new h.A("brush-step",{range:[0,3],label:(0,r.A)("step"),defaultValue:this.brush.settings.distance,labelParse:e=>parseInt(e,1)/100,labelFormat:e=>(100*e).toFixed(0)+"%",onChange:()=>{this.updatePreview(!0)},onEnd:()=>{this.updatePreview(!1)}}),this.angle=(0,a.Ay)("brush-angle"),this.angle.value=this.brush.settings.angle+"",this.angle.addEventListener("input",this.angleChange,!0),this.raster.addEventListener("mousedown",this.rasterDown,!1),this.populatePresets(),this.updatePreview(!1)},this.rasterDown=e=>{const t=this.raster.getBoundingClientRect(),s=new o.A(e.clientX-Math.round(t.x),e.clientY-Math.round(t.y));this.matrix=new l.A,this.matrix.reset(),this.matrix.translate(new o.A(60,60)),this.matrix.rotate(-this.brush.settings.angle*Math.PI/180),this.matrix.invert(),this.down=this.matrix.transformPoint(s),this.down.x>40&&this.down.y>-10&&this.down.y<10?this.target="rotate":this.down.x>-10&&this.down.x<10&&(this.target="size",this.down=s),void 0!==this.target&&(document.addEventListener("mousemove",this.rasterMove,!1),document.addEventListener("mouseup",this.rasterUp,!1))},this.rasterMove=e=>{const t=this.raster.getBoundingClientRect();let s=new o.A(e.clientX-Math.round(t.x),e.clientY-Math.round(t.y));if("size"===this.target)this.matrix.reset(),this.matrix.translate(new o.A(60,60)),this.matrix.rotate(-this.brush.settings.angle*Math.PI/180),this.matrix.invert(),s=this.matrix.transformPoint(s),this.brush.settings.aspect=i.qE(Math.abs(s.y)/45,.1,1);else{let e=-180/Math.PI*Math.atan2(s.y-60,s.x-60);e>360?e-=360:e<0&&(e+=360),this.brush.settings.angle=e,this.angle.value=Math.round(this.brush.settings.angle)+""}this.updatePreview(!1)},this.rasterUp=e=>{this.down=void 0,this.target=void 0,this.matrix=void 0,document.removeEventListener("mousemove",this.rasterMove,!1),document.removeEventListener("mouseup",this.rasterUp,!1)},this.populatePresets=()=>{this.addPresetCollection("basic-circle",(0,r.A)("basicCircular"),!1,[new p.A("circle",1,.02),new p.A("circle",5,.02),new p.A("circle",10,.02),new p.A("circle",15,.02),new p.A("circle",20,.02),new p.A("circle",30,.02),new p.A("circle",50,.02),new p.A("circle",70,.02),new p.A("circle",100,.01),new p.A("circle",200,.01),new p.A("circle",400,.01),new p.A("circle",500,.01),new p.A("circle",5,.25),new p.A("circle",10,.25),new p.A("circle",20,.25),new p.A("circle",30,.25),new p.A("circle",40,.25),new p.A("circle",50,.25),new p.A("circle",70,.25),new p.A("circle",100,.25),new p.A("circle",150,.25),new p.A("circle",200,.25),new p.A("circle",400,.25),new p.A("circle",500,.25),new p.A("circle",5,.5),new p.A("circle",10,.5),new p.A("circle",20,.5),new p.A("circle",30,.5),new p.A("circle",40,.5),new p.A("circle",50,.5),new p.A("circle",70,.5),new p.A("circle",100,.5),new p.A("circle",150,.5),new p.A("circle",200,.5),new p.A("circle",400,.5),new p.A("circle",500,.5)]),this.addPresetCollection("basic-shapes",(0,r.A)("basicShapes"),!1,[new p.A("square",4,0),new p.A("square",6,0),new p.A("square",10,0),new p.A("square",20,0),new p.A("square",30,0),new p.A("square",50,0),new p.A("square",70,0),new p.A("square",100,0),new p.A("square",200,0),new p.A("square",300,0),new p.A("square",400,0),new p.A("square",500,0),new p.A("diamond",50,.8),new p.A("diamond",100,.8),new p.A("diamond",100,.8,1,0,.5,5),new p.A("diamond",100,.8,1,0,.25,7),new p.A("diamond",100,.01,1,45,.25,4,1.5),new p.A("diamond",100,.01,1,0,.25,5,1.5),new p.A("diamond",100,.01,1,0,.25,6,1.5),new p.A("diamond",100,.01,1,0,.25,7,1.5),new p.A("circle",10,.1,1,60,.2,2,.07),new p.A("circle",20,.1,1,60,.2,2,.07),new p.A("circle",50,.1,1,60,.2,2,.07),new p.A("circle",100,.1,1,60,.2,2,.07),new p.A("square",100,.8,1,0,.5,5),new p.A("square",100,.8,1,0,.25,7),new p.A("square",100,.01,1,45,.25,4,1.5),new p.A("square",100,.01,1,0,.25,5,1.5),new p.A("square",100,.01,1,0,.25,6,1.5),new p.A("square",100,.01,1,0,.25,7,1.5),new p.A("square",100,.01,1,0,1,5,1.5),new p.A("square",100,.01,1,0,1,6,1.5),new p.A("square",100,.01,1,0,1,7,1.5),new p.A("circle",100,.01,1,0,.25,5,1.5),new p.A("circle",100,.01,1,0,.25,6,1.5),new p.A("circle",100,.01,1,0,.25,7,1.5)])},this.addPresetCollection=(e,t,s,n)=>{const r=(0,a.T)("div"),o=(0,a.T)("div",{className:"toggle"}),h=(0,a.Ay)("brush-editor-presets-ss-content").hasChildNodes()?"subline top-10":"subline";r.append((0,a.T)("input",{type:"checkbox",className:"toggle-check",checked:!0,id:"brush-pack-"+e}),(0,a.T)("label",{className:h,htmlFor:"brush-pack-"+e},t,(0,a.T)("span",{className:"arrow"})),o);const l=new c.A(new p.A);n.forEach(e=>{const t=(0,a.T)("div",{className:"brush-setting-pod"});t.setAttribute("data",JSON.stringify(e)),t.addEventListener("click",this.selectPreset,!0),t.appendChild((0,a.T)("span",{},e.size.toString())),e.size>30&&(e.size=30),l.settings=e,l.generate();const s=i.oM(l.canvas);s.classList.add("ic"),t.appendChild(s),o.append(t)}),(0,a.Ay)("brush-editor-presets-ss-content").append(r)},this.selectPreset=e=>{var t;null===(t=this.selected)||void 0===t||t.classList.remove("active"),this.selected=e.currentTarget,this.selected.classList.add("active"),this.brush.setSettingsString(this.selected.getAttribute("data")),this.size.setValue(this.brush.settings.size),this.softness.setValue(this.brush.settings.softness),this.distance.setValue(this.brush.settings.distance),this.angle.value=Math.round(this.brush.settings.angle)+"",this.updatePreview(!1)},this.resizeStart=e=>{this.down=new o.A(this.container.clientHeight,e.y)},this.resizeMove=e=>{const t=this.down.x+(e.y-this.down.y);this.container.style.height=(t<320?320:t)+"px"},this.cleanUp=()=>{this.angle.removeEventListener("input",this.angleChange,!0),this.raster.removeEventListener("mousedown",this.rasterDown,!1),this.brushpod.update(),this.size.cleanUp(),this.softness.cleanUp(),this.distance.cleanUp(),this.container.remove(),this.modal.remove()},this.brushpod=t,this.brush=t.brush,this.modal=this.stage.workspace.appendChild((0,a.T)("div",{id:"brush-editor-modal",className:"modal"}));let s=(0,a.T)("div",{className:"tab-10"}),u=(0,a.T)("div",{style:"flex-grow:1"});this.presets=(0,a.T)("div",{id:"brush-editor-presets",className:"brush-editor-presets"}),this.container=(0,a.T)("div",{id:"brush-editor",className:"brush-editor"},(0,a.T)("div",{id:"brush-editor-top",className:"brush-editor-top"},s,u),this.presets),this.stage.workspace.appendChild(this.container),this.preview=(0,a.T)("canvas",{id:"brush-preview",className:"brush-preview ic",width:120,height:120}),this.raster=(0,a.T)("canvas",{id:"brush-raster",className:"brush-raster ic",width:120,height:120}),this.stroke=(0,a.T)("canvas",{id:"brush-stroke",className:"brush-stroke ic",width:252,height:60});const m=(0,a.T)("div",{className:"switch-icon-field stretch",style:"display:none"},(0,a.T)("input",{type:"radio",id:"brush-shape-circle",name:"brush-shape",value:"circle"}),(0,a.T)("label",{htmlFor:"brush-shape-circle"},(0,a.T)("img",{src:"/img/icon/type-circle.svg",className:"ic"})),(0,a.T)("input",{type:"radio",id:"brush-shape-square",name:"brush-shape",value:"square"}),(0,a.T)("label",{htmlFor:"brush-shape-square"},(0,a.T)("img",{src:"/img/icon/type-square.svg",className:"ic"})),(0,a.T)("input",{type:"radio",id:"brush-shape-diamond",name:"brush-shape",value:"diamond"}),(0,a.T)("label",{htmlFor:"brush-shape-diamond"},(0,a.T)("img",{src:"/img/icon/type-diamond.svg",className:"ic"})));s.append((0,a.T)("div",{style:"display:flex;width:"},(0,a.T)("div",{className:"brush-preview-holder"},this.preview),(0,a.T)("div",{className:"brush-raster-holder"},this.raster)),(0,a.T)("div",{className:"brush-stroke-holder"},this.stroke),m,(0,a.T)("input",{id:"brush-angle",type:"text",style:"padding:0px !important;width:30px !important;height:14px !important;font-size:10px;display:block;position:absolute;top:117px;right:12px;border:none !important;background:none !important;text-align:right;"})),u.append((0,a.T)("div",{style:"height:122px;",className:"brush-control-holder"},(0,a.T)("div",{id:"brush-size"}),(0,a.T)("div",{id:"brush-softness",className:"top-4"}))),u.append((0,a.T)("div",{style:"height:62px;margin-top:10px",className:"brush-control-holder"},(0,a.T)("div",{id:"brush-step"}))),new d.A(this.presets);const g=(0,a.T)("img",{id:"brush-resize",src:"/img/icon/three-dot.svg",className:"resize ic"});(0,a.Bb)(g,this.resizeStart,this.resizeMove),this.container.append(g),this.setUp()}}class m{constructor(e,t,s,r){this.stage=e,this.stepSoftness=e=>{this.brush.settings.softness=i.qE(this.brush.settings.softness+e,0,1),this.brush.generate(),this.update()},this.stepSize=e=>{this.brush.settings.size=i.qE(this.brush.settings.size+e,1,999),this.brush.generate(),this.update()},this.update=(e=!0)=>{let t=this.preview.getContext("2d");t.imageSmoothingQuality="high",t.imageSmoothingEnabled=!0,t.clearRect(0,0,t.canvas.width,t.canvas.height);const s=n.A.bestFit(this.brush.canvas.width,this.brush.canvas.height,t.canvas.width,t.canvas.height);t.drawImage(this.brush.canvas,s.x,s.y,s.width,s.height),this.size.innerText=this.brush.settings.size.toString(),e&&this.callback&&this.callback(this.brush)},this.toggle=()=>{new u(this.stage,this)},this.cleanUp=()=>{this.container.setAttribute("data",this.brush.getSettingsString()),this.container.removeEventListener("click",this.toggle,!1)},this.name=t,this.brush=s,this.callback=r,this.container=(0,a.Ay)(t),this.container.hasChildNodes()?(this.preview=(0,a.Ay)(t+"-canvas"),this.size=(0,a.Ay)(t+"-size"),this.container.hasAttribute("data")&&this.brush.setSettingsString(this.container.getAttribute("data"))):(this.container.classList.add("brush-pod"),this.preview=(0,a.T)("canvas",{id:t+"-canvas",width:32,height:32,className:"ic"}),this.container.append(this.preview),this.size=(0,a.T)("div",{id:t+"-size"}),this.container.append((0,a.T)("div",{id:t+"-hold"},this.size,(0,a.T)("img",{id:t+"-more",src:"/img/icon/more.svg",className:"ic"})))),this.container.addEventListener("click",this.toggle,!1),this.update(!1)}}},85499:(e,t,s)=>{s.d(t,{t:()=>d});var i=s(54738),a=s(53900),n=s(40963),r=s(41915),o=s(65209),h=s(54127),c=s(39989),l=s(58489);async function d(e,t){var s,d,p,u;const m=new Date;switch(t.type){case"bitmapChange":{const e=t.layer,s=i.ON(t.layer.canvas,t.patchRect),a=e.rect?e.rect.clone():void 0;let r=i.oM(e.mask);if(t.patch){const s=t.rect,n=!!e.canvas;e.extendCanvas(s),n&&(t.patchRect.x+=a.x-e.rect.x,t.patchRect.y+=a.y-e.rect.y);if(e.canvas.getContext("2d").putImageData(t.patch,t.patchRect.x,t.patchRect.y),t.rect.width<e.rect.width||t.rect.height<e.rect.height){const a=i.Nw(t.rect.width,t.rect.height);a.getContext("2d").drawImage(e.canvas,e.rect.x-t.rect.x,e.rect.y-t.rect.y),t.patchRect.x+=e.rect.x-s.x,t.patchRect.y+=e.rect.y-s.y,e.canvas=a,e.rect=s}}else e.canvas=null,e.rect=new n.A(0,0,0,0);return t.mask&&(e.mask=t.mask),e.render(),t.layer.syncRequested=m,{type:"bitmapChange",layer:e,rect:a,kind:t.kind,patch:s,patchRect:t.patchRect.clone(),mask:r}}case"bitmapSwitch":{const e=t.layer,s=i.oM(t.layer.canvas),a=t.layer.trim?t.layer.trim.clone():t.layer.rect.clone();return e.switchCanvas(t.canvas,t.rect),e.render(),t.layer.syncRequested=m,{type:"bitmapSwitch",kind:t.kind,layer:e,rect:a,canvas:s}}case"selectionAndBitmapSwitch":{const a=t.layer,n=i.oM(t.layer.canvas),r=a.rect.clone();a.switchCanvas(t.canvas,t.rect),a.render(),t.layer.syncRequested=m;const o=i.oM(null===(s=null==e?void 0:e.selection)||void 0===s?void 0:s.mask);return t.selection?(e.addSelection(),e.selection.setMask(t.selection),{type:"selectionAndBitmapSwitch",kind:t.kind,selection:o,layer:a,rect:r,canvas:n}):(e.removeSelection(),{type:"selectionAndBitmapSwitch",kind:t.kind,selection:o,layer:a,rect:r,canvas:n})}case"addLayer":return e.layers.splice(t.order,0,t.layer),{type:"addLayer",kind:t.kind,layer:t.layer};case"deleteLayer":return e.deleteLayerById(t.layer.id),t;case"order":return e.changeLayerOrder(t.to,t.from),t;case"layerSettings":{const e=Object.assign({},t.layer.settings);return t.layer.settings=t.settings,t.layer.syncRequested=m,{type:"layerSettings",kind:t.kind,layer:t.layer,settings:e}}case"textChange":{const e=t.layer.text;return t.layer.setText(t.text),t.layer.syncRequested=m,{type:"textChange",layer:t.layer,text:e}}case"textSettings":{const e=t.layer.textSettings.clone();return t.layer.textSettings=t.settings,t.layer.textSettings.measureText(),await t.layer.prepare(!0),t.layer.syncRequested=m,{type:"textSettings",kind:t.kind,layer:t.layer,settings:e}}case"background":{const s=e.color;return e.color=t.color,{type:"background",color:s}}case"mask":{let e;const s=t.layer.hasMask();if(!s&&t.patch&&t.layer.addMask(),t.patch){const a=t.layer.mask.getContext("2d");s&&(e=i.ON(t.layer.mask,new n.A(t.rect.x,t.rect.y,t.patch.width,t.patch.height))),a.putImageData(t.patch,t.rect.x,t.rect.y)}else t.layer.removeMask();return t.layer.render(),t.layer.syncRequested=m,{type:"mask",layer:t.layer,rect:t.rect,patch:e}}case"maskInvert":return t.layer.invertMask(),t.layer.render(),t.layer.syncRequested=m,{type:"maskInvert",layer:t.layer};case"adjust":{const e=t.shaders.cloneChain();return t.shaders.chain=t.chain,{type:"adjust",layer:t.layer,kind:t.kind,chain:e,shaders:t.shaders}}case"glitch":{const e=t.shaders.cloneChain();return t.shaders.chain=t.chain,{type:"glitch",layer:t.layer,kind:t.kind,chain:e,shaders:t.shaders}}case"effect":{let e,s;return t.tool.marked&&(e=t.tool.marked.name,s=t.tool.marked.value),t.tool.shaders.reset(),t.name?(t.tool.shaders.addPreset(t.name,t.value),t.tool.marked=new o.A(t.name,t.value)):t.tool.marked=void 0,{type:"effect",layer:t.layer,kind:t.kind,tool:t.tool,name:e,value:s}}case"arrange":switch(t.layer.syncRequested=m,t.action.type){case"rect":{const e=t.layer.rect.clone();return t.layer.rect=t.action.rect,t.layer instanceof h.A&&(e.height=t.layer.textSettings.size,t.layer.rect.height!==t.layer.textSettings.size&&t.layer.setTextSize(t.layer.rect.height)),t.layer instanceof l.A&&t.layer.trimOnResize(e),t.layer instanceof c.A||t.layer.render(),{type:"arrange",layer:t.layer,kind:t.kind,action:{type:"rect",rect:e}}}case"trim":{const e=t.layer.trim.clone();return t.layer.trim=t.action.rect,t.layer.render(),{type:"arrange",layer:t.layer,kind:t.kind,action:{type:"trim",rect:e}}}case"trans":{const e=i.oM(t.layer.canvas),s=i.oM(t.layer.mask),a=t.layer.rect.clone();return t.layer.canvas=t.action.data,t.layer.mask=t.action.mask,t.layer.rect=t.action.rect,t.layer.render(),{type:"arrange",layer:t.layer,kind:t.kind,action:{type:"trans",data:e,mask:s,rect:a}}}}case"arrangeStack":{let e=t.stack,s=t.rects,i=new Array;for(let t=0;t<e.length;t++){let a=e[t],n=a.rect?a.rect.clone():void 0;a.rect=s[t],a instanceof h.A&&(n.height=a.textSettings.size,a.rect.height!==a.textSettings.size&&a.setTextSize(a.rect.height)),a instanceof l.A&&a.trimOnResize(n),i.push(n),a.syncRequested=m,a.render()}return{type:"arrangeStack",id:t.id,kind:"arrange",stack:t.stack,rects:i}}case"link":{let e=t.stack,s=new Array;for(let t=0;t<e.length;t++)s.push({layer:e[t].layer,link:null!==(d=e[t].layer.settings.link)&&void 0!==d?d:""}),e[t].layer.settings.link=e[t].link,e[t].layer.syncRequested=m;return{type:"link",kind:t.kind,stack:s}}case"flipLayer":return t.layer.flip(t.vertical),t.layer.render(),t.layer.syncRequested=m,{type:"flipLayer",layer:t.layer,vertical:t.vertical};case"rotateLayer":return t.layer.rotate(!t.counterClock),t.layer.render(),t.layer.syncRequested=m,{type:"rotateLayer",layer:t.layer,counterClock:!t.counterClock};case"crop":{const s=new r.A(-t.offset.x,-t.offset.y),o=new a.A(e.width,e.height);let h;if(e.crop(new n.A(t.offset.x,t.offset.y,t.size.width,t.size.height)),t.straighten){const s=e.layers[0];h=i.oM(s.canvas),s.syncRequested=m,s.canvas=t.straighten,s.rect=new n.A(0,0,s.canvas.width,s.canvas.height),e.width=s.rect.width,e.height=s.rect.height}return e.layers.forEach(e=>e.syncRequested=m),document.dispatchEvent(new CustomEvent("reset-viewport")),{type:"crop",offset:s,size:o,straighten:h}}case"pageSize":{const s=new a.A(e.width,e.height);return e.size(t.size.width,t.size.height,!1,t.anchor),document.dispatchEvent(new CustomEvent("reset-viewport")),{type:"pageSize",anchor:t.anchor,size:s}}case"pageResize":{const s=new a.A(e.width,e.height),i=e.layers.map(e=>e.clone(!0));e.width=t.size.width,e.height=t.size.height;for(let a=0;a<t.layers.length;a++){const s=t.layers[a];s.syncRequested=m,e.replaceLayer(s),s.render()}return e.selection&&e.selection.resize(e.width,e.height),document.dispatchEvent(new CustomEvent("reset-viewport")),{type:"pageResize",size:s,layers:i}}case"flip":return e.flip(t.vertical),e.layers.forEach(e=>e.syncRequested=m),{type:"flip",vertical:t.vertical};case"rotate":return e.rotate(t.counterClock),document.dispatchEvent(new CustomEvent("reset-viewport")),e.layers.forEach(e=>e.syncRequested=m),{type:"rotate",counterClock:t.counterClock};case"selectionChange":{const s=e.selection?i.oM(e.selection.mask):void 0;return t.selection?(e.addSelection(),e.selection.setMask(t.selection),Object.assign(Object.assign({},t),{selection:s})):(e.removeSelection(),Object.assign(Object.assign({},t),{selection:s}))}case"merge":{const s=t.from.map(t=>e.layers.find(e=>e.id===t.id)),i=t.from,a=e.layers.map(e=>e.id);return e.layers=e.layers.filter(e=>!i.includes(e)),e.layers.splice(t.order,0,t.target),e.getSelected()&&!e.hasLayer(e.getSelected())&&e.selectLayerById(t.target.id),{type:"merge",kind:t.kind,target:t.target,order:a,layers:s}}case"rasterize":{const s=e.layers.findIndex(e=>e.id===t.newId);if(s<0)return;const[i]=e.layers.splice(s,1,t.layer);return(null===(p=null==e?void 0:e.getSelected())||void 0===p?void 0:p.id)===i.id&&e.selectLayerById(t.layer.id),{type:"rasterize",layer:i,kind:t.kind,newId:t.layer.id}}case"convertSelectionToMask":{const s=e.selection.mask;return t.layer.addMask(),t.layer.mask.getContext("2d").drawImage(e.selection.mask,-t.layer.rect.x,-t.layer.rect.y),t.layer.render(),e.removeSelection(),t.layer.syncRequested=m,{type:"convertSelectionToMask",layer:t.layer,selection:s}}case"convertMaskToSelection":{const s=t.layer.mask;return t.layer.removeMask(),e.addSelection(),e.selection.setMask(t.selection),t.layer.syncRequested=m,{type:"convertMaskToSelection",layer:t.layer,mask:s}}case"applyMask":{const e=t.layer.canvas,s=t.layer.mask;let i=t.layer.rect.clone();return t.layer.render(),t.layer.canvas=t.layer.baked,t.layer.removeMask(),t.layer.shrinkWrap(),t.layer.syncRequested=m,{type:"applyMask",layer:t.layer,canvas:e,mask:s,rect:i}}case"frameContent":{let e,s;return t.layer.canvas&&(e=i.oM(t.layer.canvas),s=null===(u=t.layer.trim)||void 0===u?void 0:u.clone()),t.layer.canvas=t.canvas,t.layer.trim=t.trim,t.layer instanceof l.A&&t.layer.render(),{type:"frameContent",kind:t.kind,layer:t.layer,canvas:e,trim:s}}case"frameSettings":{const e=t.layer.frameSettings.clone();return t.layer.frameSettings=t.settings,t.layer.prepare(),t.layer.syncRequested=m,{type:"frameSettings",kind:t.kind,layer:t.layer,settings:e}}case"shapeSettings":{const e=t.layer.shapeSettings.clone();return t.layer.shapeSettings=t.settings,await t.layer.prepare(),t.layer.syncRequested=m,{type:"shapeSettings",kind:t.kind,layer:t.layer,settings:e}}case"groupSettings":{const e=t.layer.groupSettings.clone();return t.layer.groupSettings=t.settings,t.layer.syncRequested=m,{type:"groupSettings",kind:t.kind,layer:t.layer,settings:e}}case"pageAnimation":{const s=e.animation?e.animation:void 0;return e.animation=t.animation,{type:"pageAnimation",kind:t.kind,animation:s}}case"layerAnimation":{const e=t.layer.animation?t.layer.animation:void 0;return t.layer.animation=t.animation,t.layer.syncRequested=m,{type:"layerAnimation",kind:t.kind,layer:t.layer,animation:e}}default:throw new Error("No handler for this redo type")}}},85806:(e,t,s)=>{s.d(t,{A:()=>y});var i=s(42268),a=s(21742),n=s(54738),r=s(40963),o=s(75770),h=s(82042),c=s(41915),l=s(15818),d=s(59350),p=s(71499);class u{constructor(e){this.stage=e,this.resize=()=>{const e=document.querySelector(".raster");this.container.style.top=e.style.top,this.container.style.left=e.style.left,this.container.style.width=e.style.width},this.bar=(0,i.T)("div"),this.container=(0,i.T)("div",{id:"workspace-progress"},this.bar),(0,i.Ay)("workspace").append(this.container),this.resize(),document.addEventListener("viewport-update",this.resize),document.addEventListener("resize",this.resize)}update(e){this.bar.style.width=`${(100*e).toFixed(0)}%`}show(){this.bar.style.width="0",this.container.style.display="block",this.resize()}hide(){this.container.style.display="none",this.resize()}cleanUp(){this.container.remove()}}var m=s(56479);const g={speed:[2,20],balanced:[20,20],quality:[50,50],ultra:[100,100]};class y extends o.A{constructor(e){super("heal",e),this.workset=null,this.changeMode=()=>{this.mode=document.querySelector('input[name="heal-mode"]:checked').value,this.stage.fresco.setBlock(),this.updateBrush(),(0,i.Ay)("heal-presets").style.display="object"===this.mode?"flex":"none"},this.layerSelect=()=>{var e,t;if((null===(e=this.selected)||void 0===e?void 0:e.id)!==(null===(t=this.stage.fresco.getSelected())||void 0===t?void 0:t.id)&&(this.cleanUpWorker(),this.worker=new m.d8),!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("heal-no-layer").style.display="flex",(0,i.Ay)("heal-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("heal-settings").style.display="flex",(0,i.Ay)("heal-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"over"),this.scratch.settings.opacity=.4,this.updateBrush()},this.keyDown=e=>{if(","===e.key||"."===e.key){switch(e.key){case",":this.size.setValue(this.size.getValue()-10);break;case".":this.size.setValue(this.size.getValue()+10)}this.brush.settings.size=this.size.getValue(),this.updateBrush()}},this.updateBrush=()=>{this.brush.generate(new l.A(0,255,0,255)),this.selected?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom)):this.stage.coating.removeCursorImage()},this.down=(e,t)=>{if(!this.selected||null!==this.workset)return;let s=document.querySelector('input[name="heal-mode"]:checked').value;"spot"===s?(this.stage.coating.animateCursorTap(),this.applyHealSpot(e)):"soft"===s?(this.stage.coating.animateCursorTap(),this.applyHealSoft(e)):(this.brushPoints=[],this.x=this.y=-1,"touch"!==t&&this.move(e),this.addMoveListeners())},this.x=-1,this.y=-1,this.move=e=>{let t=this.brush.getStep(),s=!1;if(e=this.stage.translateRasterToFresco(e,this.selected.rect),-1==this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0),e.x!==this.x||e.y!==this.y){let i=e.x-this.x,a=e.y-this.y,n=i>0?1:-1,r=a>0?1:-1;if(i=i<0?-i:i,a=a<0?-a:a,i>a){let e=.5*i;for(let o=1;o<=i;o++)this.x+=n,e+=a,e>=i&&(e-=i,this.y+=r),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}else{let e=.5*a;for(let o=1;o<=a;o++)this.y+=r,e+=i,e>=a&&(e-=a,this.x+=n),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}}s&&window.requestAnimationFrame(()=>this.stage.render())},this.drawShape=(e,t)=>{this.brushPoints.push(new c.A(e,t)),this.scratch.ctx.drawImage(this.brush.canvas,e,t)},this.up=async e=>{try{this.removeMoveListeners();const e=document.querySelector('input[name="heal-preset"]:checked').value,[t,s]=g[e];let i=50;"ultra"===e&&(i=100);let a=r.A.fromPointRects(this.brushPoints,this.brush.canvas.width,this.brush.canvas.height);if(a.x-=i,a.y-=i,a.width+=2*i,a.height+=2*i,a=a.intersect(new r.A(0,0,this.scratch.canvas.width,this.scratch.canvas.height)),!a)return;const o=n.ON(this.selected.canvas,a);this.workset=[a,o],await this.fill(a,!0,t,s),this.stage.history.add({type:"bitmapChange",kind:"healObject",layer:this.selected,patchRect:a,patch:o,rect:this.selected.rect.clone()})}finally{this.workset=null}},this.applyHealSpot=async e=>{try{(e=this.stage.translateRasterToFresco(e,this.selected.rect)).x-=~~(this.brush.canvas.width/2),e.y-=~~(this.brush.canvas.height/2),this.scratch.ctx.drawImage(this.brush.canvas,e.x,e.y);let t=this.brush.canvas.width,s=this.brush.canvas.height;const i=50;let a=new r.A(e.x-i,e.y-i,t+2*i,s+2*i);if(a=a.intersect(new r.A(0,0,this.scratch.canvas.width,this.scratch.canvas.height)),!a)return;const o=n.ON(this.selected.canvas,a);this.workset=[a,o];const[h,c]=g.balanced;await this.fill(a,!1,h,c),this.stage.history.add({type:"bitmapChange",kind:"healSpot",layer:this.selected,patchRect:a,patch:o,rect:this.selected.rect.clone()})}finally{this.workset=null}},this.fill=async(e,t,s,i)=>{t&&(this.stage.coating.removeCursorImage(),this.progress.show());const a=this.selected.canvas.getContext("2d"),r=a.getImageData(e.x,e.y,e.width,e.height),o=n.Nw(e.width,e.height),h=o.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,e.width,e.height),h.drawImage(this.scratch.canvas,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const c=h.getImageData(0,0,e.width,e.height);this.worker.send({image:r,neighbour:s,random:i,mask:c,intermediateImage:t},[r.data.buffer,c.data.buffer]),h.globalCompositeOperation="copy",h.drawImage(this.scratch.canvas,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const l=n.Nw(e.width,e.height),d=l.getContext("2d");for(d.globalCompositeOperation="destination-atop",this.scratch.clear(),this.stage.render();;){const{progress:t,image:s}=await this.worker.receive();if("done"===t){this.progress.update(1),a.putImageData(s,e.x,e.y);break}this.progress.update(t),s&&(d.putImageData(s,0,0),d.drawImage(o,0,0),a.drawImage(l,0,0,e.width,e.height,e.x,e.y,e.width,e.height),window.requestAnimationFrame(()=>{this.selected.render(),this.stage.render()}))}t&&(setTimeout(()=>this.progress.hide(),300),this.updateBrush()),this.selected.render(),this.stage.render()},this.cleanUpWorker=()=>{var e;if(null===(e=this.worker)||void 0===e||e.terminate(),this.progress.hide(),this.workset){const[e,t]=this.workset;this.selected.canvas.getContext("2d").putImageData(t,e.x,e.y),this.selected.render(),this.stage.render(),this.workset=null}},this.apply=()=>{},this.applyHealSoft=e=>{(e=this.stage.translateRasterToFresco(e,this.selected.rect)).x-=~~(this.brush.canvas.width/2),e.y-=~~(this.brush.canvas.height/2);let t=this.brush.canvas.width,s=this.brush.canvas.height;const i=new r.A(e.x,e.y,t,s),a=n.ON(this.selected.canvas,i);this.blendImages(e),this.selected.render(),this.stage.render(),this.stage.history.add({type:"bitmapChange",kind:"healSoft",layer:this.selected,patchRect:i,patch:a,rect:this.selected.rect.clone()})},this.blendImages=e=>{let t=this.brush.canvas.width,s=this.brush.canvas.height,i=this.brush.canvas.getContext("2d").getImageData(0,0,t,s),a=this.selected.canvas.getContext("2d");var n=a.getImageData(e.x,e.y,t,s),o=a.getImageData(e.x,e.y,t,s);o=this.createGradient(o,n);let h=new r.A(e.x-t,e.y-s,3*t,3*s),c=a.getImageData(h.x,h.y,h.width,h.height);var l=this.locateBestTexture(c,h,t);l.x+=e.x-t,l.y+=e.y-s;var d=a.getImageData(l.x,l.y,t,s);let p,u,m,g=1,y=0,v=0,f=0,b=0,w=0,A=0,x=0,k=0;for(;;){for(p=0,u=0,f=1;f<s-1;f++)for(v=1;v<t-1;v++)if(b=4*(f*t+v),i.data[b+3]>0)for(m=[4*((f-1)*t+v),4*((f+1)*t+v),4*(f*t+(v-1)),4*(f*t+(v+1))],A=0;A<3;A++){for(x=0,w=0;w<4;w++)i.data[b+3]>64?x+=o.data[m[w]+A]:x+=n.data[m[w]+A],x+=d.data[b+A]-d.data[m[w]+A];k=x/4,p+=Math.abs(k-o.data[b+A]),u+=Math.abs(k),o.data[b+A]=k}y++;var S=p/u;if(!S||g-S===0||y>250)break;g=S}a.putImageData(o,e.x,e.y)},this.locateBestTexture=(e,t,s)=>{let i=this.sobel(e),a=new c.A(-1,-1),n=Number.POSITIVE_INFINITY,o=new c.A(Math.round(t.width/2),Math.round(t.height/2));const h=Math.round(s/2);let l=new r.A(0,0,this.selected.canvas.width,this.selected.canvas.height);for(let c=0;c<40;c++){const e=o.y-Math.round(Math.sin(2*Math.PI*c/40)*s),d=o.x+Math.round(Math.cos(2*Math.PI*c/40)*s);if(!l.contains(new r.A(d-h+t.x,e-h+t.y,s,s)))continue;let p=this.computeEnergy(i,t.width,d-h,e-h,s);p<n&&(n=p,a.x=d-h,a.y=e-h)}return a},this.computeEnergy=(e,t,s,i,a)=>{let n=0;for(let r=i;r<i+a;r+=2)for(let i=s;i<s+a;i+=2){let s=e[r*t+i];n+=s*s}return n},this.pixelAt=(e,t,s,i)=>s[t*i+e],this.sobel=e=>{var t,s,i,a=e.width,n=e.height,r=[[-1,0,1],[-2,0,2],[-1,0,1]],o=[[-1,-2,-1],[0,0,0],[1,2,1]],h=new Array,c=new Array;for(s=0;s<n;s++)for(t=0;t<a;t++)i=4*(s*a+t),c.push(Math.round((e.data[i]+e.data[i+1]+e.data[i+2])/3));for(s=0;s<n;s++)for(t=0;t<a;t++){var l=r[0][0]*this.pixelAt(t-1,s-1,c,a)+r[0][1]*this.pixelAt(t,s-1,c,a)+r[0][2]*this.pixelAt(t+1,s-1,c,a)+r[1][0]*this.pixelAt(t-1,s,c,a)+r[1][1]*this.pixelAt(t,s,c,a)+r[1][2]*this.pixelAt(t+1,s,c,a)+r[2][0]*this.pixelAt(t-1,s+1,c,a)+r[2][1]*this.pixelAt(t,s+1,c,a)+r[2][2]*this.pixelAt(t+1,s+1,c,a),d=o[0][0]*this.pixelAt(t-1,s-1,c,a)+o[0][1]*this.pixelAt(t,s-1,c,a)+o[0][2]*this.pixelAt(t+1,s-1,c,a)+o[1][0]*this.pixelAt(t-1,s,c,a)+o[1][1]*this.pixelAt(t,s,c,a)+o[1][2]*this.pixelAt(t+1,s,c,a)+o[2][0]*this.pixelAt(t-1,s+1,c,a)+o[2][1]*this.pixelAt(t,s+1,c,a)+o[2][2]*this.pixelAt(t+1,s+1,c,a),p=Math.sqrt(l*l+d*d)>>>0;h.push(p)}return h},this.createGradient=(e,t)=>{var s,i,a=Math.round(.4*t.height);let n=Math.round(.1*a),r=~~(t.width/2),o=~~(t.height/2),h=t.width,c=0,l=0;for(var d=-a;d<a;d++)for(var p=-a;p<a;p++)(i=(Math.sqrt(d*d+p*p)+1)/(a-1))<1&&(s=Math.round(p/i+(Math.random()*n-n/2)),c=4*((o+d)*h+(r+p)),l=4*((o+Math.round(d/i+(Math.random()*n-n/2)))*h+(r+s)),e.data[c]=t.data[l],e.data[c+1]=t.data[l+1],e.data[c+2]=t.data[l+2]);n=Math.round(.5*a);for(d=-(a=Math.round(.8*a));d<a;d++)for(p=-a;p<a;p++)Math.sqrt(d*d+p*p)<a&&(s=Math.round(p+(Math.random()*n-n/2)),c=4*((o+d)*h+(r+p)),l=4*((o+Math.round(d+(Math.random()*n-n/2)))*h+(r+s)),e.data[c]=e.data[l],e.data[c+1]=e.data[l+1],e.data[c+2]=e.data[l+2]);return e},this.cleanUp=()=>{var e;this.cleanUpWorker(),null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.removeDownListeners(),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("zoom-change",this.updateBrush,!1),document.removeEventListener("fresco-select",this.changeMode,!1),document.removeEventListener("keydown",this.keyDown,!1),this.size.cleanUp(),this.progress.cleanUp(),document.getElementsByName("heal-mode").forEach(e=>{e.removeEventListener("click",this.changeMode,!1)}),this.selected=null,this.scratch=null},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),document.addEventListener("fresco-select",this.changeMode,!1),document.addEventListener("keydown",this.keyDown,!1),this.brush=new d.A(new p.A("circle",50,0)),this.progress=new u(this.stage),this.size=new h.A("heal-brush-size",{compact:!0,label:(0,a.A)("size")+":",step:2,range:[5,200],defaultValue:this.brush.settings.size,labelFormat:e=>e.toFixed(0),onEnd:e=>{this.brush.settings.size=e,this.updateBrush()}}),document.getElementsByName("heal-mode").forEach(e=>{e.addEventListener("click",this.changeMode,!1)}),this.addDownListeners(),this.changeMode(),this.layerSelect()}}},85900:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RecurringDetail=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.RecurringDetail=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"brand",baseName:"brand",type:"string"},{name:"brands",baseName:"brands",type:"Array<string>"},{name:"configuration",baseName:"configuration",type:"{ [key: string]: string; }"},{name:"fundingSource",baseName:"fundingSource",type:"RecurringDetail.FundingSourceEnum"},{name:"group",baseName:"group",type:"PaymentMethodGroup"},{name:"inputDetails",baseName:"inputDetails",type:"Array<InputDetail>"},{name:"issuers",baseName:"issuers",type:"Array<PaymentMethodIssuer>"},{name:"name",baseName:"name",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedDetails",baseName:"storedDetails",type:"StoredDetails"},{name:"type",baseName:"type",type:"string"}],function(e){let t;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={}))}(s=t.RecurringDetail||(t.RecurringDetail={}))},86344:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(42268),a=s(21742),n=s(26806),r=s(54738),o=s(40963),h=s(98244),c=s(23556),l=s(38665);class d extends n.A{constructor(e){super((0,a.A)("dialogAiCutoutTitle")),this.interupt=!1,this.run=async()=>{try{let e=this.stage.fresco.getSelected();const t=r.ON(e.mask),s=await(0,l.P)(e.canvas);if(this.interupt)return;const i=r.k8(s,1080);e.addMask();const a=new c.A;a.addShader("alpha-shift-mask",!0);e.mask.getContext("2d").drawImage(a.apply(i),0,0,e.mask.width,e.mask.height),e.render(),this.stage.render(),this.stage.history.add({type:"mask",layer:e,rect:new o.A(0,0,e.mask.width,e.mask.height),patch:t}),this.cleanUp()}catch(e){console.error(e),(0,i.Ay)("ai-icon").src="/img/icon/ai-err.svg",(0,i.Ay)("dialog-cancel"+this.mid).innerText=(0,a.A)("close"),(0,i.Ay)("ai-load").style.display="none",(0,i.Ay)("ai-message").innerText=window.navigator.onLine?(0,a.A)("genericError"):(0,a.A)("genericOffline")}},this.cancel=()=>{this.interupt=!0,this.cleanUp()},this.stage=e,this.dialog.style.width="300px",this.dialog.style.maxWidth="300px",this.setContent('\n            <img src="/img/icon/ai.svg" id="ai-icon" class="ic">\n            <div id="ai-load" class="ai-load"><div class="dot-floating"></div></div> \n            <div id="ai-message" class="top-20">Machines are doing their thing, please wait ..</div>\n        '),(0,i.Ay)("dialog-apply"+this.mid).style.display="none",(0,h.A)("run-ai-cutout"),this.run()}}},86445:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(54738),a=s(22866),n=s(7324),r=s(40963),o=s(15818),h=s(41915),c=s(66495),l=s(39989),d=s(6395),p=s(52038);class u extends a.A{constructor(e=i.Os(),t,s,m){super(a.A.TYPE_SHAPE),this.id=e,this.prepare=async()=>{if("svg"===this.shapeSettings.variant&&!this.image){let e=new Blob([this.shapeSettings.content],{type:"image/svg+xml"});this.image=await(0,d.Ep)(e),this.rect||(this.rect=new r.A(0,0,this.image.width,this.image.height))}"path"===this.shapeSettings.variant&&(this.path2D=new Path2D(this.shapeSettings.content)),this.shapeSettings.fillType&&(this.fill=await n.A.fromString(this.shapeSettings.fillType,this.shapeSettings.fillValue),document.dispatchEvent(new CustomEvent("layer-select"))),"line"===this.shapeSettings.variant&&this.shapeSettings.outlineSize!==this.rect.height&&(this.rect.height=this.shapeSettings.outlineSize),this.canvas||(this.canvas=i.Nw(this.rect.width,this.rect.height)),this.render()},this.setVariant=e=>{switch(e){case"rounded":this.shapeSettings.variant="rounded";break;case"rectangle":this.shapeSettings.variant="rectangle";break;case"ellipse":this.shapeSettings.variant="ellipse";break;case"line":this.shapeSettings.variant="line"}this.render()},this.setPath=(e,t=!1)=>{t||(this.shapeSettings.content=e),this.shapeSettings.variant="path",this.path2D=new Path2D(e),this.render()},this.setFill=(e,t=!1)=>{this.fill=e,t||(this.shapeSettings.fillType=this.fill?e.getType():void 0,this.shapeSettings.fillValue=this.fill?e.getStringValue():void 0),this.render()},this.setOutline=(e,t)=>{this.shapeSettings.outlineSize=e,this.shapeSettings.outlineColor=t,"line"===this.shapeSettings.variant&&(this.rect.height=0===e?1:e),this.render()},this.setShadow=(e,t,s,i,a,n)=>{this.shapeSettings.shadow=e,this.shapeSettings.shadowBlur=t,this.shapeSettings.shadowOpacity=s,this.shapeSettings.shadowColor=i,this.shapeSettings.shadowDistance=a,this.shapeSettings.shadowDirection=n,this.render()},this.setRadii=e=>{this.shapeSettings.radii=e,this.render()},this.render=(e=!1)=>{if(!this.canvas)return;const t=this.canvas.getContext("2d");if(this.canvas.width!==this.rect.width||this.canvas.height!==this.rect.height?(this.canvas.height=this.rect.height,this.canvas.width=this.rect.width):t.clearRect(0,0,this.canvas.width,this.canvas.height),"svg"===this.shapeSettings.variant)return t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",void t.drawImage(this.image,0,0,this.rect.width,this.rect.height);if("line"===this.shapeSettings.variant)t.fillStyle=this.shapeSettings.outlineColor,t.fillRect(0,0,this.rect.width,this.rect.height);else{t.save();let e,s=2*this.shapeSettings.outlineSize,i=this.shapeSettings.outlineSize,a=this.rect.width-s,n=this.rect.height-s,r=i>0,o=!(!this.fill||!this.fill.value);switch(t.lineWidth=s,t.strokeStyle=this.shapeSettings.outlineColor,this.shapeSettings.variant){case"path":e=new Path2D,e.addPath(this.path2D,(new DOMMatrix).scale(a/100,n/100)),t.translate(i,i);break;case"rounded":c.A.roundRect(t,i,i,a,n,this.shapeSettings.radii);break;case"rectangle":c.A.rectangle(t,i,i,a,n);break;case"ellipse":c.A.ellipse(t,new h.A(i,i),new h.A(i+a,i+n))}r&&e?t.stroke(e):r&&t.stroke(),o?this.fill.addToCanvasFillStyle(t):(t.fillStyle="#ffffff",t.globalCompositeOperation="destination-out"),e?t.fill(e):t.fill(),t.restore()}if(this.shapeSettings.shadow){this.baked||(this.baked=i.Nw(100,100));var s=100*this.shapeSettings.shadowBlur;s+=Math.abs(100*this.shapeSettings.shadowDistance),this.bect=new r.A(this.rect.x-s,this.rect.y-s,this.rect.width+2*s,this.rect.height+2*s,this.rect.rotation),this.baked.width=this.bect.width,this.baked.height=this.bect.height;let e=this.baked.getContext("2d");var a=(this.shapeSettings.shadowDirection-90)*Math.PI/180,n=Math.cos(a)*this.shapeSettings.shadowDistance,l=Math.sin(a)*this.shapeSettings.shadowDistance;e.save(),e.shadowColor=o.A.fromHEX(this.shapeSettings.shadowColor,Math.round(255*this.shapeSettings.shadowOpacity)).toRGBA(),e.shadowBlur=100*this.shapeSettings.shadowBlur,e.shadowOffsetX=100*n,e.shadowOffsetY=100*l,e.drawImage(this.canvas,s,s),e.restore()}else this.baked=void 0,this.bect=void 0},this.calculate=(e,t,s)=>{"line"===this.shapeSettings.variant?(this.rect.x=Math.round(e.x),this.rect.width=Math.round(t.x-e.x)):(this.rect.x=Math.round(e.x),this.rect.y=Math.round(e.y),this.rect.width=Math.round(t.x-e.x),this.rect.width<2&&(this.rect.width=2),0!==s?this.rect.height=Math.round(this.rect.width/s):(this.rect.height=Math.round(t.y-e.y),this.rect.height<2&&(this.rect.height=2)))},this.position=(e,t)=>{this.rect&&(void 0!==e&&(this.rect.x=e),void 0!==t&&(this.rect.y=t),this.bect&&(this.bect.x=this.rect.x-(this.bect.width-this.rect.width)/2,this.bect.y=this.rect.y-(this.bect.height-this.rect.height)/2))},this.scale=(e,t)=>{this.rect&&(this.rect.x=Math.round(this.rect.x*e),this.rect.y=Math.round(this.rect.y*t),this.rect.width=Math.round(this.rect.width*e),this.rect.height=Math.round(this.rect.height*t),this.rect.width<0&&(this.rect.width=1),this.rect.height<0&&(this.rect.height=1),this.shapeSettings.outlineSize>0&&(this.shapeSettings.outlineSize=Math.round(this.shapeSettings.outlineSize*e)),this.shapeSettings.shadow&&(this.shapeSettings.shadowDistance=Math.round(100*this.shapeSettings.shadowDistance*e)/100,this.shapeSettings.shadowBlur=Math.round(100*this.shapeSettings.shadowBlur*e)/100),this.render())},this.rotate=e=>{this.rect.rotation+=e?-90:90},this.rasterize=()=>{let e=this.baked?this.baked:this.canvas,t=this.bect?this.bect.clone():this.rect.clone();const s=new l.A(i.Os(),this.settings.name,e,t,this.settings.locked);return s.settings=Object.assign({},this.settings),s.applyTransform(),s},this.clone=(e=!1)=>{let t=new u(e?this.id:i.Os(),this.settings.name,this.rect.clone(),this.shapeSettings.clone());return t.settings=Object.assign({},this.settings),t.animation=p.A.clone(this.animation),t.prepare(),t},this.rect=s,this.settings.name=t,this.shapeSettings=m}}},86476:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StoredPaymentMethodDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.StoredPaymentMethodDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"StoredPaymentMethodDetails.TypeEnum"}],function(e){let t;!function(e){e.BcmcMobile="bcmc_mobile",e.BcmcMobileQr="bcmc_mobile_QR",e.BcmcMobileApp="bcmc_mobile_app",e.MomoWallet="momo_wallet",e.MomoWalletApp="momo_wallet_app",e.Twint="twint",e.PaymayaWallet="paymaya_wallet",e.GrabpaySg="grabpay_SG",e.GrabpayMy="grabpay_MY",e.GrabpayTh="grabpay_TH",e.GrabpayId="grabpay_ID",e.GrabpayVn="grabpay_VN",e.GrabpayPh="grabpay_PH",e.Oxxo="oxxo",e.Gcash="gcash",e.Dana="dana",e.Kakaopay="kakaopay",e.Truemoney="truemoney"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.StoredPaymentMethodDetails||(t.StoredPaymentMethodDetails={}))},86755:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(42268),a=s(17651);class n{constructor(e,t,s){this.path="M 0,0 H 100 V 100 H 0 Z",this.previewPath=e=>{this.setPath(e),this.preview&&this.preview(this.path)},this.callbackPath=e=>{this.setPath(e),this.callback&&this.callback(this.path)},this.setPath=e=>{this.path=e;let t=this.thumbnail.getContext("2d");t.clearRect(0,0,t.canvas.width,t.canvas.height);const s=new Path2D;s.addPath(new Path2D(this.path),(new DOMMatrix).scale((t.canvas.width-2)/100,(t.canvas.height-2)/100)),t.save(),t.lineWidth=1,t.translate(1,1),t.strokeStyle="rgba(255, 255, 255, 0.4)",t.fillStyle="rgba(0, 0, 0, 0.3)",t.fill(s),t.stroke(s),t.restore()},this.getPath=()=>this.path,this.toggle=()=>{new a.A(this.container,this.path,this.callbackPath,this.previewPath)},this.cleanUp=()=>{this.container.setAttribute("data",this.path),this.container.removeEventListener("click",this.toggle,!1)},this.preview=s,this.callback=t,this.container=(0,i.Ay)(e),this.container.hasChildNodes()?(this.thumbnail=(0,i.Ay)(e+"-canvas"),this.container.hasAttribute("data")&&(this.path=this.container.getAttribute("data"))):(this.container.classList.add("shape-pod"),this.thumbnail=(0,i.T)("canvas",{id:e+"-canvas",width:30,height:30}),this.container.append(this.thumbnail)),this.container.addEventListener("click",this.toggle,!1),this.setPath(this.path)}}},86779:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputDetail=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.InputDetail=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"configuration",baseName:"configuration",type:"{ [key: string]: string; }"},{name:"details",baseName:"details",type:"Array<SubInputDetail>"},{name:"inputDetails",baseName:"inputDetails",type:"Array<SubInputDetail>"},{name:"itemSearchUrl",baseName:"itemSearchUrl",type:"string"},{name:"items",baseName:"items",type:"Array<Item>"},{name:"key",baseName:"key",type:"string"},{name:"optional",baseName:"optional",type:"boolean"},{name:"type",baseName:"type",type:"string"},{name:"value",baseName:"value",type:"string"}]},86857:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidPayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AndroidPayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"type",baseName:"type",type:"AndroidPayDetails.TypeEnum"}],function(e){let t;!function(e){e.Androidpay="androidpay"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.AndroidPayDetails||(t.AndroidPayDetails={}))},86894:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataOpenInvoice=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataOpenInvoice=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"openinvoicedata_merchantData",baseName:"openinvoicedata.merchantData",type:"string"},{name:"openinvoicedata_numberOfLines",baseName:"openinvoicedata.numberOfLines",type:"string"},{name:"openinvoicedata_recipientFirstName",baseName:"openinvoicedata.recipientFirstName",type:"string"},{name:"openinvoicedata_recipientLastName",baseName:"openinvoicedata.recipientLastName",type:"string"},{name:"openinvoicedataLine_itemNr_currencyCode",baseName:"openinvoicedataLine[itemNr].currencyCode",type:"string"},{name:"openinvoicedataLine_itemNr_description",baseName:"openinvoicedataLine[itemNr].description",type:"string"},{name:"openinvoicedataLine_itemNr_itemAmount",baseName:"openinvoicedataLine[itemNr].itemAmount",type:"string"},{name:"openinvoicedataLine_itemNr_itemId",baseName:"openinvoicedataLine[itemNr].itemId",type:"string"},{name:"openinvoicedataLine_itemNr_itemVatAmount",baseName:"openinvoicedataLine[itemNr].itemVatAmount",type:"string"},{name:"openinvoicedataLine_itemNr_itemVatPercentage",baseName:"openinvoicedataLine[itemNr].itemVatPercentage",type:"string"},{name:"openinvoicedataLine_itemNr_numberOfItems",baseName:"openinvoicedataLine[itemNr].numberOfItems",type:"string"},{name:"openinvoicedataLine_itemNr_returnShippingCompany",baseName:"openinvoicedataLine[itemNr].returnShippingCompany",type:"string"},{name:"openinvoicedataLine_itemNr_returnTrackingNumber",baseName:"openinvoicedataLine[itemNr].returnTrackingNumber",type:"string"},{name:"openinvoicedataLine_itemNr_returnTrackingUri",baseName:"openinvoicedataLine[itemNr].returnTrackingUri",type:"string"},{name:"openinvoicedataLine_itemNr_shippingCompany",baseName:"openinvoicedataLine[itemNr].shippingCompany",type:"string"},{name:"openinvoicedataLine_itemNr_shippingMethod",baseName:"openinvoicedataLine[itemNr].shippingMethod",type:"string"},{name:"openinvoicedataLine_itemNr_trackingNumber",baseName:"openinvoicedataLine[itemNr].trackingNumber",type:"string"},{name:"openinvoicedataLine_itemNr_trackingUri",baseName:"openinvoicedataLine[itemNr].trackingUri",type:"string"}]},86924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseAdditionalDataNetworkTokens=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponseAdditionalDataNetworkTokens=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"networkToken_available",baseName:"networkToken.available",type:"string"},{name:"networkToken_bin",baseName:"networkToken.bin",type:"string"},{name:"networkToken_tokenSummary",baseName:"networkToken.tokenSummary",type:"string"}]},87151:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentCaptureResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentCaptureResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"paymentPspReference",baseName:"paymentPspReference",type:"string"},{name:"platformChargebackLogic",baseName:"platformChargebackLogic",type:"PlatformChargebackLogic"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"status",baseName:"status",type:"PaymentCaptureResponse.StatusEnum"},{name:"subMerchants",baseName:"subMerchants",type:"Array<SubMerchantInfo>"}],function(e){let t;!function(e){e.Received="received"}(t=e.StatusEnum||(e.StatusEnum={}))}(s=t.PaymentCaptureResponse||(t.PaymentCaptureResponse={}))},87257:(e,t,s)=>{s.d(t,{A:()=>S});var i=s(42268),a=s(75770),n=s(22866),r=s(26651),o=s(21742),h=s(54738),c=s(40963),l=s(41915),d=s(29755);class p{constructor(e,t,s,i,a,n){this.p0=e,this.p1=t,this.p2=s,this.t0=i,this.t1=a,this.t2=n}}var u=s(97266);class m{constructor(e,t){if(this.addPointer=e=>{this.pointers.push(e),this.modal.setPointerCapture(e)},this.removePointer=e=>{for(let t=0;t<this.pointers.length;t++)if(this.pointers[t]===e){this.pointers.splice(t,1);break}this.modal.releasePointerCapture(e)},this.pointerDown=e=>{if(e.stopPropagation(),this.stage.coating.override||e.button>0)return;this.addPointer(e.pointerId);const t=d.Ay.isHDPI?2:1;1===this.pointers.length&&this.down(new l.A((e.offsetX-this.stage.canvas.offsetLeft)*t,(e.offsetY-this.stage.canvas.offsetTop)*t))},this.pointerMove=e=>{e.stopPropagation();const t=d.Ay.isHDPI?2:1;this.move(new l.A((e.offsetX-this.stage.canvas.offsetLeft)*t,(e.offsetY-this.stage.canvas.offsetTop)*t))},this.pointerUp=e=>{e.stopPropagation(),this.removePointer(e.pointerId);const t=d.Ay.isHDPI?2:1;this.up(new l.A((e.offsetX-this.stage.canvas.offsetLeft)*t,(e.offsetY-this.stage.canvas.offsetTop)*t))},this.keyDown=e=>{if(27!==e.keyCode){if(13!==e.keyCode)return 32===e.keyCode?(this.stage.coating.setPan(this.modal),void e.preventDefault()):void 0;this.apply()}else this.cancel()},this.keyUp=e=>{if(32===e.keyCode)return this.stage.coating.removePan(this.modal),this.split=28,void this.render()},this.inputPosition=e=>{this.TL.x=Number((0,i.Ay)("distort-x1").value),this.TL.y=Number((0,i.Ay)("distort-y1").value),this.TR.x=Number((0,i.Ay)("distort-x2").value),this.TR.y=Number((0,i.Ay)("distort-y2").value),this.BL.x=Number((0,i.Ay)("distort-x3").value),this.BL.y=Number((0,i.Ay)("distort-y3").value),this.BR.x=Number((0,i.Ay)("distort-x4").value),this.BR.y=Number((0,i.Ay)("distort-y4").value),window.requestAnimationFrame(this.render)},this.updateInputs=()=>{(0,i.Ay)("distort-x1").value=Math.round(this.TL.x).toString(),(0,i.Ay)("distort-y1").value=Math.round(this.TL.y).toString(),(0,i.Ay)("distort-x2").value=Math.round(this.TR.x).toString(),(0,i.Ay)("distort-y2").value=Math.round(this.TR.y).toString(),(0,i.Ay)("distort-x3").value=Math.round(this.BL.x).toString(),(0,i.Ay)("distort-y3").value=Math.round(this.BL.y).toString(),(0,i.Ay)("distort-x4").value=Math.round(this.BR.x).toString(),(0,i.Ay)("distort-y4").value=Math.round(this.BR.y).toString()},this.down=async e=>{this.downPoint=this.stage.translateRasterToFresco(e),this.isControl(this.downPoint)?(this.split=8,this.isDown=!0,this.downPosition=this.ss.clone(),window.requestAnimationFrame(this.render)):this.isInside(this.downPoint)?(this.split=5,this.isMove=!0,this.isDown=!0,this.offset=new l.A,window.requestAnimationFrame(this.render)):this.choice()},this.move=e=>{e=this.stage.translateRasterToFresco(e),this.isDown?(this.isMove?(this.offset.x=this.downPoint.x-e.x,this.offset.y=this.downPoint.y-e.y):(this.ss.x=this.downPosition.x+(e.x-this.downPoint.x),this.ss.y=this.downPosition.y+(e.y-this.downPoint.y),this.updateInputs()),window.requestAnimationFrame(this.render)):this.isControl(e)?this.modal.style.cursor="pointer":this.isInside(e)?this.modal.style.cursor="move":this.modal.style.cursor="unset"},this.up=e=>{this.isDown&&(this.isMove&&(this.TL=this.TL.neg(this.offset),this.TR=this.TR.neg(this.offset),this.BL=this.BL.neg(this.offset),this.BR=this.BR.neg(this.offset)),this.split=28,this.ss=void 0,this.isDown=!1,this.isMove=!1,this.offset=void 0,this.downPoint=void 0,this.downPosition=void 0,window.requestAnimationFrame(this.render),this.updateInputs())},this.renderLow=()=>{this.split=5,this.renderControls(),this.renderPreview()},this.render=()=>{this.renderControls(),this.renderPreview(),this.stage.render()},this.renderPreview=()=>{let e=this.scratch.ctx;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high";const t=this.calculateGeometry();t.forEach(t=>{this.drawTriangle(e,t.p0.x,t.p0.y,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.t0.x,t.t0.y,t.t1.x,t.t1.y,t.t2.x,t.t2.y)}),this.split>=20&&(t.forEach(t=>{this.drawTriangle(e,t.p0.x,t.p0.y,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.t0.x,t.t0.y,t.t1.x,t.t1.y,t.t2.x,t.t2.y)}),t.forEach(t=>{this.drawTriangle(e,t.p0.x,t.p0.y,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.t0.x,t.t0.y,t.t1.x,t.t1.y,t.t2.x,t.t2.y)}),e.imageSmoothingEnabled=!0,t.forEach(t=>{this.drawTriangle(e,t.p0.x,t.p0.y,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.t0.x,t.t0.y,t.t1.x,t.t1.y,t.t2.x,t.t2.y)}))},this.calculateGeometry=()=>{let e=[];for(var t=this.split,s=this.split,i=this.offset?this.TL.neg(this.offset):this.TL,a=this.offset?this.TR.neg(this.offset):this.TR,n=this.offset?this.BR.neg(this.offset):this.BR,r=this.offset?this.BL.neg(this.offset):this.BL,o=r.x-i.x,h=r.y-i.y,c=n.x-a.x,d=n.y-a.y,u=this.patch.width,m=this.patch.height,g=0;g<t;++g)for(var y=g/t,v=(g+1)/t,f=i.x+o*y,b=i.y+h*y,w=a.x+c*y,A=a.y+d*y,x=i.x+o*v,k=i.y+h*v,S=a.x+c*v,E=a.y+d*v,T=0;T<s;++T){var C=T/s,M=(T+1)/s,P=S-x,D=E-k,N=f+(w-f)*C,L=b+(A-b)*C,R=f+(w-f)*M,_=b+(A-b)*M,I=x+P*M,F=k+D*M,z=x+P*C,O=k+D*C,q=C*u,B=M*u,U=y*m,H=v*m;e.push(new p(new l.A(N,L),new l.A(I,F),new l.A(z,O),new l.A(q,U),new l.A(B,H),new l.A(q,H))),e.push(new p(new l.A(N,L),new l.A(R,_),new l.A(I,F),new l.A(q,U),new l.A(B,U),new l.A(B,H)))}return e},this.drawTriangle=(e,t,s,i,a,n,r,o,h,c,l,d,p)=>{e.save(),e.beginPath(),e.moveTo(t,s),e.lineTo(i,a),e.lineTo(n,r),e.closePath(),e.clip();var u=o*(p-l)-c*p+d*l+(c-d)*h;if(0!==u){var m=-(h*(n-i)-l*n+p*i+(l-p)*t)/u,g=(l*r+h*(a-r)-p*a+(p-l)*s)/u,y=(o*(n-i)-c*n+d*i+(c-d)*t)/u,v=-(c*r+o*(a-r)-d*a+(d-c)*s)/u,f=(o*(p*i-l*n)+h*(c*n-d*i)+(d*l-c*p)*t)/u,b=(o*(p*a-l*r)+h*(c*r-d*a)+(d*l-c*p)*s)/u;e.transform(m,g,y,v,f,b),e.drawImage(this.patch,0,0),e.restore()}},this.renderControls=()=>{if(!this.stage||!this.stage.fresco||this.stage.supressRender)return;this.ctx.clearRect(0,0,this.raster.width,this.raster.height),d.Ay.isHDPI?this.ctx.lineWidth=2:(this.ctx.lineWidth=1,this.ctx.translate(.5,.5)),this.ctx.strokeStyle=h.q5,this.ctx.fillStyle=h.q5;const e=this.stage.translateFrescoToRaster(this.offset?this.TL.neg(this.offset):this.TL),t=this.stage.translateFrescoToRaster(this.offset?this.TR.neg(this.offset):this.TR),s=this.stage.translateFrescoToRaster(this.offset?this.BL.neg(this.offset):this.BL),i=this.stage.translateFrescoToRaster(this.offset?this.BR.neg(this.offset):this.BR);this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(t.x-1,t.y),this.ctx.lineTo(i.x-1,i.y-1),this.ctx.lineTo(s.x,s.y-1),this.ctx.lineTo(e.x,e.y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.fillStyle=h.bi;let a=8;d.Ay.isHDPI?(a=16,this.ctx.lineWidth=3):this.ctx.lineWidth=1.5,this.isDown&&this.ss&&this.ss!==this.TL||(this.ctx.beginPath(),this.ctx.arc(e.x,e.y,16,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()),this.isDown&&this.ss&&this.ss!==this.BL||(this.ctx.beginPath(),this.ctx.arc(s.x,s.y,16,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()),this.isDown&&this.ss&&this.ss!==this.TR||(this.ctx.beginPath(),this.ctx.arc(t.x,t.y,16,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()),this.isDown&&this.ss&&this.ss!==this.BR||(this.ctx.beginPath(),this.ctx.arc(i.x,i.y,16,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke())},this.isControl=e=>{let t=32/this.stage.zoom,s=t/2;return h.HO(this.TL.x-s,this.TL.y-s,t,t,e.x,e.y)?(this.ss=this.TL,!0):h.HO(this.TR.x-s,this.TR.y-s,t,t,e.x,e.y)?(this.ss=this.TR,!0):h.HO(this.BL.x-s,this.BL.y-s,t,t,e.x,e.y)?(this.ss=this.BL,!0):h.HO(this.BR.x-s,this.BR.y-s,t,t,e.x,e.y)?(this.ss=this.BR,!0):(this.ss=void 0,!1)},this.isInside=e=>this.scratch.ctx.getImageData(e.x,e.y,1,1).data[3]>0,this.choice=async()=>{const e=await new u.A("Apply","Do you want to apply the distort?","Yes","No","Cancel").init();void 0!==e&&(e?this.apply():this.cancel())},this.apply=async()=>{if(!(this.oTL.equalTo(this.TL)&&this.oTR.equalTo(this.TR)&&this.oBL.equalTo(this.BL)&&this.oBR.equalTo(this.BR))){let e=c.A.fromPoints([this.TL,this.TR,this.BL,this.BR]);this.split=64,this.offset=e.topLeft(),this.scratch.setTarget(this.selected.id,this.clone?e:new c.A(0,0,e.width,e.height),this.clone?"over":"replace"),this.renderPreview();const t=this.selected.rect.clone(),s=h.oM(this.clone?this.clone:this.selected.canvas);return this.clone?(this.selected.extendCanvas(e),this.scratch.drawToLayer(this.selected)):this.selected.switchCanvas(this.scratch.canvas,e),this.selected.render(),this.stage.history.add({type:"bitmapSwitch",kind:"distort",layer:this.selected,rect:t,canvas:s}),void this.callback(!!this.clone)}this.cancel()},this.cancel=()=>{this.clone&&(this.selected.canvas=this.clone),this.callback()},this.cleanUp=()=>{var e,t;this.modal&&(this.ctx.clearRect(0,0,this.raster.width,this.raster.width),this.stage&&this.stage.fresco&&(this.stage.fresco.removeScratch(),window.requestAnimationFrame(this.stage.render)),this.stage.coating.wake(),this.modal.removeEventListener("pointerdown",this.pointerDown,!1),this.modal.removeEventListener("pointermove",this.pointerMove,!1),this.modal.removeEventListener("pointerup",this.pointerUp,!1),this.modal.removeEventListener("dblclick",this.choice,!1),this.modal.removeEventListener("wheel",this.stage.coating.mouseWheel),this.modal.removeEventListener("contextmenu",e=>{e.preventDefault()},!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),document.removeEventListener("viewport-render",this.renderLow),(0,i.Ay)("distort-apply").removeEventListener("click",this.apply,!1),(0,i.Ay)("distort-cancel").removeEventListener("click",this.cancel,!1),(0,i.Ay)("distort-x1").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-y1").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-x2").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-y2").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-x3").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-y3").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-x4").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-y4").removeEventListener("input",this.inputPosition,!1),null===(e=this.modal)||void 0===e||e.remove(),this.modal=void 0,null===(t=this.options)||void 0===t||t.remove(),this.options=void 0,this.scratch=void 0,this.raster=void 0,this.stage=void 0,this.ctx=void 0)},this.stage=e,this.callback=t,this.ctx=e.coating.ctx,this.raster=e.coating.raster,this.stage.fresco&&this.stage.fresco.isSelectedImageWithCanvas()){if(this.pointers=new Array,this.selected=this.stage.fresco.getSelected(),this.stage.fresco.hasSelection()){this.clone=h.oM(this.selected.canvas);const[e,t]=this.stage.primeCut();if(!e)return void this.callback();this.patch=e,this.oTL=t.topLeft(),this.oTR=t.topRight(),this.oBL=t.bottomLeft(),this.oBR=t.bottomRight()}else this.patch=this.selected.canvas,this.oTL=this.selected.rect.topLeft(),this.oTR=this.selected.rect.topRight(),this.oBL=this.selected.rect.bottomLeft(),this.oBR=this.selected.rect.bottomRight();this.stage.coating.sleep(),this.offset=new l.A,this.TL=this.oTL.clone(),this.TR=this.oTR.clone(),this.BL=this.oBL.clone(),this.BR=this.oBR.clone(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,new c.A(0,0,this.stage.fresco.width,this.stage.fresco.height),this.clone?"over":"replace"),this.modal=(0,i.T)("div",{id:"modal-distort",className:"modal"}),(0,i.Ay)("workspace").appendChild(this.modal),this.options=(0,i.T)("div",{id:"distort",className:"option-float option active"},(0,i.T)("div",{className:"option-icon"},(0,i.T)("img",{src:"/img/tool/distort.svg",className:"ic"})),(0,i.T)("div",{id:"distort-settings"},(0,i.T)("label",{className:"tab-10"},"Left top:"),(0,i.T)("input",{type:"number",id:"distort-x1"}),(0,i.T)("label",{className:"tab-5"},"x"),(0,i.T)("input",{type:"number",id:"distort-y1"}),(0,i.T)("label",{className:"tab-20"},"Right top:"),(0,i.T)("input",{type:"number",id:"distort-x2"}),(0,i.T)("label",{className:"tab-5"},"x"),(0,i.T)("input",{type:"number",id:"distort-y2"}),(0,i.T)("label",{className:"tab-20"},"Left bottom:"),(0,i.T)("input",{type:"number",id:"distort-x3"}),(0,i.T)("label",{className:"tab-5"},"x"),(0,i.T)("input",{type:"number",id:"distort-y3"}),(0,i.T)("label",{className:"tab-20"},"Right bottom:"),(0,i.T)("input",{type:"number",id:"distort-x4"}),(0,i.T)("label",{className:"tab-5"},"x"),(0,i.T)("input",{type:"number",id:"distort-y4"}),(0,i.T)("a",{className:"button outline tab-30",id:"distort-cancel"},(0,i.T)("img",{src:"/img/icon/close.svg",width:10,height:10,className:"ic"}),(0,o.A)("cancel")),(0,i.T)("a",{className:"button outline tab-10",id:"distort-apply"},(0,i.T)("img",{src:"/img/icon/check.svg",width:16,height:16,className:"ic"}),(0,o.A)("apply")))),(0,i.Ay)("workspace").appendChild(this.options),(0,i.Ay)("distort-apply").addEventListener("click",this.apply,!1),(0,i.Ay)("distort-cancel").addEventListener("click",this.cancel,!1),(0,i.Ay)("distort-x1").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-y1").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-x2").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-y2").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-x3").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-y3").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-x4").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("distort-y4").addEventListener("input",this.inputPosition,!1),this.split=28,this.modal.addEventListener("pointerdown",this.pointerDown,!1),this.modal.addEventListener("pointermove",this.pointerMove,!1),this.modal.addEventListener("pointerup",this.pointerUp,!1),this.modal.addEventListener("dblclick",this.choice,!1),this.modal.addEventListener("wheel",this.stage.coating.mouseWheel,{passive:!1}),this.modal.addEventListener("contextmenu",e=>{e.preventDefault()},!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),document.addEventListener("viewport-render",this.renderLow),window.requestAnimationFrame(this.render),this.updateInputs()}else this.callback()}}var g=s(82042),y=s(7245),v=s(21404);class f{constructor(e,t){if(this.addPointer=e=>{this.pointers.push(e),this.modal.setPointerCapture(e)},this.removePointer=e=>{for(let t=0;t<this.pointers.length;t++)if(this.pointers[t]===e){this.pointers.splice(t,1);break}this.modal.releasePointerCapture(e)},this.pointerDown=e=>{if(e.stopPropagation(),this.stage.coating.override||e.button>0)return;this.isDown=!0,this.addPointer(e.pointerId);let t=new l.A(e.offsetX-this.stage.canvas.offsetLeft,e.offsetY-this.stage.canvas.offsetTop);if(!h.HO(0,0,this.raster.offsetWidth,this.raster.offsetHeight,t.x,t.y))return void this.choice();const s=d.Ay.isHDPI?2:1;1===this.pointers.length&&this.down(new l.A(t.x*s,t.y*s))},this.pointerMove=e=>{e.stopPropagation();const t=d.Ay.isHDPI?2:1;this.pointers.length<2&&this.move(new l.A((e.offsetX-this.stage.canvas.offsetLeft)*t,(e.offsetY-this.stage.canvas.offsetTop)*t))},this.pointerUp=e=>{e.stopPropagation(),this.isDown=!1,this.removePointer(e.pointerId);const t=d.Ay.isHDPI?2:1;this.up(new l.A((e.offsetX-this.stage.canvas.offsetLeft)*t,(e.offsetY-this.stage.canvas.offsetTop)*t))},this.inputPosition=e=>{let t=(0,i.Ay)("transform-top").value,s=(0,i.Ay)("transform-left").value,a=new l.A(Math.round(Number(s)),Math.round(Number(t)));this.layer.rect.x=a.x,this.layer.rect.y=a.y,this.renderAll()},this.inputSize=e=>{if("transform-width"==e.currentTarget.id){let e=(0,i.Ay)("transform-width").value,t=Number.isNaN(Number(e))?50:Math.round(Number(e));this.layer.setWidth(t,this.orgRect.getAspect()),(0,i.Ay)("transform-height").value=Math.round(this.layer.rect.height).toString()}else{let e=(0,i.Ay)("transform-height").value,t=Number.isNaN(Number(e))?50:Math.round(Number(e));this.layer.setHeight(t,this.orgRect.getAspect()),(0,i.Ay)("transform-width").value=Math.round(this.layer.rect.width).toString()}this.renderAll()},this.updateInputs=()=>{(0,i.Ay)("transform-width").value=Math.round(this.layer.rect.width).toString(),(0,i.Ay)("transform-height").value=Math.round(this.layer.rect.height).toString(),(0,i.Ay)("transform-top").value=Math.round(this.layer.rect.y).toString(),(0,i.Ay)("transform-left").value=Math.round(this.layer.rect.x).toString(),this.rotation.setValue(this.layer.rect.rotation)},this.keyDown=e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key){let t=e.shiftKey?10:1,s="ArrowLeft"===e.key||"ArrowRight"===e.key?"ArrowLeft"===e.key?-t:t:0,i="ArrowUp"===e.key||"ArrowDown"===e.key?"ArrowUp"===e.key?-t:t:0;this.step(s,i)}if("Escape"!==e.key)if("Enter"!==e.key){if("Shift"!==e.key)return" "===e.key?(this.stage.coating.setPan(this.modal),void e.preventDefault()):void 0;this.isShiftDown=!0}else this.apply();else this.cancel()},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1)," "!==e.key||this.stage.coating.removePan(this.modal)},this.down=e=>{if(this.isControl(e)){if(this.isDown=!0,this.downControl=this.layer.rect.topLeft(),this.downPoint=this.stage.translateRasterToFresco(e),"rotate"===this.method){let e=this.layer.rect.center();this.downRotation=180/Math.PI*Math.atan2(this.downPoint.y-e.y,this.downPoint.x-e.x)-this.layer.rect.rotation}else if("move"!==this.method){const e=this.layer.rect,t=e.center();let s,i;switch(this.matrix.reset(),this.matrix.translate(t),this.matrix.rotateDegree(360-this.layer.rect.rotation),this.matrix.invert(),this.method){case"nw-resize":i=e.topLeft(),s=e.bottomRight();break;case"n-resize":i=new l.A(t.x,e.y),s=new l.A(t.x,e.bottom());break;case"ne-resize":i=e.topRight(),s=e.bottomLeft();break;case"e-resize":i=new l.A(e.right(),t.y),s=new l.A(e.x,t.y);break;case"se-resize":i=e.bottomRight(),s=e.topLeft();break;case"s-resize":i=new l.A(t.x,e.bottom()),s=new l.A(t.x,e.y);break;case"sw-resize":i=e.bottomLeft(),s=e.topRight();break;case"w-resize":i=new l.A(e.x,t.y),s=new l.A(e.right(),t.y)}this.downControl=this.matrix.transformPoint(i).add(t),this.downAnchor=this.matrix.transformPoint(s).add(t)}}else this.choice()},this.getAnchor=()=>{const e=this.layer.rect,t=e.center();let s;switch(this.matrix.reset(),this.matrix.translate(t),this.matrix.rotateDegree(360-this.layer.rect.rotation),this.matrix.invert(),this.method){case"nw-resize":s=e.bottomRight();break;case"n-resize":s=new l.A(t.x,e.bottom());break;case"ne-resize":s=e.bottomLeft();break;case"e-resize":s=new l.A(e.x,t.y);break;case"se-resize":s=e.topLeft();break;case"s-resize":s=new l.A(t.x,e.y);break;case"sw-resize":s=e.topRight();break;case"w-resize":s=new l.A(e.right(),t.y)}return this.matrix.transformPoint(s).add(t)},this.move=e=>{if(!this.isDown)return void this.isControl(e);let t=this.stage.translateRasterToFresco(e);if("move"===this.method){if(this.isShiftDown){const e=Math.abs(this.downPoint.x-t.x),s=Math.abs(this.downPoint.y-t.y);(e>4||s>4)&&(e<s?(t.x=this.downPoint.x,this.method="vertical"):(t.y=this.downPoint.y,this.method="horizontal"))}this.layer.rect.x=Math.round(this.downControl.x+(t.x-this.downPoint.x)),this.layer.rect.y=Math.round(this.downControl.y+(t.y-this.downPoint.y)),this.checkGuides(this.layer)}else if("vertical"===this.method)this.isShiftDown||(this.method="move"),this.layer.rect.y=Math.round(this.downControl.y+(t.y-this.downPoint.y)),this.checkGuides(this.layer);else if("horizontal"===this.method)this.isShiftDown||(this.method="move"),this.layer.rect.x=Math.round(this.downControl.x+(t.x-this.downPoint.x)),this.checkGuides(this.layer);else if("rotate"===this.method){const s=this.layer.rect.center();let i=180/Math.PI*Math.atan2(t.y-s.y,t.x-s.x)-this.downRotation;this.isShiftDown&&(i=11.25*Math.round(i/11.25)),i<0?i+=360:i>=360&&(i-=360),this.layer.rect.rotation=i,this.updateRotatingCursor(e)}else{let e=t.neg(this.downPoint),s=this.downAnchor,i=this.downControl.add(e);if(0!==this.layer.rect.rotation){const e=new l.A((s.x+i.x)/2,(s.y+i.y)/2);this.matrix.reset(),this.matrix.translate(e),this.matrix.rotateDegree(this.layer.rect.rotation),this.matrix.invert(),i=this.matrix.transformPoint(i).add(e),s=this.matrix.transformPoint(s).add(e)}switch(this.method){case"nw-resize":this.layer.calculate(i,s,this.isShiftDown?0:this.orgRect.getAspect());break;case"ne-resize":this.layer.calculate(new l.A(s.x,i.y),new l.A(i.x,s.y),this.isShiftDown?0:this.orgRect.getAspect());break;case"sw-resize":this.layer.calculate(new l.A(i.x,s.y),new l.A(s.x,i.y),this.isShiftDown?0:this.orgRect.getAspect());break;case"se-resize":this.layer.calculate(s,i,this.isShiftDown?0:this.orgRect.getAspect());break;case"n-resize":this.layer.rect.y=i.y,this.layer.rect.height=s.y-i.y,this.layer.rect.height<10&&(this.layer.rect.height=10);break;case"s-resize":this.layer.rect.y=s.y,this.layer.rect.height=i.y-s.y,this.layer.rect.height<10&&(this.layer.rect.height=10);break;case"w-resize":this.layer.rect.x=i.x,this.layer.rect.width=s.x-i.x,this.layer.rect.width<10&&(this.layer.rect.width=10);break;case"e-resize":this.layer.rect.x=s.x,this.layer.rect.width=i.x-s.x,this.layer.rect.width<10&&(this.layer.rect.width=10)}let a=this.downAnchor.neg(this.getAnchor());this.layer.rect.x+=a.x,this.layer.rect.y+=a.y}this.updateInputs(),this.renderAll()},this.up=e=>{this.guides=void 0,this.isDown=!1,this.renderAll()},this.step=(e,t)=>{this.layer.rect.x+=e,this.layer.rect.y+=t,this.updateInputs(),this.renderAll()},this.renderAll=()=>{window.requestAnimationFrame(()=>{this.stage.render(),this.render()})},this.render=()=>{if(!this.ctx)return;this.ctx.clearRect(0,0,this.raster.width,this.raster.height),d.Ay.isHDPI?this.ctx.lineWidth=2:(this.ctx.lineWidth=1,this.ctx.translate(.5,.5)),this.ctx.strokeStyle=h.q5,this.ctx.fillStyle=h.q5;let e=this.stage.getLayerLocationRect(this.layer);if(e){if(0!==this.layer.rect.rotation){let t=e.center();this.ctx.translate(t.x,t.y),this.ctx.rotate(this.layer.rect.rotation*Math.PI/180),e.x-=t.x,e.y-=t.y}if(this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(e.right()-1,e.y),this.ctx.lineTo(e.right()-1,e.bottom()-1),this.ctx.lineTo(e.x,e.bottom()-1),this.ctx.lineTo(e.x,e.y),this.ctx.closePath(),this.ctx.stroke(),!this.isDown){0===this.layer.rect.rotation&&this.ctx.setTransform(1,0,0,1,0,0);var t=e.center();t.x=Math.round(t.x),t.y=Math.round(t.y),this.ctx.fillRect(e.x-6,e.y-6,12,12),this.ctx.fillRect(e.x-6,e.y+e.height-6,12,12),this.ctx.fillRect(e.x+e.width-6,e.y-6,12,12),this.ctx.fillRect(e.x+e.width-6,e.y+e.height-6,12,12),e.width>100&&(this.ctx.fillRect(t.x-12,e.y-5,24,8),this.ctx.fillRect(t.x-12,e.y+e.height-3,24,8)),e.height>100&&(this.ctx.fillRect(e.x-5,t.y-12,8,24),this.ctx.fillRect(e.x+e.width-3,t.y-12,8,24)),this.ctx.fillStyle=h.bi,this.ctx.fillRect(e.x-5,e.y-5,10,10),this.ctx.fillRect(e.x-5,e.y+e.height-5,10,10),this.ctx.fillRect(e.x+e.width-5,e.y-5,10,10),this.ctx.fillRect(e.x+e.width-5,e.y+e.height-5,10,10),e.width>100&&(this.ctx.fillRect(t.x-11,e.y-4,22,6),this.ctx.fillRect(t.x-11,e.y+e.height-2,22,6)),e.height>100&&(this.ctx.fillRect(e.x-4,t.y-11,6,22),this.ctx.fillRect(e.x+e.width-2,t.y-11,6,22))}this.ctx.setTransform(1,0,0,1,0,0),d.Ay.showGuides&&this.guides&&this.guides.length>0&&(d.Ay.isHDPI||this.ctx.translate(.5,.5),this.ctx.strokeStyle=h.Al,this.guides.forEach(e=>{this.ctx.beginPath(),this.ctx.moveTo(e.start.x,e.start.y),this.ctx.lineTo(e.end.x,e.end.y),this.ctx.closePath(),this.ctx.stroke()}),this.ctx.setTransform(1,0,0,1,0,0))}},this.isControl=e=>{const t=2*this.hitSize,s=this.stage.getLayerLocationRect(this.layer);if(!s)return;if(0!==this.layer.rect.rotation){let t=s.center();this.matrix.reset(),this.matrix.translate(t),this.matrix.rotateDegree(this.layer.rect.rotation),this.matrix.invert(),e=this.matrix.transformPoint(e).add(t)}if(h.HO(s.x-this.hitSize,s.y-this.hitSize,t,t,e.x,e.y))return this.modal.style.cursor=this.getRotatedCursor(315),this.method="nw-resize",!0;if(h.HO(s.x+s.width-this.hitSize,s.y-this.hitSize,t,t,e.x,e.y))return this.modal.style.cursor=this.getRotatedCursor(45),this.method="ne-resize",!0;if(h.HO(s.x-this.hitSize,s.y+s.height-this.hitSize,t,t,e.x,e.y))return this.modal.style.cursor=this.getRotatedCursor(225),this.method="sw-resize",!0;if(h.HO(s.x+s.width-this.hitSize,s.y+s.height-this.hitSize,t,t,e.x,e.y))return this.modal.style.cursor=this.getRotatedCursor(135),this.method="se-resize",!0;const i=s.width/2,a=s.height/2;return h.HO(s.x+i-30,s.y-this.hitSize,60,t,e.x,e.y)?(this.modal.style.cursor=this.getRotatedCursor(0),this.method="n-resize",!0):h.HO(s.x+i-30,s.y+s.height-this.hitSize,60,t,e.x,e.y)?(this.modal.style.cursor=this.getRotatedCursor(180),this.method="s-resize",!0):h.HO(s.x-this.hitSize,s.y+a-30,t,60,e.x,e.y)?(this.modal.style.cursor=this.getRotatedCursor(90),this.method="w-resize",!0):h.HO(s.x+s.width-this.hitSize,s.y+a-30,t,60,e.x,e.y)?(this.modal.style.cursor=this.getRotatedCursor(270),this.method="e-resize",!0):h.HO(s.x,s.y,s.width,s.height,e.x,e.y)?(this.modal.style.cursor="move",this.method="move",!0):h.HO(s.x+s.width-100,s.y-100,200,200,e.x,e.y)?(this.modal.style.cursor=this.getRotatedCursor(45,!1),this.method="rotate",!0):h.HO(s.x+s.width-100,s.y+s.height-100,200,200,e.x,e.y)?(this.modal.style.cursor=this.getRotatedCursor(135,!1),this.method="rotate",!0):h.HO(s.x-100,s.y+s.height-100,200,200,e.x,e.y)?(this.modal.style.cursor=this.getRotatedCursor(225,!1),this.method="rotate",!0):h.HO(s.x-100,s.y-100,200,200,e.x,e.y)?(this.modal.style.cursor=this.getRotatedCursor(315,!1),this.method="rotate",!0):(this.modal.style.cursor=this.method="unset",!1)},this.updateRotatingCursor=e=>{const t=this.stage.getLayerLocationRect(this.layer);if(!t)return;let s=t.center();this.matrix.reset(),this.matrix.translate(s),this.matrix.rotate(this.layer.rect.rotation*Math.PI/180),this.matrix.invert(),e=this.matrix.transformPoint(e).add(s),h.HO(t.x+t.width-100,t.y-100,200,200,e.x,e.y)?this.modal.style.cursor=this.getRotatedCursor(45,!1):h.HO(t.x+t.width-100,t.y+t.height-100,200,200,e.x,e.y)?this.modal.style.cursor=this.getRotatedCursor(135,!1):h.HO(t.x-100,t.y+t.height-100,200,200,e.x,e.y)?this.modal.style.cursor=this.getRotatedCursor(225,!1):h.HO(t.x-100,t.y-100,200,200,e.x,e.y)&&(this.modal.style.cursor=this.getRotatedCursor(315,!1))},this.getRotatedCursor=(e,t=!0)=>{const s=["n","ne","e","se","s","sw","w","nw"];let i=e+this.layer.rect.rotation;i<0&&(i+=360),i>360&&(i-=360),i+=22.5;let a=7;for(;a>0&&!(i>45*a&&i<360);)a--;return t?s[a]+"-resize":"url('/img/cursor/rotate-"+s[a]+".svg') 16 16, auto"},this.checkGuides=e=>{if(d.Ay.showGuides||d.Ay.snapToGuides){this.guides=[];let t=d.Ay.snapToGuides,s=5/this.stage.zoom,i=this.stage.fresco.width/2,a=this.stage.fresco.height/2,n=e.rect,r=n.center(),o=new c.A(this.stage.offset.x,this.stage.offset.y,Math.round(this.stage.fresco.width*this.stage.zoom),Math.round(this.stage.fresco.height*this.stage.zoom));r.x<i+s&&r.x>i-s&&(t&&(n.x=Math.round(i-n.width/2)),this.guides.push(new y.A(new l.A(Math.round(o.center().x),o.y),new l.A(Math.round(o.center().x),o.bottom()-1)))),r.y<a+s&&r.y>a-s&&(t&&(n.y=Math.round(a-n.height/2)),this.guides.push(new y.A(new l.A(o.x,Math.round(o.center().y)),new l.A(o.right()-1,Math.round(o.center().y))))),n.x<0+s&&n.x>0-s&&(t&&(n.x=0),this.guides.push(new y.A(new l.A(o.x,o.y),new l.A(o.x,o.bottom()-1)))),n.right()<this.stage.fresco.width+s&&n.right()>this.stage.fresco.width-s&&(t&&n.moveRight(this.stage.fresco.width),this.guides.push(new y.A(new l.A(o.right()-1,o.y),new l.A(o.right()-1,o.bottom()-1)))),n.y<0+s&&n.y>0-s&&(t&&(n.y=0),this.guides.push(new y.A(new l.A(o.x,o.y),new l.A(o.right()-1,o.y)))),n.bottom()<this.stage.fresco.height+s&&n.bottom()>this.stage.fresco.height-s&&(t&&n.moveBottom(this.stage.fresco.height),this.guides.push(new y.A(new l.A(o.x,o.bottom()-1),new l.A(o.right()-1,o.bottom()-1))))}},this.choice=async()=>{const e=await new u.A("Apply","Do you want to apply the transform?","Yes","No","Cancel").init();void 0!==e&&(e?this.apply():this.cancel())},this.apply=()=>{if(this.clone){if(!this.orgRect.equalTo(this.layer.rect)){const e=this.stage.fresco.getSelected(),t=h.oM(this.clone),s=e.rect.clone();return 0!==this.layer.rect.rotation&&(this.layer.rect=this.layer.rect.getRotatedBounds(),this.layer.canvas=h.oc(this.layer.canvas,this.layer.rect.rotation,this.layer.rect),this.layer.rect.rotation=0),e.extendCanvas(this.layer.rect),this.layer.drawToLayer(e),this.stage.history.add({type:"bitmapSwitch",kind:"transform",layer:e,rect:s,canvas:t}),this.layer.render(),void this.callback(!0)}this.stage.fresco.getSelected().canvas=this.clone}else{if(this.layer.wouldApplyTransform()){const e=h.oM(this.layer.canvas),t=h.oM(this.layer.mask);this.layer.applyTransform(),this.stage.history.add({type:"arrange",kind:"transform",layer:this.layer,action:{type:"trans",data:e,mask:t,rect:this.orgRect}})}else this.layer.rect.x===this.orgRect.x&&this.layer.rect.y===this.orgRect.y||this.stage.history.add({type:"arrange",kind:"arrange",layer:this.layer,action:{type:"rect",rect:this.orgRect}})}this.callback()},this.cancel=()=>{this.clone&&(this.stage.fresco.getSelected().canvas=this.clone),this.layer.rect=this.orgRect,this.callback()},this.cleanUp=()=>{if(this.modal){this.ctx.clearRect(0,0,this.raster.width,this.raster.width),this.stage&&this.stage.fresco&&(this.stage.fresco.removeScratch(),window.requestAnimationFrame(this.stage.render)),this.stage.coating.wake();for(let e=0;e<this.pointers.length;e++)this.modal.releasePointerCapture(this.pointers[e]);this.modal.removeEventListener("pointerdown",this.pointerDown,!1),this.modal.removeEventListener("pointermove",this.pointerMove,!1),this.modal.removeEventListener("pointerup",this.pointerUp,!1),this.modal.removeEventListener("dblclick",this.choice,!1),this.modal.removeEventListener("wheel",this.stage.coating.mouseWheel),this.modal.removeEventListener("contextmenu",e=>{e.preventDefault()},!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),document.removeEventListener("viewport-render",this.render),(0,i.Ay)("transform-apply").removeEventListener("click",this.apply,!1),(0,i.Ay)("transform-cancel").removeEventListener("click",this.cancel,!1),(0,i.Ay)("transform-width").removeEventListener("input",this.inputSize,!1),(0,i.Ay)("transform-height").removeEventListener("input",this.inputSize,!1),(0,i.Ay)("transform-top").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("transform-left").removeEventListener("input",this.inputPosition,!1),this.rotation.cleanUp(),this.rotation=void 0,this.modal&&(this.modal.remove(),this.modal=void 0),this.options&&(this.options.remove(),this.options=void 0),this.layer=void 0,this.raster=void 0,this.stage=void 0,this.clone=void 0,this.ctx=void 0}},this.stage=e,this.callback=t,this.ctx=e.coating.ctx,this.raster=e.coating.raster,!this.stage.fresco.isSelectedImageWithCanvas())return void this.callback();this.pointers=new Array;const s=this.stage.fresco.getSelected();if(this.stage.fresco.hasSelection()){this.clone=h.oM(s.canvas);const[e,t]=this.stage.primeCut();if(!e)return void this.callback();this.stage.coating.sleep(),this.layer=this.stage.fresco.addScratch(),this.layer.setTarget(s.id,t,"over",e),this.orgRect=t.clone()}else this.layer=s,this.orgRect=this.layer.rect.clone();this.modal=(0,i.T)("div",{id:"modal-transform",className:"modal"}),(0,i.Ay)("workspace").appendChild(this.modal),this.options=(0,i.T)("div",{id:"transform",className:"option-float option active"},(0,i.T)("div",{className:"option-icon"},(0,i.T)("img",{src:"/img/tool/transform.svg",className:"ic"})),(0,i.T)("div",{id:"transform-settings"},(0,i.T)("label",{className:"tab-10"},"Left:"),(0,i.T)("input",{type:"number",id:"transform-left"}),(0,i.T)("label",{className:"tab-10"},"Top:"),(0,i.T)("input",{type:"number",id:"transform-top"}),(0,i.T)("label",{className:"tab-10"},"Width:"),(0,i.T)("input",{type:"number",id:"transform-width"}),(0,i.T)("label",{className:"tab-10"},"Height:"),(0,i.T)("input",{type:"number",id:"transform-height"}),(0,i.T)("div",{className:"tab-20 range-box",id:"transform-rotation"}),(0,i.T)("a",{className:"button outline tab-30",id:"transform-cancel"},(0,i.T)("img",{src:"/img/icon/close.svg",width:10,height:10,className:"ic"}),(0,o.A)("cancel")),(0,i.T)("a",{className:"button outline tab-10",id:"transform-apply"},(0,i.T)("img",{src:"/img/icon/check.svg",width:16,height:16,className:"ic"}),(0,o.A)("apply")))),(0,i.Ay)("workspace").appendChild(this.options),this.rotation=new g.A("transform-rotation",{compact:!0,label:"Rotation:",step:.1,range:[-180,180],labelFormat:e=>e.toFixed(1)+"",labelParse:e=>parseFloat(e),onChange:e=>{this.layer.rect.rotation=e,this.renderAll()},onEnd:e=>{this.updateInputs()}}),(0,i.Ay)("transform-apply").addEventListener("click",this.apply,!1),(0,i.Ay)("transform-cancel").addEventListener("click",this.cancel,!1),(0,i.Ay)("transform-width").addEventListener("input",this.inputSize,!1),(0,i.Ay)("transform-height").addEventListener("input",this.inputSize,!1),(0,i.Ay)("transform-top").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("transform-left").addEventListener("input",this.inputPosition,!1),this.matrix=new v.A,this.hitSize=d.Ay.isHDPI?d.Ay.canTouch?44:32:16,this.modal.addEventListener("pointerdown",this.pointerDown,!1),this.modal.addEventListener("pointermove",this.pointerMove,!1),this.modal.addEventListener("pointerup",this.pointerUp,!1),this.modal.addEventListener("dblclick",this.choice,!1),this.modal.addEventListener("wheel",this.stage.coating.mouseWheel,{passive:!1}),this.modal.addEventListener("contextmenu",e=>{e.preventDefault()},!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),document.addEventListener("viewport-render",this.render),window.requestAnimationFrame(this.render),this.updateInputs()}}var b=s(21079);class w extends a.A{constructor(e){super("selectron",e),this.mode=void 0,this.moveLock="none",this.proxy=e=>{if("cut"===this.mode&&e.target!==this.stage.raster)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),void this.cleanCut()},this.contextMenu=e=>{e.preventDefault(),e.stopPropagation(),new b.Ay(new l.A(e.clientX,e.clientY),[new b.kt((0,o.A)("titleSelectAll"),()=>{this.cleanCut(),this.stage.selectionAll()},"Ctrl + A"),new b.kt((0,o.A)("titleSelectPixels"),()=>{this.cleanCut(),this.stage.selectionPixels()}),new b.kt((0,o.A)("titleSelectSubject"),()=>{this.cleanCut(),this.stage.selectionSubject()}),new b.kt((0,o.A)("titleSelectDeselect"),()=>{this.cleanCut(),this.stage.selectionDeselect()},"Ctrl + D"),new b.kt((0,o.A)("titleSelectInvert"),()=>{this.cleanCut(),this.stage.selectionInvert()},"Ctrl + I"),new b.kt])},this.keyDown=e=>{if(!this.isDown){if("cut"===this.mode){if("Escape"===e.key)return this.stage.fresco.selection.offset=new l.A,this.stage.fresco.getSelected().canvas=this.clone,this.stage.fresco.removeScratch(),this.mode=void 0,void window.requestAnimationFrame(()=>{this.stage.coating.render(),this.stage.render()});if("Enter"===e.key)return void this.cleanCut()}if(e.keyCode>=37&&e.keyCode<=40){if("cut"!==this.mode){this.mode=e.ctrlKey?"copy":"cut",this.clone="cut"===this.mode?h.oM(this.stage.fresco.getSelected().canvas):void 0;let[t,s]=this.stage.primeCut("cut"===this.mode);if(!t||!s)return void(this.mode=void 0);this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.stage.fresco.getSelected().id,s,"over",t)}if(!this.scratch)return;if("ArrowUp"===e.key||"ArrowDown"===e.key||"ArrowLeft"===e.key||"ArrowRight"===e.key){let t=e.shiftKey?10:1,s="ArrowLeft"===e.key||"ArrowRight"===e.key?"ArrowLeft"===e.key?-t:t:0,i="ArrowUp"===e.key||"ArrowDown"===e.key?"ArrowUp"===e.key?-t:t:0;this.stage.fresco.selection.offset.x+=s,this.scratch.rect.x+=s,this.stage.fresco.selection.offset.y+=i,this.scratch.rect.y+=i}this.up()}else"Shift"!==e.key?"Control"!==e.key||this.isCtrlDown||(this.isCtrlDown=!0,"move"!==this.stage.raster.style.cursor&&(this.stage.raster.style.cursor='url("/img/cursor/move-copy.svg") 2 2, auto')):this.isShiftDown=!0}},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1),"Control"===e.key&&this.isCtrlDown&&(this.isCtrlDown=!1,'url("/img/cursor/move-copy.svg") 2 2, auto'===this.stage.raster.style.cursor?this.stage.raster.style.cursor="url('/img/cursor/move-cut.svg') 2 2, auto":this.stage.raster.style.cursor="move")},this.down=e=>{if(!this.stage.fresco||!this.stage.fresco.selection)return;this.isDown=!0;let t=this.stage.translateRasterToFresco(e);if("cut"!==this.mode)if(this.stage.fresco.isSelectedImageWithCanvas()&&this.stage.fresco.selection.isSelected(t)){this.mode=this.isCtrlDown?"copy":"cut",this.clone="cut"===this.mode?h.oM(this.stage.fresco.getSelected().canvas):void 0;let[e,t]=this.stage.primeCut("cut"===this.mode);e&&t?(this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.stage.fresco.getSelected().id,t,"over",e)):this.mode="move"}else this.mode="move";else if(!this.stage.fresco.selection.isSelected(t.neg(this.stage.fresco.selection.offset))||this.isCtrlDown)return this.cleanCut(),void this.down(e);this.downPoint=t,this.downOffset=this.stage.fresco.selection.offset.clone(),this.scratch&&(this.downPos=this.scratch.rect.topLeft()),this.stage.coating.freeze(!0)},this.move=(e,t)=>{if(!this.isDown){let t=this.stage.translateRasterToFresco(e).neg(this.stage.fresco.selection.offset);return this.stage.fresco.selection.isSelected(t)?void(this.isCtrlDown?this.stage.raster.style.cursor="url('/img/cursor/move-copy.svg') 2 2, auto":this.stage.raster.style.cursor="url('/img/cursor/move-cut.svg') 2 2, auto"):void(this.stage.raster.style.cursor="move")}if(e=this.stage.translateRasterToFresco(e),this.isShiftDown&&"none"===this.moveLock){const t=Math.abs(this.downPoint.x-e.x),s=Math.abs(this.downPoint.y-e.y);(t>4||s>4)&&(t<s?(e.x=this.downPoint.x,this.moveLock="vertical"):(e.y=this.downPoint.y,this.moveLock="horizontal"))}this.isShiftDown||(this.moveLock="none"),"vertical"!==this.moveLock&&(this.stage.fresco.selection.offset.x=this.downOffset.x+Math.round(e.x-this.downPoint.x),this.scratch&&(this.scratch.rect.x=this.downPos.x+Math.round(e.x-this.downPoint.x))),"horizontal"!==this.moveLock&&(this.stage.fresco.selection.offset.y=this.downOffset.y+Math.round(e.y-this.downPoint.y),this.scratch&&(this.scratch.rect.y=this.downPos.y+Math.round(e.y-this.downPoint.y))),window.requestAnimationFrame(()=>{this.stage.coating.render(),this.stage.render()})},this.up=e=>{var t,s,i,a,n,r;if(this.isDown=!1,this.moveLock="none",this.stage.coating.freeze(!1),"copy"===this.mode){const e=this.stage.fresco.getSelected(),a=e.rect.clone(),n=this.clone||h.oM(e.canvas);if((0!==this.stage.fresco.selection.offset.x||0!==this.stage.fresco.selection.offset.y||this.clone)&&(e.extendCanvas(this.scratch.rect),this.scratch.drawToLayer(e),0!==this.stage.fresco.selection.offset.x||0!==this.stage.fresco.selection.offset.y)){let r=h.oM(null===(i=null===(s=null===(t=this.stage)||void 0===t?void 0:t.fresco)||void 0===s?void 0:s.selection)||void 0===i?void 0:i.mask);this.stage.fresco.selection.applyOffset(),this.stage.history.add({type:"selectionAndBitmapSwitch",kind:this.clone?"cut":"copy",selection:r,layer:e,canvas:n,rect:a}),this.stage.fresco.selection.bounds||(this.stage.fresco.removeSelection(),document.dispatchEvent(new CustomEvent("select-tool",{detail:"arrange"})))}e.render(),this.scratch.clear(),this.clone=void 0,this.mode=void 0}else if("move"===this.mode){if(0!==this.stage.fresco.selection.offset.x||0!==this.stage.fresco.selection.offset.y){let e=h.oM(null===(r=null===(n=null===(a=this.stage)||void 0===a?void 0:a.fresco)||void 0===n?void 0:n.selection)||void 0===r?void 0:r.mask);this.stage.fresco.selection.applyOffset(),this.stage.fresco.selection.bounds?this.stage.history.add({type:"selectionChange",kind:"move",selection:e}):(this.stage.history.add({type:"selectionChange",kind:"deselect",selection:e}),this.stage.fresco.removeSelection(),document.dispatchEvent(new CustomEvent("select-tool",{detail:"arrange"})))}this.mode=void 0}window.requestAnimationFrame(()=>{this.stage.coating.render(),this.stage.render()})},this.cleanCut=()=>{"cut"===this.mode&&(this.mode="copy",this.up())},this.cleanUp=()=>{var e;this.cleanCut(),null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.stage.raster.style.cursor="unset",document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),document.removeEventListener("mousedown",this.proxy,!0),this.removeDownListeners(),this.removeMoveListeners(),this.stage.raster.removeEventListener("contextmenu",this.contextMenu,!0)},this.addDownListeners(),this.addMoveListeners(),this.stage.raster.style.cursor="move",document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),document.addEventListener("mousedown",this.proxy,!0),this.stage.raster.addEventListener("contextmenu",this.contextMenu,!0)}}var A=s(39989),x=s(37771);class k extends x.A{constructor(e){super(e,(0,o.A)("titleToolSettings")),this.setContent(`\n            <section>\n                <input type="checkbox" id="arrange-setting-auto-select" checked />\n                <label class="top-10 switch" for="arrange-setting-auto-select">${(0,o.A)("autoSelectLayer")}<span></span></label>\n                <input type="checkbox" id="arrange-setting-guides" checked />\n                <label class="top-30 switch" for="arrange-setting-guides">${(0,o.A)("showGuides")}<span></span></label>\n                <input type="checkbox" id="arrange-settings-snap-to" checked />\n                <label class="top-10 switch" for="arrange-settings-snap-to">${(0,o.A)("snapToGuides")}<span></span></label>\n                <input type="checkbox" id="settings-smooth" checked />\n                <label class="top-10 switch" for="settings-smooth">${(0,o.A)("viewOBarSmooth")}<span></span></label>\n            </section>\n        `);const t=(0,i.Ay)("arrange-setting-auto-select");t.checked=d.Ay.autoSelect,t.onchange=()=>(0,d.ZC)("autoSelect",t.checked);const s=(0,i.Ay)("arrange-setting-guides");s.checked=d.Ay.showGuides,s.onchange=()=>(0,d.ZC)("showGuides",s.checked);const a=(0,i.Ay)("arrange-settings-snap-to");a.checked=d.Ay.snapToGuides,a.onchange=()=>(0,d.ZC)("snapToGuides",a.checked);const n=(0,i.Ay)("settings-smooth");n.checked=d.Ay.smoothScaling,n.onchange=()=>(0,d.ZC)("smoothScaling",n.checked)}}class S extends a.A{constructor(e,t){super("arrange",e),this.isShiftDown=!1,this.rasterize=()=>{this.stage.rasterize()},this.selectionTransform=()=>{this.mode="TRANSFORM",this.layerSelect()},this.selectionDistort=()=>{this.mode="DISTORT",this.layerSelect()},this.transformChange=e=>{var t;this.mode="ARRANGE",null===(t=this.transform)||void 0===t||t.cleanUp(),this.transform=void 0,e?this.stage.selectionDeselect():this.layerSelect()},this.distortChange=e=>{var t;this.mode="ARRANGE",null===(t=this.distort)||void 0===t||t.cleanUp(),this.distort=void 0,e?this.stage.selectionDeselect():this.layerSelect()},this.showSettings=()=>{new k((0,i.Ay)("arrange-tool-settings"))},this.toggleAspectMode=()=>{1===this.stage.fresco.getSelectedStack().length&&this.setAspectMode(!(0,i.Ay)("arrange-aspect-fixed").checked)},this.selectAspectMode=e=>{void 0!==e&&e.currentTarget.blur(),this.setAspectMode((0,i.Ay)("arrange-aspect-fixed").checked)},this.setAspectMode=e=>{this.reform&&(this.reform.constrain=e),(0,i.Ay)("arrange-aspect-fixed").checked=e,(0,i.Ay)("arrange-aspect-free").checked=!e,(0,i.Ay)("arrange-size-lock").style.display=e?"block":"none",(0,i.Ay)("arrange-size-vs").style.display=e?"none":"block"},this.shiftDown=e=>{"Shift"!==e.key||this.isShiftDown||(this.isShiftDown=!0,this.toggleAspectMode())},this.shiftUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1,this.toggleAspectMode())},this.layerSelect=()=>{var e,t;if(!this.stage||!this.stage.fresco)return;let s=this.stage.fresco.getStackHashId();if(s!==this.currentId&&this.stage.history.commitTransaction(),this.currentId=s,null===(e=this.selectron)||void 0===e||e.cleanUp(),this.selectron=void 0,this.stage.fresco.hasSelection()&&"ARRANGE"===this.mode)return(0,i.Ay)("arrange-selection-locked").style.display="none",(0,i.Ay)("arrange-no-layer").style.display="none",(0,i.Ay)("arrange-selection").style.display="none",(0,i.Ay)("arrange-settings").style.display="none",(0,i.Ay)("arrange-no-layer").style.display="none",null===(t=this.reform)||void 0===t||t.cleanUp(),this.reform=void 0,void(this.stage.fresco.isSelectedType(n.A.TYPE_IMAGE)?((0,i.Ay)("arrange-selection").style.display="flex",this.selectron=new w(this.stage)):(0,i.Ay)("arrange-selection-locked").style.display="flex");if("DISTORT"===this.mode)return void(this.distort=new m(this.stage,this.distortChange));if("TRANSFORM"===this.mode)return void(this.transform=new f(this.stage,this.transformChange));this.reform||(this.reform=new r.A(this.stage,"ARRANGE"));let a=this.stage.fresco.getSelectedStack();(0,i.Ay)("arrange-settings").style.display="none",(0,i.Ay)("arrange-no-layer").style.display="none",(0,i.Ay)("arrange-no-layer").style.display="none",(0,i.Ay)("arrange-selection").style.display="none",(0,i.Ay)("arrange-selection-locked").style.display="none",(0,i.Ay)("arrange-rotate-left").style.display="flex",(0,i.Ay)("arrange-rotate-right").style.display="flex",(0,i.Ay)("arrange-flip-horizontal").style.display="flex",(0,i.Ay)("arrange-flip-vertical").style.display="flex",1===a.length&&a[0].rect&&a[0].rect.isSet()?(a[0].settings.locked?(0,i.Ay)("arrange-no-layer").style.display="flex":(0,i.Ay)("arrange-settings").style.display="flex",a[0].type===n.A.TYPE_TEXT?((0,i.Ay)("arrange-flip-horizontal").style.display="none",(0,i.Ay)("arrange-flip-vertical").style.display="none"):a[0].type===n.A.TYPE_FRAME?((0,i.Ay)("arrange-rotate-left").style.display=a[0].editMode?"none":"flex",(0,i.Ay)("arrange-rotate-right").style.display=a[0].editMode?"none":"flex",(0,i.Ay)("arrange-flip-horizontal").style.display=a[0].editMode?"flex":"none",(0,i.Ay)("arrange-flip-vertical").style.display=a[0].editMode?"flex":"none"):a[0].type===n.A.TYPE_SHAPE&&((0,i.Ay)("arrange-flip-horizontal").style.display="none",(0,i.Ay)("arrange-flip-vertical").style.display="none"),(0,i.Ay)("arrange-apect-holder").style.display=a[0].type===n.A.TYPE_TEXT||a[0].editMode?"none":"flex",this.updateInputs()):a.length>1?((0,i.Ay)("arrange-settings").style.display="flex",(0,i.Ay)("arrange-no-layer").style.display="none",(0,i.Ay)("arrange-apect-holder").style.display="none",(0,i.Ay)("arrange-rotate-left").style.display="none",(0,i.Ay)("arrange-rotate-right").style.display="none",(0,i.Ay)("arrange-flip-vertical").style.display="none",(0,i.Ay)("arrange-flip-horizontal").style.display="none",this.setAspectMode(!0),this.updateInputs()):((0,i.Ay)("arrange-no-layer").style.display="none",(0,i.Ay)("arrange-settings").style.display="none",(0,i.Ay)("arrange-no-layer").style.display="flex"),this.reform&&(this.reform.constrain=(0,i.Ay)("arrange-aspect-fixed").checked)},this.unlock=()=>this.stage.changeLocked(void 0,!1),this.deleteLayer=()=>this.stage.deleteLayer(),this.duplicateLayer=()=>this.stage.duplicateLayer(),this.inputBegin=()=>{this.reform.beginHistory()},this.inputEnd=e=>{let t=e.target.id,s="arrange-width"===t||"arrange-height"===t?"resize":"move";this.stage.fresco.isSelectedType(n.A.TYPE_TEXT)&&(s="arrange-height"===t?"w-resize":"t-resize"),this.reform.commitHistory(s)},this.inputPosition=e=>{let t=Math.round(Number((0,i.Ay)("arrange-top").value)),s=Math.round(Number((0,i.Ay)("arrange-left").value));this.reform.inputPosition(s,t)},this.inputSize=e=>{if("arrange-width"==e.currentTarget.id){let e=(0,i.Ay)("arrange-width").value,t=Number.isNaN(Number(e))?50:Math.round(Number(e)),s=this.reform.inputSize(t,void 0);(0,i.Ay)("arrange-height").value=Math.round(s.height).toString()}else{let e=(0,i.Ay)("arrange-height").value,t=Number.isNaN(Number(e))?50:Math.round(Number(e)),s=this.reform.inputSize(void 0,t);(0,i.Ay)("arrange-width").value=Math.round(s.width).toString()}},this.updateInputs=()=>{let e=this.stage.fresco.getStackBounds();e&&((0,i.Ay)("arrange-width").value=Math.round(e.width).toString(),(0,i.Ay)("arrange-height").value=Math.round(e.height).toString(),(0,i.Ay)("arrange-top").value=Math.round(e.y).toString(),(0,i.Ay)("arrange-left").value=Math.round(e.x).toString())},this.rotateOrFlip=e=>{let t=this.stage.fresco.getSelected();if(!t)return;switch(e.currentTarget.getAttribute("id")){case"arrange-flip-vertical":this.stage.flipSelected(!0);break;case"arrange-flip-horizontal":this.stage.flipSelected(!1);break;case"arrange-rotate-left":if(t instanceof A.A)this.stage.rotateSelected(!0);else{let e=t.rect.clone();t.rect.rotation+=-90,this.stage.history.add({type:"arrange",kind:"rotate",layer:t,action:{type:"rect",rect:e}})}break;case"arrange-rotate-right":if(t instanceof A.A)this.stage.rotateSelected(!0);else{let e=t.rect.clone();t.rect.rotation+=90,this.stage.history.add({type:"arrange",kind:"rotate",layer:t,action:{type:"rect",rect:e}})}}document.dispatchEvent(new CustomEvent("viewport-render"))},this.cleanUp=()=>{var e,t,s;this.stage.history.commitTransaction(),null===(e=this.reform)||void 0===e||e.cleanUp(),this.reform=void 0,null===(t=this.selectron)||void 0===t||t.cleanUp(),this.selectron=void 0,null===(s=this.stage)||void 0===s||s.coating.wake(),document.removeEventListener("keydown",this.shiftDown,!1),document.removeEventListener("keyup",this.shiftUp,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("layer-arrange",this.updateInputs,!1),(0,i.Ay)("arrange-tool-settings").removeEventListener("click",this.showSettings,!1),(0,i.Ay)("arrange-selection-transform").removeEventListener("click",this.selectionTransform,!1),(0,i.Ay)("arrange-selection-distort").removeEventListener("click",this.selectionDistort,!1),(0,i.Ay)("arrange-rasterize").removeEventListener("click",this.rasterize,!1),(0,i.Ay)("arrange-delete").removeEventListener("click",this.deleteLayer,!1),(0,i.Ay)("arrange-duplicate").removeEventListener("click",this.duplicateLayer,!1),(0,i.Ay)("arrange-duplicate-button").removeEventListener("click",this.duplicateLayer,!1),(0,i.Ay)("arrange-convert").removeEventListener("click",this.unlock,!1),(0,i.Ay)("arrange-width").removeEventListener("input",this.inputSize,!1),(0,i.Ay)("arrange-height").removeEventListener("input",this.inputSize,!1),(0,i.Ay)("arrange-top").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("arrange-left").removeEventListener("input",this.inputPosition,!1),(0,i.Ay)("arrange-width").removeEventListener("focus",this.inputBegin,!1),(0,i.Ay)("arrange-height").removeEventListener("focus",this.inputBegin,!1),(0,i.Ay)("arrange-top").removeEventListener("focus",this.inputBegin,!1),(0,i.Ay)("arrange-left").removeEventListener("focus",this.inputBegin,!1),(0,i.Ay)("arrange-width").removeEventListener("blur",this.inputEnd,!1),(0,i.Ay)("arrange-height").removeEventListener("blur",this.inputEnd,!1),(0,i.Ay)("arrange-top").removeEventListener("blur",this.inputEnd,!1),(0,i.Ay)("arrange-left").removeEventListener("blur",this.inputEnd,!1),(0,i.Ay)("arrange-aspect-fixed").removeEventListener("click",this.selectAspectMode,!1),(0,i.Ay)("arrange-aspect-free").removeEventListener("click",this.selectAspectMode,!1),(0,i.Ay)("arrange-aspect-icon").removeEventListener("click",this.toggleAspectMode,!1);let a=(0,i.Ay)("arrange-rotate").getElementsByTagName("li");for(var n=0;n<a.length;n++)a[n].removeEventListener("click",this.rotateOrFlip,!1)},this.mode=t,document.addEventListener("keydown",this.shiftDown,!1),document.addEventListener("keyup",this.shiftUp,!1),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("layer-arrange",this.updateInputs,!1),(0,i.Ay)("arrange-convert").addEventListener("click",this.unlock,!1),(0,i.Ay)("arrange-width").addEventListener("input",this.inputSize,!1),(0,i.Ay)("arrange-height").addEventListener("input",this.inputSize,!1),(0,i.Ay)("arrange-top").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("arrange-left").addEventListener("input",this.inputPosition,!1),(0,i.Ay)("arrange-width").addEventListener("focus",this.inputBegin,!1),(0,i.Ay)("arrange-height").addEventListener("focus",this.inputBegin,!1),(0,i.Ay)("arrange-top").addEventListener("focus",this.inputBegin,!1),(0,i.Ay)("arrange-left").addEventListener("focus",this.inputBegin,!1),(0,i.Ay)("arrange-width").addEventListener("blur",this.inputEnd,!1),(0,i.Ay)("arrange-height").addEventListener("blur",this.inputEnd,!1),(0,i.Ay)("arrange-top").addEventListener("blur",this.inputEnd,!1),(0,i.Ay)("arrange-left").addEventListener("blur",this.inputEnd,!1),(0,i.Ay)("arrange-delete").addEventListener("click",this.deleteLayer,!1),(0,i.Ay)("arrange-duplicate").addEventListener("click",this.duplicateLayer,!1),(0,i.Ay)("arrange-duplicate-button").addEventListener("click",this.duplicateLayer,!1),(0,i.Ay)("arrange-tool-settings").addEventListener("click",this.showSettings,!1),(0,i.Ay)("arrange-selection-transform").addEventListener("click",this.selectionTransform,!1),(0,i.Ay)("arrange-selection-distort").addEventListener("click",this.selectionDistort,!1),(0,i.Ay)("arrange-rasterize").addEventListener("click",this.rasterize,!1),(0,i.Ay)("arrange-aspect-fixed").addEventListener("click",this.selectAspectMode,!1),(0,i.Ay)("arrange-aspect-free").addEventListener("click",this.selectAspectMode,!1),(0,i.Ay)("arrange-aspect-icon").addEventListener("click",this.toggleAspectMode,!1);let s=(0,i.Ay)("arrange-rotate").getElementsByTagName("li");for(var a=0;a<s.length;a++)s[a].addEventListener("click",this.rotateOrFlip,!1);this.layerSelect(),this.selectAspectMode()}}},87628:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StoredPaymentMethod=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.StoredPaymentMethod=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"bankAccountNumber",baseName:"bankAccountNumber",type:"string"},{name:"bankLocationId",baseName:"bankLocationId",type:"string"},{name:"brand",baseName:"brand",type:"string"},{name:"expiryMonth",baseName:"expiryMonth",type:"string"},{name:"expiryYear",baseName:"expiryYear",type:"string"},{name:"holderName",baseName:"holderName",type:"string"},{name:"iban",baseName:"iban",type:"string"},{name:"id",baseName:"id",type:"string"},{name:"label",baseName:"label",type:"string"},{name:"lastFour",baseName:"lastFour",type:"string"},{name:"name",baseName:"name",type:"string"},{name:"networkTxReference",baseName:"networkTxReference",type:"string"},{name:"ownerName",baseName:"ownerName",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"supportedRecurringProcessingModels",baseName:"supportedRecurringProcessingModels",type:"Array<string>"},{name:"supportedShopperInteractions",baseName:"supportedShopperInteractions",type:"Array<string>"},{name:"type",baseName:"type",type:"string"}]},87852:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(21742),a=s(26806),n=s(42268),r=s(54738),o=s(98244),h=s(29755),c=s(79453),l=s(66718);class d extends a.A{constructor(e){var t;super((0,i.A)("errorReport")),this.stage=e,this.hide=()=>{this.modal.style.display="none"},this.show=()=>{this.modal.style.display="flex"},this.apply=async()=>{this.disableApply(),this.disableCancel();try{const e=new FormData;if(e.append("email",(0,n.Ay)(`email-${this.mid}`).value),e.append("platform",function(){const e=[navigator.userAgent,`Product: ${h.Ay.product}`],t=navigator.userAgentData;if(t){const s=t.brands.map(e=>`${e.brand}: ${e.version}`);s.push(`Platform: ${t.platform}`),s.push(`Mobile: ${t.mobile}`),e.push(s.join("\n"))}const s=navigator.deviceMemory;s&&e.push(`Main memory: ${s}`);return e.join("\n\n")}()),e.append("description",(0,n.Ay)(`description-${this.mid}`).value),(0,n.Ay)(`include-doc-${this.mid}`).checked){const t=await(0,l.Ab)(this.stage,{id:this.stage.fresco.id,name:"document",quality:.8,nonDestructive:!1,type:"document",unit:"pixel"});e.append("document",t,"document.pxd")}const t=(0,n.Ay)(`screenshot-canvas-${this.mid}`);if(t){const s=await new Promise(e=>t.toBlob(e,"image/jpeg",80));e.append("screenshot",s,"screenshot.jpg")}await fetch("/api/error-report",{method:"POST",body:e});this.cleanUp()}catch(e){this.enableApply(),this.enableCancel(),console.error(e)}},(0,o.A)("error-report");(0,n.Ay)("dialog-apply"+this.mid).innerHTML=(0,i.A)("send"),this.dialog.style.width="800px",this.dialog.style.maxWidth="800px",this.setContent(`\n            <div style="display: flex;gap: 20px">\n                <section>\n                    <div id="screenshot-${this.mid}" class="error-report-screenshot">   \n                        <div id="error-report-screenoverlay-${this.mid}" class="error-report-screenoverlay">                     \n                            <button id="takescreen-${this.mid}" class="button positive">Take screenshot</button>\n                            OR\n                            <label id="upload-${this.mid}" for="fileupload-${this.mid}" class="button">Upload image</label>\n                            <input id="fileupload-${this.mid}" type="file" hidden accept="image/*" />\n                        </div>\n                    </div>         \n                </section>\n\n                <section>\n                    <div>\n                        <label>Email</label>\n                        <input id="email-${this.mid}" style="width: 100%" type="text" value="${null!==(t=null===c.N||void 0===c.N?void 0:c.N.email)&&void 0!==t?t:""}">\n                    </div>\n\n                    <div class="top-20">\n                        <label>Description</label>\n                        <small>Explain the problem you are having in English, if you know the steps needed to encounter the issue please include that as well.</small>\n                        <textarea id="description-${this.mid}" style="width:100%" rows="10"></textarea>\n                    </div>\n\n                    <div class="top-20">\n                        <input id="include-doc-${this.mid}" type="checkbox">\n                        <label class="switch" for="include-doc-${this.mid}">\n                            Include current document\n                            <span></span>\n                        </label>\n                        <small>By including your current document we will be able to see your work, it does however make it easier for us to solve your problem.</small>\n                    </div>\n                </section>\n            </div>\n        `),this.descriptionInput=(0,n.Ay)(`description-${this.mid}`),this.emailInput=(0,n.Ay)(`email-${this.mid}`),this.descriptionInput.addEventListener("keydown",e=>{"Enter"===e.key&&e.stopPropagation()}),this.emailInput.addEventListener("keydown",e=>{"Enter"===e.key&&e.stopPropagation()});const s=(0,n.Ay)(`fileupload-${this.mid}`);s.addEventListener("change",async()=>{var e;const t=s.files[0],i=r.oM(await r.lz(t),!0);i.id=`screenshot-canvas-${this.mid}`,null===(e=(0,n.Ay)(`screenshot-canvas-${this.mid}`))||void 0===e||e.remove(),(0,n.Ay)(`screenshot-${this.mid}`).appendChild(i),(0,n.Ay)(`error-report-screenoverlay-${this.mid}`).classList.add("with-image")}),(0,n.Ay)(`takescreen-${this.mid}`).addEventListener("click",()=>{this.takeScreenshot()})}async takeScreenshot(){var e;try{this.hide();const t=document.createElement("video"),s=await navigator.mediaDevices.getDisplayMedia({preferCurrentTab:!0});t.srcObject=s,await t.play(),t.pause();const i=(0,n.T)("canvas",{width:t.videoWidth,height:t.videoHeight,id:`screenshot-canvas-${this.mid}`});i.getContext("2d").drawImage(t,0,0),s.getTracks().forEach(e=>e.stop()),null===(e=(0,n.Ay)(`screenshot-canvas-${this.mid}`))||void 0===e||e.remove(),(0,n.Ay)(`screenshot-${this.mid}`).appendChild(i),(0,n.Ay)(`error-report-screenoverlay-${this.mid}`).classList.add("with-image")}catch(t){console.log(t)}finally{this.show()}}}},87929:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AdditionalDataCarRental=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.AdditionalDataCarRental=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"carRental_checkOutDate",baseName:"carRental.checkOutDate",type:"string"},{name:"carRental_customerServiceTollFreeNumber",baseName:"carRental.customerServiceTollFreeNumber",type:"string"},{name:"carRental_daysRented",baseName:"carRental.daysRented",type:"string"},{name:"carRental_fuelCharges",baseName:"carRental.fuelCharges",type:"string"},{name:"carRental_insuranceCharges",baseName:"carRental.insuranceCharges",type:"string"},{name:"carRental_locationCity",baseName:"carRental.locationCity",type:"string"},{name:"carRental_locationCountry",baseName:"carRental.locationCountry",type:"string"},{name:"carRental_locationStateProvince",baseName:"carRental.locationStateProvince",type:"string"},{name:"carRental_noShowIndicator",baseName:"carRental.noShowIndicator",type:"string"},{name:"carRental_oneWayDropOffCharges",baseName:"carRental.oneWayDropOffCharges",type:"string"},{name:"carRental_rate",baseName:"carRental.rate",type:"string"},{name:"carRental_rateIndicator",baseName:"carRental.rateIndicator",type:"string"},{name:"carRental_rentalAgreementNumber",baseName:"carRental.rentalAgreementNumber",type:"string"},{name:"carRental_rentalClassId",baseName:"carRental.rentalClassId",type:"string"},{name:"carRental_renterName",baseName:"carRental.renterName",type:"string"},{name:"carRental_returnCity",baseName:"carRental.returnCity",type:"string"},{name:"carRental_returnCountry",baseName:"carRental.returnCountry",type:"string"},{name:"carRental_returnDate",baseName:"carRental.returnDate",type:"string"},{name:"carRental_returnLocationId",baseName:"carRental.returnLocationId",type:"string"},{name:"carRental_returnStateProvince",baseName:"carRental.returnStateProvince",type:"string"},{name:"carRental_taxExemptIndicator",baseName:"carRental.taxExemptIndicator",type:"string"},{name:"travelEntertainmentAuthData_duration",baseName:"travelEntertainmentAuthData.duration",type:"string"},{name:"travelEntertainmentAuthData_market",baseName:"travelEntertainmentAuthData.market",type:"string"}]},87971:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleHighlightsShadows")),this.kind="highlightsShadows",this.setContent((0,n.T)("div",{id:"highlight-slider"}),(0,n.T)("div",{id:"shadows-slider",className:"top-16"})),new a.A("highlight-slider",{label:(0,r.A)("highlights"),step:.01,range:[-2,2],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("highlights",e)}),new a.A("shadows-slider",{label:(0,r.A)("shadows"),step:.01,range:[-2,2],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("shadows",e)})}}},89209:(e,t,s)=>{s.d(t,{A:()=>r});var i=s(42268),a=s(54738);class n{constructor(e,t,s=!0){this.lineSpace=0,this.letterSpace=0,this.bold=!1,this.italic=!1,this.uppercase=!1,this.underline=!1,this.align="center",this.curve=!1,this.curveAmount=0,this.curveType="arc",this.curveFlip=!1,this.curveSpread=!1,this.warp=!1,this.warpEdgeSize=0,this.warpCenterSize=0,this.warpHorizontalOffset=0,this.warpVerticalOffset=0,this.warpType=n.WARP_CIRCULAR,this.warpMode=n.WARP_UPPER,this.background=!1,this.backgroundOffset=0,this.backgroundPunch=!1,this.backgroundColor="#555555",this.backgroundType=n.BACKGROUND_FULL,this.outline=!1,this.outlinePunch=!1,this.outlineColor="#555555",this.outlineSize=.3,this.outlineDistance=0,this.outlineDirection=305,this.shadow=!1,this.shadowBlur=.3,this.shadowColor="#000000",this.shadowAlpha=.6,this.shadowDistance=.3,this.shadowDirection=160,this.font=e,this.size=t,s&&this.measureText()}setSize(e){this.size=e,this.measureText()}setFont(e){this.font=e,this.measureText()}measureText(){if(this.size<1)return;var e=document.createElement("canvas");e.width=20*this.size,e.height=Math.round(2*this.size);const t=e.getContext("2d",{willReadFrequently:!0});t.textBaseline="top",t.fillStyle="white",t.font=this.getCssFont(),t.fillText("SfTgMjkHpqLRnliIFIABCDEFGIJKNOPQSUVXYZabcdeghmnorstuvxyz",0,Math.round(.5*this.size));const s=a.zR(t.getImageData(0,0,e.width,e.height));if(s){this.ascent=s.y-Math.round(.5*this.size),this.height=s.height,t.clearRect(0,0,e.width,e.height),t.fillText("SMOP",0,Math.round(.5*this.size));const i=a.zR(t.getImageData(0,0,e.width,e.height));this.baseline=i.height}this.height<=0&&this.measureTextFallback(),this.padding=Math.round(.2*this.height)}measureTextFallback(){var e=document.createElement("span");e.innerHTML="ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz",e.style.fontFamily=this.font,e.style.fontSize=this.size+"px";var t=document.createElement("div");t.style.display="inline-block",t.style.width="1px",t.style.height="0px";var s=document.createElement("div");s.appendChild(e),s.appendChild(t),(0,i.Ay)("workspace").appendChild(s);try{t.style.verticalAlign="baseline",this.ascent=t.offsetTop-e.offsetTop+1,t.style.verticalAlign="bottom",this.height=t.offsetTop-e.offsetTop+1,this.baseline=this.height}finally{s.remove()}}getLineSpacing(){var e;return Math.ceil(this.height*Number(null!==(e=this.lineSpace)&&void 0!==e?e:0))}getLetterSpacing(){var e;return Math.ceil(this.height/2*Number(null!==(e=this.letterSpace)&&void 0!==e?e:0))}getCssFont(e=this.size){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+e+"px "+this.font}clone(){const e=Object.create(n.prototype);return Object.assign(e,this)}equalTo(e){return!!e&&(this.font===e.font&&this.size===e.size&&this.lineSpace===e.lineSpace&&this.letterSpace===e.letterSpace&&this.bold===e.bold&&this.italic===e.italic&&this.underline===e.underline&&this.uppercase===e.uppercase&&this.fillType===e.fillType&&this.fillValue===e.fillValue&&this.align===e.align&&this.curve===e.curve&&this.curveAmount===e.curveAmount&&this.curveType===e.curveType&&this.curveSpread===e.curveSpread&&this.curveFlip===e.curveFlip&&this.warp===e.curve&&this.warpMode===e.warpMode&&this.warpType===e.warpType&&this.warpEdgeSize===e.warpEdgeSize&&this.warpCenterSize===e.warpCenterSize&&this.warpHorizontalOffset===e.warpHorizontalOffset&&this.warpVerticalOffset===e.warpVerticalOffset&&this.background===e.background&&this.backgroundPunch===e.backgroundPunch&&this.backgroundColor===e.backgroundColor&&this.backgroundType===e.backgroundType&&this.outline===e.outline&&this.outlinePunch===e.outlinePunch&&this.outlineSize===e.outlineSize&&this.outlineColor===e.outlineColor&&this.outlineDistance===e.outlineDistance&&this.outlineDirection===e.outlineDirection&&this.shadow===e.shadow&&this.shadowBlur===e.shadowBlur&&this.shadowColor===e.shadowColor&&this.shadowAlpha===e.shadowAlpha&&this.shadowDistance===e.shadowDistance&&this.shadowDirection===e.shadowDirection)}}n.BACKGROUND_FULL="full",n.BACKGROUND_LINE="line",n.BACKGROUND_WORD="word",n.WARP_CIRCULAR="circular",n.WARP_ANGULAR="angular",n.WARP_UPPER="upper",n.WARP_MIDDLE="middle",n.WARP_LOWER="lower";const r=n},89352:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleBrightnessContrast")),this.kind="brightnessContrast",this.setContent((0,n.T)("div",{id:"brightness"}),(0,n.T)("div",{id:"contrast",className:"top-16"})),new a.A("brightness",{label:(0,r.A)("brightness"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("brightness",e)}),new a.A("contrast",{label:(0,r.A)("contrast"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("contrast",e)})}}},89355:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentDetailsRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentDetailsRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"authenticationData",baseName:"authenticationData",type:"DetailsRequestAuthenticationData"},{name:"details",baseName:"details",type:"PaymentCompletionDetails"},{name:"paymentData",baseName:"paymentData",type:"string"},{name:"threeDSAuthenticationOnly",baseName:"threeDSAuthenticationOnly",type:"boolean"}]},89373:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(42268),a=s(21742),n=s(54738),r=s(23556),o=s(41915),h=s(82042),c=s(59350),l=s(71499),d=s(8594);class p extends d.A{constructor(e){super("lasso",e),this.points=[],this.selectMode=()=>{this.mode=document.querySelector('input[name="lasso-mode"]:checked').value},this.selectType=e=>{this.type=e.currentTarget.value,(0,i.Ay)("lasso-magnet-settings").style.display="magnet"===this.type?"block":"none",this.noGoZone="lasso"!==this.type,"magnet"!==this.type||this.edges||this.generateEdges()},this.layerSelect=()=>{"magnet"===this.type&&this.generateEdges()},this.viewportChange=()=>{this.points&&this.points.length>1&&window.requestAnimationFrame(()=>{"bezier"===this.type?this.stage.coating.drawAntBezier(this.points.map(e=>this.stage.translateFrescoToRaster(e))):this.stage.coating.drawAntPolygon(this.points.map(e=>this.stage.translateFrescoToRaster(e)))})},this.generateEdges=()=>{const e=new r.A([]);e.addShader("gaussian",.2),e.addShader("sobel",1),this.edges=n.oM(e.apply(this.stage.getOutputCanvas(this.stage.fresco,1))),this.edgeData=this.edges.getContext("2d").getImageData(0,0,this.edges.width,this.edges.height)},this.keyDown=e=>{"Shift"!==e.key||this.isShiftDown||(this.isShiftDown=!0,this.isDown||((0,i.Ay)("lasso-mode-add").checked=!0,this.selectMode())),"Control"!==e.key||this.isCtrlDown||(this.isCtrlDown=!0,this.isDown||((0,i.Ay)("lasso-mode-remove").checked=!0,this.selectMode()))},this.keyUp=e=>{"Shift"===e.key&&this.isShiftDown&&(this.isShiftDown=!1,this.isCtrlDown||this.isDown||((0,i.Ay)("lasso-mode-new").checked=!0,this.selectMode())),"Control"===e.key&&this.isCtrlDown&&(this.isCtrlDown=!1,this.isDown||((0,i.Ay)("lasso-mode-new").checked=!0,this.selectMode()))},this.down=e=>{if(e=this.stage.translateRasterToFresco(e,void 0,!1),(new Date).getTime()-this.stamp<350&&"free"!==this.type&&(this.points.length<2||this.points[this.points.length-1].distanceTo(this.points[this.points.length-2])<10))return 0!==this.points.length&&this.closeLoop(),this.removeMoveListeners(),void(this.isDown=!1);if(this.stamp=(new Date).getTime(),this.stage.coating.freeze(!0),0===this.points.length&&this.setHistory(),0===this.points.length&&"new"===this.mode&&this.stage.fresco.selection&&(this.stage.fresco.selection.clear(),window.requestAnimationFrame(()=>this.stage.coating.render())),0===this.points.length&&(this.addMoveListeners(),"magnet"===this.type&&this.stage.coating.setCursorImage(new c.A(new l.A("circle",this.size.getValue(),0)).getCursorImage(1))),this.points.length>3&&"free"!==this.type)if("bezier"===this.type){if(this.points[0].distanceTo(this.points[this.points.length-2])<10/this.stage.zoom)return void this.closeLoop()}else if(this.points[0].distanceTo(this.points[this.points.length-1])<10/this.stage.zoom)return void this.closeLoop();this.points.push(e),"free"!==this.type&&1===this.points.length&&this.points.push(e.clone())},this.move=e=>{switch(e=this.stage.translateRasterToFresco(e,void 0,!1),this.type){case"free":if(!this.isDown)return;this.points.push(e);break;case"polygon":case"bezier":this.points[this.points.length-1]=e;break;case"magnet":this.findAnchor(e)}window.requestAnimationFrame(()=>{"bezier"===this.type?this.stage.coating.drawAntBezier(this.points.map(e=>this.stage.translateFrescoToRaster(e))):this.stage.coating.drawAntPolygon(this.points.map(e=>this.stage.translateFrescoToRaster(e)))})},this.up=e=>{"free"===this.type&&(e=this.stage.translateRasterToFresco(e,void 0,!1),this.isDown=!1,this.removeMoveListeners(),this.stage.coating.freeze(!1),this.points.length<3?this.stage.fresco.selection&&this.stage.fresco.selection.bounds&&this.stage.fresco.selection.bounds.width>0&&(this.stage.fresco.selection.reset(),this.addHistory("deselect")):(this.stage.fresco.addSelection(),this.stage.fresco.selection.editPolygon(this.points,this.feather.getValue(),!(0,i.Ay)("lasso-anti-alias").checked,"remove"===this.mode),this.addHistory()),window.requestAnimationFrame(()=>this.stage.coating.render()),this.points=[])},this.closeLoop=()=>{this.isDown=!1,this.removeMoveListeners(),this.stage.coating.freeze(!1),this.stage.coating.removeCursorImage(),this.stage.raster.style.cursor="crosshair",this.points.length>2?(this.stage.fresco.addSelection(),"bezier"===this.type?this.stage.fresco.selection.editBezier(this.points,this.feather.getValue(),!(0,i.Ay)("lasso-anti-alias").checked,"remove"===this.mode):this.stage.fresco.selection.editPolygon(this.points,this.feather.getValue(),!(0,i.Ay)("lasso-anti-alias").checked,"remove"===this.mode),this.addHistory()):this.stage.fresco.hasSelection()&&(this.stage.fresco.selection.reset(),this.addHistory("deselect")),window.requestAnimationFrame(()=>this.stage.coating.render()),this.points=[]},this.findAnchor=e=>{let t=this.size.getValue();if(e=new o.A(Math.round(e.x),Math.round(e.y)),0===this.points.length||this.points[this.points.length-1].distanceTo(e)>t/10){let s,i=this.size.getValue()/2,a=this.edges.width,n=new o.A,r=t;for(let o=e.y-i,h=e.y+i;o<h;++o)for(let c=e.x-i,l=e.x+i;c<l;++c){n.x=c,n.y=o;let i=e.distanceTo(n);if(i>t)continue;let h=this.edgeData.data[4*(o*a+c)];h>18&&(h=.333*i+i*(1-h/255)*.666,h<r&&(s=n.clone(),r=h))}s&&(e=s),this.checkAndAdd(e,t/10)}},this.checkAndAdd=(e,t)=>{let s=this.points.slice(Math.max(this.points.length-3,0)),i=!1;s.forEach(s=>{s.distanceTo(e)<t&&(i=!0)}),i||this.points.push(e)},this.cancel=()=>{"free"!==this.type&&(this.points.length>2?("polygon"===this.type||"bezier"===this.type?this.points.splice(-2,1):this.points.pop(),window.requestAnimationFrame(()=>{"bezier"===this.type?this.stage.coating.drawAntBezier(this.points.map(e=>this.stage.translateFrescoToRaster(e))):this.stage.coating.drawAntPolygon(this.points.map(e=>this.stage.translateFrescoToRaster(e)))})):(this.points=[],this.isDown=!1,this.removeMoveListeners(),this.stage.coating.freeze(!1),this.stage.coating.removeCursorImage(),this.stage.raster.style.cursor="crosshair",this.stage.fresco.hasSelection()&&(this.stage.fresco.selection.reset(),this.addHistory("deselect")),window.requestAnimationFrame(()=>this.stage.coating.render())))},this.apply=()=>{"free"!==this.type&&this.points.length>2&&this.closeLoop()},this.cleanUp=()=>{var e;(this.isShiftDown||this.isCtrlDown)&&((0,i.Ay)("lasso-mode-new").checked=!0),this.superClean(),this.stage.fresco&&this.stage.fresco.selection&&0===(null===(e=this.stage.fresco.selection.outline)||void 0===e?void 0:e.length)&&this.stage.fresco.removeSelection(),this.removeMoveListeners(),this.size.cleanUp(),this.feather.cleanUp(),this.edges=void 0,this.edgeData=void 0,document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("viewport-render",this.viewportChange,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),(0,i.Ay)("lasso-type-free").removeEventListener("change",this.selectType,!1),(0,i.Ay)("lasso-type-polygon").removeEventListener("change",this.selectType,!1),(0,i.Ay)("lasso-type-bezier").removeEventListener("change",this.selectType,!1),(0,i.Ay)("lasso-type-magnet").removeEventListener("change",this.selectType,!1)},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("viewport-render",this.viewportChange,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),(0,i.Ay)("lasso-type-free").addEventListener("change",this.selectType,!1),(0,i.Ay)("lasso-type-polygon").addEventListener("change",this.selectType,!1),(0,i.Ay)("lasso-type-bezier").addEventListener("change",this.selectType,!1),(0,i.Ay)("lasso-type-magnet").addEventListener("change",this.selectType,!1),this.feather=new h.A("lasso-feather",{compact:!0,defaultValue:0,label:(0,a.A)("feather")+":",labelFormat:e=>(100*e).toFixed(0),labelParse:e=>parseInt(e,10)/100}),this.size=new h.A("lasso-magnet-size",{compact:!0,label:(0,a.A)("size")+":",step:2,range:[5,120],defaultValue:50,labelFormat:e=>e.toFixed(0)}),this.type=document.querySelector('input[name="lasso-type"]:checked').value,"magnet"===this.type&&this.generateEdges(),this.noGoZone="lasso"!==this.type,(0,i.Ay)("lasso-mode-new").addEventListener("change",this.selectMode,!1),(0,i.Ay)("lasso-mode-add").addEventListener("change",this.selectMode,!1),(0,i.Ay)("lasso-mode-remove").addEventListener("change",this.selectMode,!1),this.selectMode()}}},89814:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Mandate=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Mandate=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"string"},{name:"amountRule",baseName:"amountRule",type:"Mandate.AmountRuleEnum"},{name:"billingAttemptsRule",baseName:"billingAttemptsRule",type:"Mandate.BillingAttemptsRuleEnum"},{name:"billingDay",baseName:"billingDay",type:"string"},{name:"endsAt",baseName:"endsAt",type:"string"},{name:"frequency",baseName:"frequency",type:"Mandate.FrequencyEnum"},{name:"remarks",baseName:"remarks",type:"string"},{name:"startsAt",baseName:"startsAt",type:"string"}],function(e){let t,s,i;!function(e){e.Max="max",e.Exact="exact"}(t=e.AmountRuleEnum||(e.AmountRuleEnum={})),function(e){e.On="on",e.Before="before",e.After="after"}(s=e.BillingAttemptsRuleEnum||(e.BillingAttemptsRuleEnum={})),function(e){e.Adhoc="adhoc",e.Daily="daily",e.Weekly="weekly",e.BiWeekly="biWeekly",e.Monthly="monthly",e.Quarterly="quarterly",e.HalfYearly="halfYearly",e.Yearly="yearly"}(i=e.FrequencyEnum||(e.FrequencyEnum={}))}(s=t.Mandate||(t.Mandate={}))},89834:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutVoucherAction=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutVoucherAction=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"alternativeReference",baseName:"alternativeReference",type:"string"},{name:"collectionInstitutionNumber",baseName:"collectionInstitutionNumber",type:"string"},{name:"downloadUrl",baseName:"downloadUrl",type:"string"},{name:"entity",baseName:"entity",type:"string"},{name:"expiresAt",baseName:"expiresAt",type:"string"},{name:"initialAmount",baseName:"initialAmount",type:"Amount"},{name:"instructionsUrl",baseName:"instructionsUrl",type:"string"},{name:"issuer",baseName:"issuer",type:"string"},{name:"maskedTelephoneNumber",baseName:"maskedTelephoneNumber",type:"string"},{name:"merchantName",baseName:"merchantName",type:"string"},{name:"merchantReference",baseName:"merchantReference",type:"string"},{name:"passCreationToken",baseName:"passCreationToken",type:"string"},{name:"paymentData",baseName:"paymentData",type:"string"},{name:"paymentMethodType",baseName:"paymentMethodType",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperName",baseName:"shopperName",type:"string"},{name:"surcharge",baseName:"surcharge",type:"Amount"},{name:"totalAmount",baseName:"totalAmount",type:"Amount"},{name:"type",baseName:"type",type:"CheckoutVoucherAction.TypeEnum"},{name:"url",baseName:"url",type:"string"}],function(e){let t;!function(e){e.Voucher="voucher"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CheckoutVoucherAction||(t.CheckoutVoucherAction={}))},89899:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaypalUpdateOrderRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaypalUpdateOrderRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"deliveryMethods",baseName:"deliveryMethods",type:"Array<DeliveryMethod>"},{name:"paymentData",baseName:"paymentData",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"sessionId",baseName:"sessionId",type:"string"}]},89922:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutAwaitAction=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CheckoutAwaitAction=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"paymentData",baseName:"paymentData",type:"string"},{name:"paymentMethodType",baseName:"paymentMethodType",type:"string"},{name:"type",baseName:"type",type:"CheckoutAwaitAction.TypeEnum"},{name:"url",baseName:"url",type:"string"}],function(e){let t;!function(e){e.Await="await"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.CheckoutAwaitAction||(t.CheckoutAwaitAction={}))},90027:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DragonpayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.DragonpayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"issuer",baseName:"issuer",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"type",baseName:"type",type:"DragonpayDetails.TypeEnum"}],function(e){let t;!function(e){e.Ebanking="dragonpay_ebanking",e.OtcBanking="dragonpay_otc_banking",e.OtcNonBanking="dragonpay_otc_non_banking",e.OtcPhilippines="dragonpay_otc_philippines"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.DragonpayDetails||(t.DragonpayDetails={}))},90590:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdatePaymentLinkRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.UpdatePaymentLinkRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"status",baseName:"status",type:"UpdatePaymentLinkRequest.StatusEnum"}],function(e){let t;!function(e){e.Expired="expired"}(t=e.StatusEnum||(e.StatusEnum={}))}(s=t.UpdatePaymentLinkRequest||(t.UpdatePaymentLinkRequest={}))},90593:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(54738),a=s(42903);class n extends a.A{constructor(e){super(e,"auto");let t=i.tn(this.selected.canvas);this.shaders.addShader("bwpoint",{black:t.x,white:t.y});let s=i.T6(this.selected.canvas);s<.7&&this.shaders.addShader("vibrance",.7-s),this.apply()}}},91188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IdealDonations=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.IdealDonations=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"issuer",baseName:"issuer",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"IdealDonations.TypeEnum"}],function(e){let t;!function(e){e.Ideal="ideal"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.IdealDonations||(t.IdealDonations={}))},91601:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(42268),a=s(21742),n=s(26806),r=s(53900),o=s(54738),h=s(79453);class c extends n.A{constructor(e){super((0,a.A)("dialogImageResizeTitle")),this.imageSizeInputChange=e=>{let t,s,a,n=e.currentTarget;(0,i.Ay)("image-resize-constrain").checked&&("image-resize-width"==n.id?(t=o.qE(Number(n.value),1,this.maxSize),a=t/this.stage.fresco.width,s=Math.round(a*this.stage.fresco.height),(0,i.Ay)("image-resize-height").value=s.toString()):(s=o.qE(Number(n.value),1,this.maxSize),a=s/this.stage.fresco.height,t=Math.round(a*this.stage.fresco.width),(0,i.Ay)("image-resize-width").value=t.toString()),n!=document.activeElement&&((0,i.Ay)("image-resize-width").value=t.toString(),(0,i.Ay)("image-resize-height").value=s.toString()))},this.apply=()=>{setTimeout(()=>{const e=Number((0,i.Ay)("image-resize-width").value),t=Number((0,i.Ay)("image-resize-height").value),s=new r.A(this.stage.fresco.width,this.stage.fresco.height),a=(0,i.Ay)("image-resize-smooth").checked,n=this.stage.fresco.layers.map(e=>e.clone(!0));this.stage.fresco.resize(e,t,a),this.stage.history.add({type:"pageResize",size:s,layers:n}),this.stage.updateViewport(),document.dispatchEvent(new CustomEvent("layer-arrange")),this.cleanUp()},500)},this.stage=e,this.maxSize=(null===h.N||void 0===h.N?void 0:h.N.subscription)?8192:4096,this.setContent(`\n            <label class="split">${(0,a.A)("width")} <input type="number" id="image-resize-width"/></label>\n            <label class="split top-10">${(0,a.A)("height")} <input type="number" id="image-resize-height"/></label>\n        \n            <input type="checkbox" checked id="image-resize-constrain" />\n            <label class="switch top-30" for="image-resize-constrain">${(0,a.A)("dialogResizeContrain")}<span></span></label>\n            \n            <input type="checkbox" checked id="image-resize-smooth" />\n            <label class="switch top-10" for="image-resize-smooth">${(0,a.A)("dialogResizeSmoothing")}<span></span></label>\n        \n            <div class="top-20"></div>\n        `);let t=(0,i.Ay)("image-resize-width");t.addEventListener("input",this.imageSizeInputChange,!1),t.addEventListener("change",this.imageSizeInputChange,!1),t.value=this.stage.fresco.width.toString();let s=(0,i.Ay)("image-resize-height");s.addEventListener("change",this.imageSizeInputChange,!1),s.addEventListener("input",this.imageSizeInputChange,!1),s.value=this.stage.fresco.height.toString()}}},92082:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CardDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"brand",baseName:"brand",type:"string"},{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"cupsecureplus_smscode",baseName:"cupsecureplus.smscode",type:"string"},{name:"cvc",baseName:"cvc",type:"string"},{name:"encryptedCardNumber",baseName:"encryptedCardNumber",type:"string"},{name:"encryptedExpiryMonth",baseName:"encryptedExpiryMonth",type:"string"},{name:"encryptedExpiryYear",baseName:"encryptedExpiryYear",type:"string"},{name:"encryptedSecurityCode",baseName:"encryptedSecurityCode",type:"string"},{name:"expiryMonth",baseName:"expiryMonth",type:"string"},{name:"expiryYear",baseName:"expiryYear",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"CardDetails.FundingSourceEnum"},{name:"holderName",baseName:"holderName",type:"string"},{name:"networkPaymentReference",baseName:"networkPaymentReference",type:"string"},{name:"number",baseName:"number",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"shopperNotificationReference",baseName:"shopperNotificationReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"threeDS2SdkVersion",baseName:"threeDS2SdkVersion",type:"string"},{name:"type",baseName:"type",type:"CardDetails.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Bcmc="bcmc",e.Scheme="scheme",e.NetworkToken="networkToken",e.Giftcard="giftcard",e.Card="card"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.CardDetails||(t.CardDetails={}))},92135:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"action",baseName:"action",type:"CheckoutAwaitAction | CheckoutDelegatedAuthenticationAction | CheckoutNativeRedirectAction | CheckoutQrCodeAction | CheckoutRedirectAction | CheckoutSDKAction | CheckoutThreeDS2Action | CheckoutVoucherAction | null"},{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"amount",baseName:"amount",type:"Amount"},{name:"donationToken",baseName:"donationToken",type:"string"},{name:"fraudResult",baseName:"fraudResult",type:"FraudResult"},{name:"merchantReference",baseName:"merchantReference",type:"string"},{name:"order",baseName:"order",type:"CheckoutOrderResponse"},{name:"paymentMethod",baseName:"paymentMethod",type:"ResponsePaymentMethod"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"refusalReason",baseName:"refusalReason",type:"string"},{name:"refusalReasonCode",baseName:"refusalReasonCode",type:"string"},{name:"resultCode",baseName:"resultCode",type:"PaymentResponse.ResultCodeEnum"},{name:"threeDS2ResponseData",baseName:"threeDS2ResponseData",type:"ThreeDS2ResponseData"},{name:"threeDS2Result",baseName:"threeDS2Result",type:"ThreeDS2Result"},{name:"threeDSPaymentData",baseName:"threeDSPaymentData",type:"string"}],function(e){let t;!function(e){e.AuthenticationFinished="AuthenticationFinished",e.AuthenticationNotRequired="AuthenticationNotRequired",e.Authorised="Authorised",e.Cancelled="Cancelled",e.ChallengeShopper="ChallengeShopper",e.Error="Error",e.IdentifyShopper="IdentifyShopper",e.PartiallyAuthorised="PartiallyAuthorised",e.Pending="Pending",e.PresentToShopper="PresentToShopper",e.Received="Received",e.RedirectShopper="RedirectShopper",e.Refused="Refused",e.Success="Success"}(t=e.ResultCodeEnum||(e.ResultCodeEnum={}))}(s=t.PaymentResponse||(t.PaymentResponse={}))},92270:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleFringe")),this.setContent((0,n.T)("div",{id:"fringe-slider"})),new a.A("fringe-slider",{label:(0,r.A)("amount"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("fringe",e)})}}},92278:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StandalonePaymentCancelRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.StandalonePaymentCancelRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"paymentReference",baseName:"paymentReference",type:"string"},{name:"reference",baseName:"reference",type:"string"}]},92681:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PayWithGoogleDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PayWithGoogleDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"PayWithGoogleDetails.FundingSourceEnum"},{name:"googlePayToken",baseName:"googlePayToken",type:"string"},{name:"recurringDetailReference",baseName:"recurringDetailReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"type",baseName:"type",type:"PayWithGoogleDetails.TypeEnum"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Paywithgoogle="paywithgoogle"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.PayWithGoogleDetails||(t.PayWithGoogleDetails={}))},93354:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(2215),a=s(82042),n=s(42268),r=s(54738),o=s(21742);class h extends i.A{constructor(e){super(e,(0,o.A)("titleMotionBlur")),this.update=()=>{r.sg("motion-blur",50,()=>{const e={amount:this.amount.getValue(),angle:this.angle.getValue()*(Math.PI/1.8)};this.change("motion",e.amount?e:void 0)})},this.setContent((0,n.T)("div",{id:"motion-amount"}),(0,n.T)("div",{id:"motion-angle"})),this.amount=new a.A("motion-amount",{label:(0,o.A)("amount"),range:[0,1],step:.05,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:()=>this.update()}),this.angle=new a.A("motion-angle",{label:(0,o.A)("angle"),step:.01,range:[0,3.6],defaultValue:0,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update()}),this.update()}}},93771:(e,t,s)=>{s.d(t,{Tq:()=>N,XN:()=>P,h6:()=>R});var i=s(42268),a=s(54738),n=(s(63306),s(6395)),r=s(7324),o=s(40963),h=s(75307),c=s(15818),l=s(41915),d=s(30821),p=s(27500),u=s(98244),m=s(29755),g=s(22866),y=s(79453),v=s(37699),f=s(54127),b=s(86445),w=s(58489),A=s(39989),x=s(13947),k=s(16309),S=s(89209),E=s(14983),T=s(27029),C=s(14871),M=s(82857);function P(e,t=!1,s="*/*"){return new Promise((a,n)=>{(0,i.Ay)("browse")&&(0,i.Ay)("browse").remove();let r=document.createElement("input");r.id="browse",r.type="file",r.multiple=e,r.accept=s,r.className="offscreen",t&&(r.accept="image/*",r.capture="camera"),r.addEventListener("change",()=>{r.files.length>0?a(r.files):a(void 0),document.body.removeChild(r)},!1),document.body.appendChild(r),r.click()})}async function D(e,t,s=3e4,n="text/javascript"){let r=!1;for(let i=0;i<document.head.childNodes.length;i++){const t=document.head.childNodes[i];if(t.nodeType===Node.ELEMENT_NODE&&t.getAttribute("src")===e){r=!0;break}}r||document.head.appendChild((0,i.T)("script",{src:e,type:n}));let o=0;for(;!t();){if(o>=s)throw new Error(`Timeout triggered when loading script ${e}`);const t=500;o+=t,await a.uk(t)}}async function N(e,t=null,i=!0,r="add"){var c,l;if(e){let b,w=null!==(c=e.type)&&void 0!==c?c:"";if((0,u.A)("open-file",w),""==e.type){const t=await a.E5(e)?"image/heic":"";t&&(w=t)}try{switch(w){case"image/psd":case"application/psd":case"application/photoshop":case"application/x-photoshop":case"image/vnd.adobe.photoshop":(0,u.A)("open-file","image/psd"),b=await I(t,e,r);break;case"image/tiff":b=await async function(e,t,i){const a=await async function(e){const t=(await s.e(4990).then(s.t.bind(s,48593,23))).default,i=await(0,n.CB)(e);return t.initialize({TOTAL_MEMORY:2*i.byteLength}),new t({buffer:i})}(t);let r=t.name.replace(/^.*[\\\/]/,"");if(!e)return a.toCanvas();e.addImage(a.toCanvas(),r,i)}(t,e,r);break;case"application/zip":(0,u.A)("open-file","application/zip"),b=await L(t,e,void 0,r);break;case"image/heic":(0,u.A)("open-file","image/heic"),b=await async function(e,t,i=!0,r){try{const c=(await Promise.all([s.e(3220),s.e(8876)]).then(s.t.bind(s,53220,23))).default,l=await(0,n.CB)(t),u=new c.HeifDecoder,g=u.decode(l)[0],v=g.get_width(),f=g.get_height(),b=document.createElement("canvas");b.width=v,b.height=f;const w=b.getContext("2d"),A=w.createImageData(v,f);await new Promise((e,t)=>{g.display(A,s=>{if(!s)return t(new Error("HEIF processing error"));e(!0)})}),w.putImageData(A,0,0);const x=await(0,n.Ep)(await a.PG(b));if(!e)return x;let k,S="editor"===m.Ay.product&&i||"editor"!==m.Ay.product?"create":"layer";if(("express"===m.Ay.product||"designer"===m.Ay.product||"drop"===r)&&(S=i&&e.fresco?await(new p.A).init():e.fresco?"layer":"create","close"===S))return;let E=0;if(m.Ay.askToPreResize&&"create"===S&&(x.width>2500||x.height>2500)){if([k,E]=await new d.A(x,await h.A.rotation(t)).init(),void 0===k)return}else k=o.A.bestFit(x.width,x.height,"premium"===(null===y.N||void 0===y.N?void 0:y.N.subscriptionAccess)?8196:4096,"premium"===(null===y.N||void 0===y.N?void 0:y.N.subscriptionAccess)?8196:4096).size(),E=0;let T=a.k8(x,k.width>k.height?k.width:k.height,E),C=t.name?t.name:"Untitled";"create"===S&&e.addTab(new M.A(a.Os(),C,T.width,T.height,void 0,void 0,void 0,r),"image"),e.addImage(T,C,r)}catch(c){return void alert("Error while loading HEIC file :(")}}(t,e,i,r);break;case"application/pdf":(0,u.A)("open-file","application/pdf"),b=await async function(e,t,s){const i=await(0,n.CB)(t);await D("/js/pdf.js",()=>!!window.pdfjsLib,void 0,"module");const r=window.pdfjsLib;r.GlobalWorkerOptions.workerSrc="/js/pdf.worker.mjs";const o=await r.getDocument(new Uint8Array(i)).promise,h=await o.getPage(1),c=h.getViewport({scale:1}),l=document.createElement("canvas"),d=l.getContext("2d");l.height=c.height,l.width=c.width,await h.render({canvasContext:d,viewport:c}).promise;const p=await(0,n.Ep)(await a.PG(l));if(!e)return p;e.addImage(l,t.name,s)}(t,e,r);break;default:const c=null===(l=e.name)||void 0===l?void 0:l.toLowerCase();if(c){if(c.endsWith(".psd"))return(0,u.A)("open-file","image/psd"),b=await I(t,e,r),b;if(c.endsWith(".pxd"))return(0,u.A)("open-file","image/pxd"),void(await async function(e,t,i){document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));const{PXD:r}=await Promise.all([s.e(6825),s.e(9262)]).then(s.bind(s,82355)),h=await(0,n.CB)(t),c=r.decode(new Uint8Array(h)),l=new M.A(a.Os(),t.name,c.width,c.height,void 0,void 0,void 0,i);try{e.supressRender=!0,e.addTab(l,"document");for(let t=0;t<c.layers;t++){const t=c.takeNextLayer(),s=t.width,i=t.height;switch(t.kind){case"bitmap":case"shape":{if(0===s||0===i){const s=new A.A(a.Os(),t.name,void 0,void 0,!1);s.settings.opacity=t.alpha,s.settings.blendmode=t.blendMode,s.settings.visible=t.visible,s.settings.locked=t.locked,e.fresco.layers.push(s),t.free();continue}const n=a.Nw(s,i),r=n.getContext("2d"),h=t.takeCanvas();r.putImageData(new ImageData(h,s,i),0,0);const c=new A.A(a.Os(),t.name,n,new o.A(t.x,t.y,s,i,t.rotation),t.locked);c.settings.opacity=t.alpha,c.settings.blendmode=t.blendMode,c.settings.visible=t.visible;const l=t.takeMask();if(l.length>0){const e=a.Nw(s,i);e.getContext("2d").putImageData(new ImageData(l,s,i),0,0),c.mask=e,c.render()}e.fresco.layers.push(c);break}case"text":{const n=JSON.parse(t.meta),r=new S.A(n.textSettings.font,n.textSettings.size);Object.assign(r,n.textSettings);const h=new f.A(a.Os(),n.text,new o.A(t.x,t.y,s,i,t.rotation),r);h.settings.opacity=t.alpha,h.settings.blendmode=t.blendMode,h.settings.visible=t.visible,await v.A.loadFont(r.font),r.measureText(),await h.prepare(),e.fresco.layers.push(h)}}t.free()}}finally{c.free(),e.supressRender=!1,document.dispatchEvent(new CustomEvent("loading",{detail:"stop"}))}return await e.syncDocument(e.fresco),e.selectLayer(e.fresco.layers[0]),e.setZoom("fit"),document.dispatchEvent(new CustomEvent("layerlist-update")),Promise.reject()}(t,e,r));if(c.endsWith(".pxz"))return(0,u.A)("open-file","image/pxz"),b=await L(t,e,void 0,r),b;if(c.endsWith(".svg")&&"frame"!==r)return(0,u.A)("open-file","image/svg+xml"),b=await async function(e,t,s=!0,i="add"){let a=await t.text();if(!e){let e=new E.A;e.variant="svg",e.content=a;let t=new Blob([e.content],{type:"image/svg+xml"});return await(0,n.Ep)(t)}e.addSVGShape(a,t.name,i)}(t,e,i,r),b;if(c.endsWith(".otf")||c.endsWith(".ttf")||c.endsWith(".woff")||c.endsWith(".woff2"))return(0,u.A)("open-file","font/"+e.name.split(".")[1]),void(await v.A.loadFontFromUpload(e))}b=await async function(e,t,s=!0,i){const r=await(0,n.Ep)(t);if(!e)return r;let c,l,u="editor"===m.Ay.product&&s||"editor"!==m.Ay.product?"create":"layer";if(("express"===m.Ay.product||"designer"===m.Ay.product||"drop"===i)&&(u=s&&e.fresco?await(new p.A).init():e.fresco?"layer":"create","close"===u))return;if(m.Ay.askToPreResize&&"create"===u&&(r.width>2500||r.height>2500)){if([c,l]=await new d.A(r,await h.A.rotation(t)).init(),void 0===c)return}else c=o.A.bestFit(r.width,r.height,"premium"===(null===y.N||void 0===y.N?void 0:y.N.subscriptionAccess)?8196:4096,"premium"===(null===y.N||void 0===y.N?void 0:y.N.subscriptionAccess)?8196:4096).size(),l=0;let g=a.k8(r,c.width>c.height?c.width:c.height,l),v=t.name?t.name:r.src.replace(/^.*[\\\/]/,"");"create"===u&&e.addTab(new M.A(a.Os(),v,g.width,g.height,void 0,void 0,void 0,i),"image");e.addImage(g,v,i)}(t,e,i,r)}return b}catch(g){throw document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),g}}else document.dispatchEvent(new CustomEvent("loading",{detail:"stop"}))}async function L(e,t,i,r){const{ZipReader:o}=await Promise.all([s.e(6825),s.e(9262)]).then(s.bind(s,82355));let h;try{let s=await t.arrayBuffer();h=new o(new Uint8Array(s));let d=h.readString("manifest.json"),p=JSON.parse(d);if(!e){const e=p.stack[0];if(e.type===g.A.TYPE_IMAGE||e.type===g.A.TYPE_ELEMENT){let t=h.readFile(e.content);if(t)return await(0,n.Ep)(new Blob([t.buffer]))}throw new Error("No image in PXZ file")}e.supressRender=!0;const u=new M.A(a.Os(),p.name,p.width,p.height,p.background,p.animation,i,r);e.addTab(u,"template"),document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));try{let t=h.readFile("thumbnail.webp"),s=await a.lz(new Blob([t.buffer]));e.renderPreview(s)}catch(c){console.log(c)}let m=await _(p,new l.A,h);e.fresco.layers.push(...m),await e.syncDocument(e.fresco)}catch(d){return console.log(d),void alert("Error while loading PXZ file :(")}finally{null==h||h.free(),e&&(e.supressRender=!1),document.dispatchEvent(new CustomEvent("loading",{detail:"stop"}))}e.selectLayer(e.fresco.layers[0]),e.setZoom("fit"),document.dispatchEvent(new CustomEvent("layerlist-update"))}async function R(e,t){let s;document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));let i=new l.A;try{const a=await fetch(t),n=await a.json();i.x=Math.round((e.fresco.width-n.width)/2),i.y=Math.round((e.fresco.height-n.height)/2),s=await _(n,i)}catch(r){console.log(r),document.dispatchEvent(new CustomEvent("loading",{detail:"stop"}))}if(!s||0===s.length)return;const n=a.r0();s.forEach(e=>e.settings.link=n),e.addLayer(s),document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update"))}async function _(e,t=new l.A,s,i){var h;let d=new Array;if(e.stack)for(let l=0;l<e.stack.length;l++){let p=e.stack[l];switch(p.type){case g.A.TYPE_IMAGE:case g.A.TYPE_ELEMENT:{let e,r=p.rect?new o.A(p.rect.x+t.x,p.rect.y+t.y,p.rect.w,p.rect.h,p.rect.r):void 0;if(void 0!==p.content)if(s){let t=s.readFile(p.content);t&&(e=await a.lz(new Blob([t.buffer])))}else{let t=await(0,n.yP)(i+p.content);t&&(e=await a.lz(t))}let h=new A.A(a.Os(),p.name,e,r,p.locked);if(void 0!==p.opacity&&(h.settings.opacity=p.opacity),void 0!==p.blendmode&&(h.settings.blendmode=p.blendmode),void 0!==p.locked&&(h.settings.locked=p.locked),void 0!==p.visible&&(h.settings.visible=p.visible),void 0!==p.animation&&(h.animation=p.animation),void 0!==p.macro&&(h.macro=p.macro),void 0!==p.mask&&s){let e=s.readFile(p.mask);e&&(h.mask=await a.lz(new Blob([e.buffer]))),h.render()}d.push(h);break}case g.A.TYPE_TEXT:{if(!p.format)continue;let e=new S.A(null===(h=p.format.font)||void 0===h?void 0:h.name,p.format.size);void 0!==p.format.align&&(e.align=p.format.align),void 0!==p.format.bold&&(e.bold=p.format.bold),void 0!==p.format.italic&&(e.italic=p.format.italic),void 0!==p.format.underline&&(e.underline=p.format.underline),void 0!==p.format.uppercase&&(e.uppercase=p.format.uppercase),void 0!==p.format.linespace&&(e.lineSpace=p.format.linespace),void 0!==p.format.letterspace&&(e.letterSpace=p.format.letterspace);let l=new f.A(a.Os(),p.content,new o.A(p.rect.x+t.x,p.rect.y+t.y,p.rect.w,p.rect.h,p.rect.r),e);if(void 0!==p.opacity&&(l.settings.opacity=p.opacity),void 0!==p.blendmode&&(l.settings.blendmode=p.blendmode),void 0!==p.locked&&(l.settings.locked=p.locked),void 0!==p.visible&&(l.settings.visible=p.visible),void 0!==p.animation&&(l.animation=p.animation),void 0!==p.macro&&(l.macro=p.macro),e.font){let t=v.A.getFontDesc(e.font);if(!t&&p.format.font.content){let e;e=s?new Blob([s.readFile(p.format.font.content)]):await(0,n.yP)(i+p.format.font.content),e&&(t=await v.A.loadFontFromTemplate(e,p.format.font.name,p.format.font.content))}else t&&await v.A.addToDOM(t);e.measureText()}if(p.style&&(p.style.curve&&(l.textSettings.curve=!0,void 0!==p.style.curve.type&&(l.textSettings.curveType=p.style.curve.type),void 0!==p.style.curve.amount&&(l.textSettings.curveAmount=p.style.curve.amount),void 0!==p.style.curve.spread&&(l.textSettings.curveSpread=p.style.curve.spread),void 0!==p.style.curve.flip&&(l.textSettings.curveFlip=p.style.curve.flip)),p.style.warp&&(l.textSettings.warp=!0,void 0!==p.style.warp.type&&(l.textSettings.warpType=p.style.warp.type),void 0!==p.style.warp.mode&&(l.textSettings.warpMode=p.style.warp.mode),void 0!==p.style.warp.edgesize&&(l.textSettings.warpEdgeSize=p.style.warp.edgesize),void 0!==p.style.warp.centersize&&(l.textSettings.warpCenterSize=p.style.warp.centersize),void 0!==p.style.warp.verticaloffset&&(l.textSettings.warpVerticalOffset=p.style.warp.verticaloffset),void 0!==p.style.warp.horizontaloffset&&(l.textSettings.warpHorizontalOffset=p.style.warp.horizontaloffset)),p.style.background&&(l.textSettings.background=!0,void 0!==p.style.background.color&&(l.textSettings.backgroundColor=p.style.background.color),void 0!==p.style.background.type&&(l.textSettings.backgroundType=p.style.background.type),void 0!==p.style.background.punch&&(l.textSettings.backgroundPunch=p.style.background.punch),void 0!==p.style.background.offset&&(l.textSettings.backgroundOffset=p.style.background.offset)),p.style.outline&&(l.textSettings.outline=!0,void 0!==p.style.outline.size&&(l.textSettings.outlineSize=p.style.outline.size),void 0!==p.style.outline.color&&(l.textSettings.outlineColor=p.style.outline.color),void 0!==p.style.outline.punch&&(l.textSettings.outlinePunch=p.style.outline.punch),void 0!==p.style.outline.distance&&(l.textSettings.outlineDistance=p.style.outline.distance),void 0!==p.style.outline.direction&&(l.textSettings.outlineDirection=p.style.outline.direction)),p.style.shadow&&(l.textSettings.shadow=!0,void 0!==p.style.shadow.blur&&(l.textSettings.shadowBlur=p.style.shadow.blur),void 0!==p.style.shadow.color&&(l.textSettings.shadowColor=p.style.shadow.color),void 0!==p.style.shadow.opacity&&(l.textSettings.shadowAlpha=p.style.shadow.opacity),void 0!==p.style.shadow.distance&&(l.textSettings.shadowDistance=p.style.shadow.distance),void 0!==p.style.shadow.direction&&(l.textSettings.shadowDirection=p.style.shadow.direction))),void 0!==p.format.fill){let e;switch(p.format.fill.type){case"color":e=new r.A(c.A.fromHEX(p.format.fill.value));break;case"gradient":e=new r.A(k.Ay.fromIGradient(p.format.fill.value));break;case"pattern":let t=p.format.fill.value;if(s)t.svg=s.readString(t.svg);else{let e=await(0,n.yP)(i+t.svg);e&&(t.svg=await e.text())}e=new r.A(await C.A.fromIPattern(t))}l.textSettings.fillType=e.getType(),l.textSettings.fillValue=e.getStringValue(),l.fill=e}await l.prepare(),l.settings.name=p.name,d.push(l);break}case g.A.TYPE_SHAPE:{let e=new E.A;if(e.variant=p.format?p.format.variant:"svg","svg"===e.variant){let t;if(p.content)if(s)t=s.readString(p.content);else{let e=await(0,n.yP)(i+p.content);e&&(t=await e.text())}if(!t)continue;e.content=t}"path"===e.variant&&(e.content=p.content),p.style&&(p.style.outline&&(void 0!==p.style.outline.size&&(e.outlineSize=p.style.outline.size),void 0!==p.style.outline.color&&(e.outlineColor=p.style.outline.color)),p.style.shadow&&(e.shadow=!0,void 0!==p.style.shadow.blur&&(e.shadowBlur=p.style.shadow.blur),void 0!==p.style.shadow.color&&(e.shadowColor=p.style.shadow.color),void 0!==p.style.shadow.opacity&&(e.shadowOpacity=p.style.shadow.opacity),void 0!==p.style.shadow.distance&&(e.shadowDistance=p.style.shadow.distance),void 0!==p.style.shadow.direction&&(e.shadowDirection=p.style.shadow.direction)));let h=new b.A(a.Os(),p.name,new o.A(p.rect.x+t.x,p.rect.y+t.y,p.rect.w,p.rect.h,p.rect.r),e);if(void 0!==p.opacity&&(h.settings.opacity=p.opacity),void 0!==p.blendmode&&(h.settings.blendmode=p.blendmode),void 0!==p.locked&&(h.settings.locked=p.locked),void 0!==p.visible&&(h.settings.visible=p.visible),void 0!==p.animation&&(h.animation=p.animation),void 0!==p.macro&&(h.macro=p.macro),void 0!==p.format){if(void 0!==p.format.fill){let e;switch(p.format.fill.type){case"color":e=new r.A(c.A.fromHEX(p.format.fill.value));break;case"gradient":e=new r.A(k.Ay.fromIGradient(p.format.fill.value));break;case"pattern":let t=p.format.fill.value;if(s)t.svg=s.readString(t.svg);else{let e=await(0,n.yP)(i+t.svg);e&&(t.svg=await e.text())}e=new r.A(await C.A.fromIPattern(t))}h.shapeSettings.fillType=e.getType(),h.shapeSettings.fillValue=e.getStringValue(),h.fill=e}p.format.radii&&(h.shapeSettings.radii=p.format.radii)}await h.prepare(),d.push(h);break}case g.A.TYPE_FRAME:{let e=new w.A(a.Os(),p.name,new o.A(p.rect.x+t.x,p.rect.y+t.y,p.rect.w,p.rect.h,p.rect.r));if(void 0!==p.opacity&&(e.settings.opacity=p.opacity),void 0!==p.blendmode&&(e.settings.blendmode=p.blendmode),void 0!==p.locked&&(e.settings.locked=p.locked),void 0!==p.visible&&(e.settings.visible=p.visible),void 0!==p.animation&&(e.animation=p.animation),void 0!==p.macro&&(e.macro=p.macro),p.frame&&(void 0!==p.frame.trim&&(e.trim=new o.A(p.frame.trim.x,p.frame.trim.y,p.frame.trim.w,p.frame.trim.h)),void 0!==p.frame.clip&&(e.frameSettings.clip=p.frame.clip)),p.content)if(s){let t=s.readFile(p.content);t&&(e.canvas=await a.lz(new Blob([t.buffer])))}else{let t=await(0,n.yP)(i+p.content);t&&(e.canvas=await a.lz(t))}p.style&&(p.style.outline&&(e.frameSettings.outline=!0,void 0!==p.style.outline.size&&(e.frameSettings.outlineSize=p.style.outline.size),void 0!==p.style.outline.color&&(e.frameSettings.outlineColor=p.style.outline.color)),p.style.shadow&&(e.frameSettings.shadow=!0,void 0!==p.style.shadow.blur&&(e.frameSettings.shadowBlur=p.style.shadow.blur),void 0!==p.style.shadow.color&&(e.frameSettings.shadowColor=p.style.shadow.color),void 0!==p.style.shadow.opacity&&(e.frameSettings.shadowOpacity=p.style.shadow.opacity),void 0!==p.style.shadow.distance&&(e.frameSettings.shadowDistance=p.style.shadow.distance),void 0!==p.style.shadow.direction&&(e.frameSettings.shadowDirection=p.style.shadow.direction))),e.prepare(),d.push(e);break}case g.A.TYPE_GROUP:{let e=new x.A(a.Os(),p.name,new T.A);void 0!==p.meta&&(void 0!==p.meta.color&&(e.groupSettings.color=p.meta.color),void 0!==p.meta.collapsed&&(e.groupSettings.collapsed=p.meta.collapsed),void 0!==p.meta.members&&(e.groupSettings.numberOfMembers=p.meta.members)),void 0!==p.opacity&&(e.settings.opacity=p.opacity),void 0!==p.locked&&(e.settings.locked=p.locked),void 0!==p.visible&&(e.settings.visible=p.visible),void 0!==p.animation&&(e.animation=p.animation),void 0!==p.macro&&(e.macro=p.macro);break}}}return d}async function I(e,t,s){document.dispatchEvent(new CustomEvent("loading",{detail:"start"}));const i=await async function(e){await D("/js/psd.js",()=>window.require&&window.require("psd"));const t=window.require("psd"),s=await new Response(e).arrayBuffer(),i=new t(new Uint8Array(s));return i.parse(),i}(t),n=i.tree();if(!e)return document.dispatchEvent(new CustomEvent("loading",{detail:"stop"})),await i.image.toPng();const r=new M.A(a.Os(),t.name,i.header.cols,i.header.rows,void 0,void 0,void 0,s);try{e.supressRender=!0,e.addTab(r,"document");let t=n.descendants();for(let s=t.length-1;s>=0;s--){const i=t[s];if(!i.isGroup())try{const n=new o.A(i.layer.left,i.layer.top,i.layer.width,i.layer.height),r=i.get("typeTool");let h;if(r){const e=r.export();let t=e.font.sizes?e.font.sizes[0]:12;const s=e.font.name.trim(),i=new S.A(s.substr(0,s.length-1),t);h=new f.A(a.Os(),e.value.trim(),n.clone(),i),h.textSettings.fillType="color",h.textSettings.fillValue=new c.A(e.font.colors[0][0],e.font.colors[0][1],e.font.colors[0][2],e.font.colors[0][3]).toHEX(),h.prepare()}else{const e=await new Promise((e,t)=>{const s=i.toPng();s.onload=()=>e(s),s.onerror=e=>t(e)});let r=a.k8(e,4096);h=new A.A(a.Os(),i.layer.name,r,n,s==t.length-1)}const l={norm:"source-over",dark:"darken",lite:"lighten",hue:"hue",sat:"saturation",colr:"color",lum:"luminosity",mul:"multiply",scrn:"screen",diss:"source-over",over:"overlay",hLit:"hard-light",sLit:"soft-light",diff:"difference",smud:"exclusion",div:"color-doge",idiv:"color-burn",lbrn:"source-over",lddg:"source-over",vLit:"source-over",lLit:"source-over",pLit:"source-over",hMix:"source-over",pass:"source-over",dkCl:"source-over",lgCl:"source-over",fsub:"source-over",fdiv:"source-over"};h.settings.blendmode=l[i.layer.blendMode.blendKey]||"source-over",h.settings.visible=i.layer.visible,h.settings.opacity=i.layer.opacity/255,e.fresco.layers.push(h)}catch(h){console.log("pxd layer read",h)}}e.selectLayer(e.fresco.layers[0]),await e.syncDocument(e.fresco)}catch(h){throw e.close(r.id),h}finally{e.supressRender=!1,document.dispatchEvent(new CustomEvent("loading",{detail:"stop"}))}e.setZoom("fit"),document.dispatchEvent(new CustomEvent("layerlist-update"))}},94079:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BalanceCheckRequest=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.BalanceCheckRequest=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"accountInfo",baseName:"accountInfo",type:"AccountInfo"},{name:"additionalAmount",baseName:"additionalAmount",type:"Amount"},{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"billingAddress",baseName:"billingAddress",type:"Address"},{name:"browserInfo",baseName:"browserInfo",type:"BrowserInfo"},{name:"captureDelayHours",baseName:"captureDelayHours",type:"number"},{name:"dateOfBirth",baseName:"dateOfBirth",type:"string"},{name:"dccQuote",baseName:"dccQuote",type:"ForexQuote"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"Address"},{name:"deliveryDate",baseName:"deliveryDate",type:"Date"},{name:"deviceFingerprint",baseName:"deviceFingerprint",type:"string"},{name:"fraudOffset",baseName:"fraudOffset",type:"number"},{name:"installments",baseName:"installments",type:"Installments"},{name:"localizedShopperStatement",baseName:"localizedShopperStatement",type:"{ [key: string]: string; }"},{name:"mcc",baseName:"mcc",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantOrderReference",baseName:"merchantOrderReference",type:"string"},{name:"merchantRiskIndicator",baseName:"merchantRiskIndicator",type:"MerchantRiskIndicator"},{name:"metadata",baseName:"metadata",type:"{ [key: string]: string; }"},{name:"orderReference",baseName:"orderReference",type:"string"},{name:"paymentMethod",baseName:"paymentMethod",type:"{ [key: string]: string; }"},{name:"recurring",baseName:"recurring",type:"Recurring"},{name:"recurringProcessingModel",baseName:"recurringProcessingModel",type:"BalanceCheckRequest.RecurringProcessingModelEnum"},{name:"reference",baseName:"reference",type:"string"},{name:"selectedBrand",baseName:"selectedBrand",type:"string"},{name:"selectedRecurringDetailReference",baseName:"selectedRecurringDetailReference",type:"string"},{name:"sessionId",baseName:"sessionId",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperIP",baseName:"shopperIP",type:"string"},{name:"shopperInteraction",baseName:"shopperInteraction",type:"BalanceCheckRequest.ShopperInteractionEnum"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"shopperStatement",baseName:"shopperStatement",type:"string"},{name:"socialSecurityNumber",baseName:"socialSecurityNumber",type:"string"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"store",baseName:"store",type:"string"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"threeDS2RequestData",baseName:"threeDS2RequestData",type:"ThreeDS2RequestData"},{name:"threeDSAuthenticationOnly",baseName:"threeDSAuthenticationOnly",type:"boolean"},{name:"totalsGroup",baseName:"totalsGroup",type:"string"},{name:"trustedShopper",baseName:"trustedShopper",type:"boolean"}],function(e){let t,s;!function(e){e.CardOnFile="CardOnFile",e.Subscription="Subscription",e.UnscheduledCardOnFile="UnscheduledCardOnFile"}(t=e.RecurringProcessingModelEnum||(e.RecurringProcessingModelEnum={})),function(e){e.Ecommerce="Ecommerce",e.ContAuth="ContAuth",e.Moto="Moto",e.Pos="POS"}(s=e.ShopperInteractionEnum||(e.ShopperInteractionEnum={}))}(s=t.BalanceCheckRequest||(t.BalanceCheckRequest={}))},94121:(e,t,s)=>{s.d(t,{A:()=>b});var i=s(21742),a=s(42268),n=s(40963),r=s(53900),o=s(54738),h=s(41915),c=s(79453),l=s(81937),d=s(26806),p=s(50295),u=s(6395),m=s(78508);var g=s(96703),y=s(98938),v=s(3514),f=s(98244);class b extends d.A{constructor(e){super((0,i.A)("titleAIGenerativeExpand"),!0,!0),this.constrain=!0,this.saving=!1,this.messy=!1,this.working=!1,this.setPreview=async()=>{(0,a.Ay)("generative-expand-preview-holder").innerHTML="";const e=n.A.bestFit(this.selected.canvas.width,this.selected.canvas.height,this.dialog.offsetWidth-360,this.dialog.offsetHeight-192),t=o.H5(this.selected.canvas,e.width,e.height,!0);t.id="generative-expand-preview-canvas",t.classList.add("expand-preview"),(0,a.Ay)("generative-expand-preview-holder").append(t),this.updatePreview()},this.updatePreview=()=>{const e=(0,a.Ay)("generative-expand-preview-holder"),t=(0,a.Ay)("generative-expand-preview-canvas"),s=n.A.bestFit(this.size.width,this.size.height,this.dialog.offsetWidth-360,this.dialog.offsetHeight-192);let i=this.selected.rect.width/this.size.width,r=this.selected.rect.height/this.size.height;e.style.width=s.width+2+"px",e.style.height=s.height+2+"px",t.style.width=s.width*i+"px",t.style.height=s.height*r+"px";let o=e.clientWidth/this.size.width;t.style.top=Math.round(this.pos.y*o)+"px",t.style.left=Math.round(this.pos.x*o)+"px",this.messy=1!==i||1!==r,this.messy?(0,a.Ay)("generative-expand-execute").classList.remove("disabled"):(0,a.Ay)("generative-expand-execute").classList.add("disabled")},this.previewDown=e=>{e.stopPropagation();const t=(0,a.Ay)("generative-expand-preview-canvas");this.downPoint=new h.A(e.clientX,e.clientY),this.downPosition=new h.A(t.offsetLeft,t.offsetTop),document.addEventListener("pointermove",this.previewMove,!0),document.addEventListener("pointerup",this.previewUp,!0)},this.previewMove=e=>{e.stopPropagation();const t=(0,a.Ay)("generative-expand-preview-canvas"),s=(0,a.Ay)("generative-expand-preview-holder");let i=this.downPosition.x+(e.clientX-this.downPoint.x),n=this.downPosition.y+(e.clientY-this.downPoint.y);i=o.qE(i,0,s.clientWidth-t.clientWidth),n=o.qE(n,0,s.clientHeight-t.clientHeight),t.style.top=n+"px",t.style.left=i+"px";let r=this.size.width/s.clientWidth;this.pos.x=Math.round(i*r),this.pos.y=Math.round(n*r)},this.previewUp=e=>{e.stopPropagation(),document.removeEventListener("pointermove",this.previewMove,!0),document.removeEventListener("pointerup",this.previewUp,!0)},this.showCreditPop=()=>{new g.A("credits")},this.setPreset=e=>{var t;if(e!==(null===(t=this.selectedPreset)||void 0===t?void 0:t.getAttribute("data"))&&this.reset(),-1!==e.indexOf(":")){const[t,s]=e.split(":").map(Number);let i=this.selected.rect.width,a=this.selected.rect.height;if(t===s){let e=Math.max(i,a);this.size=new r.A(e,e)}else{let e=i,n=a;t>s?(n=i/t*s,n<a&&(e=a/s*t,n=a)):(e=a/s*t,e<i&&(n=i/t*s,e=i)),this.size=new r.A(Math.round(e),Math.round(n))}}else"1.5x"===e&&(this.size.width=Math.round(1.5*this.selected.rect.width),this.size.height=Math.round(1.5*this.selected.rect.height)),"2x"===e&&(this.size.width=2*this.selected.rect.width,this.size.height=2*this.selected.rect.height),"1.5w"===e&&(this.size.height=this.selected.rect.height,this.size.width=Math.round(1.5*this.selected.rect.width)),"1.5h"===e&&(this.size.width=this.selected.rect.width,this.size.height=Math.round(1.5*this.selected.rect.height));this.pos.x=Math.round(.5*(this.size.width-this.selected.rect.width)),this.pos.y=Math.round(.5*(this.size.height-this.selected.rect.height)),this.updateSizeInput(),this.updatePreview()},this.changeContraint=e=>{this.saving||(this.constrain=!this.constrain,(0,a.Ay)("generative-expand-lock").style.display=this.constrain?"block":"none",(0,a.Ay)("generative-expand-vs").style.display=this.constrain?"none":"block",(0,a.Ay)("toggle-generative-expand-constraint").checked=this.constrain)},this.widthHeightInputChange=e=>{if(this.saving||this.working)return;let t=null==e?void 0:e.currentTarget,s=(0,a.Ay)("generative-expand-width").value,i=(0,a.Ay)("generative-expand-height").value;if(this.size.width=Number.isNaN(Number(s))?this.selected.rect.width:o.qE(Number(s),this.selected.rect.width,4096),this.size.height=Number.isNaN(Number(i))?this.selected.rect.height:o.qE(Number(i),this.selected.rect.height,4096),this.constrain&&"generative-expand-width"==t.id){let e=this.size.width/this.selected.rect.width;this.size.height=Number.isNaN(Number(s))?this.selected.rect.height:Math.round(e*this.selected.rect.height)}else if(this.constrain&&"generative-expand-height"==t.id){let e=this.size.height/this.selected.rect.height;this.size.width=Number.isNaN(Number(s))?this.selected.rect.width:Math.round(e*this.selected.rect.width)}this.pos.x=Math.round(.5*(this.size.width-this.selected.rect.width)),this.pos.y=Math.round(.5*(this.size.height-this.selected.rect.height)),o.sg("size",200,()=>this.updatePreview())},this.updateSizeInput=()=>{(0,a.Ay)("generative-expand-width").value=this.size.width.toString(),(0,a.Ay)("generative-expand-height").value=this.size.height.toString()},this.renderCreditAmount=()=>{c.N?(0,a.Ay)("generative-expand-credit-count").innerHTML=c.N.credits.toString():((0,a.Ay)("generative-expand-execute").innerText=(0,i.A)("common-signUpLogIn"),(0,a.Ay)("generative-expand-credit-count").style.display="none")},this.reset=()=>{(0,a.Ay)("generative-expand-result").style.display="none",(0,a.Ay)("generative-expand-preview").style.display="block",(0,a.Ay)("generative-expand-execute").style.display="inline-flex",(0,a.Ay)("generative-expand-repeat").style.display="none",(0,a.Ay)(`dialog-apply${this.mid}`).classList.add("disabled"),this.result=void 0},this.execute=async()=>{var e,t,s;if(c.N)if(c.N.credits){if(!(this.working||this.size.width===this.selected.rect.width&&this.size.height===this.selected.rect.height)){(0,f.A)("generative-expand"),this.working=!0,(0,a.Ay)("generative-expand-execute").classList.add("working"),null===(e=(0,a.Ay)("generative-expand-repeat"))||void 0===e||e.classList.add("working"),(0,a.Ay)("generative-expand-settings").classList.add("disabled"),(0,a.Ay)("generative-expand-preview").classList.add("disabled");try{let e=(0,a.Ay)("generative-expand-result-list").getElementsByTagName("canvas");for(let a=0;a<e.length;a++)e[a].classList.add("disabled");this.result=await async function(e,t,s,i=2){const a=new FormData;a.set("image",await o.PG(e)),a.set("amount",i.toString()),a.set("width",t.width.toString()),a.set("height",t.height.toString()),a.set("x",s.x.toString()),a.set("y",s.y.toString());const n=await fetch("/api/ai/generative-expand",{method:"POST",headers:{contentType:"multipart/form-data"},body:a});n.status>=200&&n.status<300&&await m.W2();const r=(await n.json()).data.map(e=>(0,u.kw)(`data:image/jpeg;base64,${e}`));return Promise.all(r)}(this.selected.canvas,this.size,this.pos,1),(0,a.Ay)("generative-expand-result").style.display="block",(0,a.Ay)("generative-expand-preview").style.display="none",(0,a.Ay)("generative-expand-execute").style.display="none",(0,a.Ay)("generative-expand-repeat").style.display="inline-flex",(0,a.Ay)(`dialog-apply${this.mid}`).classList.remove("disabled"),(0,a.Ay)("generative-expand-result-list").innerHTML="",(0,a.Ay)("generative-expand-repeat").addEventListener("click",this.execute,!1);const[t]=this.result;t.id=o.r0();let s=n.A.bestFit(t.width,t.height,this.dialog.offsetWidth-360,this.dialog.offsetHeight-192),i=o.H5(t,s.width,s.height,!0);i.className="flow-down",i.style.boxShadow="6px 6px 12px rgb(0 0 0 / 30%)",i.id="generative-expand-result-canvas",(0,a.Ay)("generative-expand-result-list").append(i),this.renderCreditAmount()}catch(r){console.error(r),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("genericError")}))}finally{this.working=!1,null===(t=(0,a.Ay)("generative-expand-execute"))||void 0===t||t.classList.remove("working"),null===(s=(0,a.Ay)("generative-expand-repeat"))||void 0===s||s.classList.remove("working"),(0,a.Ay)("generative-expand-settings").classList.remove("disabled"),(0,a.Ay)("generative-expand-preview").classList.remove("disabled")}}}else c.N.subscription?new g.A("credits"):new v.A("generative-expand","credit");else new p.A},this.cancel=()=>{this.cleanUp()},this.scaleAndApply=async e=>{this.working=!0,(0,a.Ay)("generative-expand-result").classList.add("working"),(0,a.Ay)(`dialog-apply${this.mid}`).classList.add("working"),(0,a.Ay)("generative-expand-settings").classList.add("disabled"),(0,a.Ay)("generative-expand-result").classList.add("disabled");try{let t=this.result.find(t=>t.id===e),s=o.k8(t,this.maxSize),i=await(0,y.i)(s,this.size);if(this.stage.fresco.layers[0]===this.selected&&this.selected.canvas.width===this.stage.fresco.width&&this.selected.canvas.height===this.stage.fresco.height){const e=new r.A(this.stage.fresco.width,this.stage.fresco.height);if(e.width!==i.width||i.width!==i.height){const t=this.stage.fresco.layers.map(e=>(e.syncRequested=new Date,e.clone(!0)));this.stage.fresco.resize(i.width,i.height,!0),this.selected.canvas=i,this.selected.rect=new n.A(this.selected.rect.x,this.selected.rect.y,i.width,i.height),this.stage.history.add({type:"pageResize",size:e,layers:t})}}else{const e=this.selected.rect.clone(),t=o.oM(this.selected.canvas);this.selected.canvas=i,this.selected.rect=new n.A(this.selected.rect.x,this.selected.rect.y,i.width,i.height),this.stage.history.add({type:"bitmapSwitch",kind:"generative-expand",layer:this.selected,rect:e,canvas:t})}}catch(t){console.error(t),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("genericError")}))}this.working=!1,(0,a.Ay)("generative-expand-result").classList.remove("working"),(0,a.Ay)(`dialog-apply${this.mid}`).classList.remove("working"),(0,a.Ay)("generative-expand-settings").classList.remove("disabled"),(0,a.Ay)("generative-expand-result").classList.remove("disabled"),document.dispatchEvent(new CustomEvent("reset-viewport")),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-select")),this.updatePreview(),this.cleanUp()},this.applyLayer=()=>{if(this.saving)return;this.saving=!0;const e=o.oM(this.selected.canvas),t=this.selected.rect.clone();this.stage.history.add({type:"bitmapSwitch",kind:"generative-expand",layer:this.selected,canvas:e,rect:t})},this.apply=()=>{const[e]=this.result;this.scaleAndApply(e.id)},this.cleanUp=()=>{var e;(0,a.Ay)("generative-expand-preview-holder").removeEventListener("pointerdown",this.previewDown,!1),(0,a.Ay)("generative-expand-credit-count").removeEventListener("click",this.showCreditPop),(0,a.Ay)("generative-expand-width").removeEventListener("input",this.widthHeightInputChange,!1),(0,a.Ay)("generative-expand-width").removeEventListener("blur",this.updateSizeInput,!1),(0,a.Ay)("generative-expand-height").removeEventListener("input",this.widthHeightInputChange,!1),(0,a.Ay)("generative-expand-height").removeEventListener("blur",this.updateSizeInput,!1),(0,a.Ay)("generative-expand-execute").removeEventListener("click",this.execute,!1),null===(e=(0,a.Ay)("generative-expand-repeat"))||void 0===e||e.removeEventListener("click",this.execute,!1),this.selected=void 0,this.selectedPreset=void 0,super.cleanUp()},this.stage=e,this.maxSize=8192,this.dialog.style.width="90%",this.dialog.style.height="80%",this.dialog.style.maxWidth="1200px",this.content.style.flex="1",this.content.style.height="1px",this.content.style.padding="0px",this.content.style.display="flex",this.content.style.position="relative",this.setContent(`\n            <div id="generative-expand-settings" style="flex:0 0 auto;width:300px;position:relative;overflow: hidden;">\n\n                <div id="generative-expand-base" style="padding:20px;overflow: hidden;">\n\n                    <label class="split">${(0,i.A)("generativeExpandPreset")}</label>\n                    <ul class="push-buttons small top-5" id="generative-expand-preset-list">\n                        <li data="1.5h"><img src="/img/icon/aspect-15h.svg" width="18" height="18"><span>1.5x High</span></li>\n                        <li data="1.5w"><img src="/img/icon/aspect-15w.svg" width="18" height="18"><span>1.5x Wide</span></li>\n                        <li data="1.5x"><img src="/img/icon/aspect-2x.svg" width="18" height="18"><span>1.5x Size</span></li>\n                        <li data="2x"><img src="/img/icon/aspect-2x.svg" width="18" height="18"><span>2x Size</span></li>\n                        <li data="1:1"><img src="/img/icon/aspect-1-1.svg" width="18" height="18"><span>Square</span></li>\n                        <li data="3:4"><img src="/img/icon/aspect-3-4.svg" width="18" height="18"><span>Portrait</span></li>\n                        <li data="4:3"><img src="/img/icon/aspect-4-3.svg" width="18" height="18"><span>Post</span></li>\n                        <li data="9:16"><img src="/img/icon/aspect-9-16.svg" width="18" height="18"><span>Story</span></li>\n                        <li data="16:9"><img src="/img/icon/aspect-16-9.svg" width="18" height="18"><span>Wide</span></li>\n                    </ul>\n\n                    <div style="display: flex; line-height: 28px;" class="top-30">\n                        <div style="flex-grow:1">\n                            <label class="split" style="height: 36px!important;">${(0,i.A)("width")} <input type="number" id="generative-expand-width"/></label>\n                            <label class="split" style="height: 36px!important;">${(0,i.A)("height")} <input type="number" id="generative-expand-height"/></label>\n                        </div>\n                        <div style="width:30px">\n                            <div id="generative-expand-constraint" class="constraint">\n                                <div class="constraint-lock" flow="left" tooltip="${(0,i.A)("toggleConstraint")}">\n                                    <img src="/img/icon/locked.svg" id="generative-expand-lock" width="16" height="16" loading="lazy" class="ic tiny-icon">\n                                    <img src="/img/icon/x.svg" id="generative-expand-vs" width="16" height="16" loading="lazy" style="display:none" class="ic tiny-icon">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <input type="checkbox" checked id="toggle-generative-expand-constraint" />\n                    <label class="switch top-10" for="toggle-generative-expand-constraint">${(0,i.A)("dialogResizeLock")}<span></span></label>\n\n                    <div id="generative-expand-execute" class="button positive top-30" style="width: 100%; height: 34px;">${(0,i.A)("aiInfillGenerate")} (2c)</div>\n                    <div id="generative-expand-repeat" class="button outline top-30" style="width: 100%; height: 34px; display:none">\n                        <img src="/img/icon/reset.svg" width="16" height="16" loading="lazy" class="ic"/>\n                        ${(0,i.A)("repeat")} (2c)\n                    </div>\n                </div>\n            </div>\n            \n            <div id="generative-expand-preview" style="display: flex; flex-direction: column; flex-grow: 1; align-items: center; padding: 20px;background: linear-gradient(43deg, #ffffff00 0%, #ffffff11 100%)">\n                <label>${(0,i.A)("generativeExpandPosition")} <span class="tab-10" style="color:var(--text-dim);font-style: italic;">${(0,i.A)("generativeExpandDrag")}</span></label>\n                <div id="generative-expand-preview-holder" class="expand-preview-holder top-20"></div>\n            </div>\n\n            <div id="generative-expand-result" style="display:none;flex-direction:column;flex-grow:1;align-items:center;padding:20px;background:linear-gradient(43deg, #ffffff00 0%, #ffffff11 100%);">\n                <label class="split" style="width: 100%; margin-bottom: 15px;">${(0,i.A)("generativeExpandPosition")} <span style="color:var(--text-dim);font-style: italic;">${(0,i.A)("generativeExpandDrag")}</span></label>\n                <div id="generative-expand-result-list" style="display:flex;align-items:center;justify-content:center;"></div>\n            </div>\n        `),(0,a.Ay)(`dialog-buttons${this.mid}`).insertBefore((0,a.T)("div",{id:"generative-expand-credit-count",className:"credit-meter",onclick:this.showCreditPop},""),(0,a.Ay)(`dialog-cancel${this.mid}`)),(0,a.Ay)("generative-expand-preview-holder").addEventListener("pointerdown",this.previewDown,!1),(0,a.Ay)("generative-expand-preset-list").childNodes.forEach(e=>{e.addEventListener("click",e=>{var t;null===(t=this.selectedPreset)||void 0===t||t.classList.remove("selected");let s=e.currentTarget,i=s.getAttribute("data");s.classList.add("selected"),this.setPreset(i),this.selectedPreset=s})}),(0,a.Ay)("generative-expand-constraint").addEventListener("click",this.changeContraint,!1),(0,a.Ay)("toggle-generative-expand-constraint").addEventListener("click",this.changeContraint,!1),(0,a.Ay)("generative-expand-execute").addEventListener("click",this.execute,!1),this.selected=this.stage.fresco.getSelected(),this.size=new r.A(this.selected.rect.width,this.selected.rect.height),this.pos=new h.A(0,0);let t=(0,a.Ay)("generative-expand-width");t.addEventListener("input",this.widthHeightInputChange,!1),t.addEventListener("change",this.widthHeightInputChange,!1),t.addEventListener("blur",this.updateSizeInput,!1),t.value=this.size.width.toString();let s=(0,a.Ay)("generative-expand-height");s.addEventListener("change",this.widthHeightInputChange,!1),s.addEventListener("input",this.widthHeightInputChange,!1),s.addEventListener("blur",this.updateSizeInput,!1),s.value=this.size.height.toString(),new l.A((0,a.Ay)("generative-expand-settings")),new l.A((0,a.Ay)("generative-expand-preview")),new l.A((0,a.Ay)("generative-expand-result")),this.renderCreditAmount(),this.setPreview()}}},94233:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Company=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Company=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"homepage",baseName:"homepage",type:"string"},{name:"name",baseName:"name",type:"string"},{name:"registrationNumber",baseName:"registrationNumber",type:"string"},{name:"registryLocation",baseName:"registryLocation",type:"string"},{name:"taxId",baseName:"taxId",type:"string"},{name:"type",baseName:"type",type:"string"}]},94711:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e=0,t=255,s=0,i=255,a=1,n=.5){this.minin=e,this.maxin=t,this.minout=s,this.maxout=i,this.midin=a,this.mid=n,this.map=e=>(e=(e-this.minin)/(this.maxin-this.minin),e=Math.pow(e,this.midin),(e=this.minout+e*(this.maxout-this.minout))>this.maxout?e=this.maxout:e<this.minout&&(e=this.minout),Math.round(e))}reset(){this.minout=0,this.maxout=255,this.midin=1,this.minin=0,this.maxin=255,this.mid=.5}isFlat(){return Boolean(0==this.minout&&255==this.maxout&&.5==this.mid&&0==this.minin&&255==this.maxin)}setMid(e){this.mid=(e-this.minin)/(this.maxin-this.minin),this.midin=this.midToIn(this.mid)}midToIn(e){return Math.min(Math.max(Math.pow(9.99,2*e-1),.1),9.99)}static fillPaletteMap(e,t){for(let s=0;s<256;++s){let i=e.map(s);t.data[4*s]=i,t.data[4*s+1]=i,t.data[4*s+2]=i}}static fillRGBPaletteMap(e,t,s,i){for(let a=0;a<256;++a)i.data[4*a]=e?e.map(a):a,i.data[4*a+1]=t?t.map(a):a,i.data[4*a+2]=s?s.map(a):a}}},95009:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e,t){var s,i,a,n,r,o,h,c,l,d,p,u,m;if(null!=e&&null!=t){for(c=e.length-1,n=[],p=[],h=[],d=[],u=[],i=[],s=[],a=[],o=[],l=[],r=0;0<=c?r<c:r>c;0<=c?r+=1:r-=1)n[r]=e[r+1]-e[r],o[r]=t[r+1]-t[r],l[r]=o[r]/n[r];for(r=1;1<=c?r<c:r>c;1<=c?r+=1:r-=1)p[r]=3/n[r]*(t[r+1]-t[r])-3/n[r-1]*(t[r]-t[r-1]);for(h[0]=1,d[0]=0,u[0]=0,r=1;1<=c?r<c:r>c;1<=c?r+=1:r-=1)h[r]=2*(e[r+1]-e[r-1])-n[r-1]*d[r-1],d[r]=n[r]/h[r],u[r]=(p[r]-n[r-1]*u[r-1])/h[r];for(h[c]=1,u[c]=0,i[c]=0,r=m=c-1;m<=0?r<=0:r>=0;m<=0?r+=1:r-=1)i[r]=u[r]-d[r]*i[r+1],s[r]=(t[r+1]-t[r])/n[r]-n[r]*(i[r+1]+2*i[r])/3,a[r]=(i[r+1]-i[r])/(3*n[r]);this.x=e.slice(0,c+1),this.a=t.slice(0,c),this.b=s,this.c=i.slice(0,c),this.d=a}}interpolate(e){var t,s,i;for(s=i=this.x.length-1;(i<=0?s<=0:s>=0)&&!(this.x[s]<=e);i<=0?s+=1:s-=1);return t=e-this.x[s],this.a[s]+this.b[s]*t+this.c[s]*Math.pow(t,2)+this.d[s]*Math.pow(t,3)}}},95219:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VisaCheckoutDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.VisaCheckoutDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"fundingSource",baseName:"fundingSource",type:"VisaCheckoutDetails.FundingSourceEnum"},{name:"type",baseName:"type",type:"VisaCheckoutDetails.TypeEnum"},{name:"visaCheckoutCallId",baseName:"visaCheckoutCallId",type:"string"}],function(e){let t,s;!function(e){e.Credit="credit",e.Debit="debit"}(t=e.FundingSourceEnum||(e.FundingSourceEnum={})),function(e){e.Visacheckout="visacheckout"}(s=e.TypeEnum||(e.TypeEnum={}))}(s=t.VisaCheckoutDetails||(t.VisaCheckoutDetails={}))},95251:(e,t,s)=>{s.d(t,{J:()=>d});var i=s(21742),a=s(54738),n=s(98244),r=s(29755),o=s(5865),h=s(85499),c=s(97317),l=s(39989);class d{constructor(e,t,s=!1){this.fresco=e,this.undoStack=[],this.redoStack=[],this.ignore=!1,this.disable=()=>{this.ignore=!0},this.enable=()=>{this.ignore=!1},this.dispatchHistoryStatus=()=>{document.dispatchEvent(new CustomEvent("history-update",{detail:{atStart:this.undoStack.length<=1,atEnd:0===this.redoStack.length}}))},this.undo=async()=>{if(!this.ignore&&0!==this.undoStack.length&&"open"!==this.undoStack[this.undoStack.length-1].data.type)try{this.ignore=!0;const{local:e,data:t}=this.undoStack.pop(),s=await(0,o.Z)(this.fresco,t);s&&(this.redoStack.push({local:e,data:s}),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-select")),(0,n.A)("undo")),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("titleUndo")})),document.dispatchEvent(new CustomEvent("sync-document",{detail:this.fresco})),this.dispatchHistoryStatus()}finally{this.ignore=!1}},this.redo=async()=>{if(!this.ignore&&0!==this.redoStack.length)try{this.ignore=!0;const{local:e,data:t}=this.redoStack.pop(),s=await(0,h.t)(this.fresco,t);s&&(this.undoStack.push({local:e,data:s}),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-select")),(0,n.A)("redo")),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("titleRedo")})),document.dispatchEvent(new CustomEvent("sync-document",{detail:this.fresco}))}finally{this.ignore=!1,this.dispatchHistoryStatus()}},this.hasChanges=()=>this.undoStack.length>1||this.redoStack.length>0,this.getActiveTransaction=()=>this.transaction,this.redos=e=>this.redoStack.filter(t=>t.local===e).reverse().map(e=>e.data),this.undos=e=>this.undoStack.filter(t=>t.local===e).map(e=>e.data),this.add=e=>{if(this.ignore)return;if(!(0,c.T)(this.fresco,e))return;this.validateTransaction(e);const t=r.Ay.maxHistoryUndos;!this.transaction&&this.undoStack.length>=t&&(this.undoStack=this.undoStack.slice(this.undoStack.length+1-t)),this.undoStack.push({local:!!this.transaction,data:e}),this.redoStack=[],this.dispatchHistoryStatus(),"open"!==e.type&&document.dispatchEvent(new CustomEvent("sync-document",{detail:this.fresco})),(this.undoStack.length<1||!this.undoStack[this.undoStack.length-1].local)&&document.dispatchEvent(new CustomEvent("layerlist-update"))},this.validateTransaction=e=>{if("arrange"===e.type&&"transform"!==e.kind||"arrangeStack"===e.type||"adjust"===e.type||"glitch"===e.type||"effect"===e.type||"textSettings"===e.type||"frameSettings"===e.type||"shapeSettings"===e.type||"pageAnimation"===e.type||"layerAnimation"===e.type){const t="pageAnimation"===e.type?"page":"arrangeStack"===e.type?e.id:e.layer.id;this.transaction&&this.transaction.id!==e.type+"-"+t&&this.commitTransaction(!0),this.transaction||(this.transaction={id:e.type+"-"+t,type:e.type})}else this.commitTransaction(!0)},this.abortTransaction=()=>{this.transaction&&(this.transaction=void 0,this.redoStack=this.redoStack.filter(e=>!e.local),this.undoStack=this.undoStack.filter(e=>!e.local),this.dispatchHistoryStatus())},this.commitTransaction=(e=!1)=>{if(!this.transaction)return;const t=new Date;this.transaction=void 0;const s=this.undoStack.filter(e=>e.local);if(0===s.length)return;this.undoStack=this.undoStack.filter(e=>!e.local),this.redoStack=[];let i=s[0].data,n=!1;switch(i.type){case"arrange":{const e=i.layer,s=i.action.rect;if(e instanceof l.A&&e.wouldApplyTransform()){const t=a.oM(e.canvas),i=a.oM(e.mask);e.applyTransform(r.Ay.smoothScaling),this.undoStack.push({local:!1,data:{type:"arrange",kind:"transform",layer:e,action:{type:"trans",data:t,mask:i,rect:s}}})}else this.undoStack.push({local:!1,data:{type:"arrange",kind:"arrange",layer:e,action:{type:"rect",rect:s}}});e.syncRequested=t,n=!0;break}case"arrangeStack":{let e=i.stack,s=i.rects,o=Array(),h=Array();for(let i=0;i<e.length;i++){let n=e[i],c=s[i];if(n instanceof l.A&&n.wouldApplyTransform()){const e=a.oM(n.canvas),t=a.oM(n.mask);n.applyTransform(r.Ay.smoothScaling),this.undoStack.push({local:!1,data:{type:"arrange",kind:"transform",layer:n,action:{type:"trans",data:e,mask:t,rect:c}}})}else o.push(n),h.push(c);n.syncRequested=t}o.length>1?this.undoStack.push({local:!1,data:{type:"arrangeStack",id:i.id,kind:"arrange",stack:o,rects:h}}):1===o.length&&this.undoStack.push({local:!1,data:{type:"arrange",kind:"arrange",layer:o[0],action:{type:"rect",rect:h[0]}}}),n=!0;break}case"glitch":case"effect":case"adjust":break;case"textSettings":{const e=i.layer,s=i.settings;this.undoStack.push({local:!1,data:{type:"textSettings",kind:"settings",layer:e,settings:s}}),e.syncRequested=t,n=!0;break}case"frameSettings":{const e=i.layer,s=i.settings;this.undoStack.push({local:!1,data:{type:"frameSettings",kind:"settings",layer:e,settings:s}}),e.syncRequested=t,n=!0;break}case"shapeSettings":{const e=i.layer,s=i.settings;this.undoStack.push({local:!1,data:{type:"shapeSettings",kind:"settings",layer:e,settings:s}}),e.syncRequested=t,n=!0;break}case"pageAnimation":{const e=i.animation;this.undoStack.push({local:!1,data:{type:"pageAnimation",kind:"",animation:e}}),n=!0;break}case"layerAnimation":{const e=i.layer,s=i.animation;this.undoStack.push({local:!1,data:{type:"layerAnimation",kind:"",layer:e,animation:s}}),e.syncRequested=t,n=!0;break}}n&&!e&&(document.dispatchEvent(new CustomEvent("sync-document",{detail:this.fresco})),document.dispatchEvent(new CustomEvent("layerlist-update"))),this.dispatchHistoryStatus()},s?this.ignore=!0:(this.add({type:"open",kind:t}),this.dispatchHistoryStatus())}async jump(e){if(!this.ignore&&0!==e)try{if(this.ignore=!0,document.dispatchEvent(new CustomEvent("render-enabled",{detail:!1})),e<0){const t=Math.min(this.undoStack.length,Math.abs(e));for(let e=0;e<t;e++){const{local:e,data:t}=this.undoStack.pop(),s=await(0,o.Z)(this.fresco,t);s&&this.redoStack.push({local:e,data:s})}t>0&&((0,n.A)("undo"),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("titleUndo")})))}else{const t=Math.min(this.redoStack.length,e);for(let e=0;e<t;e++){const{local:e,data:t}=this.redoStack.pop(),s=await(0,h.t)(this.fresco,t);s&&this.undoStack.push({local:e,data:s})}t>0&&((0,n.A)("redo"),document.dispatchEvent(new CustomEvent("notification",{detail:(0,i.A)("titleRedo")})))}document.dispatchEvent(new CustomEvent("render-enabled",{detail:!0})),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("layer-select")),document.dispatchEvent(new CustomEvent("viewport-render")),document.dispatchEvent(new CustomEvent("sync-document",{detail:this.fresco}))}finally{this.ignore=!1,document.dispatchEvent(new CustomEvent("render-enabled",{detail:!0})),this.dispatchHistoryStatus()}}}},95362:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(2215),a=s(82042),n=s(42268),r=s(21742);class o extends i.A{constructor(e){super(e,(0,r.A)("titleBloom")),this.setContent((0,n.T)("div",{id:"bloom-slider"})),new a.A("bloom-slider",{label:(0,r.A)("amount"),range:[0,1],step:.01,labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.change("bloom",e)})}}},96144:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseAdditionalDataCard=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ResponseAdditionalDataCard=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"cardBin",baseName:"cardBin",type:"string"},{name:"cardHolderName",baseName:"cardHolderName",type:"string"},{name:"cardIssuingBank",baseName:"cardIssuingBank",type:"string"},{name:"cardIssuingCountry",baseName:"cardIssuingCountry",type:"string"},{name:"cardIssuingCurrency",baseName:"cardIssuingCurrency",type:"string"},{name:"cardPaymentMethod",baseName:"cardPaymentMethod",type:"string"},{name:"cardSummary",baseName:"cardSummary",type:"string"},{name:"issuerBin",baseName:"issuerBin",type:"string"}]},96160:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(21742),a=s(42268),n=s(72284),r=s(98244),o=s(79453),h=s(3514),c=s(29755);class l extends n.A{constructor(e){var t,s;if(super(),this.selectedIndex=0,this.dialog.classList.add("news-dialog"),e.length>1){const s=e=>e.length>50?e.slice(0,50)+"":e,n=e.map((t,i)=>(0,a.T)("a",{id:`news-menu-item-${i}`,className:i===this.selectedIndex?"item selected":"item",href:"javascript:;",onclick:()=>{var t;(0,a.Ay)(`news-menu-item-${this.selectedIndex}`).classList.remove("selected"),(0,a.Ay)(`news-menu-item-${i}`).classList.add("selected"),(0,a.Ay)("news-current").replaceWith(d(e[i])),this.selectedIndex=i,null===(t=(0,a.Ay)("new-checkout-cta"))||void 0===t||t.addEventListener("click",()=>{new h.A("news","premium"),this.cleanUp()}),(0,r.A)("news-select")}},(0,a.T)("div",s(t.title))));this.setContent((0,a.T)("div",{className:"news-split"},(0,a.T)("div",{className:"news-menu"},(0,a.T)("div",{className:"headline"},(0,i.A)("whatsNew")),(0,a.T)("div",{},...n)),(0,a.T)("div",{className:"news-body"},d(e[this.selectedIndex])))),null===(t=(0,a.Ay)("new-checkout-cta"))||void 0===t||t.addEventListener("click",()=>{new h.A("news","premium"),this.cleanUp()})}else this.dialog.classList.add("single-news"),this.setContent(d(e[0])),null===(s=(0,a.Ay)("new-checkout-cta"))||void 0===s||s.addEventListener("click",()=>{new h.A("news","premium"),this.cleanUp()});(0,c.ZC)("lastNewsCheck",(new Date).toISOString())}}function d(e,t){const s=new Date(e.publishDate);let i;if(e.video){const s=()=>{const t=Math.max(360,n.getBoundingClientRect().height),s=`https://www.youtube.com/embed/${e.video}?autoplay=1&modestbranding=1`;i.style.height=t+"px",n.style.filter="blur(6px)",(0,r.A)("news-play"),i.append((0,a.T)("div",{className:"player-container"},(0,a.T)("iframe",{width:"640",height:"360",src:s,className:"player",allow:"autoplay"})))};let n=(0,a.T)("img",{className:"news-cover",src:e.cover,onload:t}),o=(0,a.T)("div",{className:"play-button",onclick:s},(0,a.T)("img",{src:"/img/icon/play-circle.svg"}));i=(0,a.T)("div",{className:"cover-stack"},n,o)}else i=(0,a.T)("img",{className:"news-cover",src:e.cover,onload:t});return(0,a.T)("div",{id:"news-current"},i,(0,a.T)("div",{className:"news-content"},(0,a.T)("div",{className:"news-title"},(0,a.T)("div",{className:"news-date"},(0,a.T)("span",`${s.toLocaleDateString()}`)),(0,a.T)("span",{className:"news-headline"},e.title)),(0,a.T)("div",{className:"news-text"},e.text),e.checkoutCta&&"free"===(null===o.N||void 0===o.N?void 0:o.N.subscriptionAccess)?(0,a.T)("a",{className:"button med",style:"margin-left:auto;",id:"new-checkout-cta",dataset:e.ctaDataset||{}},o.N?"GET A SUBSCRIPTION":"SIGN UP NOW!"):e.urlWeb?(0,a.T)("a",{className:"button med",style:"margin-left:auto;",href:e.urlWeb,target:"_blank",onmousedown:()=>{(0,r.A)("news-url-web")}},e.cta):""))}},96495:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDSRequestorAuthenticationInfo=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.ThreeDSRequestorAuthenticationInfo=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"threeDSReqAuthData",baseName:"threeDSReqAuthData",type:"string"},{name:"threeDSReqAuthMethod",baseName:"threeDSReqAuthMethod",type:"ThreeDSRequestorAuthenticationInfo.ThreeDSReqAuthMethodEnum"},{name:"threeDSReqAuthTimestamp",baseName:"threeDSReqAuthTimestamp",type:"string"}],function(e){let t;!function(e){e._01="01",e._02="02",e._03="03",e._04="04",e._05="05",e._06="06"}(t=e.ThreeDSReqAuthMethodEnum||(e.ThreeDSReqAuthMethodEnum={}))}(s=t.ThreeDSRequestorAuthenticationInfo||(t.ThreeDSRequestorAuthenticationInfo={}))},96666:(e,t,s)=>{s.d(t,{A:()=>v});var i=s(42268),a=s(21742),n=s(54738),r=s(40963),o=s(53900),h=s(98244),c=s(41915),l=s(79453),d=s(81937),p=s(26806),u=s(50295),m=s(96703),g=s(98938),y=s(3514);class v extends p.A{constructor(e){super((0,a.A)("titleSuperScale"),!1),this.messy=!1,this.working=!1,this.layerSelect=()=>{if(this.reset(),!this.stage.fresco.isSelectedImageWithCanvas())return(0,i.Ay)("super-scale-no-layer").style.display="block",(0,i.Ay)("super-scale-too-large").style.display="none",(0,i.Ay)("super-scale-settings").style.display="none",void((0,i.Ay)("super-scale-desc").style.display="none");if(this.selected=this.stage.fresco.getSelected(),this.size=new o.A(this.selected.rect.width,this.selected.rect.height),this.pos=new c.A(0,0),2*this.selected.canvas.width>5e3||2*this.selected.canvas.height>5e3)return(0,i.Ay)("super-scale-settings").style.display="none",(0,i.Ay)("super-scale-too-large").style.display="block",(0,i.Ay)("super-scale-no-layer").style.display="none",void((0,i.Ay)("super-scale-desc").style.display="none");(0,i.Ay)("super-scale-2-label").innerText=(0,a.A)("scale")+" 2x - ("+2*this.selected.canvas.width+" x "+2*this.selected.canvas.height+" px)",(0,i.Ay)("super-scale-3-label").innerText=(0,a.A)("scale")+" 3x - ("+3*this.selected.canvas.width+" x "+3*this.selected.canvas.height+" px)",(0,i.Ay)("super-scale-4-label").innerText=(0,a.A)("scale")+" 4x - ("+4*this.selected.canvas.width+" x "+4*this.selected.canvas.height+" px)";let e=25e6;(0,i.Ay)("super-scale-2-label").classList.toggle("disabled",2*this.selected.canvas.width*(2*this.selected.canvas.height)>e),(0,i.Ay)("super-scale-3-label").classList.toggle("disabled",3*this.selected.canvas.width*(3*this.selected.canvas.height)>e),(0,i.Ay)("super-scale-4-label").classList.toggle("disabled",4*this.selected.canvas.width*(4*this.selected.canvas.height)>e)},this.showCreditPop=()=>{new m.A("credits")},this.renderCreditAmount=()=>{if(!l.N)return(0,i.Ay)("super-scale-credit-count").style.display="none",(0,a.A)("common-signUpLogIn");(0,i.Ay)("super-scale-credit-count").innerHTML=`${l.N.credits.toString()}`},this.onClickPreset=e=>{var t;null===(t=this.selectedPreset)||void 0===t||t.classList.remove("selected");let s=e.currentTarget,i=s.getAttribute("value");s.classList.add("selected"),this.setPreset(i),this.selectedPreset=s},this.setPreset=e=>{var t;e!==(null===(t=this.selectedPreset)||void 0===t?void 0:t.getAttribute("value"))&&this.reset(),(0,i.Ay)(`dialog-apply${this.mid}`).classList.remove("disabled");const s=+e;this.size.width=this.selected.rect.width*s,this.size.height=this.selected.rect.height*s,this.pos.x=Math.round(.5*(this.size.width-this.selected.rect.width)),this.pos.y=Math.round(.5*(this.size.height-this.selected.rect.height))},this.execute=async()=>{if(l.N)if(l.N.credits){if(!this.working){(0,h.A)("super-scale"),this.working=!0,(0,i.Ay)(`dialog-apply${this.mid}`).classList.add("working"),(0,i.Ay)("super-scale-content").classList.add("disabled");try{let e=this.selected;const t=Number(document.querySelector('input[name="super-scale-size"]:checked').value);let s=await(0,g.i)(e.canvas,t);if(this.result=s,this.stage.fresco.layers[0]===e&&e.canvas.width===this.stage.fresco.width&&e.canvas.height===this.stage.fresco.height){const t=new o.A(this.stage.fresco.width,this.stage.fresco.height);if(t.width!==s.width||s.width!==s.height){const e=this.stage.fresco.layers.map(e=>(e.syncRequested=new Date,e.clone(!0)));this.stage.fresco.resize(s.width,s.height,!0),this.stage.history.add({type:"pageResize",size:t,layers:e})}e.canvas=s,e.rect=new r.A(e.rect.x,e.rect.y,s.width,s.height)}else{const t=e.rect.clone(),i=n.oM(e.canvas);this.stage.history.add({type:"bitmapSwitch",kind:"super-scale",layer:e,rect:t,canvas:i}),e.canvas=s,e.rect=new r.A(e.rect.x,e.rect.y,s.width,s.height)}document.dispatchEvent(new CustomEvent("reset-viewport")),document.dispatchEvent(new CustomEvent("layerlist-update")),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("done")})),this.stage.render()}catch(e){document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("genericError")})),console.error(e)}finally{this.working=!1,(0,i.Ay)(`dialog-apply${this.mid}`).classList.remove("working"),(0,i.Ay)("super-scale-content").classList.remove("disabled"),this.cancel()}}}else l.N.subscription?new m.A("credits"):new y.A("super-scale","credit");else new u.A},this.apply=()=>{this.execute()},this.cancel=()=>{this.cleanUp()},this.reset=()=>{(0,i.Ay)("super-scale-no-layer").style.display="none",(0,i.Ay)("super-scale-too-large").style.display="none",(0,i.Ay)("super-scale-settings").style.display="block",(0,i.Ay)("super-scale-desc").style.display="block",(0,i.Ay)(`dialog-apply${this.mid}`).classList.add("disabled"),this.result=void 0},this.cleanUp=()=>{document.removeEventListener("layer-select",this.layerSelect,!1),(0,i.Ay)("super-scale-credit-count").removeEventListener("click",this.showCreditPop,!1),(0,i.Ay)("super-scale-preset-list").childNodes.forEach(e=>{e.removeEventListener("click",this.onClickPreset,!1)}),this.selected=void 0,this.selectedPreset=void 0,super.cleanUp()},this.stage=e,this.dialog.style.maxWidth="380px",this.setContent(`\n            <div id="super-scale-content" style="flex:0 0 auto;width:100%;position:relative;overflow: hidden;">\n                <div style="padding:10px 10px 0 10px;overflow: hidden;">\n\n                    <section id="super-scale-no-layer">\n                        <span class="tip top-20"><img src="/img/icon/tip-lock.svg" width="16" height="16" loading="lazy" class="tip-icon ic"/>${(0,a.A)("genericNoImageMessage")}</span>\n                    </section>\n\n                    <section id="super-scale-too-large">\n                        <span class="tip top-20"><img src="/img/icon/tip-lock.svg" width="16" height="16" loading="lazy" class="tip-icon ic"/>${(0,a.A)("imageTooLargeToScale")}</span>\n                    </section>\n\n                    <div id="super-scale-desc" class="tip flex" style="gap: 2px;"><img src="/img/icon/tip-bulb.svg" width="16" height="16" loading="lazy" class="tip-icon ic"/>\n                        <span>${(0,a.A)("scaleUpDescription")}</span>\n                    </div>\n\n                    <div id="super-scale-settings" class="top-20">\n                        <label>${(0,a.A)("method")}</label>\n                        <div id="super-scale-preset-list" class="switch-field column upscale top-5">\n                            <input type="radio" id="super-scale-2" name="super-scale-size" value="2" /><label id="super-scale-2-label" for="super-scale-2">2x</label>\n                            <input type="radio" id="super-scale-3" name="super-scale-size" value="3" /><label id="super-scale-3-label" for="super-scale-3">3x</label>\n                            <input type="radio" id="super-scale-4" name="super-scale-size" value="4" /><label id="super-scale-4-label" for="super-scale-4">4x</label>\n                        </div>\n                    </div>\n                    \n                </div>\n            </div> \n        `),(0,i.Ay)(`dialog-buttons${this.mid}`).insertBefore((0,i.T)("div",{id:"super-scale-credit-count",className:"credit-meter",onclick:this.showCreditPop},""),(0,i.Ay)(`dialog-cancel${this.mid}`)),(0,i.Ay)(`dialog-apply${this.mid}`).innerHTML=`${(0,a.A)("upscale")} (1c)`,document.addEventListener("layer-select",this.layerSelect,!1),(0,i.Ay)("super-scale-preset-list").childNodes.forEach(e=>{e.addEventListener("click",this.onClickPreset)}),new d.A((0,i.Ay)("super-scale-content")),this.layerSelect(),this.renderCreditAmount()}}},96703:(e,t,s)=>{s.d(t,{A:()=>f});var i=s(42268),a=s(21742);function n(e,t=100,s="",n="",r=""){return(0,i.T)("div",{className:`form-group w-${t}`},(0,i.T)("div",{className:"adyen-checkout-title"},(0,i.T)("span",{className:"adyen-checkout__label__text"},`${(0,a.A)(e)} ${(0,a.A)(n)}`),r),(0,i.T)("input",{type:"text",id:e.replace("checkout-",""),maxLength:56,required:!0,value:s}))}function r(e,t=100,s){return(0,i.T)("div",{className:`form-group w-${t}`},(0,i.T)("span",{className:"adyen-checkout__label__text"},(0,a.A)(e)),(0,i.T)("select",{id:s,name:s,className:`${s}-select`}))}const o=(e,t,s)=>{const[n,r]=function(e,t){let s,i;return t.forEach(t=>{t.product===e&&(1===t.monthDuration?s=t:12===t.monthDuration&&(i=t))}),[{code:s.code,monthlyPrice:s.pricing.USD.amount.toFixed(2),yearlyPrice:(12*s.pricing.USD.amount).toFixed(2)},{code:i.code,monthlyPrice:String(i.pricing.USD.displayPriceInMonths),yearlyPrice:i.pricing.USD.amount.toFixed(2)}]}(t,s),o=Math.round(100*(1-+r.yearlyPrice/+n.yearlyPrice));return(0,i.T)("details",{id:"chckout-planSelection",className:"kort",open:"Pixlr Plus"===t},(0,i.T)("summary",{style:"display: flex; align-items: center;"},(0,i.T)("img",{src:`/images/checkout/icon/${t}.svg`,width:24,height:24,style:"margin-right: 8px;"}),(0,i.T)("span",{className:"fs-16 fw-7"},t),(0,i.T)("img",{src:"/images/icon/up.svg",style:"margin-left: auto"})),(0,i.T)("div",{style:"display: flex; flex-direction: column; row-gap: 8px"},(0,i.T)("div",{className:"plan-options "+(e===n.code?"selected":""),dataset:{plan:n.code}},(0,i.T)("p",{className:"fs-14 fw-7"},(0,a.A)("payMonthly")),(0,i.T)("p",(0,i.T)("span",{className:"fs-14 fw-7",style:"margin-right: 5px"},`${n.monthlyPrice} /month`),(0,i.T)("span",{className:"fs-12 fw-4"},`. ${n.yearlyPrice} /year`))),(0,i.T)("div",{className:"plan-options "+(e===r.code?"selected":""),dataset:{plan:r.code}},(0,i.T)("p",{className:"fs-14 fw-7"},(0,a.A)("payYearly")),(0,i.T)("p",(0,i.T)("span",{className:"fs-14 fw-7",style:"margin-right: 5px"},`${r.monthlyPrice} /month`),(0,i.T)("span",{className:"fs-12 fw-4"},`. ${r.yearlyPrice} /year`,(0,i.T)("span",{className:"saving-badge"},`Save ${o}%`)))),(0,i.T)("span",{className:"fs-12 fw-4",style:"line-height: 18px"},(0,a.A)("youCanCancelAuto"))))},h=()=>(0,i.T)("details",{open:!0,id:"wrapper-payment-method",className:"kort"},(0,i.T)("summary",{style:"display: flex; align-items: center;"},(0,i.T)("img",{src:"/images/checkout/icon/card.svg",width:24,height:24,style:"margin-right: 8px;"}),(0,i.T)("span",{className:"fs-16 fw-7"},(0,a.A)("paymentMethod")),(0,i.T)("img",{src:"/images/icon/up.svg",style:"margin-left: auto"})),(0,i.T)("div",{style:"display: flex; flex-direction: column; row-gap: 18px;"},(0,i.T)("div",{id:"saved-cards"}),(0,i.T)("div",{id:"payment-option-radios"},(0,i.T)("div",{id:"adyen-payment-option",className:"payment-options"},(0,i.T)("input",{id:"adyen-radio-option",type:"radio",name:"payment",value:"adyen",checked:!0}),(0,i.T)("label",{htmlFor:"adyen-radio-option",className:"fs-12 fw-7"},"Credit Card")),(0,i.T)("div",{id:"paypal-payment-option",className:"payment-options"},(0,i.T)("input",{id:"paypal-radio-option",type:"radio",name:"payment",value:"paypal"}),(0,i.T)("label",{htmlFor:"paypal-radio-option",className:"fs-12 fw-7"},"Paypal"))),(0,i.T)("div",{id:"component-container"}),(0,i.T)("div",{id:"component-3ds-container"}))),c=()=>(0,i.T)("details",{id:"wrapper-billing-option",className:"kort"},(0,i.T)("summary",{style:"display: flex; align-items: center;"},(0,i.T)("img",{src:"/images/checkout/icon/card.svg",width:24,height:24,style:"margin-right: 8px;"}),(0,i.T)("span",{className:"fs-16 fw-7"},(0,a.A)("optionalBillingInformation")),(0,i.T)("img",{src:"/images/icon/up.svg",style:"margin-left: auto"})),(0,i.T)("div",{id:"billing-form",className:"w-100"},(0,i.T)("form",{},(0,i.T)("div",{className:"flex"},n("checkout-firstName",50),n("checkout-lastName",50)),(0,i.T)("div",{className:"flex"},n("checkout-companyName",100,"","checkout-optional")),(0,i.T)("div",{className:"flex"},n("checkout-vatNumber",100,"","checkout-optional")),(0,i.T)("div",{className:"flex"},n("checkout-address",100)),(0,i.T)("div",{className:"flex"},n("checkout-city",50),n("checkout-zipCode",50)),(0,i.T)("div",{className:"flex"},function(e,t=100){return r(e,t,"country")}("checkout-country",50),function(e,t=100,s="",a="",o=""){return(0,i.T)("div",{className:`w-${t}`},n(e,100,s,a,o),r(e,100,"state-select"))}("checkout-state",50))))),l=()=>(0,i.T)("details",{id:"wrapper-seat-option",className:"kort"},(0,i.T)("summary",{style:"display: flex; align-items: center;"},(0,i.T)("img",{src:"/images/checkout/icon/seats.svg",width:24,height:24,style:"margin-right: 8px;"}),(0,i.T)("span",{className:"fs-16 fw-7"},(0,a.A)("addMoreSeats")),(0,i.T)("img",{src:"/images/icon/up.svg",style:"margin-left: auto"})),(0,i.T)("div",(0,i.T)("div",{className:"seat-select"},(0,i.T)("span",{className:"seat-option",dataset:{value:"5"}},"5 seats"),(0,i.T)("span",{className:"seat-option",dataset:{value:"10"}},"10 seats"),(0,i.T)("span",{className:"seat-option",dataset:{value:"20"}},"20 seats"),(0,i.T)("span",{className:"seat-option seat-option-custom"},(0,i.T)("input",{type:"number",placeholder:"Custom",min:"1",max:"100"}))))),d=(e,t)=>(0,i.T)("div",{id:"summary-wrapper"},(0,i.T)("h3",(0,a.A)("orderSummary")),"giftcard"===e?(0,i.T)("div",{style:"display: flex; column-gap: 8px"},(0,i.T)("img",{src:"/images/checkout/icon/gift-card.png",height:45}),(0,i.T)("div",(0,i.T)("h4",(0,a.A)("pixlrGiftCard")),(0,i.T)("h6",(0,i.T)("span",{className:"bold"},(0,a.A)("purchaseFor")),(0,i.T)("span",{id:"summary-giftcard-to"})))):"","credits"===e?(0,i.T)("div",(0,i.T)("h4",(0,a.A)("generativeCredits")),(0,i.T)("h6",(0,a.A)("useCreditToGenerateAIAcrossTools"))):"",(0,i.T)("hr"),(0,i.T)("div",{style:"display: flex; flex-direction: column; row-gap: 14px"},"subscription"===e?(0,i.T)("div",{id:"summary-base",className:"summary-group inc"},(0,i.T)("div",{className:"desc"},(0,i.T)("h5",`${t.replace("Pixlr ","")} Subscription`),"Pixlr Plus"===t?(0,i.T)("ul",{className:"top-5"},(0,i.T)("li",(0,a.A)("addFreeUnlimitedSave")),(0,i.T)("li",{id:"summary-base-credits"})):"Pixlr Premium"===t?(0,i.T)("ul",{className:"top-5"},(0,i.T)("li",(0,a.A)("fullAccesstoPixlrAppAndAsset")),(0,i.T)("li",{id:"summary-base-credits"}),(0,i.T)("li",{id:"summary-base-credits-free-trial",style:"display: none"})):"Pixlr Team"===t?(0,i.T)("ul",{className:"top-5"},(0,i.T)("li",(0,a.A)("manageYourTeamMembersAndCollaborate")),(0,i.T)("li",{id:"summary-base-credits"}),(0,i.T)("li",(0,a.A)("fiveExtraSeatsIncluded"))):""),(0,i.T)("span",{id:"summary-base-value",className:"bold"},"9.99")):"","giftcard"===e?(0,i.T)("div",{id:"summary-giftcard",className:"summary-group"},(0,i.T)("h5",(0,a.A)("price")),(0,i.T)("span",{id:"summary-giftcard-value",className:"bold"},"x")):"","credits"===e?(0,i.T)("div",{id:"summary-credits",className:"summary-group"},(0,i.T)("h5",(0,i.T)("span",{id:"summary-credits-amount"})),(0,i.T)("span",{id:"summary-credits-value",className:"bold"},"x")):"","paid"===e?(0,i.T)("div",{id:"summary-base",className:"summary-group inc"},(0,i.T)("div",{className:"desc"},(0,i.T)("h5",t),(0,i.T)("ul",{className:"top-5"},(0,i.T)("li",(0,a.A)("fullAccesstoPixlrAppAndAsset")),(0,i.T)("li",{id:"summary-base-credits"}))),(0,i.T)("span",{id:"summary-base-value",className:"bold"},"9.99")):"",(0,i.T)("div",{id:"summary-balance",className:"summary-group"},(0,i.T)("h5",(0,a.A)("planBalanceUpgrade")),(0,i.T)("span",{id:"summary-balance-value",className:"bold"},"x")),(0,i.T)("div",{id:"summary-promo",className:"summary-group"},(0,i.T)("div",{className:"desc"},(0,i.T)("h5",(0,a.A)("promoCode")),(0,i.T)("span",{id:"summary-promo-remarks",className:"color-g25 fw-4 fs-14"},"x")),(0,i.T)("span",{id:"summary-promo-value"},"x")),(0,i.T)("div",{id:"summary-seats",className:"summary-group"},(0,i.T)("div",{className:"desc"},(0,i.T)("h5",(0,a.A)("additionalSeats")),(0,i.T)("span",{id:"summary-seats-count",className:"color-g25 fw-4 fs-14"},"x5 seats")),(0,i.T)("span",{id:"summary-seats-value"},"x")),(0,i.T)("div",{id:"summary-tax",className:"summary-group"},(0,i.T)("h5","GST 9%"),(0,i.T)("span",{id:"summary-tax-value"},"x")),(0,i.T)("div",{id:"summary-trial",className:"summary-group"},(0,i.T)("div",{className:"desc"},(0,i.T)("h5",`${(0,a.A)("free7DayTrial")}`),(0,i.T)("span",{id:"summary-trial-note",className:"color-g25 fw-4 fs-14"})),(0,i.T)("span","0.00")),(0,i.T)("div",{id:"summary-upsell",className:"summary-group"},(0,i.T)("div",{className:"desc"},(0,i.T)("h5",`${(0,a.A)("limitedTimeDiscount")}`),(0,i.T)("span",{id:"summary-upsell-note",className:"color-g25 fw-4 fs-14"})),(0,i.T)("span",{id:"summary-upsell-discount"},"10%")),(0,i.T)("div",{id:"summary-summer-campaign",className:"summary-group"},(0,i.T)("div",{className:"desc"},(0,i.T)("h5",`${(0,a.A)("limitedTimeDiscount")}`),(0,i.T)("span",{id:"summary-summer-campaign-note",className:"color-g25 fw-4 fs-14"})),(0,i.T)("span",{id:"summary-summer-campaign-discount"},"15%")),(0,i.T)("div",{id:"summary-skip-trial",className:"summary-group",style:"align-items: center; justify-content:flex-start; margin-top: 4px"},(0,i.T)("input",{id:"summary-skip-trial-checkbox",type:"checkbox",style:"width: 15px; height: 15px; visibility: visible;"}),(0,i.T)("label",{id:"summary-skip-trial-label",style:"margin:0 4px;"},"Skip free trial"))),(0,i.T)("hr"),(0,i.T)("div",{id:"summary-total",className:"summary-group inc"},(0,i.T)("div",{className:"desc"},(0,i.T)("h5",(0,a.A)("checkout-totalDue")," (",(0,i.T)("span",{className:"currency"},"USD"),")"),(0,i.T)("span",{id:"summary-total-tax",className:"color-g25 fw-4 fs-14",style:"display: none;"},"(incl. GST)")),(0,i.T)("span",{className:"total-price bold"},"x")),(0,i.T)("button",{id:"proceed-payment",disabled:!0},(0,a.A)("payNow")),(0,i.T)("i",{id:"payment-info-message",className:"summary-group"}));var p=s(78508),u=s(98244);var m=s(79453),g=s(72284),y=s(3514),v=s(44190);class f extends g.A{constructor(e,t={}){var n;if(!(0,i.lR)("RequestFrom",""))if(super(!0),this.checkoutOptions={checkoutMode:"checkout",showMonthly:!0},this.currency="USD",this.currencySymbol="$",this.freeTrial=!1,this.skipFreeTrial=!1,this.upsellDiscount=!1,this.paymentData={currency:"USD",checkoutMethod:this.checkoutOptions.checkoutMode,billingAddress:{}},this.planBalance=0,this.selectedPayment="credit",this.tax={status:!1},this.genCredits=0,this.encryptedCardData={isValid:!1,paymentMethod:{}},this.loadSeatsUI=()=>{this.optionUI.append(l()),this.optionUI.append(h()),this.optionUI.append(c()),this.summaryUI.append(d(this.checkoutType,this.productName)),(0,i.Ay)("paypal-payment-option")&&((0,i.Ay)("paypal-payment-option").style.display="none"),this.loadAdyen(),this.loadEventListener()},this.loadCreditsUI=()=>{this.optionUI.append((0,i.T)("details",{open:!0,id:"wrapper-credit-option",className:"kort"},(0,i.T)("summary",{style:"display: flex; align-items: center;"},(0,i.T)("img",{src:"/images/checkout/icon/credits.svg",width:24,height:24,style:"margin-right: 8px;"}),(0,i.T)("span",{className:"fs-16 fw-7"},(0,a.A)("generativeCredits")),(0,i.T)("img",{src:"/images/icon/up.svg",style:"margin-left: auto"})),(0,i.T)("div",{style:"display: flex; flex-direction: column; row-gap: 16px"},(0,i.T)("h6",(0,a.A)("chooseAmount")),(0,i.T)("div",{className:"credit-select",style:"display: flex; flex-wrap: wrap; column-gap: 10px; row-gap: 8px"},(0,i.T)("span",{className:"credit-option",dataset:{value:"200"}},"200"),(0,i.T)("span",{className:"credit-option",dataset:{value:"500"}},"500",(0,i.T)("em",{},"33%")),(0,i.T)("span",{className:"credit-option",dataset:{value:"1000"}},"1000",(0,i.T)("em",{},"46%")),(0,i.T)("span",{className:"credit-option",dataset:{value:"2000"}},"2000",(0,i.T)("em",{},"56%")),(0,i.T)("span",{className:"credit-option",dataset:{value:"5000"}},"5000",(0,i.T)("em",{},"66%")))))),this.optionUI.append(h()),this.optionUI.append(c()),this.summaryUI.append(d(this.checkoutType,this.productName)),this.loadAdyen(),this.loadEventListener()},this.loadGiftCardUI=()=>{Promise.all([p.XC()]).then(([e])=>{var t,s;if(!e.status)throw new Error("Failed to get gift details");this.selectedGiftCard=e.data.find(e=>e.code===this.checkoutOptions.giftcard),this.productName=this.selectedGiftCard.product,this.optionUI.append(h()),this.optionUI.append(c()),this.summaryUI.append(d(this.checkoutType,this.productName)),(0,i.Ay)("summary-giftcard-value").innerText=this.selectedGiftCard.amount.toFixed(2),null===(t=(0,i.Ay)("summary-giftcard"))||void 0===t||t.classList.add("inc"),(0,i.Ay)("summary-giftcard-to").innerText=(null===(s=this.checkoutOptions.isAGift)||void 0===s?void 0:s.to)?(0,a.A)("someoneElse"):(0,a.A)("myself"),this.loadAdyen(),this.loadEventListener()})},this.loadEventListener=()=>{var e,t,s,a,n,r,o;null===(e=(0,i.Ay)("back-chckout"))||void 0===e||e.addEventListener("click",this.backPreviousPopup),document.querySelectorAll('input[name="payment"][type="radio"]').forEach(e=>{e.addEventListener("change",()=>this.setPaymentMethod(e))}),document.querySelectorAll(".plan-options").forEach(e=>{e.addEventListener("click",()=>this.setPlan(e))}),null===(t=(0,i.Ay)("promocode-submit"))||void 0===t||t.addEventListener("click",()=>this.applyPromoCode()),null===(s=(0,i.Ay)("promocode-input"))||void 0===s||s.addEventListener("input",this.promoCodeOnInput),document.querySelectorAll(".seat-option").forEach(e=>{e.addEventListener("click",()=>this.selectSeats(e)),e.querySelector("input")&&e.querySelector("input").addEventListener("keyup",()=>this.selectSeats(e))}),document.querySelectorAll(".credit-option").forEach(e=>{e.addEventListener("click",()=>this.selectCredit(e))}),document.querySelectorAll("#billing-form input").forEach(e=>{e.addEventListener("keyup",()=>{this.paymentData.billingAddress[e.id]=e.value,this.isReadyToPay()})}),null===(a=(0,i.Ay)("country"))||void 0===a||a.addEventListener("change",this.updateCountry),null===(n=(0,i.Ay)("state-select"))||void 0===n||n.addEventListener("change",this.updateState),this.populateCountry(),null===(r=(0,i.Ay)("proceed-payment"))||void 0===r||r.addEventListener("click",()=>this.proceedPayment()),null===(o=(0,i.Ay)("summary-skip-trial-checkbox"))||void 0===o||o.addEventListener("change",this.skipFreeTrialHandler)},this.selectCredit=e=>{document.querySelectorAll(".credit-option").forEach(t=>{t!==e&&t.classList.remove("active")}),e.classList.toggle("active"),e.classList.contains("active")&&e.dataset.value?this.genCredits=Number(e.dataset.value):this.genCredits=0,this.updatePrice()},this.selectSeats=e=>{const t=document.querySelectorAll(".seat-option"),s=(0,i.Ay)("proceed-payment");if(this.isReadyToPay(),t.forEach(t=>{t!==e&&t.classList.remove("active")}),e.classList.add("active"),e.classList.contains("active"))if(e.classList.contains("seat-option-custom")){const t=e.getElementsByTagName("input")[0];""===t.value||0===Number(t.value)?(s.disabled=!0,this.extraSeats=0):this.extraSeats=Number(t.value)}else e.dataset.value?this.extraSeats=Number(e.dataset.value):this.extraSeats=0;else this.extraSeats=0;this.updatePrice()},this.populateCountry=async()=>{const{data:e}=await p.X6();this.countryList=e;const t=(0,i.lR)("country","")||(null===m.N||void 0===m.N?void 0:m.N.country),s=(0,i.Ay)("country");for(const a in e.country){const n=(0,i.T)("option",{value:e.country[a]},e.country[a]);t===a&&(n.selected=!0,this.paymentData.billingAddress.country=e.country[a]),s.append(n)}this.updateCountry()},this.populateState=e=>{this.paymentData.billingAddress.stateOrProvince="",this.paymentData.billingAddress.state="";const t=this.countryList,s=(0,i.Ay)("state-select"),n=Object.keys(t.countryStates).includes(e);if((0,i.Ay)("state").parentElement.style.display=n?"none":"block",s.parentElement.style.display=n?"block":"none",n){if((0,i.Ay)("state-select").selectedIndex=-1,(0,i.Ay)("wrapper-billing-option").open=!0,(0,i.Ay)("payment-info-message").classList.add("inc"),(0,i.Ay)("payment-info-message").innerHTML=`* ${(0,a.A)("stateRequired")}`,s.dataset.country===e)return;s.setAttribute("data-country",e),Object.entries(t.countryStates[e]).map(([e,t],a)=>{const n=(0,i.T)("option",{value:t},t);if(0===a){const e=(0,i.T)("option",{value:""},"");e.selected=!0,s.append(e)}s.append(n)})}else(0,i.Ay)("payment-info-message").classList.remove("inc"),(0,i.Ay)("payment-info-message").innerHTML=""},this.updateCountry=()=>{const e=(0,i.Ay)("country").value,t=Object.keys(this.countryList.country).find(t=>this.countryList.country[t]===e);this.paymentData.billingAddress.country=e,this.countryList.tax[t]?(this.tax.status=!0,this.tax.percentage=this.countryList.tax[t]):this.tax.status=!1,this.countryList.countryEU.some(e=>e===t)?(this.currency="EUR",this.currencySymbol=""):(this.currency="USD",this.currencySymbol="$"),document.querySelectorAll(".currency").forEach(e=>e.innerHTML=this.currency),document.querySelectorAll(".currency-symbol").forEach(e=>e.innerHTML=this.currencySymbol),this.populateState(t),this.isReadyToPay(),this.updatePrice()},this.updateState=()=>{const e=(0,i.Ay)("state-select").value;this.paymentData.billingAddress.stateOrProvince=e,this.paymentData.billingAddress.state=e,this.isReadyToPay()},this.applyPromoCode=async()=>{var e;const t=(0,i.Ay)("promocode-submit");if("true"===(null==t?void 0:t.dataset.applied))return void this.removePromoCode();const s=(0,i.Ay)("promocode-input");let a=(null===(e=this.checkoutOptions)||void 0===e?void 0:e.code)?this.checkoutOptions.code:s.value.toUpperCase().trim();try{if(!this.upsellDiscount&&["UPSELL30","UPSELL10"].includes(a))throw new Error("Invalid promocode!");const e=await p.Pe(a,this.productName,this.splanId);if(!e.status)throw new Error("Invalid promocode!");this.appliedPromo=e.promo,s&&(s.readOnly=!0),t&&(t.innerText="Remove",t.dataset.applied="true"),this.updatePrice()}catch({response:n,message:r}){this.removePromoCode(),(0,i.Ay)("promocode-error").style.display="block",setTimeout(()=>{(0,i.Ay)("promocode-error").style.display="none"},1500)}},this.applyUpsellPromoCode=async()=>{let e=this.checkoutOptions.code;try{const t=await p.Pe(e,this.productName,this.splanId);if(!t.status)throw new Error("Invalid upsell promocode!");this.appliedPromo=t.promo}catch({response:t,message:s}){this.appliedPromo=void 0}finally{this.updatePrice()}},this.removePromoCode=()=>{const e=(0,i.Ay)("promocode-submit"),t=(0,i.Ay)("promocode-input");e.innerText="Apply",delete e.dataset.applied,this.appliedPromo=void 0,this.updatePrice(),t.readOnly=!1,t.value=""},this.promoCodeOnInput=e=>{const t=e.target;t.value=t.value.toUpperCase()},this.updatePrice=()=>{var e,t,s;let n;"subscription"===this.checkoutType||"paid"===this.checkoutType?n=this.selectedPlan.pricing.USD.amount:"giftcard"===this.checkoutType?n=this.selectedGiftCard.amount:("seats"===this.checkoutType||"credits"===this.checkoutType)&&(n=0);let r=n,o=0,h=0,c=0;if("subscription"===this.checkoutType?((0,i.Ay)("summary-base-value").innerText=n.toFixed(2),(0,i.Ay)("summary-base-credits").innerText=(0,a.A)("creditForAIGeneration",this.getCreditsByPlan()),this.freeTrial&&((0,i.Ay)("summary-base-credits-free-trial").innerText=(0,a.A)("creditForAIGenerationDuringTrial",250),(0,i.Ay)("summary-base-credits-free-trial").style.display="list-item")):"credits"===this.checkoutType?(r=n=this.getCreditsByPrice(this.genCredits),(0,i.Ay)("summary-credits-amount").innerText=(0,a.A)("totalGenerativeCredits",this.genCredits.toFixed()),(0,i.Ay)("summary-credits-value").innerText=n.toFixed(2),(0,i.Ay)("summary-credits").classList.add("inc")):"paid"===this.checkoutType&&((0,i.Ay)("summary-base-value").innerText=n.toFixed(2),(0,i.Ay)("summary-base-credits").innerText=(0,a.A)("creditForAIGeneration",this.selectedPlan.credits)),"paid"!==this.checkoutType&&this.appliedPromo&&!["UPSELL30","UPSELL10"].includes(null===(e=this.appliedPromo)||void 0===e?void 0:e.code)){const{productCode:e,productName:t,percentage:s,amount:r}=this.appliedPromo;(0,i.Ay)("summary-promo-remarks").innerText=s?(0,a.A)("discountPercentageOffFirstPayingMonth").replace("{discountAmount}",`${s}%`):(0,a.A)("discountAmountOnlyFirstPayingMonth").replace("{discountAmount",r.toFixed(2));t.includes(this.productName)&&e.includes(this.splanId)&&(s?o=n*s/100:r&&(o=r),(0,i.Ay)("summary-promo-value").innerText=`- ${o.toFixed(2)}`,(0,i.Ay)("summary-promo").classList.add("inc"))}else(0,i.Ay)("summary-promo").classList.remove("inc");if("Pixlr Team"!==this.productName&&"seats"!==this.checkoutType||!this.extraSeats)(0,i.Ay)("summary-seats").classList.remove("inc");else{const e=this.getSingleSeatPrice();h=this.extraSeats*e,(0,i.Ay)("summary-seats-count").innerText=`x${this.extraSeats} seats`,(0,i.Ay)("summary-seats-value").innerText=h.toFixed(2),(0,i.Ay)("summary-seats").classList.add("inc")}if(this.tax.status?(c=(n-o-this.planBalance+h)*(this.tax.percentage/100),(0,i.Ay)("summary-tax-value").innerHTML=c.toFixed(2),(0,i.Ay)("summary-total-tax").style.display="block",(0,i.Ay)("summary-tax").classList.add("inc")):((0,i.Ay)("summary-tax").classList.remove("inc"),(0,i.Ay)("summary-total-tax").style.display="none"),r=n-o-this.planBalance+h+c,"paid"!==this.checkoutType&&["UPSELL30","UPSELL10"].includes(null===(t=this.appliedPromo)||void 0===t?void 0:t.code)&&this.upsellDiscount){const e=this.checkoutOptions.plan.includes("plus")?10:30,t=r*(1-e/100),s=(r-t).toFixed(2);r=t,(0,i.Ay)("summary-upsell-discount").innerText=`-${s}`,(0,i.Ay)("summary-upsell-note").innerText=`${(0,a.A)("limitedTimeDiscountDesc").replace("{discount}",""+e).replace("{plan}",this.selectedPlan.code.includes("monthly")?"monthly":"yearly")} ${this.freeTrial&&!this.skipFreeTrial?(0,a.A)("youWillBeChargedDiscounted"):""}`,(0,i.Ay)("summary-upsell").classList.add("inc")}else(0,i.Ay)("summary-upsell").classList.remove("inc");if(this.freeTrial?(0,i.Ay)("summary-skip-trial").classList.add("inc"):(0,i.Ay)("summary-skip-trial").classList.remove("inc"),this.freeTrial&&!this.skipFreeTrial){let e=r;r=0;const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date;s.setDate(s.getDate()+7);const n=`${s.getDate()} ${t[s.getMonth()]} ${s.getFullYear()}`;(0,i.Ay)("proceed-payment").innerText=(0,a.A)("startTrial"),(0,i.Ay)("summary-trial-note").innerText=(0,a.A)("cancelAnytimeOrAutoRenewalForAmount",n,`${this.currencySymbol}${e.toFixed(2)}`),(0,i.Ay)("summary-trial").classList.add("inc")}else(0,i.Ay)("summary-trial").classList.remove("inc");if("paid"===this.checkoutType&&(null===(s=this.appliedPromo)||void 0===s?void 0:s.code)){const e=this.appliedPromo.percentage,t=r*(1-e/100),s=(r-t).toFixed(2);r=+t.toFixed(2),(0,i.Ay)("summary-summer-campaign-discount").innerText=`-${s}`,(0,i.Ay)("summary-summer-campaign-note").innerText=`${(0,a.A)("limitedTimeDiscountSummerDesc")}`,(0,i.Ay)("summary-summer-campaign").classList.add("inc")}else(0,i.Ay)("summary-summer-campaign").classList.remove("inc");document.querySelectorAll(".total-price").forEach(e=>e.innerHTML=r.toFixed(2))},this.skipFreeTrialHandler=e=>{e.target.checked?((0,i.Ay)("summary-trial").classList.remove("inc"),(0,i.Ay)("proceed-payment").innerText=(0,a.A)("payNow"),this.skipFreeTrial=!0,this.updatePrice()):((0,i.Ay)("summary-trial").classList.add("inc"),(0,i.Ay)("proceed-payment").innerText=(0,a.A)("startTrial"),this.skipFreeTrial=!1,this.updatePrice())},this.setPaymentMethod=e=>{let t=e.value;switch(e.checked=!0,"saved-card"===e.dataset.value&&(t="saved-card"),t){case"paypal":this.selectedPayment="paypal",(0,i.Ay)("wrapper-billing-option").style.display="none",(0,i.Ay)("component-container").classList.add("blocked"),(0,i.Ay)("saved-cards").classList.add("blocked"),(0,i.Ay)("payment-info-message").classList.remove("inc"),(0,i.Ay)("payment-info-message").innerHTML="",this.isReadyToPay();break;case"saved-card":if(this.selectedPayment="saved-card",this.selectedSavedCard=e.id,(0,i.Ay)("wrapper-billing-option").style.display="inline-flex",(0,i.Ay)("component-container").classList.add("blocked"),(0,i.Ay)("saved-cards").classList.remove("blocked"),e.className.includes("selected"))return e.classList.remove("selected"),void this.setPaymentMethod((0,i.Ay)("adyen-radio-option"));document.querySelectorAll(".saved-card-item").forEach(e=>{e.classList.remove("selected"),e.classList.add("blocked")}),e.classList.add("selected"),e.classList.remove("blocked"),this.isReadyToPay();break;default:this.selectedPayment="credit",(0,i.Ay)("wrapper-billing-option").style.display="inline-flex",(0,i.Ay)("component-container").classList.remove("blocked"),(0,i.Ay)("saved-cards").classList.remove("blocked"),this.isReadyToPay()}},this.setPlan=e=>{this.splanId=e.dataset.plan,this.selectedPlan=this.setPlanDetails(this.splanId),document.querySelector(".plan-options.selected").classList.remove("selected"),e.classList.add("selected"),this.updatePrice()},this.setPlanDetails=e=>this.subscriptionPlans.filter(t=>t.code===e)[0],this.proceedPayment=async()=>{var e,t,s;const a=(0,i.Ay)("proceed-payment");if(a.disabled)return;if(a.disabled=!0,"paypal"===this.selectedPayment)return this.loadPaypal();a.style.cursor="wait";const n=`/checkout/payments/${this.checkoutType}?platform=${this.checkoutOptions.platform}`,r=this.getCheckoutData();r.utm=this.getUtmParams();try{const i=await p.In(n,"POST",r);if(!0===i.status){const{paymentResponse:s,affiliate:a}=i.data;a&&this.affiliate(null===(e=i.data)||void 0===e?void 0:e.affiliate),(null==s?void 0:s.action)&&(null===(t=null==s?void 0:s.action)||void 0===t?void 0:t.type)===v.CheckoutThreeDS2Action.TypeEnum.ThreeDs2?this.load3DSForm(s):(this.paymentResult(i.status,i.data.settings),"web"===this.checkoutOptions.platform?setTimeout(()=>{this.checkoutOptions.callbackURL?window.location.href=this.checkoutOptions.callbackURL:"seats"===this.checkoutType?window.location.href="/myaccount/?tab=team":"giftcard"===this.checkoutType?window.location.href="/myaccount/?tab=redeem":"paid"===this.checkoutType?window.location.href=`${window.location.href}/thank-you`:window.location.href="/myaccount/?tab=subscription"},1500):setTimeout(()=>{null==this||this.cleanUp()},2500))}else this.paymentResult(!1,{message:null!==(s=i.message)&&void 0!==s?s:""})}catch(o){console.error(o),this.paymentResult(!1,{})}},this.paymentResult=(e,t)=>{var s,n,r;if(this.optionUI.style.display="none",this.summaryUI.style.display="none",null===(s=(0,i.Ay)("chckout-loading"))||void 0===s||s.remove(),null===(n=(0,i.Ay)("chckout-result"))||void 0===n||n.remove(),!1===e){const e=((null===(r=t.message)||void 0===r?void 0:r.toLowerCase())||"").includes("fraud")?"There was an issue processing your payment. Please contact customer support for assistance.":t.message;this.setContent((0,i.T)("div",{id:"chckout-result"},(0,i.T)("img",{src:"/images/icon/red-cross.png",width:100,style:"margin-bottom: 20px"}),(0,i.T)("h2",{style:"margin-bottom: 10px"},(0,a.A)("paymentFailed")),(0,i.T)("p",(0,a.A)("paymentUnsuccessful")),(0,i.T)("p",{style:"margin-top: 60px; color: #535353; font-style: italic"},e))),setTimeout(()=>window.location.reload(),500)}else"processing"===e?(this.setContent((0,i.T)("div",{id:"chckout-result"},(0,i.T)("img",{src:"/images/myaccount/black-loading.gif",width:150}),(0,i.T)("h2",{style:"margin-bottom: 10px"},(0,a.A)("pleaseCompleteYourPaymentAtPaypal")),(0,i.T)("p",{style:"margin-bottom: 10px"},(0,a.A)("pleaseDoNotRefreshOrCloseThisPageWhilePaymentIsProcessing")),(0,i.T)("p",(0,a.A)("youWillAutomaticallyBeRedirectedToMyAccount")))),t&&Object.assign(m.N,t)):(this.setContent((0,i.T)("div",{id:"chckout-result"},(0,i.T)("img",{src:"/images/icon/green-tick.png",width:100,style:"margin-bottom: 20px"}),(0,i.T)("h2",{style:"margin-bottom: 10px"},(0,a.A)("paymentSuccessful")),"paid"!==this.checkoutType?(0,i.T)("p",(0,a.A)("youWillAutomaticallyBeRedirectedToMyAccount")):"")),t&&Object.assign(m.N,t),this.clearUTMParameters())},this.load3DSForm=async e=>{const t=this.checkoutType,a=this.getCheckoutData();const n=e=>{var t,s;!0===e.status?(e.data.affiliate&&this.affiliate(null===(t=e.data)||void 0===t?void 0:t.affiliate),this.paymentResult(e.status,e.data.settings),"web"===this.checkoutOptions.platform?setTimeout(()=>{"seats"===this.checkoutType?window.location.href="/myaccount/?tab=team":"giftcard"===this.checkoutType?window.location.href="/myaccount/?tab=redeem":window.location.href="/myaccount/?tab=subscription"},1500):setTimeout(()=>{null==this||this.cleanUp()},2500)):this.paymentResult(!1,{message:null!==(s=e.message)&&void 0!==s?s:""})},[r]=await Promise.all([s.e(8636).then(s.bind(s,40430)).then(e=>e.default),s.e(8636).then(s.bind(s,36971))]),o={locale:"en_US",environment:"pixlr.com"===window.location.hostname?"live":"test",clientKey:this.adyenClientKey,onAdditionalDetails:function(e,s){!async function(e){const s=await p.In("/checkout/payments/details","POST",Object.assign(Object.assign(Object.assign({},a),e),{checkoutType:t}));n(s)}(e.data)}};(await r(o)).createFromAction(e.action).mount("#component-3ds-container"),(0,i.Ay)("saved-cards").style.display="none",(0,i.Ay)("payment-option-radios").style.display="none",(0,i.Ay)("component-container").style.display="none",document.querySelectorAll("#chckout-options > details:not(#wrapper-payment-method)").forEach(e=>{e.style.display="none"})},this.loadAdyen=async()=>{var e;const[t]=await Promise.all([s.e(8636).then(s.bind(s,40430)).then(e=>e.default),s.e(8636).then(s.bind(s,36971))]),{paymentMethods:a,paymentCards:n,adyenClientKey:r,proRatedSeats:o,affiliate:h}=await p.Wv({splan:"premium-monthly",checkoutType:this.checkoutType});this.adyenClientKey=r;const c={locale:"en_US",environment:"pixlr.com"===window.location.hostname?"live":"test",clientKey:this.adyenClientKey,paymentMethodsResponse:a,analytics:{enabled:!1},onChange:this.handleOnChange};(null==a?void 0:a.storedPaymentMethods)&&n&&(((e,t)=>{const s=(0,i.Ay)("saved-cards");s.innerHTML="",e.forEach(e=>{if(!t.includes(e.id))return;const a=(0,i.T)("div",{id:e.id,className:"saved-card-item",dataset:{value:"saved-card"}},(0,i.T)("object",{data:`/images/checkout/${e.brand}.png`,type:"image/png",style:"margin-left: auto"},(0,i.T)("img",{src:`https://checkoutshopper-live.adyen.com/checkoutshopper/images/logos/${e.brand}.svg`,style:"margin-left: auto"})),(0,i.T)("div",{style:"display: flex; justify-content: space-between"},(0,i.T)("span","****"),(0,i.T)("span","****"),(0,i.T)("span","****"),(0,i.T)("span",`${e.lastFour}`)),(0,i.T)("div",(0,i.T)("span",{style:"font-size: 8px; margin-right: 8px"},"MM/YY"),(0,i.T)("span",{style:"font-size: 12px"},`${e.expiryMonth}/${e.expiryYear.substring(4,2)}`)));t[0]===e.id?s.prepend(a):s.append(a)})})(a.storedPaymentMethods,n),document.querySelectorAll(".saved-card-item").forEach(e=>{e.addEventListener("click",()=>{this.setPaymentMethod(e)})})),o&&console.log("check back here");(await t(c)).create("card",{hasHolderName:!0,holderNameRequired:!0}).mount("#component-container"),null===(e=(0,i.Ay)("chckout-loading"))||void 0===e||e.remove(),("giftcard"===this.checkoutType||"credits"===this.checkoutType||"seats"===this.checkoutType||"subscription"===this.checkoutType&&"Pixlr Team"===this.productName)&&((0,i.Ay)("saved-cards").style.display="none")},this.loadPaypal=async()=>{const e="/paypal/"+("subscription"===this.checkoutType?"subscriptions":"purchase"),t=this.getCheckoutData();try{const s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}),a=await s.json();if(a.status){const e=800,t=650,s=(screen.width-e)/2,n=(screen.height-t)/4,r=window.open(a.redirectUrl,"Paypal Checkout",`resizable=yes,width=800,height=650,top=${n},left=${s}`);this.paymentResult("processing",{});"success"===(await async function(e,t=5e3,s=3e4){const i=(new Date).getTime()+s,a=(s,n)=>{Promise.resolve(e()).then(e=>{console.log(e);const r=(new Date).getTime();"success"===e.status?s(e):r<i||"pending"===e.status?setTimeout(a,t,s,n):n(new Error("AsyncPoller: reached timeout"))}).catch(e=>{n(e)})};return new Promise(a)}(async()=>{try{const e=await p.sG(a.id,this.checkoutType);return Promise.resolve(e)}catch(e){return Promise.reject(e)}},500,15e3)).status&&((0,i.Ay)("try-premium")&&((0,i.Ay)("try-premium").style.display="none"),r.close(),this.paymentResult(!0,{}),setTimeout(()=>{var e;null==this||this.cleanUp(),"web"===(null===(e=this.checkoutOptions)||void 0===e?void 0:e.platform)&&(window.location.href="/myaccount/?tab=subscription")},2500))}else this.paymentResult(!1,{})}catch(s){console.error(s),this.paymentResult(!1,{})}},this.handleOnChange=e=>{const{data:t,isValid:s}=e,{browserInfo:i,paymentMethod:a}=t;this.encryptedCardData.isValid=s,this.encryptedCardData.paymentMethod=a,this.encryptedCardData.cardHolderName=document.getElementsByClassName("adyen-checkout__input--text")[0].value,this.browserInfo=i,this.isReadyToPay()},this.requiredBillingInput=["firstName","lastName","address","city","zipCode","state"],this.isReadyToPay=()=>{const{isValid:e,paymentMethod:t}=this.encryptedCardData,s=(0,i.Ay)("proceed-payment");try{if("paypal"===this.selectedPayment&&(s.disabled=!1),"credit"===this.selectedPayment){if(!e)throw!1;if(!this.encryptedCardData.cardHolderName.length)throw!1}const t=Object.values(this.paymentData.billingAddress).filter(e=>""!==e).length;if(1===t&&"United States"===this.paymentData.billingAddress.country&&"paypal"!==this.selectedPayment)throw!1;1===t&&(s.disabled=!1),3===t&&this.paymentData.billingAddress.state&&this.paymentData.billingAddress.stateOrProvince?s.disabled=!1:1!==t&&this.requiredBillingInput.forEach(e=>{if(!this.paymentData.billingAddress[e])throw!1}),s.disabled=!1}catch(a){s.disabled=!0}},this.backPreviousPopup=()=>{if(this.cleanUp(),"premiumbounce"===this.checkoutOptions.bounceSource)new y.A(this.checkoutOptions.bounceType,"premium")},this.getCreditsByPrice=e=>{if(71===e)return.01;if(200===e)return 3.99;if(500===e)return 6.99;if(1e3===e)return 9.99;if(2e3===e)return 16.99;if(5e3===e)return 30.99;throw new Error("Invalid amount")},this.getCreditsByPlan=()=>"plus-monthly"===this.splanId?80:"plus-yearly"===this.splanId?960:"premium-monthly"===this.splanId?1e3:"premium-yearly"===this.splanId?12e3:"team-monthly"===this.splanId?1e3:"team-yearly"===this.splanId?12e3:void 0,this.getSingleSeatPrice=()=>{var e;if("seats"===this.checkoutType)return(null===(e=null===m.N||void 0===m.N?void 0:m.N.subscriptionCode)||void 0===e?void 0:e.includes("monthly"))?5.99:59.99;if("subscription"===this.checkoutType)return this.splanId.includes("monthly")?5.99:59.99;throw new Error("Configuration error...")},this.getCheckoutData=()=>{var e,t,s;const i={checkoutMethod:"checkout",billingAddress:null!==(t=null===(e=this.paymentData)||void 0===e?void 0:e.billingAddress)&&void 0!==t?t:{},currency:this.currency,promo:this.appliedPromo?this.appliedPromo.code:"",captchaToken:"!!"};return"upgrade"===(null===(s=this.checkoutOptions)||void 0===s?void 0:s.checkoutMode)&&(i.checkoutMethod="upgrade"),this.browserInfo&&(i.browserInfo=this.browserInfo,i.origin=window.location.origin),"subscription"===this.checkoutType?(i.splan=this.splanId,i.freeTrial=this.freeTrial&&!this.skipFreeTrial,i.upsellDiscount=this.upsellDiscount):"giftcard"===this.checkoutType?(i.giftId=this.giftCardId,i.giftDetails=this.checkoutOptions.isAGift):"credits"===this.checkoutType&&(i.credits=this.genCredits),"paid"===this.checkoutType&&(i.splan=this.splanId,i.credits=+this.selectedPlan.credits,i.promo=this.appliedPromo.code),"credit"===this.selectedPayment?i.paymentMethod=this.encryptedCardData.paymentMethod:"saved-card"===this.selectedPayment&&this.selectedSavedCard&&(i.paymentCard=this.selectedSavedCard),"Pixlr Team"!==this.productName&&"seats"!==this.checkoutType||(i.seatsToAdd=this.extraSeats),i},this.loadAwin=()=>{this.dialog.append((0,i.T)("script",{src:"https://www.dwin1.com/65758.js",type:"text/javascript",defer:!0}))},this.affiliate=e=>{const{awin:t}=e;if(t){const{params:e}=t;if(document.body.append((0,i.T)("img",{src:`https://www.awin1.com/sread.img?tt=ns&tv=2&merchant=65758&amount=${e.amount}&cr=${e.cr}&ref=${e.ref}&parts=DEFAULT:${e.saleAmount}&vc=${e.vc}&ch=${e.ch}&customeracquisition=${e.customeracquisition}`,width:0,height:0,style:{border:"none"}})),void 0!==s&&void 0!==s.Tracking){var s={};s.Tracking.Sale={},s.Tracking.Sale.amount=e.amount,s.Tracking.Sale.orderRef=e.ref,s.Tracking.Sale.parts=`DEFAULT:${e.amount}`,s.Tracking.Sale.voucher=e.vc,s.Tracking.Sale.currency=e.cr,s.Tracking.Sale.channel=e.ch,s.Tracking.Sale.customerAcquisition=e.customeracquisition,s.Tracking.run()}else{const t=(0,i.T)("script",{type:"text/javascript"});t.innerHTML=`\n                    //<![CDATA[ /*** Do not change ***/\n                        var AWIN = {};\n                        AWIN.Tracking = {};\n                        AWIN.Tracking.Sale = {};\n                        /*** Set your transaction parameters ***/\n                        AWIN.Tracking.Sale.amount = "${e.amount}";\n                        AWIN.Tracking.Sale.orderRef = "${e.ref}";\n                        AWIN.Tracking.Sale.parts = "DEFAULT:${e.amount}";\n                        AWIN.Tracking.Sale.voucher = "${e.vc}";\n                        AWIN.Tracking.Sale.currency = "${e.cr}";\n                        AWIN.Tracking.Sale.channel = "${e.ch}";\n                        AWIN.Tracking.Sale.customerAcquisition = "${e.customeracquisition}";\n                    //]]>\n                `,document.body.append(t),this.loadAwin()}}},this.trackShareASale=e=>{const{merchantReference:t,paidAmount:s,currency:i,sscid:a,newCustomer:n=0}=e;if(a){const e=document.createElement("img");e.id="_SHRSL_img_1",e.src=`https://www.shareasale.com/sale.cfm?tracking=${t}&amount=${s}&merchantID=94987&transtype=sale&sscidmode=6&sscid=${a}&currency=${i}&newcustomer=${n}`,e.style.width="1",e.style.height="1";const r=document.createElement("script");r.src="https://www.dwin1.com/19038.js",r.type="text/javascript",r.defer=!0,this.dialog.appendChild(e),this.dialog.appendChild(r)}},this.getUtmParams=()=>({utm_source:localStorage.getItem("utm_source"),utm_medium:localStorage.getItem("utm_medium"),utm_campaign:localStorage.getItem("utm_campaign")}),this.clearUTMParameters=()=>{localStorage.removeItem("utm_source"),localStorage.removeItem("utm_medium"),localStorage.removeItem("utm_campaign")},this.disablePaymentMethod=e=>{var t;switch(e){case"paypal":(0,i.Ay)("paypal-payment-option").style.display="none";break;case"saved-card":(0,i.Ay)("wrapper-billing-option").style.display="none",(0,i.Ay)("component-container").classList.add("blocked"),(0,i.Ay)("saved-cards").classList.add("blocked");break;case"cc":(0,i.Ay)("adyen-payment-option").style.display="none",(0,i.Ay)("component-container").style.display="none",null===(t=(0,i.Ay)("component-3ds-container"))||void 0===t||t.remove()}},(0,u.A)("checkout",e),this.checkoutType=e,this.checkoutOptions=Object.assign(Object.assign({},this.checkoutOptions),t),s.e(7162).then(s.bind(s,81413)),this.dialog.id="chckout",this.setContent(`\n            <div id="chckout-loading">${(0,a.A)("pleaseWaitWhileCheckoutLoading")}</div>\n            <div id="chckout-options"></div>\n            <div id="chckout-summary"></div>\n        `),this.optionUI=(0,i.Ay)("chckout-options"),this.summaryUI=(0,i.Ay)("chckout-summary"),this.checkoutOptions.bounceSource&&this.optionUI.append((0,i.T)("img",{id:"back-chckout",src:"/img/icon/arrow-left-black.svg"})),""!==(0,i.lR)("promo-code","")&&(this.checkoutOptions.code=(0,i.lR)("promo-code","")),"subscription"===this.checkoutType)this.splanId=null!==(n=this.checkoutOptions.plan)&&void 0!==n?n:"premium-monthly",this.splanId.includes("plus")?this.productName="Pixlr Plus":this.splanId.includes("premium")?this.productName="Pixlr Premium":this.splanId.includes("team")&&(this.productName="Pixlr Team"),this.freeTrial="checkout"===this.checkoutOptions.checkoutMode&&"Pixlr Premium"===this.productName&&m.N.eligibleForTrail,this.upsellDiscount="checkout"===this.checkoutOptions.checkoutMode&&["Pixlr Premium","Pixlr Plus"].includes(this.productName)&&m.N.eligibleForUpsellDiscount,Promise.all([p.gs(),p.Vi(this.splanId)]).then(([e,t])=>{var s,n;if(!e.status)throw new Error("Failed to get plan details");if("upgrade"===this.checkoutOptions.checkoutMode&&t.status&&(this.planBalance=t.data.planBalance),this.subscriptionPlans=e.data,this.selectedPlan=this.setPlanDetails(this.splanId),this.optionUI.append(o(this.splanId,this.productName,this.subscriptionPlans)),"Pixlr Team"===this.productName&&this.optionUI.append(l()),this.optionUI.append(h()),this.optionUI.append(c()),this.optionUI.append((0,i.T)("details",{id:"wrapper-promo-option",className:"kort"},(0,i.T)("summary",{style:"display: flex; align-items: center;"},(0,i.T)("img",{src:"/images/checkout/icon/percent.svg",width:24,height:24,style:"margin-right: 8px;"}),(0,i.T)("span",{className:"fs-16 fw-7"},(0,a.A)("promoCode")),(0,i.T)("img",{src:"/images/icon/up.svg",style:"margin-left: auto"})),(0,i.T)("div",(0,i.T)("div",{id:"promo-section"},(0,i.T)("input",{id:"promocode-input",type:"text",placeholder:(0,a.A)("enterPromoCode")}),(0,i.T)("span",{id:"promocode-submit",className:"apply"},(0,a.A)("apply"))),(0,i.T)("p",{id:"promocode-error"},(0,a.A)("invalidPromoCode")),(0,i.T)("p",{className:"text-small",style:"margin-top: 8px"},(0,a.A)("promoCodeValidOneTimeOnly"))))),this.summaryUI.append(d(this.checkoutType,this.productName)),!this.checkoutOptions.showMonthly){document.querySelector("#chckout-planSelection .plan-options").style.display="none"}if("upgrade"!==this.checkoutOptions.checkoutMode||!1!==t.status){if(("checkout"===this.checkoutOptions.checkoutMode&&"Pixlr Plus"===this.productName||"upgrade"===this.checkoutOptions.checkoutMode&&"premium-yearly"!==this.splanId||this.upsellDiscount)&&(null===(s=(0,i.Ay)("wrapper-promo-option"))||void 0===s||s.remove()),"upgrade"===this.checkoutOptions.checkoutMode&&t.status){document.querySelector("#chckout-planSelection .plan-options").style.display="none","paypal"===t.data.paymentMethod?(this.summaryUI.append((0,i.T)("div",{id:"paypal-upgrade-notice-wrapper",style:"display: flex; flex-direction: row; column-gap: 7px"},(0,i.T)("img",{src:"/img/icon/warning.svg",style:"width: 30px"}),(0,a.A)("paypalUpgradeConfirmationDisclaimerOnPreviousSubscription"))),this.disablePaymentMethod("saved-card"),this.disablePaymentMethod("cc"),this.setPaymentMethod((0,i.Ay)("paypal-radio-option")),(0,i.Ay)("saved-cards").style.display="none",(0,i.Ay)("chckout-planSelection").open=!0,(0,i.Ay)("wrapper-payment-method").open=!1,"plus-monthly"===t.data.existingPlan.code?null===(n=(0,i.Ay)("wrapper-promo-option"))||void 0===n||n.remove():(0,i.Ay)("promocode-input")&&((0,i.Ay)("promocode-input").value="PYPL-25-UPGRADE",(0,i.Ay)("promocode-input").readOnly=!0,(0,i.Ay)("promocode-input").classList.add("disabled"),(0,i.Ay)("promocode-submit").style.display="none",(0,i.Ay)("promo-section").style.cursor="not-allowed",this.appliedPromo={code:"PYPL-25-UPGRADE",name:"PAYPAL UPGRADE 25% OFF",percentage:25,productName:[this.productName],productCode:[this.splanId]})):(this.disablePaymentMethod("paypal"),(0,i.Ay)("summary-balance-value").innerText=`- ${t.data.planBalance.toFixed(2)}`,(0,i.Ay)("summary-balance").classList.add("inc"))}(0,i.Ay)("paypal-payment-option")&&"Pixlr Team"===this.productName&&((0,i.Ay)("paypal-payment-option").style.display="none"),this.upsellDiscount?this.applyUpsellPromoCode():this.checkoutOptions.code&&((0,i.Ay)("promocode-input")&&((0,i.Ay)("promocode-input").value=this.checkoutOptions.code),this.applyPromoCode(),this.checkoutOptions.code=""),this.loadAdyen(),this.loadEventListener()}else this.paymentResult(!1,{})});else if("giftcard"===this.checkoutType){if(this.giftCardId=this.checkoutOptions.giftcard,!this.giftCardId)throw new Error("Missing giftcard details!");this.loadGiftCardUI(),(0,i.Ay)("saved-cards")&&((0,i.Ay)("saved-cards").style.display="none")}else if("seats"===this.checkoutType)this.loadSeatsUI(),this.selectSeats(document.querySelector(".seat-option"));else if("credits"===this.checkoutType)this.loadCreditsUI(),this.selectCredit(document.querySelector(".credit-option"));else if("paid"===this.checkoutType){if(this.splanId=this.checkoutOptions.plan,!this.splanId)throw new Error("Invalid plan!");this.productName="Pixlr Premium",p.gs(["summer-campaign-ai-credits-2000","summer-campaign-ai-credits-5000"]).then(e=>{if(!e.status)throw new Error("Failed to get plan details");this.subscriptionPlans=e.data,this.selectedPlan=this.setPlanDetails(this.splanId),"SUMMERCAMPAIGN"===this.checkoutOptions.code&&(this.applyPromoCode(),this.checkoutOptions.code=""),this.optionUI.append(h()),this.optionUI.append(c()),this.summaryUI.append(d(this.checkoutType,this.selectedPlan.name)),(0,i.Ay)("paypal-payment-option").style.display="none",this.loadAdyen(),this.loadEventListener()})}}}},96782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Avs=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.Avs=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"addressEditable",baseName:"addressEditable",type:"boolean"},{name:"enabled",baseName:"enabled",type:"Avs.EnabledEnum"}],function(e){let t;!function(e){e.Yes="yes",e.No="no",e.Automatic="automatic"}(t=e.EnabledEnum||(e.EnabledEnum={}))}(s=t.Avs||(t.Avs={}))},96785:(e,t,s)=>{s.d(t,{A:()=>l});var i=s(21742),a=s(26806),n=s(42268),r=s(54738),o=s(15818),h=s(41915),c=s(29755);class l extends a.A{constructor(e,t,s){super((0,i.A)("titleColorPicker"),!1),this.hue=0,this.sat=0,this.bri=1,this.setHistory=e=>{let t=o.A.fromRGB(e.currentTarget.style.backgroundColor);this.setColor(t)},this.pickerPreviewColor=e=>{let t=new h.A(e.clientX,e.clientY);this.colorPreview.style.top=t.y-50+"px",this.colorPreview.style.left=t.x+10+"px",this.colorPreview.style.display="block";const s=c.Ay.isHDPI?2:1;if(t=new h.A((e.clientX-this.stageC.offsetLeft)*s,(e.clientY-this.stageC.offsetTop)*s),e.target!==this.modal||t.x<0||t.y<0||t.x>this.stageC.width||t.y>this.stageC.height)return void(this.colorPreview.style.display="none");let i=this.stageCanvasCTX.getImageData(t.x,t.y,1,1).data;this.colorPreview.style.backgroundColor=new o.A(i[0],i[1],i[2]).toHEX()},this.pickerPreviewLeave=()=>{this.colorPreview.style.display="none"},this.pickerSetColor=e=>{const t=c.Ay.isHDPI?2:1;let s=new h.A((e.clientX-this.stageC.offsetLeft)*t,(e.clientY-this.stageC.offsetTop)*t);if(e.target!==this.modal||s.x<0||s.y<0||s.x>this.stageC.width||s.y>this.stageC.height)return;let i=this.stageCanvasCTX.getImageData(s.x,s.y,1,1).data;this.setColor(new o.A(i[0],i[1],i[2]))},this.satMouseDown=e=>{e.stopPropagation(),document.addEventListener("mousemove",this.satMouseMove,!0),document.addEventListener("mouseup",this.satMouseUp,!0);var t=this.satSlide.getBoundingClientRect(),s=e.pageX-t.left,i=e.pageY-t.top;this.selectSat(s,i)},this.satMouseMove=e=>{e.stopPropagation();var t=this.satSlide.getBoundingClientRect(),s=e.pageX-t.left,i=e.pageY-t.top;this.selectSat(s,i)},this.satMouseUp=e=>{e.stopPropagation(),document.removeEventListener("mousemove",this.satMouseMove,!0),document.removeEventListener("mouseup",this.satMouseUp,!0)},this.satTouchStart=e=>{e.stopPropagation(),document.addEventListener("touchmove",this.satTouchMove,!0),document.addEventListener("touchend",this.satTouchEnd,!0);var t=this.satSlide.getBoundingClientRect(),s=e.targetTouches[0].pageX-t.left,i=e.targetTouches[0].pageY-t.top;this.selectSat(s,i)},this.satTouchMove=e=>{e.stopPropagation();var t=this.satSlide.getBoundingClientRect(),s=e.targetTouches[0].pageX-t.left,i=e.targetTouches[0].pageY-t.top;this.selectSat(s,i)},this.satTouchEnd=e=>{e.stopPropagation(),document.removeEventListener("touchmove",this.satTouchMove,!0),document.removeEventListener("touchend",this.satTouchEnd,!0)},this.selectSat=(e,t)=>{e=r.qE(e,0,256),t=r.qE(t,0,256),this.sat=e/256,this.bri=1-t/256,this.setSatKnob(),this.calculateColor()},this.setSatKnob=()=>{this.satKnob.style.left=256*this.sat-9+"px",this.satKnob.style.top=256*(1-this.bri)-9+"px"},this.hueMouseDown=e=>{e.stopPropagation(),document.addEventListener("mousemove",this.hueMouseMove,!0),document.addEventListener("mouseup",this.hueMouseUp,!0);var t=this.hueSlide.getBoundingClientRect();this.selectHue(e.pageY-t.top)},this.hueMouseMove=e=>{e.stopPropagation();var t=this.hueSlide.getBoundingClientRect();this.selectHue(e.pageY-t.top)},this.hueMouseUp=e=>{e.stopPropagation(),document.removeEventListener("mousemove",this.hueMouseMove,!0),document.removeEventListener("mouseup",this.hueMouseUp,!0)},this.hueTouchStart=e=>{e.stopPropagation(),this.hueSlide.addEventListener("touchmove",this.hueTouchMove,!0),document.addEventListener("touchend",this.hueTouchEnd,!0);var t=e.target.getBoundingClientRect();this.selectHue(e.targetTouches[0].pageY-t.top)},this.hueTouchMove=e=>{e.stopPropagation();var t=e.target.getBoundingClientRect();this.selectHue(e.targetTouches[0].pageY-t.top)},this.hueTouchEnd=e=>{e.stopPropagation(),this.hueSlide.removeEventListener("touchmove",this.hueTouchMove,!0),document.removeEventListener("touchend",this.hueTouchEnd,!0)},this.selectHue=e=>{e=r.qE(e,0,256),this.hue=Math.round(359-e/256*359),this.setHueKnob(),this.calculateColor()},this.setHueKnob=()=>{this.hueKnob.style.top=252-this.hue/359*254+"px";let e=this.satSlide.getContext("2d");e.fillStyle=o.A.fromHSB(this.hue,1,1).toHEX(),e.fillRect(0,0,this.satSlide.width,this.satSlide.height);var t=e.createLinearGradient(0,0,this.satSlide.width,0);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=t,e.fillRect(0,0,this.satSlide.width,this.satSlide.height);var s=e.createLinearGradient(0,0,0,this.satSlide.height);s.addColorStop(0,"rgba(0,0,0,0)"),s.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=s,e.fillRect(0,0,this.satSlide.width,this.satSlide.height)},this.calculateColor=()=>{this.color=o.A.fromHSB(this.hue,this.sat,this.bri);var e=document.activeElement;this.hexInput.value=this.color.toHEX(),e!==this.hueInput&&(this.hueInput.value=Math.round(this.hue).toString()),e!==this.satInput&&(this.satInput.value=Math.round(100*this.sat).toString()),e!==this.briInput&&(this.briInput.value=Math.round(100*this.bri).toString()),e!==this.redInput&&(this.redInput.value=this.color.r.toString()),e!==this.greenInput&&(this.greenInput.value=this.color.g.toString()),e!==this.blueInput&&(this.blueInput.value=this.color.b.toString()),this.selected.style.backgroundColor=this.color.toRGBA(),this.preview&&r.sg("preview",50,()=>{this.preview(this.color)})},this.hexInputChange=e=>{/^#[0-9A-F]{6}$/i.test(this.hexInput.value)&&this.setColor(o.A.fromHEX(this.hexInput.value))},this.hueInputChange=e=>{this.hue=r.qE(parseInt(this.hueInput.value),0,359),this.setHueKnob(),this.calculateColor()},this.satInputChange=e=>{this.sat=r.qE(parseInt(this.satInput.value),0,100)/100,this.setSatKnob(),this.calculateColor()},this.briInputChange=e=>{this.bri=r.qE(parseInt(this.briInput.value),0,100)/100,this.setSatKnob(),this.calculateColor()},this.redInputChange=e=>{this.color.r=r.qE(parseInt(this.redInput.value),0,255),this.setColor(this.color)},this.greenInputChange=e=>{this.color.g=r.qE(parseInt(this.greenInput.value),0,255),this.setColor(this.color)},this.blueInputChange=e=>{this.color.b=r.qE(parseInt(this.blueInput.value),0,255),this.setColor(this.color)},this.setColor=e=>{this.color=null!=e?e:new o.A;let t=Math.min(this.color.r,this.color.g,this.color.b),s=Math.max(this.color.r,this.color.g,this.color.b);this.bri=s/255;var i=s-t;i?(this.sat=i/s,this.color.r==s?this.hue=(this.color.g-this.color.b)/i*60:this.color.g==s?this.hue=60*(2+(this.color.b-this.color.r)/i):this.hue=60*(4+(this.color.r-this.color.g)/i),this.hue>360?this.hue-=360:this.hue<0&&(this.hue+=360),360===this.hue&&(this.hue=0)):this.hue=this.sat=0,this.setHueKnob(),this.setSatKnob(),this.calculateColor()},this.getColor=()=>this.color,this.getHex=()=>this.color.toHEX(),this.cancel=()=>{this.preview&&this.preview(this.current),this.cleanUp()},this.apply=()=>{this.callback&&(this.preview&&this.preview(this.current),(0,c.oY)(this.color),this.callback(this.color)),this.cleanUp()},this.cleanUp=()=>{document.dispatchEvent(new CustomEvent("viewport-render")),(0,n.Ay)("color-picker-history").querySelectorAll(".color-pod").forEach(e=>e.removeEventListener("click",this.setHistory)),this.satSlide.removeEventListener("mousedown",this.satMouseDown,!1),this.satSlide.removeEventListener("touchstart",this.satTouchStart),this.hueSlide.removeEventListener("mousedown",this.hueMouseDown,!1),this.hueSlide.removeEventListener("touchstart",this.hueTouchStart),this.hexInput.removeEventListener("input",this.hexInputChange,!1),this.hueInput.removeEventListener("input",this.hueInputChange,!1),this.satInput.removeEventListener("input",this.satInputChange,!1),this.briInput.removeEventListener("input",this.briInputChange,!1),this.redInput.removeEventListener("input",this.redInputChange,!1),this.greenInput.removeEventListener("input",this.greenInputChange,!1),this.blueInput.removeEventListener("input",this.blueInputChange,!1),this.modal.removeEventListener("mousedown",this.pickerSetColor,!0),this.modal.removeEventListener("mousemove",this.pickerPreviewColor,!0),this.modal.removeEventListener("mouseleave",this.pickerPreviewLeave,!0),document.removeEventListener("keydown",this.keyDown,!1),this.stageCanvasCTX=void 0,this.stageCanvas=void 0,this.stageC=void 0,this.dialog.remove(),this.dialog=null,this.modal.remove(),this.modal=null},this.preview=s,this.callback=t,this.dialog.style.width="500px",this.dialog.style.minWidth="500px",this.content.style.paddingBottom="10px",(0,n.Ay)("dialog-apply"+this.mid).innerText=(0,i.A)("ok"),this.setContent('\n            <div id="color-picker-selector">\n                <div id="color-picker-sat">\n                    <canvas id="color-picker-sat-slide"></canvas>\n                    <div id="color-picker-sat-knob" class="ic"></div>\n                </div>\n                <div id="color-picker-hue">\n                    <div id="color-picker-hue-slide"></div>\n                    <div id="color-picker-hue-knob" class="ic"></div>\n                </div>\n                <div id="color-picker-etc">\n                    <div id="color-picker-new"></div>\n                    <div id="color-picker-current"></div>\n\n                    <div id="color-picker-inputs">\n                        <div>\n                            <div>H:<input type="number"id="picker-input-hue"></div>\n                            <div>S:<input type="number"id="picker-input-sat"></div>\n                            <div>B:<input type="number"id="picker-input-bri"></div>\n                        </div>\n                        <div>\n                            <div>R:<input type="number"id="picker-input-red"></div>\n                            <div>G:<input type="number"id="picker-input-green"></div>\n                            <div>B:<input type="number"id="picker-input-blue"></div>\n                        </div>\n                    </div>\n                    <div id="color-picker-hex">\n                        HEX:<input type="text" spellcheck="false" maxlength="7" id="picker-input-hex">\n                    </div>\n                 </div>\n            </div>\n        ');let a=(0,n.T)("div",{id:"color-picker-history",className:"color-pod-list"});(0,n.Ay)("dialog-buttons"+this.mid).prepend(a),c.Ay.oldColor.forEach(e=>{let t=(0,n.T)("div",{className:"color-pod small"});t.style.backgroundColor=e,a.append(t)}),(0,n.Ay)("color-picker-history").querySelectorAll(".color-pod").forEach(e=>e.addEventListener("click",this.setHistory)),this.selected=(0,n.Ay)("color-picker-new"),this.selector=(0,n.Ay)("color-picker-selector"),this.satSlide=(0,n.Ay)("color-picker-sat-slide"),this.satKnob=(0,n.Ay)("color-picker-sat-knob"),this.hueSlide=(0,n.Ay)("color-picker-hue-slide"),this.hueKnob=(0,n.Ay)("color-picker-hue-knob"),this.satSlide.addEventListener("mousedown",this.satMouseDown,!1),this.satSlide.addEventListener("touchstart",this.satTouchStart,{passive:!1}),this.hueSlide.addEventListener("mousedown",this.hueMouseDown,!1),this.hueSlide.addEventListener("touchstart",this.hueTouchStart,{passive:!1}),this.hexInput=(0,n.Ay)("picker-input-hex"),this.hexInput.addEventListener("input",this.hexInputChange,!1),this.hueInput=(0,n.Ay)("picker-input-hue"),this.hueInput.addEventListener("input",this.hueInputChange,!1),this.satInput=(0,n.Ay)("picker-input-sat"),this.satInput.addEventListener("input",this.satInputChange,!1),this.briInput=(0,n.Ay)("picker-input-bri"),this.briInput.addEventListener("input",this.briInputChange,!1),this.redInput=(0,n.Ay)("picker-input-red"),this.redInput.addEventListener("input",this.redInputChange,!1),this.greenInput=(0,n.Ay)("picker-input-green"),this.greenInput.addEventListener("input",this.greenInputChange,!1),this.blueInput=(0,n.Ay)("picker-input-blue"),this.blueInput.addEventListener("input",this.blueInputChange,!1),this.modal.style.cursor="crosshair",this.colorPreview=(0,n.T)("div",{id:"color-picker-preview",style:"display:none"}),this.modal.appendChild(this.colorPreview),this.modal.addEventListener("mousedown",this.pickerSetColor,!0),this.modal.addEventListener("mousemove",this.pickerPreviewColor,!0),this.modal.addEventListener("mouseleave",this.pickerPreviewLeave,!0),this.stageC=document.getElementsByClassName("canvas")[0],this.stageCanvas=r.oM(this.stageC),this.stageCanvasCTX=this.stageCanvas.getContext("2d",{willReadFrequently:!0}),(0,n.Ay)("color-picker-current").style.backgroundColor=e?e.toHEX():"#ffffff",this.current=e,this.setColor(e)}}},97197:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentRefundResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.PaymentRefundResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"amount",baseName:"amount",type:"Amount"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantRefundReason",baseName:"merchantRefundReason",type:"PaymentRefundResponse.MerchantRefundReasonEnum | null"},{name:"paymentPspReference",baseName:"paymentPspReference",type:"string"},{name:"pspReference",baseName:"pspReference",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"status",baseName:"status",type:"PaymentRefundResponse.StatusEnum"},{name:"store",baseName:"store",type:"string"}],function(e){let t,s;!function(e){e.Fraud="FRAUD",e.CustomerRequest="CUSTOMER REQUEST",e.Return="RETURN",e.Duplicate="DUPLICATE",e.Other="OTHER"}(t=e.MerchantRefundReasonEnum||(e.MerchantRefundReasonEnum={})),function(e){e.Received="received"}(s=e.StatusEnum||(e.StatusEnum={}))}(s=t.PaymentRefundResponse||(t.PaymentRefundResponse={}))},97266:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(26806),a=s(42268);class n extends i.A{constructor(e,t,s,i,n){super(e,!0),this.init=()=>new Promise((e,t)=>{this.cancel=()=>{this.cleanUp(),e(!1)},this.condition=()=>{this.cleanUp(),e(void 0)},this.apply=()=>{this.cleanUp(),e(!0)}}),this.setContent((0,a.T)("p",t)),s&&((0,a.Ay)("dialog-apply"+this.mid).innerText=s),i&&((0,a.Ay)("dialog-cancel"+this.mid).innerText=i),n&&(0,a.Ay)("dialog-cancel"+this.mid).before((0,a.T)("a",{id:"dialog-condition"+this.mid,className:"button negative",style:"margin-right:auto",onclick:()=>this.condition()},n))}}},97317:(e,t,s)=>{s.d(t,{T:()=>h});var i=s(98244),a=s(54127),n=s(58489),r=s(86445),o=s(10122);function h(e,t){const s=new Date;switch(t.type){case"open":return(0,i.A)("open",t.kind),!0;case"addLayer":return(0,i.A)("layer-add",t.layer.type),!0;case"bitmapSwitch":case"bitmapChange":return(0,i.A)(t.kind),t.layer.syncRequested=s,!0;case"flipLayer":return(0,i.A)("layer-flip"),t.layer.syncRequested=s,!0;case"rotateLayer":return(0,i.A)("layer-rotate"),t.layer.syncRequested=s,!0;case"frameContent":return(0,i.A)("frame-content"),t.layer.syncRequested=s,!0;case"frameSettings":return!t.layer.frameSettings.equalTo(t.settings)&&((0,i.A)("frame-settings"),t.layer.syncRequested=s,!0);case"order":return(0,i.A)("layer-order"),!0;case"layerSettings":return(0,i.A)("layer-settings",t.kind),t.layer.syncRequested=s,!0;case"deleteLayer":return(0,i.A)(t.layer.type+"-delete"),!0;case"textChange":return t.layer.text!==t.text&&((0,i.A)("text-change"),t.layer.syncRequested=s,!0);case"textSettings":return!t.layer.textSettings.equalTo(t.settings)&&((0,i.A)("text-settings"),t.layer.syncRequested=s,!0);case"shapeSettings":return!t.layer.shapeSettings.equalTo(t.settings)&&((0,i.A)("shape-settings"),t.layer.syncRequested=s,!0);case"groupSettings":return!t.layer.groupSettings.equalTo(t.settings)&&((0,i.A)("group-settings"),t.layer.syncRequested=s,!0);case"pageAnimation":return e.animation!==t.animation;case"layerAnimation":return t.layer.animation!==t.animation&&(t.layer.syncRequested=s,!0);case"mask":return(0,i.A)("mask"),t.layer.syncRequested=s,!0;case"crop":return(0,i.A)("crop"),e.layers.forEach(e=>e.syncRequested=s),!0;case"background":return(0,i.A)("background"),!0;case"maskInvert":return(0,i.A)("mask-invert"),t.layer.syncRequested=s,!0;case"arrange":switch(t.action.type){case"rect":if(t.layer.rect.equalTo(t.action.rect))return!1;break;case"trim":if(t.layer.trim.equalTo(t.action.rect))return!1}return(0,i.A)("arrange"),!0;case"arrangeStack":{let e=!1;for(let s=0;s<t.stack.length;s++)t.stack[s].rect&&!t.stack[s].rect.equalTo(t.rects[s])&&(e=!0);return(0,i.A)("arrangeStack"),e}case"link":(0,i.A)("link");for(let e=0;e<t.stack.length;e++)t.stack[e].layer.syncRequested=s;return!0;case"pageSize":return(0,i.A)("page-size"),e.layers.forEach(e=>e.syncRequested=s),!0;case"pageResize":return(0,i.A)("page-resize"),t.layers.forEach(e=>e.syncRequested=s),!0;case"flip":return(0,i.A)("flip",t.vertical?"vertical":"horizontal"),e.layers.forEach(e=>e.syncRequested=s),!0;case"rotate":return(0,i.A)("rotate",t.counterClock?"left":"right"),e.layers.forEach(e=>e.syncRequested=s),!0;case"merge":return(0,i.A)("merge-layers",t.kind),!0;case"adjust":return(0,i.A)("adjust",t.kind),!0;case"effect":return(0,i.A)("effect",t.name),!0;case"glitch":return(0,i.A)("glitch",t.kind),!0;case"selectionChange":case"selectionAndBitmapSwitch":return(0,i.A)("selection",t.kind),!0;case"rasterize":return(0,i.A)("rasterize",t.layer.type),t.layer instanceof o.A||(t.layer instanceof a.A||(t.layer instanceof n.A||(t.layer instanceof r.A||(console.warn("Tried to rasterize an unknown layer type"),!1))));case"convertSelectionToMask":return(0,i.A)("selection-to-mask"),t.layer.syncRequested=s,!0;case"convertMaskToSelection":return(0,i.A)("mask-to-selection"),t.layer.syncRequested=s,!0;case"applyMask":return(0,i.A)("apply-mask"),t.layer.syncRequested=s,!0;default:return!1}}},97336:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MbwayDetails=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.MbwayDetails=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"checkoutAttemptId",baseName:"checkoutAttemptId",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"type",baseName:"type",type:"MbwayDetails.TypeEnum"}],function(e){let t;!function(e){e.Mbway="mbway"}(t=e.TypeEnum||(e.TypeEnum={}))}(s=t.MbwayDetails||(t.MbwayDetails={}))},97802:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(42268),a=s(21742),n=s(54738),r=s(40963),o=s(75770),h=s(82042),c=s(59350),l=s(22866),d=s(85337),p=s(71499);class u extends o.A{constructor(e){super("clone",e),this.mode="source",this.layerSelect=()=>{const e=this.selected===this.stage.fresco.getSelected();if(!this.stage.fresco.isSelectedType(l.A.TYPE_IMAGE))return(0,i.Ay)("clone-no-layer").style.display="flex",(0,i.Ay)("clone-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("clone-settings").style.display="flex",(0,i.Ay)("clone-no-layer").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,new r.A(0,0,this.stage.fresco.width,this.stage.fresco.height),"over"),this.flat=this.stage.getOutputCanvas(),this.stage.fresco.hasSelection()&&this.scratch.addBake(),e||(this.alignChange(),this.updateBrush())},this.alignChange=()=>{this.source=void 0,this.setMode("source")},this.toggleMode=()=>{this.setMode("paint"===this.mode?"source":"paint")},this.selectMode=e=>{this.setMode(e.currentTarget===(0,i.Ay)("clone-mode-paint")?"paint":"source")},this.setMode=e=>{this.mode=e,(0,i.Ay)("clone-mode-paint").checked="paint"===this.mode,(0,i.Ay)("clone-mode-source").checked="source"===this.mode,this.updateBrush()},this.isShiftDown=!1,this.keyDown=e=>{if("Shift"===e.key&&!this.isShiftDown)return this.isShiftDown=!0,void this.toggleMode();switch(e.key){case",":e.shiftKey?this.brushPod.stepSoftness(.1):this.brushPod.stepSize(-10);break;case".":e.shiftKey?this.brushPod.stepSoftness(-.1):this.brushPod.stepSize(10)}},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1,this.toggleMode())},this.updateBrush=()=>{this.selected?this.stage.coating.setCursorImage("source"===this.mode?null:this.brush.getCursorImage(this.stage.zoom)):this.stage.coating.removeCursorImage()},this.down=(e,t)=>{if(this.selected)return"source"==this.mode?(this.source=this.stage.translateRasterToFresco(e),this.offset=void 0,void(this.isShiftDown||this.toggleMode())):void(this.source?(this.stage.coating.freeze(!0),(0,i.Ay)("workspace").appendChild(this.sourceMarker),(0,i.Ay)("clone-aligned").checked&&this.offset||(this.offset=this.stage.translateRasterToFresco(e),this.offset.x=this.offset.x-this.source.x,this.offset.y=this.offset.y-this.source.y),this.x=this.y=-1,this.scratch.settings.opacity=this.opacity.getValue(),this.useFlat=(0,i.Ay)("clone-sample-all").checked,"touch"!==t&&this.move(e),this.addMoveListeners()):document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("selectSource")})))},this.x=-1,this.y=-1,this.move=e=>{let t=this.brush.getStep(),s=!1;if(this.sourceMarker.style.top=e.y-Math.round(this.offset.y*this.stage.zoom)+(this.stage.raster.offsetTop-16)+"px",this.sourceMarker.style.left=e.x-Math.round(this.offset.x*this.stage.zoom)+(this.stage.raster.offsetLeft-16)+"px",e=this.stage.translateRasterToFresco(e),-1==this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0),e.x!==this.x||e.y!==this.y){let i=e.x-this.x,a=e.y-this.y,n=i>0?1:-1,r=a>0?1:-1;if(i=i<0?-i:i,a=a<0?-a:a,i>a){let e=.5*i;for(let o=1;o<=i;o++)this.x+=n,e+=a,e>=i&&(e-=i,this.y+=r),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}else{let e=.5*a;for(let o=1;o<=a;o++)this.y+=r,e+=i,e>=a&&(e-=a,this.x+=n),(this.x>this.lx+t||this.x<this.lx-t||this.y>this.ly+t||this.y<this.ly-t)&&(this.lx=this.x,this.ly=this.y,this.drawShape(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),s=!0)}}s&&(this.scratch.applySelection(this.stage),window.requestAnimationFrame(()=>this.stage.render()))},this.drawShape=(e,t)=>{let s=this.getPatchContext(this.brush.canvas.width,this.brush.canvas.height);s.save();const i=this.selected.rect&&!this.useFlat?this.selected.rect.x:0,a=this.selected.rect&&!this.useFlat?this.selected.rect.y:0;s.drawImage(this.useFlat||!this.selected.canvas?this.flat:this.selected.canvas,-(e-this.offset.x-i),-(t-this.offset.y-a)),s.globalCompositeOperation="destination-in",s.drawImage(this.brush.canvas,0,0),s.restore(),this.scratch.ctx.drawImage(this.patch,e,t)},this.getPatchContext=(e,t)=>this.patch?(this.patch.width!==e||this.patch.height!==t?(this.patch.width=e,this.patch.height=t):this.ptx.clearRect(0,0,e,t),this.ptx):(this.patch=n.VI(e,t),this.ptx=this.patch.getContext("2d"),this.ptx),this.up=e=>{this.sourceMarker.remove(),this.stage.coating.freeze(!1),this.removeMoveListeners();let t=n.TL(this.scratch.canvas);if(t&&t.width>0&&t.height>0){let e=this.selected.rect?n.ON(this.selected.canvas,t.rebase(this.selected.rect.x,this.selected.rect.y)):void 0;const s=n.oM(this.selected.mask),i=this.selected.rect?this.selected.rect.clone():void 0;this.selected.extendCanvas(t),this.scratch.drawToLayer(this.selected,"source-over",this.opacity.getValue()),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"clone",layer:this.selected,patchRect:t.rebase(this.selected.rect.x,this.selected.rect.y),patch:e,rect:i,mask:s})}window.requestAnimationFrame(()=>this.stage.render())},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.sourceMarker.remove(),this.stage.coating.freeze(!1),this.removeMoveListeners(),this.removeDownListeners(),this.brushPod.cleanUp(),this.opacity.cleanUp(),document.removeEventListener("zoom-change",this.updateBrush,!1),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1),(0,i.Ay)("clone-mode-source").removeEventListener("click",this.selectMode,!1),(0,i.Ay)("clone-mode-paint").removeEventListener("click",this.selectMode,!1),(0,i.Ay)("clone-aligned").removeEventListener("change",this.alignChange,!1),this.selected=void 0,this.scratch=void 0,this.patch=void 0,this.flat=void 0,this.ptx=void 0},document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),(0,i.Ay)("clone-mode-source").addEventListener("click",this.selectMode,!1),(0,i.Ay)("clone-mode-paint").addEventListener("click",this.selectMode,!1),document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),this.brush=new c.A(new p.A),this.brushPod=new d.A(e,"clone-brush",this.brush,this.updateBrush),this.opacity=new h.A("clone-opacity",{compact:!0,label:(0,a.A)("opacity")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100}),(0,i.Ay)("clone-aligned").addEventListener("change",this.alignChange,!1),this.sourceMarker=document.createElement("img"),this.sourceMarker.src="/img/cursor/source.svg",this.sourceMarker.id="source-marker",this.addDownListeners(),this.setMode("source"),this.layerSelect()}}},98244:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(29755),a=s(79453);const n=(e,t)=>{var s,n,r;"undefined"==typeof gtag||(null!==(n=null===(s=window.dataLayer)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>1e3||gtag("event",e,{product:i.Ay.product,user_type:null!==(r=null===a.N||void 0===a.N?void 0:a.N.type)&&void 0!==r?r:"guest",label:t})}},98483:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(42268),a=s(21742),n=s(54738),r=s(79453),o=s(64483),h=s(81937),c=s(26806),l=s(50295),d=s(96703),p=s(3514);class u extends c.A{constructor(e){super((0,a.A)("titleRemoveNoise"),!1),this.messy=!1,this.working=!1,this.layerSelect=()=>{this.reset();const e=this.selected===this.stage.fresco.getSelected();this.selected&&!e&&this.apply(),this.stage.fresco.isSelectedImageWithCanvas()?((0,i.Ay)("remove-noise-no-layer").style.display="none",(0,i.Ay)("remove-noise-compare").style.display="none",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,this.selected.rect,"replace",this.selected.canvas)):(0,i.Ay)("remove-noise-no-layer").style.display="block"},this.showCreditPop=()=>{new d.A("credits")},this.renderCreditAmount=()=>{if(!r.N)return(0,i.Ay)("remove-noise-credit-count").style.display="none",(0,a.A)("common-signUpLogIn");(0,i.Ay)("remove-noise-credit-count").innerHTML=`${r.N.credits.toString()}`},this.execute=async()=>{if(r.N)if(r.N.credits){if(!this.working){this.working=!0,(0,i.Ay)("remove-noise-execute").classList.add("working");try{const e=await(0,o.o)(this.scratch.canvas);this.scratch.replaceCanvas(e),this.stage.render(),document.dispatchEvent(new CustomEvent("notification",{detail:"Voil!"})),(0,i.Ay)("remove-noise-compare").style.display="flex",(0,i.Ay)(`dialog-apply${this.mid}`).classList.remove("disabled"),this.renderCreditAmount()}catch(e){console.error(e),document.dispatchEvent(new CustomEvent("notification",{detail:(0,a.A)("genericError")}))}finally{this.working=!1,(0,i.Ay)("remove-noise-execute").classList.remove("working")}}}else r.N.subscription?new d.A("credits"):new p.A("remove-noise","credit");else new l.A},this.compareDown=()=>{this.scratch.setRenderMode("none"),window.requestAnimationFrame(()=>this.stage.render())},this.compareUp=()=>{this.scratch.setRenderMode("replace"),window.requestAnimationFrame(()=>this.stage.render())},this.cancelClick=()=>{document.dispatchEvent(new CustomEvent("tool-cancel")),document.dispatchEvent(new CustomEvent("select-tool",{detail:"ai"}))},this.apply=()=>{const e=n.oM(this.selected.canvas),t=this.selected.rect.clone();this.selected.canvas=this.scratch.canvas,this.stage.history.add({type:"bitmapSwitch",kind:"remove-noise",layer:this.selected,canvas:e,rect:t}),this.cleanUp()},this.reset=()=>{(0,i.Ay)("remove-noise-no-layer").style.display="none",(0,i.Ay)(`dialog-apply${this.mid}`).classList.add("disabled")},this.cancel=()=>{this.cleanUp()},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.stage.render(),document.removeEventListener("layer-select",this.layerSelect,!1),(0,i.Ay)("remove-noise-execute").removeEventListener("click",this.execute,!1),(0,i.Ay)("remove-noise-compare").removeEventListener("mousedown",this.compareDown,!1),(0,i.Ay)("remove-noise-compare").removeEventListener("touchstart",this.compareDown,!1),(0,i.Ay)("remove-noise-compare").removeEventListener("mouseup",this.compareUp,!1),(0,i.Ay)("remove-noise-compare").removeEventListener("touchend",this.compareUp,!1),(0,i.Ay)("remove-noise-credit-count").removeEventListener("click",this.showCreditPop,!1),this.selected=void 0,this.scratch=void 0,super.cleanUp()},this.stage=e,this.dialog.style.maxWidth="380px",this.setContent(`\n            <div id="remove-noise-content" style="flex:0 0 auto;width:100%;position:relative;overflow: hidden;">\n                <div id="generative-expand-base" style="padding:20px;overflow: hidden;">\n    \n                    <section id="remove-noise-no-layer">\n                        <span class="tip top-20"><img src="/img/icon/tip-lock.svg" width="16" height="16" loading="lazy" class="tip-icon ic"/>${(0,a.A)("genericNoImageMessage")}</span>\n                    </section>\n\n                    <div id="remove-noise-desc" class="tip" style="gap: 2px;"><img src="/img/icon/tip-bulb.svg" width="16" height="16" loading="lazy" class="tip-icon ic"/>\n                        <span>${(0,a.A)("removeNoiseDesc")}</span>\n                    </div>\n                \n                    <div id="remove-noise-execute" class="button positive top-30" style="width: 100%; height: 34px;"><img src="/img/tool/wand.svg" width="18" height="18" loading="lazy">${(0,a.A)("removeNoise")} (1c)</div>\n                    <div id="remove-noise-compare" style="padding: 30px 40px 10px 40px">\n                        <a class="button outline flow-down w-100" tooltip="${(0,a.A)("holdDown")}" flow="up"><img src="/img/icon/compare-small.svg" class="ic" width="16" height="16" loading="lazy">${(0,a.A)("compare")}</a>\n                    </div>\n\n                </div>\n               \n            </div>\n        `),(0,i.Ay)(`dialog-buttons${this.mid}`).insertBefore((0,i.T)("div",{id:"remove-noise-credit-count",className:"credit-meter",onclick:this.showCreditPop},""),(0,i.Ay)(`dialog-cancel${this.mid}`)),document.addEventListener("layer-select",this.layerSelect,!1),(0,i.Ay)("remove-noise-execute").addEventListener("click",this.execute,!1),(0,i.Ay)("remove-noise-compare").addEventListener("mousedown",this.compareDown,!1),(0,i.Ay)("remove-noise-compare").addEventListener("touchstart",this.compareDown,!1),(0,i.Ay)("remove-noise-compare").addEventListener("mouseup",this.compareUp,!1),(0,i.Ay)("remove-noise-compare").addEventListener("touchend",this.compareUp,!1),new h.A((0,i.Ay)("remove-noise-content")),this.layerSelect(),this.renderCreditAmount()}}},98721:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateCheckoutSessionResponse=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.CreateCheckoutSessionResponse=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"accountInfo",baseName:"accountInfo",type:"AccountInfo"},{name:"additionalAmount",baseName:"additionalAmount",type:"Amount"},{name:"additionalData",baseName:"additionalData",type:"{ [key: string]: string; }"},{name:"allowedPaymentMethods",baseName:"allowedPaymentMethods",type:"Array<string>"},{name:"amount",baseName:"amount",type:"Amount"},{name:"applicationInfo",baseName:"applicationInfo",type:"ApplicationInfo"},{name:"authenticationData",baseName:"authenticationData",type:"AuthenticationData"},{name:"billingAddress",baseName:"billingAddress",type:"BillingAddress"},{name:"blockedPaymentMethods",baseName:"blockedPaymentMethods",type:"Array<string>"},{name:"captureDelayHours",baseName:"captureDelayHours",type:"number"},{name:"channel",baseName:"channel",type:"CreateCheckoutSessionResponse.ChannelEnum"},{name:"company",baseName:"company",type:"Company"},{name:"countryCode",baseName:"countryCode",type:"string"},{name:"dateOfBirth",baseName:"dateOfBirth",type:"Date"},{name:"deliverAt",baseName:"deliverAt",type:"Date"},{name:"deliveryAddress",baseName:"deliveryAddress",type:"DeliveryAddress"},{name:"enableOneClick",baseName:"enableOneClick",type:"boolean"},{name:"enablePayOut",baseName:"enablePayOut",type:"boolean"},{name:"enableRecurring",baseName:"enableRecurring",type:"boolean"},{name:"expiresAt",baseName:"expiresAt",type:"Date"},{name:"fundOrigin",baseName:"fundOrigin",type:"FundOrigin"},{name:"fundRecipient",baseName:"fundRecipient",type:"FundRecipient"},{name:"id",baseName:"id",type:"string"},{name:"installmentOptions",baseName:"installmentOptions",type:"{ [key: string]: CheckoutSessionInstallmentOption; }"},{name:"lineItems",baseName:"lineItems",type:"Array<LineItem>"},{name:"mandate",baseName:"mandate",type:"Mandate"},{name:"mcc",baseName:"mcc",type:"string"},{name:"merchantAccount",baseName:"merchantAccount",type:"string"},{name:"merchantOrderReference",baseName:"merchantOrderReference",type:"string"},{name:"metadata",baseName:"metadata",type:"{ [key: string]: string; }"},{name:"mode",baseName:"mode",type:"CreateCheckoutSessionResponse.ModeEnum"},{name:"mpiData",baseName:"mpiData",type:"ThreeDSecureData"},{name:"platformChargebackLogic",baseName:"platformChargebackLogic",type:"PlatformChargebackLogic"},{name:"recurringExpiry",baseName:"recurringExpiry",type:"string"},{name:"recurringFrequency",baseName:"recurringFrequency",type:"string"},{name:"recurringProcessingModel",baseName:"recurringProcessingModel",type:"CreateCheckoutSessionResponse.RecurringProcessingModelEnum"},{name:"redirectFromIssuerMethod",baseName:"redirectFromIssuerMethod",type:"string"},{name:"redirectToIssuerMethod",baseName:"redirectToIssuerMethod",type:"string"},{name:"reference",baseName:"reference",type:"string"},{name:"returnUrl",baseName:"returnUrl",type:"string"},{name:"riskData",baseName:"riskData",type:"RiskData"},{name:"sessionData",baseName:"sessionData",type:"string"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperIP",baseName:"shopperIP",type:"string"},{name:"shopperInteraction",baseName:"shopperInteraction",type:"CreateCheckoutSessionResponse.ShopperInteractionEnum"},{name:"shopperLocale",baseName:"shopperLocale",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"shopperStatement",baseName:"shopperStatement",type:"string"},{name:"showInstallmentAmount",baseName:"showInstallmentAmount",type:"boolean"},{name:"showRemovePaymentMethodButton",baseName:"showRemovePaymentMethodButton",type:"boolean"},{name:"socialSecurityNumber",baseName:"socialSecurityNumber",type:"string"},{name:"splitCardFundingSources",baseName:"splitCardFundingSources",type:"boolean"},{name:"splits",baseName:"splits",type:"Array<Split>"},{name:"store",baseName:"store",type:"string"},{name:"storePaymentMethod",baseName:"storePaymentMethod",type:"boolean"},{name:"storePaymentMethodMode",baseName:"storePaymentMethodMode",type:"CreateCheckoutSessionResponse.StorePaymentMethodModeEnum"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"themeId",baseName:"themeId",type:"string"},{name:"threeDSAuthenticationOnly",baseName:"threeDSAuthenticationOnly",type:"boolean"},{name:"trustedShopper",baseName:"trustedShopper",type:"boolean"},{name:"url",baseName:"url",type:"string"}],function(e){let t,s,i,a,n;!function(e){e.IOs="iOS",e.Android="Android",e.Web="Web"}(t=e.ChannelEnum||(e.ChannelEnum={})),function(e){e.Embedded="embedded",e.Hosted="hosted"}(s=e.ModeEnum||(e.ModeEnum={})),function(e){e.CardOnFile="CardOnFile",e.Subscription="Subscription",e.UnscheduledCardOnFile="UnscheduledCardOnFile"}(i=e.RecurringProcessingModelEnum||(e.RecurringProcessingModelEnum={})),function(e){e.Ecommerce="Ecommerce",e.ContAuth="ContAuth",e.Moto="Moto",e.Pos="POS"}(a=e.ShopperInteractionEnum||(e.ShopperInteractionEnum={})),function(e){e.AskForConsent="askForConsent",e.Disabled="disabled",e.Enabled="enabled"}(n=e.StorePaymentMethodModeEnum||(e.StorePaymentMethodModeEnum={}))}(s=t.CreateCheckoutSessionResponse||(t.CreateCheckoutSessionResponse={}))},98762:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(42268),a=s(26806);class n extends a.A{constructor(){super("Keybord Shortcuts",!0),this.dialog.style.width="800px",this.dialog.style.maxWidth="800px",this.content.style.paddingBottom="0px",this.setContent('\n            <div id="keyboard-shortcuts" class="flex">\n            \n            <div class="third" style="margin-right:20px;">\n                <label>New <span>Ctrl+E</span></label>\n                <label>Open <span>Ctrl+O</span></label>\n                <label>Save <span>Ctrl+S</span></label>\n                <label>Print <span>Ctrl+P</span></label>\n                <label>Close <span>Ctrl+Q</span></label>\n\n                <label>Delete / Clear <span>DEL</span></label>\n\n                <div class="splitter small top-20"></div>\n\n                <label>Zoom In <span>Ctrl++</span></label>\n                <label>Zoom Out <span>Ctrl+-</span></label>\n                <label>Zoom Fit <span>Ctrl+0</span></label>\n                <label>Zoom 1X <span>Ctrl+1</span></label>\n                <label>Zoom Fill <span>Ctrl+2</span></label>\n                <label>Zoom 3X <span>Ctrl+3</span></label>\n                <label>Pan / Move<span>Spacebar</span></label>\n                <div class="splitter small top-20"></div>\n                <label>Brush size up <span>.</span></label>\n                <label>Brush size down <span>,</span></label>\n                <label>Brush softness less <span>Shift+.</span></label>\n                <label>Brush softness more <span>Shift+,</span></label>\n\n            </div>\n            <div class="third" style="margin-left:20px;">\n\n                <label>Arrange <span>V</span></label>\n                <label>Marquee <span>M</span></label>\n                <label>Lasso <span>L</span></label>\n                <label>Wand <span>W</span></label>\n                <label>Crop <span>C</span></label>\n                <label>Cutout <span>K</span></label>\n                <label>Liquify <span>Q</span></label>\n                <label>Heal <span>H</span></label>\n                <label>Clone <span>S</span></label>\n                <label>Blur / Sharpen <span>D</span></label>\n                <label>Dodge / Burn <span>O</span></label>\n                <label>Sponge/ Color <span>R</span></label>\n                <label>Pen <span>P</span></label>\n                <label>Draw <span>B</span></label>\n                <label>Eraser <span>E</span></label>\n                <label>Fill <span>F</span></label>\n                <label>Color replace <span>A</span></label>\n                <label>Shape <span>U</span></label>\n                <label>Text <span>T</span></label>\n                <label>Switch colors <span>X</span></label>\n            </div>\n            <div class="third" style="margin-left:20px;">\n\n                <label>Undo <span>Ctrl+Z</span></label>\n                <label>Redo <span>Ctrl+Y</span></label>\n                <label>Cut <span>Ctrl+X</span></label>\n                <label>Copy <span>Ctrl+C</span></label>\n                <label>Paste <span>Ctrl+V</span></label>\n                \n                <div class="splitter small top-20"></div>\n                <label>Free transform <span>Ctrl+R</span></label>\n                <label>Free distort <span>Ctrl+K</span></label>\n                <label>Select all <span>Ctrl+A</span></label>\n                <label>Deselect <span>Ctrl+D</span></label>\n                <label>Invert selction <span>Ctrl+I</span></label>\n\n                <div class="splitter small top-20"></div>\n\n                <label>Move \n                    <span>&#8593;</span>\n                    <span>&#8595;</span>\n                    <span>&#8592;</span>\n                    <span>&#8594;</span>\n                \n                </label>\n                <br />\n                <small>Hold down Shift to step 10px</small>\n                <div class="splitter small top-20"></div>\n\n            </div>\n        </div>\n        '),(0,i.Ay)("dialog-apply"+this.mid).style.display="none",(0,i.Ay)("dialog-cancel"+this.mid).innerText="close"}}},98865:(e,t,s)=>{s.d(t,{A:()=>g});var i=s(42268),a=s(21742),n=s(54738),r=s(40963),o=s(75770),h=s(82042),c=s(15818),l=s(29755),d=s(59350),p=s(22866),u=s(85337),m=s(71499);class g extends o.A{constructor(e){super("draw",e),this.stage=e,this.isShiftDown=!1,this.keyDown=e=>{if("Shift"!==e.key)if("Control"!==e.key||this.stage.coating.override)switch(e.key){case",":e.shiftKey?this.brushPod.stepSoftness(.1):this.brushPod.stepSize(-10);break;case".":e.shiftKey?this.brushPod.stepSoftness(-.1):this.brushPod.stepSize(10)}else this.stage.coating.setPicker();else this.isShiftDown=!0},this.keyUp=e=>{"Shift"===e.key&&(this.isShiftDown=!1),"Control"===e.key&&this.stage.coating.override&&this.stage.coating.removePicker()},this.layerSelect=()=>{if(!this.stage.fresco.isSelectedType(p.A.TYPE_IMAGE))return(0,i.Ay)("draw-no-layer").style.display="flex",(0,i.Ay)("draw-settings").style.display="none",this.selected=null,void this.updateBrush();(0,i.Ay)("draw-no-layer").style.display="none",(0,i.Ay)("draw-settings").style.display="flex",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,new r.A(0,0,this.stage.fresco.width,this.stage.fresco.height),"over"),this.stage.fresco.hasSelection()&&this.scratch.addBake(),this.updateBrush()},this.updateBrush=()=>{this.selected?this.stage.coating.setCursorImage(this.brush.getCursorImage(this.stage.zoom,new c.A(255,255,255,255))):this.stage.coating.removeCursorImage(),this.lastTip=void 0,this.lastColor=void 0,this.lastSettings=void 0},this.down=(e,t,s)=>{if(!this.selected)return;this.stage.coating.freeze(!0),this.isShiftDown||(this.x=this.y=-1);let a=c.A.fromHEX(l.Ay.mainColor),n=(0,i.Ay)("draw-hard-tip").checked;!m.A.isEqual(this.brush.settings,this.lastSettings)&&a.isEqual(this.lastColor)&&n===this.lastTip||(this.brush.generate(a,n),this.lastSettings=this.brush.settings,this.lastColor=a,this.lastTip=n),this.scratch.settings.opacity=this.opacity.getValue(),this.mirror=(0,i.Ay)("draw-mirror").value,this.scatter=(0,i.Ay)("draw-scatter").checked,this.usePen=(0,i.Ay)("draw-pen-pressure").checked,"touch"!==t&&this.move(e,t,s),this.addMoveListeners()},this.x=-1,this.y=-1,this.move=(e,t,s=1)=>{let i=this.brush.getStep(),a=!1;if(this.scratch.ctx.globalAlpha=("pen"===t||"touch"===t)&&this.usePen&&s>0?s*s:this.flow.getValue(),e=this.stage.translateRasterToFresco(e),-1===this.x&&(this.lx=e.x,this.ly=e.y,this.x=e.x,this.y=e.y,this.scratch.ctx.drawImage(this.brush.canvas,this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),a=!0),e.x!==this.x||e.y!==this.y){let t=e.x-this.x,s=e.y-this.y,n=t>0?1:-1,r=s>0?1:-1;if(t=t<0?-t:t,s=s<0?-s:s,t>s){let e=.5*t;for(let o=1;o<=t;o++)this.x+=n,e+=s,e>=t&&(e-=t,this.y+=r),(this.x>this.lx+i||this.x<this.lx-i||this.y>this.ly+i||this.y<this.ly-i)&&(this.draw(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),this.lx=this.x,this.ly=this.y,a=!0)}else{let e=.5*s;for(let o=1;o<=s;o++)this.y+=r,e+=t,e>=s&&(e-=s,this.x+=n),(this.x>this.lx+i||this.x<this.lx-i||this.y>this.ly+i||this.y<this.ly-i)&&(this.draw(this.x-~~(this.brush.canvas.width/2),this.y-~~(this.brush.canvas.height/2)),this.lx=this.x,this.ly=this.y,a=!0)}}a&&(this.scratch.applySelection(this.stage),window.requestAnimationFrame(()=>this.stage.render()))},this.draw=(e,t)=>{if(this.scatter){const s=.5*(this.brush.canvas.width+this.brush.canvas.height);e+=Math.round(Math.random()*s-.5*s),t+=Math.round(Math.random()*s-.5*s)}if(this.scratch.ctx.drawImage(this.brush.canvas,e,t),"vertical"===this.mirror||"fourway"===this.mirror){let s=this.scratch.rect.width-e;this.scratch.ctx.drawImage(this.brush.canvas,s,t)}if("horizontal"===this.mirror||"fourway"===this.mirror){let s=this.scratch.rect.height-t;this.scratch.ctx.drawImage(this.brush.canvas,e,s)}if("fourway"===this.mirror){let s=this.scratch.rect.width-e,i=this.scratch.rect.height-t;this.scratch.ctx.drawImage(this.brush.canvas,s,i)}},this.up=e=>{this.stage.coating.freeze(!1),this.removeMoveListeners();const t=n.TL(this.scratch.canvas);if(t&&t.width>0&&t.height>0){let e=this.selected.rect?n.ON(this.selected.canvas,t.rebase(this.selected.rect.x,this.selected.rect.y)):void 0;const s=n.oM(this.selected.mask),i=this.selected.rect?this.selected.rect.clone():void 0;this.selected.extendCanvas(t),this.scratch.drawToLayer(this.selected,"source-over",this.opacity.getValue()),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"draw",layer:this.selected,patchRect:this.selected.rect?t.rebase(this.selected.rect.x,this.selected.rect.y):t,patch:e,rect:i,mask:s})}window.requestAnimationFrame(()=>this.stage.render())},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.stage.coating.removePicker(),this.brushPod.cleanUp(),this.opacity.cleanUp(),this.flow.cleanUp(),this.stage.coating.freeze(!1),this.removeMoveListeners(),this.removeDownListeners(),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("zoom-change",this.updateBrush,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1)},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("zoom-change",this.updateBrush,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),this.brush=new d.A(new m.A),this.brushPod=new u.A(e,"draw-brush",this.brush,this.updateBrush),this.opacity=new h.A("draw-opacity",{compact:!0,label:(0,a.A)("opacity")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100}),this.flow=new h.A("draw-flow",{compact:!0,label:(0,a.A)("flow")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%",labelParse:e=>parseInt(e,10)/100}),this.addDownListeners(),this.layerSelect()}}},98916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SubMerchant=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.SubMerchant=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"city",baseName:"city",type:"string"},{name:"country",baseName:"country",type:"string"},{name:"mcc",baseName:"mcc",type:"string"},{name:"name",baseName:"name",type:"string"},{name:"taxId",baseName:"taxId",type:"string"}]},98938:(e,t,s)=>{s.d(t,{i:()=>n});var i=s(54738),a=s(53900);async function n(e,t){let s;const n=(await i.r$(e)).replace("data:image/jpeg;base64,","");s=t instanceof a.A?{image_b64:n,target_width:t.width,target_height:t.height}:{image_b64:n,scale:t};const r=await fetch("/api/ai/super-scale",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}),o=await r.json();return i.$e(o.data)}},99189:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(2215),a=s(82042),n=s(42268),r=s(21742),o=s(54738);class h extends i.A{constructor(e){super(e,(0,r.A)("titleClarity")),this.update=o.eD(50,e=>{this.change("clarity",e)}),this.setContent((0,n.T)("div",{id:"clarity-slider"})),new a.A("clarity-slider",{label:(0,r.A)("amount"),step:.01,range:[-1,1],labelFormat:e=>`${Math.round(100*e)}`,labelParse:e=>parseInt(e,10)/100,onChange:e=>this.update(e)})}}},99732:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FundRecipient=void 0;class s{static getAttributeTypeMap(){return s.attributeTypeMap}}t.FundRecipient=s,s.discriminator=void 0,s.attributeTypeMap=[{name:"billingAddress",baseName:"billingAddress",type:"Address"},{name:"paymentMethod",baseName:"paymentMethod",type:"CardDetails"},{name:"shopperEmail",baseName:"shopperEmail",type:"string"},{name:"shopperName",baseName:"shopperName",type:"Name"},{name:"shopperReference",baseName:"shopperReference",type:"string"},{name:"storedPaymentMethodId",baseName:"storedPaymentMethodId",type:"string"},{name:"subMerchant",baseName:"subMerchant",type:"SubMerchant"},{name:"telephoneNumber",baseName:"telephoneNumber",type:"string"},{name:"walletIdentifier",baseName:"walletIdentifier",type:"string"},{name:"walletOwnerTaxId",baseName:"walletOwnerTaxId",type:"string"}]},99810:(e,t,s)=>{s.d(t,{A:()=>u});var i=s(42268),a=s(21742),n=s(54738),r=s(67983),o=s(40963),h=s(75770),c=s(82042),l=s(15818),d=s(29755),p=s(22866);class u extends h.A{constructor(e){super("fill",e),this.keyDown=e=>{"Control"!==e.key||this.stage.coating.override||this.stage.coating.setPicker()},this.keyUp=e=>{"Control"===e.key&&this.stage.coating.override&&this.stage.coating.removePicker()},this.layerSelect=()=>{if(!this.stage.fresco.isSelectedType(p.A.TYPE_IMAGE))return(0,i.Ay)("fill-no-layer").style.display="flex",(0,i.Ay)("fill-settings").style.display="none",this.stage.raster.style.cursor="unset",void(this.selected=null);(0,i.Ay)("fill-settings").style.display="flex",(0,i.Ay)("fill-no-layer").style.display="none",this.stage.raster.style.cursor="crosshair",this.selected=this.stage.fresco.getSelected(),this.scratch=this.stage.fresco.addScratch(),this.scratch.setTarget(this.selected.id,new o.A(0,0,this.stage.fresco.width,this.stage.fresco.height),"over")},this.down=e=>{if(!this.selected)return;if((e=this.stage.translateRasterToFresco(e)).x<0||e.y<0||e.x>this.scratch.canvas.width||e.y>this.scratch.canvas.height)return;let t,s=this.tolerance.getValue(),a=l.A.fromHEX(d.Ay.mainColor);if(this.selected.canvas&&this.selected.rect){if(this.stage.coating.animateCursorTap(),this.scratch.rect.equalTo(this.selected.rect)){const e=this.selected.canvas.getContext("2d");this.canvasData=e.getImageData(0,0,this.selected.canvas.width,this.selected.canvas.height).data}else{let e=n.Nw(this.scratch.canvas.width,this.scratch.canvas.height),t=e.getContext("2d");t.drawImage(this.selected.canvas,this.selected.rect.x,this.selected.rect.y),this.canvasData=t.getImageData(0,0,e.width,e.height).data,t=void 0}if(this.selected.rect.isInside(e)){const s=4*(e.y*this.scratch.canvas.width+e.x);t=new l.A(this.canvasData[s],this.canvasData[s+1],this.canvasData[s+2],this.canvasData[s+3])}else t=new l.A(0,0,0,0);let r=this.scratch.ctx.getImageData(0,0,this.scratch.canvas.width,this.scratch.canvas.height);this.scratchData=r.data,(0,i.Ay)("fill-contiguous").checked?this.floodFill(e,t,a,s,(0,i.Ay)("fill-anti-alias").checked):this.allFill(t,a,s,(0,i.Ay)("fill-anti-alias").checked),this.scratch.ctx.putImageData(r,0,0)}else this.scratch.ctx.fillStyle=a.toRGBA(255*this.opacity.getValue()),this.scratch.ctx.fillRect(0,0,this.scratch.canvas.width,this.scratch.canvas.height);this.scratch.applySelection(this.stage);let r=n.TL(this.scratch.getCanvas());if(r&&r.width>0&&r.height>0){let e=this.selected.rect?n.ON(this.selected.canvas,r.rebase(this.selected.rect.x,this.selected.rect.y)):void 0;const t=this.selected.rect?this.selected.rect.clone():void 0,s=n.oM(this.selected.mask);this.selected.extendCanvas(r),this.scratch.drawToLayer(this.selected,"source-over",this.opacity.getValue()),this.scratch.clear(),this.selected.render(),this.stage.history.add({type:"bitmapChange",kind:"fill",layer:this.selected,patchRect:this.selected.rect?r.rebase(this.selected.rect.x,this.selected.rect.y):r,patch:e,rect:t,mask:s})}window.requestAnimationFrame(()=>this.stage.render())},this.allFill=(e,t,s,i)=>{for(var a,n,r=0,o=this.scratch.canvas.height;r<o;++r)for(var h=0,c=this.scratch.canvas.width;h<c;++h)n=4*(r*c+h),(a=this.tolerate(n,e,s,i))>64&&(a>128&&(a=255),this.scratchData[n]=t.r,this.scratchData[n+1]=t.g,this.scratchData[n+2]=t.b,this.scratchData[n+3]=a)},this.floodFill=(e,t,s,i,a)=>{let n=this.scratch.canvas.width,r=this.scratch.canvas.height,o=new Array,h=new Array(n*r);for(this.linearFill(e.x,e.y,t,s,i,a,o,h);o.length>0;)for(var c=o.shift(),l=c.start;l<=c.stop;++l)c.row>0&&!h[(c.row-1)*n+l]&&this.linearFill(l,c.row-1,t,s,i,a,o,h),c.row<r-1&&!h[(c.row+1)*n+l]&&this.linearFill(l,c.row+1,t,s,i,a,o,h)},this.linearFill=(e,t,s,i,a,n,o,h)=>{var c=this.scratch.canvas.width;h[c*t+e]=!0;let l=4*(c*t+e),d=this.tolerate(l,s,a,n);if(d>5&&(this.scratchData[l]=i.r,this.scratchData[l+1]=i.g,this.scratchData[l+2]=i.b,this.scratchData[l+3]=d>160?255:d),d>64){for(var p=e-1,u=e+1;p>=0&&!h[c*t+p]&&d>64;)h[c*t+p]=!0,l=4*(c*t+p),d=this.tolerate(l,s,a,n),d>5&&(this.scratchData[l]=i.r,this.scratchData[l+1]=i.g,this.scratchData[l+2]=i.b,this.scratchData[l+3]=d>160?255:d),--p;for(d=255;u<c&&!h[c*t+u]&&d>64;)h[c*t+u]=!0,l=4*(c*t+u),d=this.tolerate(l,s,a,n),d>5&&(this.scratchData[l]=i.r,this.scratchData[l+1]=i.g,this.scratchData[l+2]=i.b,this.scratchData[l+3]=d>160?255:d),++u;o.push(new r.A(p+1,u-1,t))}},this.tolerate=(e,t,s,i=!1)=>{let a,n,r,o,h,c,l;return o=t.a-this.canvasData[e+3],n=o<0?-o:o,t.a>0&&(h=t.r-this.canvasData[e],a=h<0?-h:h,a>n&&(n=a),c=t.g-this.canvasData[e+1],a=c<0?-c:c,a>n&&(n=a),l=t.b-this.canvasData[e+2],a=l<0?-l:l,a>n&&(n=a)),i&&s>0?(r=1.5-n/s,r<=0?0:r<.5?Math.round(512*r):255):n>s?0:255},this.cleanUp=()=>{var e;null===(e=this.stage.fresco)||void 0===e||e.removeScratch(),this.stage.coating.removePicker(),this.removeDownListeners(),this.tolerance.cleanUp(),this.opacity.cleanUp(),document.removeEventListener("layer-select",this.layerSelect,!1),document.removeEventListener("keydown",this.keyDown,!1),document.removeEventListener("keyup",this.keyUp,!1)},document.addEventListener("layer-select",this.layerSelect,!1),document.addEventListener("keydown",this.keyDown,!1),document.addEventListener("keyup",this.keyUp,!1),this.tolerance=new c.A("fill-tolerance",{compact:!0,label:(0,a.A)("tolerance")+":",defaultValue:32,range:[0,255],step:1}),this.opacity=new c.A("fill-opacity",{compact:!0,label:(0,a.A)("opacity")+":",defaultValue:1,labelFormat:e=>(100*e).toFixed(0)+"%"}),this.addDownListeners(),this.layerSelect()}}}},l={};function d(e){var t=l[e];if(void 0!==t)return t.exports;var s=l[e]={id:e,loaded:!1,exports:{}};return c[e].call(s.exports,s,s.exports,d),s.loaded=!0,s.exports}d.m=c,e="function"==typeof Symbol,t=e?Symbol("webpack queues"):"__webpack_queues__",s=e?Symbol("webpack exports"):"__webpack_exports__",i=e?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},d.a=(e,n,r)=>{var o;r&&((o=[]).d=-1);var h,c,l,d=new Set,p=e.exports,u=new Promise((e,t)=>{l=t,c=e});u[s]=p,u[t]=e=>(o&&e(o),d.forEach(e),u.catch(e=>{})),e.exports=u,n(e=>{var n;h=(e=>e.map(e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then(e=>{r[s]=e,a(n)},e=>{r[i]=e,a(n)});var r={};return r[t]=e=>e(n),r}}var o={};return o[t]=e=>{},o[s]=e,o}))(e);var r=()=>h.map(e=>{if(e[i])throw e[i];return e[s]}),c=new Promise(e=>{(n=()=>e(r)).r=0;var s=e=>e!==o&&!d.has(e)&&(d.add(e),e&&!e.d&&(n.r++,e.push(n)));h.map(e=>e[t](s))});return n.r?c:r()},e=>(e?l(u[i]=e):c(p),a(o))),o&&o.d<0&&(o.d=0)},d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,d.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var s=Object.create(null);d.r(s);var i={};n=n||[null,r({}),r([]),r(r)];for(var a=2&t&&e;("object"==typeof a||"function"==typeof a)&&!~n.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach(t=>i[t]=()=>e[t]);return i.default=()=>e,d.d(s,i),s},d.d=(e,t)=>{for(var s in t)d.o(t,s)&&!d.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce((t,s)=>(d.f[s](e,t),t),[])),d.u=e=>(({885:"pdf-lib",1161:"infill",2904:"ffmpeg",4990:"tiff",5395:"gif",7162:"checkout.modal",8636:"adyen",9262:"native"}[e]||e)+"."+{28:"3275da0dd43eac2a5ded",76:"bfc6ebb53f0e0ace9474",106:"9a81c4db1e4fdb899079",443:"b4e92625b5f51a4fe0b9",885:"fe234677cea191f10a36",936:"aca8c630d3c70bd0f234",1161:"d1ba4c3374bc877eab7a",1455:"87708be097564bc1fb1e",1810:"87c2ea190140d199f214",1983:"e536a89879c027057aa2",1993:"42c6cbfeb0ad2e669eb4",2016:"26a66cdb88309c105ccf",2355:"497e2a5af120b66fdf28",2724:"fe7f7084b545bfe3c4d6",2904:"3a940c9862bedfe4b102",3220:"b79e590fe5ff2eb8003c",3329:"b8c0545ea91d3dbf5b77",3846:"456acaa935f7025121ce",4224:"009b2b76d4e5191a0355",4990:"01bf088bbf7c5cce3622",5234:"8dbae2542dd002e1cb2c",5395:"e53f6b460b0073e12add",5404:"aca2f0987ced7a9c591e",5480:"aaa36a16d14c6665be0f",5746:"2afab85482d7897e3ede",5778:"c6ee563248be456bcf6d",5884:"57d694d8d1107d551ed4",5896:"16d0eed257dd1c039047",6825:"9da1249fbcd48f1796ad",7162:"92b89d267af1d6dea099",7687:"e6f65527014cb98a7872",7796:"6bce38914e55293b0007",8090:"2b65662f447a9010a173",8636:"e07bad68ce943020e479",8746:"ad25d6e6e00c02914297",8876:"b2bde52d10b8a93fe3d7",9262:"aec91516411bb7111d2b"}[e]+".js"),d.miniCssF=e=>{},d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},h="pixlr:",d.l=(e,t,s,i)=>{if(o[e])o[e].push(t);else{var a,n;if(void 0!==s)for(var r=document.getElementsByTagName("script"),c=0;c<r.length;c++){var l=r[c];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==h+s){a=l;break}}a||(n=!0,(a=document.createElement("script")).charset="utf-8",d.nc&&a.setAttribute("nonce",d.nc),a.setAttribute("data-webpack",h+s),a.src=e),o[e]=[t];var p=(t,s)=>{a.onerror=a.onload=null,clearTimeout(u);var i=o[e];if(delete o[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(s)),t)return t(s)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),n&&document.head.appendChild(a)}},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.j=6008,d.v=(e,t,s,i)=>{var a=fetch(d.p+""+s+".module.wasm"),n=()=>a.then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,i)).then(t=>Object.assign(e,t.instance.exports));return a.then(t=>"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(t,i).then(t=>Object.assign(e,t.instance.exports),e=>{if("application/wasm"!==t.headers.get("Content-Type"))return console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),n();throw e}):n())},d.p="/dist/",(()=>{d.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={2355:0,6008:0,6825:0,9262:0};d.f.j=(t,s)=>{var i=d.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else{var a=new Promise((s,a)=>i=e[t]=[s,a]);s.push(i[2]=a);var n=d.p+d.u(t),r=new Error;d.l(n,s=>{if(d.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;r.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",r.name="ChunkLoadError",r.type=a,r.request=n,i[1](r)}},"chunk-"+t,t)}};var t=(t,s)=>{var i,a,[n,r,o]=s,h=0;if(n.some(t=>0!==e[t])){for(i in r)d.o(r,i)&&(d.m[i]=r[i]);if(o)o(d)}for(t&&t(s);h<n.length;h++)a=n[h],d.o(e,a)&&e[a]&&e[a][0](),e[a]=0},s=self.webpackChunkpixlr=self.webpackChunkpixlr||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),d.nc=void 0;var p=d(55696);editor=p})();